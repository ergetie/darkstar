============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /home/s/sync/documents/projects/darkstar/venv/bin/python
cachedir: .pytest_cache
rootdir: /home/s/sync/documents/projects/darkstar
configfile: pyproject.toml
plugins: anyio-4.12.0
collecting ... collected 1 item

tests/test_schedule_history_overlay.py::test_today_with_history_includes_planned_actions[asyncio] DEBUG: Returned 92 slots
DEBUG SLOT: {'start_time': '2026-01-14T01:00:00+01:00', 'end_time': '2026-01-14T00:15:00+01:00', 'import_price_sek_kwh': 1.55, 'export_price_sek_kwh': 0.55, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.33, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.61, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.3, 'end_time_kepler': '2026-01-14T01:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.3, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 10.6, 'kepler_cost_sek': 0.46, 'planned_cost_sek': 0.46, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 10.6, 'projected_soc_percent': 31.0, 'grid_import_kw': 1.19, 'grid_export_kw': 0.0, 'import_kwh': 0.3, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 31.0, 'slot_number': 1, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T01:15:00+01:00', 'end_time': '2026-01-14T00:30:00+01:00', 'import_price_sek_kwh': 1.54, 'export_price_sek_kwh': 0.55, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.3, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.71, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.26, 'end_time_kepler': '2026-01-14T01:30:00+01:00', 'kepler_charge_kwh': 0.71, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.96, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 11.27, 'kepler_cost_sek': 1.48, 'planned_cost_sek': 1.48, 'battery_charge_kw': 2.83, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 2.83, 'projected_soc_kwh': 11.27, 'projected_soc_percent': 32.96, 'grid_import_kw': 3.85, 'grid_export_kw': 0.0, 'import_kwh': 0.96, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 2, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T01:30:00+01:00', 'end_time': '2026-01-14T00:45:00+01:00', 'import_price_sek_kwh': 1.54, 'export_price_sek_kwh': 0.55, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.3, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.71, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.26, 'end_time_kepler': '2026-01-14T01:45:00+01:00', 'kepler_charge_kwh': 1.74, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 12.93, 'kepler_cost_sek': 3.08, 'planned_cost_sek': 3.08, 'battery_charge_kw': 6.98, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 6.98, 'projected_soc_kwh': 12.93, 'projected_soc_percent': 37.81, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 3, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T01:45:00+01:00', 'end_time': '2026-01-14T01:00:00+01:00', 'import_price_sek_kwh': 1.53, 'export_price_sek_kwh': 0.54, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.3, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.71, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.26, 'end_time_kepler': '2026-01-14T02:00:00+01:00', 'kepler_charge_kwh': 1.74, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 14.59, 'kepler_cost_sek': 3.06, 'planned_cost_sek': 3.06, 'battery_charge_kw': 6.98, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 6.98, 'projected_soc_kwh': 14.59, 'projected_soc_percent': 42.66, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 4, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T02:00:00+01:00', 'end_time': '2026-01-14T01:15:00+01:00', 'import_price_sek_kwh': 1.54, 'export_price_sek_kwh': 0.55, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.3, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.19, 'load_p90': 0.44, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.29, 'end_time_kepler': '2026-01-14T02:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.29, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 14.59, 'kepler_cost_sek': 0.44, 'planned_cost_sek': 0.44, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 14.59, 'projected_soc_percent': 42.66, 'grid_import_kw': 1.15, 'grid_export_kw': 0.0, 'import_kwh': 0.29, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 42.66, 'slot_number': 5, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T02:15:00+01:00', 'end_time': '2026-01-14T01:30:00+01:00', 'import_price_sek_kwh': 1.54, 'export_price_sek_kwh': 0.55, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.49, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.65, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.51, 'end_time_kepler': '2026-01-14T02:30:00+01:00', 'kepler_charge_kwh': 1.49, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 16.01, 'kepler_cost_sek': 3.08, 'planned_cost_sek': 3.08, 'battery_charge_kw': 5.97, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 5.97, 'projected_soc_kwh': 16.01, 'projected_soc_percent': 46.8, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 6, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T02:30:00+01:00', 'end_time': '2026-01-14T01:45:00+01:00', 'import_price_sek_kwh': 1.42, 'export_price_sek_kwh': 0.46, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.49, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.65, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.51, 'end_time_kepler': '2026-01-14T02:45:00+01:00', 'kepler_charge_kwh': 1.49, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 17.42, 'kepler_cost_sek': 2.85, 'planned_cost_sek': 2.85, 'battery_charge_kw': 5.97, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 5.97, 'projected_soc_kwh': 17.42, 'projected_soc_percent': 50.95, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 7, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T02:45:00+01:00', 'end_time': '2026-01-14T02:00:00+01:00', 'import_price_sek_kwh': 1.32, 'export_price_sek_kwh': 0.37, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.49, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.65, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.51, 'end_time_kepler': '2026-01-14T03:00:00+01:00', 'kepler_charge_kwh': 1.49, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.84, 'kepler_cost_sek': 2.63, 'planned_cost_sek': 2.63, 'battery_charge_kw': 5.97, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 5.97, 'projected_soc_kwh': 18.84, 'projected_soc_percent': 55.1, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 8, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T03:00:00+01:00', 'end_time': '2026-01-14T02:15:00+01:00', 'import_price_sek_kwh': 1.51, 'export_price_sek_kwh': 0.53, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.31, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.52, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.38, 'end_time_kepler': '2026-01-14T03:15:00+01:00', 'kepler_charge_kwh': 1.62, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 20.38, 'kepler_cost_sek': 3.03, 'planned_cost_sek': 3.03, 'battery_charge_kw': 6.49, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 6.49, 'projected_soc_kwh': 20.38, 'projected_soc_percent': 59.6, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 9, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T03:15:00+01:00', 'end_time': '2026-01-14T02:30:00+01:00', 'import_price_sek_kwh': 1.39, 'export_price_sek_kwh': 0.43, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.37, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.83, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.45, 'end_time_kepler': '2026-01-14T03:30:00+01:00', 'kepler_charge_kwh': 1.55, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 21.86, 'kepler_cost_sek': 2.77, 'planned_cost_sek': 2.77, 'battery_charge_kw': 6.21, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 6.21, 'projected_soc_kwh': 21.86, 'projected_soc_percent': 63.91, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 10, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T03:30:00+01:00', 'end_time': '2026-01-14T02:45:00+01:00', 'import_price_sek_kwh': 1.34, 'export_price_sek_kwh': 0.39, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.37, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.83, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.45, 'end_time_kepler': '2026-01-14T03:45:00+01:00', 'kepler_charge_kwh': 1.55, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 23.33, 'kepler_cost_sek': 2.68, 'planned_cost_sek': 2.68, 'battery_charge_kw': 6.21, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 6.21, 'projected_soc_kwh': 23.33, 'projected_soc_percent': 68.22, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 11, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T03:45:00+01:00', 'end_time': '2026-01-14T03:00:00+01:00', 'import_price_sek_kwh': 1.3, 'export_price_sek_kwh': 0.36, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.37, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.83, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.45, 'end_time_kepler': '2026-01-14T04:00:00+01:00', 'kepler_charge_kwh': 1.55, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 24.81, 'kepler_cost_sek': 2.6, 'planned_cost_sek': 2.6, 'battery_charge_kw': 6.21, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 6.21, 'projected_soc_kwh': 24.81, 'projected_soc_percent': 72.54, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 12, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T04:00:00+01:00', 'end_time': '2026-01-14T03:15:00+01:00', 'import_price_sek_kwh': 1.33, 'export_price_sek_kwh': 0.38, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.32, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.57, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.24, 'end_time_kepler': '2026-01-14T04:15:00+01:00', 'kepler_charge_kwh': 1.01, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 25.76, 'kepler_cost_sek': 2.66, 'planned_cost_sek': 2.66, 'battery_charge_kw': 4.03, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 4.03, 'projected_soc_kwh': 25.76, 'projected_soc_percent': 75.33, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 13, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T04:15:00+01:00', 'end_time': '2026-01-14T03:30:00+01:00', 'import_price_sek_kwh': 1.32, 'export_price_sek_kwh': 0.37, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.4, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.24, 'load_p90': 0.9, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.33, 'end_time_kepler': '2026-01-14T04:30:00+01:00', 'kepler_charge_kwh': 0.92, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.64, 'kepler_cost_sek': 2.64, 'planned_cost_sek': 2.64, 'battery_charge_kw': 3.67, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 3.67, 'projected_soc_kwh': 26.64, 'projected_soc_percent': 77.88, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 14, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T04:30:00+01:00', 'end_time': '2026-01-14T03:45:00+01:00', 'import_price_sek_kwh': 1.32, 'export_price_sek_kwh': 0.37, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.4, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.24, 'load_p90': 0.9, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.33, 'end_time_kepler': '2026-01-14T04:45:00+01:00', 'kepler_charge_kwh': 0.92, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 27.51, 'kepler_cost_sek': 2.63, 'planned_cost_sek': 2.63, 'battery_charge_kw': 3.67, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 3.67, 'projected_soc_kwh': 27.51, 'projected_soc_percent': 80.43, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 15, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T04:45:00+01:00', 'end_time': '2026-01-14T04:00:00+01:00', 'import_price_sek_kwh': 1.35, 'export_price_sek_kwh': 0.39, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.4, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.24, 'load_p90': 0.9, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.33, 'end_time_kepler': '2026-01-14T05:00:00+01:00', 'kepler_charge_kwh': 0.92, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 28.38, 'kepler_cost_sek': 2.7, 'planned_cost_sek': 2.7, 'battery_charge_kw': 3.67, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 3.67, 'projected_soc_kwh': 28.38, 'projected_soc_percent': 82.98, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 16, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T05:00:00+01:00', 'end_time': '2026-01-14T04:15:00+01:00', 'import_price_sek_kwh': 1.27, 'export_price_sek_kwh': 0.33, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.2, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.53, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.17, 'end_time_kepler': '2026-01-14T05:15:00+01:00', 'kepler_charge_kwh': 1.08, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 29.4, 'kepler_cost_sek': 2.54, 'planned_cost_sek': 2.54, 'battery_charge_kw': 4.3, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 4.3, 'projected_soc_kwh': 29.4, 'projected_soc_percent': 85.97, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 17, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T05:15:00+01:00', 'end_time': '2026-01-14T04:30:00+01:00', 'import_price_sek_kwh': 1.3, 'export_price_sek_kwh': 0.35, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.29, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.24, 'load_p90': 0.7, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.28, 'end_time_kepler': '2026-01-14T05:30:00+01:00', 'kepler_charge_kwh': 0.97, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 30.33, 'kepler_cost_sek': 2.59, 'planned_cost_sek': 2.59, 'battery_charge_kw': 3.9, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 3.9, 'projected_soc_kwh': 30.33, 'projected_soc_percent': 88.68, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 18, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T05:30:00+01:00', 'end_time': '2026-01-14T04:45:00+01:00', 'import_price_sek_kwh': 1.36, 'export_price_sek_kwh': 0.4, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.29, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.24, 'load_p90': 0.7, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.28, 'end_time_kepler': '2026-01-14T05:45:00+01:00', 'kepler_charge_kwh': 0.97, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 31.25, 'kepler_cost_sek': 2.72, 'planned_cost_sek': 2.72, 'battery_charge_kw': 3.9, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 3.9, 'projected_soc_kwh': 31.25, 'projected_soc_percent': 91.39, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 19, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T05:45:00+01:00', 'end_time': '2026-01-14T05:00:00+01:00', 'import_price_sek_kwh': 1.51, 'export_price_sek_kwh': 0.53, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.29, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.24, 'load_p90': 0.7, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.28, 'end_time_kepler': '2026-01-14T06:00:00+01:00', 'kepler_charge_kwh': 0.97, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 32.18, 'kepler_cost_sek': 3.03, 'planned_cost_sek': 3.03, 'battery_charge_kw': 3.9, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 3.9, 'projected_soc_kwh': 32.18, 'projected_soc_percent': 94.1, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 20, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T06:00:00+01:00', 'end_time': '2026-01-14T05:15:00+01:00', 'import_price_sek_kwh': 1.45, 'export_price_sek_kwh': 0.48, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.18, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.47, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.11, 'end_time_kepler': '2026-01-14T06:15:00+01:00', 'kepler_charge_kwh': 1.14, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 33.26, 'kepler_cost_sek': 2.91, 'planned_cost_sek': 2.91, 'battery_charge_kw': 4.56, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 4.56, 'projected_soc_kwh': 33.26, 'projected_soc_percent': 97.26, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 21, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T06:15:00+01:00', 'end_time': '2026-01-14T05:30:00+01:00', 'import_price_sek_kwh': 1.5, 'export_price_sek_kwh': 0.52, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.32, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.23, 'load_p90': 0.72, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.26, 'end_time_kepler': '2026-01-14T06:30:00+01:00', 'kepler_charge_kwh': 0.99, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 2.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 34.2, 'kepler_cost_sek': 3.01, 'planned_cost_sek': 3.01, 'battery_charge_kw': 3.94, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 3.94, 'projected_soc_kwh': 34.2, 'projected_soc_percent': 100.0, 'grid_import_kw': 8.0, 'grid_export_kw': 0.0, 'import_kwh': 2.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 22, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T06:30:00+01:00', 'end_time': '2026-01-14T05:45:00+01:00', 'import_price_sek_kwh': 1.56, 'export_price_sek_kwh': 0.57, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.32, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.23, 'load_p90': 0.72, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.26, 'end_time_kepler': '2026-01-14T06:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 1.01, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 34.2, 'kepler_cost_sek': 1.59, 'planned_cost_sek': 1.59, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 34.2, 'projected_soc_percent': 100.0, 'grid_import_kw': 4.06, 'grid_export_kw': 0.0, 'import_kwh': 1.01, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 23, 'reason': 'water_heating', 'priority': 'medium', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T06:45:00+01:00', 'end_time': '2026-01-14T06:00:00+01:00', 'import_price_sek_kwh': 1.61, 'export_price_sek_kwh': 0.6, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.32, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.23, 'load_p90': 0.72, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.26, 'end_time_kepler': '2026-01-14T07:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 1.01, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 34.2, 'kepler_cost_sek': 1.63, 'planned_cost_sek': 1.63, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 34.2, 'projected_soc_percent': 100.0, 'grid_import_kw': 4.06, 'grid_export_kw': 0.0, 'import_kwh': 1.01, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 24, 'reason': 'water_heating', 'priority': 'medium', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T07:00:00+01:00', 'end_time': '2026-01-14T06:15:00+01:00', 'import_price_sek_kwh': 1.69, 'export_price_sek_kwh': 0.66, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.47, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.22, 'load_p90': 0.47, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.45, 'end_time_kepler': '2026-01-14T07:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 1.2, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 34.2, 'kepler_cost_sek': 2.03, 'planned_cost_sek': 2.03, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 34.2, 'projected_soc_percent': 100.0, 'grid_import_kw': 4.82, 'grid_export_kw': 0.0, 'import_kwh': 1.2, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 25, 'reason': 'water_heating', 'priority': 'medium', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T07:15:00+01:00', 'end_time': '2026-01-14T06:30:00+01:00', 'import_price_sek_kwh': 1.93, 'export_price_sek_kwh': 0.86, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.28, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.23, 'load_p90': 0.64, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T07:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 1.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 34.2, 'kepler_cost_sek': 1.92, 'planned_cost_sek': 1.92, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 34.2, 'projected_soc_percent': 100.0, 'grid_import_kw': 3.99, 'grid_export_kw': 0.0, 'import_kwh': 1.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 26, 'reason': 'water_heating', 'priority': 'medium', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T07:30:00+01:00', 'end_time': '2026-01-14T06:45:00+01:00', 'import_price_sek_kwh': 2.06, 'export_price_sek_kwh': 0.96, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.28, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.23, 'load_p90': 0.64, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T07:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 1.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 34.2, 'kepler_cost_sek': 2.06, 'planned_cost_sek': 2.06, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 34.2, 'projected_soc_percent': 100.0, 'grid_import_kw': 3.99, 'grid_export_kw': 0.0, 'import_kwh': 1.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 100.0, 'slot_number': 27, 'reason': 'water_heating', 'priority': 'medium', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T07:45:00+01:00', 'end_time': '2026-01-14T07:00:00+01:00', 'import_price_sek_kwh': 2.38, 'export_price_sek_kwh': 1.22, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.28, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.23, 'load_p90': 0.64, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T08:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.25, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 33.94, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.99, 'discharge_kw': 0.99, 'charge_kw': 0.0, 'projected_soc_kwh': 33.94, 'projected_soc_percent': 99.24, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 28, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T08:00:00+01:00', 'end_time': '2026-01-14T07:15:00+01:00', 'import_price_sek_kwh': 2.39, 'export_price_sek_kwh': 1.23, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.49, 'pv_p10': 0.0, 'pv_p90': 0.03, 'load_p10': 0.22, 'load_p90': 0.47, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.47, 'end_time_kepler': '2026-01-14T08:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.47, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 33.45, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.88, 'discharge_kw': 1.88, 'charge_kw': 0.0, 'projected_soc_kwh': 33.45, 'projected_soc_percent': 97.79, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 29, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T08:15:00+01:00', 'end_time': '2026-01-14T07:30:00+01:00', 'import_price_sek_kwh': 2.54, 'export_price_sek_kwh': 1.35, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.29, 'pv_p10': 0.0, 'pv_p90': 0.05, 'load_p10': 0.2, 'load_p90': 0.74, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T08:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.25, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 33.18, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.01, 'discharge_kw': 1.01, 'charge_kw': 0.0, 'projected_soc_kwh': 33.18, 'projected_soc_percent': 97.02, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 30, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T08:30:00+01:00', 'end_time': '2026-01-14T07:45:00+01:00', 'import_price_sek_kwh': 2.57, 'export_price_sek_kwh': 1.37, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.29, 'pv_p10': 0.0, 'pv_p90': 0.08, 'load_p10': 0.2, 'load_p90': 0.74, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T08:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.25, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 32.91, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.01, 'discharge_kw': 1.01, 'charge_kw': 0.0, 'projected_soc_kwh': 32.91, 'projected_soc_percent': 96.24, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 31, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T08:45:00+01:00', 'end_time': '2026-01-14T08:00:00+01:00', 'import_price_sek_kwh': 2.55, 'export_price_sek_kwh': 1.36, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.29, 'pv_p10': 0.0, 'pv_p90': 0.05, 'load_p10': 0.2, 'load_p90': 0.74, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T09:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.25, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 32.65, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.01, 'discharge_kw': 1.01, 'charge_kw': 0.0, 'projected_soc_kwh': 32.65, 'projected_soc_percent': 95.46, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 32, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T09:00:00+01:00', 'end_time': '2026-01-14T08:15:00+01:00', 'import_price_sek_kwh': 2.75, 'export_price_sek_kwh': 1.51, 'pv_forecast_kwh': 0.01, 'load_forecast_kwh': 0.33, 'pv_p10': 0.0, 'pv_p90': 0.13, 'load_p10': 0.22, 'load_p90': 0.45, 'adjusted_pv_kwh': 0.02, 'adjusted_load_kwh': 0.37, 'end_time_kepler': '2026-01-14T09:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.34, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 32.29, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.38, 'discharge_kw': 1.38, 'charge_kw': 0.0, 'projected_soc_kwh': 32.29, 'projected_soc_percent': 94.4, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 33, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T09:15:00+01:00', 'end_time': '2026-01-14T08:30:00+01:00', 'import_price_sek_kwh': 2.66, 'export_price_sek_kwh': 1.44, 'pv_forecast_kwh': 0.02, 'load_forecast_kwh': 0.51, 'pv_p10': 0.0, 'pv_p90': 0.2, 'load_p10': 0.2, 'load_p90': 0.72, 'adjusted_pv_kwh': 0.03, 'adjusted_load_kwh': 0.56, 'end_time_kepler': '2026-01-14T09:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.53, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 31.72, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.13, 'discharge_kw': 2.13, 'charge_kw': 0.0, 'projected_soc_kwh': 31.72, 'projected_soc_percent': 92.76, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 34, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T09:30:00+01:00', 'end_time': '2026-01-14T08:45:00+01:00', 'import_price_sek_kwh': 2.55, 'export_price_sek_kwh': 1.35, 'pv_forecast_kwh': 0.03, 'load_forecast_kwh': 0.51, 'pv_p10': 0.0, 'pv_p90': 0.31, 'load_p10': 0.2, 'load_p90': 0.72, 'adjusted_pv_kwh': 0.04, 'adjusted_load_kwh': 0.56, 'end_time_kepler': '2026-01-14T09:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.52, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 31.18, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.08, 'discharge_kw': 2.08, 'charge_kw': 0.0, 'projected_soc_kwh': 31.18, 'projected_soc_percent': 91.16, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 35, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T09:45:00+01:00', 'end_time': '2026-01-14T09:00:00+01:00', 'import_price_sek_kwh': 2.46, 'export_price_sek_kwh': 1.28, 'pv_forecast_kwh': 0.02, 'load_forecast_kwh': 0.51, 'pv_p10': 0.0, 'pv_p90': 0.2, 'load_p10': 0.2, 'load_p90': 0.72, 'adjusted_pv_kwh': 0.03, 'adjusted_load_kwh': 0.56, 'end_time_kepler': '2026-01-14T10:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.53, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 30.62, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.13, 'discharge_kw': 2.13, 'charge_kw': 0.0, 'projected_soc_kwh': 30.62, 'projected_soc_percent': 89.52, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 36, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T10:00:00+01:00', 'end_time': '2026-01-14T09:15:00+01:00', 'import_price_sek_kwh': 2.52, 'export_price_sek_kwh': 1.33, 'pv_forecast_kwh': 0.01, 'load_forecast_kwh': 0.18, 'pv_p10': 0.0, 'pv_p90': 0.16, 'load_p10': 0.21, 'load_p90': 0.44, 'adjusted_pv_kwh': 0.04, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T10:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.2, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 30.4, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.81, 'discharge_kw': 0.81, 'charge_kw': 0.0, 'projected_soc_kwh': 30.4, 'projected_soc_percent': 88.9, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 37, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T10:15:00+01:00', 'end_time': '2026-01-14T09:30:00+01:00', 'import_price_sek_kwh': 2.43, 'export_price_sek_kwh': 1.26, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.53, 'pv_p10': 0.0, 'pv_p90': 0.12, 'load_p10': 0.2, 'load_p90': 0.71, 'adjusted_pv_kwh': 0.04, 'adjusted_load_kwh': 0.63, 'end_time_kepler': '2026-01-14T10:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.6, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 29.78, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.39, 'discharge_kw': 2.39, 'charge_kw': 0.0, 'projected_soc_kwh': 29.78, 'projected_soc_percent': 87.06, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 38, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T10:30:00+01:00', 'end_time': '2026-01-14T09:45:00+01:00', 'import_price_sek_kwh': 2.36, 'export_price_sek_kwh': 1.2, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.53, 'pv_p10': 0.0, 'pv_p90': 0.18, 'load_p10': 0.2, 'load_p90': 0.71, 'adjusted_pv_kwh': 0.04, 'adjusted_load_kwh': 0.63, 'end_time_kepler': '2026-01-14T10:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.6, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 29.15, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.39, 'discharge_kw': 2.39, 'charge_kw': 0.0, 'projected_soc_kwh': 29.15, 'projected_soc_percent': 85.22, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 39, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T10:45:00+01:00', 'end_time': '2026-01-14T10:00:00+01:00', 'import_price_sek_kwh': 2.34, 'export_price_sek_kwh': 1.19, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.53, 'pv_p10': 0.0, 'pv_p90': 0.14, 'load_p10': 0.2, 'load_p90': 0.71, 'adjusted_pv_kwh': 0.04, 'adjusted_load_kwh': 0.63, 'end_time_kepler': '2026-01-14T11:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.6, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 28.52, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.39, 'discharge_kw': 2.39, 'charge_kw': 0.0, 'projected_soc_kwh': 28.52, 'projected_soc_percent': 83.39, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 40, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T11:00:00+01:00', 'end_time': '2026-01-14T10:15:00+01:00', 'import_price_sek_kwh': 2.36, 'export_price_sek_kwh': 1.2, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.17, 'pv_p10': 0.0, 'pv_p90': 0.12, 'load_p10': 0.22, 'load_p90': 0.49, 'adjusted_pv_kwh': 0.02, 'adjusted_load_kwh': 0.15, 'end_time_kepler': '2026-01-14T11:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.13, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 28.38, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.53, 'discharge_kw': 0.53, 'charge_kw': 0.0, 'projected_soc_kwh': 28.38, 'projected_soc_percent': 82.98, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 41, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T11:15:00+01:00', 'end_time': '2026-01-14T10:30:00+01:00', 'import_price_sek_kwh': 2.32, 'export_price_sek_kwh': 1.17, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.56, 'pv_p10': 0.0, 'pv_p90': 0.1, 'load_p10': 0.2, 'load_p90': 0.81, 'adjusted_pv_kwh': 0.02, 'adjusted_load_kwh': 0.57, 'end_time_kepler': '2026-01-14T11:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.55, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 27.79, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.22, 'discharge_kw': 2.22, 'charge_kw': 0.0, 'projected_soc_kwh': 27.79, 'projected_soc_percent': 81.27, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 42, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T11:30:00+01:00', 'end_time': '2026-01-14T10:45:00+01:00', 'import_price_sek_kwh': 2.27, 'export_price_sek_kwh': 1.13, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.56, 'pv_p10': 0.0, 'pv_p90': 0.12, 'load_p10': 0.2, 'load_p90': 0.81, 'adjusted_pv_kwh': 0.02, 'adjusted_load_kwh': 0.57, 'end_time_kepler': '2026-01-14T11:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.55, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 27.21, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.21, 'discharge_kw': 2.21, 'charge_kw': 0.0, 'projected_soc_kwh': 27.21, 'projected_soc_percent': 79.57, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 43, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T11:45:00+01:00', 'end_time': '2026-01-14T11:00:00+01:00', 'import_price_sek_kwh': 2.25, 'export_price_sek_kwh': 1.11, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.56, 'pv_p10': 0.0, 'pv_p90': 0.11, 'load_p10': 0.2, 'load_p90': 0.81, 'adjusted_pv_kwh': 0.02, 'adjusted_load_kwh': 0.57, 'end_time_kepler': '2026-01-14T12:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.55, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.63, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.22, 'discharge_kw': 2.22, 'charge_kw': 0.0, 'projected_soc_kwh': 26.63, 'projected_soc_percent': 77.86, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 44, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T12:00:00+01:00', 'end_time': '2026-01-14T11:15:00+01:00', 'import_price_sek_kwh': 2.26, 'export_price_sek_kwh': 1.12, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.17, 'pv_p10': 0.0, 'pv_p90': 0.11, 'load_p10': 0.22, 'load_p90': 0.56, 'adjusted_pv_kwh': 0.07, 'adjusted_load_kwh': 0.18, 'end_time_kepler': '2026-01-14T12:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.11, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.51, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.45, 'discharge_kw': 0.45, 'charge_kw': 0.0, 'projected_soc_kwh': 26.51, 'projected_soc_percent': 77.52, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 45, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T12:15:00+01:00', 'end_time': '2026-01-14T11:30:00+01:00', 'import_price_sek_kwh': 2.23, 'export_price_sek_kwh': 1.1, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.54, 'pv_p10': 0.0, 'pv_p90': 0.11, 'load_p10': 0.2, 'load_p90': 1.27, 'adjusted_pv_kwh': 0.07, 'adjusted_load_kwh': 0.58, 'end_time_kepler': '2026-01-14T12:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.51, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.51, 'kepler_cost_sek': 1.15, 'planned_cost_sek': 1.15, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 26.51, 'projected_soc_percent': 77.52, 'grid_import_kw': 2.06, 'grid_export_kw': 0.0, 'import_kwh': 0.51, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 77.52, 'slot_number': 46, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T12:30:00+01:00', 'end_time': '2026-01-14T11:45:00+01:00', 'import_price_sek_kwh': 2.24, 'export_price_sek_kwh': 1.11, 'pv_forecast_kwh': 0.01, 'load_forecast_kwh': 0.54, 'pv_p10': 0.0, 'pv_p90': 0.13, 'load_p10': 0.2, 'load_p90': 1.27, 'adjusted_pv_kwh': 0.07, 'adjusted_load_kwh': 0.58, 'end_time_kepler': '2026-01-14T12:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.51, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.51, 'kepler_cost_sek': 1.15, 'planned_cost_sek': 1.15, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 26.51, 'projected_soc_percent': 77.52, 'grid_import_kw': 2.05, 'grid_export_kw': 0.0, 'import_kwh': 0.51, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 77.52, 'slot_number': 47, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T12:45:00+01:00', 'end_time': '2026-01-14T12:00:00+01:00', 'import_price_sek_kwh': 2.23, 'export_price_sek_kwh': 1.1, 'pv_forecast_kwh': 0.01, 'load_forecast_kwh': 0.54, 'pv_p10': 0.0, 'pv_p90': 0.14, 'load_p10': 0.2, 'load_p90': 1.27, 'adjusted_pv_kwh': 0.07, 'adjusted_load_kwh': 0.58, 'end_time_kepler': '2026-01-14T13:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.51, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.51, 'kepler_cost_sek': 1.14, 'planned_cost_sek': 1.14, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 26.51, 'projected_soc_percent': 77.52, 'grid_import_kw': 2.04, 'grid_export_kw': 0.0, 'import_kwh': 0.51, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 77.52, 'slot_number': 48, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T13:00:00+01:00', 'end_time': '2026-01-14T12:15:00+01:00', 'import_price_sek_kwh': 2.23, 'export_price_sek_kwh': 1.1, 'pv_forecast_kwh': 0.04, 'load_forecast_kwh': 0.54, 'pv_p10': 0.0, 'pv_p90': 0.13, 'load_p10': 0.22, 'load_p90': 0.65, 'adjusted_pv_kwh': 0.05, 'adjusted_load_kwh': 0.53, 'end_time_kepler': '2026-01-14T13:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.48, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.51, 'kepler_cost_sek': 1.07, 'planned_cost_sek': 1.07, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 26.51, 'projected_soc_percent': 77.52, 'grid_import_kw': 1.92, 'grid_export_kw': 0.0, 'import_kwh': 0.48, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 77.52, 'slot_number': 49, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T13:15:00+01:00', 'end_time': '2026-01-14T12:30:00+01:00', 'import_price_sek_kwh': 2.22, 'export_price_sek_kwh': 1.09, 'pv_forecast_kwh': 0.01, 'load_forecast_kwh': 0.59, 'pv_p10': 0.0, 'pv_p90': 0.12, 'load_p10': 0.2, 'load_p90': 1.38, 'adjusted_pv_kwh': 0.04, 'adjusted_load_kwh': 0.59, 'end_time_kepler': '2026-01-14T13:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.56, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.51, 'kepler_cost_sek': 1.23, 'planned_cost_sek': 1.23, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 26.51, 'projected_soc_percent': 77.52, 'grid_import_kw': 2.22, 'grid_export_kw': 0.0, 'import_kwh': 0.56, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 77.52, 'slot_number': 50, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T13:30:00+01:00', 'end_time': '2026-01-14T12:45:00+01:00', 'import_price_sek_kwh': 2.24, 'export_price_sek_kwh': 1.11, 'pv_forecast_kwh': 0.01, 'load_forecast_kwh': 0.59, 'pv_p10': 0.0, 'pv_p90': 0.1, 'load_p10': 0.2, 'load_p90': 1.38, 'adjusted_pv_kwh': 0.03, 'adjusted_load_kwh': 0.59, 'end_time_kepler': '2026-01-14T13:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.56, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 26.51, 'kepler_cost_sek': 1.25, 'planned_cost_sek': 1.25, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 26.51, 'projected_soc_percent': 77.52, 'grid_import_kw': 2.23, 'grid_export_kw': 0.0, 'import_kwh': 0.56, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 77.52, 'slot_number': 51, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T13:45:00+01:00', 'end_time': '2026-01-14T13:00:00+01:00', 'import_price_sek_kwh': 2.29, 'export_price_sek_kwh': 1.15, 'pv_forecast_kwh': 0.03, 'load_forecast_kwh': 0.59, 'pv_p10': 0.0, 'pv_p90': 0.13, 'load_p10': 0.2, 'load_p90': 1.38, 'adjusted_pv_kwh': 0.05, 'adjusted_load_kwh': 0.59, 'end_time_kepler': '2026-01-14T14:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.54, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 25.94, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.18, 'discharge_kw': 2.18, 'charge_kw': 0.0, 'projected_soc_kwh': 25.94, 'projected_soc_percent': 75.84, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 52, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T14:00:00+01:00', 'end_time': '2026-01-14T13:15:00+01:00', 'import_price_sek_kwh': 2.2, 'export_price_sek_kwh': 1.07, 'pv_forecast_kwh': 0.07, 'load_forecast_kwh': 0.2, 'pv_p10': 0.0, 'pv_p90': 0.12, 'load_p10': 0.21, 'load_p90': 0.64, 'adjusted_pv_kwh': 0.07, 'adjusted_load_kwh': 0.17, 'end_time_kepler': '2026-01-14T14:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.1, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 25.94, 'kepler_cost_sek': 0.22, 'planned_cost_sek': 0.22, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 25.94, 'projected_soc_percent': 75.84, 'grid_import_kw': 0.41, 'grid_export_kw': 0.0, 'import_kwh': 0.1, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 75.84, 'slot_number': 53, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T14:15:00+01:00', 'end_time': '2026-01-14T13:30:00+01:00', 'import_price_sek_kwh': 2.29, 'export_price_sek_kwh': 1.15, 'pv_forecast_kwh': 0.02, 'load_forecast_kwh': 0.57, 'pv_p10': 0.0, 'pv_p90': 0.12, 'load_p10': 0.2, 'load_p90': 1.34, 'adjusted_pv_kwh': 0.03, 'adjusted_load_kwh': 0.57, 'end_time_kepler': '2026-01-14T14:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.55, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 25.36, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.18, 'discharge_kw': 2.18, 'charge_kw': 0.0, 'projected_soc_kwh': 25.36, 'projected_soc_percent': 74.16, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 54, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T14:30:00+01:00', 'end_time': '2026-01-14T13:45:00+01:00', 'import_price_sek_kwh': 2.49, 'export_price_sek_kwh': 1.3, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.57, 'pv_p10': 0.0, 'pv_p90': 0.08, 'load_p10': 0.2, 'load_p90': 1.34, 'adjusted_pv_kwh': 0.01, 'adjusted_load_kwh': 0.57, 'end_time_kepler': '2026-01-14T14:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.56, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 24.77, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.25, 'discharge_kw': 2.25, 'charge_kw': 0.0, 'projected_soc_kwh': 24.77, 'projected_soc_percent': 72.43, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 55, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T14:45:00+01:00', 'end_time': '2026-01-14T14:00:00+01:00', 'import_price_sek_kwh': 2.63, 'export_price_sek_kwh': 1.42, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.57, 'pv_p10': 0.0, 'pv_p90': 0.08, 'load_p10': 0.2, 'load_p90': 1.34, 'adjusted_pv_kwh': 0.01, 'adjusted_load_kwh': 0.57, 'end_time_kepler': '2026-01-14T15:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.56, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 24.18, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.25, 'discharge_kw': 2.25, 'charge_kw': 0.0, 'projected_soc_kwh': 24.18, 'projected_soc_percent': 70.7, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 56, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T15:00:00+01:00', 'end_time': '2026-01-14T14:15:00+01:00', 'import_price_sek_kwh': 2.4, 'export_price_sek_kwh': 1.24, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.2, 'pv_p10': 0.0, 'pv_p90': 0.05, 'load_p10': 0.22, 'load_p90': 0.6, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.18, 'end_time_kepler': '2026-01-14T15:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.18, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 23.99, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.73, 'discharge_kw': 0.73, 'charge_kw': 0.0, 'projected_soc_kwh': 23.99, 'projected_soc_percent': 70.14, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 57, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T15:15:00+01:00', 'end_time': '2026-01-14T14:30:00+01:00', 'import_price_sek_kwh': 2.55, 'export_price_sek_kwh': 1.35, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.57, 'pv_p10': 0.0, 'pv_p90': 0.03, 'load_p10': 0.2, 'load_p90': 1.22, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.59, 'end_time_kepler': '2026-01-14T15:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.59, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 23.37, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.34, 'discharge_kw': 2.34, 'charge_kw': 0.0, 'projected_soc_kwh': 23.37, 'projected_soc_percent': 68.34, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 58, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T15:30:00+01:00', 'end_time': '2026-01-14T14:45:00+01:00', 'import_price_sek_kwh': 2.92, 'export_price_sek_kwh': 1.65, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.57, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.22, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.59, 'end_time_kepler': '2026-01-14T15:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.59, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 22.76, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.34, 'discharge_kw': 2.34, 'charge_kw': 0.0, 'projected_soc_kwh': 22.76, 'projected_soc_percent': 66.54, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 59, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T15:45:00+01:00', 'end_time': '2026-01-14T15:00:00+01:00', 'import_price_sek_kwh': 2.96, 'export_price_sek_kwh': 1.68, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.57, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.22, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.59, 'end_time_kepler': '2026-01-14T16:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.59, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 22.14, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 2.34, 'discharge_kw': 2.34, 'charge_kw': 0.0, 'projected_soc_kwh': 22.14, 'projected_soc_percent': 64.73, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 60, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T16:00:00+01:00', 'end_time': '2026-01-14T15:15:00+01:00', 'import_price_sek_kwh': 2.37, 'export_price_sek_kwh': 1.21, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.32, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 0.63, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.27, 'end_time_kepler': '2026-01-14T16:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 1.02, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 21.07, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 4.08, 'discharge_kw': 4.08, 'charge_kw': 0.0, 'projected_soc_kwh': 21.07, 'projected_soc_percent': 61.59, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 3.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 61, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T16:15:00+01:00', 'end_time': '2026-01-14T15:30:00+01:00', 'import_price_sek_kwh': 2.59, 'export_price_sek_kwh': 1.39, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.46, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.19, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.42, 'end_time_kepler': '2026-01-14T16:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.42, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 20.62, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.69, 'discharge_kw': 1.69, 'charge_kw': 0.0, 'projected_soc_kwh': 20.62, 'projected_soc_percent': 60.3, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 62, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T16:30:00+01:00', 'end_time': '2026-01-14T15:45:00+01:00', 'import_price_sek_kwh': 2.91, 'export_price_sek_kwh': 1.64, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.46, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.19, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.42, 'end_time_kepler': '2026-01-14T16:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.42, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 20.18, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.69, 'discharge_kw': 1.69, 'charge_kw': 0.0, 'projected_soc_kwh': 20.18, 'projected_soc_percent': 59.0, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 63, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T16:45:00+01:00', 'end_time': '2026-01-14T16:00:00+01:00', 'import_price_sek_kwh': 3.47, 'export_price_sek_kwh': 2.09, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.46, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.19, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.42, 'end_time_kepler': '2026-01-14T17:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.42, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 19.73, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.69, 'discharge_kw': 1.69, 'charge_kw': 0.0, 'projected_soc_kwh': 19.73, 'projected_soc_percent': 57.7, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 64, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T17:00:00+01:00', 'end_time': '2026-01-14T16:15:00+01:00', 'import_price_sek_kwh': 2.9, 'export_price_sek_kwh': 1.64, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.18, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 0.62, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.01, 'end_time_kepler': '2026-01-14T17:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.01, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 19.72, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.04, 'discharge_kw': 0.04, 'charge_kw': 0.0, 'projected_soc_kwh': 19.72, 'projected_soc_percent': 57.67, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 65, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T17:15:00+01:00', 'end_time': '2026-01-14T16:30:00+01:00', 'import_price_sek_kwh': 3.4, 'export_price_sek_kwh': 2.04, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.47, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.17, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.33, 'end_time_kepler': '2026-01-14T17:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.33, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 19.38, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.3, 'discharge_kw': 1.3, 'charge_kw': 0.0, 'projected_soc_kwh': 19.38, 'projected_soc_percent': 56.66, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 66, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T17:30:00+01:00', 'end_time': '2026-01-14T16:45:00+01:00', 'import_price_sek_kwh': 3.31, 'export_price_sek_kwh': 1.96, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.47, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.17, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.33, 'end_time_kepler': '2026-01-14T17:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.33, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 19.04, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.3, 'discharge_kw': 1.3, 'charge_kw': 0.0, 'projected_soc_kwh': 19.04, 'projected_soc_percent': 55.66, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 67, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T17:45:00+01:00', 'end_time': '2026-01-14T17:00:00+01:00', 'import_price_sek_kwh': 3.22, 'export_price_sek_kwh': 1.89, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.47, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.17, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.33, 'end_time_kepler': '2026-01-14T18:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.33, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.69, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.3, 'discharge_kw': 1.3, 'charge_kw': 0.0, 'projected_soc_kwh': 18.69, 'projected_soc_percent': 54.66, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 68, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T18:00:00+01:00', 'end_time': '2026-01-14T17:15:00+01:00', 'import_price_sek_kwh': 3.23, 'export_price_sek_kwh': 1.9, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.19, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 0.77, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.0, 'end_time_kepler': '2026-01-14T18:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.69, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 18.69, 'projected_soc_percent': 54.66, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 54.66, 'slot_number': 69, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T18:15:00+01:00', 'end_time': '2026-01-14T17:30:00+01:00', 'import_price_sek_kwh': 3.09, 'export_price_sek_kwh': 1.79, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.28, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.11, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.1, 'end_time_kepler': '2026-01-14T18:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.1, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.59, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.39, 'discharge_kw': 0.39, 'charge_kw': 0.0, 'projected_soc_kwh': 18.59, 'projected_soc_percent': 54.36, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 70, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T18:30:00+01:00', 'end_time': '2026-01-14T17:45:00+01:00', 'import_price_sek_kwh': 3.09, 'export_price_sek_kwh': 1.79, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.28, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.11, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.1, 'end_time_kepler': '2026-01-14T18:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.1, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.49, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.39, 'discharge_kw': 0.39, 'charge_kw': 0.0, 'projected_soc_kwh': 18.49, 'projected_soc_percent': 54.06, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 71, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T18:45:00+01:00', 'end_time': '2026-01-14T18:00:00+01:00', 'import_price_sek_kwh': 3.15, 'export_price_sek_kwh': 1.84, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.28, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.11, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.1, 'end_time_kepler': '2026-01-14T19:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.1, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.39, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.39, 'discharge_kw': 0.39, 'charge_kw': 0.0, 'projected_soc_kwh': 18.39, 'projected_soc_percent': 53.76, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 72, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T19:00:00+01:00', 'end_time': '2026-01-14T18:15:00+01:00', 'import_price_sek_kwh': 3.25, 'export_price_sek_kwh': 1.92, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.22, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.63, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.09, 'end_time_kepler': '2026-01-14T19:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.09, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.29, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.37, 'discharge_kw': 0.37, 'charge_kw': 0.0, 'projected_soc_kwh': 18.29, 'projected_soc_percent': 53.48, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 73, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T19:15:00+01:00', 'end_time': '2026-01-14T18:30:00+01:00', 'import_price_sek_kwh': 2.97, 'export_price_sek_kwh': 1.69, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.25, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.06, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.13, 'end_time_kepler': '2026-01-14T19:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.13, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.15, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.52, 'discharge_kw': 0.52, 'charge_kw': 0.0, 'projected_soc_kwh': 18.15, 'projected_soc_percent': 53.07, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 74, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T19:30:00+01:00', 'end_time': '2026-01-14T18:45:00+01:00', 'import_price_sek_kwh': 2.74, 'export_price_sek_kwh': 1.51, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.25, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.06, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.13, 'end_time_kepler': '2026-01-14T19:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.13, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 18.01, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.52, 'discharge_kw': 0.52, 'charge_kw': 0.0, 'projected_soc_kwh': 18.01, 'projected_soc_percent': 52.67, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 75, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T19:45:00+01:00', 'end_time': '2026-01-14T19:00:00+01:00', 'import_price_sek_kwh': 2.6, 'export_price_sek_kwh': 1.39, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.25, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 1.06, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.13, 'end_time_kepler': '2026-01-14T20:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.13, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 17.88, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.52, 'discharge_kw': 0.52, 'charge_kw': 0.0, 'projected_soc_kwh': 17.88, 'projected_soc_percent': 52.27, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 76, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T20:00:00+01:00', 'end_time': '2026-01-14T19:15:00+01:00', 'import_price_sek_kwh': 2.83, 'export_price_sek_kwh': 1.58, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.21, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 0.68, 'adjusted_pv_kwh': 0.48, 'adjusted_load_kwh': 2.23, 'end_time_kepler': '2026-01-14T20:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 1.75, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 16.03, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 7.0, 'discharge_kw': 7.0, 'charge_kw': 0.0, 'projected_soc_kwh': 16.03, 'projected_soc_percent': 46.88, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 77, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T20:15:00+01:00', 'end_time': '2026-01-14T19:30:00+01:00', 'import_price_sek_kwh': 2.61, 'export_price_sek_kwh': 1.41, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.3, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.12, 'adjusted_pv_kwh': 0.48, 'adjusted_load_kwh': 2.33, 'end_time_kepler': '2026-01-14T20:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 1.85, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 14.09, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 7.4, 'discharge_kw': 7.4, 'charge_kw': 0.0, 'projected_soc_kwh': 14.09, 'projected_soc_percent': 41.19, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 78, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T20:30:00+01:00', 'end_time': '2026-01-14T19:45:00+01:00', 'import_price_sek_kwh': 2.52, 'export_price_sek_kwh': 1.33, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.3, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.12, 'adjusted_pv_kwh': 0.48, 'adjusted_load_kwh': 2.33, 'end_time_kepler': '2026-01-14T20:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 1.85, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 12.14, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 7.4, 'discharge_kw': 7.4, 'charge_kw': 0.0, 'projected_soc_kwh': 12.14, 'projected_soc_percent': 35.5, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 79, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T20:45:00+01:00', 'end_time': '2026-01-14T20:00:00+01:00', 'import_price_sek_kwh': 2.32, 'export_price_sek_kwh': 1.17, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.3, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.12, 'adjusted_pv_kwh': 0.48, 'adjusted_load_kwh': 2.33, 'end_time_kepler': '2026-01-14T21:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 1.85, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 10.19, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 7.4, 'discharge_kw': 7.4, 'charge_kw': 0.0, 'projected_soc_kwh': 10.19, 'projected_soc_percent': 29.8, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 80, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T21:00:00+01:00', 'end_time': '2026-01-14T20:15:00+01:00', 'import_price_sek_kwh': 2.42, 'export_price_sek_kwh': 1.25, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.18, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 0.64, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.03, 'end_time_kepler': '2026-01-14T21:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.03, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 10.16, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.13, 'discharge_kw': 0.13, 'charge_kw': 0.0, 'projected_soc_kwh': 10.16, 'projected_soc_percent': 29.7, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 81, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T21:15:00+01:00', 'end_time': '2026-01-14T20:30:00+01:00', 'import_price_sek_kwh': 2.33, 'export_price_sek_kwh': 1.18, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.39, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.11, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.27, 'end_time_kepler': '2026-01-14T21:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.27, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.88, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.07, 'discharge_kw': 1.07, 'charge_kw': 0.0, 'projected_soc_kwh': 9.88, 'projected_soc_percent': 28.88, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 82, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T21:30:00+01:00', 'end_time': '2026-01-14T20:45:00+01:00', 'import_price_sek_kwh': 2.28, 'export_price_sek_kwh': 1.14, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.39, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.11, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.27, 'end_time_kepler': '2026-01-14T21:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.27, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.07, 'discharge_kw': 1.07, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 83, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T21:45:00+01:00', 'end_time': '2026-01-14T21:00:00+01:00', 'import_price_sek_kwh': 2.2, 'export_price_sek_kwh': 1.08, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.39, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.11, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.27, 'end_time_kepler': '2026-01-14T22:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.27, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.59, 'planned_cost_sek': 0.59, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 1.07, 'grid_export_kw': 0.0, 'import_kwh': 0.27, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 84, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T22:00:00+01:00', 'end_time': '2026-01-14T21:15:00+01:00', 'import_price_sek_kwh': 2.23, 'export_price_sek_kwh': 1.1, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.15, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.22, 'load_p90': 0.74, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.06, 'end_time_kepler': '2026-01-14T22:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.06, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.13, 'planned_cost_sek': 0.13, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 0.24, 'grid_export_kw': 0.0, 'import_kwh': 0.06, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 85, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T22:15:00+01:00', 'end_time': '2026-01-14T21:30:00+01:00', 'import_price_sek_kwh': 2.19, 'export_price_sek_kwh': 1.07, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.41, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.3, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.35, 'end_time_kepler': '2026-01-14T22:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.35, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.76, 'planned_cost_sek': 0.76, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 1.39, 'grid_export_kw': 0.0, 'import_kwh': 0.35, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 86, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T22:30:00+01:00', 'end_time': '2026-01-14T21:45:00+01:00', 'import_price_sek_kwh': 2.16, 'export_price_sek_kwh': 1.04, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.41, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.3, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.35, 'end_time_kepler': '2026-01-14T22:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.35, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.75, 'planned_cost_sek': 0.75, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 1.39, 'grid_export_kw': 0.0, 'import_kwh': 0.35, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 87, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T22:45:00+01:00', 'end_time': '2026-01-14T22:00:00+01:00', 'import_price_sek_kwh': 2.11, 'export_price_sek_kwh': 1.01, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.41, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.3, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.35, 'end_time_kepler': '2026-01-14T23:00:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.35, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.74, 'planned_cost_sek': 0.74, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 1.39, 'grid_export_kw': 0.0, 'import_kwh': 0.35, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 88, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T23:00:00+01:00', 'end_time': '2026-01-14T22:15:00+01:00', 'import_price_sek_kwh': 2.19, 'export_price_sek_kwh': 1.07, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.23, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.21, 'load_p90': 0.78, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.15, 'end_time_kepler': '2026-01-14T23:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.15, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.34, 'planned_cost_sek': 0.34, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 0.62, 'grid_export_kw': 0.0, 'import_kwh': 0.15, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 89, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T23:15:00+01:00', 'end_time': '2026-01-14T22:30:00+01:00', 'import_price_sek_kwh': 2.12, 'export_price_sek_kwh': 1.01, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.42, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.37, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.36, 'end_time_kepler': '2026-01-14T23:30:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.36, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.76, 'planned_cost_sek': 0.76, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 1.45, 'grid_export_kw': 0.0, 'import_kwh': 0.36, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 90, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T23:30:00+01:00', 'end_time': '2026-01-14T22:45:00+01:00', 'import_price_sek_kwh': 2.07, 'export_price_sek_kwh': 0.97, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.42, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.37, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.36, 'end_time_kepler': '2026-01-14T23:45:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 0.36, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 9.6, 'kepler_cost_sek': 0.75, 'planned_cost_sek': 0.75, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 0.0, 'projected_soc_kwh': 9.6, 'projected_soc_percent': 28.06, 'grid_import_kw': 1.45, 'grid_export_kw': 0.0, 'import_kwh': 0.36, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 28.06, 'slot_number': 91, 'reason': 'no_action_needed', 'priority': 'low', 'is_historical': False}
DEBUG SLOT: {'start_time': '2026-01-14T23:45:00+01:00', 'end_time': '2026-01-14T23:00:00+01:00', 'import_price_sek_kwh': 2.03, 'export_price_sek_kwh': 0.94, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.42, 'pv_p10': 0.0, 'pv_p90': 0.0, 'load_p10': 0.2, 'load_p90': 1.37, 'adjusted_pv_kwh': 0.0, 'adjusted_load_kwh': 0.36, 'end_time_kepler': '2026-01-15T00:00:00+01:00', 'kepler_charge_kwh': 0.7, 'kepler_discharge_kwh': 0.0, 'kepler_import_kwh': 1.06, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 10.26, 'kepler_cost_sek': 2.15, 'planned_cost_sek': 2.15, 'battery_charge_kw': 2.8, 'battery_discharge_kw': 0.0, 'discharge_kw': 0.0, 'charge_kw': 2.8, 'projected_soc_kwh': 10.26, 'projected_soc_percent': 30.0, 'grid_import_kw': 4.24, 'grid_export_kw': 0.0, 'import_kwh': 1.06, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 30.0, 'slot_number': 92, 'reason': 'cheap_grid_power', 'priority': 'high', 'is_historical': False}
Checking slot 10:00: {'start_time': '2026-01-14T10:00:00+01:00', 'end_time': '2026-01-14T09:15:00+01:00', 'import_price_sek_kwh': 2.52, 'export_price_sek_kwh': 1.33, 'pv_forecast_kwh': 0.01, 'load_forecast_kwh': 0.18, 'pv_p10': 0.0, 'pv_p90': 0.16, 'load_p10': 0.21, 'load_p90': 0.44, 'adjusted_pv_kwh': 0.04, 'adjusted_load_kwh': 0.25, 'end_time_kepler': '2026-01-14T10:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.2, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 30.4, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.81, 'discharge_kw': 0.81, 'charge_kw': 0.0, 'projected_soc_kwh': 30.4, 'projected_soc_percent': 88.9, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 37, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
Checking slot 11:00: {'start_time': '2026-01-14T11:00:00+01:00', 'end_time': '2026-01-14T10:15:00+01:00', 'import_price_sek_kwh': 2.36, 'export_price_sek_kwh': 1.2, 'pv_forecast_kwh': 0.0, 'load_forecast_kwh': 0.17, 'pv_p10': 0.0, 'pv_p90': 0.12, 'load_p10': 0.22, 'load_p90': 0.49, 'adjusted_pv_kwh': 0.02, 'adjusted_load_kwh': 0.15, 'end_time_kepler': '2026-01-14T11:15:00+01:00', 'kepler_charge_kwh': 0.0, 'kepler_discharge_kwh': 0.13, 'kepler_import_kwh': 0.0, 'kepler_export_kwh': 0.0, 'kepler_soc_kwh': 28.38, 'kepler_cost_sek': 0.0, 'planned_cost_sek': 0.0, 'battery_charge_kw': 0.0, 'battery_discharge_kw': 0.53, 'discharge_kw': 0.53, 'charge_kw': 0.0, 'projected_soc_kwh': 28.38, 'projected_soc_percent': 82.98, 'grid_import_kw': 0.0, 'grid_export_kw': 0.0, 'import_kwh': 0.0, 'export_kwh': 0.0, 'water_heating_kw': 0.0, 'water_from_grid_kwh': 0.0, 'water_from_pv_kwh': 0.0, 'water_from_battery_kwh': 0.0, 'projected_battery_cost': 0.0, 'manual_action': None, 'soc_target_percent': 12.0, 'slot_number': 41, 'reason': 'expensive_grid_power', 'priority': 'high', 'is_historical': False}
FAILED

=================================== FAILURES ===================================
__________ test_today_with_history_includes_planned_actions[asyncio] ___________

tmp_path = PosixPath('/tmp/pytest-of-s/pytest-16/test_today_with_history_includ0')

    @pytest.mark.anyio
    async def test_today_with_history_includes_planned_actions(tmp_path):
        # Setup temp DB
        db_path = tmp_path / "planner_learning.db"
    
        # Create the slots_forecasts and slot_observations tables too because the code queries them
        # and might fail or warn if missing (though the try/except blocks should handle it).
        # But slot_plans is what we care about.
    
        async with aiosqlite.connect(db_path) as conn:
            await conn.execute("""
                CREATE TABLE slot_plans (
                    slot_start TEXT PRIMARY KEY,
                    planned_charge_kwh REAL,
                    planned_discharge_kwh REAL,
                    planned_soc_percent REAL,
                    planned_export_kwh REAL
                )
            """)
            await conn.execute("""
                 CREATE TABLE slot_observations (
                    slot_start TEXT PRIMARY KEY,
                    slot_end TEXT,
                    batt_charge_kwh REAL,
                    batt_discharge_kwh REAL,
                    soc_end_percent REAL,
                    water_kwh REAL,
                    import_kwh REAL,
                    export_kwh REAL,
                    import_price_sek_kwh REAL
                )
            """)
            await conn.execute("""
                 CREATE TABLE slot_forecasts (
                    slot_start TEXT PRIMARY KEY,
                    pv_forecast_kwh REAL,
                    load_forecast_kwh REAL,
                    forecast_version TEXT
                )
            """)
    
            # Insert test data for today (UTC to avoid timezone confusion in test)
            # Using UTC as the configured timezone
            tz = pytz.UTC
            now = datetime.now(tz)
            today_start = now.replace(hour=0, minute=0, second=0, microsecond=0)
    
            # 1. Planned Charge Slot at 10:00
            slot_10 = today_start.replace(hour=10).isoformat()
            await conn.execute("""
                INSERT INTO slot_plans (slot_start, planned_charge_kwh, planned_discharge_kwh, planned_soc_percent, planned_export_kwh)
                VALUES (?, 0.5, 0.0, 50.0, 0.0)
            """, (slot_10,))
    
            # 2. Planned Discharge Slot at 11:00
            slot_11 = today_start.replace(hour=11).isoformat()
            await conn.execute("""
                INSERT INTO slot_plans (slot_start, planned_charge_kwh, planned_discharge_kwh, planned_soc_percent, planned_export_kwh)
                VALUES (?, 0.0, 0.25, 40.0, 0.1)
            """, (slot_11,))
    
            await conn.commit()
    
        # Mock config to point to temp DB
        mock_config = {
            "learning": {"sqlite_path": str(db_path)},
            "timezone": "UTC"
        }
    
        # Patch load_yaml to return our mock config
        with patch("backend.api.routers.schedule.load_yaml", return_value=mock_config):
            # We rely on schedule.json not existing in CWD (or being empty)
            # And db_path existing in tmp_path (which it does)
    
            result = await schedule_today_with_history()
    
        # Assertions
        slots = result["slots"]
        print(f"DEBUG: Returned {len(slots)} slots")
        for s in slots:
            print(f"DEBUG SLOT: {s}")
    
        assert len(slots) > 0
    
        # We expect synthetic slots to be created if schedule.json is empty
        # The code does: "all_keys = sorted(set(schedule_map.keys()) | set(exec_map.keys()) | set(planned_map.keys()))"
        # So we should at least have the slots we put in slot_plans.
    
        found_charge = False
        found_discharge = False
    
        for slot in slots:
            # Times in response are ISO strings
            if "10:00:00" in slot["start_time"]:
                 # 0.5 kWh / 0.25h = 2.0 kW
                 print(f"Checking slot 10:00: {slot}")
                 if slot.get("battery_charge_kw") == 2.0 and slot.get("soc_target_percent") == 50.0:
                     found_charge = True
    
            if "11:00:00" in slot["start_time"]:
                 # 0.25 kWh / 0.25h = 1.0 kW
                 print(f"Checking slot 11:00: {slot}")
                 if slot.get("battery_discharge_kw") == 1.0 and slot.get("export_kwh") == 0.1:
                     found_discharge = True
    
>       assert found_charge, "Did not find planned charge slot from DB (expected 2.0 kW charge)"
E       AssertionError: Did not find planned charge slot from DB (expected 2.0 kW charge)
E       assert False

tests/test_schedule_history_overlay.py:114: AssertionError
=========================== short test summary info ============================
FAILED tests/test_schedule_history_overlay.py::test_today_with_history_includes_planned_actions[asyncio]
============================== 1 failed in 0.41s ===============================
