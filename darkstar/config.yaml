# Darkstar Energy Manager - Home Assistant Add-on
# https://github.com/ergetie/darkstar

name: "Darkstar Energy Manager"
description: "AI-powered home battery optimization with MILP scheduling"
version: "2.4.21-beta"
slug: "darkstar"
url: "https://github.com/ergetie/darkstar"

# Supported architectures (armv7 dropped - package incompatibility)
arch:
  - amd64
  - aarch64

# Pre-built Docker images (built via GitHub Actions)
# HA uses the 'version' field as the image tag automatically
image: ghcr.io/ergetie/darkstar-{arch}

# Startup configuration
init: false
startup: application
boot: auto

# API Access (enables SUPERVISOR_TOKEN for automatic HA authentication)
homeassistant_api: true
hassio_api: true

# Web UI
webui: http://[HOST]:[PORT:5000]
ingress: true
ingress_port: 5000
ingress_stream: true
panel_icon: "mdi:battery-charging"
panel_title: "Darkstar"

# Ports
ports:
  5000/tcp: 5000
ports_description:
  5000/tcp: "Web UI"

# Configuration options (shown in HA Add-on UI)
# NOTE: All other settings (entities, battery, solar, etc.) are configured
#       via the Darkstar web UI after first boot.
options:
  timezone: "Europe/Stockholm"
  log_level: "info"

# Schema (validates options)
schema:
  timezone: str
  log_level: list(debug|info|warning|error)

# Data persistence
map:
  - config:rw
  - share:rw

# Resource limits (optional, good for RPi)
# memory: 512m
