============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /home/s/sync/documents/projects/darkstar/venv/bin/python
cachedir: .pytest_cache
rootdir: /home/s/sync/documents/projects/darkstar
configfile: pyproject.toml
plugins: anyio-4.12.0
collecting ... collected 1 item

tests/test_schedule_history_overlay.py::test_today_with_history_includes_planned_actions[asyncio] DEBUG: Returned 2 slots
DEBUG SLOT: {'start_time': '2026-01-14T10:00:00+00:00', 'end_time': '2026-01-14T11:00:00+00:00', 'battery_charge_kw': 2.0, 'battery_discharge_kw': 0.0, 'soc_target_percent': 50.0, 'export_kwh': 0.0}
DEBUG SLOT: {'start_time': '2026-01-14T11:00:00+00:00', 'end_time': '2026-01-14T12:00:00+00:00', 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.0, 'soc_target_percent': 40.0, 'export_kwh': 0.1}
Checking slot 10:00: {'start_time': '2026-01-14T10:00:00+00:00', 'end_time': '2026-01-14T11:00:00+00:00', 'battery_charge_kw': 2.0, 'battery_discharge_kw': 0.0, 'soc_target_percent': 50.0, 'export_kwh': 0.0}
Checking slot 11:00: {'start_time': '2026-01-14T11:00:00+00:00', 'end_time': '2026-01-14T12:00:00+00:00', 'battery_charge_kw': 0.0, 'battery_discharge_kw': 1.0, 'soc_target_percent': 40.0, 'export_kwh': 0.1}
PASSED

============================== 1 passed in 0.39s ===============================
