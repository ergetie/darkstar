var ZE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var gK=ZE((SK,Yf)=>{function QE(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gx={exports:{}},yu={};var jw;function JE(){if(jw)return yu;jw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:t,type:s,key:l,ref:a!==void 0?a:null,props:o}}return yu.Fragment=e,yu.jsx=n,yu.jsxs=n,yu}var kw;function e5(){return kw||(kw=1,gx.exports=JE()),gx.exports}var u=e5(),xx={exports:{}},at={};var Tw;function t5(){if(Tw)return at;Tw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function j(F){return F===null||typeof F!="object"?null:(F=b&&F[b]||F["@@iterator"],typeof F=="function"?F:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,M={};function R(F,ee,xe){this.props=F,this.context=ee,this.refs=M,this.updater=xe||T}R.prototype.isReactComponent={},R.prototype.setState=function(F,ee){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ee,"setState")},R.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function E(){}E.prototype=R.prototype;function z(F,ee,xe){this.props=F,this.context=ee,this.refs=M,this.updater=xe||T}var U=z.prototype=new E;U.constructor=z,N(U,R.prototype),U.isPureReactComponent=!0;var I=Array.isArray;function V(){}var O={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function Z(F,ee,xe){var H=xe.ref;return{$$typeof:t,type:F,key:ee,ref:H!==void 0?H:null,props:xe}}function re(F,ee){return Z(F.type,ee,F.props)}function J(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function de(F){var ee={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(xe){return ee[xe]})}var le=/\/+/g;function te(F,ee){return typeof F=="object"&&F!==null&&F.key!=null?de(""+F.key):ee.toString(36)}function se(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(V,V):(F.status="pending",F.then(function(ee){F.status==="pending"&&(F.status="fulfilled",F.value=ee)},function(ee){F.status==="pending"&&(F.status="rejected",F.reason=ee)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function W(F,ee,xe,H,pe){var Se=typeof F;(Se==="undefined"||Se==="boolean")&&(F=null);var Ue=!1;if(F===null)Ue=!0;else switch(Se){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(F.$$typeof){case t:case e:Ue=!0;break;case x:return Ue=F._init,W(Ue(F._payload),ee,xe,H,pe)}}if(Ue)return pe=pe(F),Ue=H===""?"."+te(F,0):H,I(pe)?(xe="",Ue!=null&&(xe=Ue.replace(le,"$&/")+"/"),W(pe,ee,xe,"",function(lt){return lt})):pe!=null&&(J(pe)&&(pe=re(pe,xe+(pe.key==null||F&&F.key===pe.key?"":(""+pe.key).replace(le,"$&/")+"/")+Ue)),ee.push(pe)),1;Ue=0;var tt=H===""?".":H+":";if(I(F))for(var Te=0;Te<F.length;Te++)H=F[Te],Se=tt+te(H,Te),Ue+=W(H,ee,xe,Se,pe);else if(Te=j(F),typeof Te=="function")for(F=Te.call(F),Te=0;!(H=F.next()).done;)H=H.value,Se=tt+te(H,Te++),Ue+=W(H,ee,xe,Se,pe);else if(Se==="object"){if(typeof F.then=="function")return W(se(F),ee,xe,H,pe);throw ee=String(F),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function X(F,ee,xe){if(F==null)return F;var H=[],pe=0;return W(F,H,"","",function(Se){return ee.call(xe,Se,pe++)}),H}function ae(F){if(F._status===-1){var ee=F._result;ee=ee(),ee.then(function(xe){(F._status===0||F._status===-1)&&(F._status=1,F._result=xe)},function(xe){(F._status===0||F._status===-1)&&(F._status=2,F._result=xe)}),F._status===-1&&(F._status=0,F._result=ee)}if(F._status===1)return F._result.default;throw F._result}var oe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},me={map:X,forEach:function(F,ee,xe){X(F,function(){ee.apply(this,arguments)},xe)},count:function(F){var ee=0;return X(F,function(){ee++}),ee},toArray:function(F){return X(F,function(ee){return ee})||[]},only:function(F){if(!J(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return at.Activity=y,at.Children=me,at.Component=R,at.Fragment=n,at.Profiler=a,at.PureComponent=z,at.StrictMode=s,at.Suspense=h,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,at.__COMPILER_RUNTIME={__proto__:null,c:function(F){return O.H.useMemoCache(F)}},at.cache=function(F){return function(){return F.apply(null,arguments)}},at.cacheSignal=function(){return null},at.cloneElement=function(F,ee,xe){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var H=N({},F.props),pe=F.key;if(ee!=null)for(Se in ee.key!==void 0&&(pe=""+ee.key),ee)!q.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(H[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)H.children=xe;else if(1<Se){for(var Ue=Array(Se),tt=0;tt<Se;tt++)Ue[tt]=arguments[tt+2];H.children=Ue}return Z(F.type,pe,H)},at.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},at.createElement=function(F,ee,xe){var H,pe={},Se=null;if(ee!=null)for(H in ee.key!==void 0&&(Se=""+ee.key),ee)q.call(ee,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(pe[H]=ee[H]);var Ue=arguments.length-2;if(Ue===1)pe.children=xe;else if(1<Ue){for(var tt=Array(Ue),Te=0;Te<Ue;Te++)tt[Te]=arguments[Te+2];pe.children=tt}if(F&&F.defaultProps)for(H in Ue=F.defaultProps,Ue)pe[H]===void 0&&(pe[H]=Ue[H]);return Z(F,Se,pe)},at.createRef=function(){return{current:null}},at.forwardRef=function(F){return{$$typeof:d,render:F}},at.isValidElement=J,at.lazy=function(F){return{$$typeof:x,_payload:{_status:-1,_result:F},_init:ae}},at.memo=function(F,ee){return{$$typeof:p,type:F,compare:ee===void 0?null:ee}},at.startTransition=function(F){var ee=O.T,xe={};O.T=xe;try{var H=F(),pe=O.S;pe!==null&&pe(xe,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(V,oe)}catch(Se){oe(Se)}finally{ee!==null&&xe.types!==null&&(ee.types=xe.types),O.T=ee}},at.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},at.use=function(F){return O.H.use(F)},at.useActionState=function(F,ee,xe){return O.H.useActionState(F,ee,xe)},at.useCallback=function(F,ee){return O.H.useCallback(F,ee)},at.useContext=function(F){return O.H.useContext(F)},at.useDebugValue=function(){},at.useDeferredValue=function(F,ee){return O.H.useDeferredValue(F,ee)},at.useEffect=function(F,ee){return O.H.useEffect(F,ee)},at.useEffectEvent=function(F){return O.H.useEffectEvent(F)},at.useId=function(){return O.H.useId()},at.useImperativeHandle=function(F,ee,xe){return O.H.useImperativeHandle(F,ee,xe)},at.useInsertionEffect=function(F,ee){return O.H.useInsertionEffect(F,ee)},at.useLayoutEffect=function(F,ee){return O.H.useLayoutEffect(F,ee)},at.useMemo=function(F,ee){return O.H.useMemo(F,ee)},at.useOptimistic=function(F,ee){return O.H.useOptimistic(F,ee)},at.useReducer=function(F,ee,xe){return O.H.useReducer(F,ee,xe)},at.useRef=function(F){return O.H.useRef(F)},at.useState=function(F){return O.H.useState(F)},at.useSyncExternalStore=function(F,ee,xe){return O.H.useSyncExternalStore(F,ee,xe)},at.useTransition=function(){return O.H.useTransition()},at.version="19.2.3",at}var Nw;function Tv(){return Nw||(Nw=1,xx.exports=t5()),xx.exports}var A=Tv();const Kt=kv(A),n5=QE({__proto__:null,default:Kt},[A]);var yx={exports:{}},vu={},vx={exports:{}},bx={};var Mw;function s5(){return Mw||(Mw=1,(function(t){function e(W,X){var ae=W.length;W.push(X);e:for(;0<ae;){var oe=ae-1>>>1,me=W[oe];if(0<a(me,X))W[oe]=X,W[ae]=me,ae=oe;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var X=W[0],ae=W.pop();if(ae!==X){W[0]=ae;e:for(var oe=0,me=W.length,F=me>>>1;oe<F;){var ee=2*(oe+1)-1,xe=W[ee],H=ee+1,pe=W[H];if(0>a(xe,ae))H<me&&0>a(pe,xe)?(W[oe]=pe,W[H]=ae,oe=H):(W[oe]=xe,W[ee]=ae,oe=ee);else if(H<me&&0>a(pe,ae))W[oe]=pe,W[H]=ae,oe=H;else break e}}return X}function a(W,X){var ae=W.sortIndex-X.sortIndex;return ae!==0?ae:W.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],p=[],x=1,y=null,b=3,j=!1,T=!1,N=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function U(W){for(var X=n(p);X!==null;){if(X.callback===null)s(p);else if(X.startTime<=W)s(p),X.sortIndex=X.expirationTime,e(h,X);else break;X=n(p)}}function I(W){if(N=!1,U(W),!T)if(n(h)!==null)T=!0,V||(V=!0,de());else{var X=n(p);X!==null&&se(I,X.startTime-W)}}var V=!1,O=-1,q=5,Z=-1;function re(){return M?!0:!(t.unstable_now()-Z<q)}function J(){if(M=!1,V){var W=t.unstable_now();Z=W;var X=!0;try{e:{T=!1,N&&(N=!1,E(O),O=-1),j=!0;var ae=b;try{t:{for(U(W),y=n(h);y!==null&&!(y.expirationTime>W&&re());){var oe=y.callback;if(typeof oe=="function"){y.callback=null,b=y.priorityLevel;var me=oe(y.expirationTime<=W);if(W=t.unstable_now(),typeof me=="function"){y.callback=me,U(W),X=!0;break t}y===n(h)&&s(h),U(W)}else s(h);y=n(h)}if(y!==null)X=!0;else{var F=n(p);F!==null&&se(I,F.startTime-W),X=!1}}break e}finally{y=null,b=ae,j=!1}X=void 0}}finally{X?de():V=!1}}}var de;if(typeof z=="function")de=function(){z(J)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,te=le.port2;le.port1.onmessage=J,de=function(){te.postMessage(null)}}else de=function(){R(J,0)};function se(W,X){O=R(function(){W(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(W){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var ae=b;b=X;try{return W()}finally{b=ae}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(W,X){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ae=b;b=W;try{return X()}finally{b=ae}},t.unstable_scheduleCallback=function(W,X,ae){var oe=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?oe+ae:oe):ae=oe,W){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ae+me,W={id:x++,callback:X,priorityLevel:W,startTime:ae,expirationTime:me,sortIndex:-1},ae>oe?(W.sortIndex=ae,e(p,W),n(h)===null&&W===n(p)&&(N?(E(O),O=-1):N=!0,se(I,ae-oe))):(W.sortIndex=me,e(h,W),T||j||(T=!0,V||(V=!0,de()))),W},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(W){var X=b;return function(){var ae=b;b=X;try{return W.apply(this,arguments)}finally{b=ae}}}})(bx)),bx}var Dw;function i5(){return Dw||(Dw=1,vx.exports=s5()),vx.exports}var _x={exports:{}},ss={};var Cw;function a5(){if(Cw)return ss;Cw=1;var t=Tv();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,p,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:h,containerInfo:p,implementation:x}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ss.createPortal=function(h,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(h,p,null,x)},ss.flushSync=function(h){var p=l.T,x=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=p,s.p=x,s.d.f()}},ss.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},ss.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},ss.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var x=p.as,y=d(x,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,j=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:j}):x==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:j,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ss.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=d(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},ss.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,y=d(x,p.crossOrigin);s.d.L(h,x,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ss.preloadModule=function(h,p){if(typeof h=="string")if(p){var x=d(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},ss.requestFormReset=function(h){s.d.r(h)},ss.unstable_batchedUpdates=function(h,p){return h(p)},ss.useFormState=function(h,p,x){return l.H.useFormState(h,p,x)},ss.useFormStatus=function(){return l.H.useHostTransitionStatus()},ss.version="19.2.3",ss}var Ew;function Rk(){if(Ew)return _x.exports;Ew=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_x.exports=a5(),_x.exports}var Aw;function r5(){if(Aw)return vu;Aw=1;var t=i5(),e=Tv(),n=Rk();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function l(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var c=i,f=r;;){var v=c.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===c)return h(v),i;if(_===f)return h(v),r;_=_.sibling}throw Error(s(188))}if(c.return!==f.return)c=v,f=_;else{for(var D=!1,L=v.child;L;){if(L===c){D=!0,c=v,f=_;break}if(L===f){D=!0,f=v,c=_;break}L=L.sibling}if(!D){for(L=_.child;L;){if(L===c){D=!0,c=_,f=v;break}if(L===f){D=!0,f=_,c=v;break}L=L.sibling}if(!D)throw Error(s(189))}}if(c.alternate!==f)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:r}function x(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=x(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),z=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function de(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var le=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===le?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case R:return"Profiler";case M:return"StrictMode";case I:return"Suspense";case V:return"SuspenseList";case Z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case z:return i.displayName||"Context";case E:return(i._context.displayName||"Context")+".Consumer";case U:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:te(i.type)||"Memo";case q:r=i._payload,i=i._init;try{return te(i(r))}catch{}}return null}var se=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},oe=[],me=-1;function F(i){return{current:i}}function ee(i){0>me||(i.current=oe[me],oe[me]=null,me--)}function xe(i,r){me++,oe[me]=i.current,i.current=r}var H=F(null),pe=F(null),Se=F(null),Ue=F(null);function tt(i,r){switch(xe(Se,r),xe(pe,i),xe(H,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?q1(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=q1(r),i=G1(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(H),xe(H,i)}function Te(){ee(H),ee(pe),ee(Se)}function lt(i){i.memoizedState!==null&&xe(Ue,i);var r=H.current,c=G1(r,i.type);r!==c&&(xe(pe,i),xe(H,c))}function gt(i){pe.current===i&&(ee(H),ee(pe)),Ue.current===i&&(ee(Ue),pu._currentValue=ae)}var _t,Bt;function Mt(i){if(_t===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);_t=r&&r[1]||"",Bt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_t+i+Bt}var st=!1;function fn(i,r){if(!i||st)return"";st=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ge){var he=ge}Reflect.construct(i,[],we)}else{try{we.call()}catch(ge){he=ge}i.call(we.prototype)}}else{try{throw Error()}catch(ge){he=ge}(we=i())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ge){if(ge&&he&&typeof ge.stack=="string")return[ge.stack,he.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),D=_[0],L=_[1];if(D&&L){var G=D.split(`
`),ue=L.split(`
`);for(v=f=0;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;for(;v<ue.length&&!ue[v].includes("DetermineComponentFrameRoot");)v++;if(f===G.length||v===ue.length)for(f=G.length-1,v=ue.length-1;1<=f&&0<=v&&G[f]!==ue[v];)v--;for(;1<=f&&0<=v;f--,v--)if(G[f]!==ue[v]){if(f!==1||v!==1)do if(f--,v--,0>v||G[f]!==ue[v]){var be=`
`+G[f].replace(" at new "," at ");return i.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",i.displayName)),be}while(1<=f&&0<=v);break}}}finally{st=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Mt(c):""}function es(i,r){switch(i.tag){case 26:case 27:case 5:return Mt(i.type);case 16:return Mt("Lazy");case 13:return i.child!==r&&r!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return fn(i.type,!1);case 11:return fn(i.type.render,!1);case 1:return fn(i.type,!0);case 31:return Mt("Activity");default:return""}}function vn(i){try{var r="",c=null;do r+=es(i,c),c=i,i=i.return;while(i);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var ds=Object.prototype.hasOwnProperty,Hn=t.unstable_scheduleCallback,ze=t.unstable_cancelCallback,xt=t.unstable_shouldYield,pn=t.unstable_requestPaint,zt=t.unstable_now,Es=t.unstable_getCurrentPriorityLevel,ot=t.unstable_ImmediatePriority,Wn=t.unstable_UserBlockingPriority,Ln=t.unstable_NormalPriority,Is=t.unstable_LowPriority,gs=t.unstable_IdlePriority,di=t.log,ts=t.unstable_setDisableYieldValue,xs=null,mn=null;function $t(i){if(typeof di=="function"&&ts(i),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(xs,i)}catch{}}var gn=Math.clz32?Math.clz32:Ei,zn=Math.log,hi=Math.LN2;function Ei(i){return i>>>=0,i===0?32:31-(zn(i)/hi|0)|0}var Cn=256,Ys=262144,As=4194304;function hs(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ws(i,r,c){var f=i.pendingLanes;if(f===0)return 0;var v=0,_=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var L=f&134217727;return L!==0?(f=L&~_,f!==0?v=hs(f):(D&=L,D!==0?v=hs(D):c||(c=L&~i,c!==0&&(v=hs(c))))):(L=f&~_,L!==0?v=hs(L):D!==0?v=hs(D):c||(c=f&~i,c!==0&&(v=hs(c)))),v===0?0:r!==0&&r!==v&&(r&_)===0&&(_=v&-v,c=r&-r,_>=c||_===32&&(c&4194048)!==0)?r:v}function ys(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Ai(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oi(){var i=As;return As<<=1,(As&62914560)===0&&(As=4194304),i}function fi(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function vs(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ri(i,r,c,f,v,_){var D=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var L=i.entanglements,G=i.expirationTimes,ue=i.hiddenUpdates;for(c=D&~c;0<c;){var be=31-gn(c),we=1<<be;L[be]=0,G[be]=-1;var he=ue[be];if(he!==null)for(ue[be]=null,be=0;be<he.length;be++){var ge=he[be];ge!==null&&(ge.lane&=-536870913)}c&=~we}f!==0&&Pe(i,f,0),_!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=_&~(D&~r))}function Pe(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var f=31-gn(r);i.entangledLanes|=r,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function mt(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var f=31-gn(c),v=1<<f;v&r|i[f]&r&&(i[f]|=r),c&=~v}}function qt(i,r){var c=r&-r;return c=(c&42)!==0?1:fe(c),(c&(i.suspendedLanes|r))!==0?0:c}function fe(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ve(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Me(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:xw(i.type))}function Ve(i,r){var c=X.p;try{return X.p=i,r()}finally{X.p=c}}var je=Math.random().toString(36).slice(2),Oe="__reactFiber$"+je,Qe="__reactProps$"+je,Ae="__reactContainer$"+je,Gt="__reactEvents$"+je,Qt="__reactListeners$"+je,Fe="__reactHandles$"+je,ln="__reactResources$"+je,Dt="__reactMarker$"+je;function fs(i){delete i[Oe],delete i[Qe],delete i[Gt],delete i[Qt],delete i[Fe]}function bs(i){var r=i[Oe];if(r)return r;for(var c=i.parentNode;c;){if(r=c[Ae]||c[Oe]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=tw(i);i!==null;){if(c=i[Oe])return c;i=tw(i)}return r}i=c,c=i.parentNode}return null}function pi(i){if(i=i[Oe]||i[Ae]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Pi(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function ps(i){var r=i[ln];return r||(r=i[ln]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Jt(i){i[Dt]=!0}var to=new Set,bc={};function $s(i,r){na(i,r),na(i+"Capture",r)}function na(i,r){for(bc[i]=r,i=0;i<r.length;i++)to.add(r[i])}var _c=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},zd={};function Sc(i){return ds.call(zd,i)?!0:ds.call(wc,i)?!1:_c.test(i)?zd[i]=!0:(wc[i]=!0,!1)}function el(i,r,c){if(Sc(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function Xa(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function mi(i,r,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+f)}}function _s(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Bd(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lm(i,r,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return v.call(this)},set:function(D){c=""+D,_.call(this,D)}}),Object.defineProperty(i,r,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(D){c=""+D},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function jc(i){if(!i._valueTracker){var r=Bd(i)?"checked":"value";i._valueTracker=lm(i,r,""+i[r])}}function kc(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),f="";return i&&(f=Bd(i)?i.checked?"true":"false":i.value),i=f,i!==c?(r.setValue(i),!0):!1}function sa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ka=/[\n"\\]/g;function ns(i){return i.replace(Ka,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Za(i,r,c,f,v,_,D,L){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),r!=null?D==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+_s(r)):i.value!==""+_s(r)&&(i.value=""+_s(r)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),r!=null?ia(i,D,_s(r)):c!=null?ia(i,D,_s(c)):f!=null&&i.removeAttribute("value"),v==null&&_!=null&&(i.defaultChecked=!!_),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+_s(L):i.removeAttribute("name")}function gi(i,r,c,f,v,_,D,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){jc(i);return}c=c!=null?""+_s(c):"",r=r!=null?""+_s(r):c,L||r===i.value||(i.value=r),i.defaultValue=r}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=L?i.checked:!!f,i.defaultChecked=!!f,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D),jc(i)}function ia(i,r,c){r==="number"&&sa(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Qa(i,r,c,f){if(i=i.options,r){r={};for(var v=0;v<c.length;v++)r["$"+c[v]]=!0;for(c=0;c<i.length;c++)v=r.hasOwnProperty("$"+i[c].value),i[c].selected!==v&&(i[c].selected=v),v&&f&&(i[c].defaultSelected=!0)}else{for(c=""+_s(c),r=null,v=0;v<i.length;v++){if(i[v].value===c){i[v].selected=!0,f&&(i[v].defaultSelected=!0);return}r!==null||i[v].disabled||(r=i[v])}r!==null&&(r.selected=!0)}}function Tc(i,r,c){if(r!=null&&(r=""+_s(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+_s(c):""}function Nc(i,r,c,f){if(r==null){if(f!=null){if(c!=null)throw Error(s(92));if(se(f)){if(1<f.length)throw Error(s(93));f=f[0]}c=f}c==null&&(c=""),r=c}c=_s(r),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),jc(i)}function Li(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var cm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vd(i,r,c){var f=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":f?i.setProperty(r,c):typeof c!="number"||c===0||cm.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function Mc(i,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var v in r)f=r[v],r.hasOwnProperty(v)&&c[v]!==f&&Vd(i,v,f)}else for(var _ in r)r.hasOwnProperty(_)&&Vd(i,_,r[_])}function Dc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var um=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(i){return Fd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function xi(){}var so=null;function Cc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var aa=null,Ja=null;function io(i){var r=pi(i);if(r&&(i=r.stateNode)){var c=i[Qe]||null;e:switch(i=r.stateNode,r.type){case"input":if(Za(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ns(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var f=c[r];if(f!==i&&f.form===i.form){var v=f[Qe]||null;if(!v)throw Error(s(90));Za(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<c.length;r++)f=c[r],f.form===i.form&&kc(f)}break e;case"textarea":Tc(i,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Qa(i,!!c.multiple,r,!1)}}}var Ec=!1;function Ac(i,r,c){if(Ec)return i(r,c);Ec=!0;try{var f=i(r);return f}finally{if(Ec=!1,(aa!==null||Ja!==null)&&(Lh(),aa&&(r=aa,i=Ja,Ja=aa=null,io(r),i)))for(r=0;r<i.length;r++)io(i[r])}}function er(i,r){var c=i.stateNode;if(c===null)return null;var f=c[Qe]||null;if(f===null)return null;c=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=!1;if(yi)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){tl=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{tl=!1}var zi=null,ra=null,oa=null;function Hd(){if(oa)return oa;var i,r=ra,c=r.length,f,v="value"in zi?zi.value:zi.textContent,_=v.length;for(i=0;i<c&&r[i]===v[i];i++);var D=c-i;for(f=1;f<=D&&r[c-f]===v[_-f];f++);return oa=v.slice(i,1<f?1-f:void 0)}function nr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ao(){return!0}function Ud(){return!1}function Un(i){function r(c,f,v,_,D){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=D,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ao:Ud,this.isPropagationStopped=Ud,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),r}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=Un(Bi),la=y({},Bi,{view:0,detail:0}),dm=Un(la),Oc,qs,oo,nl=y({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==oo&&(oo&&i.type==="mousemove"?(Oc=i.screenX-oo.screenX,qs=i.screenY-oo.screenY):qs=Oc=0,oo=i),Oc)},movementY:function(i){return"movementY"in i?i.movementY:qs}}),Id=Un(nl),Yd=y({},nl,{dataTransfer:0}),Wd=Un(Yd),$n=y({},la,{relatedTarget:0}),Rc=Un($n),hm=y({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),fm=Un(hm),pm=y({},Bi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mm=Un(pm),gm=y({},Bi,{data:0}),$d=Un(gm),xm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ca(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=sl[i])?!!r[i]:!1}function sr(){return ca}var ym=y({},la,{key:function(i){if(i.key){var r=xm[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=nr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?qd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(i){return i.type==="keypress"?nr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?nr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Gd=Un(ym),Xd=y({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pc=Un(Xd),lo=y({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),vm=Un(lo),bm=y({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_m=Un(bm),wm=y({},nl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Sm=Un(wm),jm=y({},Bi,{newState:0,oldState:0}),Lc=Un(jm),km=[9,13,27,32],ir=yi&&"CompositionEvent"in window,co=null;yi&&"documentMode"in document&&(co=document.documentMode);var zc=yi&&"TextEvent"in window&&!co,Kd=yi&&(!ir||co&&8<co&&11>=co),Zd=" ",Bc=!1;function ar(i,r){switch(i){case"keyup":return km.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vi(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ua=!1;function Vc(i,r){switch(i){case"compositionend":return vi(r);case"keypress":return r.which!==32?null:(Bc=!0,Zd);case"textInput":return i=r.data,i===Zd&&Bc?null:i;default:return null}}function Tm(i,r){if(ua)return i==="compositionend"||!ir&&ar(i,r)?(i=Hd(),oa=ra=zi=null,ua=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Kd&&r.locale!=="ko"?null:r.data;default:return null}}var Nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Nm[i.type]:r==="textarea"}function Jd(i,r,c,f){aa?Ja?Ja.push(f):Ja=[f]:aa=f,r=Ih(r,"onChange"),0<r.length&&(c=new ro("onChange","change",null,c,f),i.push({event:c,listeners:r}))}var uo=null,ho=null;function Mm(i){H1(i,0)}function il(i){var r=Pi(i);if(kc(r))return i}function eh(i,r){if(i==="change")return r}var th=!1;if(yi){var g;if(yi){var m="oninput"in document;if(!m){var w=document.createElement("div");w.setAttribute("oninput","return;"),m=typeof w.oninput=="function"}g=m}else g=!1;th=g&&(!document.documentMode||9<document.documentMode)}function S(){uo&&(uo.detachEvent("onpropertychange",k),ho=uo=null)}function k(i){if(i.propertyName==="value"&&il(ho)){var r=[];Jd(r,ho,i,Cc(i)),Ac(Mm,r)}}function C(i,r,c){i==="focusin"?(S(),uo=r,ho=c,uo.attachEvent("onpropertychange",k)):i==="focusout"&&S()}function P(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return il(ho)}function B(i,r){if(i==="click")return il(r)}function Y(i,r){if(i==="input"||i==="change")return il(r)}function K(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var $=typeof Object.is=="function"?Object.is:K;function ne(i,r){if($(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),f=Object.keys(r);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!ds.call(r,v)||!$(i[v],r[v]))return!1}return!0}function ye(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ne(i,r){var c=ye(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=r&&f>=r)return{node:c,offset:r-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ye(c)}}function ke(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?ke(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ce(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=sa(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=sa(i.document)}return r}function Be(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Le=yi&&"documentMode"in document&&11>=document.documentMode,Ye=null,nt=null,ct=null,Xe=!1;function it(i,r,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Xe||Ye==null||Ye!==sa(f)||(f=Ye,"selectionStart"in f&&Be(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ct&&ne(ct,f)||(ct=f,f=Ih(nt,"onSelect"),0<f.length&&(r=new ro("onSelect","select",null,r,c),i.push({event:r,listeners:f}),r.target=Ye)))}function xn(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Pt={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionrun:xn("Transition","TransitionRun"),transitionstart:xn("Transition","TransitionStart"),transitioncancel:xn("Transition","TransitionCancel"),transitionend:xn("Transition","TransitionEnd")},qn={},ws={};yi&&(ws=document.createElement("div").style,"AnimationEvent"in window||(delete Pt.animationend.animation,delete Pt.animationiteration.animation,delete Pt.animationstart.animation),"TransitionEvent"in window||delete Pt.transitionend.transition);function Gn(i){if(qn[i])return qn[i];if(!Pt[i])return i;var r=Pt[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in ws)return qn[i]=r[c];return i}var fo=Gn("animationend"),rr=Gn("animationiteration"),vb=Gn("animationstart"),EC=Gn("transitionrun"),AC=Gn("transitionstart"),OC=Gn("transitioncancel"),bb=Gn("transitionend"),_b=new Map,Dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dm.push("scrollEnd");function bi(i,r){_b.set(i,r),$s(r,[i])}var nh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Gs=[],al=0,Cm=0;function sh(){for(var i=al,r=Cm=al=0;r<i;){var c=Gs[r];Gs[r++]=null;var f=Gs[r];Gs[r++]=null;var v=Gs[r];Gs[r++]=null;var _=Gs[r];if(Gs[r++]=null,f!==null&&v!==null){var D=f.pending;D===null?v.next=v:(v.next=D.next,D.next=v),f.pending=v}_!==0&&wb(c,v,_)}}function ih(i,r,c,f){Gs[al++]=i,Gs[al++]=r,Gs[al++]=c,Gs[al++]=f,Cm|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Em(i,r,c,f){return ih(i,r,c,f),ah(i)}function po(i,r){return ih(i,null,null,r),ah(i)}function wb(i,r,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var v=!1,_=i.return;_!==null;)_.childLanes|=c,f=_.alternate,f!==null&&(f.childLanes|=c),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(v=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,v&&r!==null&&(v=31-gn(c),i=_.hiddenUpdates,f=i[v],f===null?i[v]=[r]:f.push(r),r.lane=c|536870912),_):null}function ah(i){if(50<ou)throw ou=0,Fg=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var rl={};function RC(i,r,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(i,r,c,f){return new RC(i,r,c,f)}function Am(i){return i=i.prototype,!(!i||!i.isReactComponent)}function da(i,r){var c=i.alternate;return c===null?(c=Os(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Sb(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function rh(i,r,c,f,v,_){var D=0;if(f=i,typeof i=="function")Am(i)&&(D=1);else if(typeof i=="string")D=VE(i,c,H.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Z:return i=Os(31,c,r,v),i.elementType=Z,i.lanes=_,i;case N:return mo(c.children,v,_,r);case M:D=8,v|=24;break;case R:return i=Os(12,c,r,v|2),i.elementType=R,i.lanes=_,i;case I:return i=Os(13,c,r,v),i.elementType=I,i.lanes=_,i;case V:return i=Os(19,c,r,v),i.elementType=V,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:D=10;break e;case E:D=9;break e;case U:D=11;break e;case O:D=14;break e;case q:D=16,f=null;break e}D=29,c=Error(s(130,i===null?"null":typeof i,"")),f=null}return r=Os(D,c,r,v),r.elementType=i,r.type=f,r.lanes=_,r}function mo(i,r,c,f){return i=Os(7,i,f,r),i.lanes=c,i}function Om(i,r,c){return i=Os(6,i,null,r),i.lanes=c,i}function jb(i){var r=Os(18,null,null,0);return r.stateNode=i,r}function Rm(i,r,c){return r=Os(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var kb=new WeakMap;function Xs(i,r){if(typeof i=="object"&&i!==null){var c=kb.get(i);return c!==void 0?c:(r={value:i,source:r,stack:vn(r)},kb.set(i,r),r)}return{value:i,source:r,stack:vn(r)}}var ol=[],ll=0,oh=null,Fc=0,Ks=[],Zs=0,or=null,Vi=1,Fi="";function ha(i,r){ol[ll++]=Fc,ol[ll++]=oh,oh=i,Fc=r}function Tb(i,r,c){Ks[Zs++]=Vi,Ks[Zs++]=Fi,Ks[Zs++]=or,or=i;var f=Vi;i=Fi;var v=32-gn(f)-1;f&=~(1<<v),c+=1;var _=32-gn(r)+v;if(30<_){var D=v-v%5;_=(f&(1<<D)-1).toString(32),f>>=D,v-=D,Vi=1<<32-gn(r)+v|c<<v|f,Fi=_+i}else Vi=1<<_|c<<v|f,Fi=i}function Pm(i){i.return!==null&&(ha(i,1),Tb(i,1,0))}function Lm(i){for(;i===oh;)oh=ol[--ll],ol[ll]=null,Fc=ol[--ll],ol[ll]=null;for(;i===or;)or=Ks[--Zs],Ks[Zs]=null,Fi=Ks[--Zs],Ks[Zs]=null,Vi=Ks[--Zs],Ks[Zs]=null}function Nb(i,r){Ks[Zs++]=Vi,Ks[Zs++]=Fi,Ks[Zs++]=or,Vi=r.id,Fi=r.overflow,or=i}var Xn=null,en=null,Tt=!1,lr=null,Qs=!1,zm=Error(s(519));function cr(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hc(Xs(r,i)),zm}function Mb(i){var r=i.stateNode,c=i.type,f=i.memoizedProps;switch(r[Oe]=i,r[Qe]=f,c){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(c=0;c<cu.length;c++)vt(cu[c],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":vt("invalid",r),gi(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":vt("invalid",r);break;case"textarea":vt("invalid",r),Nc(r,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||f.suppressHydrationWarning===!0||W1(r.textContent,c)?(f.popover!=null&&(vt("beforetoggle",r),vt("toggle",r)),f.onScroll!=null&&vt("scroll",r),f.onScrollEnd!=null&&vt("scrollend",r),f.onClick!=null&&(r.onclick=xi),r=!0):r=!1,r||cr(i,!0)}function Db(i){for(Xn=i.return;Xn;)switch(Xn.tag){case 5:case 31:case 13:Qs=!1;return;case 27:case 3:Qs=!0;return;default:Xn=Xn.return}}function cl(i){if(i!==Xn)return!1;if(!Tt)return Db(i),Tt=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||tx(i.type,i.memoizedProps)),c=!c),c&&en&&cr(i),Db(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));en=ew(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));en=ew(i)}else r===27?(r=en,Sr(i.type)?(i=rx,rx=null,en=i):en=r):en=Xn?ei(i.stateNode.nextSibling):null;return!0}function go(){en=Xn=null,Tt=!1}function Bm(){var i=lr;return i!==null&&(Ts===null?Ts=i:Ts.push.apply(Ts,i),lr=null),i}function Hc(i){lr===null?lr=[i]:lr.push(i)}var Vm=F(null),xo=null,fa=null;function ur(i,r,c){xe(Vm,r._currentValue),r._currentValue=c}function pa(i){i._currentValue=Vm.current,ee(Vm)}function Fm(i,r,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),i===c)break;i=i.return}}function Hm(i,r,c,f){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var _=v.dependencies;if(_!==null){var D=v.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=v;for(var G=0;G<r.length;G++)if(L.context===r[G]){_.lanes|=c,L=_.alternate,L!==null&&(L.lanes|=c),Fm(_.return,c,i),f||(D=null);break e}_=L.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(s(341));D.lanes|=c,_=D.alternate,_!==null&&(_.lanes|=c),Fm(D,c,i),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===i){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function ul(i,r,c,f){i=null;for(var v=r,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(s(387));if(D=D.memoizedProps,D!==null){var L=v.type;$(v.pendingProps.value,D.value)||(i!==null?i.push(L):i=[L])}}else if(v===Ue.current){if(D=v.alternate,D===null)throw Error(s(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(pu):i=[pu])}v=v.return}i!==null&&Hm(r,i,c,f),r.flags|=262144}function lh(i){for(i=i.firstContext;i!==null;){if(!$(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function yo(i){xo=i,fa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Kn(i){return Cb(xo,i)}function ch(i,r){return xo===null&&yo(i),Cb(i,r)}function Cb(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},fa===null){if(i===null)throw Error(s(308));fa=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else fa=fa.next=r;return c}var PC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},LC=t.unstable_scheduleCallback,zC=t.unstable_NormalPriority,En={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Um(){return{controller:new PC,data:new Map,refCount:0}}function Uc(i){i.refCount--,i.refCount===0&&LC(zC,function(){i.controller.abort()})}var Ic=null,Im=0,dl=0,hl=null;function BC(i,r){if(Ic===null){var c=Ic=[];Im=0,dl=$g(),hl={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Im++,r.then(Eb,Eb),r}function Eb(){if(--Im===0&&Ic!==null){hl!==null&&(hl.status="fulfilled");var i=Ic;Ic=null,dl=0,hl=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function VC(i,r){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return i.then(function(){f.status="fulfilled",f.value=r;for(var v=0;v<c.length;v++)(0,c[v])(r)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var Ab=W.S;W.S=function(i,r){m1=zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&BC(i,r),Ab!==null&&Ab(i,r)};var vo=F(null);function Ym(){var i=vo.current;return i!==null?i:Xt.pooledCache}function uh(i,r){r===null?xe(vo,vo.current):xe(vo,r.pool)}function Ob(){var i=Ym();return i===null?null:{parent:En._currentValue,pool:i}}var fl=Error(s(460)),Wm=Error(s(474)),dh=Error(s(542)),hh={then:function(){}};function Rb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Pb(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(xi,xi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,zb(i),i;default:if(typeof r.status=="string")r.then(xi,xi);else{if(i=Xt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(f){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=f}},function(f){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,zb(i),i}throw _o=r,fl}}function bo(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(_o=c,fl):c}}var _o=null;function Lb(){if(_o===null)throw Error(s(459));var i=_o;return _o=null,i}function zb(i){if(i===fl||i===dh)throw Error(s(483))}var pl=null,Yc=0;function fh(i){var r=Yc;return Yc+=1,pl===null&&(pl=[]),Pb(pl,i,r)}function Wc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ph(i,r){throw r.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Bb(i){function r(ie,Q){if(i){var ce=ie.deletions;ce===null?(ie.deletions=[Q],ie.flags|=16):ce.push(Q)}}function c(ie,Q){if(!i)return null;for(;Q!==null;)r(ie,Q),Q=Q.sibling;return null}function f(ie){for(var Q=new Map;ie!==null;)ie.key!==null?Q.set(ie.key,ie):Q.set(ie.index,ie),ie=ie.sibling;return Q}function v(ie,Q){return ie=da(ie,Q),ie.index=0,ie.sibling=null,ie}function _(ie,Q,ce){return ie.index=ce,i?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<Q?(ie.flags|=67108866,Q):ce):(ie.flags|=67108866,Q)):(ie.flags|=1048576,Q)}function D(ie){return i&&ie.alternate===null&&(ie.flags|=67108866),ie}function L(ie,Q,ce,_e){return Q===null||Q.tag!==6?(Q=Om(ce,ie.mode,_e),Q.return=ie,Q):(Q=v(Q,ce),Q.return=ie,Q)}function G(ie,Q,ce,_e){var $e=ce.type;return $e===N?be(ie,Q,ce.props.children,_e,ce.key):Q!==null&&(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===q&&bo($e)===Q.type)?(Q=v(Q,ce.props),Wc(Q,ce),Q.return=ie,Q):(Q=rh(ce.type,ce.key,ce.props,null,ie.mode,_e),Wc(Q,ce),Q.return=ie,Q)}function ue(ie,Q,ce,_e){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ce.containerInfo||Q.stateNode.implementation!==ce.implementation?(Q=Rm(ce,ie.mode,_e),Q.return=ie,Q):(Q=v(Q,ce.children||[]),Q.return=ie,Q)}function be(ie,Q,ce,_e,$e){return Q===null||Q.tag!==7?(Q=mo(ce,ie.mode,_e,$e),Q.return=ie,Q):(Q=v(Q,ce),Q.return=ie,Q)}function we(ie,Q,ce){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Om(""+Q,ie.mode,ce),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case j:return ce=rh(Q.type,Q.key,Q.props,null,ie.mode,ce),Wc(ce,Q),ce.return=ie,ce;case T:return Q=Rm(Q,ie.mode,ce),Q.return=ie,Q;case q:return Q=bo(Q),we(ie,Q,ce)}if(se(Q)||de(Q))return Q=mo(Q,ie.mode,ce,null),Q.return=ie,Q;if(typeof Q.then=="function")return we(ie,fh(Q),ce);if(Q.$$typeof===z)return we(ie,ch(ie,Q),ce);ph(ie,Q)}return null}function he(ie,Q,ce,_e){var $e=Q!==null?Q.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return $e!==null?null:L(ie,Q,""+ce,_e);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:return ce.key===$e?G(ie,Q,ce,_e):null;case T:return ce.key===$e?ue(ie,Q,ce,_e):null;case q:return ce=bo(ce),he(ie,Q,ce,_e)}if(se(ce)||de(ce))return $e!==null?null:be(ie,Q,ce,_e,null);if(typeof ce.then=="function")return he(ie,Q,fh(ce),_e);if(ce.$$typeof===z)return he(ie,Q,ch(ie,ce),_e);ph(ie,ce)}return null}function ge(ie,Q,ce,_e,$e){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return ie=ie.get(ce)||null,L(Q,ie,""+_e,$e);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case j:return ie=ie.get(_e.key===null?ce:_e.key)||null,G(Q,ie,_e,$e);case T:return ie=ie.get(_e.key===null?ce:_e.key)||null,ue(Q,ie,_e,$e);case q:return _e=bo(_e),ge(ie,Q,ce,_e,$e)}if(se(_e)||de(_e))return ie=ie.get(ce)||null,be(Q,ie,_e,$e,null);if(typeof _e.then=="function")return ge(ie,Q,ce,fh(_e),$e);if(_e.$$typeof===z)return ge(ie,Q,ce,ch(Q,_e),$e);ph(Q,_e)}return null}function Ie(ie,Q,ce,_e){for(var $e=null,Ct=null,We=Q,dt=Q=0,St=null;We!==null&&dt<ce.length;dt++){We.index>dt?(St=We,We=null):St=We.sibling;var Et=he(ie,We,ce[dt],_e);if(Et===null){We===null&&(We=St);break}i&&We&&Et.alternate===null&&r(ie,We),Q=_(Et,Q,dt),Ct===null?$e=Et:Ct.sibling=Et,Ct=Et,We=St}if(dt===ce.length)return c(ie,We),Tt&&ha(ie,dt),$e;if(We===null){for(;dt<ce.length;dt++)We=we(ie,ce[dt],_e),We!==null&&(Q=_(We,Q,dt),Ct===null?$e=We:Ct.sibling=We,Ct=We);return Tt&&ha(ie,dt),$e}for(We=f(We);dt<ce.length;dt++)St=ge(We,ie,dt,ce[dt],_e),St!==null&&(i&&St.alternate!==null&&We.delete(St.key===null?dt:St.key),Q=_(St,Q,dt),Ct===null?$e=St:Ct.sibling=St,Ct=St);return i&&We.forEach(function(Mr){return r(ie,Mr)}),Tt&&ha(ie,dt),$e}function Ze(ie,Q,ce,_e){if(ce==null)throw Error(s(151));for(var $e=null,Ct=null,We=Q,dt=Q=0,St=null,Et=ce.next();We!==null&&!Et.done;dt++,Et=ce.next()){We.index>dt?(St=We,We=null):St=We.sibling;var Mr=he(ie,We,Et.value,_e);if(Mr===null){We===null&&(We=St);break}i&&We&&Mr.alternate===null&&r(ie,We),Q=_(Mr,Q,dt),Ct===null?$e=Mr:Ct.sibling=Mr,Ct=Mr,We=St}if(Et.done)return c(ie,We),Tt&&ha(ie,dt),$e;if(We===null){for(;!Et.done;dt++,Et=ce.next())Et=we(ie,Et.value,_e),Et!==null&&(Q=_(Et,Q,dt),Ct===null?$e=Et:Ct.sibling=Et,Ct=Et);return Tt&&ha(ie,dt),$e}for(We=f(We);!Et.done;dt++,Et=ce.next())Et=ge(We,ie,dt,Et.value,_e),Et!==null&&(i&&Et.alternate!==null&&We.delete(Et.key===null?dt:Et.key),Q=_(Et,Q,dt),Ct===null?$e=Et:Ct.sibling=Et,Ct=Et);return i&&We.forEach(function(KE){return r(ie,KE)}),Tt&&ha(ie,dt),$e}function Yt(ie,Q,ce,_e){if(typeof ce=="object"&&ce!==null&&ce.type===N&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:e:{for(var $e=ce.key;Q!==null;){if(Q.key===$e){if($e=ce.type,$e===N){if(Q.tag===7){c(ie,Q.sibling),_e=v(Q,ce.props.children),_e.return=ie,ie=_e;break e}}else if(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===q&&bo($e)===Q.type){c(ie,Q.sibling),_e=v(Q,ce.props),Wc(_e,ce),_e.return=ie,ie=_e;break e}c(ie,Q);break}else r(ie,Q);Q=Q.sibling}ce.type===N?(_e=mo(ce.props.children,ie.mode,_e,ce.key),_e.return=ie,ie=_e):(_e=rh(ce.type,ce.key,ce.props,null,ie.mode,_e),Wc(_e,ce),_e.return=ie,ie=_e)}return D(ie);case T:e:{for($e=ce.key;Q!==null;){if(Q.key===$e)if(Q.tag===4&&Q.stateNode.containerInfo===ce.containerInfo&&Q.stateNode.implementation===ce.implementation){c(ie,Q.sibling),_e=v(Q,ce.children||[]),_e.return=ie,ie=_e;break e}else{c(ie,Q);break}else r(ie,Q);Q=Q.sibling}_e=Rm(ce,ie.mode,_e),_e.return=ie,ie=_e}return D(ie);case q:return ce=bo(ce),Yt(ie,Q,ce,_e)}if(se(ce))return Ie(ie,Q,ce,_e);if(de(ce)){if($e=de(ce),typeof $e!="function")throw Error(s(150));return ce=$e.call(ce),Ze(ie,Q,ce,_e)}if(typeof ce.then=="function")return Yt(ie,Q,fh(ce),_e);if(ce.$$typeof===z)return Yt(ie,Q,ch(ie,ce),_e);ph(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Q!==null&&Q.tag===6?(c(ie,Q.sibling),_e=v(Q,ce),_e.return=ie,ie=_e):(c(ie,Q),_e=Om(ce,ie.mode,_e),_e.return=ie,ie=_e),D(ie)):c(ie,Q)}return function(ie,Q,ce,_e){try{Yc=0;var $e=Yt(ie,Q,ce,_e);return pl=null,$e}catch(We){if(We===fl||We===dh)throw We;var Ct=Os(29,We,null,ie.mode);return Ct.lanes=_e,Ct.return=ie,Ct}}}var wo=Bb(!0),Vb=Bb(!1),dr=!1;function $m(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function hr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function fr(i,r,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Lt&2)!==0){var v=f.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),f.pending=r,r=ah(i),wb(i,null,c),r}return ih(i,f,r,c),ah(i)}function $c(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var f=r.lanes;f&=i.pendingLanes,c|=f,r.lanes=c,mt(i,c)}}function Gm(i,r){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var D={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?v=_=D:_=_.next=D,c=c.next}while(c!==null);_===null?v=_=r:_=_.next=r}else v=_=r;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var Xm=!1;function qc(){if(Xm){var i=hl;if(i!==null)throw i}}function Gc(i,r,c,f){Xm=!1;var v=i.updateQueue;dr=!1;var _=v.firstBaseUpdate,D=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var G=L,ue=G.next;G.next=null,D===null?_=ue:D.next=ue,D=G;var be=i.alternate;be!==null&&(be=be.updateQueue,L=be.lastBaseUpdate,L!==D&&(L===null?be.firstBaseUpdate=ue:L.next=ue,be.lastBaseUpdate=G))}if(_!==null){var we=v.baseState;D=0,be=ue=G=null,L=_;do{var he=L.lane&-536870913,ge=he!==L.lane;if(ge?(wt&he)===he:(f&he)===he){he!==0&&he===dl&&(Xm=!0),be!==null&&(be=be.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ie=i,Ze=L;he=r;var Yt=c;switch(Ze.tag){case 1:if(Ie=Ze.payload,typeof Ie=="function"){we=Ie.call(Yt,we,he);break e}we=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ze.payload,he=typeof Ie=="function"?Ie.call(Yt,we,he):Ie,he==null)break e;we=y({},we,he);break e;case 2:dr=!0}}he=L.callback,he!==null&&(i.flags|=64,ge&&(i.flags|=8192),ge=v.callbacks,ge===null?v.callbacks=[he]:ge.push(he))}else ge={lane:he,tag:L.tag,payload:L.payload,callback:L.callback,next:null},be===null?(ue=be=ge,G=we):be=be.next=ge,D|=he;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;ge=L,L=ge.next,ge.next=null,v.lastBaseUpdate=ge,v.shared.pending=null}}while(!0);be===null&&(G=we),v.baseState=G,v.firstBaseUpdate=ue,v.lastBaseUpdate=be,_===null&&(v.shared.lanes=0),yr|=D,i.lanes=D,i.memoizedState=we}}function Fb(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Hb(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Fb(c[i],r)}var ml=F(null),mh=F(0);function Ub(i,r){i=Sa,xe(mh,i),xe(ml,r),Sa=i|r.baseLanes}function Km(){xe(mh,Sa),xe(ml,ml.current)}function Zm(){Sa=mh.current,ee(ml),ee(mh)}var Rs=F(null),Js=null;function pr(i){var r=i.alternate;xe(kn,kn.current&1),xe(Rs,i),Js===null&&(r===null||ml.current!==null||r.memoizedState!==null)&&(Js=i)}function Qm(i){xe(kn,kn.current),xe(Rs,i),Js===null&&(Js=i)}function Ib(i){i.tag===22?(xe(kn,kn.current),xe(Rs,i),Js===null&&(Js=i)):mr()}function mr(){xe(kn,kn.current),xe(Rs,Rs.current)}function Ps(i){ee(Rs),Js===i&&(Js=null),ee(kn)}var kn=F(0);function gh(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||ix(c)||ax(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ma=0,ut=null,Ut=null,An=null,xh=!1,gl=!1,So=!1,yh=0,Xc=0,xl=null,FC=0;function bn(){throw Error(s(321))}function Jm(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!$(i[c],r[c]))return!1;return!0}function eg(i,r,c,f,v,_){return ma=_,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=i===null||i.memoizedState===null?T_:mg,So=!1,_=c(f,v),So=!1,gl&&(_=Wb(r,c,f,v)),Yb(i),_}function Yb(i){W.H=Qc;var r=Ut!==null&&Ut.next!==null;if(ma=0,An=Ut=ut=null,xh=!1,Xc=0,xl=null,r)throw Error(s(300));i===null||On||(i=i.dependencies,i!==null&&lh(i)&&(On=!0))}function Wb(i,r,c,f){ut=i;var v=0;do{if(gl&&(xl=null),Xc=0,gl=!1,25<=v)throw Error(s(301));if(v+=1,An=Ut=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=N_,_=r(c,f)}while(gl);return _}function HC(){var i=W.H,r=i.useState()[0];return r=typeof r.then=="function"?Kc(r):r,i=i.useState()[0],(Ut!==null?Ut.memoizedState:null)!==i&&(ut.flags|=1024),r}function tg(){var i=yh!==0;return yh=0,i}function ng(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function sg(i){if(xh){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}xh=!1}ma=0,An=Ut=ut=null,gl=!1,Xc=yh=0,xl=null}function ms(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?ut.memoizedState=An=i:An=An.next=i,An}function Tn(){if(Ut===null){var i=ut.alternate;i=i!==null?i.memoizedState:null}else i=Ut.next;var r=An===null?ut.memoizedState:An.next;if(r!==null)An=r,Ut=i;else{if(i===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Ut=i,i={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},An===null?ut.memoizedState=An=i:An=An.next=i}return An}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kc(i){var r=Xc;return Xc+=1,xl===null&&(xl=[]),i=Pb(xl,i,r),r=ut,(An===null?r.memoizedState:An.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?T_:mg),i}function bh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Kc(i);if(i.$$typeof===z)return Kn(i)}throw Error(s(438,String(i)))}function ig(i){var r=null,c=ut.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var f=ut.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=vh(),ut.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),f=0;f<i;f++)c[f]=re;return r.index++,c}function ga(i,r){return typeof r=="function"?r(i):r}function _h(i){var r=Tn();return ag(r,Ut,i)}function ag(i,r,c){var f=i.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=c;var v=i.baseQueue,_=f.pending;if(_!==null){if(v!==null){var D=v.next;v.next=_.next,_.next=D}r.baseQueue=v=_,f.pending=null}if(_=i.baseState,v===null)i.memoizedState=_;else{r=v.next;var L=D=null,G=null,ue=r,be=!1;do{var we=ue.lane&-536870913;if(we!==ue.lane?(wt&we)===we:(ma&we)===we){var he=ue.revertLane;if(he===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),we===dl&&(be=!0);else if((ma&he)===he){ue=ue.next,he===dl&&(be=!0);continue}else we={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},G===null?(L=G=we,D=_):G=G.next=we,ut.lanes|=he,yr|=he;we=ue.action,So&&c(_,we),_=ue.hasEagerState?ue.eagerState:c(_,we)}else he={lane:we,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},G===null?(L=G=he,D=_):G=G.next=he,ut.lanes|=we,yr|=we;ue=ue.next}while(ue!==null&&ue!==r);if(G===null?D=_:G.next=L,!$(_,i.memoizedState)&&(On=!0,be&&(c=hl,c!==null)))throw c;i.memoizedState=_,i.baseState=D,i.baseQueue=G,f.lastRenderedState=_}return v===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function rg(i){var r=Tn(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var f=c.dispatch,v=c.pending,_=r.memoizedState;if(v!==null){c.pending=null;var D=v=v.next;do _=i(_,D.action),D=D.next;while(D!==v);$(_,r.memoizedState)||(On=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),c.lastRenderedState=_}return[_,f]}function $b(i,r,c){var f=ut,v=Tn(),_=Tt;if(_){if(c===void 0)throw Error(s(407));c=c()}else c=r();var D=!$((Ut||v).memoizedState,c);if(D&&(v.memoizedState=c,On=!0),v=v.queue,cg(Xb.bind(null,f,v,i),[i]),v.getSnapshot!==r||D||An!==null&&An.memoizedState.tag&1){if(f.flags|=2048,yl(9,{destroy:void 0},Gb.bind(null,f,v,c,r),null),Xt===null)throw Error(s(349));_||(ma&127)!==0||qb(f,r,c)}return c}function qb(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=ut.updateQueue,r===null?(r=vh(),ut.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function Gb(i,r,c,f){r.value=c,r.getSnapshot=f,Kb(r)&&Zb(i)}function Xb(i,r,c){return c(function(){Kb(r)&&Zb(i)})}function Kb(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!$(i,c)}catch{return!0}}function Zb(i){var r=po(i,2);r!==null&&Ns(r,i,2)}function og(i){var r=ms();if(typeof i=="function"){var c=i;if(i=c(),So){$t(!0);try{c()}finally{$t(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:i},r}function Qb(i,r,c,f){return i.baseState=c,ag(i,Ut,typeof f=="function"?f:ga)}function UC(i,r,c,f,v){if(jh(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){_.listeners.push(D)}};W.T!==null?c(!0):_.isTransition=!1,f(_),c=r.pending,c===null?(_.next=r.pending=_,Jb(r,_)):(_.next=c.next,r.pending=c.next=_)}}function Jb(i,r){var c=r.action,f=r.payload,v=i.state;if(r.isTransition){var _=W.T,D={};W.T=D;try{var L=c(v,f),G=W.S;G!==null&&G(D,L),e_(i,r,L)}catch(ue){lg(i,r,ue)}finally{_!==null&&D.types!==null&&(_.types=D.types),W.T=_}}else try{_=c(v,f),e_(i,r,_)}catch(ue){lg(i,r,ue)}}function e_(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){t_(i,r,f)},function(f){return lg(i,r,f)}):t_(i,r,c)}function t_(i,r,c){r.status="fulfilled",r.value=c,n_(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,Jb(i,c)))}function lg(i,r,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=c,n_(r),r=r.next;while(r!==f)}i.action=null}function n_(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function s_(i,r){return r}function i_(i,r){if(Tt){var c=Xt.formState;if(c!==null){e:{var f=ut;if(Tt){if(en){t:{for(var v=en,_=Qs;v.nodeType!==8;){if(!_){v=null;break t}if(v=ei(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){en=ei(v.nextSibling),f=v.data==="F!";break e}}cr(f)}f=!1}f&&(r=c[0])}}return c=ms(),c.memoizedState=c.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s_,lastRenderedState:r},c.queue=f,c=S_.bind(null,ut,f),f.dispatch=c,f=og(!1),_=pg.bind(null,ut,!1,f.queue),f=ms(),v={state:r,dispatch:null,action:i,pending:null},f.queue=v,c=UC.bind(null,ut,v,_,c),v.dispatch=c,f.memoizedState=i,[r,c,!1]}function a_(i){var r=Tn();return r_(r,Ut,i)}function r_(i,r,c){if(r=ag(i,r,s_)[0],i=_h(ga)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=Kc(r)}catch(D){throw D===fl?dh:D}else f=r;r=Tn();var v=r.queue,_=v.dispatch;return c!==r.memoizedState&&(ut.flags|=2048,yl(9,{destroy:void 0},IC.bind(null,v,c),null)),[f,_,i]}function IC(i,r){i.action=r}function o_(i){var r=Tn(),c=Ut;if(c!==null)return r_(r,c,i);Tn(),r=r.memoizedState,c=Tn();var f=c.queue.dispatch;return c.memoizedState=i,[r,f,!1]}function yl(i,r,c,f){return i={tag:i,create:c,deps:f,inst:r,next:null},r=ut.updateQueue,r===null&&(r=vh(),ut.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,r.lastEffect=i),i}function l_(){return Tn().memoizedState}function wh(i,r,c,f){var v=ms();ut.flags|=i,v.memoizedState=yl(1|r,{destroy:void 0},c,f===void 0?null:f)}function Sh(i,r,c,f){var v=Tn();f=f===void 0?null:f;var _=v.memoizedState.inst;Ut!==null&&f!==null&&Jm(f,Ut.memoizedState.deps)?v.memoizedState=yl(r,_,c,f):(ut.flags|=i,v.memoizedState=yl(1|r,_,c,f))}function c_(i,r){wh(8390656,8,i,r)}function cg(i,r){Sh(2048,8,i,r)}function YC(i){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=vh(),ut.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function u_(i){var r=Tn().memoizedState;return YC({ref:r,nextImpl:i}),function(){if((Lt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function d_(i,r){return Sh(4,2,i,r)}function h_(i,r){return Sh(4,4,i,r)}function f_(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function p_(i,r,c){c=c!=null?c.concat([i]):null,Sh(4,4,f_.bind(null,r,i),c)}function ug(){}function m_(i,r){var c=Tn();r=r===void 0?null:r;var f=c.memoizedState;return r!==null&&Jm(r,f[1])?f[0]:(c.memoizedState=[i,r],i)}function g_(i,r){var c=Tn();r=r===void 0?null:r;var f=c.memoizedState;if(r!==null&&Jm(r,f[1]))return f[0];if(f=i(),So){$t(!0);try{i()}finally{$t(!1)}}return c.memoizedState=[f,r],f}function dg(i,r,c){return c===void 0||(ma&1073741824)!==0&&(wt&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=x1(),ut.lanes|=i,yr|=i,c)}function x_(i,r,c,f){return $(c,r)?c:ml.current!==null?(i=dg(i,c,f),$(i,r)||(On=!0),i):(ma&42)===0||(ma&1073741824)!==0&&(wt&261930)===0?(On=!0,i.memoizedState=c):(i=x1(),ut.lanes|=i,yr|=i,r)}function y_(i,r,c,f,v){var _=X.p;X.p=_!==0&&8>_?_:8;var D=W.T,L={};W.T=L,pg(i,!1,r,c);try{var G=v(),ue=W.S;if(ue!==null&&ue(L,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var be=VC(G,f);Zc(i,r,be,Bs(i))}else Zc(i,r,f,Bs(i))}catch(we){Zc(i,r,{then:function(){},status:"rejected",reason:we},Bs())}finally{X.p=_,D!==null&&L.types!==null&&(D.types=L.types),W.T=D}}function WC(){}function hg(i,r,c,f){if(i.tag!==5)throw Error(s(476));var v=v_(i).queue;y_(i,v,r,ae,c===null?WC:function(){return b_(i),c(f)})}function v_(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:ae},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function b_(i){var r=v_(i);r.next===null&&(r=i.alternate.memoizedState),Zc(i,r.next.queue,{},Bs())}function fg(){return Kn(pu)}function __(){return Tn().memoizedState}function w_(){return Tn().memoizedState}function $C(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Bs();i=hr(c);var f=fr(r,i,c);f!==null&&(Ns(f,r,c),$c(f,r,c)),r={cache:Um()},i.payload=r;return}r=r.return}}function qC(i,r,c){var f=Bs();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jh(i)?j_(r,c):(c=Em(i,r,c,f),c!==null&&(Ns(c,i,f),k_(c,r,f)))}function S_(i,r,c){var f=Bs();Zc(i,r,c,f)}function Zc(i,r,c,f){var v={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(jh(i))j_(r,v);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var D=r.lastRenderedState,L=_(D,c);if(v.hasEagerState=!0,v.eagerState=L,$(L,D))return ih(i,r,v,0),Xt===null&&sh(),!1}catch{}if(c=Em(i,r,v,f),c!==null)return Ns(c,i,f),k_(c,r,f),!0}return!1}function pg(i,r,c,f){if(f={lane:2,revertLane:$g(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},jh(i)){if(r)throw Error(s(479))}else r=Em(i,c,f,2),r!==null&&Ns(r,i,2)}function jh(i){var r=i.alternate;return i===ut||r!==null&&r===ut}function j_(i,r){gl=xh=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function k_(i,r,c){if((c&4194048)!==0){var f=r.lanes;f&=i.pendingLanes,c|=f,r.lanes=c,mt(i,c)}}var Qc={readContext:Kn,use:bh,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn};Qc.useEffectEvent=bn;var T_={readContext:Kn,use:bh,useCallback:function(i,r){return ms().memoizedState=[i,r===void 0?null:r],i},useContext:Kn,useEffect:c_,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,wh(4194308,4,f_.bind(null,r,i),c)},useLayoutEffect:function(i,r){return wh(4194308,4,i,r)},useInsertionEffect:function(i,r){wh(4,2,i,r)},useMemo:function(i,r){var c=ms();r=r===void 0?null:r;var f=i();if(So){$t(!0);try{i()}finally{$t(!1)}}return c.memoizedState=[f,r],f},useReducer:function(i,r,c){var f=ms();if(c!==void 0){var v=c(r);if(So){$t(!0);try{c(r)}finally{$t(!1)}}}else v=r;return f.memoizedState=f.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},f.queue=i,i=i.dispatch=qC.bind(null,ut,i),[f.memoizedState,i]},useRef:function(i){var r=ms();return i={current:i},r.memoizedState=i},useState:function(i){i=og(i);var r=i.queue,c=S_.bind(null,ut,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:ug,useDeferredValue:function(i,r){var c=ms();return dg(c,i,r)},useTransition:function(){var i=og(!1);return i=y_.bind(null,ut,i.queue,!0,!1),ms().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var f=ut,v=ms();if(Tt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),Xt===null)throw Error(s(349));(wt&127)!==0||qb(f,r,c)}v.memoizedState=c;var _={value:c,getSnapshot:r};return v.queue=_,c_(Xb.bind(null,f,_,i),[i]),f.flags|=2048,yl(9,{destroy:void 0},Gb.bind(null,f,_,c,r),null),c},useId:function(){var i=ms(),r=Xt.identifierPrefix;if(Tt){var c=Fi,f=Vi;c=(f&~(1<<32-gn(f)-1)).toString(32)+c,r="_"+r+"R_"+c,c=yh++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=FC++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:fg,useFormState:i_,useActionState:i_,useOptimistic:function(i){var r=ms();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=pg.bind(null,ut,!0,c),c.dispatch=r,[i,r]},useMemoCache:ig,useCacheRefresh:function(){return ms().memoizedState=$C.bind(null,ut)},useEffectEvent:function(i){var r=ms(),c={impl:i};return r.memoizedState=c,function(){if((Lt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},mg={readContext:Kn,use:bh,useCallback:m_,useContext:Kn,useEffect:cg,useImperativeHandle:p_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:g_,useReducer:_h,useRef:l_,useState:function(){return _h(ga)},useDebugValue:ug,useDeferredValue:function(i,r){var c=Tn();return x_(c,Ut.memoizedState,i,r)},useTransition:function(){var i=_h(ga)[0],r=Tn().memoizedState;return[typeof i=="boolean"?i:Kc(i),r]},useSyncExternalStore:$b,useId:__,useHostTransitionStatus:fg,useFormState:a_,useActionState:a_,useOptimistic:function(i,r){var c=Tn();return Qb(c,Ut,i,r)},useMemoCache:ig,useCacheRefresh:w_};mg.useEffectEvent=u_;var N_={readContext:Kn,use:bh,useCallback:m_,useContext:Kn,useEffect:cg,useImperativeHandle:p_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:g_,useReducer:rg,useRef:l_,useState:function(){return rg(ga)},useDebugValue:ug,useDeferredValue:function(i,r){var c=Tn();return Ut===null?dg(c,i,r):x_(c,Ut.memoizedState,i,r)},useTransition:function(){var i=rg(ga)[0],r=Tn().memoizedState;return[typeof i=="boolean"?i:Kc(i),r]},useSyncExternalStore:$b,useId:__,useHostTransitionStatus:fg,useFormState:o_,useActionState:o_,useOptimistic:function(i,r){var c=Tn();return Ut!==null?Qb(c,Ut,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:ig,useCacheRefresh:w_};N_.useEffectEvent=u_;function gg(i,r,c,f){r=i.memoizedState,c=c(f,r),c=c==null?r:y({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var xg={enqueueSetState:function(i,r,c){i=i._reactInternals;var f=Bs(),v=hr(f);v.payload=r,c!=null&&(v.callback=c),r=fr(i,v,f),r!==null&&(Ns(r,i,f),$c(r,i,f))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var f=Bs(),v=hr(f);v.tag=1,v.payload=r,c!=null&&(v.callback=c),r=fr(i,v,f),r!==null&&(Ns(r,i,f),$c(r,i,f))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Bs(),f=hr(c);f.tag=2,r!=null&&(f.callback=r),r=fr(i,f,c),r!==null&&(Ns(r,i,c),$c(r,i,c))}};function M_(i,r,c,f,v,_,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,D):r.prototype&&r.prototype.isPureReactComponent?!ne(c,f)||!ne(v,_):!0}function D_(i,r,c,f){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,f),r.state!==i&&xg.enqueueReplaceState(r,r.state,null)}function jo(i,r){var c=r;if("ref"in r){c={};for(var f in r)f!=="ref"&&(c[f]=r[f])}if(i=i.defaultProps){c===r&&(c=y({},c));for(var v in i)c[v]===void 0&&(c[v]=i[v])}return c}function C_(i){nh(i)}function E_(i){console.error(i)}function A_(i){nh(i)}function kh(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function O_(i,r,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function yg(i,r,c){return c=hr(c),c.tag=3,c.payload={element:null},c.callback=function(){kh(i,r)},c}function R_(i){return i=hr(i),i.tag=3,i}function P_(i,r,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;i.payload=function(){return v(_)},i.callback=function(){O_(r,c,f)}}var D=c.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){O_(r,c,f),typeof v!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var L=f.stack;this.componentDidCatch(f.value,{componentStack:L!==null?L:""})})}function GC(i,r,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=c.alternate,r!==null&&ul(r,c,v,!0),c=Rs.current,c!==null){switch(c.tag){case 31:case 13:return Js===null?zh():c.alternate===null&&_n===0&&(_n=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===hh?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([f]):r.add(f),Ig(i,f,v)),!1;case 22:return c.flags|=65536,f===hh?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([f]):c.add(f)),Ig(i,f,v)),!1}throw Error(s(435,c.tag))}return Ig(i,f,v),zh(),!1}if(Tt)return r=Rs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,f!==zm&&(i=Error(s(422),{cause:f}),Hc(Xs(i,c)))):(f!==zm&&(r=Error(s(423),{cause:f}),Hc(Xs(r,c))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,f=Xs(f,c),v=yg(i.stateNode,f,v),Gm(i,v),_n!==4&&(_n=2)),!1;var _=Error(s(520),{cause:f});if(_=Xs(_,c),ru===null?ru=[_]:ru.push(_),_n!==4&&(_n=2),r===null)return!0;f=Xs(f,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=v&-v,c.lanes|=i,i=yg(c.stateNode,f,i),Gm(c,i),!1;case 1:if(r=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(vr===null||!vr.has(_))))return c.flags|=65536,v&=-v,c.lanes|=v,v=R_(v),P_(v,i,c,f),Gm(c,v),!1}c=c.return}while(c!==null);return!1}var vg=Error(s(461)),On=!1;function Zn(i,r,c,f){r.child=i===null?Vb(r,null,c,f):wo(r,i.child,c,f)}function L_(i,r,c,f,v){c=c.render;var _=r.ref;if("ref"in f){var D={};for(var L in f)L!=="ref"&&(D[L]=f[L])}else D=f;return yo(r),f=eg(i,r,c,D,_,v),L=tg(),i!==null&&!On?(ng(i,r,v),xa(i,r,v)):(Tt&&L&&Pm(r),r.flags|=1,Zn(i,r,f,v),r.child)}function z_(i,r,c,f,v){if(i===null){var _=c.type;return typeof _=="function"&&!Am(_)&&_.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=_,B_(i,r,_,f,v)):(i=rh(c.type,null,f,r,r.mode,v),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Ng(i,v)){var D=_.memoizedProps;if(c=c.compare,c=c!==null?c:ne,c(D,f)&&i.ref===r.ref)return xa(i,r,v)}return r.flags|=1,i=da(_,f),i.ref=r.ref,i.return=r,r.child=i}function B_(i,r,c,f,v){if(i!==null){var _=i.memoizedProps;if(ne(_,f)&&i.ref===r.ref)if(On=!1,r.pendingProps=f=_,Ng(i,v))(i.flags&131072)!==0&&(On=!0);else return r.lanes=i.lanes,xa(i,r,v)}return bg(i,r,c,f,v)}function V_(i,r,c,f){var v=f.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,i!==null){for(f=r.child=i.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,r.child=null;return F_(i,r,_,c,f)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&uh(r,_!==null?_.cachePool:null),_!==null?Ub(r,_):Km(),Ib(r);else return f=r.lanes=536870912,F_(i,r,_!==null?_.baseLanes|c:c,c,f)}else _!==null?(uh(r,_.cachePool),Ub(r,_),mr(),r.memoizedState=null):(i!==null&&uh(r,null),Km(),mr());return Zn(i,r,v,c),r.child}function Jc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function F_(i,r,c,f,v){var _=Ym();return _=_===null?null:{parent:En._currentValue,pool:_},r.memoizedState={baseLanes:c,cachePool:_},i!==null&&uh(r,null),Km(),Ib(r),i!==null&&ul(i,r,f,!0),r.childLanes=v,null}function Th(i,r){return r=Mh({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function H_(i,r,c){return wo(r,i.child,null,c),i=Th(r,r.pendingProps),i.flags|=2,Ps(r),r.memoizedState=null,i}function XC(i,r,c){var f=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Tt){if(f.mode==="hidden")return i=Th(r,f),r.lanes=536870912,Jc(null,i);if(Qm(r),(i=en)?(i=J1(i,Qs),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:or!==null?{id:Vi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},c=jb(i),c.return=r,r.child=c,Xn=r,en=null)):i=null,i===null)throw cr(r);return r.lanes=536870912,null}return Th(r,f)}var _=i.memoizedState;if(_!==null){var D=_.dehydrated;if(Qm(r),v)if(r.flags&256)r.flags&=-257,r=H_(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(On||ul(i,r,c,!1),v=(c&i.childLanes)!==0,On||v){if(f=Xt,f!==null&&(D=qt(f,c),D!==0&&D!==_.retryLane))throw _.retryLane=D,po(i,D),Ns(f,i,D),vg;zh(),r=H_(i,r,c)}else i=_.treeContext,en=ei(D.nextSibling),Xn=r,Tt=!0,lr=null,Qs=!1,i!==null&&Nb(r,i),r=Th(r,f),r.flags|=4096;return r}return i=da(i.child,{mode:f.mode,children:f.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Nh(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function bg(i,r,c,f,v){return yo(r),c=eg(i,r,c,f,void 0,v),f=tg(),i!==null&&!On?(ng(i,r,v),xa(i,r,v)):(Tt&&f&&Pm(r),r.flags|=1,Zn(i,r,c,v),r.child)}function U_(i,r,c,f,v,_){return yo(r),r.updateQueue=null,c=Wb(r,f,c,v),Yb(i),f=tg(),i!==null&&!On?(ng(i,r,_),xa(i,r,_)):(Tt&&f&&Pm(r),r.flags|=1,Zn(i,r,c,_),r.child)}function I_(i,r,c,f,v){if(yo(r),r.stateNode===null){var _=rl,D=c.contextType;typeof D=="object"&&D!==null&&(_=Kn(D)),_=new c(f,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=xg,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=f,_.state=r.memoizedState,_.refs={},$m(r),D=c.contextType,_.context=typeof D=="object"&&D!==null?Kn(D):rl,_.state=r.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(gg(r,c,D,f),_.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(D=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),D!==_.state&&xg.enqueueReplaceState(_,_.state,null),Gc(r,f,_,v),qc(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(i===null){_=r.stateNode;var L=r.memoizedProps,G=jo(c,L);_.props=G;var ue=_.context,be=c.contextType;D=rl,typeof be=="object"&&be!==null&&(D=Kn(be));var we=c.getDerivedStateFromProps;be=typeof we=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=r.pendingProps!==L,be||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||ue!==D)&&D_(r,_,f,D),dr=!1;var he=r.memoizedState;_.state=he,Gc(r,f,_,v),qc(),ue=r.memoizedState,L||he!==ue||dr?(typeof we=="function"&&(gg(r,c,we,f),ue=r.memoizedState),(G=dr||M_(r,c,G,f,he,ue,D))?(be||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=ue),_.props=f,_.state=ue,_.context=D,f=G):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{_=r.stateNode,qm(i,r),D=r.memoizedProps,be=jo(c,D),_.props=be,we=r.pendingProps,he=_.context,ue=c.contextType,G=rl,typeof ue=="object"&&ue!==null&&(G=Kn(ue)),L=c.getDerivedStateFromProps,(ue=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(D!==we||he!==G)&&D_(r,_,f,G),dr=!1,he=r.memoizedState,_.state=he,Gc(r,f,_,v),qc();var ge=r.memoizedState;D!==we||he!==ge||dr||i!==null&&i.dependencies!==null&&lh(i.dependencies)?(typeof L=="function"&&(gg(r,c,L,f),ge=r.memoizedState),(be=dr||M_(r,c,be,f,he,ge,G)||i!==null&&i.dependencies!==null&&lh(i.dependencies))?(ue||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ge,G),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ge,G)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||D===i.memoizedProps&&he===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&he===i.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=ge),_.props=f,_.state=ge,_.context=G,f=be):(typeof _.componentDidUpdate!="function"||D===i.memoizedProps&&he===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&he===i.memoizedState||(r.flags|=1024),f=!1)}return _=f,Nh(i,r),f=(r.flags&128)!==0,_||f?(_=r.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&f?(r.child=wo(r,i.child,null,v),r.child=wo(r,null,c,v)):Zn(i,r,c,v),r.memoizedState=_.state,i=r.child):i=xa(i,r,v),i}function Y_(i,r,c,f){return go(),r.flags|=256,Zn(i,r,c,f),r.child}var _g={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wg(i){return{baseLanes:i,cachePool:Ob()}}function Sg(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=zs),i}function W_(i,r,c){var f=r.pendingProps,v=!1,_=(r.flags&128)!==0,D;if((D=_)||(D=i!==null&&i.memoizedState===null?!1:(kn.current&2)!==0),D&&(v=!0,r.flags&=-129),D=(r.flags&32)!==0,r.flags&=-33,i===null){if(Tt){if(v?pr(r):mr(),(i=en)?(i=J1(i,Qs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:or!==null?{id:Vi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},c=jb(i),c.return=r,r.child=c,Xn=r,en=null)):i=null,i===null)throw cr(r);return ax(i)?r.lanes=32:r.lanes=536870912,null}var L=f.children;return f=f.fallback,v?(mr(),v=r.mode,L=Mh({mode:"hidden",children:L},v),f=mo(f,v,c,null),L.return=r,f.return=r,L.sibling=f,r.child=L,f=r.child,f.memoizedState=wg(c),f.childLanes=Sg(i,D,c),r.memoizedState=_g,Jc(null,f)):(pr(r),jg(r,L))}var G=i.memoizedState;if(G!==null&&(L=G.dehydrated,L!==null)){if(_)r.flags&256?(pr(r),r.flags&=-257,r=kg(i,r,c)):r.memoizedState!==null?(mr(),r.child=i.child,r.flags|=128,r=null):(mr(),L=f.fallback,v=r.mode,f=Mh({mode:"visible",children:f.children},v),L=mo(L,v,c,null),L.flags|=2,f.return=r,L.return=r,f.sibling=L,r.child=f,wo(r,i.child,null,c),f=r.child,f.memoizedState=wg(c),f.childLanes=Sg(i,D,c),r.memoizedState=_g,r=Jc(null,f));else if(pr(r),ax(L)){if(D=L.nextSibling&&L.nextSibling.dataset,D)var ue=D.dgst;D=ue,f=Error(s(419)),f.stack="",f.digest=D,Hc({value:f,source:null,stack:null}),r=kg(i,r,c)}else if(On||ul(i,r,c,!1),D=(c&i.childLanes)!==0,On||D){if(D=Xt,D!==null&&(f=qt(D,c),f!==0&&f!==G.retryLane))throw G.retryLane=f,po(i,f),Ns(D,i,f),vg;ix(L)||zh(),r=kg(i,r,c)}else ix(L)?(r.flags|=192,r.child=i.child,r=null):(i=G.treeContext,en=ei(L.nextSibling),Xn=r,Tt=!0,lr=null,Qs=!1,i!==null&&Nb(r,i),r=jg(r,f.children),r.flags|=4096);return r}return v?(mr(),L=f.fallback,v=r.mode,G=i.child,ue=G.sibling,f=da(G,{mode:"hidden",children:f.children}),f.subtreeFlags=G.subtreeFlags&65011712,ue!==null?L=da(ue,L):(L=mo(L,v,c,null),L.flags|=2),L.return=r,f.return=r,f.sibling=L,r.child=f,Jc(null,f),f=r.child,L=i.child.memoizedState,L===null?L=wg(c):(v=L.cachePool,v!==null?(G=En._currentValue,v=v.parent!==G?{parent:G,pool:G}:v):v=Ob(),L={baseLanes:L.baseLanes|c,cachePool:v}),f.memoizedState=L,f.childLanes=Sg(i,D,c),r.memoizedState=_g,Jc(i.child,f)):(pr(r),c=i.child,i=c.sibling,c=da(c,{mode:"visible",children:f.children}),c.return=r,c.sibling=null,i!==null&&(D=r.deletions,D===null?(r.deletions=[i],r.flags|=16):D.push(i)),r.child=c,r.memoizedState=null,c)}function jg(i,r){return r=Mh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Mh(i,r){return i=Os(22,i,null,r),i.lanes=0,i}function kg(i,r,c){return wo(r,i.child,null,c),i=jg(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function $_(i,r,c){i.lanes|=r;var f=i.alternate;f!==null&&(f.lanes|=r),Fm(i.return,r,c)}function Tg(i,r,c,f,v,_){var D=i.memoizedState;D===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v,treeForkCount:_}:(D.isBackwards=r,D.rendering=null,D.renderingStartTime=0,D.last=f,D.tail=c,D.tailMode=v,D.treeForkCount=_)}function q_(i,r,c){var f=r.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var D=kn.current,L=(D&2)!==0;if(L?(D=D&1|2,r.flags|=128):D&=1,xe(kn,D),Zn(i,r,f,c),f=Tt?Fc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$_(i,c,r);else if(i.tag===19)$_(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(c=r.child,v=null;c!==null;)i=c.alternate,i!==null&&gh(i)===null&&(v=c),c=c.sibling;c=v,c===null?(v=r.child,r.child=null):(v=c.sibling,c.sibling=null),Tg(r,!1,v,c,_,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=r.child,r.child=null;v!==null;){if(i=v.alternate,i!==null&&gh(i)===null){r.child=v;break}i=v.sibling,v.sibling=c,c=v,v=i}Tg(r,!0,c,null,_,f);break;case"together":Tg(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function xa(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),yr|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(ul(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,c=da(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=da(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function Ng(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&lh(i)))}function KC(i,r,c){switch(r.tag){case 3:tt(r,r.stateNode.containerInfo),ur(r,En,i.memoizedState.cache),go();break;case 27:case 5:lt(r);break;case 4:tt(r,r.stateNode.containerInfo);break;case 10:ur(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Qm(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(pr(r),r.flags|=128,null):(c&r.child.childLanes)!==0?W_(i,r,c):(pr(r),i=xa(i,r,c),i!==null?i.sibling:null);pr(r);break;case 19:var v=(i.flags&128)!==0;if(f=(c&r.childLanes)!==0,f||(ul(i,r,c,!1),f=(c&r.childLanes)!==0),v){if(f)return q_(i,r,c);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),xe(kn,kn.current),f)break;return null;case 22:return r.lanes=0,V_(i,r,c,r.pendingProps);case 24:ur(r,En,i.memoizedState.cache)}return xa(i,r,c)}function G_(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)On=!0;else{if(!Ng(i,c)&&(r.flags&128)===0)return On=!1,KC(i,r,c);On=(i.flags&131072)!==0}else On=!1,Tt&&(r.flags&1048576)!==0&&Tb(r,Fc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var f=r.pendingProps;if(i=bo(r.elementType),r.type=i,typeof i=="function")Am(i)?(f=jo(i,f),r.tag=1,r=I_(null,r,i,f,c)):(r.tag=0,r=bg(null,r,i,f,c));else{if(i!=null){var v=i.$$typeof;if(v===U){r.tag=11,r=L_(null,r,i,f,c);break e}else if(v===O){r.tag=14,r=z_(null,r,i,f,c);break e}}throw r=te(i)||i,Error(s(306,r,""))}}return r;case 0:return bg(i,r,r.type,r.pendingProps,c);case 1:return f=r.type,v=jo(f,r.pendingProps),I_(i,r,f,v,c);case 3:e:{if(tt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));f=r.pendingProps;var _=r.memoizedState;v=_.element,qm(i,r),Gc(r,f,null,c);var D=r.memoizedState;if(f=D.cache,ur(r,En,f),f!==_.cache&&Hm(r,[En],c,!0),qc(),f=D.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:D.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=Y_(i,r,f,c);break e}else if(f!==v){v=Xs(Error(s(424)),r),Hc(v),r=Y_(i,r,f,c);break e}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,en=ei(i.firstChild),Xn=r,Tt=!0,lr=null,Qs=!0,c=Vb(r,null,f,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(go(),f===v){r=xa(i,r,c);break e}Zn(i,r,f,c)}r=r.child}return r;case 26:return Nh(i,r),i===null?(c=aw(r.type,null,r.pendingProps,null))?r.memoizedState=c:Tt||(c=r.type,i=r.pendingProps,f=Yh(Se.current).createElement(c),f[Oe]=r,f[Qe]=i,Qn(f,c,i),Jt(f),r.stateNode=f):r.memoizedState=aw(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return lt(r),i===null&&Tt&&(f=r.stateNode=nw(r.type,r.pendingProps,Se.current),Xn=r,Qs=!0,v=en,Sr(r.type)?(rx=v,en=ei(f.firstChild)):en=v),Zn(i,r,r.pendingProps.children,c),Nh(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Tt&&((v=f=en)&&(f=TE(f,r.type,r.pendingProps,Qs),f!==null?(r.stateNode=f,Xn=r,en=ei(f.firstChild),Qs=!1,v=!0):v=!1),v||cr(r)),lt(r),v=r.type,_=r.pendingProps,D=i!==null?i.memoizedProps:null,f=_.children,tx(v,_)?f=null:D!==null&&tx(v,D)&&(r.flags|=32),r.memoizedState!==null&&(v=eg(i,r,HC,null,null,c),pu._currentValue=v),Nh(i,r),Zn(i,r,f,c),r.child;case 6:return i===null&&Tt&&((i=c=en)&&(c=NE(c,r.pendingProps,Qs),c!==null?(r.stateNode=c,Xn=r,en=null,i=!0):i=!1),i||cr(r)),null;case 13:return W_(i,r,c);case 4:return tt(r,r.stateNode.containerInfo),f=r.pendingProps,i===null?r.child=wo(r,null,f,c):Zn(i,r,f,c),r.child;case 11:return L_(i,r,r.type,r.pendingProps,c);case 7:return Zn(i,r,r.pendingProps,c),r.child;case 8:return Zn(i,r,r.pendingProps.children,c),r.child;case 12:return Zn(i,r,r.pendingProps.children,c),r.child;case 10:return f=r.pendingProps,ur(r,r.type,f.value),Zn(i,r,f.children,c),r.child;case 9:return v=r.type._context,f=r.pendingProps.children,yo(r),v=Kn(v),f=f(v),r.flags|=1,Zn(i,r,f,c),r.child;case 14:return z_(i,r,r.type,r.pendingProps,c);case 15:return B_(i,r,r.type,r.pendingProps,c);case 19:return q_(i,r,c);case 31:return XC(i,r,c);case 22:return V_(i,r,c,r.pendingProps);case 24:return yo(r),f=Kn(En),i===null?(v=Ym(),v===null&&(v=Xt,_=Um(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=c),v=_),r.memoizedState={parent:f,cache:v},$m(r),ur(r,En,v)):((i.lanes&c)!==0&&(qm(i,r),Gc(r,null,null,c),qc()),v=i.memoizedState,_=r.memoizedState,v.parent!==f?(v={parent:f,cache:f},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),ur(r,En,f)):(f=_.cache,ur(r,En,f),f!==v.cache&&Hm(r,[En],c,!0))),Zn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ya(i){i.flags|=4}function Mg(i,r,c,f,v){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(_1())i.flags|=8192;else throw _o=hh,Wm}else i.flags&=-16777217}function X_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!uw(r))if(_1())i.flags|=8192;else throw _o=hh,Wm}function Dh(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Oi():536870912,i.lanes|=r,wl|=r)}function eu(i,r){if(!Tt)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function tn(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(r)for(var v=i.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=f,i.childLanes=c,r}function ZC(i,r,c){var f=r.pendingProps;switch(Lm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(r),null;case 1:return tn(r),null;case 3:return c=r.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),pa(En),Te(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(cl(r)?ya(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Bm())),tn(r),null;case 26:var v=r.type,_=r.memoizedState;return i===null?(ya(r),_!==null?(tn(r),X_(r,_)):(tn(r),Mg(r,v,null,f,c))):_?_!==i.memoizedState?(ya(r),tn(r),X_(r,_)):(tn(r),r.flags&=-16777217):(i=i.memoizedProps,i!==f&&ya(r),tn(r),Mg(r,v,i,f,c)),null;case 27:if(gt(r),c=Se.current,v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&ya(r);else{if(!f){if(r.stateNode===null)throw Error(s(166));return tn(r),null}i=H.current,cl(r)?Mb(r):(i=nw(v,f,c),r.stateNode=i,ya(r))}return tn(r),null;case 5:if(gt(r),v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&ya(r);else{if(!f){if(r.stateNode===null)throw Error(s(166));return tn(r),null}if(_=H.current,cl(r))Mb(r);else{var D=Yh(Se.current);switch(_){case 1:_=D.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=D.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=D.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?D.createElement("select",{is:f.is}):D.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?D.createElement(v,{is:f.is}):D.createElement(v)}}_[Oe]=r,_[Qe]=f;e:for(D=r.child;D!==null;){if(D.tag===5||D.tag===6)_.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===r)break e;for(;D.sibling===null;){if(D.return===null||D.return===r)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}r.stateNode=_;e:switch(Qn(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ya(r)}}return tn(r),Mg(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==f&&ya(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(s(166));if(i=Se.current,cl(r)){if(i=r.stateNode,c=r.memoizedProps,f=null,v=Xn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}i[Oe]=r,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||W1(i.nodeValue,c)),i||cr(r,!0)}else i=Yh(i).createTextNode(f),i[Oe]=r,r.stateNode=i}return tn(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(f=cl(r),c!==null){if(i===null){if(!f)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Oe]=r}else go(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),i=!1}else c=Bm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(Ps(r),r):(Ps(r),null);if((r.flags&128)!==0)throw Error(s(558))}return tn(r),null;case 13:if(f=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=cl(r),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(s(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Oe]=r}else go(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),v=!1}else v=Bm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Ps(r),r):(Ps(r),null)}return Ps(r),(r.flags&128)!==0?(r.lanes=c,r):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=r.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),Dh(r,r.updateQueue),tn(r),null);case 4:return Te(),i===null&&Kg(r.stateNode.containerInfo),tn(r),null;case 10:return pa(r.type),tn(r),null;case 19:if(ee(kn),f=r.memoizedState,f===null)return tn(r),null;if(v=(r.flags&128)!==0,_=f.rendering,_===null)if(v)eu(f,!1);else{if(_n!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=gh(i),_!==null){for(r.flags|=128,eu(f,!1),i=_.updateQueue,r.updateQueue=i,Dh(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)Sb(c,i),c=c.sibling;return xe(kn,kn.current&1|2),Tt&&ha(r,f.treeForkCount),r.child}i=i.sibling}f.tail!==null&&zt()>Rh&&(r.flags|=128,v=!0,eu(f,!1),r.lanes=4194304)}else{if(!v)if(i=gh(_),i!==null){if(r.flags|=128,v=!0,i=i.updateQueue,r.updateQueue=i,Dh(r,i),eu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!Tt)return tn(r),null}else 2*zt()-f.renderingStartTime>Rh&&c!==536870912&&(r.flags|=128,v=!0,eu(f,!1),r.lanes=4194304);f.isBackwards?(_.sibling=r.child,r.child=_):(i=f.last,i!==null?i.sibling=_:r.child=_,f.last=_)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=zt(),i.sibling=null,c=kn.current,xe(kn,v?c&1|2:c&1),Tt&&ha(r,f.treeForkCount),i):(tn(r),null);case 22:case 23:return Ps(r),Zm(),f=r.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(c&536870912)!==0&&(r.flags&128)===0&&(tn(r),r.subtreeFlags&6&&(r.flags|=8192)):tn(r),c=r.updateQueue,c!==null&&Dh(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048),i!==null&&ee(vo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),pa(En),tn(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function QC(i,r){switch(Lm(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return pa(En),Te(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return gt(r),null;case 31:if(r.memoizedState!==null){if(Ps(r),r.alternate===null)throw Error(s(340));go()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Ps(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));go()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ee(kn),null;case 4:return Te(),null;case 10:return pa(r.type),null;case 22:case 23:return Ps(r),Zm(),i!==null&&ee(vo),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return pa(En),null;case 25:return null;default:return null}}function K_(i,r){switch(Lm(r),r.tag){case 3:pa(En),Te();break;case 26:case 27:case 5:gt(r);break;case 4:Te();break;case 31:r.memoizedState!==null&&Ps(r);break;case 13:Ps(r);break;case 19:ee(kn);break;case 10:pa(r.type);break;case 22:case 23:Ps(r),Zm(),i!==null&&ee(vo);break;case 24:pa(En)}}function tu(i,r){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&i)===i){f=void 0;var _=c.create,D=c.inst;f=_(),D.destroy=f}c=c.next}while(c!==v)}}catch(L){Ft(r,r.return,L)}}function gr(i,r,c){try{var f=r.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&i)===i){var D=f.inst,L=D.destroy;if(L!==void 0){D.destroy=void 0,v=r;var G=c,ue=L;try{ue()}catch(be){Ft(v,G,be)}}}f=f.next}while(f!==_)}}catch(be){Ft(r,r.return,be)}}function Z_(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{Hb(r,c)}catch(f){Ft(i,i.return,f)}}}function Q_(i,r,c){c.props=jo(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){Ft(i,r,f)}}function nu(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(v){Ft(i,r,v)}}function Hi(i,r){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){Ft(i,r,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){Ft(i,r,v)}else c.current=null}function J_(i){var r=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){Ft(i,i.return,v)}}function Dg(i,r,c){try{var f=i.stateNode;bE(f,i.type,c,r),f[Qe]=r}catch(v){Ft(i,i.return,v)}}function e1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Sr(i.type)||i.tag===4}function Cg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||e1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Sr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Eg(i,r,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=xi));else if(f!==4&&(f===27&&Sr(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(Eg(i,r,c),i=i.sibling;i!==null;)Eg(i,r,c),i=i.sibling}function Ch(i,r,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(f!==4&&(f===27&&Sr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Ch(i,r,c),i=i.sibling;i!==null;)Ch(i,r,c),i=i.sibling}function t1(i){var r=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Qn(r,f,c),r[Oe]=i,r[Qe]=c}catch(_){Ft(i,i.return,_)}}var va=!1,Rn=!1,Ag=!1,n1=typeof WeakSet=="function"?WeakSet:Set,In=null;function JC(i,r){if(i=i.containerInfo,Jg=Zh,i=Ce(i),Be(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var D=0,L=-1,G=-1,ue=0,be=0,we=i,he=null;t:for(;;){for(var ge;we!==c||v!==0&&we.nodeType!==3||(L=D+v),we!==_||f!==0&&we.nodeType!==3||(G=D+f),we.nodeType===3&&(D+=we.nodeValue.length),(ge=we.firstChild)!==null;)he=we,we=ge;for(;;){if(we===i)break t;if(he===c&&++ue===v&&(L=D),he===_&&++be===f&&(G=D),(ge=we.nextSibling)!==null)break;we=he,he=we.parentNode}we=ge}c=L===-1||G===-1?null:{start:L,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(ex={focusedElem:i,selectionRange:c},Zh=!1,In=r;In!==null;)if(r=In,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,In=i;else for(;In!==null;){switch(r=In,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)v=i[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,c=r,v=_.memoizedProps,_=_.memoizedState,f=c.stateNode;try{var Ie=jo(c.type,v);i=f.getSnapshotBeforeUpdate(Ie,_),f.__reactInternalSnapshotBeforeUpdate=i}catch(Ze){Ft(c,c.return,Ze)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)sx(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":sx(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,In=i;break}In=r.return}}function s1(i,r,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:_a(i,c),f&4&&tu(5,c);break;case 1:if(_a(i,c),f&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(D){Ft(c,c.return,D)}else{var v=jo(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(v,r,i.__reactInternalSnapshotBeforeUpdate)}catch(D){Ft(c,c.return,D)}}f&64&&Z_(c),f&512&&nu(c,c.return);break;case 3:if(_a(i,c),f&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Hb(i,r)}catch(D){Ft(c,c.return,D)}}break;case 27:r===null&&f&4&&t1(c);case 26:case 5:_a(i,c),r===null&&f&4&&J_(c),f&512&&nu(c,c.return);break;case 12:_a(i,c);break;case 31:_a(i,c),f&4&&r1(i,c);break;case 13:_a(i,c),f&4&&o1(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=lE.bind(null,c),ME(i,c))));break;case 22:if(f=c.memoizedState!==null||va,!f){r=r!==null&&r.memoizedState!==null||Rn,v=va;var _=Rn;va=f,(Rn=r)&&!_?wa(i,c,(c.subtreeFlags&8772)!==0):_a(i,c),va=v,Rn=_}break;case 30:break;default:_a(i,c)}}function i1(i){var r=i.alternate;r!==null&&(i.alternate=null,i1(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&fs(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var cn=null,Ss=!1;function ba(i,r,c){for(c=c.child;c!==null;)a1(i,r,c),c=c.sibling}function a1(i,r,c){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(xs,c)}catch{}switch(c.tag){case 26:Rn||Hi(c,r),ba(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Rn||Hi(c,r);var f=cn,v=Ss;Sr(c.type)&&(cn=c.stateNode,Ss=!1),ba(i,r,c),du(c.stateNode),cn=f,Ss=v;break;case 5:Rn||Hi(c,r);case 6:if(f=cn,v=Ss,cn=null,ba(i,r,c),cn=f,Ss=v,cn!==null)if(Ss)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(c.stateNode)}catch(_){Ft(c,r,_)}else try{cn.removeChild(c.stateNode)}catch(_){Ft(c,r,_)}break;case 18:cn!==null&&(Ss?(i=cn,Z1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Cl(i)):Z1(cn,c.stateNode));break;case 4:f=cn,v=Ss,cn=c.stateNode.containerInfo,Ss=!0,ba(i,r,c),cn=f,Ss=v;break;case 0:case 11:case 14:case 15:gr(2,c,r),Rn||gr(4,c,r),ba(i,r,c);break;case 1:Rn||(Hi(c,r),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Q_(c,r,f)),ba(i,r,c);break;case 21:ba(i,r,c);break;case 22:Rn=(f=Rn)||c.memoizedState!==null,ba(i,r,c),Rn=f;break;default:ba(i,r,c)}}function r1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Cl(i)}catch(c){Ft(r,r.return,c)}}}function o1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Cl(i)}catch(c){Ft(r,r.return,c)}}function eE(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new n1),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new n1),r;default:throw Error(s(435,i.tag))}}function Eh(i,r){var c=eE(i);r.forEach(function(f){if(!c.has(f)){c.add(f);var v=cE.bind(null,i,f);f.then(v,v)}})}function js(i,r){var c=r.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],_=i,D=r,L=D;e:for(;L!==null;){switch(L.tag){case 27:if(Sr(L.type)){cn=L.stateNode,Ss=!1;break e}break;case 5:cn=L.stateNode,Ss=!1;break e;case 3:case 4:cn=L.stateNode.containerInfo,Ss=!0;break e}L=L.return}if(cn===null)throw Error(s(160));a1(_,D,v),cn=null,Ss=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)l1(r,i),r=r.sibling}var _i=null;function l1(i,r){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:js(r,i),ks(i),f&4&&(gr(3,i,i.return),tu(3,i),gr(5,i,i.return));break;case 1:js(r,i),ks(i),f&512&&(Rn||c===null||Hi(c,c.return)),f&64&&va&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=_i;if(js(r,i),ks(i),f&512&&(Rn||c===null||Hi(c,c.return)),f&4){var _=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Dt]||_[Oe]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),Qn(_,f,c),_[Oe]=i,Jt(_),f=_;break e;case"link":var D=lw("link","href",v).get(f+(c.href||""));if(D){for(var L=0;L<D.length;L++)if(_=D[L],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){D.splice(L,1);break t}}_=v.createElement(f),Qn(_,f,c),v.head.appendChild(_);break;case"meta":if(D=lw("meta","content",v).get(f+(c.content||""))){for(L=0;L<D.length;L++)if(_=D[L],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){D.splice(L,1);break t}}_=v.createElement(f),Qn(_,f,c),v.head.appendChild(_);break;default:throw Error(s(468,f))}_[Oe]=i,Jt(_),f=_}i.stateNode=f}else cw(v,i.type,i.stateNode);else i.stateNode=ow(v,f,i.memoizedProps);else _!==f?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,f===null?cw(v,i.type,i.stateNode):ow(v,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Dg(i,i.memoizedProps,c.memoizedProps)}break;case 27:js(r,i),ks(i),f&512&&(Rn||c===null||Hi(c,c.return)),c!==null&&f&4&&Dg(i,i.memoizedProps,c.memoizedProps);break;case 5:if(js(r,i),ks(i),f&512&&(Rn||c===null||Hi(c,c.return)),i.flags&32){v=i.stateNode;try{Li(v,"")}catch(Ie){Ft(i,i.return,Ie)}}f&4&&i.stateNode!=null&&(v=i.memoizedProps,Dg(i,v,c!==null?c.memoizedProps:v)),f&1024&&(Ag=!0);break;case 6:if(js(r,i),ks(i),f&4){if(i.stateNode===null)throw Error(s(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Ie){Ft(i,i.return,Ie)}}break;case 3:if(qh=null,v=_i,_i=Wh(r.containerInfo),js(r,i),_i=v,ks(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Cl(r.containerInfo)}catch(Ie){Ft(i,i.return,Ie)}Ag&&(Ag=!1,c1(i));break;case 4:f=_i,_i=Wh(i.stateNode.containerInfo),js(r,i),ks(i),_i=f;break;case 12:js(r,i),ks(i);break;case 31:js(r,i),ks(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Eh(i,f)));break;case 13:js(r,i),ks(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Oh=zt()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Eh(i,f)));break;case 22:v=i.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,ue=va,be=Rn;if(va=ue||v,Rn=be||G,js(r,i),Rn=be,va=ue,ks(i),f&8192)e:for(r=i.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(c===null||G||va||Rn||ko(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){G=c=r;try{if(_=G.stateNode,v)D=_.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{L=G.stateNode;var we=G.memoizedProps.style,he=we!=null&&we.hasOwnProperty("display")?we.display:null;L.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Ie){Ft(G,G.return,Ie)}}}else if(r.tag===6){if(c===null){G=r;try{G.stateNode.nodeValue=v?"":G.memoizedProps}catch(Ie){Ft(G,G.return,Ie)}}}else if(r.tag===18){if(c===null){G=r;try{var ge=G.stateNode;v?Q1(ge,!0):Q1(G.stateNode,!1)}catch(Ie){Ft(G,G.return,Ie)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Eh(i,c))));break;case 19:js(r,i),ks(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Eh(i,f)));break;case 30:break;case 21:break;default:js(r,i),ks(i)}}function ks(i){var r=i.flags;if(r&2){try{for(var c,f=i.return;f!==null;){if(e1(f)){c=f;break}f=f.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,_=Cg(i);Ch(i,_,v);break;case 5:var D=c.stateNode;c.flags&32&&(Li(D,""),c.flags&=-33);var L=Cg(i);Ch(i,L,D);break;case 3:case 4:var G=c.stateNode.containerInfo,ue=Cg(i);Eg(i,ue,G);break;default:throw Error(s(161))}}catch(be){Ft(i,i.return,be)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function c1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;c1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function _a(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)s1(i,r.alternate,r),r=r.sibling}function ko(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:gr(4,r,r.return),ko(r);break;case 1:Hi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&Q_(r,r.return,c),ko(r);break;case 27:du(r.stateNode);case 26:case 5:Hi(r,r.return),ko(r);break;case 22:r.memoizedState===null&&ko(r);break;case 30:ko(r);break;default:ko(r)}i=i.sibling}}function wa(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,v=i,_=r,D=_.flags;switch(_.tag){case 0:case 11:case 15:wa(v,_,c),tu(4,_);break;case 1:if(wa(v,_,c),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ue){Ft(f,f.return,ue)}if(f=_,v=f.updateQueue,v!==null){var L=f.stateNode;try{var G=v.shared.hiddenCallbacks;if(G!==null)for(v.shared.hiddenCallbacks=null,v=0;v<G.length;v++)Fb(G[v],L)}catch(ue){Ft(f,f.return,ue)}}c&&D&64&&Z_(_),nu(_,_.return);break;case 27:t1(_);case 26:case 5:wa(v,_,c),c&&f===null&&D&4&&J_(_),nu(_,_.return);break;case 12:wa(v,_,c);break;case 31:wa(v,_,c),c&&D&4&&r1(v,_);break;case 13:wa(v,_,c),c&&D&4&&o1(v,_);break;case 22:_.memoizedState===null&&wa(v,_,c),nu(_,_.return);break;case 30:break;default:wa(v,_,c)}r=r.sibling}}function Og(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Uc(c))}function Rg(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Uc(i))}function wi(i,r,c,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)u1(i,r,c,f),r=r.sibling}function u1(i,r,c,f){var v=r.flags;switch(r.tag){case 0:case 11:case 15:wi(i,r,c,f),v&2048&&tu(9,r);break;case 1:wi(i,r,c,f);break;case 3:wi(i,r,c,f),v&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Uc(i)));break;case 12:if(v&2048){wi(i,r,c,f),i=r.stateNode;try{var _=r.memoizedProps,D=_.id,L=_.onPostCommit;typeof L=="function"&&L(D,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){Ft(r,r.return,G)}}else wi(i,r,c,f);break;case 31:wi(i,r,c,f);break;case 13:wi(i,r,c,f);break;case 23:break;case 22:_=r.stateNode,D=r.alternate,r.memoizedState!==null?_._visibility&2?wi(i,r,c,f):su(i,r):_._visibility&2?wi(i,r,c,f):(_._visibility|=2,vl(i,r,c,f,(r.subtreeFlags&10256)!==0||!1)),v&2048&&Og(D,r);break;case 24:wi(i,r,c,f),v&2048&&Rg(r.alternate,r);break;default:wi(i,r,c,f)}}function vl(i,r,c,f,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,D=r,L=c,G=f,ue=D.flags;switch(D.tag){case 0:case 11:case 15:vl(_,D,L,G,v),tu(8,D);break;case 23:break;case 22:var be=D.stateNode;D.memoizedState!==null?be._visibility&2?vl(_,D,L,G,v):su(_,D):(be._visibility|=2,vl(_,D,L,G,v)),v&&ue&2048&&Og(D.alternate,D);break;case 24:vl(_,D,L,G,v),v&&ue&2048&&Rg(D.alternate,D);break;default:vl(_,D,L,G,v)}r=r.sibling}}function su(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,f=r,v=f.flags;switch(f.tag){case 22:su(c,f),v&2048&&Og(f.alternate,f);break;case 24:su(c,f),v&2048&&Rg(f.alternate,f);break;default:su(c,f)}r=r.sibling}}var iu=8192;function bl(i,r,c){if(i.subtreeFlags&iu)for(i=i.child;i!==null;)d1(i,r,c),i=i.sibling}function d1(i,r,c){switch(i.tag){case 26:bl(i,r,c),i.flags&iu&&i.memoizedState!==null&&FE(c,_i,i.memoizedState,i.memoizedProps);break;case 5:bl(i,r,c);break;case 3:case 4:var f=_i;_i=Wh(i.stateNode.containerInfo),bl(i,r,c),_i=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=iu,iu=16777216,bl(i,r,c),iu=f):bl(i,r,c));break;default:bl(i,r,c)}}function h1(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function au(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];In=f,p1(f,i)}h1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)f1(i),i=i.sibling}function f1(i){switch(i.tag){case 0:case 11:case 15:au(i),i.flags&2048&&gr(9,i,i.return);break;case 3:au(i);break;case 12:au(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Ah(i)):au(i);break;default:au(i)}}function Ah(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];In=f,p1(f,i)}h1(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:gr(8,r,r.return),Ah(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Ah(r));break;default:Ah(r)}i=i.sibling}}function p1(i,r){for(;In!==null;){var c=In;switch(c.tag){case 0:case 11:case 15:gr(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Uc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,In=f;else e:for(c=i;In!==null;){f=In;var v=f.sibling,_=f.return;if(i1(f),f===c){In=null;break e}if(v!==null){v.return=_,In=v;break e}In=_}}}var tE={getCacheForType:function(i){var r=Kn(En),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return Kn(En).controller.signal}},nE=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Xt=null,yt=null,wt=0,Vt=0,Ls=null,xr=!1,_l=!1,Pg=!1,Sa=0,_n=0,yr=0,To=0,Lg=0,zs=0,wl=0,ru=null,Ts=null,zg=!1,Oh=0,m1=0,Rh=1/0,Ph=null,vr=null,Bn=0,br=null,Sl=null,ja=0,Bg=0,Vg=null,g1=null,ou=0,Fg=null;function Bs(){return(Lt&2)!==0&&wt!==0?wt&-wt:W.T!==null?$g():Me()}function x1(){if(zs===0)if((wt&536870912)===0||Tt){var i=Ys;Ys<<=1,(Ys&3932160)===0&&(Ys=262144),zs=i}else zs=536870912;return i=Rs.current,i!==null&&(i.flags|=32),zs}function Ns(i,r,c){(i===Xt&&(Vt===2||Vt===9)||i.cancelPendingCommit!==null)&&(jl(i,0),_r(i,wt,zs,!1)),vs(i,c),((Lt&2)===0||i!==Xt)&&(i===Xt&&((Lt&2)===0&&(To|=c),_n===4&&_r(i,wt,zs,!1)),Ui(i))}function y1(i,r,c){if((Lt&6)!==0)throw Error(s(327));var f=!c&&(r&127)===0&&(r&i.expiredLanes)===0||ys(i,r),v=f?aE(i,r):Ug(i,r,!0),_=f;do{if(v===0){_l&&!f&&_r(i,r,0,!1);break}else{if(c=i.current.alternate,_&&!sE(c)){v=Ug(i,r,!1),_=!1;continue}if(v===2){if(_=r,i.errorRecoveryDisabledLanes&_)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){r=D;e:{var L=i;v=ru;var G=L.current.memoizedState.isDehydrated;if(G&&(jl(L,D).flags|=256),D=Ug(L,D,!1),D!==2){if(Pg&&!G){L.errorRecoveryDisabledLanes|=_,To|=_,v=4;break e}_=Ts,Ts=v,_!==null&&(Ts===null?Ts=_:Ts.push.apply(Ts,_))}v=D}if(_=!1,v!==2)continue}}if(v===1){jl(i,0),_r(i,r,0,!0);break}e:{switch(f=i,_=v,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:_r(f,r,zs,!xr);break e;case 2:Ts=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(v=Oh+300-zt(),10<v)){if(_r(f,r,zs,!xr),Ws(f,0,!0)!==0)break e;ja=r,f.timeoutHandle=X1(v1.bind(null,f,c,Ts,Ph,zg,r,zs,To,wl,xr,_,"Throttled",-0,0),v);break e}v1(f,c,Ts,Ph,zg,r,zs,To,wl,xr,_,null,-0,0)}}break}while(!0);Ui(i)}function v1(i,r,c,f,v,_,D,L,G,ue,be,we,he,ge){if(i.timeoutHandle=-1,we=r.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xi},d1(r,_,we);var Ie=(_&62914560)===_?Oh-zt():(_&4194048)===_?m1-zt():0;if(Ie=HE(we,Ie),Ie!==null){ja=_,i.cancelPendingCommit=Ie(N1.bind(null,i,r,_,c,f,v,D,L,G,be,we,null,he,ge)),_r(i,_,D,!ue);return}}N1(i,r,_,c,f,v,D,L,G)}function sE(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],_=v.getSnapshot;v=v.value;try{if(!$(_(),v))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function _r(i,r,c,f){r&=~Lg,r&=~To,i.suspendedLanes|=r,i.pingedLanes&=~r,f&&(i.warmLanes|=r),f=i.expirationTimes;for(var v=r;0<v;){var _=31-gn(v),D=1<<_;f[_]=-1,v&=~D}c!==0&&Pe(i,c,r)}function Lh(){return(Lt&6)===0?(lu(0),!1):!0}function Hg(){if(yt!==null){if(Vt===0)var i=yt.return;else i=yt,fa=xo=null,sg(i),pl=null,Yc=0,i=yt;for(;i!==null;)K_(i.alternate,i),i=i.return;yt=null}}function jl(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,SE(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ja=0,Hg(),Xt=i,yt=c=da(i.current,null),wt=r,Vt=0,Ls=null,xr=!1,_l=ys(i,r),Pg=!1,wl=zs=Lg=To=yr=_n=0,Ts=ru=null,zg=!1,(r&8)!==0&&(r|=r&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=r;0<f;){var v=31-gn(f),_=1<<v;r|=i[v],f&=~_}return Sa=r,sh(),c}function b1(i,r){ut=null,W.H=Qc,r===fl||r===dh?(r=Lb(),Vt=3):r===Wm?(r=Lb(),Vt=4):Vt=r===vg?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ls=r,yt===null&&(_n=1,kh(i,Xs(r,i.current)))}function _1(){var i=Rs.current;return i===null?!0:(wt&4194048)===wt?Js===null:(wt&62914560)===wt||(wt&536870912)!==0?i===Js:!1}function w1(){var i=W.H;return W.H=Qc,i===null?Qc:i}function S1(){var i=W.A;return W.A=tE,i}function zh(){_n=4,xr||(wt&4194048)!==wt&&Rs.current!==null||(_l=!0),(yr&134217727)===0&&(To&134217727)===0||Xt===null||_r(Xt,wt,zs,!1)}function Ug(i,r,c){var f=Lt;Lt|=2;var v=w1(),_=S1();(Xt!==i||wt!==r)&&(Ph=null,jl(i,r)),r=!1;var D=_n;e:do try{if(Vt!==0&&yt!==null){var L=yt,G=Ls;switch(Vt){case 8:Hg(),D=6;break e;case 3:case 2:case 9:case 6:Rs.current===null&&(r=!0);var ue=Vt;if(Vt=0,Ls=null,kl(i,L,G,ue),c&&_l){D=0;break e}break;default:ue=Vt,Vt=0,Ls=null,kl(i,L,G,ue)}}iE(),D=_n;break}catch(be){b1(i,be)}while(!0);return r&&i.shellSuspendCounter++,fa=xo=null,Lt=f,W.H=v,W.A=_,yt===null&&(Xt=null,wt=0,sh()),D}function iE(){for(;yt!==null;)j1(yt)}function aE(i,r){var c=Lt;Lt|=2;var f=w1(),v=S1();Xt!==i||wt!==r?(Ph=null,Rh=zt()+500,jl(i,r)):_l=ys(i,r);e:do try{if(Vt!==0&&yt!==null){r=yt;var _=Ls;t:switch(Vt){case 1:Vt=0,Ls=null,kl(i,r,_,1);break;case 2:case 9:if(Rb(_)){Vt=0,Ls=null,k1(r);break}r=function(){Vt!==2&&Vt!==9||Xt!==i||(Vt=7),Ui(i)},_.then(r,r);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:Rb(_)?(Vt=0,Ls=null,k1(r)):(Vt=0,Ls=null,kl(i,r,_,7));break;case 5:var D=null;switch(yt.tag){case 26:D=yt.memoizedState;case 5:case 27:var L=yt;if(D?uw(D):L.stateNode.complete){Vt=0,Ls=null;var G=L.sibling;if(G!==null)yt=G;else{var ue=L.return;ue!==null?(yt=ue,Bh(ue)):yt=null}break t}}Vt=0,Ls=null,kl(i,r,_,5);break;case 6:Vt=0,Ls=null,kl(i,r,_,6);break;case 8:Hg(),_n=6;break e;default:throw Error(s(462))}}rE();break}catch(be){b1(i,be)}while(!0);return fa=xo=null,W.H=f,W.A=v,Lt=c,yt!==null?0:(Xt=null,wt=0,sh(),_n)}function rE(){for(;yt!==null&&!xt();)j1(yt)}function j1(i){var r=G_(i.alternate,i,Sa);i.memoizedProps=i.pendingProps,r===null?Bh(i):yt=r}function k1(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=U_(c,r,r.pendingProps,r.type,void 0,wt);break;case 11:r=U_(c,r,r.pendingProps,r.type.render,r.ref,wt);break;case 5:sg(r);default:K_(c,r),r=yt=Sb(r,Sa),r=G_(c,r,Sa)}i.memoizedProps=i.pendingProps,r===null?Bh(i):yt=r}function kl(i,r,c,f){fa=xo=null,sg(r),pl=null,Yc=0;var v=r.return;try{if(GC(i,v,r,c,wt)){_n=1,kh(i,Xs(c,i.current)),yt=null;return}}catch(_){if(v!==null)throw yt=v,_;_n=1,kh(i,Xs(c,i.current)),yt=null;return}r.flags&32768?(Tt||f===1?i=!0:_l||(wt&536870912)!==0?i=!1:(xr=i=!0,(f===2||f===9||f===3||f===6)&&(f=Rs.current,f!==null&&f.tag===13&&(f.flags|=16384))),T1(r,i)):Bh(r)}function Bh(i){var r=i;do{if((r.flags&32768)!==0){T1(r,xr);return}i=r.return;var c=ZC(r.alternate,r,Sa);if(c!==null){yt=c;return}if(r=r.sibling,r!==null){yt=r;return}yt=r=i}while(r!==null);_n===0&&(_n=5)}function T1(i,r){do{var c=QC(i.alternate,i);if(c!==null){c.flags&=32767,yt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){yt=i;return}yt=i=c}while(i!==null);_n=6,yt=null}function N1(i,r,c,f,v,_,D,L,G){i.cancelPendingCommit=null;do Vh();while(Bn!==0);if((Lt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Cm,Ri(i,c,_,D,L,G),i===Xt&&(yt=Xt=null,wt=0),Sl=r,br=i,ja=c,Bg=_,Vg=v,g1=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,uE(Ln,function(){return A1(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=W.T,W.T=null,v=X.p,X.p=2,D=Lt,Lt|=4;try{JC(i,r,c)}finally{Lt=D,X.p=v,W.T=f}}Bn=1,M1(),D1(),C1()}}function M1(){if(Bn===1){Bn=0;var i=br,r=Sl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=W.T,W.T=null;var f=X.p;X.p=2;var v=Lt;Lt|=4;try{l1(r,i);var _=ex,D=Ce(i.containerInfo),L=_.focusedElem,G=_.selectionRange;if(D!==L&&L&&L.ownerDocument&&ke(L.ownerDocument.documentElement,L)){if(G!==null&&Be(L)){var ue=G.start,be=G.end;if(be===void 0&&(be=ue),"selectionStart"in L)L.selectionStart=ue,L.selectionEnd=Math.min(be,L.value.length);else{var we=L.ownerDocument||document,he=we&&we.defaultView||window;if(he.getSelection){var ge=he.getSelection(),Ie=L.textContent.length,Ze=Math.min(G.start,Ie),Yt=G.end===void 0?Ze:Math.min(G.end,Ie);!ge.extend&&Ze>Yt&&(D=Yt,Yt=Ze,Ze=D);var ie=Ne(L,Ze),Q=Ne(L,Yt);if(ie&&Q&&(ge.rangeCount!==1||ge.anchorNode!==ie.node||ge.anchorOffset!==ie.offset||ge.focusNode!==Q.node||ge.focusOffset!==Q.offset)){var ce=we.createRange();ce.setStart(ie.node,ie.offset),ge.removeAllRanges(),Ze>Yt?(ge.addRange(ce),ge.extend(Q.node,Q.offset)):(ce.setEnd(Q.node,Q.offset),ge.addRange(ce))}}}}for(we=[],ge=L;ge=ge.parentNode;)ge.nodeType===1&&we.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<we.length;L++){var _e=we[L];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Zh=!!Jg,ex=Jg=null}finally{Lt=v,X.p=f,W.T=c}}i.current=r,Bn=2}}function D1(){if(Bn===2){Bn=0;var i=br,r=Sl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=W.T,W.T=null;var f=X.p;X.p=2;var v=Lt;Lt|=4;try{s1(i,r.alternate,r)}finally{Lt=v,X.p=f,W.T=c}}Bn=3}}function C1(){if(Bn===4||Bn===3){Bn=0,pn();var i=br,r=Sl,c=ja,f=g1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bn=5:(Bn=0,Sl=br=null,E1(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(vr=null),ve(c),r=r.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(xs,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=W.T,v=X.p,X.p=2,W.T=null;try{for(var _=i.onRecoverableError,D=0;D<f.length;D++){var L=f[D];_(L.value,{componentStack:L.stack})}}finally{W.T=r,X.p=v}}(ja&3)!==0&&Vh(),Ui(i),v=i.pendingLanes,(c&261930)!==0&&(v&42)!==0?i===Fg?ou++:(ou=0,Fg=i):ou=0,lu(0)}}function E1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Uc(r)))}function Vh(){return M1(),D1(),C1(),A1()}function A1(){if(Bn!==5)return!1;var i=br,r=Bg;Bg=0;var c=ve(ja),f=W.T,v=X.p;try{X.p=32>c?32:c,W.T=null,c=Vg,Vg=null;var _=br,D=ja;if(Bn=0,Sl=br=null,ja=0,(Lt&6)!==0)throw Error(s(331));var L=Lt;if(Lt|=4,f1(_.current),u1(_,_.current,D,c),Lt=L,lu(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(xs,_)}catch{}return!0}finally{X.p=v,W.T=f,E1(i,r)}}function O1(i,r,c){r=Xs(c,r),r=yg(i.stateNode,r,2),i=fr(i,r,2),i!==null&&(vs(i,2),Ui(i))}function Ft(i,r,c){if(i.tag===3)O1(i,i,c);else for(;r!==null;){if(r.tag===3){O1(r,i,c);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(vr===null||!vr.has(f))){i=Xs(c,i),c=R_(2),f=fr(r,c,2),f!==null&&(P_(c,f,r,i),vs(f,2),Ui(f));break}}r=r.return}}function Ig(i,r,c){var f=i.pingCache;if(f===null){f=i.pingCache=new nE;var v=new Set;f.set(r,v)}else v=f.get(r),v===void 0&&(v=new Set,f.set(r,v));v.has(c)||(Pg=!0,v.add(c),i=oE.bind(null,i,r,c),r.then(i,i))}function oE(i,r,c){var f=i.pingCache;f!==null&&f.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Xt===i&&(wt&c)===c&&(_n===4||_n===3&&(wt&62914560)===wt&&300>zt()-Oh?(Lt&2)===0&&jl(i,0):Lg|=c,wl===wt&&(wl=0)),Ui(i)}function R1(i,r){r===0&&(r=Oi()),i=po(i,r),i!==null&&(vs(i,r),Ui(i))}function lE(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),R1(i,c)}function cE(i,r){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,v=i.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(r),R1(i,c)}function uE(i,r){return Hn(i,r)}var Fh=null,Tl=null,Yg=!1,Hh=!1,Wg=!1,wr=0;function Ui(i){i!==Tl&&i.next===null&&(Tl===null?Fh=Tl=i:Tl=Tl.next=i),Hh=!0,Yg||(Yg=!0,hE())}function lu(i,r){if(!Wg&&Hh){Wg=!0;do for(var c=!1,f=Fh;f!==null;){if(i!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var D=f.suspendedLanes,L=f.pingedLanes;_=(1<<31-gn(42|i)+1)-1,_&=v&~(D&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,B1(f,_))}else _=wt,_=Ws(f,f===Xt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||ys(f,_)||(c=!0,B1(f,_));f=f.next}while(c);Wg=!1}}function dE(){P1()}function P1(){Hh=Yg=!1;var i=0;wr!==0&&wE()&&(i=wr);for(var r=zt(),c=null,f=Fh;f!==null;){var v=f.next,_=L1(f,r);_===0?(f.next=null,c===null?Fh=v:c.next=v,v===null&&(Tl=c)):(c=f,(i!==0||(_&3)!==0)&&(Hh=!0)),f=v}Bn!==0&&Bn!==5||lu(i),wr!==0&&(wr=0)}function L1(i,r){for(var c=i.suspendedLanes,f=i.pingedLanes,v=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var D=31-gn(_),L=1<<D,G=v[D];G===-1?((L&c)===0||(L&f)!==0)&&(v[D]=Ai(L,r)):G<=r&&(i.expiredLanes|=L),_&=~L}if(r=Xt,c=wt,c=Ws(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===r&&(Vt===2||Vt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&ze(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||ys(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(f!==null&&ze(f),ve(c)){case 2:case 8:c=Wn;break;case 32:c=Ln;break;case 268435456:c=gs;break;default:c=Ln}return f=z1.bind(null,i),c=Hn(c,f),i.callbackPriority=r,i.callbackNode=c,r}return f!==null&&f!==null&&ze(f),i.callbackPriority=2,i.callbackNode=null,2}function z1(i,r){if(Bn!==0&&Bn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Vh()&&i.callbackNode!==c)return null;var f=wt;return f=Ws(i,i===Xt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(y1(i,f,r),L1(i,zt()),i.callbackNode!=null&&i.callbackNode===c?z1.bind(null,i):null)}function B1(i,r){if(Vh())return null;y1(i,r,!0)}function hE(){jE(function(){(Lt&6)!==0?Hn(ot,dE):P1()})}function $g(){if(wr===0){var i=dl;i===0&&(i=Cn,Cn<<=1,(Cn&261888)===0&&(Cn=256)),wr=i}return wr}function V1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:no(""+i)}function F1(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function fE(i,r,c,f,v){if(r==="submit"&&c&&c.stateNode===v){var _=V1((v[Qe]||null).action),D=f.submitter;D&&(r=(r=D[Qe]||null)?V1(r.formAction):D.getAttribute("formAction"),r!==null&&(_=r,D=null));var L=new ro("action","action",null,f,v);i.push({event:L,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(wr!==0){var G=D?F1(v,D):new FormData(v);hg(c,{pending:!0,data:G,method:v.method,action:_},null,G)}}else typeof _=="function"&&(L.preventDefault(),G=D?F1(v,D):new FormData(v),hg(c,{pending:!0,data:G,method:v.method,action:_},_,G))},currentTarget:v}]})}}for(var qg=0;qg<Dm.length;qg++){var Gg=Dm[qg],pE=Gg.toLowerCase(),mE=Gg[0].toUpperCase()+Gg.slice(1);bi(pE,"on"+mE)}bi(fo,"onAnimationEnd"),bi(rr,"onAnimationIteration"),bi(vb,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(EC,"onTransitionRun"),bi(AC,"onTransitionStart"),bi(OC,"onTransitionCancel"),bi(bb,"onTransitionEnd"),na("onMouseEnter",["mouseout","mouseover"]),na("onMouseLeave",["mouseout","mouseover"]),na("onPointerEnter",["pointerout","pointerover"]),na("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function H1(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],v=f.event;f=f.listeners;e:{var _=void 0;if(r)for(var D=f.length-1;0<=D;D--){var L=f[D],G=L.instance,ue=L.currentTarget;if(L=L.listener,G!==_&&v.isPropagationStopped())break e;_=L,v.currentTarget=ue;try{_(v)}catch(be){nh(be)}v.currentTarget=null,_=G}else for(D=0;D<f.length;D++){if(L=f[D],G=L.instance,ue=L.currentTarget,L=L.listener,G!==_&&v.isPropagationStopped())break e;_=L,v.currentTarget=ue;try{_(v)}catch(be){nh(be)}v.currentTarget=null,_=G}}}}function vt(i,r){var c=r[Gt];c===void 0&&(c=r[Gt]=new Set);var f=i+"__bubble";c.has(f)||(U1(r,i,2,!1),c.add(f))}function Xg(i,r,c){var f=0;r&&(f|=4),U1(c,i,f,r)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function Kg(i){if(!i[Uh]){i[Uh]=!0,to.forEach(function(c){c!=="selectionchange"&&(gE.has(c)||Xg(c,!1,i),Xg(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Uh]||(r[Uh]=!0,Xg("selectionchange",!1,r))}}function U1(i,r,c,f){switch(xw(r)){case 2:var v=YE;break;case 8:v=WE;break;default:v=dx}c=v.bind(null,r,c,i),v=void 0,!tl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),f?v!==void 0?i.addEventListener(r,c,{capture:!0,passive:v}):i.addEventListener(r,c,!0):v!==void 0?i.addEventListener(r,c,{passive:v}):i.addEventListener(r,c,!1)}function Zg(i,r,c,f,v){var _=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var D=f.tag;if(D===3||D===4){var L=f.stateNode.containerInfo;if(L===v)break;if(D===4)for(D=f.return;D!==null;){var G=D.tag;if((G===3||G===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;L!==null;){if(D=bs(L),D===null)return;if(G=D.tag,G===5||G===6||G===26||G===27){f=_=D;continue e}L=L.parentNode}}f=f.return}Ac(function(){var ue=_,be=Cc(c),we=[];e:{var he=_b.get(i);if(he!==void 0){var ge=ro,Ie=i;switch(i){case"keypress":if(nr(c)===0)break e;case"keydown":case"keyup":ge=Gd;break;case"focusin":Ie="focus",ge=Rc;break;case"focusout":Ie="blur",ge=Rc;break;case"beforeblur":case"afterblur":ge=Rc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=vm;break;case fo:case rr:case vb:ge=fm;break;case bb:ge=_m;break;case"scroll":case"scrollend":ge=dm;break;case"wheel":ge=Sm;break;case"copy":case"cut":case"paste":ge=mm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Pc;break;case"toggle":case"beforetoggle":ge=Lc}var Ze=(r&4)!==0,Yt=!Ze&&(i==="scroll"||i==="scrollend"),ie=Ze?he!==null?he+"Capture":null:he;Ze=[];for(var Q=ue,ce;Q!==null;){var _e=Q;if(ce=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||ce===null||ie===null||(_e=er(Q,ie),_e!=null&&Ze.push(uu(Q,_e,ce))),Yt)break;Q=Q.return}0<Ze.length&&(he=new ge(he,Ie,null,c,be),we.push({event:he,listeners:Ze}))}}if((r&7)===0){e:{if(he=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",he&&c!==so&&(Ie=c.relatedTarget||c.fromElement)&&(bs(Ie)||Ie[Ae]))break e;if((ge||he)&&(he=be.window===be?be:(he=be.ownerDocument)?he.defaultView||he.parentWindow:window,ge?(Ie=c.relatedTarget||c.toElement,ge=ue,Ie=Ie?bs(Ie):null,Ie!==null&&(Yt=o(Ie),Ze=Ie.tag,Ie!==Yt||Ze!==5&&Ze!==27&&Ze!==6)&&(Ie=null)):(ge=null,Ie=ue),ge!==Ie)){if(Ze=Id,_e="onMouseLeave",ie="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(Ze=Pc,_e="onPointerLeave",ie="onPointerEnter",Q="pointer"),Yt=ge==null?he:Pi(ge),ce=Ie==null?he:Pi(Ie),he=new Ze(_e,Q+"leave",ge,c,be),he.target=Yt,he.relatedTarget=ce,_e=null,bs(be)===ue&&(Ze=new Ze(ie,Q+"enter",Ie,c,be),Ze.target=ce,Ze.relatedTarget=Yt,_e=Ze),Yt=_e,ge&&Ie)t:{for(Ze=xE,ie=ge,Q=Ie,ce=0,_e=ie;_e;_e=Ze(_e))ce++;_e=0;for(var $e=Q;$e;$e=Ze($e))_e++;for(;0<ce-_e;)ie=Ze(ie),ce--;for(;0<_e-ce;)Q=Ze(Q),_e--;for(;ce--;){if(ie===Q||Q!==null&&ie===Q.alternate){Ze=ie;break t}ie=Ze(ie),Q=Ze(Q)}Ze=null}else Ze=null;ge!==null&&I1(we,he,ge,Ze,!1),Ie!==null&&Yt!==null&&I1(we,Yt,Ie,Ze,!0)}}e:{if(he=ue?Pi(ue):window,ge=he.nodeName&&he.nodeName.toLowerCase(),ge==="select"||ge==="input"&&he.type==="file")var Ct=eh;else if(Qd(he))if(th)Ct=Y;else{Ct=P;var We=C}else ge=he.nodeName,!ge||ge.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ue&&Dc(ue.elementType)&&(Ct=eh):Ct=B;if(Ct&&(Ct=Ct(i,ue))){Jd(we,Ct,c,be);break e}We&&We(i,he,ue),i==="focusout"&&ue&&he.type==="number"&&ue.memoizedProps.value!=null&&ia(he,"number",he.value)}switch(We=ue?Pi(ue):window,i){case"focusin":(Qd(We)||We.contentEditable==="true")&&(Ye=We,nt=ue,ct=null);break;case"focusout":ct=nt=Ye=null;break;case"mousedown":Xe=!0;break;case"contextmenu":case"mouseup":case"dragend":Xe=!1,it(we,c,be);break;case"selectionchange":if(Le)break;case"keydown":case"keyup":it(we,c,be)}var dt;if(ir)e:{switch(i){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else ua?ar(i,c)&&(St="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(St="onCompositionStart");St&&(Kd&&c.locale!=="ko"&&(ua||St!=="onCompositionStart"?St==="onCompositionEnd"&&ua&&(dt=Hd()):(zi=be,ra="value"in zi?zi.value:zi.textContent,ua=!0)),We=Ih(ue,St),0<We.length&&(St=new $d(St,i,null,c,be),we.push({event:St,listeners:We}),dt?St.data=dt:(dt=vi(c),dt!==null&&(St.data=dt)))),(dt=zc?Vc(i,c):Tm(i,c))&&(St=Ih(ue,"onBeforeInput"),0<St.length&&(We=new $d("onBeforeInput","beforeinput",null,c,be),we.push({event:We,listeners:St}),We.data=dt)),fE(we,i,ue,c,be)}H1(we,r)})}function uu(i,r,c){return{instance:i,listener:r,currentTarget:c}}function Ih(i,r){for(var c=r+"Capture",f=[];i!==null;){var v=i,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=er(i,c),v!=null&&f.unshift(uu(i,v,_)),v=er(i,r),v!=null&&f.push(uu(i,v,_))),i.tag===3)return f;i=i.return}return[]}function xE(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function I1(i,r,c,f,v){for(var _=r._reactName,D=[];c!==null&&c!==f;){var L=c,G=L.alternate,ue=L.stateNode;if(L=L.tag,G!==null&&G===f)break;L!==5&&L!==26&&L!==27||ue===null||(G=ue,v?(ue=er(c,_),ue!=null&&D.unshift(uu(c,ue,G))):v||(ue=er(c,_),ue!=null&&D.push(uu(c,ue,G)))),c=c.return}D.length!==0&&i.push({event:r,listeners:D})}var yE=/\r\n?/g,vE=/\u0000|\uFFFD/g;function Y1(i){return(typeof i=="string"?i:""+i).replace(yE,`
`).replace(vE,"")}function W1(i,r){return r=Y1(r),Y1(i)===r}function It(i,r,c,f,v,_){switch(c){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||Li(i,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&Li(i,""+f);break;case"className":Xa(i,"class",f);break;case"tabIndex":Xa(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Xa(i,c,f);break;case"style":Mc(i,f,_);break;case"data":if(r!=="object"){Xa(i,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=no(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(r!=="input"&&It(i,r,"name",v.name,v,null),It(i,r,"formEncType",v.formEncType,v,null),It(i,r,"formMethod",v.formMethod,v,null),It(i,r,"formTarget",v.formTarget,v,null)):(It(i,r,"encType",v.encType,v,null),It(i,r,"method",v.method,v,null),It(i,r,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=no(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=xi);break;case"onScroll":f!=null&&vt("scroll",i);break;case"onScrollEnd":f!=null&&vt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=no(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":vt("beforetoggle",i),vt("toggle",i),el(i,"popover",f);break;case"xlinkActuate":mi(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":mi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":mi(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":mi(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":mi(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":mi(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":mi(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":mi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":mi(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":el(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=um.get(c)||c,el(i,c,f))}}function Qg(i,r,c,f,v,_){switch(c){case"style":Mc(i,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Li(i,f):(typeof f=="number"||typeof f=="bigint")&&Li(i,""+f);break;case"onScroll":f!=null&&vt("scroll",i);break;case"onScrollEnd":f!=null&&vt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),r=c.slice(2,v?c.length-7:void 0),_=i[Qe]||null,_=_!=null?_[c]:null,typeof _=="function"&&i.removeEventListener(r,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,f,v);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):el(i,c,f)}}}function Qn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",i),vt("load",i);var f=!1,v=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var D=c[_];if(D!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:It(i,r,_,D,c,null)}}v&&It(i,r,"srcSet",c.srcSet,c,null),f&&It(i,r,"src",c.src,c,null);return;case"input":vt("invalid",i);var L=_=D=v=null,G=null,ue=null;for(f in c)if(c.hasOwnProperty(f)){var be=c[f];if(be!=null)switch(f){case"name":v=be;break;case"type":D=be;break;case"checked":G=be;break;case"defaultChecked":ue=be;break;case"value":_=be;break;case"defaultValue":L=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,r));break;default:It(i,r,f,be,c,null)}}gi(i,_,L,G,ue,D,v,!1);return;case"select":vt("invalid",i),f=D=_=null;for(v in c)if(c.hasOwnProperty(v)&&(L=c[v],L!=null))switch(v){case"value":_=L;break;case"defaultValue":D=L;break;case"multiple":f=L;default:It(i,r,v,L,c,null)}r=_,c=D,i.multiple=!!f,r!=null?Qa(i,!!f,r,!1):c!=null&&Qa(i,!!f,c,!0);return;case"textarea":vt("invalid",i),_=v=f=null;for(D in c)if(c.hasOwnProperty(D)&&(L=c[D],L!=null))switch(D){case"value":f=L;break;case"defaultValue":v=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:It(i,r,D,L,c,null)}Nc(i,f,v,_);return;case"option":for(G in c)c.hasOwnProperty(G)&&(f=c[G],f!=null)&&(G==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":It(i,r,G,f,c,null));return;case"dialog":vt("beforetoggle",i),vt("toggle",i),vt("cancel",i),vt("close",i);break;case"iframe":case"object":vt("load",i);break;case"video":case"audio":for(f=0;f<cu.length;f++)vt(cu[f],i);break;case"image":vt("error",i),vt("load",i);break;case"details":vt("toggle",i);break;case"embed":case"source":case"link":vt("error",i),vt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in c)if(c.hasOwnProperty(ue)&&(f=c[ue],f!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:It(i,r,ue,f,c,null)}return;default:if(Dc(r)){for(be in c)c.hasOwnProperty(be)&&(f=c[be],f!==void 0&&Qg(i,r,be,f,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(f=c[L],f!=null&&It(i,r,L,f,c,null))}function bE(i,r,c,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,D=null,L=null,G=null,ue=null,be=null;for(ge in c){var we=c[ge];if(c.hasOwnProperty(ge)&&we!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":G=we;default:f.hasOwnProperty(ge)||It(i,r,ge,null,f,we)}}for(var he in f){var ge=f[he];if(we=c[he],f.hasOwnProperty(he)&&(ge!=null||we!=null))switch(he){case"type":_=ge;break;case"name":v=ge;break;case"checked":ue=ge;break;case"defaultChecked":be=ge;break;case"value":D=ge;break;case"defaultValue":L=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,r));break;default:ge!==we&&It(i,r,he,ge,f,we)}}Za(i,D,L,G,ue,be,_,v);return;case"select":ge=D=L=he=null;for(_ in c)if(G=c[_],c.hasOwnProperty(_)&&G!=null)switch(_){case"value":break;case"multiple":ge=G;default:f.hasOwnProperty(_)||It(i,r,_,null,f,G)}for(v in f)if(_=f[v],G=c[v],f.hasOwnProperty(v)&&(_!=null||G!=null))switch(v){case"value":he=_;break;case"defaultValue":L=_;break;case"multiple":D=_;default:_!==G&&It(i,r,v,_,f,G)}r=L,c=D,f=ge,he!=null?Qa(i,!!c,he,!1):!!f!=!!c&&(r!=null?Qa(i,!!c,r,!0):Qa(i,!!c,c?[]:"",!1));return;case"textarea":ge=he=null;for(L in c)if(v=c[L],c.hasOwnProperty(L)&&v!=null&&!f.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:It(i,r,L,null,f,v)}for(D in f)if(v=f[D],_=c[D],f.hasOwnProperty(D)&&(v!=null||_!=null))switch(D){case"value":he=v;break;case"defaultValue":ge=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==_&&It(i,r,D,v,f,_)}Tc(i,he,ge);return;case"option":for(var Ie in c)he=c[Ie],c.hasOwnProperty(Ie)&&he!=null&&!f.hasOwnProperty(Ie)&&(Ie==="selected"?i.selected=!1:It(i,r,Ie,null,f,he));for(G in f)he=f[G],ge=c[G],f.hasOwnProperty(G)&&he!==ge&&(he!=null||ge!=null)&&(G==="selected"?i.selected=he&&typeof he!="function"&&typeof he!="symbol":It(i,r,G,he,f,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in c)he=c[Ze],c.hasOwnProperty(Ze)&&he!=null&&!f.hasOwnProperty(Ze)&&It(i,r,Ze,null,f,he);for(ue in f)if(he=f[ue],ge=c[ue],f.hasOwnProperty(ue)&&he!==ge&&(he!=null||ge!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:It(i,r,ue,he,f,ge)}return;default:if(Dc(r)){for(var Yt in c)he=c[Yt],c.hasOwnProperty(Yt)&&he!==void 0&&!f.hasOwnProperty(Yt)&&Qg(i,r,Yt,void 0,f,he);for(be in f)he=f[be],ge=c[be],!f.hasOwnProperty(be)||he===ge||he===void 0&&ge===void 0||Qg(i,r,be,he,f,ge);return}}for(var ie in c)he=c[ie],c.hasOwnProperty(ie)&&he!=null&&!f.hasOwnProperty(ie)&&It(i,r,ie,null,f,he);for(we in f)he=f[we],ge=c[we],!f.hasOwnProperty(we)||he===ge||he==null&&ge==null||It(i,r,we,he,f,ge)}function $1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _E(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var v=c[f],_=v.transferSize,D=v.initiatorType,L=v.duration;if(_&&L&&$1(D)){for(D=0,L=v.responseEnd,f+=1;f<c.length;f++){var G=c[f],ue=G.startTime;if(ue>L)break;var be=G.transferSize,we=G.initiatorType;be&&$1(we)&&(G=G.responseEnd,D+=be*(G<L?1:(L-ue)/(G-ue)))}if(--f,r+=8*(_+D)/(v.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Jg=null,ex=null;function Yh(i){return i.nodeType===9?i:i.ownerDocument}function q1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G1(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function tx(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nx=null;function wE(){var i=window.event;return i&&i.type==="popstate"?i===nx?!1:(nx=i,!0):(nx=null,!1)}var X1=typeof setTimeout=="function"?setTimeout:void 0,SE=typeof clearTimeout=="function"?clearTimeout:void 0,K1=typeof Promise=="function"?Promise:void 0,jE=typeof queueMicrotask=="function"?queueMicrotask:typeof K1<"u"?function(i){return K1.resolve(null).then(i).catch(kE)}:X1;function kE(i){setTimeout(function(){throw i})}function Sr(i){return i==="head"}function Z1(i,r){var c=r,f=0;do{var v=c.nextSibling;if(i.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(v),Cl(r);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")du(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,du(c);for(var _=c.firstChild;_;){var D=_.nextSibling,L=_.nodeName;_[Dt]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=D}}else c==="body"&&du(i.ownerDocument.body);c=v}while(c);Cl(r)}function Q1(i,r){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function sx(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":sx(c),fs(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function TE(i,r,c,f){for(;i.nodeType===1;){var v=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Dt])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=ei(i.nextSibling),i===null)break}return null}function NE(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=ei(i.nextSibling),i===null))return null;return i}function J1(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ei(i.nextSibling),i===null))return null;return i}function ix(i){return i.data==="$?"||i.data==="$~"}function ax(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function ME(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var f=function(){r(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function ei(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var rx=null;function ew(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return ei(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function tw(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function nw(i,r,c){switch(r=Yh(c),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function du(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);fs(i)}var ti=new Map,sw=new Set;function Wh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ka=X.d;X.d={f:DE,r:CE,D:EE,C:AE,L:OE,m:RE,X:LE,S:PE,M:zE};function DE(){var i=ka.f(),r=Lh();return i||r}function CE(i){var r=pi(i);r!==null&&r.tag===5&&r.type==="form"?b_(r):ka.r(i)}var Nl=typeof document>"u"?null:document;function iw(i,r,c){var f=Nl;if(f&&typeof r=="string"&&r){var v=ns(r);v='link[rel="'+i+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),sw.has(v)||(sw.add(v),i={rel:i,crossOrigin:c,href:r},f.querySelector(v)===null&&(r=f.createElement("link"),Qn(r,"link",i),Jt(r),f.head.appendChild(r)))}}function EE(i){ka.D(i),iw("dns-prefetch",i,null)}function AE(i,r){ka.C(i,r),iw("preconnect",i,r)}function OE(i,r,c){ka.L(i,r,c);var f=Nl;if(f&&i&&r){var v='link[rel="preload"][as="'+ns(r)+'"]';r==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+ns(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+ns(c.imageSizes)+'"]')):v+='[href="'+ns(i)+'"]';var _=v;switch(r){case"style":_=Ml(i);break;case"script":_=Dl(i)}ti.has(_)||(i=y({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),ti.set(_,i),f.querySelector(v)!==null||r==="style"&&f.querySelector(hu(_))||r==="script"&&f.querySelector(fu(_))||(r=f.createElement("link"),Qn(r,"link",i),Jt(r),f.head.appendChild(r)))}}function RE(i,r){ka.m(i,r);var c=Nl;if(c&&i){var f=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+ns(f)+'"][href="'+ns(i)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Dl(i)}if(!ti.has(_)&&(i=y({rel:"modulepreload",href:i},r),ti.set(_,i),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(fu(_)))return}f=c.createElement("link"),Qn(f,"link",i),Jt(f),c.head.appendChild(f)}}}function PE(i,r,c){ka.S(i,r,c);var f=Nl;if(f&&i){var v=ps(f).hoistableStyles,_=Ml(i);r=r||"default";var D=v.get(_);if(!D){var L={loading:0,preload:null};if(D=f.querySelector(hu(_)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},c),(c=ti.get(_))&&ox(i,c);var G=D=f.createElement("link");Jt(G),Qn(G,"link",i),G._p=new Promise(function(ue,be){G.onload=ue,G.onerror=be}),G.addEventListener("load",function(){L.loading|=1}),G.addEventListener("error",function(){L.loading|=2}),L.loading|=4,$h(D,r,f)}D={type:"stylesheet",instance:D,count:1,state:L},v.set(_,D)}}}function LE(i,r){ka.X(i,r);var c=Nl;if(c&&i){var f=ps(c).hoistableScripts,v=Dl(i),_=f.get(v);_||(_=c.querySelector(fu(v)),_||(i=y({src:i,async:!0},r),(r=ti.get(v))&&lx(i,r),_=c.createElement("script"),Jt(_),Qn(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function zE(i,r){ka.M(i,r);var c=Nl;if(c&&i){var f=ps(c).hoistableScripts,v=Dl(i),_=f.get(v);_||(_=c.querySelector(fu(v)),_||(i=y({src:i,async:!0,type:"module"},r),(r=ti.get(v))&&lx(i,r),_=c.createElement("script"),Jt(_),Qn(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function aw(i,r,c,f){var v=(v=Se.current)?Wh(v):null;if(!v)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Ml(c.href),c=ps(v).hoistableStyles,f=c.get(r),f||(f={type:"style",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ml(c.href);var _=ps(v).hoistableStyles,D=_.get(i);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,D),(_=v.querySelector(hu(i)))&&!_._p&&(D.instance=_,D.state.loading=5),ti.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ti.set(i,c),_||BE(v,i,c,D.state))),r&&f===null)throw Error(s(528,""));return D}if(r&&f!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Dl(c),c=ps(v).hoistableScripts,f=c.get(r),f||(f={type:"script",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ml(i){return'href="'+ns(i)+'"'}function hu(i){return'link[rel="stylesheet"]['+i+"]"}function rw(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function BE(i,r,c,f){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=i.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Qn(r,"link",c),Jt(r),i.head.appendChild(r))}function Dl(i){return'[src="'+ns(i)+'"]'}function fu(i){return"script[async]"+i}function ow(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var f=i.querySelector('style[data-href~="'+ns(c.href)+'"]');if(f)return r.instance=f,Jt(f),f;var v=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Jt(f),Qn(f,"style",v),$h(f,c.precedence,i),r.instance=f;case"stylesheet":v=Ml(c.href);var _=i.querySelector(hu(v));if(_)return r.state.loading|=4,r.instance=_,Jt(_),_;f=rw(c),(v=ti.get(v))&&ox(f,v),_=(i.ownerDocument||i).createElement("link"),Jt(_);var D=_;return D._p=new Promise(function(L,G){D.onload=L,D.onerror=G}),Qn(_,"link",f),r.state.loading|=4,$h(_,c.precedence,i),r.instance=_;case"script":return _=Dl(c.src),(v=i.querySelector(fu(_)))?(r.instance=v,Jt(v),v):(f=c,(v=ti.get(_))&&(f=y({},c),lx(f,v)),i=i.ownerDocument||i,v=i.createElement("script"),Jt(v),Qn(v,"link",f),i.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,$h(f,c.precedence,i));return r.instance}function $h(i,r,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,D=0;D<f.length;D++){var L=f[D];if(L.dataset.precedence===r)_=L;else if(_!==v)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function ox(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function lx(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var qh=null;function lw(i,r,c){if(qh===null){var f=new Map,v=qh=new Map;v.set(c,f)}else v=qh,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),v=0;v<c.length;v++){var _=c[v];if(!(_[Dt]||_[Oe]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var D=_.getAttribute(r)||"";D=i+D;var L=f.get(D);L?L.push(_):f.set(D,[_])}}return f}function cw(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function VE(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function uw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function FE(i,r,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Ml(f.href),_=r.querySelector(hu(v));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Gh.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=_,Jt(_);return}_=r.ownerDocument||r,f=rw(f),(v=ti.get(v))&&ox(f,v),_=_.createElement("link"),Jt(_);var D=_;D._p=new Promise(function(L,G){D.onload=L,D.onerror=G}),Qn(_,"link",f),c.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Gh.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var cx=0;function HE(i,r){return i.stylesheets&&i.count===0&&Kh(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&Kh(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&cx===0&&(cx=62500*_E());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Kh(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>cx?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Gh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Xh=null;function Kh(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Xh=new Map,r.forEach(UE,i),Xh=null,Gh.call(i))}function UE(i,r){if(!(r.state.loading&4)){var c=Xh.get(i);if(c)var f=c.get(null);else{c=new Map,Xh.set(i,c);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var D=v[_];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(c.set(D.dataset.precedence,D),f=D)}f&&c.set(null,f)}v=r.instance,D=v.getAttribute("data-precedence"),_=c.get(D)||f,_===f&&c.set(null,v),c.set(D,v),this.count++,f=Gh.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),r.state.loading|=4}}var pu={$$typeof:z,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function IE(i,r,c,f,v,_,D,L,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function dw(i,r,c,f,v,_,D,L,G,ue,be,we){return i=new IE(i,r,c,D,G,ue,be,we,L),r=1,_===!0&&(r|=24),_=Os(3,null,null,r),i.current=_,_.stateNode=i,r=Um(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:f,isDehydrated:c,cache:r},$m(_),i}function hw(i){return i?(i=rl,i):rl}function fw(i,r,c,f,v,_){v=hw(v),f.context===null?f.context=v:f.pendingContext=v,f=hr(r),f.payload={element:c},_=_===void 0?null:_,_!==null&&(f.callback=_),c=fr(i,f,r),c!==null&&(Ns(c,i,r),$c(c,i,r))}function pw(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function ux(i,r){pw(i,r),(i=i.alternate)&&pw(i,r)}function mw(i){if(i.tag===13||i.tag===31){var r=po(i,67108864);r!==null&&Ns(r,i,67108864),ux(i,67108864)}}function gw(i){if(i.tag===13||i.tag===31){var r=Bs();r=fe(r);var c=po(i,r);c!==null&&Ns(c,i,r),ux(i,r)}}var Zh=!0;function YE(i,r,c,f){var v=W.T;W.T=null;var _=X.p;try{X.p=2,dx(i,r,c,f)}finally{X.p=_,W.T=v}}function WE(i,r,c,f){var v=W.T;W.T=null;var _=X.p;try{X.p=8,dx(i,r,c,f)}finally{X.p=_,W.T=v}}function dx(i,r,c,f){if(Zh){var v=hx(f);if(v===null)Zg(i,r,f,Qh,c),yw(i,f);else if(qE(v,i,r,c,f))f.stopPropagation();else if(yw(i,f),r&4&&-1<$E.indexOf(i)){for(;v!==null;){var _=pi(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var D=hs(_.pendingLanes);if(D!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;D;){var G=1<<31-gn(D);L.entanglements[1]|=G,D&=~G}Ui(_),(Lt&6)===0&&(Rh=zt()+500,lu(0))}}break;case 31:case 13:L=po(_,2),L!==null&&Ns(L,_,2),Lh(),ux(_,2)}if(_=hx(f),_===null&&Zg(i,r,f,Qh,c),_===v)break;v=_}v!==null&&f.stopPropagation()}else Zg(i,r,f,null,c)}}function hx(i){return i=Cc(i),fx(i)}var Qh=null;function fx(i){if(Qh=null,i=bs(i),i!==null){var r=o(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=l(r),i!==null)return i;i=null}else if(c===31){if(i=d(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Qh=i,null}function xw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Es()){case ot:return 2;case Wn:return 8;case Ln:case Is:return 32;case gs:return 268435456;default:return 32}default:return 32}}var px=!1,jr=null,kr=null,Tr=null,mu=new Map,gu=new Map,Nr=[],$E="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(i,r){switch(i){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":mu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(r.pointerId)}}function xu(i,r,c,f,v,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},r!==null&&(r=pi(r),r!==null&&mw(r)),i):(i.eventSystemFlags|=f,r=i.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),i)}function qE(i,r,c,f,v){switch(r){case"focusin":return jr=xu(jr,i,r,c,f,v),!0;case"dragenter":return kr=xu(kr,i,r,c,f,v),!0;case"mouseover":return Tr=xu(Tr,i,r,c,f,v),!0;case"pointerover":var _=v.pointerId;return mu.set(_,xu(mu.get(_)||null,i,r,c,f,v)),!0;case"gotpointercapture":return _=v.pointerId,gu.set(_,xu(gu.get(_)||null,i,r,c,f,v)),!0}return!1}function vw(i){var r=bs(i.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){i.blockedOn=r,Ve(i.priority,function(){gw(c)});return}}else if(r===31){if(r=d(c),r!==null){i.blockedOn=r,Ve(i.priority,function(){gw(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Jh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=hx(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);so=f,c.target.dispatchEvent(f),so=null}else return r=pi(c),r!==null&&mw(r),i.blockedOn=c,!1;r.shift()}return!0}function bw(i,r,c){Jh(i)&&c.delete(r)}function GE(){px=!1,jr!==null&&Jh(jr)&&(jr=null),kr!==null&&Jh(kr)&&(kr=null),Tr!==null&&Jh(Tr)&&(Tr=null),mu.forEach(bw),gu.forEach(bw)}function ef(i,r){i.blockedOn===r&&(i.blockedOn=null,px||(px=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,GE)))}var tf=null;function _w(i){tf!==i&&(tf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tf===i&&(tf=null);for(var r=0;r<i.length;r+=3){var c=i[r],f=i[r+1],v=i[r+2];if(typeof f!="function"){if(fx(f||c)===null)continue;break}var _=pi(c);_!==null&&(i.splice(r,3),r-=3,hg(_,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function Cl(i){function r(G){return ef(G,i)}jr!==null&&ef(jr,i),kr!==null&&ef(kr,i),Tr!==null&&ef(Tr,i),mu.forEach(r),gu.forEach(r);for(var c=0;c<Nr.length;c++){var f=Nr[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Nr.length&&(c=Nr[0],c.blockedOn===null);)vw(c),c.blockedOn===null&&Nr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],_=c[f+1],D=v[Qe]||null;if(typeof _=="function")D||_w(c);else if(D){var L=null;if(_&&_.hasAttribute("formAction")){if(v=_,D=_[Qe]||null)L=D.formAction;else if(fx(v)!==null)continue}else L=D.action;typeof L=="function"?c[f+1]=L:(c.splice(f,3),f-=3),_w(c)}}}function ww(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(D){return v=D})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function mx(i){this._internalRoot=i}nf.prototype.render=mx.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,f=Bs();fw(c,f,i,r,null,null)},nf.prototype.unmount=mx.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;fw(i.current,2,null,i,null,null),Lh(),r[Ae]=null}};function nf(i){this._internalRoot=i}nf.prototype.unstable_scheduleHydration=function(i){if(i){var r=Me();i={blockedOn:null,target:i,priority:r};for(var c=0;c<Nr.length&&r!==0&&r<Nr[c].priority;c++);Nr.splice(c,0,i),c===0&&vw(i)}};var Sw=e.version;if(Sw!=="19.2.3")throw Error(s(527,Sw,"19.2.3"));X.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?x(i):null,i=i===null?null:i.stateNode,i};var XE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{xs=sf.inject(XE),mn=sf}catch{}}return vu.createRoot=function(i,r){if(!a(i))throw Error(s(299));var c=!1,f="",v=C_,_=E_,D=A_;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(D=r.onRecoverableError)),r=dw(i,1,!1,null,null,c,f,null,v,_,D,ww),i[Ae]=r.current,Kg(i),new mx(r)},vu.hydrateRoot=function(i,r,c){if(!a(i))throw Error(s(299));var f=!1,v="",_=C_,D=E_,L=A_,G=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.formState!==void 0&&(G=c.formState)),r=dw(i,1,!0,r,c??null,f,v,G,_,D,L,ww),r.context=hw(null),c=r.current,f=Bs(),f=fe(f),v=hr(f),v.callback=null,fr(c,v,f),c=f,r.current.lanes=c,vs(r,c),Ui(r),i[Ae]=r.current,Kg(i),new nf(r)},vu.version="19.2.3",vu}var Ow;function o5(){if(Ow)return yx.exports;Ow=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yx.exports=r5(),yx.exports}var l5=o5();const c5=kv(l5);var Pk=Rk();function nd(){return nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},nd.apply(this,arguments)}var Rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rr||(Rr={}));const Rw="popstate";function u5(t){t===void 0&&(t={});function e(s,a){let{pathname:o,search:l,hash:d}=s.location;return xy("",{pathname:o,search:l,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Wf(a)}return h5(e,n,null,t)}function jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d5(){return Math.random().toString(36).substr(2,8)}function Pw(t,e){return{usr:t.state,key:t.key,idx:e}}function xy(t,e,n,s){return n===void 0&&(n=null),nd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nc(e):e,{state:n,key:e&&e.key||s||d5()})}function Wf(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function nc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function h5(t,e,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,d=Rr.Pop,h=null,p=x();p==null&&(p=0,l.replaceState(nd({},l.state,{idx:p}),""));function x(){return(l.state||{idx:null}).idx}function y(){d=Rr.Pop;let M=x(),R=M==null?null:M-p;p=M,h&&h({action:d,location:N.location,delta:R})}function b(M,R){d=Rr.Push;let E=xy(N.location,M,R);p=x()+1;let z=Pw(E,p),U=N.createHref(E);try{l.pushState(z,"",U)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(U)}o&&h&&h({action:d,location:N.location,delta:1})}function j(M,R){d=Rr.Replace;let E=xy(N.location,M,R);p=x();let z=Pw(E,p),U=N.createHref(E);l.replaceState(z,"",U),o&&h&&h({action:d,location:N.location,delta:0})}function T(M){let R=a.location.origin!=="null"?a.location.origin:a.location.href,E=typeof M=="string"?M:Wf(M);return E=E.replace(/ $/,"%20"),jn(R,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,R)}let N={get action(){return d},get location(){return t(a,l)},listen(M){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(Rw,y),h=M,()=>{a.removeEventListener(Rw,y),h=null}},createHref(M){return e(a,M)},createURL:T,encodeLocation(M){let R=T(M);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:j,go(M){return l.go(M)}};return N}var Lw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lw||(Lw={}));function f5(t,e,n){return n===void 0&&(n="/"),p5(t,e,n)}function p5(t,e,n,s){let a=typeof e=="string"?nc(e):e,o=Xl(a.pathname||"/",n);if(o==null)return null;let l=Lk(t);m5(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let p=T5(o);d=j5(l[h],p)}return d}function Lk(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(o,l,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(jn(h.relativePath.startsWith(s),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(s.length));let p=Ir([s,h.relativePath]),x=n.concat(h);o.children&&o.children.length>0&&(jn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Lk(o.children,e,x,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:w5(p,o.index),routesMeta:x})};return t.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,l);else for(let h of zk(o.path))a(o,l,h)}),e}function zk(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=zk(s.join("/")),d=[];return d.push(...l.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...l),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function m5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S5(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const g5=/^:[\w-]+$/,x5=3,y5=2,v5=1,b5=10,_5=-2,zw=t=>t==="*";function w5(t,e){let n=t.split("/"),s=n.length;return n.some(zw)&&(s+=_5),e&&(s+=y5),n.filter(a=>!zw(a)).reduce((a,o)=>a+(g5.test(o)?x5:o===""?v5:b5),s)}function S5(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function j5(t,e,n){let{routesMeta:s}=t,a={},o="/",l=[];for(let d=0;d<s.length;++d){let h=s[d],p=d===s.length-1,x=o==="/"?e:e.slice(o.length)||"/",y=yy({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},x),b=h.route;if(!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:Ir([o,y.pathname]),pathnameBase:E5(Ir([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=Ir([o,y.pathnameBase]))}return l}function yy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=k5(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((p,x,y)=>{let{paramName:b,isOptional:j}=x;if(b==="*"){let N=d[y]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const T=d[y];return j&&!T?p[b]=void 0:p[b]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function k5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Nv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function T5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const N5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M5=t=>N5.test(t);function D5(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?nc(t):t,o;if(n)if(M5(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Nv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=Bw(n.substring(1),"/"):o=Bw(n,e)}else o=e;return{pathname:o,search:A5(s),hash:O5(a)}}function Bw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function wx(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function C5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bk(t,e){let n=C5(t);return e?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Vk(t,e,n,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=nc(t):(a=nd({},t),jn(!a.pathname||!a.pathname.includes("?"),wx("?","pathname","search",a)),jn(!a.pathname||!a.pathname.includes("#"),wx("#","pathname","hash",a)),jn(!a.search||!a.search.includes("#"),wx("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,d;if(l==null)d=n;else{let y=e.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}d=y>=0?e[y]:"/"}let h=D5(a,d),p=l&&l!=="/"&&l.endsWith("/"),x=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||x)&&(h.pathname+="/"),h}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),E5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function R5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fk=["post","put","patch","delete"];new Set(Fk);const P5=["get",...Fk];new Set(P5);function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},sd.apply(this,arguments)}const Sp=A.createContext(null),Hk=A.createContext(null),Zr=A.createContext(null),jp=A.createContext(null),Ko=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Uk=A.createContext(null);function L5(t,e){let{relative:n}=e===void 0?{}:e;_d()||jn(!1);let{basename:s,navigator:a}=A.useContext(Zr),{hash:o,pathname:l,search:d}=kp(t,{relative:n}),h=l;return s!=="/"&&(h=l==="/"?s:Ir([s,l])),a.createHref({pathname:h,search:d,hash:o})}function _d(){return A.useContext(jp)!=null}function sc(){return _d()||jn(!1),A.useContext(jp).location}function Ik(t){A.useContext(Zr).static||A.useLayoutEffect(t)}function z5(){let{isDataRoute:t}=A.useContext(Ko);return t?K5():B5()}function B5(){_d()||jn(!1);let t=A.useContext(Sp),{basename:e,future:n,navigator:s}=A.useContext(Zr),{matches:a}=A.useContext(Ko),{pathname:o}=sc(),l=JSON.stringify(Bk(a,n.v7_relativeSplatPath)),d=A.useRef(!1);return Ik(()=>{d.current=!0}),A.useCallback(function(p,x){if(x===void 0&&(x={}),!d.current)return;if(typeof p=="number"){s.go(p);return}let y=Vk(p,JSON.parse(l),o,x.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ir([e,y.pathname])),(x.replace?s.replace:s.push)(y,x.state,x)},[e,s,l,o,t])}function kp(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=A.useContext(Zr),{matches:a}=A.useContext(Ko),{pathname:o}=sc(),l=JSON.stringify(Bk(a,s.v7_relativeSplatPath));return A.useMemo(()=>Vk(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function V5(t,e){return F5(t,e)}function F5(t,e,n,s){_d()||jn(!1);let{navigator:a}=A.useContext(Zr),{matches:o}=A.useContext(Ko),l=o[o.length-1],d=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let p=sc(),x;if(e){var y;let M=typeof e=="string"?nc(e):e;h==="/"||(y=M.pathname)!=null&&y.startsWith(h)||jn(!1),x=M}else x=p;let b=x.pathname||"/",j=b;if(h!=="/"){let M=h.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(M.length).join("/")}let T=f5(t,{pathname:j}),N=W5(T&&T.map(M=>Object.assign({},M,{params:Object.assign({},d,M.params),pathname:Ir([h,a.encodeLocation?a.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?h:Ir([h,a.encodeLocation?a.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,n,s);return e&&N?A.createElement(jp.Provider,{value:{location:sd({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Rr.Pop}},N):N}function H5(){let t=X5(),e=R5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:a},n):null,null)}const U5=A.createElement(H5,null);class I5 extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Ko.Provider,{value:this.props.routeContext},A.createElement(Uk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y5(t){let{routeContext:e,match:n,children:s}=t,a=A.useContext(Sp);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Ko.Provider,{value:e},s)}function W5(t,e,n,s){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=(a=n)==null?void 0:a.errors;if(d!=null){let x=l.findIndex(y=>y.route.id&&d?.[y.route.id]!==void 0);x>=0||jn(!1),l=l.slice(0,Math.min(l.length,x+1))}let h=!1,p=-1;if(n&&s&&s.v7_partialHydration)for(let x=0;x<l.length;x++){let y=l[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=x),y.route.id){let{loaderData:b,errors:j}=n,T=y.route.loader&&b[y.route.id]===void 0&&(!j||j[y.route.id]===void 0);if(y.route.lazy||T){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((x,y,b)=>{let j,T=!1,N=null,M=null;n&&(j=d&&y.route.id?d[y.route.id]:void 0,N=y.route.errorElement||U5,h&&(p<0&&b===0?(Z5("route-fallback"),T=!0,M=null):p===b&&(T=!0,M=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,b+1)),E=()=>{let z;return j?z=N:T?z=M:y.route.Component?z=A.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=x,A.createElement(Y5,{match:y,routeContext:{outlet:x,matches:R,isDataRoute:n!=null},children:z})};return n&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?A.createElement(I5,{location:n.location,revalidation:n.revalidation,component:N,error:j,children:E(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):E()},null)}var Yk=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Yk||{}),Wk=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Wk||{});function $5(t){let e=A.useContext(Sp);return e||jn(!1),e}function q5(t){let e=A.useContext(Hk);return e||jn(!1),e}function G5(t){let e=A.useContext(Ko);return e||jn(!1),e}function $k(t){let e=G5(),n=e.matches[e.matches.length-1];return n.route.id||jn(!1),n.route.id}function X5(){var t;let e=A.useContext(Uk),n=q5(),s=$k();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function K5(){let{router:t}=$5(Yk.UseNavigateStable),e=$k(Wk.UseNavigateStable),n=A.useRef(!1);return Ik(()=>{n.current=!0}),A.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,sd({fromRouteId:e},o)))},[t,e])}const Vw={};function Z5(t,e,n){Vw[t]||(Vw[t]=!0)}function Q5(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Si(t){jn(!1)}function J5(t){let{basename:e="/",children:n=null,location:s,navigationType:a=Rr.Pop,navigator:o,static:l=!1,future:d}=t;_d()&&jn(!1);let h=e.replace(/^\/*/,"/"),p=A.useMemo(()=>({basename:h,navigator:o,static:l,future:sd({v7_relativeSplatPath:!1},d)}),[h,d,o,l]);typeof s=="string"&&(s=nc(s));let{pathname:x="/",search:y="",hash:b="",state:j=null,key:T="default"}=s,N=A.useMemo(()=>{let M=Xl(x,h);return M==null?null:{location:{pathname:M,search:y,hash:b,state:j,key:T},navigationType:a}},[h,x,y,b,j,T,a]);return N==null?null:A.createElement(Zr.Provider,{value:p},A.createElement(jp.Provider,{children:n,value:N}))}function eA(t){let{children:e,location:n}=t;return V5(vy(e),n)}new Promise(()=>{});function vy(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(s,a)=>{if(!A.isValidElement(s))return;let o=[...e,a];if(s.type===A.Fragment){n.push.apply(n,vy(s.props.children,o));return}s.type!==Si&&jn(!1),!s.props.index||!s.props.children||jn(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=vy(s.props.children,o)),n.push(l)}),n}function $f(){return $f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$f.apply(this,arguments)}function qk(t,e){if(t==null)return{};var n={},s=Object.keys(t),a,o;for(o=0;o<s.length;o++)a=s[o],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function tA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nA(t,e){return t.button===0&&(!e||e==="_self")&&!tA(t)}const sA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],aA="6";try{window.__reactRouterVersion=aA}catch{}const rA=A.createContext({isTransitioning:!1}),oA="startTransition",Fw=n5[oA];function lA(t){let{basename:e,children:n,future:s,window:a}=t,o=A.useRef();o.current==null&&(o.current=u5({window:a,v5Compat:!0}));let l=o.current,[d,h]=A.useState({action:l.action,location:l.location}),{v7_startTransition:p}=s||{},x=A.useCallback(y=>{p&&Fw?Fw(()=>h(y)):h(y)},[h,p]);return A.useLayoutEffect(()=>l.listen(x),[l,x]),A.useEffect(()=>Q5(s),[s]),A.createElement(J5,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:l,future:s})}const cA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oo=A.forwardRef(function(e,n){let{onClick:s,relative:a,reloadDocument:o,replace:l,state:d,target:h,to:p,preventScrollReset:x,viewTransition:y}=e,b=qk(e,sA),{basename:j}=A.useContext(Zr),T,N=!1;if(typeof p=="string"&&uA.test(p)&&(T=p,cA))try{let z=new URL(window.location.href),U=p.startsWith("//")?new URL(z.protocol+p):new URL(p),I=Xl(U.pathname,j);U.origin===z.origin&&I!=null?p=I+U.search+U.hash:N=!0}catch{}let M=L5(p,{relative:a}),R=fA(p,{replace:l,state:d,target:h,preventScrollReset:x,relative:a,viewTransition:y});function E(z){s&&s(z),z.defaultPrevented||R(z)}return A.createElement("a",$f({},b,{href:T||M,onClick:N||o?s:E,ref:n,target:h}))}),dA=A.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:a=!1,className:o="",end:l=!1,style:d,to:h,viewTransition:p,children:x}=e,y=qk(e,iA),b=kp(h,{relative:y.relative}),j=sc(),T=A.useContext(Hk),{navigator:N,basename:M}=A.useContext(Zr),R=T!=null&&pA(b)&&p===!0,E=N.encodeLocation?N.encodeLocation(b).pathname:b.pathname,z=j.pathname,U=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;a||(z=z.toLowerCase(),U=U?U.toLowerCase():null,E=E.toLowerCase()),U&&M&&(U=Xl(U,M)||U);const I=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let V=z===E||!l&&z.startsWith(E)&&z.charAt(I)==="/",O=U!=null&&(U===E||!l&&U.startsWith(E)&&U.charAt(E.length)==="/"),q={isActive:V,isPending:O,isTransitioning:R},Z=V?s:void 0,re;typeof o=="function"?re=o(q):re=[o,V?"active":null,O?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let J=typeof d=="function"?d(q):d;return A.createElement(Oo,$f({},y,{"aria-current":Z,className:re,ref:n,style:J,to:h,viewTransition:p}),typeof x=="function"?x(q):x)});var by;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(by||(by={}));var Hw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Hw||(Hw={}));function hA(t){let e=A.useContext(Sp);return e||jn(!1),e}function fA(t,e){let{target:n,replace:s,state:a,preventScrollReset:o,relative:l,viewTransition:d}=e===void 0?{}:e,h=z5(),p=sc(),x=kp(t,{relative:l});return A.useCallback(y=>{if(nA(y,n)){y.preventDefault();let b=s!==void 0?s:Wf(p)===Wf(x);h(t,{replace:b,state:a,preventScrollReset:o,relative:l,viewTransition:d})}},[p,h,x,s,a,n,t,o,l,d])}function pA(t,e){e===void 0&&(e={});let n=A.useContext(rA);n==null&&jn(!1);let{basename:s}=hA(by.useViewTransitionState),a=kp(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Xl(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=Xl(n.nextLocation.pathname,s)||n.nextLocation.pathname;return yy(a.pathname,l)!=null||yy(a.pathname,o)!=null}const mA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gk=(...t)=>t.filter((e,n,s)=>!!e&&s.indexOf(e)===n).join(" ");var gA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xA=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:l,...d},h)=>A.createElement("svg",{ref:h,...gA,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:Gk("lucide",a),...d},[...l.map(([p,x])=>A.createElement(p,x)),...Array.isArray(o)?o:[o]]));const Ke=(t,e)=>{const n=A.forwardRef(({className:s,...a},o)=>A.createElement(xA,{ref:o,iconNode:e,className:Gk(`lucide-${mA(t)}`,s),...a}));return n.displayName=`${t}`,n};const id=Ke("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const Mv=Ke("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);const Dv=Ke("ArrowUpFromLine",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const _y=Ke("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const Xk=Ke("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const Sx=Ke("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const wy=Ke("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Kk=Ke("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);const Uw=Ke("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const Iw=Ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Tp=Ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Yw=Ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Ww=Ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const yA=Ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Zk=Ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const vA=Ke("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const $w=Ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const qw=Ke("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);const bA=Ke("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);const Sy=Ke("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const Qk=Ke("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Jk=Ke("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);const _A=Ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Cv=Ke("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const Gw=Ke("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const qf=Ke("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const Xw=Ke("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const wA=Ke("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const jy=Ke("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const SA=Ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const jA=Ke("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const kA=Ke("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Ev=Ke("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const TA=Ke("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);const NA=Ke("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);const eT=Ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const MA=Ke("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const DA=Ke("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Av=Ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const ky=Ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const CA=Ke("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const tT=Ke("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const nT=Ke("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);const Ov=Ke("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Kw=Ke("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const EA=Ke("TreePalm",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]);const Zw=Ke("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Ty=Ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Wu=Ke("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Ny=Ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const ic=Ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const $i=Ke("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function jx(t){return u.jsx("svg",{viewBox:"0 0 741 741",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:u.jsx("path",{d:"m0-71v71h741v-142h-741zm0 882.5v70.5h741v-141h-741zm355.5-782.94c-3.3 0.83-8.48 2.92-11.5 4.62-3.02 1.71-6.85 4.12-8.5 5.36-1.65 1.23-4.89 4.66-7.2 7.6-2.31 2.95-5.52 8.06-7.13 11.36-1.61 3.3-5.03 13.2-7.6 22-2.57 8.8-5.52 18.7-6.55 22-1.03 3.3-4.63 15.9-8.01 28-3.37 12.1-6.97 24.7-7.98 28-1.02 3.3-3.5 11.63-5.51 18.5-2.01 6.88-6.14 19.93-9.18 29-3.04 9.08-8.34 22.35-11.76 29.5-3.43 7.15-8.26 16.15-10.75 20-2.48 3.85-7.22 10.38-10.53 14.5-3.31 4.13-9.12 10.22-12.91 13.55-3.79 3.32-8.69 7.4-10.89 9.06-2.2 1.65-7.6 5.29-12 8.09-4.4 2.79-18.35 10.37-31 16.84-12.65 6.47-25.7 13.66-29 15.97-3.3 2.32-7.61 6.19-9.58 8.6-1.98 2.41-4.74 6.42-6.14 8.89-1.41 2.48-3.38 6.98-4.4 10-1.29 3.85-1.83 8.35-1.81 15 0.03 7.34 0.58 11.09 2.42 16.5 1.39 4.06 4.31 9.5 6.95 12.97 2.51 3.28 7.09 8 10.19 10.5 3.09 2.49 13.44 8.52 23 13.4 9.55 4.88 21.19 10.92 25.87 13.43 4.68 2.51 11.87 6.81 16 9.55 4.12 2.75 10.65 7.55 14.5 10.67 3.85 3.12 9.93 8.82 13.5 12.66 3.57 3.84 9.4 11.22 12.95 16.4 3.55 5.18 8.58 13.7 11.17 18.92 2.59 5.23 5.69 11.98 6.9 15 1.2 3.03 3.67 9.78 5.49 15 1.82 5.23 5.56 16.7 8.31 25.5 2.76 8.8 7.55 24.78 10.65 35.5 3.11 10.73 7.84 26.93 10.51 36 2.68 9.08 6.93 23.81 9.45 32.75 2.51 8.94 5.64 18.39 6.95 21 1.31 2.61 4.09 7 6.19 9.75 2.09 2.75 5.63 6.67 7.87 8.72 2.23 2.04 6.54 5.05 9.56 6.69 3.02 1.64 8.43 3.73 12 4.66 4.88 1.26 8.62 1.53 15 1.06 6.56-0.49 10.1-1.36 15.5-3.85 3.85-1.77 9.25-4.88 12-6.92 2.75-2.03 6.56-5.65 8.47-8.03 1.91-2.38 4.98-7.25 6.82-10.83 1.84-3.57 4.02-8.97 4.84-12 0.82-3.02 2.79-10 4.36-15.5 1.58-5.5 5.36-18.55 8.4-29 3.05-10.45 8.5-29.12 12.12-41.5 3.61-12.37 7.45-25.54 8.53-29.25 1.08-3.71 4.71-14.51 8.07-24 3.36-9.49 8.51-22.2 11.45-28.25 2.93-6.05 7.22-13.92 9.53-17.5 2.3-3.57 6.76-9.65 9.91-13.5 3.15-3.85 8.94-10.04 12.86-13.75 3.93-3.71 10.4-9.04 14.39-11.84 3.99-2.8 11.3-7.48 16.25-10.4 4.95-2.92 17.77-9.76 28.5-15.19 10.73-5.44 21.52-11.27 24-12.96 2.48-1.69 6.71-5.5 9.41-8.47 2.7-2.96 6.38-8.54 8.18-12.39 1.8-3.85 3.75-10.04 4.34-13.75 0.73-4.63 0.76-8.94 0.07-13.75-0.55-3.85-1.92-9.59-3.05-12.75-1.12-3.16-4.05-8.56-6.5-12-2.45-3.44-6.81-8.02-9.7-10.17-2.89-2.16-16.05-9.52-29.25-16.35-13.2-6.84-28.09-15.08-33.1-18.33-5-3.24-11.08-7.21-13.5-8.81-2.42-1.59-8.67-7.22-13.9-12.5-5.23-5.27-12.25-13.64-15.6-18.59-3.36-4.95-8.02-12.6-10.35-17-2.34-4.4-5.36-10.7-6.71-14-1.36-3.3-4.63-11.85-7.28-19-2.66-7.15-6.72-19.75-9.03-28-2.32-8.25-5.29-18.37-6.6-22.5-1.31-4.12-5.28-17.62-8.81-30-3.53-12.37-8.1-28.12-10.15-35-2.06-6.87-4.52-15.42-5.48-19-0.96-3.57-3.15-9.87-4.87-14-1.72-4.12-5.34-10.42-8.03-14-3.25-4.3-7.22-8.01-11.75-10.97-3.76-2.46-9.32-5.31-12.34-6.33-3.02-1.03-9.1-2.04-13.5-2.26-5.13-0.26-10.16 0.14-14 1.12z"})})}async function Je(t,e="GET",n){const s=t.startsWith("/")?t.slice(1):t,a={method:e,headers:{Accept:"application/json","Content-Type":"application/json"}};n&&(e==="POST"||e==="DELETE")&&(a.body=JSON.stringify(n));const o=await fetch(s,a);if(!o.ok)throw new Error(`${t} -> ${o.status}`);return o.json()}const De={schedule:()=>Je("/api/schedule"),scheduleTodayWithHistory:()=>Je("/api/schedule/today_with_history"),status:()=>Je("/api/status"),health:()=>Je("/api/health"),version:()=>Je("/api/version"),horizon:()=>Je("/api/forecast/horizon"),config:()=>Je("/api/config"),configSave:t=>Je("/api/config/save","POST",t),configReset:()=>Je("/api/config/reset","POST"),setTheme:t=>Je("/api/theme","POST",t),haAverage:()=>Je("/api/ha/average"),haWaterToday:()=>Je("/api/ha/water_today"),haTest:t=>Je("/api/ha/test","POST",t),haEntities:()=>Je("/api/ha/entities"),haServices:()=>Je("/api/ha/services"),haEntityState:t=>Je(`/api/ha/entity/${t}`),learningStatus:()=>Je("/api/learning/status"),learningHistory:()=>Je("/api/learning/history"),learningDailyMetrics:()=>Je("/api/learning/daily_metrics"),learningRun:()=>Je("/api/learning/run","POST"),learningLoops:()=>Je("/api/learning/loops"),theme:()=>Je("/api/themes"),runPlanner:()=>Je("/api/run_planner","POST"),loadServerPlan:()=>Je("/api/db/current_schedule"),pushToDb:()=>Je("/api/db/push_current","POST"),resetToOptimal:()=>Je("/api/schedule/save","POST"),simulate:async t=>{const e=await fetch("api/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Simulation failed");return e.json()},getAdvice:async()=>{const t=await fetch("api/analyst/advice");if(!t.ok)throw new Error("Failed to fetch advice");return t.json()},analystRun:()=>Je("/api/analyst/run"),debug:()=>Je("/api/debug"),debugLogs:()=>Je("/api/debug/logs"),historySoc:(t="today")=>Je(`/api/history/soc?date=${t}`),forecastEval:()=>Je("/api/forecast/eval"),forecastDay:t=>Je(t?`/api/forecast/day?date=${t}`:"/api/forecast/day"),forecastRunEval:(t=7)=>Je("/api/forecast/run_eval","POST",{days_back:t}),forecastRunForward:(t=48)=>Je("/api/forecast/run_forward","POST",{horizon_hours:t}),schedulerStatus:()=>Je("/api/scheduler/status"),aurora:{dashboard:()=>Je("/api/aurora/dashboard"),briefing:t=>Je("/api/aurora/briefing","POST",t),toggleReflex:t=>Je("/api/aurora/config/toggle_reflex","POST",{enabled:t})},performanceData:(t=7)=>Je(`/api/performance/data?days=${t}`),executor:{status:()=>Je("/api/executor/status"),run:()=>Je("/api/executor/run","POST"),pause:()=>Je("/api/executor/pause","POST"),resume:()=>Je("/api/executor/resume","POST"),quickAction:{get:()=>Je("/api/executor/quick-action"),set:(t,e)=>Je("/api/executor/quick-action","POST",{type:t,duration_minutes:e}),clear:()=>Je("/api/executor/quick-action","DELETE")}},waterBoost:{status:()=>Je("/api/water/boost"),start:t=>Je("/api/water/boost","POST",{duration_minutes:t}),cancel:()=>Je("/api/water/boost","DELETE")},energyToday:()=>Je("/api/energy/today")},kx={socValue:t=>t.current_soc?.value,pvDays:t=>t.pv_forecast_days??t.pv_days_schedule??null,wxDays:t=>t.weather_forecast_days??null};function sT(){const[t,e]=A.useState("dark"),[n,s]=A.useState(!0),a=h=>h==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":h,o=h=>{const p=document.documentElement;h==="dark"?p.classList.add("dark"):p.classList.remove("dark")};A.useEffect(()=>{(async()=>{try{const x=(await De.config())?.ui?.theme_mode;if(x&&["light","dark","system"].includes(x))e(x),o(a(x));else{const y=localStorage.getItem("darkstar-theme");y&&["light","dark","system"].includes(y)?(e(y),o(a(y))):(e("dark"),o("dark"))}}catch{const x=localStorage.getItem("darkstar-theme")||"dark";e(x),o(a(x))}finally{s(!1)}})()},[]),A.useEffect(()=>{if(t!=="system")return;const h=window.matchMedia("(prefers-color-scheme: dark)"),p=x=>{o(x.matches?"dark":"light")};return h.addEventListener("change",p),()=>h.removeEventListener("change",p)},[t]);const l=async()=>{const h=t==="dark"?"light":"dark";e(h),o(h),localStorage.setItem("darkstar-theme",h);try{await De.configSave({ui:{theme_mode:h}})}catch(p){console.warn("[ThemeToggle] Failed to save theme to backend:",p)}};if(n)return u.jsx("div",{className:"h-12 w-12 rounded-2xl border border-line/70 bg-surface/80 flex items-center justify-center",children:u.jsx("div",{className:"h-5 w-5 rounded-full bg-muted/30 animate-pulse"})});const d=a(t);return u.jsxs("button",{type:"button",onClick:l,className:"group relative flex items-center justify-center w-12 h-12 rounded-2xl border border-line/70 bg-surface/80 hover:bg-surface2 transition",title:`Switch to ${d==="dark"?"light":"dark"} mode`,children:[d==="dark"?u.jsx(Ov,{className:"h-5 w-5 text-muted group-hover:text-accent transition-colors"}):u.jsx(jA,{className:"h-5 w-5 text-muted group-hover:text-accent transition-colors"}),u.jsx("span",{className:"absolute -right-2 top-1 rounded-full bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition z-50 whitespace-nowrap",children:d==="dark"?"Light mode":"Dark mode"})]})}const bu=({to:t,icon:e,label:n,onClick:s})=>{const a="group relative flex items-center justify-center w-12 h-12 rounded-2xl border border-line/70 bg-surface/80 hover:bg-surface2 transition",o="ring-2 ring-accent/50",l=u.jsxs(u.Fragment,{children:[u.jsx(e,{className:"h-5 w-5 text-muted group-hover:text-text"}),u.jsx("span",{className:"absolute -right-2 top-1 rounded-pill bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition z-50 whitespace-nowrap",children:n})]});return t?u.jsx(dA,{to:t,className:({isActive:d})=>`${a} ${d?o:""}`,title:n,children:l}):u.jsx("button",{onClick:s,className:a,title:n,children:l})};function AA(){const{pathname:t}=sc(),[e,n]=A.useState(!1),[s,a]=A.useState(null),[o,l]=A.useState("...");A.useEffect(()=>{const h=async()=>{try{await De.status(),a(!0)}catch{a(!1)}};h();const p=setInterval(h,3e4);return()=>clearInterval(p)},[]),A.useEffect(()=>{De.version().then(h=>l(h.version||"dev")).catch(()=>l("dev"))},[]);const d=()=>n(!1);return u.jsxs(u.Fragment,{children:[u.jsx("aside",{className:"hidden lg:block fixed left-6 top-6 bottom-6 z-50",children:u.jsxs("div",{className:"h-full w-16 rounded-2xl bg-surface shadow-float border border-line/60 flex flex-col items-center gap-3 p-2",children:[u.jsxs(Oo,{to:"/",className:"mt-1 mb-1 flex items-center justify-center group relative",children:[u.jsx("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-surface2 border border-line/60 overflow-hidden",children:u.jsx(jx,{className:"h-8 w-8 text-accent"})}),u.jsxs("span",{className:"absolute left-14 top-1/2 -translate-y-1/2 rounded-pill bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition whitespace-nowrap z-50 pointer-events-none",children:["darkstar v",o]})]}),u.jsx(bu,{to:"/",icon:qf,label:"Dash"}),u.jsx(bu,{to:"/executor",icon:Sy,label:"Executor"}),u.jsx(bu,{to:"/aurora",icon:wy,label:"Aurora"}),u.jsx(bu,{to:"/debug",icon:Uw,label:"Debug"}),u.jsx("div",{className:"mt-auto w-8 h-px bg-line/70"}),u.jsxs("div",{className:"py-2 flex flex-col items-center gap-2",children:[u.jsx("div",{className:`h-1.5 w-1.5 rounded-full transition-all duration-500 ${s===!0?"bg-good shadow-[0_0_8px_rgba(31,178,86,0.5)]":s===!1?"bg-bad":"bg-slate-700"}`,title:s===!0?"System Online":s===!1?"System Offline":"Connecting..."}),u.jsxs("span",{className:"text-[10px] text-muted/30 font-mono select-none tracking-widest whitespace-nowrap opacity-50 hover:opacity-100 transition",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:["darkstar v",o]})]}),u.jsx(sT,{}),u.jsx(bu,{to:"/settings",icon:ky,label:"Settings"})]})}),u.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-surface/95 border-b border-line/60 flex items-center justify-between px-4 py-2",children:[u.jsx("button",{type:"button","aria-label":"Open navigation",className:"inline-flex h-10 w-10 items-center justify-center rounded-xl border border-line/70 bg-surface2 text-muted hover:border-accent hover:text-accent",onClick:()=>n(!0),children:u.jsx(SA,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[u.jsx(jx,{className:"h-5 w-5 text-accent"}),u.jsxs("span",{className:"font-mono",children:["v",o]})]}),u.jsx("div",{className:"w-10"})]}),e&&u.jsxs("div",{className:"lg:hidden fixed inset-0 z-50 bg-[rgba(4,6,10,0.92)] backdrop-blur-sm",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-line/60",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-2xl bg-surface2 border border-line/60",children:u.jsx(jx,{className:"h-5 w-5 text-accent"})}),u.jsxs("span",{className:"text-muted font-mono",children:["darkstar v",o]})]}),u.jsx("button",{type:"button","aria-label":"Close navigation",className:"inline-flex h-9 w-9 items-center justify-center rounded-xl border border-line/70 bg-surface text-muted hover:border-accent hover:text-accent",onClick:d,children:u.jsx(ic,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",onClick:d,children:[u.jsxs(Oo,{to:"/",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(qf,{className:`h-6 w-6 ${t==="/"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Dash"})]}),u.jsxs(Oo,{to:"/executor",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/executor"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(Sy,{className:`h-6 w-6 ${t==="/executor"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Executor"})]}),u.jsxs(Oo,{to:"/aurora",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/aurora"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(wy,{className:`h-6 w-6 ${t==="/aurora"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Aurora"})]}),u.jsxs(Oo,{to:"/debug",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/debug"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(Uw,{className:`h-6 w-6 ${t==="/debug"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Debug"})]}),u.jsxs(Oo,{to:"/settings",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/settings"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(ky,{className:`h-6 w-6 ${t==="/settings"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Settings"})]})]})]})]})}class OA extends A.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("[ErrorBoundary] Caught error:",e),console.error("[ErrorBoundary] Component stack:",n.componentStack)}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-canvas flex items-center justify-center p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-surface border border-line rounded-2xl p-8 shadow-float text-center",children:[u.jsx("div",{className:"h-16 w-16 mx-auto mb-4 rounded-full bg-red-500/20 border border-red-500/40 flex items-center justify-center",children:u.jsx("svg",{className:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),u.jsx("h1",{className:"text-lg font-semibold text-text mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-sm text-muted mb-4",children:"The application encountered an unexpected error."}),this.state.error&&u.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30",children:u.jsx("code",{className:"text-xs text-red-400 break-all",children:this.state.error.message})}),u.jsx("button",{onClick:this.handleReload,className:"px-6 py-2.5 rounded-full bg-accent text-canvas font-medium text-sm hover:bg-accent2 transition-colors",children:"Reload Page"}),u.jsx("p",{className:"mt-4 text-xs text-muted/60",children:"If this keeps happening, check the browser console for details."})]})}):this.props.children}}const RA={card:"rounded-xl2 bg-surface shadow-float border border-line/60"};function Ge({children:t,className:e=""}){return u.jsx("div",{className:`${RA.card} ${e}`,children:t})}function wd(t){return t+.5|0}const Pr=(t,e,n)=>Math.max(Math.min(t,n),e);function Pu(t){return Pr(wd(t*2.55),0,255)}function Yr(t){return Pr(wd(t*255),0,255)}function Ea(t){return Pr(wd(t/2.55)/100,0,1)}function Qw(t){return Pr(wd(t*100),0,100)}const ni={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},My=[..."0123456789ABCDEF"],PA=t=>My[t&15],LA=t=>My[(t&240)>>4]+My[t&15],af=t=>(t&240)>>4===(t&15),zA=t=>af(t.r)&&af(t.g)&&af(t.b)&&af(t.a);function BA(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ni[t[1]]*17,g:255&ni[t[2]]*17,b:255&ni[t[3]]*17,a:e===5?ni[t[4]]*17:255}:(e===7||e===9)&&(n={r:ni[t[1]]<<4|ni[t[2]],g:ni[t[3]]<<4|ni[t[4]],b:ni[t[5]]<<4|ni[t[6]],a:e===9?ni[t[7]]<<4|ni[t[8]]:255})),n}const VA=(t,e)=>t<255?e(t):"";function FA(t){var e=zA(t)?PA:LA;return t?"#"+e(t.r)+e(t.g)+e(t.b)+VA(t.a,e):void 0}const HA=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function iT(t,e,n){const s=e*Math.min(n,1-n),a=(o,l=(o+t/30)%12)=>n-s*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function UA(t,e,n){const s=(a,o=(a+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function IA(t,e,n){const s=iT(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function YA(t,e,n,s,a){return t===a?(e-n)/s+(e<n?6:0):e===a?(n-t)/s+2:(t-e)/s+4}function Rv(t){const n=t.r/255,s=t.g/255,a=t.b/255,o=Math.max(n,s,a),l=Math.min(n,s,a),d=(o+l)/2;let h,p,x;return o!==l&&(x=o-l,p=d>.5?x/(2-o-l):x/(o+l),h=YA(n,s,a,x,o),h=h*60+.5),[h|0,p||0,d]}function Pv(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Yr)}function Lv(t,e,n){return Pv(iT,t,e,n)}function WA(t,e,n){return Pv(IA,t,e,n)}function $A(t,e,n){return Pv(UA,t,e,n)}function aT(t){return(t%360+360)%360}function qA(t){const e=HA.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Pu(+e[5]):Yr(+e[5]));const a=aT(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?s=WA(a,o,l):e[1]==="hsv"?s=$A(a,o,l):s=Lv(a,o,l),{r:s[0],g:s[1],b:s[2],a:n}}function GA(t,e){var n=Rv(t);n[0]=aT(n[0]+e),n=Lv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function XA(t){if(!t)return;const e=Rv(t),n=e[0],s=Qw(e[1]),a=Qw(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${Ea(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const Jw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},eS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function KA(){const t={},e=Object.keys(eS),n=Object.keys(Jw);let s,a,o,l,d;for(s=0;s<e.length;s++){for(l=d=e[s],a=0;a<n.length;a++)o=n[a],d=d.replace(o,Jw[o]);o=parseInt(eS[l],16),t[d]=[o>>16&255,o>>8&255,o&255]}return t}let rf;function ZA(t){rf||(rf=KA(),rf.transparent=[0,0,0,0]);const e=rf[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const QA=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function JA(t){const e=QA.exec(t);let n=255,s,a,o;if(e){if(e[7]!==s){const l=+e[7];n=e[8]?Pu(l):Pr(l*255,0,255)}return s=+e[1],a=+e[3],o=+e[5],s=255&(e[2]?Pu(s):Pr(s,0,255)),a=255&(e[4]?Pu(a):Pr(a,0,255)),o=255&(e[6]?Pu(o):Pr(o,0,255)),{r:s,g:a,b:o,a:n}}}function eO(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ea(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Tx=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,El=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function tO(t,e,n){const s=El(Ea(t.r)),a=El(Ea(t.g)),o=El(Ea(t.b));return{r:Yr(Tx(s+n*(El(Ea(e.r))-s))),g:Yr(Tx(a+n*(El(Ea(e.g))-a))),b:Yr(Tx(o+n*(El(Ea(e.b))-o))),a:t.a+n*(e.a-t.a)}}function of(t,e,n){if(t){let s=Rv(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Lv(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function rT(t,e){return t&&Object.assign(e||{},t)}function tS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Yr(t[3]))):(e=rT(t,{r:0,g:0,b:0,a:1}),e.a=Yr(e.a)),e}function nO(t){return t.charAt(0)==="r"?JA(t):qA(t)}class ad{constructor(e){if(e instanceof ad)return e;const n=typeof e;let s;n==="object"?s=tS(e):n==="string"&&(s=BA(e)||ZA(e)||nO(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=rT(this._rgb);return e&&(e.a=Ea(e.a)),e}set rgb(e){this._rgb=tS(e)}rgbString(){return this._valid?eO(this._rgb):void 0}hexString(){return this._valid?FA(this._rgb):void 0}hslString(){return this._valid?XA(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let o;const l=n===o?.5:n,d=2*l-1,h=s.a-a.a,p=((d*h===-1?d:(d+h)/(1+d*h))+1)/2;o=1-p,s.r=255&p*s.r+o*a.r+.5,s.g=255&p*s.g+o*a.g+.5,s.b=255&p*s.b+o*a.b+.5,s.a=l*s.a+(1-l)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=tO(this._rgb,e._rgb,n)),this}clone(){return new ad(this.rgb)}alpha(e){return this._rgb.a=Yr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=wd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return of(this._rgb,2,e),this}darken(e){return of(this._rgb,2,-e),this}saturate(e){return of(this._rgb,1,e),this}desaturate(e){return of(this._rgb,1,-e),this}rotate(e){return GA(this._rgb,e),this}}function Ta(){}const sO=(()=>{let t=0;return()=>t++})();function bt(t){return t==null}function dn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function jt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Sn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Vs(t,e){return Sn(t)?t:e}function rt(t,e){return typeof t>"u"?e:t}const iO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,oT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Zt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ht(t,e,n,s){let a,o,l;if(dn(t))for(o=t.length,a=0;a<o;a++)e.call(n,t[a],a);else if(jt(t))for(l=Object.keys(t),o=l.length,a=0;a<o;a++)e.call(n,t[l[a]],l[a])}function Gf(t,e){let n,s,a,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(a=t[n],o=e[n],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Xf(t){if(dn(t))return t.map(Xf);if(jt(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=Xf(t[n[a]]);return e}return t}function lT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function aO(t,e,n,s){if(!lT(t))return;const a=e[t],o=n[t];jt(a)&&jt(o)?rd(a,o,s):e[t]=Xf(o)}function rd(t,e,n){const s=dn(e)?e:[e],a=s.length;if(!jt(t))return t;n=n||{};const o=n.merger||aO;let l;for(let d=0;d<a;++d){if(l=s[d],!jt(l))continue;const h=Object.keys(l);for(let p=0,x=h.length;p<x;++p)o(h[p],t,l,n)}return t}function $u(t,e){return rd(t,e,{merger:rO})}function rO(t,e,n){if(!lT(t))return;const s=e[t],a=n[t];jt(s)&&jt(a)?$u(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Xf(a))}const nS={"":t=>t,x:t=>t.x,y:t=>t.y};function oO(t){const e=t.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function lO(t){const e=oO(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function qr(t,e){return(nS[e]||(nS[e]=lO(e)))(t)}function zv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const od=t=>typeof t<"u",Gr=t=>typeof t=="function",sS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function cO(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const At=Math.PI,sn=2*At,uO=sn+At,Kf=Number.POSITIVE_INFINITY,dO=At/180,Dn=At/2,No=At/4,iS=At*2/3,Lr=Math.log10,qi=Math.sign;function qu(t,e,n){return Math.abs(t-e)<n}function aS(t){const e=Math.round(t);t=qu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Lr(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function hO(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((a,o)=>a-o).pop(),e}function fO(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Kl(t){return!fO(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function pO(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function cT(t,e,n){let s,a,o;for(s=0,a=t.length;s<a;s++)o=t[s][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Ti(t){return t*(At/180)}function Bv(t){return t*(180/At)}function rS(t){if(!Sn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function uT(t,e){const n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s);let o=Math.atan2(s,n);return o<-.5*At&&(o+=sn),{angle:o,distance:a}}function Dy(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mO(t,e){return(t-e+uO)%sn-At}function rs(t){return(t%sn+sn)%sn}function ld(t,e,n,s){const a=rs(t),o=rs(e),l=rs(n),d=rs(o-a),h=rs(l-a),p=rs(a-o),x=rs(a-l);return a===o||a===l||s&&o===l||d>h&&p<x}function Yn(t,e,n){return Math.max(e,Math.min(n,t))}function gO(t){return Yn(t,-32768,32767)}function Aa(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Vv(t,e,n){n=n||(l=>t[l]<e);let s=t.length-1,a=0,o;for(;s-a>1;)o=a+s>>1,n(o)?a=o:s=o;return{lo:a,hi:s}}const Oa=(t,e,n,s)=>Vv(t,n,s?a=>{const o=t[a][e];return o<n||o===n&&t[a+1][e]===n}:a=>t[a][e]<n),xO=(t,e,n)=>Vv(t,n,s=>t[s][e]>=n);function yO(t,e,n){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>n;)a--;return s>0||a<t.length?t.slice(s,a):t}const dT=["push","pop","shift","splice","unshift"];function vO(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),dT.forEach(n=>{const s="_onData"+zv(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const l=a.apply(this,o);return t._chartjs.listeners.forEach(d=>{typeof d[s]=="function"&&d[s](...o)}),l}})})}function oS(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(dT.forEach(o=>{delete t[o]}),delete t._chartjs)}function hT(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const fT=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function pT(t,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,fT.call(window,()=>{s=!1,t.apply(e,n)}))}}function bO(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Fv=t=>t==="start"?"left":t==="end"?"right":"center",is=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,_O=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function mT(t,e,n){const s=e.length;let a=0,o=s;if(t._sorted){const{iScale:l,vScale:d,_parsed:h}=t,p=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,x=l.axis,{min:y,max:b,minDefined:j,maxDefined:T}=l.getUserBounds();if(j){if(a=Math.min(Oa(h,x,y).lo,n?s:Oa(e,x,l.getPixelForValue(y)).lo),p){const N=h.slice(0,a+1).reverse().findIndex(M=>!bt(M[d.axis]));a-=Math.max(0,N)}a=Yn(a,0,s-1)}if(T){let N=Math.max(Oa(h,l.axis,b,!0).hi+1,n?0:Oa(e,x,l.getPixelForValue(b),!0).hi+1);if(p){const M=h.slice(N-1).findIndex(R=>!bt(R[d.axis]));N+=Math.max(0,M)}o=Yn(N,a,s)-a}else o=s-a}return{start:a,count:o}}function gT(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,a={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=a,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,a),o}const lf=t=>t===0||t===1,lS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*sn/n)),cS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*sn/n)+1,Gu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Dn)+1,easeOutSine:t=>Math.sin(t*Dn),easeInOutSine:t=>-.5*(Math.cos(At*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>lf(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>lf(t)?t:lS(t,.075,.3),easeOutElastic:t=>lf(t)?t:cS(t,.075,.3),easeInOutElastic(t){return lf(t)?t:t<.5?.5*lS(t*2,.1125,.45):.5+.5*cS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Gu.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Gu.easeInBounce(t*2)*.5:Gu.easeOutBounce(t*2-1)*.5+.5};function Hv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function uS(t){return Hv(t)?t:new ad(t)}function Nx(t){return Hv(t)?t:new ad(t).saturate(.5).darken(.1).hexString()}const wO=["x","y","borderWidth","radius","tension"],SO=["color","borderColor","backgroundColor"];function jO(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:SO},numbers:{type:"number",properties:wO}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function kO(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const dS=new Map;function TO(t,e){e=e||{};const n=t+JSON.stringify(e);let s=dS.get(n);return s||(s=new Intl.NumberFormat(t,e),dS.set(n,s)),s}function Sd(t,e,n){return TO(e,n).format(t)}const xT={values(t){return dn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let a,o=t;if(n.length>1){const p=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(p<1e-4||p>1e15)&&(a="scientific"),o=NO(t,n)}const l=Lr(Math.abs(o)),d=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:a,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(h,this.options.ticks.format),Sd(t,s,h)},logarithmic(t,e,n){if(t===0)return"0";const s=n[e].significand||t/Math.pow(10,Math.floor(Lr(t)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?xT.numeric.call(this,t,e,n):""}};function NO(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Np={formatters:xT};function MO(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Np.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const qo=Object.create(null),Cy=Object.create(null);function Xu(t,e){if(!e)return t;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const o=n[s];t=t[o]||(t[o]=Object.create(null))}return t}function Mx(t,e,n){return typeof e=="string"?rd(Xu(t,e),n):rd(Xu(t,""),e)}class DO{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>Nx(a.backgroundColor),this.hoverBorderColor=(s,a)=>Nx(a.borderColor),this.hoverColor=(s,a)=>Nx(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Mx(this,e,n)}get(e){return Xu(this,e)}describe(e,n){return Mx(Cy,e,n)}override(e,n){return Mx(qo,e,n)}route(e,n,s,a){const o=Xu(this,e),l=Xu(this,s),d="_"+n;Object.defineProperties(o,{[d]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const h=this[d],p=l[a];return jt(h)?Object.assign({},p,h):rt(h,p)},set(h){this[d]=h}}})}apply(e){e.forEach(n=>n(this))}}var hn=new DO({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[jO,kO,MO]);function CO(t){return!t||bt(t.size)||bt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Zf(t,e,n,s,a){let o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),o>s&&(s=o),s}function EO(t,e,n,s){s=s||{};let a=s.data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(a=s.data={},o=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let l=0;const d=n.length;let h,p,x,y,b;for(h=0;h<d;h++)if(y=n[h],y!=null&&!dn(y))l=Zf(t,a,o,l,y);else if(dn(y))for(p=0,x=y.length;p<x;p++)b=y[p],b!=null&&!dn(b)&&(l=Zf(t,a,o,l,b));t.restore();const j=o.length/2;if(j>n.length){for(h=0;h<j;h++)delete a[o[h]];o.splice(0,j)}return l}function Mo(t,e,n){const s=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function hS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ey(t,e,n,s){yT(t,e,n,s,null)}function yT(t,e,n,s,a){let o,l,d,h,p,x,y,b;const j=e.pointStyle,T=e.rotation,N=e.radius;let M=(T||0)*dO;if(j&&typeof j=="object"&&(o=j.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(M),t.drawImage(j,-j.width/2,-j.height/2,j.width,j.height),t.restore();return}if(!(isNaN(N)||N<=0)){switch(t.beginPath(),j){default:a?t.ellipse(n,s,a/2,N,0,0,sn):t.arc(n,s,N,0,sn),t.closePath();break;case"triangle":x=a?a/2:N,t.moveTo(n+Math.sin(M)*x,s-Math.cos(M)*N),M+=iS,t.lineTo(n+Math.sin(M)*x,s-Math.cos(M)*N),M+=iS,t.lineTo(n+Math.sin(M)*x,s-Math.cos(M)*N),t.closePath();break;case"rectRounded":p=N*.516,h=N-p,l=Math.cos(M+No)*h,y=Math.cos(M+No)*(a?a/2-p:h),d=Math.sin(M+No)*h,b=Math.sin(M+No)*(a?a/2-p:h),t.arc(n-y,s-d,p,M-At,M-Dn),t.arc(n+b,s-l,p,M-Dn,M),t.arc(n+y,s+d,p,M,M+Dn),t.arc(n-b,s+l,p,M+Dn,M+At),t.closePath();break;case"rect":if(!T){h=Math.SQRT1_2*N,x=a?a/2:h,t.rect(n-x,s-h,2*x,2*h);break}M+=No;case"rectRot":y=Math.cos(M)*(a?a/2:N),l=Math.cos(M)*N,d=Math.sin(M)*N,b=Math.sin(M)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+b,s-l),t.lineTo(n+y,s+d),t.lineTo(n-b,s+l),t.closePath();break;case"crossRot":M+=No;case"cross":y=Math.cos(M)*(a?a/2:N),l=Math.cos(M)*N,d=Math.sin(M)*N,b=Math.sin(M)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+y,s+d),t.moveTo(n+b,s-l),t.lineTo(n-b,s+l);break;case"star":y=Math.cos(M)*(a?a/2:N),l=Math.cos(M)*N,d=Math.sin(M)*N,b=Math.sin(M)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+y,s+d),t.moveTo(n+b,s-l),t.lineTo(n-b,s+l),M+=No,y=Math.cos(M)*(a?a/2:N),l=Math.cos(M)*N,d=Math.sin(M)*N,b=Math.sin(M)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+y,s+d),t.moveTo(n+b,s-l),t.lineTo(n-b,s+l);break;case"line":l=a?a/2:Math.cos(M)*N,d=Math.sin(M)*N,t.moveTo(n-l,s-d),t.lineTo(n+l,s+d);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(M)*(a?a/2:N),s+Math.sin(M)*N);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ra(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Mp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Dp(t){t.restore()}function AO(t,e,n,s,a){if(!e)return t.lineTo(n.x,n.y);if(a==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else a==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function OO(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function RO(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),bt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function PO(t,e,n,s,a){if(a.strikethrough||a.underline){const o=t.measureText(s),l=e-o.actualBoundingBoxLeft,d=e+o.actualBoundingBoxRight,h=n-o.actualBoundingBoxAscent,p=n+o.actualBoundingBoxDescent,x=a.strikethrough?(h+p)/2:p;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,x),t.lineTo(d,x),t.stroke()}}function LO(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Go(t,e,n,s,a,o={}){const l=dn(e)?e:[e],d=o.strokeWidth>0&&o.strokeColor!=="";let h,p;for(t.save(),t.font=a.string,RO(t,o),h=0;h<l.length;++h)p=l[h],o.backdrop&&LO(t,o.backdrop),d&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),bt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(p,n,s,o.maxWidth)),t.fillText(p,n,s,o.maxWidth),PO(t,n,s,p,o),s+=Number(a.lineHeight);t.restore()}function cd(t,e){const{x:n,y:s,w:a,h:o,radius:l}=e;t.arc(n+l.topLeft,s+l.topLeft,l.topLeft,1.5*At,At,!0),t.lineTo(n,s+o-l.bottomLeft),t.arc(n+l.bottomLeft,s+o-l.bottomLeft,l.bottomLeft,At,Dn,!0),t.lineTo(n+a-l.bottomRight,s+o),t.arc(n+a-l.bottomRight,s+o-l.bottomRight,l.bottomRight,Dn,0,!0),t.lineTo(n+a,s+l.topRight),t.arc(n+a-l.topRight,s+l.topRight,l.topRight,0,-Dn,!0),t.lineTo(n+l.topLeft,s)}const zO=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,BO=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function VO(t,e){const n=(""+t).match(zO);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const FO=t=>+t||0;function Uv(t,e){const n={},s=jt(e),a=s?Object.keys(e):e,o=jt(t)?s?l=>rt(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)n[l]=FO(o(l));return n}function vT(t){return Uv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Io(t){return Uv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function us(t){const e=vT(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Vn(t,e){t=t||{},e=e||hn.font;let n=rt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=rt(t.style,e.style);s&&!(""+s).match(BO)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:rt(t.family,e.family),lineHeight:VO(rt(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:rt(t.weight,e.weight),string:""};return a.string=CO(a),a}function Lu(t,e,n,s){let a,o,l;for(a=0,o=t.length;a<o;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function HO(t,e,n){const{min:s,max:a}=t,o=oT(e,(a-s)/2),l=(d,h)=>n&&d===0?0:d+h;return{min:l(s,-Math.abs(o)),max:l(a,o)}}function Qr(t,e){return Object.assign(Object.create(t),e)}function Iv(t,e=[""],n,s,a=()=>t[0]){const o=n||t;typeof s>"u"&&(s=ST("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:a,override:d=>Iv([d,...t],e,o,s)};return new Proxy(l,{deleteProperty(d,h){return delete d[h],delete d._keys,delete t[0][h],!0},get(d,h){return _T(d,h,()=>XO(h,e,t,d))},getOwnPropertyDescriptor(d,h){return Reflect.getOwnPropertyDescriptor(d._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(d,h){return pS(d).includes(h)},ownKeys(d){return pS(d)},set(d,h,p){const x=d._storage||(d._storage=a());return d[h]=x[h]=p,delete d._keys,!0}})}function Zl(t,e,n,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:bT(t,s),setContext:o=>Zl(t,o,n,s),override:o=>Zl(t.override(o),e,n,s)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete t[l],!0},get(o,l,d){return _T(o,l,()=>IO(o,l,d))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(o,l,d){return t[l]=d,delete o[l],!0}})}function bT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:s,isScriptable:Gr(n)?n:()=>n,isIndexable:Gr(s)?s:()=>s}}const UO=(t,e)=>t?t+zv(e):e,Yv=(t,e)=>jt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _T(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function IO(t,e,n){const{_proxy:s,_context:a,_subProxy:o,_descriptors:l}=t;let d=s[e];return Gr(d)&&l.isScriptable(e)&&(d=YO(e,d,t,n)),dn(d)&&d.length&&(d=WO(e,d,t,l.isIndexable)),Yv(e,d)&&(d=Zl(d,a,o&&o[e],l)),d}function YO(t,e,n,s){const{_proxy:a,_context:o,_subProxy:l,_stack:d}=n;if(d.has(t))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+t);d.add(t);let h=e(o,l||s);return d.delete(t),Yv(t,h)&&(h=Wv(a._scopes,a,t,h)),h}function WO(t,e,n,s){const{_proxy:a,_context:o,_subProxy:l,_descriptors:d}=n;if(typeof o.index<"u"&&s(t))return e[o.index%e.length];if(jt(e[0])){const h=e,p=a._scopes.filter(x=>x!==h);e=[];for(const x of h){const y=Wv(p,a,t,x);e.push(Zl(y,o,l&&l[t],d))}}return e}function wT(t,e,n){return Gr(t)?t(e,n):t}const $O=(t,e)=>t===!0?e:typeof t=="string"?qr(e,t):void 0;function qO(t,e,n,s,a){for(const o of e){const l=$O(n,o);if(l){t.add(l);const d=wT(l._fallback,n,a);if(typeof d<"u"&&d!==n&&d!==s)return d}else if(l===!1&&typeof s<"u"&&n!==s)return null}return!1}function Wv(t,e,n,s){const a=e._rootScopes,o=wT(e._fallback,n,s),l=[...t,...a],d=new Set;d.add(s);let h=fS(d,l,n,o||n,s);return h===null||typeof o<"u"&&o!==n&&(h=fS(d,l,o,h,s),h===null)?!1:Iv(Array.from(d),[""],a,o,()=>GO(e,n,s))}function fS(t,e,n,s,a){for(;n;)n=qO(t,e,n,s,a);return n}function GO(t,e,n){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return dn(a)&&jt(n)?n:a||{}}function XO(t,e,n,s){let a;for(const o of e)if(a=ST(UO(o,t),n),typeof a<"u")return Yv(t,a)?Wv(n,s,t,a):a}function ST(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function pS(t){let e=t._keys;return e||(e=t._keys=KO(t._scopes)),e}function KO(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}function jT(t,e,n,s){const{iScale:a}=t,{key:o="r"}=this._parsing,l=new Array(s);let d,h,p,x;for(d=0,h=s;d<h;++d)p=d+n,x=e[p],l[d]={r:a.parse(qr(x,o),p)};return l}const ZO=Number.EPSILON||1e-14,Ql=(t,e)=>e<t.length&&!t[e].skip&&t[e],kT=t=>t==="x"?"y":"x";function QO(t,e,n,s){const a=t.skip?e:t,o=e,l=n.skip?e:n,d=Dy(o,a),h=Dy(l,o);let p=d/(d+h),x=h/(d+h);p=isNaN(p)?0:p,x=isNaN(x)?0:x;const y=s*p,b=s*x;return{previous:{x:o.x-y*(l.x-a.x),y:o.y-y*(l.y-a.y)},next:{x:o.x+b*(l.x-a.x),y:o.y+b*(l.y-a.y)}}}function JO(t,e,n){const s=t.length;let a,o,l,d,h,p=Ql(t,0);for(let x=0;x<s-1;++x)if(h=p,p=Ql(t,x+1),!(!h||!p)){if(qu(e[x],0,ZO)){n[x]=n[x+1]=0;continue}a=n[x]/e[x],o=n[x+1]/e[x],d=Math.pow(a,2)+Math.pow(o,2),!(d<=9)&&(l=3/Math.sqrt(d),n[x]=a*l*e[x],n[x+1]=o*l*e[x])}}function e3(t,e,n="x"){const s=kT(n),a=t.length;let o,l,d,h=Ql(t,0);for(let p=0;p<a;++p){if(l=d,d=h,h=Ql(t,p+1),!d)continue;const x=d[n],y=d[s];l&&(o=(x-l[n])/3,d[`cp1${n}`]=x-o,d[`cp1${s}`]=y-o*e[p]),h&&(o=(h[n]-x)/3,d[`cp2${n}`]=x+o,d[`cp2${s}`]=y+o*e[p])}}function t3(t,e="x"){const n=kT(e),s=t.length,a=Array(s).fill(0),o=Array(s);let l,d,h,p=Ql(t,0);for(l=0;l<s;++l)if(d=h,h=p,p=Ql(t,l+1),!!h){if(p){const x=p[e]-h[e];a[l]=x!==0?(p[n]-h[n])/x:0}o[l]=d?p?qi(a[l-1])!==qi(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}JO(t,a,o),e3(t,o,e)}function cf(t,e,n){return Math.max(Math.min(t,n),e)}function n3(t,e){let n,s,a,o,l,d=Ra(t[0],e);for(n=0,s=t.length;n<s;++n)l=o,o=d,d=n<s-1&&Ra(t[n+1],e),o&&(a=t[n],l&&(a.cp1x=cf(a.cp1x,e.left,e.right),a.cp1y=cf(a.cp1y,e.top,e.bottom)),d&&(a.cp2x=cf(a.cp2x,e.left,e.right),a.cp2y=cf(a.cp2y,e.top,e.bottom)))}function s3(t,e,n,s,a){let o,l,d,h;if(e.spanGaps&&(t=t.filter(p=>!p.skip)),e.cubicInterpolationMode==="monotone")t3(t,a);else{let p=s?t[t.length-1]:t[0];for(o=0,l=t.length;o<l;++o)d=t[o],h=QO(p,d,t[Math.min(o+1,l-(s?0:1))%l],e.tension),d.cp1x=h.previous.x,d.cp1y=h.previous.y,d.cp2x=h.next.x,d.cp2y=h.next.y,p=d}e.capBezierPoints&&n3(t,n)}function $v(){return typeof window<"u"&&typeof document<"u"}function qv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Qf(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Cp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function i3(t,e){return Cp(t).getPropertyValue(e)}const a3=["top","right","bottom","left"];function Yo(t,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const o=a3[a];s[o]=parseFloat(t[e+"-"+o+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const r3=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function o3(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:a,offsetY:o}=s;let l=!1,d,h;if(r3(a,o,t.target))d=a,h=o;else{const p=e.getBoundingClientRect();d=s.clientX-p.left,h=s.clientY-p.top,l=!0}return{x:d,y:h,box:l}}function Ro(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,a=Cp(n),o=a.boxSizing==="border-box",l=Yo(a,"padding"),d=Yo(a,"border","width"),{x:h,y:p,box:x}=o3(t,n),y=l.left+(x&&d.left),b=l.top+(x&&d.top);let{width:j,height:T}=e;return o&&(j-=l.width+d.width,T-=l.height+d.height),{x:Math.round((h-y)/j*n.width/s),y:Math.round((p-b)/T*n.height/s)}}function l3(t,e,n){let s,a;if(e===void 0||n===void 0){const o=t&&qv(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const l=o.getBoundingClientRect(),d=Cp(o),h=Yo(d,"border","width"),p=Yo(d,"padding");e=l.width-p.width-h.width,n=l.height-p.height-h.height,s=Qf(d.maxWidth,o,"clientWidth"),a=Qf(d.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:s||Kf,maxHeight:a||Kf}}const zr=t=>Math.round(t*10)/10;function c3(t,e,n,s){const a=Cp(t),o=Yo(a,"margin"),l=Qf(a.maxWidth,t,"clientWidth")||Kf,d=Qf(a.maxHeight,t,"clientHeight")||Kf,h=l3(t,e,n);let{width:p,height:x}=h;if(a.boxSizing==="content-box"){const b=Yo(a,"border","width"),j=Yo(a,"padding");p-=j.width+b.width,x-=j.height+b.height}return p=Math.max(0,p-o.width),x=Math.max(0,s?p/s:x-o.height),p=zr(Math.min(p,l,h.maxWidth)),x=zr(Math.min(x,d,h.maxHeight)),p&&!x&&(x=zr(p/2)),(e!==void 0||n!==void 0)&&s&&h.height&&x>h.height&&(x=h.height,p=zr(Math.floor(x*s))),{width:p,height:x}}function mS(t,e,n){const s=e||1,a=zr(t.height*s),o=zr(t.width*s);t.height=zr(t.height),t.width=zr(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||l.height!==a||l.width!==o?(t.currentDevicePixelRatio=s,l.height=a,l.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const u3=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};$v()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function gS(t,e){const n=i3(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Po(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function d3(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function h3(t,e,n,s){const a={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},l=Po(t,a,n),d=Po(a,o,n),h=Po(o,e,n),p=Po(l,d,n),x=Po(d,h,n);return Po(p,x,n)}const f3=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},p3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Yl(t,e,n){return t?f3(e,n):p3()}function TT(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function NT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function MT(t){return t==="angle"?{between:ld,compare:mO,normalize:rs}:{between:Aa,compare:(e,n)=>e-n,normalize:e=>e}}function xS({start:t,end:e,count:n,loop:s,style:a}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:a}}function m3(t,e,n){const{property:s,start:a,end:o}=n,{between:l,normalize:d}=MT(s),h=e.length;let{start:p,end:x,loop:y}=t,b,j;if(y){for(p+=h,x+=h,b=0,j=h;b<j&&l(d(e[p%h][s]),a,o);++b)p--,x--;p%=h,x%=h}return x<p&&(x+=h),{start:p,end:x,loop:y,style:t.style}}function DT(t,e,n){if(!n)return[t];const{property:s,start:a,end:o}=n,l=e.length,{compare:d,between:h,normalize:p}=MT(s),{start:x,end:y,loop:b,style:j}=m3(t,e,n),T=[];let N=!1,M=null,R,E,z;const U=()=>h(a,z,R)&&d(a,z)!==0,I=()=>d(o,R)===0||h(o,z,R),V=()=>N||U(),O=()=>!N||I();for(let q=x,Z=x;q<=y;++q)E=e[q%l],!E.skip&&(R=p(E[s]),R!==z&&(N=h(R,a,o),M===null&&V()&&(M=d(R,a)===0?q:Z),M!==null&&O()&&(T.push(xS({start:M,end:q,loop:b,count:l,style:j})),M=null),Z=q,z=R));return M!==null&&T.push(xS({start:M,end:y,loop:b,count:l,style:j})),T}function CT(t,e){const n=[],s=t.segments;for(let a=0;a<s.length;a++){const o=DT(s[a],t.points,e);o.length&&n.push(...o)}return n}function g3(t,e,n,s){let a=0,o=e-1;if(n&&!s)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,n&&(o+=a);o>a&&t[o%e].skip;)o--;return o%=e,{start:a,end:o}}function x3(t,e,n,s){const a=t.length,o=[];let l=e,d=t[e],h;for(h=e+1;h<=n;++h){const p=t[h%a];p.skip||p.stop?d.skip||(s=!1,o.push({start:e%a,end:(h-1)%a,loop:s}),e=l=p.stop?h:null):(l=h,d.skip&&(e=h)),d=p}return l!==null&&o.push({start:e%a,end:l%a,loop:s}),o}function y3(t,e){const n=t.points,s=t.options.spanGaps,a=n.length;if(!a)return[];const o=!!t._loop,{start:l,end:d}=g3(n,a,o,s);if(s===!0)return yS(t,[{start:l,end:d,loop:o}],n,e);const h=d<l?d+a:d,p=!!t._fullLoop&&l===0&&d===a-1;return yS(t,x3(n,l,h,p),n,e)}function yS(t,e,n,s){return!s||!s.setContext||!n?e:v3(t,e,n,s)}function v3(t,e,n,s){const a=t._chart.getContext(),o=vS(t.options),{_datasetIndex:l,options:{spanGaps:d}}=t,h=n.length,p=[];let x=o,y=e[0].start,b=y;function j(T,N,M,R){const E=d?-1:1;if(T!==N){for(T+=h;n[T%h].skip;)T-=E;for(;n[N%h].skip;)N+=E;T%h!==N%h&&(p.push({start:T%h,end:N%h,loop:M,style:R}),x=R,y=N%h)}}for(const T of e){y=d?y:T.start;let N=n[y%h],M;for(b=y+1;b<=T.end;b++){const R=n[b%h];M=vS(s.setContext(Qr(a,{type:"segment",p0:N,p1:R,p0DataIndex:(b-1)%h,p1DataIndex:b%h,datasetIndex:l}))),b3(M,x)&&j(y,b-1,T.loop,x),N=R,x=M}y<b-1&&j(y,b-1,T.loop,x)}return p}function vS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function b3(t,e){if(!e)return!1;const n=[],s=function(a,o){return Hv(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function uf(t,e,n){return t.options.clip?t[n]:e[n]}function _3(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:uf(n,e,"left"),right:uf(n,e,"right"),top:uf(s,e,"top"),bottom:uf(s,e,"bottom")}:e}function ET(t,e){const n=e._clip;if(n.disabled)return!1;const s=_3(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class w3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const o=n.listeners[a],l=n.duration;o.forEach(d=>d({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(s-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=fT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const o=s.items;let l=o.length-1,d=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>s.duration&&(s.duration=h._total),h.tick(e),d=!0):(o[l]=o[o.length-1],o.pop());d&&(a.draw(),this._notify(a,s,e,"progress")),o.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ma=new w3;const bS="transparent",S3={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=uS(t||bS),a=s.valid&&uS(e||bS);return a&&a.valid?a.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class j3{constructor(e,n,s,a){const o=n[s];a=Lu([e.to,a,o,e.from]);const l=Lu([e.from,o,a]);this._active=!0,this._fn=e.fn||S3[e.type||typeof l],this._easing=Gu[e.easing]||Gu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],o=s-this._start,l=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Lu([e.to,n,a,e.from]),this._from=Lu([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,o=this._from,l=this._loop,d=this._to;let h;if(this._active=o!==d&&(l||n<s),!this._active){this._target[a]=d,this._notify(!0);return}if(n<0){this._target[a]=o;return}h=n/s%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[a]=this._fn(o,d,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class AT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!jt(e))return;const n=Object.keys(hn.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!jt(o))return;const l={};for(const d of n)l[d]=o[d];(dn(o.properties)&&o.properties||[a]).forEach(d=>{(d===a||!s.has(d))&&s.set(d,l)})})}_animateOptions(e,n){const s=n.options,a=T3(e,s);if(!a)return[];const o=this._createAnimations(a,s);return s.$shared&&k3(e.options.$animations,s).then(()=>{e.options=s},()=>{}),o}_createAnimations(e,n){const s=this._properties,a=[],o=e.$animations||(e.$animations={}),l=Object.keys(n),d=Date.now();let h;for(h=l.length-1;h>=0;--h){const p=l[h];if(p.charAt(0)==="$")continue;if(p==="options"){a.push(...this._animateOptions(e,n));continue}const x=n[p];let y=o[p];const b=s.get(p);if(y)if(b&&y.active()){y.update(b,x,d);continue}else y.cancel();if(!b||!b.duration){e[p]=x;continue}o[p]=y=new j3(b,e,p,x),a.push(y)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Ma.add(this._chart,s),!0}}function k3(t,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=t[s[a]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function T3(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function _S(t,e){const n=t&&t.options||{},s=n.reverse,a=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:s?o:a,end:s?a:o}}function N3(t,e,n){if(n===!1)return!1;const s=_S(t,n),a=_S(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function M3(t){let e,n,s,a;return jt(t)?(e=t.top,n=t.right,s=t.bottom,a=t.left):e=n=s=a=t,{top:e,right:n,bottom:s,left:a,disabled:t===!1}}function OT(t,e){const n=[],s=t._getSortedDatasetMetas(e);let a,o;for(a=0,o=s.length;a<o;++a)n.push(s[a].index);return n}function wS(t,e,n,s={}){const a=t.keys,o=s.mode==="single";let l,d,h,p;if(e===null)return;let x=!1;for(l=0,d=a.length;l<d;++l){if(h=+a[l],h===n){if(x=!0,s.all)continue;break}p=t.values[h],Sn(p)&&(o||e===0||qi(e)===qi(p))&&(e+=p)}return!x&&!s.all?0:e}function D3(t,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",l=Object.keys(t),d=new Array(l.length);let h,p,x;for(h=0,p=l.length;h<p;++h)x=l[h],d[h]={[a]:x,[o]:t[x]};return d}function Dx(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function C3(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function E3(t){const{min:e,max:n,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function A3(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function SS(t,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const o=t[a.index];if(n&&o>0||!n&&o<0)return a.index}return null}function jS(t,e){const{chart:n,_cachedMeta:s}=t,a=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:d}=s,h=o.axis,p=l.axis,x=C3(o,l,s),y=e.length;let b;for(let j=0;j<y;++j){const T=e[j],{[h]:N,[p]:M}=T,R=T._stacks||(T._stacks={});b=R[p]=A3(a,x,N),b[d]=M,b._top=SS(b,l,!0,s.type),b._bottom=SS(b,l,!1,s.type);const E=b._visualValues||(b._visualValues={});E[d]=M}}function Cx(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function O3(t,e){return Qr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function R3(t,e,n){return Qr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _u(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const o=a._stacks;if(!o||o[s]===void 0||o[s][n]===void 0)return;delete o[s][n],o[s]._visualValues!==void 0&&o[s]._visualValues[n]!==void 0&&delete o[s]._visualValues[n]}}}const Ex=t=>t==="reset"||t==="none",kS=(t,e)=>e?t:Object.assign({},t),P3=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:OT(n,!0),values:null};class Jr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Dx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_u(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(y,b,j,T)=>y==="x"?b:y==="r"?T:j,o=n.xAxisID=rt(s.xAxisID,Cx(e,"x")),l=n.yAxisID=rt(s.yAxisID,Cx(e,"y")),d=n.rAxisID=rt(s.rAxisID,Cx(e,"r")),h=n.indexAxis,p=n.iAxisID=a(h,o,l,d),x=n.vAxisID=a(h,l,o,d);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(d),n.iScale=this.getScaleForId(p),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&oS(this._data,this),e._stacked&&_u(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(jt(n)){const a=this._cachedMeta;this._data=D3(n,a)}else if(s!==n){if(s){oS(s,this);const a=this._cachedMeta;_u(a),a._parsed=[]}n&&Object.isExtensible(n)&&vO(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const o=n._stacked;n._stacked=Dx(n.vScale,n),n.stack!==s.stack&&(a=!0,_u(n),n.stack=s.stack),this._resyncElements(e),(a||o!==n._stacked)&&(jS(this,n._parsed),n._stacked=Dx(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:o,_stacked:l}=s,d=o.axis;let h=e===0&&n===a.length?!0:s._sorted,p=e>0&&s._parsed[e-1],x,y,b;if(this._parsing===!1)s._parsed=a,s._sorted=!0,b=a;else{dn(a[e])?b=this.parseArrayData(s,a,e,n):jt(a[e])?b=this.parseObjectData(s,a,e,n):b=this.parsePrimitiveData(s,a,e,n);const j=()=>y[d]===null||p&&y[d]<p[d];for(x=0;x<n;++x)s._parsed[x+e]=y=b[x],h&&(j()&&(h=!1),p=y);s._sorted=h}l&&jS(this,b)}parsePrimitiveData(e,n,s,a){const{iScale:o,vScale:l}=e,d=o.axis,h=l.axis,p=o.getLabels(),x=o===l,y=new Array(a);let b,j,T;for(b=0,j=a;b<j;++b)T=b+s,y[b]={[d]:x||o.parse(p[T],T),[h]:l.parse(n[T],T)};return y}parseArrayData(e,n,s,a){const{xScale:o,yScale:l}=e,d=new Array(a);let h,p,x,y;for(h=0,p=a;h<p;++h)x=h+s,y=n[x],d[h]={x:o.parse(y[0],x),y:l.parse(y[1],x)};return d}parseObjectData(e,n,s,a){const{xScale:o,yScale:l}=e,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,p=new Array(a);let x,y,b,j;for(x=0,y=a;x<y;++x)b=x+s,j=n[b],p[x]={x:o.parse(qr(j,d),b),y:l.parse(qr(j,h),b)};return p}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,o=this._cachedMeta,l=n[e.axis],d={keys:OT(a,!0),values:n._stacks[e.axis]._visualValues};return wS(d,l,o.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const o=s[n.axis];let l=o===null?NaN:o;const d=a&&s._stacks[n.axis];a&&d&&(a.values=d,l=wS(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,o=s._sorted&&e===s.iScale,l=a.length,d=this._getOtherScale(e),h=P3(n,s,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:y}=E3(d);let b,j;function T(){j=a[b];const N=j[d.axis];return!Sn(j[e.axis])||x>N||y<N}for(b=0;b<l&&!(!T()&&(this.updateRangeFromParsed(p,e,j,h),o));++b);if(o){for(b=l-1;b>=0;--b)if(!T()){this.updateRangeFromParsed(p,e,j,h);break}}return p}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,o,l;for(a=0,o=n.length;a<o;++a)l=n[a][e.axis],Sn(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=M3(rt(this.options.clip,N3(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],o=n.chartArea,l=[],d=this._drawStart||0,h=this._drawCount||a.length-d,p=this.options.drawActiveElementsOnTop;let x;for(s.dataset&&s.dataset.draw(e,o,d,h),x=d;x<d+h;++x){const y=a[x];y.hidden||(y.active&&p?l.push(y):y.draw(e,o))}for(x=0;x<l.length;++x)l[x].draw(e,o)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=R3(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=O3(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",o=this._cachedDataOpts,l=e+"-"+n,d=o[l],h=this.enableOptionSharing&&od(s);if(d)return kS(d,h);const p=this.chart.config,x=p.datasetElementScopeKeys(this._type,e),y=a?[`${e}Hover`,"hover",e,""]:[e,""],b=p.getOptionScopes(this.getDataset(),x),j=Object.keys(hn.elements[e]),T=()=>this.getContext(s,a,n),N=p.resolveNamedOptions(b,j,T,y);return N.$shared&&(N.$shared=h,o[l]=Object.freeze(kS(N,h))),N}_resolveAnimations(e,n,s){const a=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,d=o[l];if(d)return d;let h;if(a.options.animation!==!1){const x=this.chart.config,y=x.datasetAnimationScopeKeys(this._type,n),b=x.getOptionScopes(this.getDataset(),y);h=x.createResolver(b,this.getContext(e,s,n))}const p=new AT(a,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(p)),p}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Ex(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,o=this.getSharedOptions(s),l=this.includeOptions(n,o)||o!==a;return this.updateSharedOptions(o,n,s),{sharedOptions:o,includeOptions:l}}updateElement(e,n,s,a){Ex(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!Ex(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const o=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[d,h,p]of this._syncList)this[d](h,p);this._syncList=[];const a=s.length,o=n.length,l=Math.min(o,a);l&&this.parse(0,l),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,n,s=!0){const a=this._cachedMeta,o=a.data,l=e+n;let d;const h=p=>{for(p.length+=n,d=p.length-1;d>=l;d--)p[d]=p[d-n]};for(h(o),d=e;d<l;++d)o[d]=new this.dataElementType;this._parsing&&h(a._parsed),this.parse(e,n),s&&this.updateElements(o,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&_u(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function L3(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,o=n.length;a<o;a++)s=s.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=hT(s.sort((a,o)=>a-o))}return t._cache.$bar}function z3(t){const e=t.iScale,n=L3(e,t.type);let s=e._length,a,o,l,d;const h=()=>{l===32767||l===-32768||(od(d)&&(s=Math.min(s,Math.abs(l-d)||s)),d=l)};for(a=0,o=n.length;a<o;++a)l=e.getPixelForValue(n[a]),h();for(d=void 0,a=0,o=e.ticks.length;a<o;++a)l=e.getPixelForTick(a),h();return s}function B3(t,e,n,s){const a=n.barThickness;let o,l;return bt(a)?(o=e.min*n.categoryPercentage,l=n.barPercentage):(o=a*s,l=1),{chunk:o/s,ratio:l,start:e.pixels[t]-o/2}}function V3(t,e,n,s){const a=e.pixels,o=a[t];let l=t>0?a[t-1]:null,d=t<a.length-1?a[t+1]:null;const h=n.categoryPercentage;l===null&&(l=o-(d===null?e.end-e.start:d-o)),d===null&&(d=o+o-l);const p=o-(o-Math.min(l,d))/2*h;return{chunk:Math.abs(d-l)/2*h/s,ratio:n.barPercentage,start:p}}function F3(t,e,n,s){const a=n.parse(t[0],s),o=n.parse(t[1],s),l=Math.min(a,o),d=Math.max(a,o);let h=l,p=d;Math.abs(l)>Math.abs(d)&&(h=d,p=l),e[n.axis]=p,e._custom={barStart:h,barEnd:p,start:a,end:o,min:l,max:d}}function RT(t,e,n,s){return dn(t)?F3(t,e,n,s):e[n.axis]=n.parse(t,s),e}function TS(t,e,n,s){const a=t.iScale,o=t.vScale,l=a.getLabels(),d=a===o,h=[];let p,x,y,b;for(p=n,x=n+s;p<x;++p)b=e[p],y={},y[a.axis]=d||a.parse(l[p],p),h.push(RT(b,y,o,p));return h}function Ax(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function H3(t,e,n){return t!==0?qi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function U3(t){let e,n,s,a,o;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(a="end",o="start"):(a="start",o="end"),{start:n,end:s,reverse:e,top:a,bottom:o}}function I3(t,e,n,s){let a=e.borderSkipped;const o={};if(!a){t.borderSkipped=o;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:d,reverse:h,top:p,bottom:x}=U3(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?a=p:(n._bottom||0)===s?a=x:(o[NS(x,l,d,h)]=!0,a=p)),o[NS(a,l,d,h)]=!0,t.borderSkipped=o}function NS(t,e,n,s){return s?(t=Y3(t,e,n),t=MS(t,n,e)):t=MS(t,e,n),t}function Y3(t,e,n){return t===e?n:t===n?e:t}function MS(t,e,n){return t==="start"?e:t==="end"?n:t}function W3(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class PT extends Jr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,a){return TS(e,n,s,a)}parseArrayData(e,n,s,a){return TS(e,n,s,a)}parseObjectData(e,n,s,a){const{iScale:o,vScale:l}=e,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,p=o.axis==="x"?d:h,x=l.axis==="x"?d:h,y=[];let b,j,T,N;for(b=s,j=s+a;b<j;++b)N=n[b],T={},T[o.axis]=o.parse(qr(N,p),b),y.push(RT(qr(N,x),T,l,b));return y}updateRangeFromParsed(e,n,s,a){super.updateRangeFromParsed(e,n,s,a);const o=s._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:a}=n,o=this.getParsed(e),l=o._custom,d=Ax(l)?"["+l.start+", "+l.end+"]":""+a.getLabelForValue(o[a.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,a){const o=a==="reset",{index:l,_cachedMeta:{vScale:d}}=this,h=d.getBasePixel(),p=d.isHorizontal(),x=this._getRuler(),{sharedOptions:y,includeOptions:b}=this._getSharedOptions(n,a);for(let j=n;j<n+s;j++){const T=this.getParsed(j),N=o||bt(T[d.axis])?{base:h,head:h}:this._calculateBarValuePixels(j),M=this._calculateBarIndexPixels(j,x),R=(T._stacks||{})[d.axis],E={horizontal:p,base:N.base,enableBorderRadius:!R||Ax(T._custom)||l===R._top||l===R._bottom,x:p?N.head:M.center,y:p?M.center:N.head,height:p?M.size:Math.abs(N.size),width:p?Math.abs(N.size):M.size};b&&(E.options=y||this.resolveDataElementOptions(j,e[j].active?"active":a));const z=E.options||e[j].options;I3(E,z,R,l),W3(E,z,x.ratio),this.updateElement(e[j],j,E,a)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),o=s.options.stacked,l=[],d=this._cachedMeta.controller.getParsed(n),h=d&&d[s.axis],p=x=>{const y=x._parsed.find(j=>j[s.axis]===h),b=y&&y[x.vScale.axis];if(bt(b)||isNaN(b))return!0};for(const x of a)if(!(n!==void 0&&p(x))&&((o===!1||l.indexOf(x.stack)===-1||o===void 0&&x.stack===void 0)&&l.push(x.stack),x.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[rt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const a=this._getStacks(e,s),o=n!==void 0?a.indexOf(n):-1;return o===-1?a.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,a=[];let o,l;for(o=0,l=n.data.length;o<l;++o)a.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const d=e.barThickness;return{min:d||z3(n),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:d?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:a},options:{base:o,minBarLength:l}}=this,d=o||0,h=this.getParsed(e),p=h._custom,x=Ax(p);let y=h[n.axis],b=0,j=s?this.applyStack(n,h,s):y,T,N;j!==y&&(b=j-y,j=y),x&&(y=p.barStart,j=p.barEnd-p.barStart,y!==0&&qi(y)!==qi(p.barEnd)&&(b=0),b+=y);const M=!bt(o)&&!x?o:b;let R=n.getPixelForValue(M);if(this.chart.getDataVisibility(e)?T=n.getPixelForValue(b+j):T=R,N=T-R,Math.abs(N)<l){N=H3(N,n,d)*l,y===d&&(R-=N/2);const E=n.getPixelForDecimal(0),z=n.getPixelForDecimal(1),U=Math.min(E,z),I=Math.max(E,z);R=Math.max(Math.min(R,I),U),T=R+N,s&&!x&&(h._stacks[n.axis]._visualValues[a]=n.getValueForPixel(T)-n.getValueForPixel(R))}if(R===n.getPixelForValue(d)){const E=qi(N)*n.getLineWidthForValue(d)/2;R+=E,N-=E}return{size:N,base:R,head:T,center:T+N/2}}_calculateBarIndexPixels(e,n){const s=n.scale,a=this.options,o=a.skipNull,l=rt(a.maxBarThickness,1/0);let d,h;const p=this._getAxisCount();if(n.grouped){const x=o?this._getStackCount(e):n.stackCount,y=a.barThickness==="flex"?V3(e,n,a,x*p):B3(e,n,a,x*p),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,j=this._getAxis().indexOf(rt(b,this.getFirstScaleIdForIndexAxis())),T=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+j;d=y.start+y.chunk*T+y.chunk/2,h=Math.min(l,y.chunk*y.ratio)}else d=s.getPixelForValue(this.getParsed(e)[s.axis],e),h=Math.min(l,n.min*n.ratio);return{base:d-h/2,head:d+h/2,center:d,size:h}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,a=s.length;let o=0;for(;o<a;++o)this.getParsed(o)[n.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}class $3 extends Jr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,a){const o=super.parsePrimitiveData(e,n,s,a);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+s).radius;return o}parseArrayData(e,n,s,a){const o=super.parseArrayData(e,n,s,a);for(let l=0;l<o.length;l++){const d=n[s+l];o[l]._custom=rt(d[2],this.resolveDataElementOptions(l+s).radius)}return o}parseObjectData(e,n,s,a){const o=super.parseObjectData(e,n,s,a);for(let l=0;l<o.length;l++){const d=n[s+l];o[l]._custom=rt(d&&d.r&&+d.r,this.resolveDataElementOptions(l+s).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:a,yScale:o}=n,l=this.getParsed(e),d=a.getLabelForValue(l.x),h=o.getLabelForValue(l.y),p=l._custom;return{label:s[e]||"",value:"("+d+", "+h+(p?", "+p:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,a){const o=a==="reset",{iScale:l,vScale:d}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,a),x=l.axis,y=d.axis;for(let b=n;b<n+s;b++){const j=e[b],T=!o&&this.getParsed(b),N={},M=N[x]=o?l.getPixelForDecimal(.5):l.getPixelForValue(T[x]),R=N[y]=o?d.getBasePixel():d.getPixelForValue(T[y]);N.skip=isNaN(M)||isNaN(R),p&&(N.options=h||this.resolveDataElementOptions(b,j.active?"active":a),o&&(N.options.radius=0)),this.updateElement(j,b,N,a)}}resolveDataElementOptions(e,n){const s=this.getParsed(e);let a=super.resolveDataElementOptions(e,n);a.$shared&&(a=Object.assign({},a,{$shared:!1}));const o=a.radius;return n!=="active"&&(a.radius=0),a.radius+=rt(s&&s._custom,o),a}}function q3(t,e,n){let s=1,a=1,o=0,l=0;if(e<sn){const d=t,h=d+e,p=Math.cos(d),x=Math.sin(d),y=Math.cos(h),b=Math.sin(h),j=(z,U,I)=>ld(z,d,h,!0)?1:Math.max(U,U*n,I,I*n),T=(z,U,I)=>ld(z,d,h,!0)?-1:Math.min(U,U*n,I,I*n),N=j(0,p,y),M=j(Dn,x,b),R=T(At,p,y),E=T(At+Dn,x,b);s=(N-R)/2,a=(M-E)/2,o=-(N+R)/2,l=-(M+E)/2}return{ratioX:s,ratioY:a,offsetX:o,offsetY:l}}class Gv extends Jr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:a,color:o,useBorderRadius:l,borderRadius:d}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((h,p)=>{const y=e.getDatasetMeta(0).controller.getStyle(p);return{text:h,fillStyle:y.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(p),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:a,pointStyle:s,borderRadius:l&&(d||y.borderRadius),index:p}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let o=h=>+s[h];if(jt(s[e])){const{key:h="value"}=this._parsing;o=p=>+qr(s[p],h)}let l,d;for(l=e,d=e+n;l<d;++l)a._parsed[l]=o(l)}}_getRotation(){return Ti(this.options.rotation-90)}_getCircumference(){return Ti(this.options.circumference)}_getRotationExtents(){let e=sn,n=-sn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,o=a._getRotation(),l=a._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,a=this._cachedMeta,o=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,d=Math.max((Math.min(s.width,s.height)-l)/2,0),h=Math.min(iO(this.options.cutout,d),1),p=this._getRingWeight(this.index),{circumference:x,rotation:y}=this._getRotationExtents(),{ratioX:b,ratioY:j,offsetX:T,offsetY:N}=q3(y,x,h),M=(s.width-l)/b,R=(s.height-l)/j,E=Math.max(Math.min(M,R)/2,0),z=oT(this.options.radius,E),U=Math.max(z*h,0),I=(z-U)/this._getVisibleDatasetWeightTotal();this.offsetX=T*z,this.offsetY=N*z,a.total=this.calculateTotal(),this.outerRadius=z-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*p,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const s=this.options,a=this._cachedMeta,o=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/sn)}updateElements(e,n,s,a){const o=a==="reset",l=this.chart,d=l.chartArea,p=l.options.animation,x=(d.left+d.right)/2,y=(d.top+d.bottom)/2,b=o&&p.animateScale,j=b?0:this.innerRadius,T=b?0:this.outerRadius,{sharedOptions:N,includeOptions:M}=this._getSharedOptions(n,a);let R=this._getRotation(),E;for(E=0;E<n;++E)R+=this._circumference(E,o);for(E=n;E<n+s;++E){const z=this._circumference(E,o),U=e[E],I={x:x+this.offsetX,y:y+this.offsetY,startAngle:R,endAngle:R+z,circumference:z,outerRadius:T,innerRadius:j};M&&(I.options=N||this.resolveDataElementOptions(E,U.active?"active":a)),R+=z,this.updateElement(U,E,I,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,a;for(a=0;a<n.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?sn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],o=Sd(n._parsed[e],s.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const s=this.chart;let a,o,l,d,h;if(!e){for(a=0,o=s.data.datasets.length;a<o;++a)if(s.isDatasetVisible(a)){l=s.getDatasetMeta(a),e=l.data,d=l.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)h=d.resolveDataElementOptions(a),h.borderAlign!=="inner"&&(n=Math.max(n,h.borderWidth||0,h.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,a=e.length;s<a;++s){const o=this.resolveDataElementOptions(s);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(rt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class LT extends Jr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:a=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:d,count:h}=mT(n,a,l);this._drawStart=d,this._drawCount=h,gT(n)&&(d=0,h=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=a;const p=this.resolveDatasetElementOptions(e);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:p},e),this.updateElements(a,d,h,e)}updateElements(e,n,s,a){const o=a==="reset",{iScale:l,vScale:d,_stacked:h,_dataset:p}=this._cachedMeta,{sharedOptions:x,includeOptions:y}=this._getSharedOptions(n,a),b=l.axis,j=d.axis,{spanGaps:T,segment:N}=this.options,M=Kl(T)?T:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||a==="none",E=n+s,z=e.length;let U=n>0&&this.getParsed(n-1);for(let I=0;I<z;++I){const V=e[I],O=R?V:{};if(I<n||I>=E){O.skip=!0;continue}const q=this.getParsed(I),Z=bt(q[j]),re=O[b]=l.getPixelForValue(q[b],I),J=O[j]=o||Z?d.getBasePixel():d.getPixelForValue(h?this.applyStack(d,q,h):q[j],I);O.skip=isNaN(re)||isNaN(J)||Z,O.stop=I>0&&Math.abs(q[b]-U[b])>M,N&&(O.parsed=q,O.raw=p.data[I]),y&&(O.options=x||this.resolveDataElementOptions(I,V.active?"active":a)),R||this.updateElement(V,I,O,a),U=q}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const o=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class zT extends Jr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:a}}=e.legend.options;return n.labels.map((o,l)=>{const h=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:a,lineWidth:h.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],o=Sd(n._parsed[e].r,s.options.locale);return{label:a[e]||"",value:o}}parseObjectData(e,n,s,a){return jT.bind(this)(e,n,s,a)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,a)=>{const o=this.getParsed(a).r;!isNaN(o)&&this.chart.getDataVisibility(a)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,s=e.options,a=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(a/2,0),l=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),d=(o-l)/e.getVisibleDatasetCount();this.outerRadius=o-d*this.index,this.innerRadius=this.outerRadius-d}updateElements(e,n,s,a){const o=a==="reset",l=this.chart,h=l.options.animation,p=this._cachedMeta.rScale,x=p.xCenter,y=p.yCenter,b=p.getIndexAngle(0)-.5*At;let j=b,T;const N=360/this.countVisibleElements();for(T=0;T<n;++T)j+=this._computeAngle(T,a,N);for(T=n;T<n+s;T++){const M=e[T];let R=j,E=j+this._computeAngle(T,a,N),z=l.getDataVisibility(T)?p.getDistanceFromCenterForValue(this.getParsed(T).r):0;j=E,o&&(h.animateScale&&(z=0),h.animateRotate&&(R=E=b));const U={x,y,innerRadius:0,outerRadius:z,startAngle:R,endAngle:E,options:this.resolveDataElementOptions(T,M.active?"active":a)};this.updateElement(M,T,U,a)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((s,a)=>{!isNaN(this.getParsed(a).r)&&this.chart.getDataVisibility(a)&&n++}),n}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?Ti(this.resolveDataElementOptions(e,n).angle||s):0}}class G3 extends Gv{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class BT extends Jr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,a){return jT.bind(this)(e,n,s,a)}update(e){const n=this._cachedMeta,s=n.dataset,a=n.data||[],o=n.iScale.getLabels();if(s.points=a,e!=="resize"){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0);const d={_loop:!0,_fullLoop:o.length===a.length,options:l};this.updateElement(s,void 0,d,e)}this.updateElements(a,0,a.length,e)}updateElements(e,n,s,a){const o=this._cachedMeta.rScale,l=a==="reset";for(let d=n;d<n+s;d++){const h=e[d],p=this.resolveDataElementOptions(d,h.active?"active":a),x=o.getPointPositionForValue(d,this.getParsed(d).r),y=l?o.xCenter:x.x,b=l?o.yCenter:x.y,j={x:y,y:b,angle:x.angle,skip:isNaN(y)||isNaN(b),options:p};this.updateElement(h,d,j,a)}}}class X3 extends Jr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:a,yScale:o}=n,l=this.getParsed(e),d=a.getLabelForValue(l.x),h=o.getLabelForValue(l.y);return{label:s[e]||"",value:"("+d+", "+h+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,a=this.chart._animationsDisabled;let{start:o,count:l}=mT(n,s,a);if(this._drawStart=o,this._drawCount=l,gT(n)&&(o=0,l=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:d,_dataset:h}=n;d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!h._decimated,d.points=s;const p=this.resolveDatasetElementOptions(e);p.segment=this.options.segment,this.updateElement(d,void 0,{animated:!a,options:p},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,a){const o=a==="reset",{iScale:l,vScale:d,_stacked:h,_dataset:p}=this._cachedMeta,x=this.resolveDataElementOptions(n,a),y=this.getSharedOptions(x),b=this.includeOptions(a,y),j=l.axis,T=d.axis,{spanGaps:N,segment:M}=this.options,R=Kl(N)?N:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||a==="none";let z=n>0&&this.getParsed(n-1);for(let U=n;U<n+s;++U){const I=e[U],V=this.getParsed(U),O=E?I:{},q=bt(V[T]),Z=O[j]=l.getPixelForValue(V[j],U),re=O[T]=o||q?d.getBasePixel():d.getPixelForValue(h?this.applyStack(d,V,h):V[T],U);O.skip=isNaN(Z)||isNaN(re)||q,O.stop=U>0&&Math.abs(V[j]-z[j])>R,M&&(O.parsed=V,O.raw=p.data[U]),b&&(O.options=y||this.resolveDataElementOptions(U,I.active?"active":a)),E||this.updateElement(I,U,O,a),z=V}this.updateSharedOptions(y,a,x)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let d=0;for(let h=n.length-1;h>=0;--h)d=Math.max(d,n[h].size(this.resolveDataElementOptions(h))/2);return d>0&&d}const s=e.dataset,a=s.options&&s.options.borderWidth||0;if(!n.length)return a;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(a,o,l)/2}}var K3=Object.freeze({__proto__:null,BarController:PT,BubbleController:$3,DoughnutController:Gv,LineController:LT,PieController:G3,PolarAreaController:zT,RadarController:BT,ScatterController:X3});function Do(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Xv{static override(e){Object.assign(Xv.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Do()}parse(){return Do()}format(){return Do()}add(){return Do()}diff(){return Do()}startOf(){return Do()}endOf(){return Do()}}var VT={_date:Xv};function Z3(t,e,n,s){const{controller:a,data:o,_sorted:l}=t,d=a._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&l&&o.length){const p=d._reversePixels?xO:Oa;if(s){if(a._sharedOptions){const x=o[0],y=typeof x.getRange=="function"&&x.getRange(e);if(y){const b=p(o,e,n-y),j=p(o,e,n+y);return{lo:b.lo,hi:j.hi}}}}else{const x=p(o,e,n);if(h){const{vScale:y}=a._cachedMeta,{_parsed:b}=t,j=b.slice(0,x.lo+1).reverse().findIndex(N=>!bt(N[y.axis]));x.lo-=Math.max(0,j);const T=b.slice(x.hi).findIndex(N=>!bt(N[y.axis]));x.hi+=Math.max(0,T)}return x}}return{lo:0,hi:o.length-1}}function Ep(t,e,n,s,a){const o=t.getSortedVisibleDatasetMetas(),l=n[e];for(let d=0,h=o.length;d<h;++d){const{index:p,data:x}=o[d],{lo:y,hi:b}=Z3(o[d],e,l,a);for(let j=y;j<=b;++j){const T=x[j];T.skip||s(T,p,j)}}}function Q3(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,a){const o=e?Math.abs(s.x-a.x):0,l=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function Ox(t,e,n,s,a){const o=[];return!a&&!t.isPointInArea(e)||Ep(t,n,e,function(d,h,p){!a&&!Ra(d,t.chartArea,0)||d.inRange(e.x,e.y,s)&&o.push({element:d,datasetIndex:h,index:p})},!0),o}function J3(t,e,n,s){let a=[];function o(l,d,h){const{startAngle:p,endAngle:x}=l.getProps(["startAngle","endAngle"],s),{angle:y}=uT(l,{x:e.x,y:e.y});ld(y,p,x)&&a.push({element:l,datasetIndex:d,index:h})}return Ep(t,n,e,o),a}function e4(t,e,n,s,a,o){let l=[];const d=Q3(n);let h=Number.POSITIVE_INFINITY;function p(x,y,b){const j=x.inRange(e.x,e.y,a);if(s&&!j)return;const T=x.getCenterPoint(a);if(!(!!o||t.isPointInArea(T))&&!j)return;const M=d(e,T);M<h?(l=[{element:x,datasetIndex:y,index:b}],h=M):M===h&&l.push({element:x,datasetIndex:y,index:b})}return Ep(t,n,e,p),l}function Rx(t,e,n,s,a,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!s?J3(t,e,n,a):e4(t,e,n,s,a,o)}function DS(t,e,n,s,a){const o=[],l=n==="x"?"inXRange":"inYRange";let d=!1;return Ep(t,n,e,(h,p,x)=>{h[l]&&h[l](e[n],a)&&(o.push({element:h,datasetIndex:p,index:x}),d=d||h.inRange(e.x,e.y,a))}),s&&!d?[]:o}var t4={modes:{index(t,e,n,s){const a=Ro(e,t),o=n.axis||"x",l=n.includeInvisible||!1,d=n.intersect?Ox(t,a,o,s,l):Rx(t,a,o,!1,s,l),h=[];return d.length?(t.getSortedVisibleDatasetMetas().forEach(p=>{const x=d[0].index,y=p.data[x];y&&!y.skip&&h.push({element:y,datasetIndex:p.index,index:x})}),h):[]},dataset(t,e,n,s){const a=Ro(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;let d=n.intersect?Ox(t,a,o,s,l):Rx(t,a,o,!1,s,l);if(d.length>0){const h=d[0].datasetIndex,p=t.getDatasetMeta(h).data;d=[];for(let x=0;x<p.length;++x)d.push({element:p[x],datasetIndex:h,index:x})}return d},point(t,e,n,s){const a=Ro(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Ox(t,a,o,s,l)},nearest(t,e,n,s){const a=Ro(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Rx(t,a,o,n.intersect,s,l)},x(t,e,n,s){const a=Ro(e,t);return DS(t,a,"x",n.intersect,s)},y(t,e,n,s){const a=Ro(e,t);return DS(t,a,"y",n.intersect,s)}}};const FT=["left","top","right","bottom"];function wu(t,e){return t.filter(n=>n.pos===e)}function CS(t,e){return t.filter(n=>FT.indexOf(n.pos)===-1&&n.box.axis===e)}function Su(t,e){return t.sort((n,s)=>{const a=e?s:n,o=e?n:s;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function n4(t){const e=[];let n,s,a,o,l,d;for(n=0,s=(t||[]).length;n<s;++n)a=t[n],{position:o,options:{stack:l,stackWeight:d=1}}=a,e.push({index:n,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:d});return e}function s4(t){const e={};for(const n of t){const{stack:s,pos:a,stackWeight:o}=n;if(!s||!FT.includes(a))continue;const l=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function i4(t,e){const n=s4(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let o,l,d;for(o=0,l=t.length;o<l;++o){d=t[o];const{fullSize:h}=d.box,p=n[d.stack],x=p&&d.stackWeight/p.weight;d.horizontal?(d.width=x?x*s:h&&e.availableWidth,d.height=a):(d.width=s,d.height=x?x*a:h&&e.availableHeight)}return n}function a4(t){const e=n4(t),n=Su(e.filter(p=>p.box.fullSize),!0),s=Su(wu(e,"left"),!0),a=Su(wu(e,"right")),o=Su(wu(e,"top"),!0),l=Su(wu(e,"bottom")),d=CS(e,"x"),h=CS(e,"y");return{fullSize:n,leftAndTop:s.concat(o),rightAndBottom:a.concat(h).concat(l).concat(d),chartArea:wu(e,"chartArea"),vertical:s.concat(a).concat(h),horizontal:o.concat(l).concat(d)}}function ES(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function HT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function r4(t,e,n,s){const{pos:a,box:o}=n,l=t.maxPadding;if(!jt(a)){n.size&&(t[a]-=n.size);const y=s[n.stack]||{size:0,count:1};y.size=Math.max(y.size,n.horizontal?o.height:o.width),n.size=y.size/y.count,t[a]+=n.size}o.getPadding&&HT(l,o.getPadding());const d=Math.max(0,e.outerWidth-ES(l,t,"left","right")),h=Math.max(0,e.outerHeight-ES(l,t,"top","bottom")),p=d!==t.w,x=h!==t.h;return t.w=d,t.h=h,n.horizontal?{same:p,other:x}:{same:x,other:p}}function o4(t){const e=t.maxPadding;function n(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function l4(t,e){const n=e.maxPadding;function s(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{o[l]=Math.max(e[l],n[l])}),o}return s(t?["left","right"]:["top","bottom"])}function zu(t,e,n,s){const a=[];let o,l,d,h,p,x;for(o=0,l=t.length,p=0;o<l;++o){d=t[o],h=d.box,h.update(d.width||e.w,d.height||e.h,l4(d.horizontal,e));const{same:y,other:b}=r4(e,n,d,s);p|=y&&a.length,x=x||b,h.fullSize||a.push(d)}return p&&zu(a,e,n,s)||x}function df(t,e,n,s,a){t.top=n,t.left=e,t.right=e+s,t.bottom=n+a,t.width=s,t.height=a}function AS(t,e,n,s){const a=n.padding;let{x:o,y:l}=e;for(const d of t){const h=d.box,p=s[d.stack]||{placed:0,weight:1},x=d.stackWeight/p.weight||1;if(d.horizontal){const y=e.w*x,b=p.size||h.height;od(p.start)&&(l=p.start),h.fullSize?df(h,a.left,l,n.outerWidth-a.right-a.left,b):df(h,e.left+p.placed,l,y,b),p.start=l,p.placed+=y,l=h.bottom}else{const y=e.h*x,b=p.size||h.width;od(p.start)&&(o=p.start),h.fullSize?df(h,o,a.top,b,n.outerHeight-a.bottom-a.top):df(h,o,e.top+p.placed,b,y),p.start=o,p.placed+=y,o=h.right}}e.x=o,e.y=l}var os={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const a=us(t.options.layout.padding),o=Math.max(e-a.width,0),l=Math.max(n-a.height,0),d=a4(t.boxes),h=d.vertical,p=d.horizontal;Ht(t.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const x=h.reduce((N,M)=>M.box.options&&M.box.options.display===!1?N:N+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/x,hBoxMaxHeight:l/2}),b=Object.assign({},a);HT(b,us(s));const j=Object.assign({maxPadding:b,w:o,h:l,x:a.left,y:a.top},a),T=i4(h.concat(p),y);zu(d.fullSize,j,y,T),zu(h,j,y,T),zu(p,j,y,T)&&zu(h,j,y,T),o4(j),AS(d.leftAndTop,j,y,T),j.x+=j.w,j.y+=j.h,AS(d.rightAndBottom,j,y,T),t.chartArea={left:j.left,top:j.top,right:j.left+j.w,bottom:j.top+j.h,height:j.h,width:j.w},Ht(d.chartArea,N=>{const M=N.box;Object.assign(M,t.chartArea),M.update(j.w,j.h,{left:0,top:0,right:0,bottom:0})})}};class UT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class c4 extends UT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Df="$chartjs",u4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},OS=t=>t===null||t==="";function d4(t,e){const n=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[Df]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",OS(a)){const o=gS(t,"width");o!==void 0&&(t.width=o)}if(OS(s))if(t.style.height==="")t.height=t.width/(e||2);else{const o=gS(t,"height");o!==void 0&&(t.height=o)}return t}const IT=u3?{passive:!0}:!1;function h4(t,e,n){t&&t.addEventListener(e,n,IT)}function f4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,IT)}function p4(t,e){const n=u4[t.type]||t.type,{x:s,y:a}=Ro(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function Jf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function m4(t,e,n){const s=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const d of o)l=l||Jf(d.addedNodes,s),l=l&&!Jf(d.removedNodes,s);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function g4(t,e,n){const s=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const d of o)l=l||Jf(d.removedNodes,s),l=l&&!Jf(d.addedNodes,s);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const ud=new Map;let RS=0;function YT(){const t=window.devicePixelRatio;t!==RS&&(RS=t,ud.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function x4(t,e){ud.size||window.addEventListener("resize",YT),ud.set(t,e)}function y4(t){ud.delete(t),ud.size||window.removeEventListener("resize",YT)}function v4(t,e,n){const s=t.canvas,a=s&&qv(s);if(!a)return;const o=pT((d,h)=>{const p=a.clientWidth;n(d,h),p<a.clientWidth&&n()},window),l=new ResizeObserver(d=>{const h=d[0],p=h.contentRect.width,x=h.contentRect.height;p===0&&x===0||o(p,x)});return l.observe(a),x4(t,o),l}function Px(t,e,n){n&&n.disconnect(),e==="resize"&&y4(t)}function b4(t,e,n){const s=t.canvas,a=pT(o=>{t.ctx!==null&&n(p4(o,t))},t);return h4(s,e,a),a}class _4 extends UT{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(d4(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Df])return!1;const s=n[Df].initial;["height","width"].forEach(o=>{const l=s[o];bt(l)?n.removeAttribute(o):n.setAttribute(o,l)});const a=s.style||{};return Object.keys(a).forEach(o=>{n.style[o]=a[o]}),n.width=n.width,delete n[Df],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),l={attach:m4,detach:g4,resize:v4}[n]||b4;a[n]=l(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:Px,detach:Px,resize:Px}[n]||f4)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return c3(e,n,s,a)}isAttached(e){const n=e&&qv(e);return!!(n&&n.isConnected)}}function w4(t){return!$v()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?c4:_4}let Ya=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return Kl(this.x)&&Kl(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(o=>{a[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),a}};function S4(t,e){const n=t.options.ticks,s=j4(t),a=Math.min(n.maxTicksLimit||s,s),o=n.major.enabled?T4(e):[],l=o.length,d=o[0],h=o[l-1],p=[];if(l>a)return N4(e,p,o,l/a),p;const x=k4(o,e,a);if(l>0){let y,b;const j=l>1?Math.round((h-d)/(l-1)):null;for(hf(e,p,x,bt(j)?0:d-j,d),y=0,b=l-1;y<b;y++)hf(e,p,x,o[y],o[y+1]);return hf(e,p,x,h,bt(j)?e.length:h+j),p}return hf(e,p,x),p}function j4(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(s,a))}function k4(t,e,n){const s=M4(t),a=e.length/n;if(!s)return Math.max(a,1);const o=hO(s);for(let l=0,d=o.length-1;l<d;l++){const h=o[l];if(h>a)return h}return Math.max(a,1)}function T4(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function N4(t,e,n,s){let a=0,o=n[0],l;for(s=Math.ceil(s),l=0;l<t.length;l++)l===o&&(e.push(t[l]),a++,o=n[a*s])}function hf(t,e,n,s,a){const o=rt(s,0),l=Math.min(rt(a,t.length),t.length);let d=0,h,p,x;for(n=Math.ceil(n),a&&(h=a-s,n=h/Math.floor(h/n)),x=o;x<0;)d++,x=Math.round(o+d*n);for(p=Math.max(o,0);p<l;p++)p===x&&(e.push(t[p]),d++,x=Math.round(o+d*n))}function M4(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const D4=t=>t==="left"?"right":t==="right"?"left":t,PS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,LS=(t,e)=>Math.min(e||t,t);function zS(t,e){const n=[],s=t.length/e,a=t.length;let o=0;for(;o<a;o+=s)n.push(t[Math.floor(o)]);return n}function C4(t,e,n){const s=t.ticks.length,a=Math.min(e,s-1),o=t._startPixel,l=t._endPixel,d=1e-6;let h=t.getPixelForTick(a),p;if(!(n&&(s===1?p=Math.max(h-o,l-h):e===0?p=(t.getPixelForTick(1)-h)/2:p=(h-t.getPixelForTick(a-1))/2,h+=a<e?p:-p,h<o-d||h>l+d)))return h}function E4(t,e){Ht(t,n=>{const s=n.gc,a=s.length/2;let o;if(a>e){for(o=0;o<a;++o)delete n.data[s[o]];s.splice(0,a)}})}function ju(t){return t.drawTicks?t.tickLength:0}function BS(t,e){if(!t.display)return 0;const n=Vn(t.font,e),s=us(t.padding);return(dn(t.text)?t.text.length:1)*n.lineHeight+s.height}function A4(t,e){return Qr(t,{scale:e,type:"scale"})}function O4(t,e,n){return Qr(t,{tick:n,index:e,type:"tick"})}function R4(t,e,n){let s=Fv(t);return(n&&e!=="right"||!n&&e==="right")&&(s=D4(s)),s}function P4(t,e,n,s){const{top:a,left:o,bottom:l,right:d,chart:h}=t,{chartArea:p,scales:x}=h;let y=0,b,j,T;const N=l-a,M=d-o;if(t.isHorizontal()){if(j=is(s,o,d),jt(n)){const R=Object.keys(n)[0],E=n[R];T=x[R].getPixelForValue(E)+N-e}else n==="center"?T=(p.bottom+p.top)/2+N-e:T=PS(t,n,e);b=d-o}else{if(jt(n)){const R=Object.keys(n)[0],E=n[R];j=x[R].getPixelForValue(E)-M+e}else n==="center"?j=(p.left+p.right)/2-M+e:j=PS(t,n,e);T=is(s,l,a),y=n==="left"?-Dn:Dn}return{titleX:j,titleY:T,maxWidth:b,rotation:y}}class Zo extends Ya{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=Vs(e,Number.POSITIVE_INFINITY),n=Vs(n,Number.NEGATIVE_INFINITY),s=Vs(s,Number.POSITIVE_INFINITY),a=Vs(a,Number.NEGATIVE_INFINITY),{min:Vs(e,s),max:Vs(n,a),minDefined:Sn(e),maxDefined:Sn(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:o}=this.getUserBounds(),l;if(a&&o)return{min:n,max:s};const d=this.getMatchingVisibleMetas();for(let h=0,p=d.length;h<p;++h)l=d[h].controller.getMinMax(this,e),a||(n=Math.min(n,l.min)),o||(s=Math.max(s,l.max));return n=o&&n>s?s:n,s=a&&n>s?n:s,{min:Vs(n,Vs(s,n)),max:Vs(s,Vs(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:o,ticks:l}=this.options,d=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=HO(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=d<this.ticks.length;this._convertTicksToLabels(h?zS(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=S4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,o;for(s=0,a=e.length;s<a;s++)o=e[s],o.label=Zt(n.callback,[o.value,s,e],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=LS(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,o=n.maxRotation;let l=a,d,h,p;if(!this._isVisible()||!n.display||a>=o||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const x=this._getLabelSizes(),y=x.widest.width,b=x.highest.height,j=Yn(this.chart.width-y,0,this.maxWidth);d=e.offset?this.maxWidth/s:j/(s-1),y+6>d&&(d=j/(s-(e.offset?.5:1)),h=this.maxHeight-ju(e.grid)-n.padding-BS(e.title,this.chart.options.font),p=Math.sqrt(y*y+b*b),l=Bv(Math.min(Math.asin(Yn((x.highest.height+6)/d,-1,1)),Math.asin(Yn(h/p,-1,1))-Math.asin(Yn(b/p,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:o}}=this,l=this._isVisible(),d=this.isHorizontal();if(l){const h=BS(a,n.options.font);if(d?(e.width=this.maxWidth,e.height=ju(o)+h):(e.height=this.maxHeight,e.width=ju(o)+h),s.display&&this.ticks.length){const{first:p,last:x,widest:y,highest:b}=this._getLabelSizes(),j=s.padding*2,T=Ti(this.labelRotation),N=Math.cos(T),M=Math.sin(T);if(d){const R=s.mirror?0:M*y.width+N*b.height;e.height=Math.min(this.maxHeight,e.height+R+j)}else{const R=s.mirror?0:N*y.width+M*b.height;e.width=Math.min(this.maxWidth,e.width+R+j)}this._calculatePadding(p,x,M,N)}}this._handleMargins(),d?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:o,padding:l},position:d}=this.options,h=this.labelRotation!==0,p=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,j=0;h?p?(b=a*e.width,j=s*n.height):(b=s*e.height,j=a*n.width):o==="start"?j=n.width:o==="end"?b=e.width:o!=="inner"&&(b=e.width/2,j=n.width/2),this.paddingLeft=Math.max((b-x+l)*this.width/(this.width-x),0),this.paddingRight=Math.max((j-y+l)*this.width/(this.width-y),0)}else{let x=n.height/2,y=e.height/2;o==="start"?(x=0,y=e.height):o==="end"&&(x=n.height,y=0),this.paddingTop=x+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)bt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=zS(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:o}=this,l=[],d=[],h=Math.floor(n/LS(n,s));let p=0,x=0,y,b,j,T,N,M,R,E,z,U,I;for(y=0;y<n;y+=h){if(T=e[y].label,N=this._resolveTickFontOptions(y),a.font=M=N.string,R=o[M]=o[M]||{data:{},gc:[]},E=N.lineHeight,z=U=0,!bt(T)&&!dn(T))z=Zf(a,R.data,R.gc,z,T),U=E;else if(dn(T))for(b=0,j=T.length;b<j;++b)I=T[b],!bt(I)&&!dn(I)&&(z=Zf(a,R.data,R.gc,z,I),U+=E);l.push(z),d.push(U),p=Math.max(z,p),x=Math.max(U,x)}E4(o,n);const V=l.indexOf(p),O=d.indexOf(x),q=Z=>({width:l[Z]||0,height:d[Z]||0});return{first:q(0),last:q(n-1),widest:q(V),highest:q(O),widths:l,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return gO(this._alignToPixels?Mo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=O4(this.getContext(),e,s))}return this.$context||(this.$context=A4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ti(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,d=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*s>d*a?d/s:h/a:h*a<d*s?h/s:d/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:o,position:l,border:d}=a,h=o.offset,p=this.isHorizontal(),y=this.ticks.length+(h?1:0),b=ju(o),j=[],T=d.setContext(this.getContext()),N=T.display?T.width:0,M=N/2,R=function(W){return Mo(s,W,N)};let E,z,U,I,V,O,q,Z,re,J,de,le;if(l==="top")E=R(this.bottom),O=this.bottom-b,Z=E-M,J=R(e.top)+M,le=e.bottom;else if(l==="bottom")E=R(this.top),J=e.top,le=R(e.bottom)-M,O=E+M,Z=this.top+b;else if(l==="left")E=R(this.right),V=this.right-b,q=E-M,re=R(e.left)+M,de=e.right;else if(l==="right")E=R(this.left),re=e.left,de=R(e.right)-M,V=E+M,q=this.left+b;else if(n==="x"){if(l==="center")E=R((e.top+e.bottom)/2+.5);else if(jt(l)){const W=Object.keys(l)[0],X=l[W];E=R(this.chart.scales[W].getPixelForValue(X))}J=e.top,le=e.bottom,O=E+M,Z=O+b}else if(n==="y"){if(l==="center")E=R((e.left+e.right)/2);else if(jt(l)){const W=Object.keys(l)[0],X=l[W];E=R(this.chart.scales[W].getPixelForValue(X))}V=E-M,q=V-b,re=e.left,de=e.right}const te=rt(a.ticks.maxTicksLimit,y),se=Math.max(1,Math.ceil(y/te));for(z=0;z<y;z+=se){const W=this.getContext(z),X=o.setContext(W),ae=d.setContext(W),oe=X.lineWidth,me=X.color,F=ae.dash||[],ee=ae.dashOffset,xe=X.tickWidth,H=X.tickColor,pe=X.tickBorderDash||[],Se=X.tickBorderDashOffset;U=C4(this,z,h),U!==void 0&&(I=Mo(s,U,oe),p?V=q=re=de=I:O=Z=J=le=I,j.push({tx1:V,ty1:O,tx2:q,ty2:Z,x1:re,y1:J,x2:de,y2:le,width:oe,color:me,borderDash:F,borderDashOffset:ee,tickWidth:xe,tickColor:H,tickBorderDash:pe,tickBorderDashOffset:Se}))}return this._ticksLength=y,this._borderValue=E,j}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:o}=s,l=this.isHorizontal(),d=this.ticks,{align:h,crossAlign:p,padding:x,mirror:y}=o,b=ju(s.grid),j=b+x,T=y?-x:j,N=-Ti(this.labelRotation),M=[];let R,E,z,U,I,V,O,q,Z,re,J,de,le="middle";if(a==="top")V=this.bottom-T,O=this._getXAxisLabelAlignment();else if(a==="bottom")V=this.top+T,O=this._getXAxisLabelAlignment();else if(a==="left"){const se=this._getYAxisLabelAlignment(b);O=se.textAlign,I=se.x}else if(a==="right"){const se=this._getYAxisLabelAlignment(b);O=se.textAlign,I=se.x}else if(n==="x"){if(a==="center")V=(e.top+e.bottom)/2+j;else if(jt(a)){const se=Object.keys(a)[0],W=a[se];V=this.chart.scales[se].getPixelForValue(W)+j}O=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")I=(e.left+e.right)/2-j;else if(jt(a)){const se=Object.keys(a)[0],W=a[se];I=this.chart.scales[se].getPixelForValue(W)}O=this._getYAxisLabelAlignment(b).textAlign}n==="y"&&(h==="start"?le="top":h==="end"&&(le="bottom"));const te=this._getLabelSizes();for(R=0,E=d.length;R<E;++R){z=d[R],U=z.label;const se=o.setContext(this.getContext(R));q=this.getPixelForTick(R)+o.labelOffset,Z=this._resolveTickFontOptions(R),re=Z.lineHeight,J=dn(U)?U.length:1;const W=J/2,X=se.color,ae=se.textStrokeColor,oe=se.textStrokeWidth;let me=O;l?(I=q,O==="inner"&&(R===E-1?me=this.options.reverse?"left":"right":R===0?me=this.options.reverse?"right":"left":me="center"),a==="top"?p==="near"||N!==0?de=-J*re+re/2:p==="center"?de=-te.highest.height/2-W*re+re:de=-te.highest.height+re/2:p==="near"||N!==0?de=re/2:p==="center"?de=te.highest.height/2-W*re:de=te.highest.height-J*re,y&&(de*=-1),N!==0&&!se.showLabelBackdrop&&(I+=re/2*Math.sin(N))):(V=q,de=(1-J)*re/2);let F;if(se.showLabelBackdrop){const ee=us(se.backdropPadding),xe=te.heights[R],H=te.widths[R];let pe=de-ee.top,Se=0-ee.left;switch(le){case"middle":pe-=xe/2;break;case"bottom":pe-=xe;break}switch(O){case"center":Se-=H/2;break;case"right":Se-=H;break;case"inner":R===E-1?Se-=H:R>0&&(Se-=H/2);break}F={left:Se,top:pe,width:H+ee.width,height:xe+ee.height,color:se.backdropColor}}M.push({label:U,font:Z,textOffset:de,options:{rotation:N,color:X,strokeColor:ae,strokeWidth:oe,textAlign:me,textBaseline:le,translation:[I,V],backdrop:F}})}return M}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ti(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:o}}=this.options,l=this._getLabelSizes(),d=e+o,h=l.widest.width;let p,x;return n==="left"?a?(x=this.right+o,s==="near"?p="left":s==="center"?(p="center",x+=h/2):(p="right",x+=h)):(x=this.right-d,s==="near"?p="right":s==="center"?(p="center",x-=h/2):(p="left",x=this.left)):n==="right"?a?(x=this.left+o,s==="near"?p="right":s==="center"?(p="center",x-=h/2):(p="left",x-=h)):(x=this.left+d,s==="near"?p="left":s==="center"?(p="center",x+=h/2):(p="right",x=this.right)):p="right",{textAlign:p,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:o,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,o,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const d=(h,p,x)=>{!x.width||!x.color||(s.save(),s.lineWidth=x.width,s.strokeStyle=x.color,s.setLineDash(x.borderDash||[]),s.lineDashOffset=x.borderDashOffset,s.beginPath(),s.moveTo(h.x,h.y),s.lineTo(p.x,p.y),s.stroke(),s.restore())};if(n.display)for(o=0,l=a.length;o<l;++o){const h=a[o];n.drawOnChartArea&&d({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),n.drawTicks&&d({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,o=s.setContext(this.getContext()),l=s.display?o.width:0;if(!l)return;const d=a.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let p,x,y,b;this.isHorizontal()?(p=Mo(e,this.left,l)-l/2,x=Mo(e,this.right,d)+d/2,y=b=h):(y=Mo(e,this.top,l)-l/2,b=Mo(e,this.bottom,d)+d/2,p=x=h),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(p,y),n.lineTo(x,b),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&Mp(s,a);const o=this.getLabelItems(e);for(const l of o){const d=l.options,h=l.font,p=l.label,x=l.textOffset;Go(s,p,0,x,h,d)}a&&Dp(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const o=Vn(s.font),l=us(s.padding),d=s.align;let h=o.lineHeight/2;n==="bottom"||n==="center"||jt(n)?(h+=l.bottom,dn(s.text)&&(h+=o.lineHeight*(s.text.length-1))):h+=l.top;const{titleX:p,titleY:x,maxWidth:y,rotation:b}=P4(this,h,n,d);Go(e,s.text,0,0,o,{color:s.color,maxWidth:y,rotation:b,textAlign:R4(d,n,a),textBaseline:"middle",translation:[p,x]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=rt(e.grid&&e.grid.z,-1),a=rt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zo.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let o,l;for(o=0,l=n.length;o<l;++o){const d=n[o];d[s]===this.id&&(!e||d.type===e)&&a.push(d)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Vn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ff{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;B4(n)&&(s=this.register(n));const a=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,L4(e,l,s),this.override&&hn.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in hn[a]&&(delete hn[a][s],this.override&&delete qo[s])}}function L4(t,e,n){const s=rd(Object.create(null),[n?hn.get(n):{},hn.get(e),t.defaults]);hn.set(e,s),t.defaultRoutes&&z4(e,t.defaultRoutes),t.descriptors&&hn.describe(e,t.descriptors)}function z4(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),o=[t].concat(s).join("."),l=e[n].split("."),d=l.pop(),h=l.join(".");hn.route(o,a,h,d)})}function B4(t){return"id"in t&&"defaults"in t}class V4{constructor(){this.controllers=new ff(Jr,"datasets",!0),this.elements=new ff(Ya,"elements"),this.plugins=new ff(Object,"plugins"),this.scales=new ff(Zo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const o=s||this._getRegistryForType(a);s||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):Ht(a,l=>{const d=s||this._getRegistryForType(l);this._exec(e,d,l)})})}_exec(e,n,s){const a=zv(e);Zt(s["before"+a],[],s),n[e](s),Zt(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var Yi=new V4;class F4{constructor(){this._init=void 0}notify(e,n,s,a){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(o,e,n,s);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,n,s,a){a=a||{};for(const o of e){const l=o.plugin,d=l[s],h=[n,a,o.options];if(Zt(d,h,l)===!1&&a.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=rt(s.options&&s.options.plugins,{}),o=H4(s);return a===!1&&!n?[]:I4(e,o,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(o,l)=>o.filter(d=>!l.some(h=>d.plugin.id===h.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function H4(t){const e={},n=[],s=Object.keys(Yi.plugins.items);for(let o=0;o<s.length;o++)n.push(Yi.getPlugin(s[o]));const a=t.plugins||[];for(let o=0;o<a.length;o++){const l=a[o];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function U4(t,e){return!e&&t===!1?null:t===!0?{}:t}function I4(t,{plugins:e,localIds:n},s,a){const o=[],l=t.getContext();for(const d of e){const h=d.id,p=U4(s[h],a);p!==null&&o.push({plugin:d,options:Y4(t.config,{plugin:d,local:n[h]},p,l)})}return o}function Y4(t,{plugin:e,local:n},s,a){const o=t.pluginScopeKeys(e),l=t.getOptionScopes(s,o);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ay(t,e){const n=hn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function W4(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function $4(t,e){return t===e?"_index_":"_value_"}function VS(t){if(t==="x"||t==="y"||t==="r")return t}function q4(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Oy(t,...e){if(VS(t))return t;for(const n of e){const s=n.axis||q4(n.position)||t.length>1&&VS(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function FS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function G4(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return FS(t,"x",n[0])||FS(t,"y",n[0])}return{}}function X4(t,e){const n=qo[t.type]||{scales:{}},s=e.scales||{},a=Ay(t.type,e),o=Object.create(null);return Object.keys(s).forEach(l=>{const d=s[l];if(!jt(d))return console.error(`Invalid scale configuration for scale: ${l}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=Oy(l,d,G4(l,t),hn.scales[d.type]),p=$4(h,a),x=n.scales||{};o[l]=$u(Object.create(null),[{axis:h},d,x[h],x[p]])}),t.data.datasets.forEach(l=>{const d=l.type||t.type,h=l.indexAxis||Ay(d,e),x=(qo[d]||{}).scales||{};Object.keys(x).forEach(y=>{const b=W4(y,h),j=l[b+"AxisID"]||b;o[j]=o[j]||Object.create(null),$u(o[j],[{axis:b},s[j],x[y]])})}),Object.keys(o).forEach(l=>{const d=o[l];$u(d,[hn.scales[d.type],hn.scale])}),o}function WT(t){const e=t.options||(t.options={});e.plugins=rt(e.plugins,{}),e.scales=X4(t,e)}function $T(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function K4(t){return t=t||{},t.data=$T(t.data),WT(t),t}const HS=new Map,qT=new Set;function pf(t,e){let n=HS.get(t);return n||(n=e(),HS.set(t,n),qT.add(n)),n}const ku=(t,e,n)=>{const s=qr(e,n);s!==void 0&&t.add(s)};class Z4{constructor(e){this._config=K4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$T(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),WT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return pf(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return pf(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return pf(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return pf(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:o}=this,l=this._cachedScopes(e,s),d=l.get(n);if(d)return d;const h=new Set;n.forEach(x=>{e&&(h.add(e),x.forEach(y=>ku(h,e,y))),x.forEach(y=>ku(h,a,y)),x.forEach(y=>ku(h,qo[o]||{},y)),x.forEach(y=>ku(h,hn,y)),x.forEach(y=>ku(h,Cy,y))});const p=Array.from(h);return p.length===0&&p.push(Object.create(null)),qT.has(n)&&l.set(n,p),p}chartOptionScopes(){const{options:e,type:n}=this;return[e,qo[n]||{},hn.datasets[n]||{},{type:n},hn,Cy]}resolveNamedOptions(e,n,s,a=[""]){const o={$shared:!0},{resolver:l,subPrefixes:d}=US(this._resolverCache,e,a);let h=l;if(J4(l,n)){o.$shared=!1,s=Gr(s)?s():s;const p=this.createResolver(e,s,d);h=Zl(l,s,p)}for(const p of n)o[p]=h[p];return o}createResolver(e,n,s=[""],a){const{resolver:o}=US(this._resolverCache,e,s);return jt(n)?Zl(o,n,void 0,a):o}}function US(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=n.join();let o=s.get(a);return o||(o={resolver:Iv(e,n),subPrefixes:n.filter(d=>!d.toLowerCase().includes("hover"))},s.set(a,o)),o}const Q4=t=>jt(t)&&Object.getOwnPropertyNames(t).some(e=>Gr(t[e]));function J4(t,e){const{isScriptable:n,isIndexable:s}=bT(t);for(const a of e){const o=n(a),l=s(a),d=(l||o)&&t[a];if(o&&(Gr(d)||Q4(d))||l&&dn(d))return!0}return!1}var eR="4.5.1";const tR=["top","bottom","left","right","chartArea"];function IS(t,e){return t==="top"||t==="bottom"||tR.indexOf(t)===-1&&e==="x"}function YS(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function WS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Zt(n&&n.onComplete,[t],e)}function nR(t){const e=t.chart,n=e.options.animation;Zt(n&&n.onProgress,[t],e)}function GT(t){return $v()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Cf={},$S=t=>{const e=GT(t);return Object.values(Cf).filter(n=>n.canvas===e).pop()};function sR(t,e,n){const s=Object.keys(t);for(const a of s){const o=+a;if(o>=e){const l=t[a];delete t[a],(n>0||o>e)&&(t[o+n]=l)}}}function iR(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let li=class{static defaults=hn;static instances=Cf;static overrides=qo;static registry=Yi;static version=eR;static getChart=$S;static register(...e){Yi.add(...e),qS()}static unregister(...e){Yi.remove(...e),qS()}constructor(e,n){const s=this.config=new Z4(n),a=GT(e),o=$S(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||w4(a)),this.platform.updateConfig(s);const d=this.platform.acquireContext(a,l.aspectRatio),h=d&&d.canvas,p=h&&h.height,x=h&&h.width;if(this.id=sO(),this.ctx=d,this.canvas=h,this.width=x,this.height=p,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new F4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=bO(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],Cf[this.id]=this,!d||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Ma.listen(this,"complete",WS),Ma.listen(this,"progress",nR),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:o}=this;return bt(e)?n&&o?o:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Yi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():mS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hS(this.canvas,this.ctx),this}stop(){return Ma.stop(this),this}resize(e,n){Ma.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,n,o),d=s.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,mS(this,d,!0)&&(this.notifyPlugins("resize",{size:l}),Zt(s.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ht(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((l,d)=>(l[d]=!1,l),{});let o=[];n&&(o=o.concat(Object.keys(n).map(l=>{const d=n[l],h=Oy(l,d),p=h==="r",x=h==="x";return{options:d,dposition:p?"chartArea":x?"bottom":"left",dtype:p?"radialLinear":x?"category":"linear"}}))),Ht(o,l=>{const d=l.options,h=d.id,p=Oy(h,d),x=rt(d.type,l.dtype);(d.position===void 0||IS(d.position,p)!==IS(l.dposition))&&(d.position=l.dposition),a[h]=!0;let y=null;if(h in s&&s[h].type===x)y=s[h];else{const b=Yi.getScale(x);y=new b({id:h,type:x,ctx:this.ctx,chart:this}),s[y.id]=y}y.init(d,e)}),Ht(a,(l,d)=>{l||delete s[d]}),Ht(s,l=>{os.configure(this,l,l.options),os.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,o)=>a.index-o.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(YS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const o=n[s];let l=this.getDatasetMeta(s);const d=o.type||this.config.type;if(l.type&&l.type!==d&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=d,l.indexAxis=o.indexAxis||Ay(d,this.options),l.order=o.order||0,l.index=s,l.label=""+o.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const h=Yi.getController(d),{datasetElementType:p,dataElementType:x}=hn.datasets[d];Object.assign(h,{dataElementType:Yi.getElement(x),datasetElementType:p&&Yi.getElement(p)}),l.controller=new h(this,s),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let p=0,x=this.data.datasets.length;p<x;p++){const{controller:y}=this.getDatasetMeta(p),b=!a&&o.indexOf(y)===-1;y.buildOrUpdateElements(b),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),a||Ht(o,p=>{p.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(YS("z","_idx"));const{_active:d,_lastEvent:h}=this;h?this._eventHandler(h,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){Ht(this.scales,e=>{os.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!sS(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:o}of n){const l=s==="_removeElements"?-o:o;sR(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=o=>new Set(e.filter(l=>l[0]===o).map((l,d)=>d+","+l.splice(1).join(","))),a=s(0);for(let o=1;o<n;o++)if(!sS(a,s(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;os.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ht(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Gr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ma.has(this)?this.attached&&!Ma.running(this)&&Ma.start(this):(this.draw(),WS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];(!e||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=ET(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&Mp(n,a),e.controller.draw(),a&&Dp(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Ra(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const o=t4.modes[n];return typeof o=="function"?o(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(o=>o&&o._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,a);od(n)?(o.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),l.update(o,{visible:s}),this.update(d=>d.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ma.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),hS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Cf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},a=(o,l,d)=>{o.offsetX=l,o.offsetY=d,this._eventHandler(o)};Ht(this.options.events,o=>s(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(h,p)=>{n.addEventListener(this,h,p),e[h]=p},a=(h,p)=>{e[h]&&(n.removeEventListener(this,h,p),delete e[h])},o=(h,p)=>{this.canvas&&this.resize(h,p)};let l;const d=()=>{a("attach",d),this.attached=!0,this.resize(),s("resize",o),s("detach",l)};l=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),s("attach",d)},n.isAttached(this.canvas)?d():l()}unbindEvents(){Ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let o,l,d,h;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),d=0,h=e.length;d<h;++d){l=e[d];const p=l&&this.getDatasetMeta(l.datasetIndex).controller;p&&p[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:o,index:l})=>{const d=this.getDatasetMeta(o);if(!d)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:d.data[l],index:l}});!Gf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,o=(h,p)=>h.filter(x=>!p.some(y=>x.datasetIndex===y.datasetIndex&&x.index===y.index)),l=o(n,e),d=s?e:o(e,n);l.length&&this.updateHoverStyle(l,a.mode,!1),d.length&&a.mode&&this.updateHoverStyle(d,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const o=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(o||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:o}=this,l=n,d=this._getActiveElements(e,a,s,l),h=cO(e),p=iR(e,this._lastEvent,s,h);s&&(this._lastEvent=null,Zt(o.onHover,[e,d,this],this),h&&Zt(o.onClick,[e,d,this],this));const x=!Gf(d,a);return(x||n)&&(this._active=d,this._updateHoverStyles(d,a,n)),this._lastEvent=p,x}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}};function qS(){return Ht(li.instances,t=>t._plugins.invalidate())}function aR(t,e,n){const{startAngle:s,x:a,y:o,outerRadius:l,innerRadius:d,options:h}=e,{borderWidth:p,borderJoinStyle:x}=h,y=Math.min(p/l,rs(s-n));if(t.beginPath(),t.arc(a,o,l-p/2,s+y/2,n-y/2),d>0){const b=Math.min(p/d,rs(s-n));t.arc(a,o,d+p/2,n-b/2,s+b/2,!0)}else{const b=Math.min(p/2,l*rs(s-n));if(x==="round")t.arc(a,o,b,n-At/2,s+At/2,!0);else if(x==="bevel"){const j=2*b*b,T=-j*Math.cos(n+At/2)+a,N=-j*Math.sin(n+At/2)+o,M=j*Math.cos(s+At/2)+a,R=j*Math.sin(s+At/2)+o;t.lineTo(T,N),t.lineTo(M,R)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function rR(t,e,n){const{startAngle:s,pixelMargin:a,x:o,y:l,outerRadius:d,innerRadius:h}=e;let p=a/d;t.beginPath(),t.arc(o,l,d,s-p,n+p),h>a?(p=a/h,t.arc(o,l,h,n+p,s-p,!0)):t.arc(o,l,a,n+Dn,s-Dn),t.closePath(),t.clip()}function oR(t){return Uv(t,["outerStart","outerEnd","innerStart","innerEnd"])}function lR(t,e,n,s){const a=oR(t.options.borderRadius),o=(n-e)/2,l=Math.min(o,s*e/2),d=h=>{const p=(n-Math.min(o,h))*s/2;return Yn(h,0,Math.min(o,p))};return{outerStart:d(a.outerStart),outerEnd:d(a.outerEnd),innerStart:Yn(a.innerStart,0,l),innerEnd:Yn(a.innerEnd,0,l)}}function Al(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function ep(t,e,n,s,a,o){const{x:l,y:d,startAngle:h,pixelMargin:p,innerRadius:x}=e,y=Math.max(e.outerRadius+s+n-p,0),b=x>0?x+s+n+p:0;let j=0;const T=a-h;if(s){const se=x>0?x-s:0,W=y>0?y-s:0,X=(se+W)/2,ae=X!==0?T*X/(X+s):T;j=(T-ae)/2}const N=Math.max(.001,T*y-n/At)/y,M=(T-N)/2,R=h+M+j,E=a-M-j,{outerStart:z,outerEnd:U,innerStart:I,innerEnd:V}=lR(e,b,y,E-R),O=y-z,q=y-U,Z=R+z/O,re=E-U/q,J=b+I,de=b+V,le=R+I/J,te=E-V/de;if(t.beginPath(),o){const se=(Z+re)/2;if(t.arc(l,d,y,Z,se),t.arc(l,d,y,se,re),U>0){const oe=Al(q,re,l,d);t.arc(oe.x,oe.y,U,re,E+Dn)}const W=Al(de,E,l,d);if(t.lineTo(W.x,W.y),V>0){const oe=Al(de,te,l,d);t.arc(oe.x,oe.y,V,E+Dn,te+Math.PI)}const X=(E-V/b+(R+I/b))/2;if(t.arc(l,d,b,E-V/b,X,!0),t.arc(l,d,b,X,R+I/b,!0),I>0){const oe=Al(J,le,l,d);t.arc(oe.x,oe.y,I,le+Math.PI,R-Dn)}const ae=Al(O,R,l,d);if(t.lineTo(ae.x,ae.y),z>0){const oe=Al(O,Z,l,d);t.arc(oe.x,oe.y,z,R-Dn,Z)}}else{t.moveTo(l,d);const se=Math.cos(Z)*y+l,W=Math.sin(Z)*y+d;t.lineTo(se,W);const X=Math.cos(re)*y+l,ae=Math.sin(re)*y+d;t.lineTo(X,ae)}t.closePath()}function cR(t,e,n,s,a){const{fullCircles:o,startAngle:l,circumference:d}=e;let h=e.endAngle;if(o){ep(t,e,n,s,h,a);for(let p=0;p<o;++p)t.fill();isNaN(d)||(h=l+(d%sn||sn))}return ep(t,e,n,s,h,a),t.fill(),h}function uR(t,e,n,s,a){const{fullCircles:o,startAngle:l,circumference:d,options:h}=e,{borderWidth:p,borderJoinStyle:x,borderDash:y,borderDashOffset:b,borderRadius:j}=h,T=h.borderAlign==="inner";if(!p)return;t.setLineDash(y||[]),t.lineDashOffset=b,T?(t.lineWidth=p*2,t.lineJoin=x||"round"):(t.lineWidth=p,t.lineJoin=x||"bevel");let N=e.endAngle;if(o){ep(t,e,n,s,N,a);for(let M=0;M<o;++M)t.stroke();isNaN(d)||(N=l+(d%sn||sn))}T&&rR(t,e,N),h.selfJoin&&N-l>=At&&j===0&&x!=="miter"&&aR(t,e,N),o||(ep(t,e,n,s,N,a),t.stroke())}class dR extends Ya{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.getProps(["x","y"],s),{angle:o,distance:l}=uT(a,{x:e,y:n}),{startAngle:d,endAngle:h,innerRadius:p,outerRadius:x,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),b=(this.options.spacing+this.options.borderWidth)/2,j=rt(y,h-d),T=ld(o,d,h)&&d!==h,N=j>=sn||T,M=Aa(l,p+b,x+b);return N&&M}getCenterPoint(e){const{x:n,y:s,startAngle:a,endAngle:o,innerRadius:l,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:p}=this.options,x=(a+o)/2,y=(l+d+p+h)/2;return{x:n+Math.cos(x)*y,y:s+Math.sin(x)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,a=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>sn?Math.floor(s/sn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const d=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(d)*a,Math.sin(d)*a);const h=1-Math.sin(Math.min(At,s||0)),p=a*h;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,cR(e,this,p,o,l),uR(e,this,p,o,l),e.restore()}}function XT(t,e,n=e){t.lineCap=rt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(rt(n.borderDash,e.borderDash)),t.lineDashOffset=rt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=rt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=rt(n.borderWidth,e.borderWidth),t.strokeStyle=rt(n.borderColor,e.borderColor)}function hR(t,e,n){t.lineTo(n.x,n.y)}function fR(t){return t.stepped?AO:t.tension||t.cubicInterpolationMode==="monotone"?OO:hR}function KT(t,e,n={}){const s=t.length,{start:a=0,end:o=s-1}=n,{start:l,end:d}=e,h=Math.max(a,l),p=Math.min(o,d),x=a<l&&o<l||a>d&&o>d;return{count:s,start:h,loop:e.loop,ilen:p<h&&!x?s+p-h:p-h}}function pR(t,e,n,s){const{points:a,options:o}=e,{count:l,start:d,loop:h,ilen:p}=KT(a,n,s),x=fR(o);let{move:y=!0,reverse:b}=s||{},j,T,N;for(j=0;j<=p;++j)T=a[(d+(b?p-j:j))%l],!T.skip&&(y?(t.moveTo(T.x,T.y),y=!1):x(t,N,T,b,o.stepped),N=T);return h&&(T=a[(d+(b?p:0))%l],x(t,N,T,b,o.stepped)),!!h}function mR(t,e,n,s){const a=e.points,{count:o,start:l,ilen:d}=KT(a,n,s),{move:h=!0,reverse:p}=s||{};let x=0,y=0,b,j,T,N,M,R;const E=U=>(l+(p?d-U:U))%o,z=()=>{N!==M&&(t.lineTo(x,M),t.lineTo(x,N),t.lineTo(x,R))};for(h&&(j=a[E(0)],t.moveTo(j.x,j.y)),b=0;b<=d;++b){if(j=a[E(b)],j.skip)continue;const U=j.x,I=j.y,V=U|0;V===T?(I<N?N=I:I>M&&(M=I),x=(y*x+U)/++y):(z(),t.lineTo(U,I),T=V,y=0,N=M=I),R=I}z()}function Ry(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?mR:pR}function gR(t){return t.stepped?d3:t.tension||t.cubicInterpolationMode==="monotone"?h3:Po}function xR(t,e,n,s){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,s)&&a.closePath()),XT(t,e.options),t.stroke(a)}function yR(t,e,n,s){const{segments:a,options:o}=e,l=Ry(e);for(const d of a)XT(t,o,d.style),t.beginPath(),l(t,e,d,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const vR=typeof Path2D=="function";function bR(t,e,n,s){vR&&!e.options.segment?xR(t,e,n,s):yR(t,e,n,s)}class Wa extends Ya{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;s3(this._points,s,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=y3(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,a=e[n],o=this.points,l=CT(this,{property:n,start:a,end:a});if(!l.length)return;const d=[],h=gR(s);let p,x;for(p=0,x=l.length;p<x;++p){const{start:y,end:b}=l[p],j=o[y],T=o[b];if(j===T){d.push(j);continue}const N=Math.abs((a-j[n])/(T[n]-j[n])),M=h(j,T,N,s.stepped);M[n]=e[n],d.push(M)}return d.length===1?d[0]:d}pathSegment(e,n,s){return Ry(this)(e,this,n,s)}path(e,n,s){const a=this.segments,o=Ry(this);let l=this._loop;n=n||0,s=s||this.points.length-n;for(const d of a)l&=o(e,this,d,{start:n,end:n+s-1});return!!l}draw(e,n,s,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),bR(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function GS(t,e,n,s){const a=t.options,{[n]:o}=t.getProps([n],s);return Math.abs(e-o)<a.radius+a.hitRadius}class ac extends Ya{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,n){return GS(this,e,"x",n)}inYRange(e,n){return GS(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!Ra(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Ey(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ZT(t,e){const{x:n,y:s,base:a,width:o,height:l}=t.getProps(["x","y","base","width","height"],e);let d,h,p,x,y;return t.horizontal?(y=l/2,d=Math.min(n,a),h=Math.max(n,a),p=s-y,x=s+y):(y=o/2,d=n-y,h=n+y,p=Math.min(s,a),x=Math.max(s,a)),{left:d,top:p,right:h,bottom:x}}function Br(t,e,n,s){return t?0:Yn(e,n,s)}function _R(t,e,n){const s=t.options.borderWidth,a=t.borderSkipped,o=vT(s);return{t:Br(a.top,o.top,0,n),r:Br(a.right,o.right,0,e),b:Br(a.bottom,o.bottom,0,n),l:Br(a.left,o.left,0,e)}}function wR(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,o=Io(a),l=Math.min(e,n),d=t.borderSkipped,h=s||jt(a);return{topLeft:Br(!h||d.top||d.left,o.topLeft,0,l),topRight:Br(!h||d.top||d.right,o.topRight,0,l),bottomLeft:Br(!h||d.bottom||d.left,o.bottomLeft,0,l),bottomRight:Br(!h||d.bottom||d.right,o.bottomRight,0,l)}}function SR(t){const e=ZT(t),n=e.right-e.left,s=e.bottom-e.top,a=_R(t,n/2,s/2),o=wR(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:o},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,o.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(a.b,a.r))}}}}function Lx(t,e,n,s){const a=e===null,o=n===null,d=t&&!(a&&o)&&ZT(t,s);return d&&(a||Aa(e,d.left,d.right))&&(o||Aa(n,d.top,d.bottom))}function jR(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function kR(t,e){t.rect(e.x,e.y,e.w,e.h)}function zx(t,e,n={}){const s=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-s,l=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+o,h:t.h+l,radius:t.radius}}class Kv extends Ya{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:a}}=this,{inner:o,outer:l}=SR(this),d=jR(l.radius)?cd:kR;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),d(e,zx(l,n,o)),e.clip(),d(e,zx(o,-n,l)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),d(e,zx(o,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,s){return Lx(this,e,n,s)}inXRange(e,n){return Lx(this,e,null,n)}inYRange(e,n){return Lx(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:a,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(n+a)/2:n,y:o?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var TR=Object.freeze({__proto__:null,ArcElement:dR,BarElement:Kv,LineElement:Wa,PointElement:ac});const Py=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],XS=Py.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function QT(t){return Py[t%Py.length]}function JT(t){return XS[t%XS.length]}function NR(t,e){return t.borderColor=QT(e),t.backgroundColor=JT(e),++e}function MR(t,e){return t.backgroundColor=t.data.map(()=>QT(e++)),e}function DR(t,e){return t.backgroundColor=t.data.map(()=>JT(e++)),e}function CR(t){let e=0;return(n,s)=>{const a=t.getDatasetMeta(s).controller;a instanceof Gv?e=MR(n,e):a instanceof zT?e=DR(n,e):a&&(e=NR(n,e))}}function KS(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function ER(t){return t&&(t.borderColor||t.backgroundColor)}function AR(){return hn.borderColor!=="rgba(0,0,0,0.1)"||hn.backgroundColor!=="rgba(0,0,0,0.1)"}var OR={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:s},options:a}=t.config,{elements:o}=a,l=KS(s)||ER(a)||o&&KS(o)||AR();if(!n.forceOverride&&l)return;const d=CR(t);s.forEach(d)}};function RR(t,e,n,s,a){const o=a.samples||s;if(o>=n)return t.slice(e,e+n);const l=[],d=(n-2)/(o-2);let h=0;const p=e+n-1;let x=e,y,b,j,T,N;for(l[h++]=t[x],y=0;y<o-2;y++){let M=0,R=0,E;const z=Math.floor((y+1)*d)+1+e,U=Math.min(Math.floor((y+2)*d)+1,n)+e,I=U-z;for(E=z;E<U;E++)M+=t[E].x,R+=t[E].y;M/=I,R/=I;const V=Math.floor(y*d)+1+e,O=Math.min(Math.floor((y+1)*d)+1,n)+e,{x:q,y:Z}=t[x];for(j=T=-1,E=V;E<O;E++)T=.5*Math.abs((q-M)*(t[E].y-Z)-(q-t[E].x)*(R-Z)),T>j&&(j=T,b=t[E],N=E);l[h++]=b,x=N}return l[h++]=t[p],l}function PR(t,e,n,s){let a=0,o=0,l,d,h,p,x,y,b,j,T,N;const M=[],R=e+n-1,E=t[e].x,U=t[R].x-E;for(l=e;l<e+n;++l){d=t[l],h=(d.x-E)/U*s,p=d.y;const I=h|0;if(I===x)p<T?(T=p,y=l):p>N&&(N=p,b=l),a=(o*a+d.x)/++o;else{const V=l-1;if(!bt(y)&&!bt(b)){const O=Math.min(y,b),q=Math.max(y,b);O!==j&&O!==V&&M.push({...t[O],x:a}),q!==j&&q!==V&&M.push({...t[q],x:a})}l>0&&V!==j&&M.push(t[V]),M.push(d),x=I,o=0,T=N=p,y=b=j=l}}return M}function eN(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function ZS(t){t.data.datasets.forEach(e=>{eN(e)})}function LR(t,e){const n=e.length;let s=0,a;const{iScale:o}=t,{min:l,max:d,minDefined:h,maxDefined:p}=o.getUserBounds();return h&&(s=Yn(Oa(e,o.axis,l).lo,0,n-1)),p?a=Yn(Oa(e,o.axis,d).hi+1,s,n)-s:a=n-s,{start:s,count:a}}var zR={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){ZS(t);return}const s=t.width;t.data.datasets.forEach((a,o)=>{const{_data:l,indexAxis:d}=a,h=t.getDatasetMeta(o),p=l||a.data;if(Lu([d,t.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;const x=t.scales[h.xAxisID];if(x.type!=="linear"&&x.type!=="time"||t.options.parsing)return;let{start:y,count:b}=LR(h,p);const j=n.threshold||4*s;if(b<=j){eN(a);return}bt(l)&&(a._data=p,delete a.data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(N){this._data=N}}));let T;switch(n.algorithm){case"lttb":T=RR(p,y,b,s,n);break;case"min-max":T=PR(p,y,b,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}a._decimated=T})},destroy(t){ZS(t)}};function BR(t,e,n){const s=t.segments,a=t.points,o=e.points,l=[];for(const d of s){let{start:h,end:p}=d;p=Ap(h,p,a);const x=Ly(n,a[h],a[p],d.loop);if(!e.segments){l.push({source:d,target:x,start:a[h],end:a[p]});continue}const y=CT(e,x);for(const b of y){const j=Ly(n,o[b.start],o[b.end],b.loop),T=DT(d,a,j);for(const N of T)l.push({source:N,target:b,start:{[n]:QS(x,j,"start",Math.max)},end:{[n]:QS(x,j,"end",Math.min)}})}}return l}function Ly(t,e,n,s){if(s)return;let a=e[t],o=n[t];return t==="angle"&&(a=rs(a),o=rs(o)),{property:t,start:a,end:o}}function VR(t,e){const{x:n=null,y:s=null}=t||{},a=e.points,o=[];return e.segments.forEach(({start:l,end:d})=>{d=Ap(l,d,a);const h=a[l],p=a[d];s!==null?(o.push({x:h.x,y:s}),o.push({x:p.x,y:s})):n!==null&&(o.push({x:n,y:h.y}),o.push({x:n,y:p.y}))}),o}function Ap(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function QS(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function tN(t,e){let n=[],s=!1;return dn(t)?(s=!0,n=t):n=VR(t,e),n.length?new Wa({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function JS(t){return t&&t.fill!==!1}function FR(t,e,n){let a=t[e].fill;const o=[e];let l;if(!n)return a;for(;a!==!1&&o.indexOf(a)===-1;){if(!Sn(a))return a;if(l=t[a],!l)return!1;if(l.visible)return a;o.push(a),a=l.fill}return!1}function HR(t,e,n){const s=WR(t);if(jt(s))return isNaN(s.value)?!1:s;let a=parseFloat(s);return Sn(a)&&Math.floor(a)===a?UR(s[0],e,a,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function UR(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function IR(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:jt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function YR(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:jt(t)?s=t.value:s=e.getBaseValue(),s}function WR(t){const e=t.options,n=e.fill;let s=rt(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function $R(t){const{scale:e,index:n,line:s}=t,a=[],o=s.segments,l=s.points,d=qR(e,n);d.push(tN({x:null,y:e.bottom},s));for(let h=0;h<o.length;h++){const p=o[h];for(let x=p.start;x<=p.end;x++)GR(a,l[x],d)}return new Wa({points:a,options:{}})}function qR(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let a=0;a<s.length;a++){const o=s[a];if(o.index===e)break;o.hidden||n.unshift(o.dataset)}return n}function GR(t,e,n){const s=[];for(let a=0;a<n.length;a++){const o=n[a],{first:l,last:d,point:h}=XR(o,e,"x");if(!(!h||l&&d)){if(l)s.unshift(h);else if(t.push(h),!d)break}}t.push(...s)}function XR(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const a=s[n],o=t.segments,l=t.points;let d=!1,h=!1;for(let p=0;p<o.length;p++){const x=o[p],y=l[x.start][n],b=l[x.end][n];if(Aa(a,y,b)){d=a===y,h=a===b;break}}return{first:d,last:h,point:s}}class nN{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:a,y:o,radius:l}=this;return n=n||{start:0,end:sn},e.arc(a,o,l,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:a}=this,o=e.angle;return{x:n+Math.cos(o)*a,y:s+Math.sin(o)*a,angle:o}}}function KR(t){const{chart:e,fill:n,line:s}=t;if(Sn(n))return ZR(e,n);if(n==="stack")return $R(t);if(n==="shape")return!0;const a=QR(t);return a instanceof nN?a:tN(a,s)}function ZR(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function QR(t){return(t.scale||{}).getPointPositionForValue?eP(t):JR(t)}function JR(t){const{scale:e={},fill:n}=t,s=IR(n,e);if(Sn(s)){const a=e.isHorizontal();return{x:a?s:null,y:a?null:s}}return null}function eP(t){const{scale:e,fill:n}=t,s=e.options,a=e.getLabels().length,o=s.reverse?e.max:e.min,l=YR(n,e,o),d=[];if(s.grid.circular){const h=e.getPointPositionForValue(0,o);return new nN({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(l)})}for(let h=0;h<a;++h)d.push(e.getPointPositionForValue(h,l));return d}function Bx(t,e,n){const s=KR(e),{chart:a,index:o,line:l,scale:d,axis:h}=e,p=l.options,x=p.fill,y=p.backgroundColor,{above:b=y,below:j=y}=x||{},T=a.getDatasetMeta(o),N=ET(a,T);s&&l.points.length&&(Mp(t,n),tP(t,{line:l,target:s,above:b,below:j,area:n,scale:d,axis:h,clip:N}),Dp(t))}function tP(t,e){const{line:n,target:s,above:a,below:o,area:l,scale:d,clip:h}=e,p=n._loop?"angle":e.axis;t.save();let x=o;o!==a&&(p==="x"?(e2(t,s,l.top),Vx(t,{line:n,target:s,color:a,scale:d,property:p,clip:h}),t.restore(),t.save(),e2(t,s,l.bottom)):p==="y"&&(t2(t,s,l.left),Vx(t,{line:n,target:s,color:o,scale:d,property:p,clip:h}),t.restore(),t.save(),t2(t,s,l.right),x=a)),Vx(t,{line:n,target:s,color:x,scale:d,property:p,clip:h}),t.restore()}function e2(t,e,n){const{segments:s,points:a}=e;let o=!0,l=!1;t.beginPath();for(const d of s){const{start:h,end:p}=d,x=a[h],y=a[Ap(h,p,a)];o?(t.moveTo(x.x,x.y),o=!1):(t.lineTo(x.x,n),t.lineTo(x.x,x.y)),l=!!e.pathSegment(t,d,{move:l}),l?t.closePath():t.lineTo(y.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function t2(t,e,n){const{segments:s,points:a}=e;let o=!0,l=!1;t.beginPath();for(const d of s){const{start:h,end:p}=d,x=a[h],y=a[Ap(h,p,a)];o?(t.moveTo(x.x,x.y),o=!1):(t.lineTo(n,x.y),t.lineTo(x.x,x.y)),l=!!e.pathSegment(t,d,{move:l}),l?t.closePath():t.lineTo(n,y.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Vx(t,e){const{line:n,target:s,property:a,color:o,scale:l,clip:d}=e,h=BR(n,s,a);for(const{source:p,target:x,start:y,end:b}of h){const{style:{backgroundColor:j=o}={}}=p,T=s!==!0;t.save(),t.fillStyle=j,nP(t,l,d,T&&Ly(a,y,b)),t.beginPath();const N=!!n.pathSegment(t,p);let M;if(T){N?t.closePath():n2(t,s,b,a);const R=!!s.pathSegment(t,x,{move:N,reverse:!0});M=N&&R,M||n2(t,s,y,a)}t.closePath(),t.fill(M?"evenodd":"nonzero"),t.restore()}}function nP(t,e,n,s){const a=e.chart.chartArea,{property:o,start:l,end:d}=s||{};if(o==="x"||o==="y"){let h,p,x,y;o==="x"?(h=l,p=a.top,x=d,y=a.bottom):(h=a.left,p=l,x=a.right,y=d),t.beginPath(),n&&(h=Math.max(h,n.left),x=Math.min(x,n.right),p=Math.max(p,n.top),y=Math.min(y,n.bottom)),t.rect(h,p,x-h,y-p),t.clip()}}function n2(t,e,n,s){const a=e.interpolate(n,s);a&&t.lineTo(a.x,a.y)}var Op={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,a=[];let o,l,d,h;for(l=0;l<s;++l)o=t.getDatasetMeta(l),d=o.dataset,h=null,d&&d.options&&d instanceof Wa&&(h={visible:t.isDatasetVisible(l),index:l,fill:HR(d,l,s),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:d}),o.$filler=h,a.push(h);for(l=0;l<s;++l)h=a[l],!(!h||h.fill===!1)&&(h.fill=FR(a,l,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",a=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let l=a.length-1;l>=0;--l){const d=a[l].$filler;d&&(d.line.updateControlPoints(o,d.axis),s&&d.fill&&Bx(t.ctx,d,o))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let a=s.length-1;a>=0;--a){const o=s[a].$filler;JS(o)&&Bx(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!JS(s)||n.drawTime!=="beforeDatasetDraw"||Bx(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const s2=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},sP=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class i2 extends Ya{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Zt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Vn(s.font),o=a.size,l=this._computeTitleHeight(),{boxWidth:d,itemHeight:h}=s2(s,o);let p,x;n.font=a.string,this.isHorizontal()?(p=this.maxWidth,x=this._fitRows(l,o,d,h)+10):(x=this.maxHeight,p=this._fitCols(l,a,d,h)+10),this.width=Math.min(p,e.maxWidth||this.maxWidth),this.height=Math.min(x,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:o,maxWidth:l,options:{labels:{padding:d}}}=this,h=this.legendHitBoxes=[],p=this.lineWidths=[0],x=a+d;let y=e;o.textAlign="left",o.textBaseline="middle";let b=-1,j=-x;return this.legendItems.forEach((T,N)=>{const M=s+n/2+o.measureText(T.text).width;(N===0||p[p.length-1]+M+2*d>l)&&(y+=x,p[p.length-(N>0?0:1)]=0,j+=x,b++),h[N]={left:0,top:j,row:b,width:M,height:a},p[p.length-1]+=M+d}),y}_fitCols(e,n,s,a){const{ctx:o,maxHeight:l,options:{labels:{padding:d}}}=this,h=this.legendHitBoxes=[],p=this.columnSizes=[],x=l-e;let y=d,b=0,j=0,T=0,N=0;return this.legendItems.forEach((M,R)=>{const{itemWidth:E,itemHeight:z}=iP(s,n,o,M,a);R>0&&j+z+2*d>x&&(y+=b+d,p.push({width:b,height:j}),T+=b+d,N++,b=j=0),h[R]={left:T,top:j,col:N,width:E,height:z},b=Math.max(b,E),j+=z+d}),y+=b,p.push({width:b,height:j}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:o}}=this,l=Yl(o,this.left,this.width);if(this.isHorizontal()){let d=0,h=is(s,this.left+a,this.right-this.lineWidths[d]);for(const p of n)d!==p.row&&(d=p.row,h=is(s,this.left+a,this.right-this.lineWidths[d])),p.top+=this.top+e+a,p.left=l.leftForLtr(l.x(h),p.width),h+=p.width+a}else{let d=0,h=is(s,this.top+e+a,this.bottom-this.columnSizes[d].height);for(const p of n)p.col!==d&&(d=p.col,h=is(s,this.top+e+a,this.bottom-this.columnSizes[d].height)),p.top=h,p.left+=this.left+a,p.left=l.leftForLtr(l.x(p.left),p.width),h+=p.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Mp(e,this),this._draw(),Dp(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:o,labels:l}=e,d=hn.color,h=Yl(e.rtl,this.left,this.width),p=Vn(l.font),{padding:x}=l,y=p.size,b=y/2;let j;this.drawTitle(),a.textAlign=h.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=p.string;const{boxWidth:T,boxHeight:N,itemHeight:M}=s2(l,y),R=function(V,O,q){if(isNaN(T)||T<=0||isNaN(N)||N<0)return;a.save();const Z=rt(q.lineWidth,1);if(a.fillStyle=rt(q.fillStyle,d),a.lineCap=rt(q.lineCap,"butt"),a.lineDashOffset=rt(q.lineDashOffset,0),a.lineJoin=rt(q.lineJoin,"miter"),a.lineWidth=Z,a.strokeStyle=rt(q.strokeStyle,d),a.setLineDash(rt(q.lineDash,[])),l.usePointStyle){const re={radius:N*Math.SQRT2/2,pointStyle:q.pointStyle,rotation:q.rotation,borderWidth:Z},J=h.xPlus(V,T/2),de=O+b;yT(a,re,J,de,l.pointStyleWidth&&T)}else{const re=O+Math.max((y-N)/2,0),J=h.leftForLtr(V,T),de=Io(q.borderRadius);a.beginPath(),Object.values(de).some(le=>le!==0)?cd(a,{x:J,y:re,w:T,h:N,radius:de}):a.rect(J,re,T,N),a.fill(),Z!==0&&a.stroke()}a.restore()},E=function(V,O,q){Go(a,q.text,V,O+M/2,p,{strikethrough:q.hidden,textAlign:h.textAlign(q.textAlign)})},z=this.isHorizontal(),U=this._computeTitleHeight();z?j={x:is(o,this.left+x,this.right-s[0]),y:this.top+x+U,line:0}:j={x:this.left+x,y:is(o,this.top+U+x,this.bottom-n[0].height),line:0},TT(this.ctx,e.textDirection);const I=M+x;this.legendItems.forEach((V,O)=>{a.strokeStyle=V.fontColor,a.fillStyle=V.fontColor;const q=a.measureText(V.text).width,Z=h.textAlign(V.textAlign||(V.textAlign=l.textAlign)),re=T+b+q;let J=j.x,de=j.y;h.setWidth(this.width),z?O>0&&J+re+x>this.right&&(de=j.y+=I,j.line++,J=j.x=is(o,this.left+x,this.right-s[j.line])):O>0&&de+I>this.bottom&&(J=j.x=J+n[j.line].width+x,j.line++,de=j.y=is(o,this.top+U+x,this.bottom-n[j.line].height));const le=h.x(J);if(R(le,de,V),J=_O(Z,J+T+b,z?J+re:this.right,e.rtl),E(h.x(J),de,V),z)j.x+=re+x;else if(typeof V.text!="string"){const te=p.lineHeight;j.y+=sN(V,te)+x}else j.y+=I}),NT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Vn(n.font),a=us(n.padding);if(!n.display)return;const o=Yl(e.rtl,this.left,this.width),l=this.ctx,d=n.position,h=s.size/2,p=a.top+h;let x,y=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),x=this.top+p,y=is(e.align,y,this.right-b);else{const T=this.columnSizes.reduce((N,M)=>Math.max(N,M.height),0);x=p+is(e.align,this.top,this.bottom-T-e.labels.padding-this._computeTitleHeight())}const j=is(d,y,y+b);l.textAlign=o.textAlign(Fv(d)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=s.string,Go(l,n.text,j,x,s)}_computeTitleHeight(){const e=this.options.title,n=Vn(e.font),s=us(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,o;if(Aa(e,this.left,this.right)&&Aa(n,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(a=o[s],Aa(e,a.left,a.left+a.width)&&Aa(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!oP(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=sP(a,s);a&&!o&&Zt(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!o&&Zt(n.onHover,[e,s,this],this)}else s&&Zt(n.onClick,[e,s,this],this)}}function iP(t,e,n,s,a){const o=aP(s,t,e,n),l=rP(a,s,e.lineHeight);return{itemWidth:o,itemHeight:l}}function aP(t,e,n,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((o,l)=>o.length>l.length?o:l)),e+n.size/2+s.measureText(a).width}function rP(t,e,n){let s=t;return typeof e.text!="string"&&(s=sN(e,n)),s}function sN(t,e){const n=t.text?t.text.length:0;return e*n}function oP(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var rc={id:"legend",_element:i2,start(t,e,n){const s=t.legend=new i2({ctx:t.ctx,options:n,chart:t});os.configure(t,s,n),os.addBox(t,s)},stop(t){os.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;os.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:o,useBorderRadius:l,borderRadius:d}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const p=h.controller.getStyle(n?0:void 0),x=us(p.borderWidth);return{text:e[h.index].label,fillStyle:p.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:p.borderColor,pointStyle:s||p.pointStyle,rotation:p.rotation,textAlign:a||p.textAlign,borderRadius:l&&(d||p.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Zv extends Ya{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=dn(s.text)?s.text.length:1;this._padding=us(s.padding);const o=a*Vn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:o,options:l}=this,d=l.align;let h=0,p,x,y;return this.isHorizontal()?(x=is(d,s,o),y=n+e,p=o-s):(l.position==="left"?(x=s+e,y=is(d,a,n),h=At*-.5):(x=o-e,y=is(d,n,a),h=At*.5),p=a-n),{titleX:x,titleY:y,maxWidth:p,rotation:h}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Vn(n.font),o=s.lineHeight/2+this._padding.top,{titleX:l,titleY:d,maxWidth:h,rotation:p}=this._drawArgs(o);Go(e,n.text,0,0,s,{color:n.color,maxWidth:h,rotation:p,textAlign:Fv(n.align),textBaseline:"middle",translation:[l,d]})}}function lP(t,e){const n=new Zv({ctx:t.ctx,options:e,chart:t});os.configure(t,n,e),os.addBox(t,n),t.titleBlock=n}var Rp={id:"title",_element:Zv,start(t,e,n){lP(t,n)},stop(t){const e=t.titleBlock;os.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;os.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mf=new WeakMap;var cP={id:"subtitle",start(t,e,n){const s=new Zv({ctx:t.ctx,options:n,chart:t});os.configure(t,s,n),os.addBox(t,s),mf.set(t,s)},stop(t){os.removeBox(t,mf.get(t)),mf.delete(t)},beforeUpdate(t,e,n){const s=mf.get(t);os.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bu={average(t){if(!t.length)return!1;let e,n,s=new Set,a=0,o=0;for(e=0,n=t.length;e<n;++e){const d=t[e].element;if(d&&d.hasValue()){const h=d.tooltipPosition();s.add(h.x),a+=h.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((d,h)=>d+h)/s.size,y:a/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,o,l,d;for(o=0,l=t.length;o<l;++o){const h=t[o].element;if(h&&h.hasValue()){const p=h.getCenterPoint(),x=Dy(e,p);x<a&&(a=x,d=h)}}if(d){const h=d.tooltipPosition();n=h.x,s=h.y}return{x:n,y:s}}};function Ii(t,e){return e&&(dn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Da(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function uP(t,e){const{element:n,datasetIndex:s,index:a}=e,o=t.getDatasetMeta(s).controller,{label:l,value:d}=o.getLabelAndValue(a);return{chart:t,label:l,parsed:o.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:d,dataset:o.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function a2(t,e){const n=t.chart.ctx,{body:s,footer:a,title:o}=t,{boxWidth:l,boxHeight:d}=e,h=Vn(e.bodyFont),p=Vn(e.titleFont),x=Vn(e.footerFont),y=o.length,b=a.length,j=s.length,T=us(e.padding);let N=T.height,M=0,R=s.reduce((U,I)=>U+I.before.length+I.lines.length+I.after.length,0);if(R+=t.beforeBody.length+t.afterBody.length,y&&(N+=y*p.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),R){const U=e.displayColors?Math.max(d,h.lineHeight):h.lineHeight;N+=j*U+(R-j)*h.lineHeight+(R-1)*e.bodySpacing}b&&(N+=e.footerMarginTop+b*x.lineHeight+(b-1)*e.footerSpacing);let E=0;const z=function(U){M=Math.max(M,n.measureText(U).width+E)};return n.save(),n.font=p.string,Ht(t.title,z),n.font=h.string,Ht(t.beforeBody.concat(t.afterBody),z),E=e.displayColors?l+2+e.boxPadding:0,Ht(s,U=>{Ht(U.before,z),Ht(U.lines,z),Ht(U.after,z)}),E=0,n.font=x.string,Ht(t.footer,z),n.restore(),M+=T.width,{width:M,height:N}}function dP(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function hP(t,e,n,s){const{x:a,width:o}=s,l=n.caretSize+n.caretPadding;if(t==="left"&&a+o+l>e.width||t==="right"&&a-o-l<0)return!0}function fP(t,e,n,s){const{x:a,width:o}=n,{width:l,chartArea:{left:d,right:h}}=t;let p="center";return s==="center"?p=a<=(d+h)/2?"left":"right":a<=o/2?p="left":a>=l-o/2&&(p="right"),hP(p,t,e,n)&&(p="center"),p}function r2(t,e,n){const s=n.yAlign||e.yAlign||dP(t,n);return{xAlign:n.xAlign||e.xAlign||fP(t,e,n,s),yAlign:s}}function pP(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function mP(t,e,n){let{y:s,height:a}=t;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function o2(t,e,n,s){const{caretSize:a,caretPadding:o,cornerRadius:l}=t,{xAlign:d,yAlign:h}=n,p=a+o,{topLeft:x,topRight:y,bottomLeft:b,bottomRight:j}=Io(l);let T=pP(e,d);const N=mP(e,h,p);return h==="center"?d==="left"?T+=p:d==="right"&&(T-=p):d==="left"?T-=Math.max(x,b)+a:d==="right"&&(T+=Math.max(y,j)+a),{x:Yn(T,0,s.width-e.width),y:Yn(N,0,s.height-e.height)}}function gf(t,e,n){const s=us(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function l2(t){return Ii([],Da(t))}function gP(t,e,n){return Qr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function c2(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const iN={beforeTitle:Ta,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Ta,beforeBody:Ta,beforeLabel:Ta,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return bt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ta,afterBody:Ta,beforeFooter:Ta,footer:Ta,afterFooter:Ta};function Ms(t,e,n,s){const a=t[e].call(n,s);return typeof a>"u"?iN[e].call(n,s):a}let u2=class extends Ya{static positioners=Bu;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,o=new AT(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=gP(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=Ms(s,"beforeTitle",this,e),o=Ms(s,"title",this,e),l=Ms(s,"afterTitle",this,e);let d=[];return d=Ii(d,Da(a)),d=Ii(d,Da(o)),d=Ii(d,Da(l)),d}getBeforeBody(e,n){return l2(Ms(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return Ht(e,o=>{const l={before:[],lines:[],after:[]},d=c2(s,o);Ii(l.before,Da(Ms(d,"beforeLabel",this,o))),Ii(l.lines,Ms(d,"label",this,o)),Ii(l.after,Da(Ms(d,"afterLabel",this,o))),a.push(l)}),a}getAfterBody(e,n){return l2(Ms(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=Ms(s,"beforeFooter",this,e),o=Ms(s,"footer",this,e),l=Ms(s,"afterFooter",this,e);let d=[];return d=Ii(d,Da(a)),d=Ii(d,Da(o)),d=Ii(d,Da(l)),d}_createItems(e){const n=this._active,s=this.chart.data,a=[],o=[],l=[];let d=[],h,p;for(h=0,p=n.length;h<p;++h)d.push(uP(this.chart,n[h]));return e.filter&&(d=d.filter((x,y,b)=>e.filter(x,y,b,s))),e.itemSort&&(d=d.sort((x,y)=>e.itemSort(x,y,s))),Ht(d,x=>{const y=c2(e.callbacks,x);a.push(Ms(y,"labelColor",this,x)),o.push(Ms(y,"labelPointStyle",this,x)),l.push(Ms(y,"labelTextColor",this,x))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=d,d}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let o,l=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const d=Bu[s.position].call(this,a,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const h=this._size=a2(this,s),p=Object.assign({},d,h),x=r2(this.chart,s,p),y=o2(s,p,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,o={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:d.x,caretY:d.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const o=this.getCaretPosition(e,s,a);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:o}=this,{caretSize:l,cornerRadius:d}=s,{topLeft:h,topRight:p,bottomLeft:x,bottomRight:y}=Io(d),{x:b,y:j}=e,{width:T,height:N}=n;let M,R,E,z,U,I;return o==="center"?(U=j+N/2,a==="left"?(M=b,R=M-l,z=U+l,I=U-l):(M=b+T,R=M+l,z=U-l,I=U+l),E=M):(a==="left"?R=b+Math.max(h,x)+l:a==="right"?R=b+T-Math.max(p,y)-l:R=this.caretX,o==="top"?(z=j,U=z-l,M=R-l,E=R+l):(z=j+N,U=z+l,M=R+l,E=R-l),I=z),{x1:M,x2:R,x3:E,y1:z,y2:U,y3:I}}drawTitle(e,n,s){const a=this.title,o=a.length;let l,d,h;if(o){const p=Yl(s.rtl,this.x,this.width);for(e.x=gf(this,s.titleAlign,s),n.textAlign=p.textAlign(s.titleAlign),n.textBaseline="middle",l=Vn(s.titleFont),d=s.titleSpacing,n.fillStyle=s.titleColor,n.font=l.string,h=0;h<o;++h)n.fillText(a[h],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+d,h+1===o&&(e.y+=s.titleMarginBottom-d)}}_drawColorBox(e,n,s,a,o){const l=this.labelColors[s],d=this.labelPointStyles[s],{boxHeight:h,boxWidth:p}=o,x=Vn(o.bodyFont),y=gf(this,"left",o),b=a.x(y),j=h<x.lineHeight?(x.lineHeight-h)/2:0,T=n.y+j;if(o.usePointStyle){const N={radius:Math.min(p,h)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},M=a.leftForLtr(b,p)+p/2,R=T+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Ey(e,N,M,R),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Ey(e,N,M,R)}else{e.lineWidth=jt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const N=a.leftForLtr(b,p),M=a.leftForLtr(a.xPlus(b,1),p-2),R=Io(l.borderRadius);Object.values(R).some(E=>E!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,cd(e,{x:N,y:T,w:p,h,radius:R}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),cd(e,{x:M,y:T+1,w:p-2,h:h-2,radius:R}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(N,T,p,h),e.strokeRect(N,T,p,h),e.fillStyle=l.backgroundColor,e.fillRect(M,T+1,p-2,h-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:o,bodyAlign:l,displayColors:d,boxHeight:h,boxWidth:p,boxPadding:x}=s,y=Vn(s.bodyFont);let b=y.lineHeight,j=0;const T=Yl(s.rtl,this.x,this.width),N=function(q){n.fillText(q,T.x(e.x+j),e.y+b/2),e.y+=b+o},M=T.textAlign(l);let R,E,z,U,I,V,O;for(n.textAlign=l,n.textBaseline="middle",n.font=y.string,e.x=gf(this,M,s),n.fillStyle=s.bodyColor,Ht(this.beforeBody,N),j=d&&M!=="right"?l==="center"?p/2+x:p+2+x:0,U=0,V=a.length;U<V;++U){for(R=a[U],E=this.labelTextColors[U],n.fillStyle=E,Ht(R.before,N),z=R.lines,d&&z.length&&(this._drawColorBox(n,e,U,T,s),b=Math.max(y.lineHeight,h)),I=0,O=z.length;I<O;++I)N(z[I]),b=y.lineHeight;Ht(R.after,N)}j=0,b=y.lineHeight,Ht(this.afterBody,N),e.y-=o}drawFooter(e,n,s){const a=this.footer,o=a.length;let l,d;if(o){const h=Yl(s.rtl,this.x,this.width);for(e.x=gf(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=h.textAlign(s.footerAlign),n.textBaseline="middle",l=Vn(s.footerFont),n.fillStyle=s.footerColor,n.font=l.string,d=0;d<o;++d)n.fillText(a[d],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:o,yAlign:l}=this,{x:d,y:h}=e,{width:p,height:x}=s,{topLeft:y,topRight:b,bottomLeft:j,bottomRight:T}=Io(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(d+y,h),l==="top"&&this.drawCaret(e,n,s,a),n.lineTo(d+p-b,h),n.quadraticCurveTo(d+p,h,d+p,h+b),l==="center"&&o==="right"&&this.drawCaret(e,n,s,a),n.lineTo(d+p,h+x-T),n.quadraticCurveTo(d+p,h+x,d+p-T,h+x),l==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(d+j,h+x),n.quadraticCurveTo(d,h+x,d,h+x-j),l==="center"&&o==="left"&&this.drawCaret(e,n,s,a),n.lineTo(d,h+y),n.quadraticCurveTo(d,h,d+y,h),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,o=s&&s.y;if(a||o){const l=Bu[e.position].call(this,this._active,this._eventPosition);if(!l)return;const d=this._size=a2(this,e),h=Object.assign({},l,this._size),p=r2(n,e,h),x=o2(e,h,p,n);(a._to!==x.x||o._to!==x.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=d.width,this.height=d.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=us(n.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&d&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,a,n),TT(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),NT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:d,index:h})=>{const p=this.chart.getDatasetMeta(d);if(!p)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:p.data[h],index:h}}),o=!Gf(s,a),l=this._positionChanged(a,n);(o||l)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,s),d=this._positionChanged(l,e),h=n||!Gf(l,o)||d;return h&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),h}_getActiveElements(e,n,s,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:s,caretY:a,options:o}=this,l=Bu[o.position].call(this,e,n);return l!==!1&&(s!==l.x||a!==l.y)}};var oc={id:"tooltip",_element:u2,positioners:Bu,afterInit(t,e,n){n&&(t.tooltip=new u2({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:iN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xP=Object.freeze({__proto__:null,Colors:OR,Decimation:zR,Filler:Op,Legend:rc,SubTitle:cP,Title:Rp,Tooltip:oc});const yP=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function vP(t,e,n,s){const a=t.indexOf(e);if(a===-1)return yP(t,e,n,s);const o=t.lastIndexOf(e);return a!==o?n:a}const bP=(t,e)=>t===null?null:Yn(Math.round(t),0,e);function d2(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class jd extends Zo{static id="category";static defaults={ticks:{callback:d2}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:o}of n)s[a]===o&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(bt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:vP(s,e,rt(n,e),this._addedLabels),bP(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=e;l<=n;l++)a.push({value:l});return a}getLabelForValue(e){return d2.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function _P(t,e){const n=[],{bounds:a,step:o,min:l,max:d,precision:h,count:p,maxTicks:x,maxDigits:y,includeBounds:b}=t,j=o||1,T=x-1,{min:N,max:M}=e,R=!bt(l),E=!bt(d),z=!bt(p),U=(M-N)/(y+1);let I=aS((M-N)/T/j)*j,V,O,q,Z;if(I<1e-14&&!R&&!E)return[{value:N},{value:M}];Z=Math.ceil(M/I)-Math.floor(N/I),Z>T&&(I=aS(Z*I/T/j)*j),bt(h)||(V=Math.pow(10,h),I=Math.ceil(I*V)/V),a==="ticks"?(O=Math.floor(N/I)*I,q=Math.ceil(M/I)*I):(O=N,q=M),R&&E&&o&&pO((d-l)/o,I/1e3)?(Z=Math.round(Math.min((d-l)/I,x)),I=(d-l)/Z,O=l,q=d):z?(O=R?l:O,q=E?d:q,Z=p-1,I=(q-O)/Z):(Z=(q-O)/I,qu(Z,Math.round(Z),I/1e3)?Z=Math.round(Z):Z=Math.ceil(Z));const re=Math.max(rS(I),rS(O));V=Math.pow(10,bt(h)?re:h),O=Math.round(O*V)/V,q=Math.round(q*V)/V;let J=0;for(R&&(b&&O!==l?(n.push({value:l}),O<l&&J++,qu(Math.round((O+J*I)*V)/V,l,h2(l,U,t))&&J++):O<l&&J++);J<Z;++J){const de=Math.round((O+J*I)*V)/V;if(E&&de>d)break;n.push({value:de})}return E&&b&&q!==d?n.length&&qu(n[n.length-1].value,d,h2(d,U,t))?n[n.length-1].value=d:n.push({value:d}):(!E||q===d)&&n.push({value:q}),n}function h2(t,e,{horizontal:n,minRotation:s}){const a=Ti(s),o=(n?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/o,l)}class tp extends Zo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return bt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:o}=this;const l=h=>a=n?a:h,d=h=>o=s?o:h;if(e){const h=qi(a),p=qi(o);h<0&&p<0?d(0):h>0&&p>0&&l(0)}if(a===o){let h=o===0?1:Math.abs(o*.05);d(o+h),e||l(a-h)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,l=_P(a,o);return e.bounds==="ticks"&&cT(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Sd(e,this.chart.options.locale,this.options.ticks.format)}}class kd extends tp{static id="linear";static defaults={ticks:{callback:Np.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Sn(e)?e:0,this.max=Sn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Ti(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const dd=t=>Math.floor(Lr(t)),Co=(t,e)=>Math.pow(10,dd(t)+e);function f2(t){return t/Math.pow(10,dd(t))===1}function p2(t,e,n){const s=Math.pow(10,n),a=Math.floor(t/s);return Math.ceil(e/s)-a}function wP(t,e){const n=e-t;let s=dd(n);for(;p2(t,e,s)>10;)s++;for(;p2(t,e,s)<10;)s--;return Math.min(s,dd(t))}function SP(t,{min:e,max:n}){e=Vs(t.min,e);const s=[],a=dd(e);let o=wP(e,n),l=o<0?Math.pow(10,Math.abs(o)):1;const d=Math.pow(10,o),h=a>o?Math.pow(10,a):0,p=Math.round((e-h)*l)/l,x=Math.floor((e-h)/d/10)*d*10;let y=Math.floor((p-x)/Math.pow(10,o)),b=Vs(t.min,Math.round((h+x+y*Math.pow(10,o))*l)/l);for(;b<n;)s.push({value:b,major:f2(b),significand:y}),y>=10?y=y<15?15:20:y++,y>=20&&(o++,y=2,l=o>=0?1:l),b=Math.round((h+x+y*Math.pow(10,o))*l)/l;const j=Vs(t.max,b);return s.push({value:j,major:f2(j),significand:y}),s}class jP extends Zo{static id="logarithmic";static defaults={ticks:{callback:Np.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const s=tp.prototype.parse.apply(this,[e,n]);if(s===0){this._zero=!0;return}return Sn(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Sn(e)?Math.max(0,e):null,this.max=Sn(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Sn(this._userMin)&&(this.min=e===Co(this.min,0)?Co(this.min,-1):Co(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let s=this.min,a=this.max;const o=d=>s=e?s:d,l=d=>a=n?a:d;s===a&&(s<=0?(o(1),l(10)):(o(Co(s,-1)),l(Co(a,1)))),s<=0&&o(Co(a,-1)),a<=0&&l(Co(s,1)),this.min=s,this.max=a}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},s=SP(n,this);return e.bounds==="ticks"&&cT(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":Sd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Lr(e),this._valueRange=Lr(this.max)-Lr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Lr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function zy(t){const e=t.ticks;if(e.display&&t.display){const n=us(e.backdropPadding);return rt(e.font&&e.font.size,hn.font.size)+n.height}return 0}function kP(t,e,n){return n=dn(n)?n:[n],{w:EO(t,e.string,n),h:n.length*e.lineHeight}}function m2(t,e,n,s,a){return t===s||t===a?{start:e-n/2,end:e+n/2}:t<s||t>a?{start:e-n,end:e}:{start:e,end:e+n}}function TP(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),s=[],a=[],o=t._pointLabels.length,l=t.options.pointLabels,d=l.centerPointLabels?At/o:0;for(let h=0;h<o;h++){const p=l.setContext(t.getPointLabelContext(h));a[h]=p.padding;const x=t.getPointPosition(h,t.drawingArea+a[h],d),y=Vn(p.font),b=kP(t.ctx,y,t._pointLabels[h]);s[h]=b;const j=rs(t.getIndexAngle(h)+d),T=Math.round(Bv(j)),N=m2(T,x.x,b.w,0,180),M=m2(T,x.y,b.h,90,270);NP(n,e,j,N,M)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=CP(t,s,a)}function NP(t,e,n,s,a){const o=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let d=0,h=0;s.start<e.l?(d=(e.l-s.start)/o,t.l=Math.min(t.l,e.l-d)):s.end>e.r&&(d=(s.end-e.r)/o,t.r=Math.max(t.r,e.r+d)),a.start<e.t?(h=(e.t-a.start)/l,t.t=Math.min(t.t,e.t-h)):a.end>e.b&&(h=(a.end-e.b)/l,t.b=Math.max(t.b,e.b+h))}function MP(t,e,n){const s=t.drawingArea,{extra:a,additionalAngle:o,padding:l,size:d}=n,h=t.getPointPosition(e,s+a+l,o),p=Math.round(Bv(rs(h.angle+Dn))),x=OP(h.y,d.h,p),y=EP(p),b=AP(h.x,d.w,y);return{visible:!0,x:h.x,y:x,textAlign:y,left:b,top:x,right:b+d.w,bottom:x+d.h}}function DP(t,e){if(!e)return!0;const{left:n,top:s,right:a,bottom:o}=t;return!(Ra({x:n,y:s},e)||Ra({x:n,y:o},e)||Ra({x:a,y:s},e)||Ra({x:a,y:o},e))}function CP(t,e,n){const s=[],a=t._pointLabels.length,o=t.options,{centerPointLabels:l,display:d}=o.pointLabels,h={extra:zy(o)/2,additionalAngle:l?At/a:0};let p;for(let x=0;x<a;x++){h.padding=n[x],h.size=e[x];const y=MP(t,x,h);s.push(y),d==="auto"&&(y.visible=DP(y,p),y.visible&&(p=y))}return s}function EP(t){return t===0||t===180?"center":t<180?"left":"right"}function AP(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function OP(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function RP(t,e,n){const{left:s,top:a,right:o,bottom:l}=n,{backdropColor:d}=e;if(!bt(d)){const h=Io(e.borderRadius),p=us(e.backdropPadding);t.fillStyle=d;const x=s-p.left,y=a-p.top,b=o-s+p.width,j=l-a+p.height;Object.values(h).some(T=>T!==0)?(t.beginPath(),cd(t,{x,y,w:b,h:j,radius:h}),t.fill()):t.fillRect(x,y,b,j)}}function PP(t,e){const{ctx:n,options:{pointLabels:s}}=t;for(let a=e-1;a>=0;a--){const o=t._pointLabelItems[a];if(!o.visible)continue;const l=s.setContext(t.getPointLabelContext(a));RP(n,l,o);const d=Vn(l.font),{x:h,y:p,textAlign:x}=o;Go(n,t._pointLabels[a],h,p+d.lineHeight/2,d,{color:l.color,textAlign:x,textBaseline:"middle"})}}function aN(t,e,n,s){const{ctx:a}=t;if(n)a.arc(t.xCenter,t.yCenter,e,0,sn);else{let o=t.getPointPosition(0,e);a.moveTo(o.x,o.y);for(let l=1;l<s;l++)o=t.getPointPosition(l,e),a.lineTo(o.x,o.y)}}function LP(t,e,n,s,a){const o=t.ctx,l=e.circular,{color:d,lineWidth:h}=e;!l&&!s||!d||!h||n<0||(o.save(),o.strokeStyle=d,o.lineWidth=h,o.setLineDash(a.dash||[]),o.lineDashOffset=a.dashOffset,o.beginPath(),aN(t,n,l,s),o.closePath(),o.stroke(),o.restore())}function zP(t,e,n){return Qr(t,{label:n,index:e,type:"pointLabel"})}class rN extends tp{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Np.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=us(zy(this.options)/2),n=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Sn(e)&&!isNaN(e)?e:0,this.max=Sn(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/zy(this.options))}generateTickLabels(e){tp.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,s)=>{const a=Zt(this.options.pointLabels.callback,[n,s],this);return a||a===0?a:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?TP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,s,a){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((s-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,s,a))}getIndexAngle(e){const n=sn/(this._pointLabels.length||1),s=this.options.startAngle||0;return rs(e*n+Ti(s))}getDistanceFromCenterForValue(e){if(bt(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(bt(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const s=n[e];return zP(this.getContext(),e,s)}}getPointPosition(e,n,s=0){const a=this.getIndexAngle(e)-Dn+s;return{x:Math.cos(a)*n+this.xCenter,y:Math.sin(a)*n+this.yCenter,angle:a}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:s,right:a,bottom:o}=this._pointLabelItems[e];return{left:n,top:s,right:a,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),aN(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:s,grid:a,border:o}=n,l=this._pointLabels.length;let d,h,p;if(n.pointLabels.display&&PP(this,l),a.display&&this.ticks.forEach((x,y)=>{if(y!==0||y===0&&this.min<0){h=this.getDistanceFromCenterForValue(x.value);const b=this.getContext(y),j=a.setContext(b),T=o.setContext(b);LP(this,j,h,l,T)}}),s.display){for(e.save(),d=l-1;d>=0;d--){const x=s.setContext(this.getPointLabelContext(d)),{color:y,lineWidth:b}=x;!b||!y||(e.lineWidth=b,e.strokeStyle=y,e.setLineDash(x.borderDash),e.lineDashOffset=x.borderDashOffset,h=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),p=this.getPointPosition(d,h),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(p.x,p.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const a=this.getIndexAngle(0);let o,l;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((d,h)=>{if(h===0&&this.min>=0&&!n.reverse)return;const p=s.setContext(this.getContext(h)),x=Vn(p.font);if(o=this.getDistanceFromCenterForValue(this.ticks[h].value),p.showLabelBackdrop){e.font=x.string,l=e.measureText(d.label).width,e.fillStyle=p.backdropColor;const y=us(p.backdropPadding);e.fillRect(-l/2-y.left,-o-x.size/2-y.top,l+y.width,x.size+y.height)}Go(e,d.label,0,-o,x,{color:p.color,strokeColor:p.textStrokeColor,strokeWidth:p.textStrokeWidth})}),e.restore()}drawTitle(){}}const Pp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Cs=Object.keys(Pp);function g2(t,e){return t-e}function x2(t,e){if(bt(e))return null;const n=t._adapter,{parser:s,round:a,isoWeekday:o}=t._parseOpts;let l=e;return typeof s=="function"&&(l=s(l)),Sn(l)||(l=typeof s=="string"?n.parse(l,s):n.parse(l)),l===null?null:(a&&(l=a==="week"&&(Kl(o)||o===!0)?n.startOf(l,"isoWeek",o):n.startOf(l,a)),+l)}function y2(t,e,n,s){const a=Cs.length;for(let o=Cs.indexOf(t);o<a-1;++o){const l=Pp[Cs[o]],d=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(d*l.size))<=s)return Cs[o]}return Cs[a-1]}function BP(t,e,n,s,a){for(let o=Cs.length-1;o>=Cs.indexOf(n);o--){const l=Cs[o];if(Pp[l].common&&t._adapter.diff(a,s,l)>=e-1)return l}return Cs[n?Cs.indexOf(n):0]}function VP(t){for(let e=Cs.indexOf(t)+1,n=Cs.length;e<n;++e)if(Pp[Cs[e]].common)return Cs[e]}function v2(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:a}=Vv(n,e),o=n[s]>=e?n[s]:n[a];t[o]=!0}}function FP(t,e,n,s){const a=t._adapter,o=+a.startOf(e[0].value,s),l=e[e.length-1].value;let d,h;for(d=o;d<=l;d=+a.add(d,1,s))h=n[d],h>=0&&(e[h].major=!0);return e}function b2(t,e,n){const s=[],a={},o=e.length;let l,d;for(l=0;l<o;++l)d=e[l],a[d]=l,s.push({value:d,major:!1});return o===0||!n?s:FP(t,s,a,n)}class np extends Zo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new VT._date(e.adapters.date);a.init(n),$u(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:x2(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:o,minDefined:l,maxDefined:d}=this.getUserBounds();function h(p){!l&&!isNaN(p.min)&&(a=Math.min(a,p.min)),!d&&!isNaN(p.max)&&(o=Math.max(o,p.max))}(!l||!d)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),a=Sn(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),o=Sn(o)&&!isNaN(o)?o:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,l=this.max,d=yO(a,o,l);return this._unit=n.unit||(s.autoSkip?y2(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):BP(this,d.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:VP(this._unit),this.initOffsets(a),e.reverse&&d.reverse(),b2(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?s=o:s=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=Yn(n,0,l),s=Yn(s,0,l),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,o=a.time,l=o.unit||y2(o.minUnit,n,s,this._getLabelCapacity(n)),d=rt(a.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,p=Kl(h)||h===!0,x={};let y=n,b,j;if(p&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,p?"day":l),e.diff(s,n,l)>1e5*d)throw new Error(n+" and "+s+" are too far apart with stepSize of "+d+" "+l);const T=a.ticks.source==="data"&&this.getDataTimestamps();for(b=y,j=0;b<s;b=+e.add(b,d,l),j++)v2(x,b,T);return(b===s||a.bounds==="ticks"||j===1)&&v2(x,b,T),Object.keys(x).sort(g2).map(N=>+N)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,o=this._unit,l=n||a[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,s,a){const o=this.options,l=o.ticks.callback;if(l)return Zt(l,[e,n,s],this);const d=o.time.displayFormats,h=this._unit,p=this._majorUnit,x=h&&d[h],y=p&&d[p],b=s[n],j=p&&y&&b&&b.major;return this._adapter.format(e,a||(j?y:x))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=Ti(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(a),l=Math.sin(a),d=this._resolveTickFontOptions(0).size;return{w:s*o+d*l,h:s*l+d*o}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,o=this._tickFormatFunction(e,0,b2(this,[e],this._majorUnit),a),l=this._getLabelSize(o),d=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(x2(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return hT(e.sort(g2))}}function xf(t,e,n){let s=0,a=t.length-1,o,l,d,h;n?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=Oa(t,"pos",e)),{pos:o,time:d}=t[s],{pos:l,time:h}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=Oa(t,"time",e)),{time:o,pos:d}=t[s],{time:l,pos:h}=t[a]);const p=l-o;return p?d+(h-d)*(e-o)/p:d}class HP extends np{static id="timeseries";static defaults=np.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=xf(n,this.min),this._tableRange=xf(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],o=[];let l,d,h,p,x;for(l=0,d=e.length;l<d;++l)p=e[l],p>=n&&p<=s&&a.push(p);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(l=0,d=a.length;l<d;++l)x=a[l+1],h=a[l-1],p=a[l],Math.round((x+h)/2)!==p&&o.push({time:p,pos:l/(d-1)});return o}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(xf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return xf(this._table,s*this._tableRange+this._minPos,!0)}}var UP=Object.freeze({__proto__:null,CategoryScale:jd,LinearScale:kd,LogarithmicScale:jP,RadialLinearScale:rN,TimeScale:np,TimeSeriesScale:HP});const IP=[K3,TR,xP,UP];li.register(...IP);const Vr={labels:Array.from({length:24},(t,e)=>`${String(e).padStart(2,"0")}:00`),load:Array.from({length:24},()=>+(Math.random()*2.2+.6).toFixed(2)),pv:Array.from({length:24},(t,e)=>+(Math.max(0,Math.sin((e-6)/4))*2.4).toFixed(2)),price:Array.from({length:24},()=>+(Math.random()*3.2+.8).toFixed(2))},oN="Europe/Stockholm";function Qv(t){return new Date(t)}function sp(t,e=oN){return new Intl.DateTimeFormat("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:e}).format(t)}function Td(t,e=new Date){return sp(Qv(t))===sp(e)}function Xo(t,e=new Date){const n=new Date(e);return n.setDate(n.getDate()+1),sp(Qv(t))===sp(n)}function Fx(t){const e=Qv(t);return new Intl.DateTimeFormat("sv-SE",{hour:"2-digit",minute:"2-digit",timeZone:oN}).format(e)}function YP(t,e,n=new Date){return t.filter(a=>e==="today"?Td(a.start_time,n):Xo(a.start_time,n))}const WP={maintainAspectRatio:!1,spanGaps:!1,animation:!1,plugins:{legend:{display:!1,labels:{color:"#e6e9ef",boxWidth:10,font:{size:12},filter:()=>!1}},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:"rgba(30, 30, 46, 0.95)",titleColor:"#e6e9ef",bodyColor:"#a6b0bf",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:12,displayColors:!0,caretPadding:8,yAlign:"bottom",callbacks:{title:function(t){return t[0].label},label:function(t){const e=t.dataset.label||"",n=t.parsed.y;if(n==null)return null;let s=n.toFixed(2),a="";return e.includes("SEK/kWh")?(s=n.toFixed(2),a=" SEK/kWh"):e.includes("kW")?(s=n.toFixed(1),a=" kW"):e.includes("kWh")?(s=n.toFixed(2),a=" kWh"):e.includes("%")&&(s=n.toFixed(1),a="%"),`${e}: ${s}${a}`}}}},scales:{x:{grid:{color:"rgba(255,255,255,0.06)"},ticks:{color:"#a6b0bf",maxRotation:0,autoSkip:!1,callback:function(t,e,n){const s=this?.getLabelForValue?this.getLabelForValue(t):n[e]?.label;if(typeof s!="string")return"";const a=s.split(":");if(a.length<2)return"";const[o,l]=a;return l==="00"?o:""}}},y:{position:"right",min:0,max:8,title:{display:!1,text:"SEK/kWh",color:"#a6b0bf"},grid:{color:"rgba(255,255,255,0.06)"},ticks:{color:"#a6b0bf",display:!1}},y1:{position:"left",min:0,max:9,title:{display:!1,text:"kW",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf",display:!1}},y2:{position:"left",min:0,max:9,title:{display:!1,text:"kWh",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf",display:!1},display:!1},y3:{position:"right",min:0,max:100,title:{display:!0,text:"%",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf"},display:!1},y4:{position:"left",min:0,max:1.5,title:{display:!1,text:"kW (PV)",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf",display:!1}}}},Ll=(t,e={})=>{const n=(a,o)=>{const l=`palette = ${a}`;return e[l]||o},s={labels:t.labels,datasets:[{type:"line",label:"Import Price (SEK/kWh)",data:t.price,borderColor:n(4,"#2196F3"),backgroundColor:e["palette = 4"]?`${n(4,"#2196F3")}20`:"rgba(33,150,243,0.1)",yAxisID:"y",tension:0,stepped:"after",pointRadius:0},{type:"line",label:"PV Forecast (kW)",data:t.pv,borderColor:n(2,"#4CAF50"),backgroundColor:e["palette = 2"]?`${n(2,"#4CAF50")}30`:"rgba(76,175,80,0.15)",fill:!0,yAxisID:"y4",tension:.35,pointRadius:0},{type:"bar",label:"Load (kW)",data:t.load,backgroundColor:`${n(3,"#FF9800")}80`,borderRadius:0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Charge (kW)",data:t.charge??t.labels.map(()=>null),backgroundColor:`${n(4,"#2196F3")}80`,hidden:!0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Discharge (kW)",data:t.discharge??t.labels.map(()=>null),backgroundColor:`${n(1,"#F44336")}80`,hidden:!0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Export (kWh)",data:t.export??t.labels.map(()=>null),backgroundColor:`${n(2,"#4CAF50")}80`,hidden:!0,yAxisID:"y2",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Water Heating (kW)",data:t.water??t.labels.map(()=>null),backgroundColor:`${n(5,"#FF5722")}80`,hidden:!0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"line",label:"SoC Target (%)",data:t.socTarget??t.labels.map(()=>null),borderColor:n(13,"#9C27B0"),yAxisID:"y3",pointRadius:0,tension:0,stepped:"after",hidden:!0},{type:"line",label:"SoC Projected (%)",data:t.socProjected??t.labels.map(()=>null),borderColor:n(14,"#FFEB3B"),yAxisID:"y3",pointRadius:0,hidden:!0},{type:"line",label:"SoC Actual (%)",data:t.socActual??t.labels.map(()=>null),borderColor:n(15,"#80CBC4"),yAxisID:"y3",pointRadius:0,hidden:!0}]};return t.hasNoData&&(s.plugins={...s.plugins,tooltip:{enabled:!0,external:!0,callbacks:{title:()=>t.day==="tomorrow"?"No Price Data":"No Data",label:()=>t.day==="tomorrow"?"Schedule data not available yet. Check back later for prices.":"No schedule data available."}}}),{...s,nowIndex:t.nowIndex??null}};Ll({labels:Vr.labels,price:Vr.price,pv:Vr.pv,load:Vr.load},{});function Nd({day:t="today",range:e="day",refreshToken:n=0,showDayToggle:s=!0,useHistoryForToday:a=!1,slotsOverride:o}){const[l,d]=A.useState(t),[h,p]=A.useState(e),x=A.useRef(null),y=A.useRef(null),[b,j]=A.useState({}),[T,N]=A.useState(""),[M,R]=A.useState({price:!0,pv:!0,load:!0,charge:!1,discharge:!1,export:!1,water:!1,socTarget:!1,socProjected:!1,socActual:!0}),[E,z]=A.useState(!1);A.useEffect(()=>{De.config().then(Z=>{const re=Z?.dashboard?.overlay_defaults;if(re&&typeof re=="string"){const J=re.split(",").map(te=>te.trim().toLowerCase()),de=J.includes("socactual")||J.includes("soc_actual"),le={price:!J.includes("price_off"),pv:!J.includes("pv_off"),load:!J.includes("load_off"),charge:J.includes("charge"),discharge:J.includes("discharge"),export:J.includes("export"),water:J.includes("water"),socTarget:J.includes("soctarget")||J.includes("soc_target"),socProjected:J.includes("socprojected")||J.includes("soc_projected"),socActual:de?!0:M.socActual};R(le)}}).catch(Z=>console.error("Failed to load overlay defaults:",Z))},[]);const[U,I]=A.useState(null);A.useEffect(()=>{De.theme().then(Z=>{const re=Z.themes.find(J=>J.name===Z.current);if(re){const J={};re.palette.forEach((de,le)=>{J[`palette = ${le}`]=de}),J.background=re.background,J.foreground=re.foreground,j(J),N(Z.current)}}).catch(Z=>console.error("Failed to load theme colors:",Z))},[]),A.useEffect(()=>{if(!x.current||Object.keys(b).length===0)return;const Z={type:"bar",data:Ll({labels:Vr.labels,price:Vr.price,pv:Vr.pv,load:Vr.load},b),options:WP};return y.current=new li(x.current,Z),()=>{y.current&&(y.current.destroy(),y.current=null)}},[b]);const V=Z=>{if(!Z)return!1;const re=Z;return!(re._destroyed||re._plugins===void 0&&re.$plugins===void 0)};A.useEffect(()=>{p(e)},[e]),A.useEffect(()=>{const Z=y.current;if(!V(Z)||Object.keys(b).length===0)return;const re=de=>{if(!V(y.current))return;const le=$P(de,l,h,b);if(!le)return;q(le.hasNoData??!1);const te=le.datasets;te[0]&&(te[0].hidden=!M.price),te[1]&&(te[1].hidden=!M.pv),te[2]&&(te[2].hidden=!M.load),te[3]&&(te[3].hidden=!M.charge),te[4]&&(te[4].hidden=!M.discharge),te[5]&&(te[5].hidden=!M.export),te[6]&&(te[6].hidden=!M.water),te[7]&&(te[7].hidden=!M.socTarget),te[8]&&(te[8].hidden=!M.socProjected),te[9]&&(te[9].hidden=!M.socActual);const se=le;if(l==="today"&&typeof se.nowIndex=="number"&&se.nowIndex>=0&&le.labels.length>1){const W=se.nowIndex,X=le.labels.length-1;I(W/X)}else I(null);try{if(!V(y.current))return;y.current&&(y.current.data=le,y.current.update())}catch(W){console.error("Chart update failed, skipping frame:",W)}};if(o&&o.length){re(o);return}(a&&h==="day"&&l==="today"?De.scheduleTodayWithHistory().then(de=>({schedule:de.slots})):De.schedule()).then(de=>{re(de.schedule??[])}).catch(de=>{console.error("Failed to load schedule:",de),q(!0),I(null)})},[l,M,b,h,n,o,a]);const[O,q]=A.useState(!1);return u.jsxs(Ge,{className:"p-4 md:p-6 h-[380px]",children:[u.jsxs("div",{className:"flex items-baseline justify-between pb-2",children:[u.jsx("div",{className:"text-sm text-muted",children:"Schedule Overview"}),s&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{className:`rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition ${h==="day"?"bg-accent text-canvas":"bg-surface border border-line/60 text-muted"}`,onClick:()=>p("day"),children:"24h"}),u.jsx("button",{className:`rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition ${h==="48h"?"bg-accent text-canvas":"bg-surface border border-line/60 text-muted"}`,onClick:()=>p("48h"),children:"48h"})]}),u.jsx("button",{className:"rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide border border-line/60 text-muted hover:border-accent hover:text-accent transition",onClick:()=>z(Z=>!Z),children:"Overlays"})]})]}),E&&u.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px]",children:[["Price","price"],["PV","pv"],["Load","load"],["Charge","charge"],["Discharge","discharge"],["Export","export"],["Water","water"],["SoC Target","socTarget"],["SoC Projected","socProjected"],["SoC Actual","socActual"]].map(([Z,re])=>u.jsx("button",{onClick:J=>{J.preventDefault(),R(de=>({...de,[re]:!de[re]}))},className:`rounded-pill px-3 py-1 border ${M[re]?"bg-accent text-canvas border-accent":"border-line/60 text-muted hover:border-accent"}`,children:Z},re))}),u.jsxs("div",{className:"h-[310px] relative mt-1",children:[O&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-surface/90 rounded-lg",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-lg font-semibold text-accent mb-2",children:"No Price Data"}),u.jsx("div",{className:"text-sm text-muted",children:"Schedule data not available yet. Check back later for prices."})]})}),!O&&l==="today"&&U!==null&&u.jsx("div",{className:"pointer-events-none absolute inset-0 z-10",children:u.jsx("div",{className:"absolute top-2 bottom-6 border-l-2 border-accent/80",style:{left:`${U*100}%`}})}),u.jsx("canvas",{ref:x,style:{display:O?"none":"block"}})]})]})}function $P(t,e,n,s={}){const a=n==="day"?YP(t,e):t.filter(E=>Td(E.start_time)||Xo(E.start_time));if(n==="day"){if(!a.length){const F=Array.from({length:24},(xe,H)=>`${String(H).padStart(2,"0")}:00`),ee=Array(24).fill(null);return Ll({labels:F,price:ee.slice(),pv:ee.slice(),load:ee.slice(),charge:ee.slice(),discharge:ee.slice(),export:ee.slice(),water:ee.slice(),socTarget:ee.slice(),socProjected:ee.slice(),socActual:ee.slice(),hasNoData:!0,day:e},s)}const E=[...a].sort((F,ee)=>{const xe=new Date(F.start_time).getTime(),H=new Date(ee.start_time).getTime();return xe-H});let z=15;if(E.length>=2){const F=new Date(E[0].start_time).getTime(),ee=new Date(E[1].start_time).getTime(),xe=Math.max(1,Math.round((ee-F)/6e4));(xe===15||xe===30||xe===60)&&(z=xe)}const U=new Date;e==="today"||U.setDate(U.getDate()+1),U.setHours(0,0,0,0);const I=z*60*1e3,V=Math.round(1440/z),O=new Map;for(const F of E){const ee=new Date(F.start_time).getTime();O.set(ee,F)}const q=[],Z=[],re=[],J=[],de=[],le=[],te=[],se=[],W=[],X=[],ae=[];let oe=null;const me=new Date;for(let F=0;F<V;F++){const ee=new Date(U.getTime()+F*I),xe=new Date(ee.getTime()+I),H=O.get(ee.getTime());if(q.push(Fx(ee.toISOString())),H){const pe=H.is_executed===!0,Se=H;Z.push(H.import_price_sek_kwh??null),re.push(pe&&Se.actual_pv_kwh!=null?Se.actual_pv_kwh:H.pv_forecast_kwh??null),J.push(pe&&Se.actual_load_kwh!=null?Se.actual_load_kwh:H.load_forecast_kwh??null),de.push(pe&&Se.actual_charge_kw!=null?Se.actual_charge_kw:H.battery_charge_kw??H.charge_kw??null),le.push(H.battery_discharge_kw??H.discharge_kw??null),te.push(pe&&Se.actual_export_kw!=null?Se.actual_export_kw:H.export_kwh??null),se.push(H.water_heating_kw??null),W.push(H.soc_target_percent??null),X.push(H.projected_soc_percent??null),ae.push(Se.soc_actual_percent!=null?Se.soc_actual_percent:null)}else Z.push(null),re.push(null),J.push(null),de.push(null),le.push(null),te.push(null),se.push(null),W.push(null),X.push(null),ae.push(null);e==="today"&&me>=ee&&me<xe&&(oe=F)}return Ll({labels:q,price:Z,pv:re,load:J,charge:de,discharge:le,export:te,water:se,socTarget:W,socProjected:X,socActual:ae,nowIndex:oe},s)}if(n==="48h"){if(!a.length){console.log("[buildLiveData] No slots found for 48h range, creating fallback");const F=Array.from({length:48},(ee,xe)=>{const H=xe%24;return`${String(H).padStart(2,"0")}:00`});return{labels:F,price:Array(F.length).fill(null),pv:Array(F.length).fill(null),load:Array(F.length).fill(null),charge:Array(F.length).fill(null),discharge:Array(F.length).fill(null),export:Array(F.length).fill(null),water:Array(F.length).fill(null),socTarget:Array(F.length).fill(null),socProjected:Array(F.length).fill(null),hasNoData:!0,day:e}}const E=[...a].sort((F,ee)=>{const xe=new Date(F.start_time).getTime(),H=new Date(ee.start_time).getTime();return xe-H});let z=15;if(E.length>=2){const F=new Date(E[0].start_time).getTime(),ee=new Date(E[1].start_time).getTime(),xe=Math.max(1,Math.round((ee-F)/6e4));(xe===15||xe===30||xe===60)&&(z=xe)}const U=new Date;U.setHours(0,0,0,0);const I=z*60*1e3,V=Math.round(2880/z),O=new Map;for(const F of E){const ee=new Date(F.start_time).getTime();O.set(ee,F)}const q=[],Z=[],re=[],J=[],de=[],le=[],te=[],se=[],W=[],X=[],ae=[];let oe=null;const me=new Date;for(let F=0;F<V;F++){const ee=new Date(U.getTime()+F*I),xe=new Date(ee.getTime()+I),H=O.get(ee.getTime());if(q.push(Fx(ee.toISOString())),H){const pe=H.is_executed===!0,Se=H;Z.push(H.import_price_sek_kwh??null),re.push(pe&&Se.actual_pv_kwh!=null?Se.actual_pv_kwh:H.pv_forecast_kwh??null),J.push(pe&&Se.actual_load_kwh!=null?Se.actual_load_kwh:H.load_forecast_kwh??null),de.push(pe&&Se.actual_charge_kw!=null?Se.actual_charge_kw:H.battery_charge_kw??H.charge_kw??null),le.push(H.battery_discharge_kw??H.discharge_kw??null),te.push(pe&&Se.actual_export_kw!=null?Se.actual_export_kw:H.export_kwh??null),se.push(H.water_heating_kw??null),W.push(H.soc_target_percent??null),X.push(H.projected_soc_percent??null),ae.push(Se.soc_actual_percent!=null?Se.soc_actual_percent:null)}else Z.push(null),re.push(null),J.push(null),de.push(null),le.push(null),te.push(null),se.push(null),W.push(null),X.push(null),ae.push(null);me>=ee&&me<xe&&(oe=F)}return Ll({labels:q,price:Z,pv:re,load:J,charge:de,discharge:le,export:te,water:se,socTarget:W,socProjected:X,socActual:ae,nowIndex:oe},s)}const o=[...a].sort((E,z)=>{const U=new Date(E.start_time).getTime(),I=new Date(z.start_time).getTime();return U-I}),l=o.map(E=>E.import_price_sek_kwh??null),d=o.map(E=>E.pv_forecast_kwh??null),h=o.map(E=>E.load_forecast_kwh??null),p=o.map(E=>E.battery_charge_kw??E.charge_kw??null),x=o.map(E=>E.battery_discharge_kw??E.discharge_kw??null),y=o.map(E=>E.export_kwh??null),b=o.map(E=>E.water_heating_kw??null),j=o.map(E=>E.soc_target_percent??null),T=o.map(E=>E.projected_soc_percent??null),N=o.map(E=>E.soc_actual_percent??null),M=o.map(E=>Fx(E.start_time));let R=null;if(e==="today"){const E=new Date;for(let z=0;z<o.length;z++){const U=new Date(o[z].start_time||""),I=new Date(U.getTime()+1800*1e3);if(E>=U&&E<I){R=z;break}}}return Ll({labels:M,price:l,pv:d,load:h,charge:p,discharge:x,export:y,water:b,socTarget:j,socProjected:T,socActual:N,nowIndex:R},s)}const yf=[3,7,14,21,28],Tu=[30,60,120];function qP({onDataRefresh:t,onPlanSourceChange:e,onVacationModeChange:n}){const[s,a]=A.useState("idle"),[o,l]=A.useState(!1),[d,h]=A.useState(null),[p,x]=A.useState(1),[y,b]=A.useState(!1),[j,T]=A.useState(null),[N,M]=A.useState(1),[R,E]=A.useState(!1),[z,U]=A.useState(null),[I,V]=A.useState(0),[O,q]=A.useState(null),[Z,re]=A.useState(null),J=A.useRef(null),de=A.useCallback(async()=>{try{const[oe,me,F]=await Promise.all([De.executor.status(),De.waterBoost.status(),De.config()]);if(oe.paused?(l(!0),h(oe.paused.paused_minutes||null)):(l(!1),h(null)),me.water_boost){const xe=new Date(me.water_boost.expires_at);E(!0),U(xe);const H=new Date,pe=Math.max(0,Math.floor((xe.getTime()-H.getTime())/1e3));V(pe)}else E(!1),U(null),V(0);const ee=F.water_heating?.vacation_mode;ee?.enabled?(b(!0),T(ee.end_date||null)):(b(!1),T(null))}catch(oe){console.error("Failed to fetch quick action status:",oe)}},[]);A.useEffect(()=>{de();const oe=setInterval(de,6e4);return()=>clearInterval(oe)},[de]),A.useEffect(()=>{if(J.current&&(clearInterval(J.current),J.current=null),!(!R||!z))return J.current=setInterval(()=>{const oe=new Date,me=Math.floor((z.getTime()-oe.getTime())/1e3);me<=0?(E(!1),U(null),V(0),J.current&&(clearInterval(J.current),J.current=null)):V(me)},1e3),()=>{J.current&&(clearInterval(J.current),J.current=null)}},[R,z]);const le=async()=>{a("planning"),q(null);try{await De.runPlanner(),a("executing"),await De.executor.run(),a("done"),e&&e("local"),t&&setTimeout(t,500),setTimeout(()=>a("idle"),2e3)}catch(oe){q({type:"error",message:oe instanceof Error?oe.message:"Failed"}),a("idle")}},te=async()=>{q(null),re("pause");try{o?(await De.executor.resume(),l(!1),h(null),q({type:"success",message:"Executor resumed"})):(await De.executor.pause(),l(!0),q({type:"success",message:"Executor paused - idle mode"})),setTimeout(()=>q(null),3e3)}catch(oe){q({type:"error",message:oe instanceof Error?oe.message:"Failed"})}finally{re(null)}},se=async()=>{q(null),re("vacation");try{if(y)await De.configSave({water_heating:{vacation_mode:{enabled:!1,end_date:null}}}),b(!1),T(null),q({type:"success",message:"Vacation mode disabled"});else{const oe=yf[p],me=new Date;me.setDate(me.getDate()+oe);const F=me.toISOString().split("T")[0];await De.configSave({water_heating:{vacation_mode:{enabled:!0,end_date:F}}}),b(!0),T(F),q({type:"success",message:`Vacation mode active until ${F}`})}window.dispatchEvent(new Event("config-updated")),n?.(!y),setTimeout(()=>q(null),3e3)}catch(oe){q({type:"error",message:oe instanceof Error?oe.message:"Failed"})}finally{re(null)}},W=async()=>{q(null),re("boost");try{if(R)(await De.waterBoost.cancel()).success&&(E(!1),U(null),V(0),q({type:"success",message:"Water boost cancelled"}));else{const oe=Tu[N],me=await De.waterBoost.start(oe);if(me.success&&me.expires_at){const F=new Date(me.expires_at);E(!0),U(F),V(oe*60),q({type:"success",message:`Water boost started (${oe}min)`})}}setTimeout(()=>q(null),3e3)}catch(oe){q({type:"error",message:oe instanceof Error?oe.message:"Failed"})}finally{re(null)}},X=()=>{switch(s){case"planning":return"Planning...";case"executing":return"Executing...";case"done":return"Done ";default:return"Run Planner"}},ae=oe=>{const me=Math.floor(oe/60),F=oe%60;return`${me}:${F.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{className:`flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary
                        ${s!=="idle"?"bg-accent text-[#100f0e] cursor-wait":"bg-accent hover:bg-accent2 text-[#100f0e]"}`,onClick:le,disabled:s!=="idle",title:"Run planner and execute",children:[u.jsx(MA,{className:`h-4 w-4 ${s!=="idle"?"animate-pulse":""}`}),u.jsx("span",{children:X()})]}),u.jsx("button",{className:`flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition
                        ${o?"bg-bad/80 text-white ring-2 ring-bad shadow-[0_0_20px_rgba(241,81,50,0.5)] animate-pulse":"bg-good hover:bg-good/80 text-white btn-glow-green"} ${Z==="pause"?"opacity-60 cursor-wait":""}`,onClick:te,disabled:Z==="pause",title:o?"Resume executor":"Pause executor (idle mode)",children:o?u.jsxs(u.Fragment,{children:[u.jsx(Ev,{className:"h-4 w-4"}),u.jsx("span",{children:"RESUME"}),d!==null&&u.jsxs("span",{className:"text-[9px] opacity-80",children:["(",Math.round(d),"m)"]})]}):u.jsxs(u.Fragment,{children:[u.jsx(kA,{className:"h-4 w-4"}),u.jsx("span",{children:"Pause"})]})}),u.jsxs("div",{className:`flex items-center rounded-xl px-2 py-1.5 text-[11px] font-semibold transition
                    ${y?"bg-amber-500/30 border border-amber-500/50 ring-2 ring-amber-400/50 shadow-[0_0_15px_rgba(245,158,11,0.4)]":"bg-surface2 border border-line/50"} ${Z==="vacation"?"opacity-60":""}`,children:[!y&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>x(oe=>Math.max(0,oe-1)),className:"px-0.5 hover:text-accent",disabled:p===0||Z==="vacation",children:u.jsx(Yw,{className:"h-3 w-3"})}),u.jsxs("span",{className:"mx-0.5 min-w-[24px] text-center text-muted",children:[yf[p],"d"]}),u.jsx("button",{onClick:()=>x(oe=>Math.min(yf.length-1,oe+1)),className:"px-0.5 hover:text-accent",disabled:p===yf.length-1||Z==="vacation",children:u.jsx(Ww,{className:"h-3 w-3"})})]}),u.jsxs("button",{onClick:se,disabled:Z==="vacation",className:`flex-1 flex items-center justify-center gap-1 py-1 px-2 rounded-lg transition
                            ${y?"bg-amber-500/50 text-amber-100":"bg-amber-500/20 hover:bg-amber-500/30 text-amber-300/80 hover:text-amber-300"}`,children:[u.jsx(EA,{className:"h-3.5 w-3.5"}),y?u.jsx("span",{className:"truncate",children:j?` ${j.slice(5)}`:"ON"}):u.jsx("span",{children:"Vacation"})]})]}),u.jsxs("div",{className:`flex items-center rounded-xl px-2 py-1.5 text-[11px] font-semibold transition
                    ${R?"bg-red-500/30 border border-red-500/50 ring-2 ring-red-400/50 shadow-[0_0_15px_rgba(239,68,68,0.4)]":"bg-surface2 border border-line/50"} ${Z==="boost"?"opacity-60":""}`,children:[!R&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>M(oe=>Math.max(0,oe-1)),className:"px-0.5 hover:text-accent",disabled:N===0||Z==="boost",children:u.jsx(Yw,{className:"h-3 w-3"})}),u.jsx("span",{className:"mx-0.5 min-w-[24px] text-center text-muted",children:Tu[N]===120?"2h":Tu[N]===60?"1h":"30m"}),u.jsx("button",{onClick:()=>M(oe=>Math.min(Tu.length-1,oe+1)),className:"px-0.5 hover:text-accent",disabled:N===Tu.length-1||Z==="boost",children:u.jsx(Ww,{className:"h-3 w-3"})})]}),u.jsxs("button",{onClick:W,disabled:Z==="boost",className:`flex-1 flex items-center justify-center gap-1 py-1 px-2 rounded-lg transition
                            ${R?"bg-red-500/50 text-red-100":"bg-red-500/20 hover:bg-red-500/30 text-red-300/80 hover:text-red-300"}`,children:[u.jsx(Cv,{className:`h-3.5 w-3.5 ${R?"animate-pulse":""}`}),R?u.jsx("span",{className:"font-mono",children:ae(I)}):u.jsx("span",{children:"Boost"})]})]})]}),O&&u.jsx("div",{className:`absolute -bottom-8 left-0 right-0 text-center text-[10px] py-1 px-2 rounded-md transition-opacity animate-in fade-in slide-in-from-bottom-1 duration-300 ${O.type==="success"?"text-green-400":"text-red-400"}`,children:O.message})]})}const lN=A.createContext({});function GP(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const Jv=A.createContext(null),cN=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function XP(t=!0){const e=A.useContext(Jv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,o=A.useId();A.useEffect(()=>{t&&a(o)},[t]);const l=A.useCallback(()=>t&&s&&s(o),[o,s,t]);return!n&&s?[!1,l]:[!0]}const e0=typeof window<"u",KP=e0?A.useLayoutEffect:A.useEffect,Fs=t=>t;let uN=Fs;function t0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Jl=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},za=t=>t*1e3,Ba=t=>t/1e3,ZP={useManualTiming:!1};function QP(t){let e=new Set,n=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(p){o.has(p)&&(h.schedule(p),t()),p(l)}const h={schedule:(p,x=!1,y=!1)=>{const j=y&&s?e:n;return x&&o.add(p),j.has(p)||j.add(p),p},cancel:p=>{n.delete(p),o.delete(p)},process:p=>{if(l=p,s){a=!0;return}s=!0,[e,n]=[n,e],e.forEach(d),e.clear(),s=!1,a&&(a=!1,h.process(p))}};return h}const vf=["read","resolveKeyframes","update","preRender","render","postRender"],JP=40;function dN(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=vf.reduce((R,E)=>(R[E]=QP(o),R),{}),{read:d,resolveKeyframes:h,update:p,preRender:x,render:y,postRender:b}=l,j=()=>{const R=performance.now();n=!1,a.delta=s?1e3/60:Math.max(Math.min(R-a.timestamp,JP),1),a.timestamp=R,a.isProcessing=!0,d.process(a),h.process(a),p.process(a),x.process(a),y.process(a),b.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(j))},T=()=>{n=!0,s=!0,a.isProcessing||t(j)};return{schedule:vf.reduce((R,E)=>{const z=l[E];return R[E]=(U,I=!1,V=!1)=>(n||T(),z.schedule(U,I,V)),R},{}),cancel:R=>{for(let E=0;E<vf.length;E++)l[vf[E]].cancel(R)},state:a,steps:l}}const{schedule:an,cancel:Xr,state:Jn,steps:Hx}=dN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fs,!0),hN=A.createContext({strict:!1}),_2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ec={};for(const t in _2)ec[t]={isEnabled:e=>_2[t].some(n=>!!e[n])};function eL(t){for(const e in t)ec[e]={...ec[e],...t[e]}}const tL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ip(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||tL.has(t)}let fN=t=>!ip(t);function nL(t){t&&(fN=e=>e.startsWith("on")?!ip(e):t(e))}try{nL(require("@emotion/is-prop-valid").default)}catch{}function sL(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(fN(a)||n===!0&&ip(a)||!e&&!ip(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function iL(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const Lp=A.createContext({});function hd(t){return typeof t=="string"||Array.isArray(t)}function zp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const n0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],s0=["initial",...n0];function Bp(t){return zp(t.animate)||s0.some(e=>hd(t[e]))}function pN(t){return!!(Bp(t)||t.variants)}function aL(t,e){if(Bp(t)){const{initial:n,animate:s}=t;return{initial:n===!1||hd(n)?n:void 0,animate:hd(s)?s:void 0}}return t.inherit!==!1?e:{}}function rL(t){const{initial:e,animate:n}=aL(t,A.useContext(Lp));return A.useMemo(()=>({initial:e,animate:n}),[w2(e),w2(n)])}function w2(t){return Array.isArray(t)?t.join(" "):t}const oL=Symbol.for("motionComponentSymbol");function zl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lL(t,e,n){return A.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):zl(n)&&(n.current=s))},[e])}const i0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cL="framerAppearId",mN="data-"+i0(cL),{schedule:a0}=dN(queueMicrotask,!1),gN=A.createContext({});function uL(t,e,n,s,a){var o,l;const{visualElement:d}=A.useContext(Lp),h=A.useContext(hN),p=A.useContext(Jv),x=A.useContext(cN).reducedMotion,y=A.useRef(null);s=s||h.renderer,!y.current&&s&&(y.current=s(t,{visualState:e,parent:d,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:x}));const b=y.current,j=A.useContext(gN);b&&!b.projection&&a&&(b.type==="html"||b.type==="svg")&&dL(y.current,n,a,j);const T=A.useRef(!1);A.useInsertionEffect(()=>{b&&T.current&&b.update(n,p)});const N=n[mN],M=A.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return KP(()=>{b&&(T.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),a0.render(b.render),M.current&&b.animationState&&b.animationState.animateChanges())}),A.useEffect(()=>{b&&(!M.current&&b.animationState&&b.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)===null||R===void 0||R.call(window,N)}),M.current=!1))}),b}function dL(t,e,n,s){const{layoutId:a,layout:o,drag:l,dragConstraints:d,layoutScroll:h,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xN(t.parent)),t.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||d&&zl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:h,layoutRoot:p})}function xN(t){if(t)return t.options.allowProjection!==!1?t.projection:xN(t.parent)}function hL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:a}){var o,l;t&&eL(t);function d(p,x){let y;const b={...A.useContext(cN),...p,layoutId:fL(p)},{isStatic:j}=b,T=rL(p),N=s(p,j);if(!j&&e0){pL();const M=mL(b);y=M.MeasureLayout,T.visualElement=uL(a,N,b,e,M.ProjectionNode)}return u.jsxs(Lp.Provider,{value:T,children:[y&&T.visualElement?u.jsx(y,{visualElement:T.visualElement,...b}):null,n(a,p,lL(N,T.visualElement,x),N,j,T.visualElement)]})}d.displayName=`motion.${typeof a=="string"?a:`create(${(l=(o=a.displayName)!==null&&o!==void 0?o:a.name)!==null&&l!==void 0?l:""})`}`;const h=A.forwardRef(d);return h[oL]=a,h}function fL({layoutId:t}){const e=A.useContext(lN).id;return e&&t!==void 0?e+"-"+t:t}function pL(t,e){A.useContext(hN).strict}function mL(t){const{drag:e,layout:n}=ec;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const gL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function r0(t){return typeof t!="string"||t.includes("-")?!1:!!(gL.indexOf(t)>-1||/[A-Z]/u.test(t))}function S2(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function o0(t,e,n,s){if(typeof e=="function"){const[a,o]=S2(s);e=e(n!==void 0?n:t.custom,a,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,o]=S2(s);e=e(n!==void 0?n:t.custom,a,o)}return e}const By=t=>Array.isArray(t),xL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),yL=t=>By(t)?t[t.length-1]||0:t,ls=t=>!!(t&&t.getVelocity);function Ef(t){const e=ls(t)?t.get():t;return xL(e)?e.toValue():e}function vL({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,a,o){const l={latestValues:bL(s,a,o,t),renderState:e()};return n&&(l.onMount=d=>n({props:s,current:d,...l}),l.onUpdate=d=>n(d)),l}const yN=t=>(e,n)=>{const s=A.useContext(Lp),a=A.useContext(Jv),o=()=>vL(t,e,s,a);return n?o():GP(o)};function bL(t,e,n,s){const a={},o=s(t,{});for(const b in o)a[b]=Ef(o[b]);let{initial:l,animate:d}=t;const h=Bp(t),p=pN(t);e&&p&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let x=n?n.initial===!1:!1;x=x||l===!1;const y=x?d:l;if(y&&typeof y!="boolean"&&!zp(y)){const b=Array.isArray(y)?y:[y];for(let j=0;j<b.length;j++){const T=o0(t,b[j]);if(T){const{transitionEnd:N,transition:M,...R}=T;for(const E in R){let z=R[E];if(Array.isArray(z)){const U=x?z.length-1:0;z=z[U]}z!==null&&(a[E]=z)}for(const E in N)a[E]=N[E]}}}return a}const lc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qo=new Set(lc),vN=t=>e=>typeof e=="string"&&e.startsWith(t),bN=vN("--"),_L=vN("var(--"),l0=t=>_L(t)?wL.test(t.split("/*")[0].trim()):!1,wL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,_N=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ha=(t,e,n)=>n>e?e:n<t?t:n,cc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fd={...cc,transform:t=>Ha(0,1,t)},bf={...cc,default:1},Md=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ar=Md("deg"),Gi=Md("%"),et=Md("px"),SL=Md("vh"),jL=Md("vw"),j2={...Gi,parse:t=>Gi.parse(t)/100,transform:t=>Gi.transform(t*100)},kL={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,backgroundPositionX:et,backgroundPositionY:et},TL={rotate:Ar,rotateX:Ar,rotateY:Ar,rotateZ:Ar,scale:bf,scaleX:bf,scaleY:bf,scaleZ:bf,skew:Ar,skewX:Ar,skewY:Ar,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:fd,originX:j2,originY:j2,originZ:et},k2={...cc,transform:Math.round},c0={...kL,...TL,zIndex:k2,size:et,fillOpacity:fd,strokeOpacity:fd,numOctaves:k2},NL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ML=lc.length;function DL(t,e,n){let s="",a=!0;for(let o=0;o<ML;o++){const l=lc[o],d=t[l];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(l.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const p=_N(d,c0[l]);if(!h){a=!1;const x=NL[l]||l;s+=`${x}(${p}) `}n&&(e[l]=p)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function u0(t,e,n){const{style:s,vars:a,transformOrigin:o}=t;let l=!1,d=!1;for(const h in e){const p=e[h];if(Qo.has(h)){l=!0;continue}else if(bN(h)){a[h]=p;continue}else{const x=_N(p,c0[h]);h.startsWith("origin")?(d=!0,o[h]=x):s[h]=x}}if(e.transform||(l||n?s.transform=DL(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:h="50%",originY:p="50%",originZ:x=0}=o;s.transformOrigin=`${h} ${p} ${x}`}}const CL={offset:"stroke-dashoffset",array:"stroke-dasharray"},EL={offset:"strokeDashoffset",array:"strokeDasharray"};function AL(t,e,n=1,s=0,a=!0){t.pathLength=1;const o=a?CL:EL;t[o.offset]=et.transform(-s);const l=et.transform(e),d=et.transform(n);t[o.array]=`${l} ${d}`}function T2(t,e,n){return typeof t=="string"?t:et.transform(e+n*t)}function OL(t,e,n){const s=T2(e,t.x,t.width),a=T2(n,t.y,t.height);return`${s} ${a}`}function d0(t,{attrX:e,attrY:n,attrScale:s,originX:a,originY:o,pathLength:l,pathSpacing:d=1,pathOffset:h=0,...p},x,y){if(u0(t,p,y),x){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:j,dimensions:T}=t;b.transform&&(T&&(j.transform=b.transform),delete b.transform),T&&(a!==void 0||o!==void 0||j.transform)&&(j.transformOrigin=OL(T,a!==void 0?a:.5,o!==void 0?o:.5)),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),s!==void 0&&(b.scale=s),l!==void 0&&AL(b,l,d,h,!1)}const h0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),wN=()=>({...h0(),attrs:{}}),f0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function SN(t,{style:e,vars:n},s,a){Object.assign(t.style,e,a&&a.getProjectionStyles(s));for(const o in n)t.style.setProperty(o,n[o])}const jN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kN(t,e,n,s){SN(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(jN.has(a)?a:i0(a),e.attrs[a])}const ap={};function RL(t){Object.assign(ap,t)}function TN(t,{layout:e,layoutId:n}){return Qo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ap[t]||t==="opacity")}function p0(t,e,n){var s;const{style:a}=t,o={};for(const l in a)(ls(a[l])||e.style&&ls(e.style[l])||TN(l,t)||((s=n?.getValue(l))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[l]=a[l]);return o}function NN(t,e,n){const s=p0(t,e,n);for(const a in t)if(ls(t[a])||ls(e[a])){const o=lc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[o]=t[a]}return s}function PL(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const N2=["x","y","width","height","cx","cy","r"],LL={useVisualState:yN({scrapeMotionValuesFromProps:NN,createRenderState:wN,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:a})=>{if(!n)return;let o=!!t.drag;if(!o){for(const d in a)if(Qo.has(d)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let d=0;d<N2.length;d++){const h=N2[d];t[h]!==e[h]&&(l=!0)}l&&an.read(()=>{PL(n,s),an.render(()=>{d0(s,a,f0(n.tagName),t.transformTemplate),kN(n,s)})})}})},zL={useVisualState:yN({scrapeMotionValuesFromProps:p0,createRenderState:h0})};function MN(t,e,n){for(const s in e)!ls(e[s])&&!TN(s,n)&&(t[s]=e[s])}function BL({transformTemplate:t},e){return A.useMemo(()=>{const n=h0();return u0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function VL(t,e){const n=t.style||{},s={};return MN(s,n,t),Object.assign(s,BL(t,e)),s}function FL(t,e){const n={},s=VL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function HL(t,e,n,s){const a=A.useMemo(()=>{const o=wN();return d0(o,e,f0(s),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};MN(o,t.style,t),a.style={...o,...a.style}}return a}function UL(t=!1){return(n,s,a,{latestValues:o},l)=>{const h=(r0(n)?HL:FL)(s,o,l,n),p=sL(s,typeof n=="string",t),x=n!==A.Fragment?{...p,...h,ref:a}:{},{children:y}=s,b=A.useMemo(()=>ls(y)?y.get():y,[y]);return A.createElement(n,{...x,children:b})}}function IL(t,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...r0(s)?LL:zL,preloadedFeatures:t,useRender:UL(a),createVisualElement:e,Component:s};return hL(l)}}function DN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function Vp(t,e,n){const s=t.getProps();return o0(s,e,n!==void 0?n:s.custom,t)}const YL=t0(()=>window.ScrollTimeline!==void 0);class WL{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(a=>{if(YL()&&a.attachTimeline)return a.attachTimeline(e);if(typeof n=="function")return n(a)});return()=>{s.forEach((a,o)=>{a&&a(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class $L extends WL{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function m0(t,e){return t?t[e]||t.default||t:void 0}const Vy=2e4;function CN(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Vy;)e+=n,s=t.next(e);return e>=Vy?1/0:e}function g0(t){return typeof t=="function"}function M2(t,e){t.timeline=e,t.onfinish=null}const x0=t=>Array.isArray(t)&&typeof t[0]=="number",qL={linearEasing:void 0};function GL(t,e){const n=t0(t);return()=>{var s;return(s=qL[e])!==null&&s!==void 0?s:n()}}const rp=GL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),EN=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let o=0;o<a;o++)s+=t(Jl(0,a-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function AN(t){return!!(typeof t=="function"&&rp()||!t||typeof t=="string"&&(t in Fy||rp())||x0(t)||Array.isArray(t)&&t.every(AN))}const Vu=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Fy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vu([0,.65,.55,1]),circOut:Vu([.55,0,1,.45]),backIn:Vu([.31,.01,.66,-.59]),backOut:Vu([.33,1.53,.69,.99])};function ON(t,e){if(t)return typeof t=="function"&&rp()?EN(t,e):x0(t)?Vu(t):Array.isArray(t)?t.map(n=>ON(n,e)||Fy.easeOut):Fy[t]}const ji={x:!1,y:!1};function RN(){return ji.x||ji.y}function XL(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const o=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function PN(t,e){const n=XL(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function D2(t){return e=>{e.pointerType==="touch"||RN()||t(e)}}function KL(t,e,n={}){const[s,a,o]=PN(t,n),l=D2(d=>{const{target:h}=d,p=e(d);if(typeof p!="function"||!h)return;const x=D2(y=>{p(y),h.removeEventListener("pointerleave",x)});h.addEventListener("pointerleave",x,a)});return s.forEach(d=>{d.addEventListener("pointerenter",l,a)}),o}const LN=(t,e)=>e?t===e?!0:LN(t,e.parentElement):!1,y0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ZL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QL(t){return ZL.has(t.tagName)||t.tabIndex!==-1}const Fu=new WeakSet;function C2(t){return e=>{e.key==="Enter"&&t(e)}}function Ux(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JL=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=C2(()=>{if(Fu.has(n))return;Ux(n,"down");const a=C2(()=>{Ux(n,"up")}),o=()=>Ux(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function E2(t){return y0(t)&&!RN()}function e6(t,e,n={}){const[s,a,o]=PN(t,n),l=d=>{const h=d.currentTarget;if(!E2(d)||Fu.has(h))return;Fu.add(h);const p=e(d),x=(j,T)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",b),!(!E2(j)||!Fu.has(h))&&(Fu.delete(h),typeof p=="function"&&p(j,{success:T}))},y=j=>{x(j,n.useGlobalTarget||LN(h,j.target))},b=j=>{x(j,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",b,a)};return s.forEach(d=>{!QL(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(n.useGlobalTarget?window:d).addEventListener("pointerdown",l,a),d.addEventListener("focus",p=>JL(p,a),a)}),o}function t6(t){return t==="x"||t==="y"?ji[t]?null:(ji[t]=!0,()=>{ji[t]=!1}):ji.x||ji.y?null:(ji.x=ji.y=!0,()=>{ji.x=ji.y=!1})}const zN=new Set(["width","height","top","left","right","bottom",...lc]);let Af;function n6(){Af=void 0}const Xi={now:()=>(Af===void 0&&Xi.set(Jn.isProcessing||ZP.useManualTiming?Jn.timestamp:performance.now()),Af),set:t=>{Af=t,queueMicrotask(n6)}};function v0(t,e){t.indexOf(e)===-1&&t.push(e)}function b0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class _0{constructor(){this.subscriptions=[]}add(e){return v0(this.subscriptions,e),()=>b0(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function BN(t,e){return e?t*(1e3/e):0}const A2=30,s6=t=>!isNaN(parseFloat(t));class i6{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const o=Xi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=s6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new _0);const s=this.events[e].add(n);return e==="change"?()=>{s(),an.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>A2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,A2);return BN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pd(t,e){return new i6(t,e)}function a6(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pd(n))}function r6(t,e){const n=Vp(t,e);let{transitionEnd:s={},transition:a={},...o}=n||{};o={...o,...s};for(const l in o){const d=yL(o[l]);a6(t,l,d)}}function o6(t){return!!(ls(t)&&t.add)}function Hy(t,e){const n=t.getValue("willChange");if(o6(n))return n.add(e)}function VN(t){return t.props[mN]}const FN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,l6=1e-7,c6=12;function u6(t,e,n,s,a){let o,l,d=0;do l=e+(n-e)/2,o=FN(l,s,a)-t,o>0?n=l:e=l;while(Math.abs(o)>l6&&++d<c6);return l}function Dd(t,e,n,s){if(t===e&&n===s)return Fs;const a=o=>u6(o,0,1,t,n);return o=>o===0||o===1?o:FN(a(o),e,s)}const HN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,UN=t=>e=>1-t(1-e),IN=Dd(.33,1.53,.69,.99),w0=UN(IN),YN=HN(w0),WN=t=>(t*=2)<1?.5*w0(t):.5*(2-Math.pow(2,-10*(t-1))),S0=t=>1-Math.sin(Math.acos(t)),$N=UN(S0),qN=HN(S0),GN=t=>/^0[^.\s]+$/u.test(t);function d6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||GN(t):!0}const Ku=t=>Math.round(t*1e5)/1e5,j0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function h6(t){return t==null}const f6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,k0=(t,e)=>n=>!!(typeof n=="string"&&f6.test(n)&&n.startsWith(t)||e&&!h6(n)&&Object.prototype.hasOwnProperty.call(n,e)),XN=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,o,l,d]=s.match(j0);return{[t]:parseFloat(a),[e]:parseFloat(o),[n]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},p6=t=>Ha(0,255,t),Ix={...cc,transform:t=>Math.round(p6(t))},Fo={test:k0("rgb","red"),parse:XN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Ix.transform(t)+", "+Ix.transform(e)+", "+Ix.transform(n)+", "+Ku(fd.transform(s))+")"};function m6(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const Uy={test:k0("#"),parse:m6,transform:Fo.transform},Bl={test:k0("hsl","hue"),parse:XN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Gi.transform(Ku(e))+", "+Gi.transform(Ku(n))+", "+Ku(fd.transform(s))+")"},as={test:t=>Fo.test(t)||Uy.test(t)||Bl.test(t),parse:t=>Fo.test(t)?Fo.parse(t):Bl.test(t)?Bl.parse(t):Uy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fo.transform(t):Bl.transform(t)},g6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function x6(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(j0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(g6))===null||n===void 0?void 0:n.length)||0)>0}const KN="number",ZN="color",y6="var",v6="var(",O2="${}",b6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function md(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let o=0;const d=e.replace(b6,h=>(as.test(h)?(s.color.push(o),a.push(ZN),n.push(as.parse(h))):h.startsWith(v6)?(s.var.push(o),a.push(y6),n.push(h)):(s.number.push(o),a.push(KN),n.push(parseFloat(h))),++o,O2)).split(O2);return{values:n,split:d,indexes:s,types:a}}function QN(t){return md(t).values}function JN(t){const{split:e,types:n}=md(t),s=e.length;return a=>{let o="";for(let l=0;l<s;l++)if(o+=e[l],a[l]!==void 0){const d=n[l];d===KN?o+=Ku(a[l]):d===ZN?o+=as.transform(a[l]):o+=a[l]}return o}}const _6=t=>typeof t=="number"?0:t;function w6(t){const e=QN(t);return JN(t)(e.map(_6))}const Kr={test:x6,parse:QN,createTransformer:JN,getAnimatableNone:w6},S6=new Set(["brightness","contrast","saturate","opacity"]);function j6(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(j0)||[];if(!s)return t;const a=n.replace(s,"");let o=S6.has(e)?1:0;return s!==n&&(o*=100),e+"("+o+a+")"}const k6=/\b([a-z-]*)\(.*?\)/gu,Iy={...Kr,getAnimatableNone:t=>{const e=t.match(k6);return e?e.map(j6).join(" "):t}},T6={...c0,color:as,backgroundColor:as,outlineColor:as,fill:as,stroke:as,borderColor:as,borderTopColor:as,borderRightColor:as,borderBottomColor:as,borderLeftColor:as,filter:Iy,WebkitFilter:Iy},T0=t=>T6[t];function eM(t,e){let n=T0(t);return n!==Iy&&(n=Kr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const N6=new Set(["auto","none","0"]);function M6(t,e,n){let s=0,a;for(;s<t.length&&!a;){const o=t[s];typeof o=="string"&&!N6.has(o)&&md(o).values.length&&(a=t[s]),s++}if(a&&n)for(const o of e)t[o]=eM(n,a)}const R2=t=>t===cc||t===et,P2=(t,e)=>parseFloat(t.split(", ")[e]),L2=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return P2(a[1],e);{const o=s.match(/^matrix\((.+)\)$/u);return o?P2(o[1],t):0}},D6=new Set(["x","y","z"]),C6=lc.filter(t=>!D6.has(t));function E6(t){const e=[];return C6.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const tc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:L2(4,13),y:L2(5,14)};tc.translateX=tc.x;tc.translateY=tc.y;const Wo=new Set;let Yy=!1,Wy=!1;function tM(){if(Wy){const t=Array.from(Wo).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=E6(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([o,l])=>{var d;(d=s.getValue(o))===null||d===void 0||d.set(l)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Wy=!1,Yy=!1,Wo.forEach(t=>t.complete()),Wo.clear()}function nM(){Wo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Wy=!0)})}function A6(){nM(),tM()}class N0{constructor(e,n,s,a,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wo.add(this),Yy||(Yy=!0,an.read(nM),an.resolveKeyframes(tM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=a?.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const h=s.readValue(n,d);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=d),a&&l===void 0&&a.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),O6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function R6(t){const e=O6.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function iM(t,e,n=1){const[s,a]=R6(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const l=o.trim();return sM(l)?parseFloat(l):l}return l0(a)?iM(a,e,n+1):a}const aM=t=>e=>e.test(t),P6={test:t=>t==="auto",parse:t=>t},rM=[cc,et,Gi,Ar,jL,SL,P6],z2=t=>rM.find(aM(t));class oM extends N0{constructor(e,n,s,a,o){super(e,n,s,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),l0(p))){const x=iM(p,n.current);x!==void 0&&(e[h]=x),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!zN.has(s)||e.length!==2)return;const[a,o]=e,l=z2(a),d=z2(o);if(l!==d)if(R2(l)&&R2(d))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)d6(e[a])&&s.push(a);s.length&&M6(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tc[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const o=n.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=a.length-1,d=a[l];a[l]=tc[s](n.measureViewportBox(),window.getComputedStyle(n.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,p])=>{n.getValue(h).set(p)}),this.resolveNoneKeyframes()}}const B2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Kr.test(t)||t==="0")&&!t.startsWith("url("));function L6(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function z6(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=B2(a,e),d=B2(o,e);return!l||!d?!1:L6(t)||(n==="spring"||g0(n))&&s}const B6=t=>t!==null;function Fp(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(B6),o=e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const V6=40;class lM{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Xi.now(),this.options={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:o,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>V6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&A6(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Xi.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:o,delay:l,onComplete:d,onUpdate:h,isGenerator:p}=this.options;if(!p&&!z6(e,s,a,o))if(l)this.options.duration=0;else{h&&h(Fp(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const x=this.initPlayback(e,n);x!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...x},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yn=(t,e,n)=>t+(e-t)*n;function Yx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function F6({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,o=0,l=0;if(!e)a=o=l=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;a=Yx(h,d,t+1/3),o=Yx(h,d,t),l=Yx(h,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function op(t,e){return n=>n>0?e:t}const Wx=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},H6=[Uy,Fo,Bl],U6=t=>H6.find(e=>e.test(t));function V2(t){const e=U6(t);if(!e)return!1;let n=e.parse(t);return e===Bl&&(n=F6(n)),n}const F2=(t,e)=>{const n=V2(t),s=V2(e);if(!n||!s)return op(t,e);const a={...n};return o=>(a.red=Wx(n.red,s.red,o),a.green=Wx(n.green,s.green,o),a.blue=Wx(n.blue,s.blue,o),a.alpha=yn(n.alpha,s.alpha,o),Fo.transform(a))},I6=(t,e)=>n=>e(t(n)),Cd=(...t)=>t.reduce(I6),$y=new Set(["none","hidden"]);function Y6(t,e){return $y.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function W6(t,e){return n=>yn(t,e,n)}function M0(t){return typeof t=="number"?W6:typeof t=="string"?l0(t)?op:as.test(t)?F2:G6:Array.isArray(t)?cM:typeof t=="object"?as.test(t)?F2:$6:op}function cM(t,e){const n=[...t],s=n.length,a=t.map((o,l)=>M0(o)(o,e[l]));return o=>{for(let l=0;l<s;l++)n[l]=a[l](o);return n}}function $6(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=M0(t[a])(t[a],e[a]));return a=>{for(const o in s)n[o]=s[o](a);return n}}function q6(t,e){var n;const s=[],a={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],d=t.indexes[l][a[l]],h=(n=t.values[d])!==null&&n!==void 0?n:0;s[o]=h,a[l]++}return s}const G6=(t,e)=>{const n=Kr.createTransformer(e),s=md(t),a=md(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?$y.has(t)&&!a.values.length||$y.has(e)&&!s.values.length?Y6(t,e):Cd(cM(q6(s,a),a.values),n):op(t,e)};function uM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yn(t,e,n):M0(t)(t,e)}const X6=5;function dM(t,e,n){const s=Math.max(e-X6,0);return BN(n-t(s),e-s)}const wn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$x=.001;function K6({duration:t=wn.duration,bounce:e=wn.bounce,velocity:n=wn.velocity,mass:s=wn.mass}){let a,o,l=1-e;l=Ha(wn.minDamping,wn.maxDamping,l),t=Ha(wn.minDuration,wn.maxDuration,Ba(t)),l<1?(a=p=>{const x=p*l,y=x*t,b=x-n,j=qy(p,l),T=Math.exp(-y);return $x-b/j*T},o=p=>{const y=p*l*t,b=y*n+n,j=Math.pow(l,2)*Math.pow(p,2)*t,T=Math.exp(-y),N=qy(Math.pow(p,2),l);return(-a(p)+$x>0?-1:1)*((b-j)*T)/N}):(a=p=>{const x=Math.exp(-p*t),y=(p-n)*t+1;return-$x+x*y},o=p=>{const x=Math.exp(-p*t),y=(n-p)*(t*t);return x*y});const d=5/t,h=Q6(a,o,d);if(t=za(t),isNaN(h))return{stiffness:wn.stiffness,damping:wn.damping,duration:t};{const p=Math.pow(h,2)*s;return{stiffness:p,damping:l*2*Math.sqrt(s*p),duration:t}}}const Z6=12;function Q6(t,e,n){let s=n;for(let a=1;a<Z6;a++)s=s-t(s)/e(s);return s}function qy(t,e){return t*Math.sqrt(1-e*e)}const J6=["duration","bounce"],ez=["stiffness","damping","mass"];function H2(t,e){return e.some(n=>t[n]!==void 0)}function tz(t){let e={velocity:wn.velocity,stiffness:wn.stiffness,damping:wn.damping,mass:wn.mass,isResolvedFromDuration:!1,...t};if(!H2(t,ez)&&H2(t,J6))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,o=2*Ha(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:wn.mass,stiffness:a,damping:o}}else{const n=K6(t);e={...e,...n,mass:wn.mass},e.isResolvedFromDuration=!0}return e}function hM(t=wn.visualDuration,e=wn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:p,mass:x,duration:y,velocity:b,isResolvedFromDuration:j}=tz({...n,velocity:-Ba(n.velocity||0)}),T=b||0,N=p/(2*Math.sqrt(h*x)),M=l-o,R=Ba(Math.sqrt(h/x)),E=Math.abs(M)<5;s||(s=E?wn.restSpeed.granular:wn.restSpeed.default),a||(a=E?wn.restDelta.granular:wn.restDelta.default);let z;if(N<1){const I=qy(R,N);z=V=>{const O=Math.exp(-N*R*V);return l-O*((T+N*R*M)/I*Math.sin(I*V)+M*Math.cos(I*V))}}else if(N===1)z=I=>l-Math.exp(-R*I)*(M+(T+R*M)*I);else{const I=R*Math.sqrt(N*N-1);z=V=>{const O=Math.exp(-N*R*V),q=Math.min(I*V,300);return l-O*((T+N*R*M)*Math.sinh(q)+I*M*Math.cosh(q))/I}}const U={calculatedDuration:j&&y||null,next:I=>{const V=z(I);if(j)d.done=I>=y;else{let O=0;N<1&&(O=I===0?za(T):dM(z,I,V));const q=Math.abs(O)<=s,Z=Math.abs(l-V)<=a;d.done=q&&Z}return d.value=d.done?l:V,d},toString:()=>{const I=Math.min(CN(U),Vy),V=EN(O=>U.next(I*O).value,I,30);return I+"ms "+V}};return U}function U2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:d,max:h,restDelta:p=.5,restSpeed:x}){const y=t[0],b={done:!1,value:y},j=q=>d!==void 0&&q<d||h!==void 0&&q>h,T=q=>d===void 0?h:h===void 0||Math.abs(d-q)<Math.abs(h-q)?d:h;let N=n*e;const M=y+N,R=l===void 0?M:l(M);R!==M&&(N=R-y);const E=q=>-N*Math.exp(-q/s),z=q=>R+E(q),U=q=>{const Z=E(q),re=z(q);b.done=Math.abs(Z)<=p,b.value=b.done?R:re};let I,V;const O=q=>{j(b.value)&&(I=q,V=hM({keyframes:[b.value,T(b.value)],velocity:dM(z,q,b.value),damping:a,stiffness:o,restDelta:p,restSpeed:x}))};return O(0),{calculatedDuration:null,next:q=>{let Z=!1;return!V&&I===void 0&&(Z=!0,U(q),O(q)),I!==void 0&&q>=I?V.next(q-I):(!Z&&U(q),b)}}}const nz=Dd(.42,0,1,1),sz=Dd(0,0,.58,1),fM=Dd(.42,0,.58,1),iz=t=>Array.isArray(t)&&typeof t[0]!="number",az={linear:Fs,easeIn:nz,easeInOut:fM,easeOut:sz,circIn:S0,circInOut:qN,circOut:$N,backIn:w0,backInOut:YN,backOut:IN,anticipate:WN},I2=t=>{if(x0(t)){uN(t.length===4);const[e,n,s,a]=t;return Dd(e,n,s,a)}else if(typeof t=="string")return az[t];return t};function rz(t,e,n){const s=[],a=n||uM,o=t.length-1;for(let l=0;l<o;l++){let d=a(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||Fs:e;d=Cd(h,d)}s.push(d)}return s}function oz(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const o=t.length;if(uN(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=rz(e,s,a),h=d.length,p=x=>{if(l&&x<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(x<t[y+1]);y++);const b=Jl(t[y],t[y+1],x);return d[y](b)};return n?x=>p(Ha(t[0],t[o-1],x)):p}function lz(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=Jl(0,e,s);t.push(yn(n,1,a))}}function cz(t){const e=[0];return lz(e,t.length-1),e}function uz(t,e){return t.map(n=>n*e)}function dz(t,e){return t.map(()=>e||fM).splice(0,t.length-1)}function lp({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=iz(s)?s.map(I2):I2(s),o={done:!1,value:e[0]},l=uz(n&&n.length===e.length?n:cz(e),t),d=oz(l,e,{ease:Array.isArray(a)?a:dz(e,a)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const hz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>an.update(e,!0),stop:()=>Xr(e),now:()=>Jn.isProcessing?Jn.timestamp:Xi.now()}},fz={decay:U2,inertia:U2,tween:lp,keyframes:lp,spring:hM},pz=t=>t/100;class D0 extends lM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:s,element:a,keyframes:o}=this.options,l=a?.KeyframeResolver||N0,d=(h,p)=>this.onKeyframesResolved(h,p);this.resolver=new l(o,d,n,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=this.options,d=g0(n)?n:fz[n]||lp;let h,p;d!==lp&&typeof e[0]!="number"&&(h=Cd(pz,uM(e[0],e[1])),e=[0,100]);const x=d({...this.options,keyframes:e});o==="mirror"&&(p=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),x.calculatedDuration===null&&(x.calculatedDuration=CN(x));const{calculatedDuration:y}=x,b=y+a,j=b*(s+1)-a;return{generator:x,mirroredGenerator:p,mapPercentToKeyframes:h,calculatedDuration:y,resolvedDuration:b,totalDuration:j}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:q}=this.options;return{done:!0,value:q[q.length-1]}}const{finalKeyframe:a,generator:o,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:h,calculatedDuration:p,totalDuration:x,resolvedDuration:y}=s;if(this.startTime===null)return o.next(0);const{delay:b,repeat:j,repeatType:T,repeatDelay:N,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-x/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const R=this.currentTime-b*(this.speed>=0?1:-1),E=this.speed>=0?R<0:R>x;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=x);let z=this.currentTime,U=o;if(j){const q=Math.min(this.currentTime,x)/y;let Z=Math.floor(q),re=q%1;!re&&q>=1&&(re=1),re===1&&Z--,Z=Math.min(Z,j+1),Z%2&&(T==="reverse"?(re=1-re,N&&(re-=N/y)):T==="mirror"&&(U=l)),z=Ha(0,1,re)*y}const I=E?{done:!1,value:h[0]}:U.next(z);d&&(I.value=d(I.value));let{done:V}=I;!E&&p!==null&&(V=this.speed>=0?this.currentTime>=x:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return O&&a!==void 0&&(I.value=Fp(h,this.options,a)),M&&M(I.value),O&&this.finish(),I}get duration(){const{resolved:e}=this;return e?Ba(e.calculatedDuration):0}get time(){return Ba(this.currentTime)}set time(e){e=za(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ba(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=hz,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const mz=new Set(["opacity","clipPath","filter","transform"]);function gz(t,e,n,{delay:s=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:d="easeInOut",times:h}={}){const p={[e]:n};h&&(p.offset=h);const x=ON(d,a);return Array.isArray(x)&&(p.easing=x),t.animate(p,{delay:s,duration:a,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const xz=t0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),cp=10,yz=2e4;function vz(t){return g0(t.type)||t.type==="spring"||!AN(t.ease)}function bz(t,e){const n=new D0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const a=[];let o=0;for(;!s.done&&o<yz;)s=n.sample(o),a.push(s.value),o+=cp;return{times:void 0,keyframes:a,duration:o-cp,ease:"linear"}}const pM={anticipate:WN,backInOut:YN,circInOut:qN};function _z(t){return t in pM}class Y2 extends lM{constructor(e){super(e);const{name:n,motionValue:s,element:a,keyframes:o}=this.options;this.resolver=new oM(o,(l,d)=>this.onKeyframesResolved(l,d),n,s,a),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:a,ease:o,type:l,motionValue:d,name:h,startTime:p}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof o=="string"&&rp()&&_z(o)&&(o=pM[o]),vz(this.options)){const{onComplete:y,onUpdate:b,motionValue:j,element:T,...N}=this.options,M=bz(e,N);e=M.keyframes,e.length===1&&(e[1]=e[0]),s=M.duration,a=M.times,o=M.ease,l="keyframes"}const x=gz(d.owner.current,h,e,{...this.options,duration:s,times:a,ease:o});return x.startTime=p??this.calcStartTime(),this.pendingTimeline?(M2(x,this.pendingTimeline),this.pendingTimeline=void 0):x.onfinish=()=>{const{onComplete:y}=this.options;d.set(Fp(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:x,duration:s,times:a,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ba(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ba(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=za(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Fs;const{animation:s}=n;M2(s,e)}return Fs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:a,type:o,ease:l,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:x,onComplete:y,element:b,...j}=this.options,T=new D0({...j,keyframes:s,duration:a,type:o,ease:l,times:d,isGenerator:!0}),N=za(this.time);p.setWithVelocity(T.sample(N-cp).value,T.sample(N).value,cp)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:a,repeatType:o,damping:l,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=n.owner.getProps();return xz()&&s&&mz.has(s)&&!h&&!p&&!a&&o!=="mirror"&&l!==0&&d!=="inertia"}}const wz={type:"spring",stiffness:500,damping:25,restSpeed:10},Sz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jz={type:"keyframes",duration:.8},kz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Tz=(t,{keyframes:e})=>e.length>2?jz:Qo.has(t)?t.startsWith("scale")?Sz(e[1]):wz:kz;function Nz({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:d,from:h,elapsed:p,...x}){return!!Object.keys(x).length}const C0=(t,e,n,s={},a,o)=>l=>{const d=m0(s,t)||{},h=d.delay||s.delay||0;let{elapsed:p=0}=s;p=p-za(h);let x={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:b=>{e.set(b),d.onUpdate&&d.onUpdate(b)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:a};Nz(d)||(x={...x,...Tz(t,x)}),x.duration&&(x.duration=za(x.duration)),x.repeatDelay&&(x.repeatDelay=za(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let y=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(x.duration=0,x.delay===0&&(y=!0)),y&&!o&&e.get()!==void 0){const b=Fp(x.keyframes,d);if(b!==void 0)return an.update(()=>{x.onUpdate(b),x.onComplete()}),new $L([])}return!o&&Y2.supports(x)?new Y2(x):new D0(x)};function Mz({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function mM(t,e,{delay:n=0,transitionOverride:s,type:a}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:d,...h}=e;s&&(l=s);const p=[],x=a&&t.animationState&&t.animationState.getState()[a];for(const y in h){const b=t.getValue(y,(o=t.latestValues[y])!==null&&o!==void 0?o:null),j=h[y];if(j===void 0||x&&Mz(x,y))continue;const T={delay:n,...m0(l||{},y)};let N=!1;if(window.MotionHandoffAnimation){const R=VN(t);if(R){const E=window.MotionHandoffAnimation(R,y,an);E!==null&&(T.startTime=E,N=!0)}}Hy(t,y),b.start(C0(y,b,j,t.shouldReduceMotion&&zN.has(y)?{type:!1}:T,t,N));const M=b.animation;M&&p.push(M)}return d&&Promise.all(p).then(()=>{an.update(()=>{d&&r6(t,d)})}),p}function Gy(t,e,n={}){var s;const a=Vp(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(o=n.transitionOverride);const l=a?()=>Promise.all(mM(t,a,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:x=0,staggerChildren:y,staggerDirection:b}=o;return Dz(t,e,x+p,y,b,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[p,x]=h==="beforeChildren"?[l,d]:[d,l];return p().then(()=>x())}else return Promise.all([l(),d(n.delay)])}function Dz(t,e,n=0,s=0,a=1,o){const l=[],d=(t.variantChildren.size-1)*s,h=a===1?(p=0)=>p*s:(p=0)=>d-p*s;return Array.from(t.variantChildren).sort(Cz).forEach((p,x)=>{p.notify("AnimationStart",e),l.push(Gy(p,e,{...o,delay:n+h(x)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function Cz(t,e){return t.sortNodePosition(e)}function Ez(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(o=>Gy(t,o,n));s=Promise.all(a)}else if(typeof e=="string")s=Gy(t,e,n);else{const a=typeof e=="function"?Vp(t,e,n.custom):e;s=Promise.all(mM(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const Az=s0.length;function gM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Az;n++){const s=s0[n],a=t.props[s];(hd(a)||a===!1)&&(e[s]=a)}return e}const Oz=[...n0].reverse(),Rz=n0.length;function Pz(t){return e=>Promise.all(e.map(({animation:n,options:s})=>Ez(t,n,s)))}function Lz(t){let e=Pz(t),n=W2(),s=!0;const a=h=>(p,x)=>{var y;const b=Vp(t,x,h==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(b){const{transition:j,transitionEnd:T,...N}=b;p={...p,...N,...T}}return p};function o(h){e=h(t)}function l(h){const{props:p}=t,x=gM(t.parent)||{},y=[],b=new Set;let j={},T=1/0;for(let M=0;M<Rz;M++){const R=Oz[M],E=n[R],z=p[R]!==void 0?p[R]:x[R],U=hd(z),I=R===h?E.isActive:null;I===!1&&(T=M);let V=z===x[R]&&z!==p[R]&&U;if(V&&s&&t.manuallyAnimateOnMount&&(V=!1),E.protectedKeys={...j},!E.isActive&&I===null||!z&&!E.prevProp||zp(z)||typeof z=="boolean")continue;const O=zz(E.prevProp,z);let q=O||R===h&&E.isActive&&!V&&U||M>T&&U,Z=!1;const re=Array.isArray(z)?z:[z];let J=re.reduce(a(R),{});I===!1&&(J={});const{prevResolvedValues:de={}}=E,le={...de,...J},te=X=>{q=!0,b.has(X)&&(Z=!0,b.delete(X)),E.needsAnimating[X]=!0;const ae=t.getValue(X);ae&&(ae.liveStyle=!1)};for(const X in le){const ae=J[X],oe=de[X];if(j.hasOwnProperty(X))continue;let me=!1;By(ae)&&By(oe)?me=!DN(ae,oe):me=ae!==oe,me?ae!=null?te(X):b.add(X):ae!==void 0&&b.has(X)?te(X):E.protectedKeys[X]=!0}E.prevProp=z,E.prevResolvedValues=J,E.isActive&&(j={...j,...J}),s&&t.blockInitialAnimation&&(q=!1),q&&(!(V&&O)||Z)&&y.push(...re.map(X=>({animation:X,options:{type:R}})))}if(b.size){const M={};b.forEach(R=>{const E=t.getBaseTarget(R),z=t.getValue(R);z&&(z.liveStyle=!0),M[R]=E??null}),y.push({animation:M})}let N=!!y.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(N=!1),s=!1,N?e(y):Promise.resolve()}function d(h,p){var x;if(n[h].isActive===p)return Promise.resolve();(x=t.variantChildren)===null||x===void 0||x.forEach(b=>{var j;return(j=b.animationState)===null||j===void 0?void 0:j.setActive(h,p)}),n[h].isActive=p;const y=l(h);for(const b in n)n[b].protectedKeys={};return y}return{animateChanges:l,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=W2(),s=!0}}}function zz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!DN(e,t):!1}function Eo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function W2(){return{animate:Eo(!0),whileInView:Eo(),whileHover:Eo(),whileTap:Eo(),whileDrag:Eo(),whileFocus:Eo(),exit:Eo()}}class eo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Bz extends eo{constructor(e){super(e),e.animationState||(e.animationState=Lz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Vz=0;class Fz extends eo{constructor(){super(...arguments),this.id=Vz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Hz={animation:{Feature:Bz},exit:{Feature:Fz}};function gd(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Ed(t){return{point:{x:t.pageX,y:t.pageY}}}const Uz=t=>e=>y0(e)&&t(e,Ed(e));function Zu(t,e,n,s){return gd(t,e,Uz(n),s)}const $2=(t,e)=>Math.abs(t-e);function Iz(t,e){const n=$2(t.x,e.x),s=$2(t.y,e.y);return Math.sqrt(n**2+s**2)}class xM{constructor(e,n,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Gx(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,j=Iz(y.offset,{x:0,y:0})>=3;if(!b&&!j)return;const{point:T}=y,{timestamp:N}=Jn;this.history.push({...T,timestamp:N});const{onStart:M,onMove:R}=this.handlers;b||(M&&M(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=qx(b,this.transformPagePoint),an.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:j,onSessionEnd:T,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Gx(y.type==="pointercancel"?this.lastMoveEventInfo:qx(b,this.transformPagePoint),this.history);this.startEvent&&j&&j(y,M),T&&T(y,M)},!y0(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.contextWindow=a||window;const l=Ed(e),d=qx(l,this.transformPagePoint),{point:h}=d,{timestamp:p}=Jn;this.history=[{...h,timestamp:p}];const{onSessionStart:x}=n;x&&x(e,Gx(d,this.history)),this.removeListeners=Cd(Zu(this.contextWindow,"pointermove",this.handlePointerMove),Zu(this.contextWindow,"pointerup",this.handlePointerUp),Zu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xr(this.updatePoint)}}function qx(t,e){return e?{point:e(t.point)}:t}function q2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Gx({point:t},e){return{point:t,delta:q2(t,yM(e)),offset:q2(t,Yz(e)),velocity:Wz(e,.1)}}function Yz(t){return t[0]}function yM(t){return t[t.length-1]}function Wz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=yM(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>za(e)));)n--;if(!s)return{x:0,y:0};const o=Ba(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const vM=1e-4,$z=1-vM,qz=1+vM,bM=.01,Gz=0-bM,Xz=0+bM;function Hs(t){return t.max-t.min}function Kz(t,e,n){return Math.abs(t-e)<=n}function G2(t,e,n,s=.5){t.origin=s,t.originPoint=yn(e.min,e.max,t.origin),t.scale=Hs(n)/Hs(e),t.translate=yn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=$z&&t.scale<=qz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Gz&&t.translate<=Xz||isNaN(t.translate))&&(t.translate=0)}function Qu(t,e,n,s){G2(t.x,e.x,n.x,s?s.originX:void 0),G2(t.y,e.y,n.y,s?s.originY:void 0)}function X2(t,e,n){t.min=n.min+e.min,t.max=t.min+Hs(e)}function Zz(t,e,n){X2(t.x,e.x,n.x),X2(t.y,e.y,n.y)}function K2(t,e,n){t.min=e.min-n.min,t.max=t.min+Hs(e)}function Ju(t,e,n){K2(t.x,e.x,n.x),K2(t.y,e.y,n.y)}function Qz(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?yn(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?yn(n,t,s.max):Math.min(t,n)),t}function Z2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Jz(t,{top:e,left:n,bottom:s,right:a}){return{x:Z2(t.x,n,a),y:Z2(t.y,e,s)}}function Q2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function e8(t,e){return{x:Q2(t.x,e.x),y:Q2(t.y,e.y)}}function t8(t,e){let n=.5;const s=Hs(t),a=Hs(e);return a>s?n=Jl(e.min,e.max-s,t.min):s>a&&(n=Jl(t.min,t.max-a,e.min)),Ha(0,1,n)}function n8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Xy=.35;function s8(t=Xy){return t===!1?t=0:t===!0&&(t=Xy),{x:J2(t,"left","right"),y:J2(t,"top","bottom")}}function J2(t,e,n){return{min:ej(t,e),max:ej(t,n)}}function ej(t,e){return typeof t=="number"?t:t[e]||0}const tj=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vl=()=>({x:tj(),y:tj()}),nj=()=>({min:0,max:0}),Nn=()=>({x:nj(),y:nj()});function ai(t){return[t("x"),t("y")]}function _M({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function i8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function a8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Xx(t){return t===void 0||t===1}function Ky({scale:t,scaleX:e,scaleY:n}){return!Xx(t)||!Xx(e)||!Xx(n)}function Lo(t){return Ky(t)||wM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wM(t){return sj(t.x)||sj(t.y)}function sj(t){return t&&t!=="0%"}function up(t,e,n){const s=t-n,a=e*s;return n+a}function ij(t,e,n,s,a){return a!==void 0&&(t=up(t,a,s)),up(t,n,s)+e}function Zy(t,e=0,n=1,s,a){t.min=ij(t.min,e,n,s,a),t.max=ij(t.max,e,n,s,a)}function SM(t,{x:e,y:n}){Zy(t.x,e.translate,e.scale,e.originPoint),Zy(t.y,n.translate,n.scale,n.originPoint)}const aj=.999999999999,rj=1.0000000000001;function r8(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let o,l;for(let d=0;d<a;d++){o=n[d],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Hl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,SM(t,l)),s&&Lo(o.latestValues)&&Hl(t,o.latestValues))}e.x<rj&&e.x>aj&&(e.x=1),e.y<rj&&e.y>aj&&(e.y=1)}function Fl(t,e){t.min=t.min+e,t.max=t.max+e}function oj(t,e,n,s,a=.5){const o=yn(t.min,t.max,a);Zy(t,e,n,o,s)}function Hl(t,e){oj(t.x,e.x,e.scaleX,e.scale,e.originX),oj(t.y,e.y,e.scaleY,e.scale,e.originY)}function jM(t,e){return _M(a8(t.getBoundingClientRect(),e))}function o8(t,e,n){const s=jM(t,n),{scroll:a}=e;return a&&(Fl(s.x,a.offset.x),Fl(s.y,a.offset.y)),s}const kM=({current:t})=>t?t.ownerDocument.defaultView:null,l8=new WeakMap;class c8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=x=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ed(x).point)},o=(x,y)=>{const{drag:b,dragPropagation:j,onDragStart:T}=this.getProps();if(b&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=t6(b),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ai(M=>{let R=this.getAxisMotionValue(M).get()||0;if(Gi.test(R)){const{projection:E}=this.visualElement;if(E&&E.layout){const z=E.layout.layoutBox[M];z&&(R=Hs(z)*(parseFloat(R)/100))}}this.originPoint[M]=R}),T&&an.postRender(()=>T(x,y)),Hy(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(x,y)=>{const{dragPropagation:b,dragDirectionLock:j,onDirectionLock:T,onDrag:N}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:M}=y;if(j&&this.currentDirection===null){this.currentDirection=u8(M),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",y.point,M),this.updateAxis("y",y.point,M),this.visualElement.render(),N&&N(x,y)},d=(x,y)=>this.stop(x,y),h=()=>ai(x=>{var y;return this.getAnimationState(x)==="paused"&&((y=this.getAxisMotionValue(x).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new xM(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:kM(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&an.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!_f(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=Qz(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&zl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=Jz(a.layoutBox,n):this.constraints=!1,this.elastic=s8(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ai(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=n8(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!zl(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=o8(s,a.root,this.visualElement.getTransformPagePoint());let l=e8(a.layout.layoutBox,o);if(n){const d=n(i8(l));this.hasMutatedConstraints=!!d,d&&(l=_M(d))}return l}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},p=ai(x=>{if(!_f(x,n,this.currentDirection))return;let y=h&&h[x]||{};l&&(y={min:0,max:0});const b=a?200:1e6,j=a?40:1e7,T={type:"inertia",velocity:s?e[x]:0,bounceStiffness:b,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(x,T)});return Promise.all(p).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Hy(this.visualElement,e),s.start(C0(e,s,0,n,this.visualElement,!1))}stopAnimation(){ai(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ai(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ai(n=>{const{drag:s}=this.getProps();if(!_f(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(n);if(a&&a.layout){const{min:l,max:d}=a.layout.layoutBox[n];o.set(e[n]-yn(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!zl(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ai(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const h=d.get();a[l]=t8({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ai(l=>{if(!_f(l,e,null))return;const d=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];d.set(yn(h,p,a[l]))})}addListeners(){if(!this.visualElement.current)return;l8.set(this.visualElement,this);const e=this.visualElement.current,n=Zu(e,"pointerdown",h=>{const{drag:p,dragListener:x=!0}=this.getProps();p&&x&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();zl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),an.read(s);const l=gd(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(ai(x=>{const y=this.getAxisMotionValue(x);y&&(this.originPoint[x]+=h[x].translate,y.set(y.get()+h[x].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=Xy,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:d}}}function _f(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function u8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class d8 extends eo{constructor(e){super(e),this.removeGroupControls=Fs,this.removeListeners=Fs,this.controls=new c8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fs}unmount(){this.removeGroupControls(),this.removeListeners()}}const lj=t=>(e,n)=>{t&&an.postRender(()=>t(e,n))};class h8 extends eo{constructor(){super(...arguments),this.removePointerDownListener=Fs}onPointerDown(e){this.session=new xM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:lj(e),onStart:lj(n),onMove:s,onEnd:(o,l)=>{delete this.session,a&&an.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=Zu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Of={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Nu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(et.test(t))t=parseFloat(t);else return t;const n=cj(t,e.target.x),s=cj(t,e.target.y);return`${n}% ${s}%`}},f8={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=Kr.parse(t);if(a.length>5)return s;const o=Kr.createTransformer(t),l=typeof a[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;a[0+l]/=d,a[1+l]/=h;const p=yn(d,h,.5);return typeof a[2+l]=="number"&&(a[2+l]/=p),typeof a[3+l]=="number"&&(a[3+l]/=p),o(a)}};class p8 extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=e;RL(m8),o&&(n.group&&n.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Of.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:o}=this.props,l=s.projection;return l&&(l.isPresent=o,a||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||an.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),a0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TM(t){const[e,n]=XP(),s=A.useContext(lN);return u.jsx(p8,{...t,layoutGroup:s,switchLayoutGroup:A.useContext(gN),isPresent:e,safeToRemove:n})}const m8={borderRadius:{...Nu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nu,borderTopRightRadius:Nu,borderBottomLeftRadius:Nu,borderBottomRightRadius:Nu,boxShadow:f8};function g8(t,e,n){const s=ls(t)?t:pd(t);return s.start(C0("",s,e,n)),s.animation}function x8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const y8=(t,e)=>t.depth-e.depth;class v8{constructor(){this.children=[],this.isDirty=!1}add(e){v0(this.children,e),this.isDirty=!0}remove(e){b0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(y8),this.isDirty=!1,this.children.forEach(e)}}function b8(t,e){const n=Xi.now(),s=({timestamp:a})=>{const o=a-n;o>=e&&(Xr(s),t(o-e))};return an.read(s,!0),()=>Xr(s)}const NM=["TopLeft","TopRight","BottomLeft","BottomRight"],_8=NM.length,uj=t=>typeof t=="string"?parseFloat(t):t,dj=t=>typeof t=="number"||et.test(t);function w8(t,e,n,s,a,o){a?(t.opacity=yn(0,n.opacity!==void 0?n.opacity:1,S8(s)),t.opacityExit=yn(e.opacity!==void 0?e.opacity:1,0,j8(s))):o&&(t.opacity=yn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let l=0;l<_8;l++){const d=`border${NM[l]}Radius`;let h=hj(e,d),p=hj(n,d);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||dj(h)===dj(p)?(t[d]=Math.max(yn(uj(h),uj(p),s),0),(Gi.test(p)||Gi.test(h))&&(t[d]+="%")):t[d]=p}(e.rotate||n.rotate)&&(t.rotate=yn(e.rotate||0,n.rotate||0,s))}function hj(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const S8=MM(0,.5,$N),j8=MM(.5,.95,Fs);function MM(t,e,n){return s=>s<t?0:s>e?1:n(Jl(t,e,s))}function fj(t,e){t.min=e.min,t.max=e.max}function si(t,e){fj(t.x,e.x),fj(t.y,e.y)}function pj(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mj(t,e,n,s,a){return t-=e,t=up(t,1/n,s),a!==void 0&&(t=up(t,1/a,s)),t}function k8(t,e=0,n=1,s=.5,a,o=t,l=t){if(Gi.test(e)&&(e=parseFloat(e),e=yn(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=yn(o.min,o.max,s);t===o&&(d-=e),t.min=mj(t.min,e,n,d,a),t.max=mj(t.max,e,n,d,a)}function gj(t,e,[n,s,a],o,l){k8(t,e[n],e[s],e[a],e.scale,o,l)}const T8=["x","scaleX","originX"],N8=["y","scaleY","originY"];function xj(t,e,n,s){gj(t.x,e,T8,n?n.x:void 0,s?s.x:void 0),gj(t.y,e,N8,n?n.y:void 0,s?s.y:void 0)}function yj(t){return t.translate===0&&t.scale===1}function DM(t){return yj(t.x)&&yj(t.y)}function vj(t,e){return t.min===e.min&&t.max===e.max}function M8(t,e){return vj(t.x,e.x)&&vj(t.y,e.y)}function bj(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function CM(t,e){return bj(t.x,e.x)&&bj(t.y,e.y)}function _j(t){return Hs(t.x)/Hs(t.y)}function wj(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class D8{constructor(){this.members=[]}add(e){v0(this.members,e),e.scheduleRender()}remove(e){if(b0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function C8(t,e,n){let s="";const a=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((a||o||l)&&(s=`translate3d(${a}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:x,rotateX:y,rotateY:b,skewX:j,skewY:T}=n;p&&(s=`perspective(${p}px) ${s}`),x&&(s+=`rotate(${x}deg) `),y&&(s+=`rotateX(${y}deg) `),b&&(s+=`rotateY(${b}deg) `),j&&(s+=`skewX(${j}deg) `),T&&(s+=`skewY(${T}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(s+=`scale(${d}, ${h})`),s||"none"}const zo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Hu=typeof window<"u"&&window.MotionDebug!==void 0,Kx=["","X","Y","Z"],E8={visibility:"hidden"},Sj=1e3;let A8=0;function Zx(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function EM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",an,!(a||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&EM(s)}function AM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},d=e?.()){this.id=A8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hu&&(zo.totalNodes=zo.resolvedTargetDeltas=zo.recalculatedProjection=0),this.nodes.forEach(P8),this.nodes.forEach(F8),this.nodes.forEach(H8),this.nodes.forEach(L8),Hu&&window.MotionDebug.record(zo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new v8)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new _0),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const h=this.eventHandlers.get(l);h&&h.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=x8(l),this.instance=l;const{layoutId:h,layout:p,visualElement:x}=this.options;if(x&&!x.current&&x.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(p||h)&&(this.isLayoutDirty=!0),t){let y;const b=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=b8(b,250),Of.hasAnimatedSinceResize&&(Of.hasAnimatedSinceResize=!1,this.nodes.forEach(kj))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&x&&(h||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeTargetChanged:j,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||x.getDefaultTransition()||$8,{onLayoutAnimationStart:M,onLayoutAnimationComplete:R}=x.getProps(),E=!this.targetLayout||!CM(this.targetLayout,T)||j,z=!b&&j;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||z||b&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,z);const U={...m0(N,"layout"),onPlay:M,onComplete:R};(x.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U)}else b||kj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(U8),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const y=this.path[x];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jj);return}this.isUpdating||this.nodes.forEach(B8),this.isUpdating=!1,this.nodes.forEach(V8),this.nodes.forEach(O8),this.nodes.forEach(R8),this.clearAllSnapshots();const d=Xi.now();Jn.delta=Ha(0,1e3/60,d-Jn.timestamp),Jn.timestamp=d,Jn.isProcessing=!0,Hx.update.process(Jn),Hx.preRender.process(Jn),Hx.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,a0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(z8),this.sharedNodes.forEach(I8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,an.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){an.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!DM(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,x=p!==this.prevTransformTemplateValue;l&&(d||Lo(this.latestValues)||x)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return l&&(h=this.removeTransform(h)),q8(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:d}=this.options;if(!d)return Nn();const h=d.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(G8))){const{scroll:x}=this.root;x&&(Fl(h.x,x.offset.x),Fl(h.y,x.offset.y))}return h}removeElementScroll(l){var d;const h=Nn();if(si(h,l),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return h;for(let p=0;p<this.path.length;p++){const x=this.path[p],{scroll:y,options:b}=x;x!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&si(h,l),Fl(h.x,y.offset.x),Fl(h.y,y.offset.y))}return h}applyTransform(l,d=!1){const h=Nn();si(h,l);for(let p=0;p<this.path.length;p++){const x=this.path[p];!d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Hl(h,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),Lo(x.latestValues)&&Hl(h,x.latestValues)}return Lo(this.latestValues)&&Hl(h,this.latestValues),h}removeTransform(l){const d=Nn();si(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!Lo(p.latestValues))continue;Ky(p.latestValues)&&p.updateSnapshot();const x=Nn(),y=p.measurePageBox();si(x,y),xj(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,x)}return Lo(this.latestValues)&&xj(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var d;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==h;if(!(l||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!(!this.layout||!(y||b))){if(this.resolvedRelativeTargetAt=Jn.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nn(),this.relativeTargetOrigin=Nn(),Ju(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Nn(),this.targetWithTransforms=Nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Zz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):si(this.target,this.layout.layoutBox),SM(this.target,this.targetDelta)):si(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nn(),this.relativeTargetOrigin=Nn(),Ju(this.relativeTargetOrigin,this.target,j.target),si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hu&&zo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ky(this.parent.latestValues)||wM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const d=this.getLead(),h=!!this.resumingFrom||this!==d;let p=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(p=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(p=!1),p)return;const{layout:x,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||y))return;si(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,j=this.treeScale.y;r8(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Nn());const{target:T}=d;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pj(this.prevProjectionDelta.x,this.projectionDelta.x),pj(this.prevProjectionDelta.y,this.projectionDelta.y)),Qu(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==j||!wj(this.projectionDelta.x,this.prevProjectionDelta.x)||!wj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Hu&&zo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vl(),this.projectionDelta=Vl(),this.projectionDeltaWithTransform=Vl()}setAnimationOrigin(l,d=!1){const h=this.snapshot,p=h?h.latestValues:{},x={...this.latestValues},y=Vl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const b=Nn(),j=h?h.source:void 0,T=this.layout?this.layout.source:void 0,N=j!==T,M=this.getStack(),R=!M||M.members.length<=1,E=!!(N&&!R&&this.options.crossfade===!0&&!this.path.some(W8));this.animationProgress=0;let z;this.mixTargetDelta=U=>{const I=U/1e3;Tj(y.x,l.x,I),Tj(y.y,l.y,I),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ju(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Y8(this.relativeTarget,this.relativeTargetOrigin,b,I),z&&M8(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=Nn()),si(z,this.relativeTarget)),N&&(this.animationValues=x,w8(x,p,this.latestValues,I,E,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=an.update(()=>{Of.hasAnimatedSinceResize=!0,this.currentAnimation=g8(0,Sj,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:h,layout:p,latestValues:x}=l;if(!(!d||!h||!p)){if(this!==l&&this.layout&&p&&OM(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Nn();const y=Hs(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const b=Hs(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+b}si(d,h),Hl(d,x),Qu(this.projectionDeltaWithTransform,this.layoutCorrected,d,x)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new D8),this.sharedNodes.get(l).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:d}=this.options;return d?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:d}=this.options;return d?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const p={};h.z&&Zx("z",l,p,this.animationValues);for(let x=0;x<Kx.length;x++)Zx(`rotate${Kx[x]}`,l,p,this.animationValues),Zx(`skew${Kx[x]}`,l,p,this.animationValues);l.render();for(const x in p)l.setStaticValue(x,p[x]),this.animationValues&&(this.animationValues[x]=p[x]);l.scheduleRender()}getProjectionStyles(l){var d,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return E8;const p={visibility:""},x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Ef(l?.pointerEvents)||"",p.transform=x?x(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Ef(l?.pointerEvents)||""),this.hasProjected&&!Lo(this.latestValues)&&(N.transform=x?x({},""):"none",this.hasProjected=!1),N}const b=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=C8(this.projectionDeltaWithTransform,this.treeScale,b),x&&(p.transform=x(b,p.transform));const{x:j,y:T}=this.projectionDelta;p.transformOrigin=`${j.origin*100}% ${T.origin*100}% 0`,y.animationValues?p.opacity=y===this?(h=(d=b.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:p.opacity=y===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const N in ap){if(b[N]===void 0)continue;const{correct:M,applyTo:R}=ap[N],E=p.transform==="none"?b[N]:M(b[N],y);if(R){const z=R.length;for(let U=0;U<z;U++)p[R[U]]=E}else p[N]=E}return this.options.layoutId&&(p.pointerEvents=y===this?Ef(l?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(jj),this.root.sharedNodes.clear()}}}function O8(t){t.updateLayout()}function R8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?ai(y=>{const b=l?n.measuredBox[y]:n.layoutBox[y],j=Hs(b);b.min=s[y].min,b.max=b.min+j}):OM(o,n.layoutBox,s)&&ai(y=>{const b=l?n.measuredBox[y]:n.layoutBox[y],j=Hs(s[y]);b.max=b.min+j,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+j)});const d=Vl();Qu(d,s,n.layoutBox);const h=Vl();l?Qu(h,t.applyTransform(a,!0),n.measuredBox):Qu(h,s,n.layoutBox);const p=!DM(d);let x=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:j}=y;if(b&&j){const T=Nn();Ju(T,n.layoutBox,b.layoutBox);const N=Nn();Ju(N,s,j.layoutBox),CM(T,N)||(x=!0),y.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=T,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:h,layoutDelta:d,hasLayoutChanged:p,hasRelativeTargetChanged:x})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function P8(t){Hu&&zo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function L8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function z8(t){t.clearSnapshot()}function jj(t){t.clearMeasurements()}function B8(t){t.isLayoutDirty=!1}function V8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function kj(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function F8(t){t.resolveTargetDelta()}function H8(t){t.calcProjection()}function U8(t){t.resetSkewAndRotation()}function I8(t){t.removeLeadSnapshot()}function Tj(t,e,n){t.translate=yn(e.translate,0,n),t.scale=yn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Nj(t,e,n,s){t.min=yn(e.min,n.min,s),t.max=yn(e.max,n.max,s)}function Y8(t,e,n,s){Nj(t.x,e.x,n.x,s),Nj(t.y,e.y,n.y,s)}function W8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $8={duration:.45,ease:[.4,0,.1,1]},Mj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Dj=Mj("applewebkit/")&&!Mj("chrome/")?Math.round:Fs;function Cj(t){t.min=Dj(t.min),t.max=Dj(t.max)}function q8(t){Cj(t.x),Cj(t.y)}function OM(t,e,n){return t==="position"||t==="preserve-aspect"&&!Kz(_j(e),_j(n),.2)}function G8(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const X8=AM({attachResizeListener:(t,e)=>gd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qx={current:void 0},RM=AM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qx.current){const t=new X8({});t.mount(window),t.setOptions({layoutScroll:!0}),Qx.current=t}return Qx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),K8={pan:{Feature:h8},drag:{Feature:d8,ProjectionNode:RM,MeasureLayout:TM}};function Ej(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,o=s[a];o&&an.postRender(()=>o(e,Ed(e)))}class Z8 extends eo{mount(){const{current:e}=this.node;e&&(this.unmount=KL(e,n=>(Ej(this.node,n,"Start"),s=>Ej(this.node,s,"End"))))}unmount(){}}class Q8 extends eo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cd(gd(this.node.current,"focus",()=>this.onFocus()),gd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Aj(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),o=s[a];o&&an.postRender(()=>o(e,Ed(e)))}class J8 extends eo{mount(){const{current:e}=this.node;e&&(this.unmount=e6(e,n=>(Aj(this.node,n,"Start"),(s,{success:a})=>Aj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qy=new WeakMap,Jx=new WeakMap,eB=t=>{const e=Qy.get(t.target);e&&e(t)},tB=t=>{t.forEach(eB)};function nB({root:t,...e}){const n=t||document;Jx.has(n)||Jx.set(n,{});const s=Jx.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(tB,{root:t,...e})),s[a]}function sB(t,e,n){const s=nB(e);return Qy.set(t,n),s.observe(t),()=>{Qy.delete(t),s.unobserve(t)}}const iB={some:0,all:1};class aB extends eo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:iB[a]},d=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:x,onViewportLeave:y}=this.node.getProps(),b=p?x:y;b&&b(h)};return sB(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rB(e,n))&&this.startObserver()}unmount(){}}function rB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oB={inView:{Feature:aB},tap:{Feature:J8},focus:{Feature:Q8},hover:{Feature:Z8}},lB={layout:{ProjectionNode:RM,MeasureLayout:TM}},Jy={current:null},PM={current:!1};function cB(){if(PM.current=!0,!!e0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Jy.current=t.matches;t.addListener(e),e()}else Jy.current=!1}const uB=[...rM,as,Kr],dB=t=>uB.find(aM(t)),Oj=new WeakMap;function hB(t,e,n){for(const s in e){const a=e[s],o=n[s];if(ls(a))t.addValue(s,a);else if(ls(o))t.addValue(s,pd(a,{owner:t}));else if(o!==a)if(t.hasValue(s)){const l=t.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(s);t.addValue(s,pd(l!==void 0?l:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Rj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fB{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:o,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=N0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const j=Xi.now();this.renderScheduledAt<j&&(this.renderScheduledAt=j,an.render(this.render,!1,!0))};const{latestValues:h,renderState:p,onUpdate:x}=l;this.onUpdate=x,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=Bp(n),this.isVariantNode=pN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const j in b){const T=b[j];h[j]!==void 0&&ls(T)&&T.set(h[j],!1)}}mount(e){this.current=e,Oj.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),PM.current||cB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Oj.delete(this.current),this.projection&&this.projection.unmount(),Xr(this.notifyUpdate),Xr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Qo.has(e),a=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&an.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ec){const n=ec[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Rj.length;s++){const a=Rj[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=e[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=hB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=pd(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(sM(a)||GN(a))?a=parseFloat(a):!dB(a)&&Kr.test(n)&&(a=eM(e,n)),this.setBaseTarget(e,ls(a)?a.get():a)),ls(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const l=o0(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(a=l[e])}if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ls(o)?o:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new _0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class LM extends fB{constructor(){super(...arguments),this.KeyframeResolver=oM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ls(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pB(t){return window.getComputedStyle(t)}class mB extends LM{constructor(){super(...arguments),this.type="html",this.renderInstance=SN}readValueFromInstance(e,n){if(Qo.has(n)){const s=T0(n);return s&&s.default||0}else{const s=pB(e),a=(bN(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jM(e,n)}build(e,n,s){u0(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return p0(e,n,s)}}class gB extends LM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qo.has(n)){const s=T0(n);return s&&s.default||0}return n=jN.has(n)?n:i0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return NN(e,n,s)}build(e,n,s){d0(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,a){kN(e,n,s,a)}mount(e){this.isSVGTag=f0(e.tagName),super.mount(e)}}const xB=(t,e)=>r0(t)?new gB(e):new mB(e,{allowProjection:t!==A.Fragment}),yB=IL({...Hz,...oB,...K8,...lB},xB),Dr=iL(yB);function vB(){const[t,e]=A.useState(null),[n,s]=A.useState(!1),[a,o]=A.useState(!1),[l,d]=A.useState(null),[h,p]=A.useState(!0),[x,y]=A.useState(null),b=async()=>{if(l){s(!0),o(!1);try{const M=await De.getAdvice();M.status==="disabled"?(d(!1),e(null)):e(M.advice??null)}catch(M){console.error(M),o(!0)}finally{s(!1)}}},j=async()=>{s(!0),o(!1);try{const M=await De.analystRun();y(M)}catch(M){console.error("Failed to fetch analyst summary:",M),o(!0)}finally{s(!1)}};A.useEffect(()=>{De.config().then(M=>{const R=M.advisor||{},E=R.enable_llm!==!1,z=R.auto_fetch!==!1;d(E),p(z),E&&z&&b(),E||j()}).catch(M=>{console.error("Failed to load advisor config:",M),d(!1)})},[]);const T=!!l&&!n,N=async()=>{const M=!h;p(M);try{await De.configSave({advisor:{auto_fetch:M}}),M&&l&&!t&&b()}catch(R){console.error("Failed to update advisor auto_fetch setting:",R)}};return u.jsxs(Ge,{className:"h-full p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted",children:[u.jsx(tT,{className:"h-4 w-4 text-accent"}),u.jsx("span",{children:"Aurora Advisor"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[l&&u.jsx("button",{onClick:N,className:`rounded-pill px-2 py-1 text-[10px] font-medium transition ${h?"bg-accent text-canvas border border-accent":"bg-surface border border-line/60 text-muted hover:border-accent hover:text-accent"}`,title:h?"Disable auto-fetch (advisor runs only on manual request)":"Enable auto-fetch when the plan changes",children:""}),l!==null&&u.jsx("button",{onClick:b,disabled:!T,className:"text-[10px] text-muted hover:text-text transition-colors p-1 disabled:opacity-40",title:l?"Fetch latest advice":"Enable LLM advice in Settings",children:u.jsx(eT,{className:`h-4 w-4 ${n?"animate-spin":""}`})})]})]}),u.jsxs("div",{className:"text-[11px] text-text leading-relaxed",children:[l===!1&&u.jsxs(u.Fragment,{children:[n&&u.jsx("span",{className:"animate-pulse",children:"Analyzing schedule (offline)"}),!n&&a&&u.jsx("span",{className:"text-red-400",children:"Unable to analyze schedule. Check backend logs for details."}),!n&&!a&&x&&x.recommendations&&u.jsx("div",{className:"space-y-2",children:Object.entries(x.recommendations).slice(0,3).map(([M,R])=>{const E=R??{},z=E.label||M,U=E.best_grid_window||{},I=E.best_solar_window||{},V=Z=>Z&&Z.length>=16?Z.slice(11,16):"",O=U.start&&U.end?`${V(U.start)}${V(U.end)} (${U.avg_price?.toFixed?.(2)??""} SEK/kWh)`:null,q=I.start&&I.end?`${V(I.start)}${V(I.end)} (${I.avg_pv_surplus?.toFixed?.(2)??""} kW surplus)`:null;return u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("div",{className:"font-medium",children:z}),u.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-muted",children:[O&&u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsx($i,{className:"h-3 w-3 text-accent"}),u.jsxs("span",{children:["Grid: ",O]})]}),q&&u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsx(nT,{className:"h-3 w-3 text-accent"}),u.jsxs("span",{children:["Solar: ",q]})]})]})]},M)})}),!n&&!a&&(!x||!x.recommendations)&&u.jsx("span",{className:"text-muted",children:"No appliance recommendations available. Configure appliances in Settings to see suggested run windows."})]}),l===!0&&u.jsxs(u.Fragment,{children:[n&&u.jsx("span",{className:"animate-pulse",children:"Analyzing schedule..."}),!n&&a&&u.jsx("span",{className:"text-red-400",children:"Unable to fetch advice. Check AI settings or try again."}),!n&&!a&&!t&&!h&&u.jsx("span",{className:"text-muted",children:"Click the refresh icon to analyze your current schedule."}),!n&&!a&&t&&u.jsx("span",{children:t})]}),l===null&&!n&&!a&&u.jsx("span",{className:"text-muted",children:"Loading advisor settings"})]})]})}const Pj=({value:t,total:e,colorClass:n})=>{const s=e>0?Math.min(100,t/e*100):0;return u.jsx("div",{className:"h-1.5 w-full bg-surface2 rounded-full overflow-hidden flex",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${n}`,style:{width:`${s}%`}})})};function bB({netCost:t,importKwh:e,exportKwh:n}){const s=(t??0)<=0;return u.jsxs(Ge,{className:"p-4 flex flex-col justify-between h-full relative overflow-hidden group",children:[u.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${s?"bg-emerald-500":"bg-red-500"}`}),u.jsxs("div",{className:"flex items-center gap-2 mb-3 relative z-10",children:[u.jsx("div",{className:`p-1.5 rounded-lg ${s?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:u.jsx(Qk,{className:"h-4 w-4"})}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Grid & Financial"})]}),u.jsxs("div",{className:"mb-4 relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-0.5",children:"Net Daily Cost"}),u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:`text-2xl font-bold ${s?"text-emerald-400":"text-red-400"}`,children:t!=null?Math.abs(t).toFixed(2):""}),u.jsx("span",{className:"text-xs text-muted",children:"kr"}),t!==null&&u.jsx("span",{className:`text-[10px] ml-2 px-1.5 py-0.5 rounded ${s?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:t>0?"COST":"EARNING"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-auto relative z-10",children:[u.jsxs("div",{className:"p-2 rounded-lg bg-surface2/40 border border-line/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-red-300 mb-1",children:[u.jsx(Mv,{className:"h-3 w-3"}),u.jsx("span",{className:"text-[10px]",children:"Import"})]}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[e?.toFixed(1)??""," ",u.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]}),u.jsxs("div",{className:"p-2 rounded-lg bg-surface2/40 border border-line/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-300 mb-1",children:[u.jsx(Dv,{className:"h-3 w-3"}),u.jsx("span",{className:"text-[10px]",children:"Export"})]}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[n?.toFixed(1)??""," ",u.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]})]})]})}function _B({pvActual:t,pvForecast:e,loadActual:n,loadAvg:s,waterKwh:a}){return u.jsxs(Ge,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-amber-500/[0.01]"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[u.jsx("div",{className:"p-1.5 rounded-lg bg-amber-500/10 text-amber-400",children:u.jsx($i,{className:"h-4 w-4"})}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Energy Resources"})]}),u.jsxs("div",{className:"space-y-4 relative z-10",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-amber-300",children:[u.jsx(Ov,{className:"h-3 w-3"}),u.jsx("span",{children:"Solar Production"})]}),u.jsxs("div",{className:"text-[10px] text-muted",children:[u.jsx("span",{className:"text-text font-medium",children:t?.toFixed(1)??""}),u.jsx("span",{className:"mx-1",children:"/"}),e?.toFixed(1)??""," kWh"]})]}),u.jsx(Pj,{value:t??0,total:e??1,colorClass:"bg-amber-400"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-purple-300",children:[u.jsx(id,{className:"h-3 w-3"}),u.jsx("span",{children:"House Load"})]}),u.jsxs("div",{className:"text-[10px] text-muted",children:[u.jsx("span",{className:"text-text font-medium",children:n?.toFixed(1)??""}),u.jsx("span",{className:"mx-1",children:"/"}),s?.toFixed(1)??""," kWh"]})]}),u.jsx(Pj,{value:n??0,total:s??1,colorClass:"bg-purple-400"})]}),u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-line/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-sky-300",children:[u.jsx(Jk,{className:"h-3 w-3"}),u.jsx("span",{children:"Water Heating"})]}),u.jsxs("div",{className:"text-sm font-medium text-text",children:[a?.toFixed(1)??""," ",u.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]})]})]})}function wB({soc:t,socTarget:e,sIndex:n,cycles:s,riskLabel:a}){return u.jsxs(Ge,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-blue-500/[0.01]"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[u.jsx("div",{className:"p-1.5 rounded-lg bg-blue-500/10 text-blue-400",children:u.jsx(qf,{className:"h-4 w-4"})}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Battery & Strategy"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[u.jsxs("div",{className:"col-span-2 flex items-center gap-3 p-3 rounded-xl bg-surface2/30 border border-line/30",children:[u.jsx(Xk,{className:`h-8 w-8 ${(t??0)>50?"text-emerald-400":(t??0)>20?"text-amber-400":"text-red-400"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-text",children:[t?.toFixed(0)??"","%"]}),u.jsx("div",{className:"text-[10px] text-muted",children:e!=null?`Targeting ${e.toFixed(0)}%`:"Current SoC"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-1",children:"S-Index"}),u.jsx("div",{className:"text-lg font-semibold text-text",children:n?`x${n.toFixed(2)}`:""}),u.jsx("div",{className:"text-[10px] text-blue-300/80",children:"Strategy Factor"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-1",children:"Cycles"}),u.jsx("div",{className:"text-lg font-semibold text-text",children:s?.toFixed(1)??""}),u.jsx("div",{className:"text-[10px] text-muted",children:a||"Daily usage"})]})]})]})}function SB({comfortLevel:t,setComfortLevel:e,riskAppetite:n,setRiskAppetite:s,vacationMode:a,onWaterBoost:o,onBatteryTopUp:l}){return u.jsxs(Ge,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[u.jsx("div",{className:"absolute left-[19px] top-6 bottom-6 w-[1px] bg-line/30 z-0"}),u.jsxs("div",{className:"space-y-3 relative z-10",children:[u.jsxs("div",{className:"bg-surface2/30 rounded-xl p-3 border border-line/50 relative overflow-hidden group",children:[u.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-blue-500/50 to-purple-500/50"}),u.jsxs("div",{className:"flex justify-between items-baseline mb-2 pl-3",children:[u.jsxs("div",{className:"text-[10px] text-muted uppercase tracking-wider flex items-center gap-2",children:[u.jsx("span",{children:"Market Strategy"}),u.jsx("div",{className:`h-1.5 w-1.5 rounded-full transition-colors ${n>3?"bg-purple-400 shadow-[0_0_5px_rgba(192,132,252,0.8)]":n<2?"bg-emerald-400":"bg-blue-400"}`})]}),u.jsx("div",{className:"text-xs font-medium text-text",children:{1:"Safety",2:"Conservative",3:"Neutral",4:"Aggressive",5:"Gambler"}[n]||"Unknown"})]}),u.jsx("div",{className:"flex gap-1 h-8 pl-3",children:[1,2,3,4,5].map(d=>{const h={1:"bg-emerald-500/20 text-emerald-300 border-emerald-500/40 shadow-[0_0_10px_rgba(16,185,129,0.2)]",2:"bg-teal-500/20 text-teal-300 border-teal-500/40 shadow-[0_0_10px_rgba(20,184,166,0.2)]",3:"bg-blue-500/20 text-blue-300 border-blue-500/40 shadow-[0_0_10px_rgba(59,130,246,0.2)]",4:"bg-amber-500/20 text-amber-300 border-amber-500/40 shadow-[0_0_10px_rgba(245,158,11,0.2)]",5:"bg-purple-500/20 text-purple-300 border-purple-500/40 shadow-[0_0_10px_rgba(168,85,247,0.2)]"},p=n===d;return u.jsx("button",{onClick:()=>s(d),className:`flex-1 rounded transition-all duration-300 border text-xs font-medium ${p?`${h[d]} ring-1 ring-inset ring-white/5`:"bg-surface2/50 text-muted hover:bg-surface2 hover:text-text border-transparent hover:border-line/50"}`,children:d},d)})})]}),u.jsxs("div",{className:"bg-surface2/30 rounded-xl p-3 border border-line/50 relative overflow-hidden",children:[u.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-amber-500/50 to-red-500/50"}),u.jsxs("div",{className:"flex justify-between items-center mb-2 pl-3",children:[u.jsxs("div",{className:"text-[10px] text-muted uppercase tracking-wider flex items-center gap-2",children:[u.jsx("span",{children:"Water Comfort"}),a&&u.jsx("span",{className:"text-[9px] text-amber-300 bg-amber-500/20 px-1.5 rounded animate-pulse",children:"Vacation"})]}),u.jsx("div",{className:"text-xs font-medium text-text",children:{1:"Economy",2:"Balanced",3:"Neutral",4:"Priority",5:"Maximum"}[t]||"Unknown"})]}),u.jsx("div",{className:"flex gap-1 h-8 pl-3",children:[1,2,3,4,5].map(d=>{const h={1:"bg-emerald-500/20 text-emerald-300 border-emerald-500/40 shadow-[0_0_10px_rgba(16,185,129,0.2)]",2:"bg-teal-500/20 text-teal-300 border-teal-500/40 shadow-[0_0_10px_rgba(20,184,166,0.2)]",3:"bg-blue-500/20 text-blue-300 border-blue-500/40 shadow-[0_0_10px_rgba(59,130,246,0.2)]",4:"bg-amber-500/20 text-amber-300 border-amber-500/40 shadow-[0_0_10px_rgba(245,158,11,0.2)]",5:"bg-red-500/20 text-red-300 border-red-500/40 shadow-[0_0_10px_rgba(239,68,68,0.2)]"},p=t===d;return u.jsx("button",{onClick:()=>e(d),className:`flex-1 rounded transition-all duration-300 border text-xs font-medium ${p?`${h[d]} ring-1 ring-inset ring-white/5`:"bg-surface2/50 text-muted hover:bg-surface2 hover:text-text border-transparent hover:border-line/50"}`,children:d},d)})})]}),u.jsxs("div",{className:"bg-surface2/30 rounded-xl p-2 border border-line/50 flex gap-2 relative",children:[u.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-line/50"}),u.jsxs("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-surface hover:bg-surface2 border border-line/30 transition-all group ml-3",children:[u.jsx("div",{className:"p-1 rounded-full bg-orange-500/10 text-orange-400 group-hover:bg-orange-500/20 transition-colors",children:u.jsx(Cv,{className:"h-3.5 w-3.5"})}),u.jsx("span",{className:"text-[10px] font-medium text-text",children:"Boost Water (1h)"})]}),u.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-surface hover:bg-surface2 border border-line/30 transition-all group",children:[u.jsx("div",{className:"p-1 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20 transition-colors",children:u.jsx(_y,{className:"h-3.5 w-3.5"})}),u.jsx("span",{className:"text-[10px] font-medium text-text",children:"Top Up 50%"})]})]})]})]})}const Zi=Object.create(null);Zi.open="0";Zi.close="1";Zi.ping="2";Zi.pong="3";Zi.message="4";Zi.upgrade="5";Zi.noop="6";const Rf=Object.create(null);Object.keys(Zi).forEach(t=>{Rf[Zi[t]]=t});const ev={type:"error",data:"parser error"},zM=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",BM=typeof ArrayBuffer=="function",VM=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,E0=({type:t,data:e},n,s)=>zM&&e instanceof Blob?n?s(e):Lj(e,s):BM&&(e instanceof ArrayBuffer||VM(e))?n?s(e):Lj(new Blob([e]),s):s(Zi[t]+(e||"")),Lj=(t,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(t)};function zj(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ey;function jB(t,e){if(zM&&t.data instanceof Blob)return t.data.arrayBuffer().then(zj).then(e);if(BM&&(t.data instanceof ArrayBuffer||VM(t.data)))return e(zj(t.data));E0(t,!1,n=>{ey||(ey=new TextEncoder),e(ey.encode(n))})}const Bj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Bj.length;t++)Uu[Bj.charCodeAt(t)]=t;const kB=t=>{let e=t.length*.75,n=t.length,s,a=0,o,l,d,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const p=new ArrayBuffer(e),x=new Uint8Array(p);for(s=0;s<n;s+=4)o=Uu[t.charCodeAt(s)],l=Uu[t.charCodeAt(s+1)],d=Uu[t.charCodeAt(s+2)],h=Uu[t.charCodeAt(s+3)],x[a++]=o<<2|l>>4,x[a++]=(l&15)<<4|d>>2,x[a++]=(d&3)<<6|h&63;return p},TB=typeof ArrayBuffer=="function",A0=(t,e)=>{if(typeof t!="string")return{type:"message",data:FM(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:NB(t.substring(1),e)}:Rf[n]?t.length>1?{type:Rf[n],data:t.substring(1)}:{type:Rf[n]}:ev},NB=(t,e)=>{if(TB){const n=kB(t);return FM(n,e)}else return{base64:!0,data:t}},FM=(t,e)=>e==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,HM="",MB=(t,e)=>{const n=t.length,s=new Array(n);let a=0;t.forEach((o,l)=>{E0(o,!1,d=>{s[l]=d,++a===n&&e(s.join(HM))})})},DB=(t,e)=>{const n=t.split(HM),s=[];for(let a=0;a<n.length;a++){const o=A0(n[a],e);if(s.push(o),o.type==="error")break}return s};function CB(){return new TransformStream({transform(t,e){jB(t,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(n)})}})}let ty;function wf(t){return t.reduce((e,n)=>e+n.length,0)}function Sf(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let s=0;for(let a=0;a<e;a++)n[a]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function EB(t,e){ty||(ty=new TextDecoder);const n=[];let s=0,a=-1,o=!1;return new TransformStream({transform(l,d){for(n.push(l);;){if(s===0){if(wf(n)<1)break;const h=Sf(n,1);o=(h[0]&128)===128,a=h[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(wf(n)<2)break;const h=Sf(n,2);a=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),s=3}else if(s===2){if(wf(n)<8)break;const h=Sf(n,8),p=new DataView(h.buffer,h.byteOffset,h.length),x=p.getUint32(0);if(x>Math.pow(2,21)-1){d.enqueue(ev);break}a=x*Math.pow(2,32)+p.getUint32(4),s=3}else{if(wf(n)<a)break;const h=Sf(n,a);d.enqueue(A0(o?h:ty.decode(h),e)),s=0}if(a===0||a>t){d.enqueue(ev);break}}}})}const UM=4;function Pn(t){if(t)return AB(t)}function AB(t){for(var e in Pn.prototype)t[e]=Pn.prototype[e];return t}Pn.prototype.on=Pn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Pn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Pn.prototype.off=Pn.prototype.removeListener=Pn.prototype.removeAllListeners=Pn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===e||s.fn===e){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Pn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,e)}return this};Pn.prototype.emitReserved=Pn.prototype.emit;Pn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Pn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Hp=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),ri=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),OB="arraybuffer";function IM(t,...e){return e.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const RB=ri.setTimeout,PB=ri.clearTimeout;function Up(t,e){e.useNativeTimers?(t.setTimeoutFn=RB.bind(ri),t.clearTimeoutFn=PB.bind(ri)):(t.setTimeoutFn=ri.setTimeout.bind(ri),t.clearTimeoutFn=ri.clearTimeout.bind(ri))}const LB=1.33;function zB(t){return typeof t=="string"?BB(t):Math.ceil((t.byteLength||t.size)*LB)}function BB(t){let e=0,n=0;for(let s=0,a=t.length;s<a;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function YM(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function VB(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function FB(t){let e={},n=t.split("&");for(let s=0,a=n.length;s<a;s++){let o=n[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class HB extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class O0 extends Pn{constructor(e){super(),this.writable=!1,Up(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new HB(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=A0(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=VB(e);return n.length?"?"+n:""}}class UB extends O0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};DB(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,MB(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=YM()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let WM=!1;try{WM=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const IB=WM;function YB(){}class WB extends UB{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}class Ki extends Pn{constructor(e,n,s){super(),this.createRequest=e,Up(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=IM(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ki.requestsCount++,Ki.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=YB,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ki.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ki.requestsCount=0;Ki.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Vj);else if(typeof addEventListener=="function"){const t="onpagehide"in ri?"pagehide":"unload";addEventListener(t,Vj,!1)}}function Vj(){for(let t in Ki.requests)Ki.requests.hasOwnProperty(t)&&Ki.requests[t].abort()}const $B=(function(){const t=$M({xdomain:!1});return t&&t.responseType!==null})();class qB extends WB{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=$B&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ki($M,this.uri(),e)}}function $M(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||IB))return new XMLHttpRequest}catch{}if(!e)try{return new ri[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const qM=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class GB extends O0{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=qM?{}:IM(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],a=n===e.length-1;E0(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}a&&Hp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=YM()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const ny=ri.WebSocket||ri.MozWebSocket;class XB extends GB{createSocket(e,n,s){return qM?new ny(e,n,s):n?new ny(e,n):new ny(e)}doWrite(e,n){this.ws.send(n)}}class KB extends O0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=EB(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),a=CB();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const o=()=>{s.read().then(({done:d,value:h})=>{d||(this.onPacket(h),o())}).catch(d=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],a=n===e.length-1;this._writer.write(s).then(()=>{a&&Hp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ZB={websocket:XB,webtransport:KB,polling:qB},QB=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,JB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tv(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let a=QB.exec(t||""),o={},l=14;for(;l--;)o[JB[l]]=a[l]||"";return n!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=e9(o,o.path),o.queryKey=t9(o,o.query),o}function e9(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function t9(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,o){a&&(n[a]=o)}),n}const nv=typeof addEventListener=="function"&&typeof removeEventListener=="function",Pf=[];nv&&addEventListener("offline",()=>{Pf.forEach(t=>t())},!1);class Wr extends Pn{constructor(e,n){if(super(),this.binaryType=OB,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=tv(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=tv(n.host).host);Up(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=FB(this.opts.query)),nv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Pf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=UM,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Wr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Wr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=zB(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Hp(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:n,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Wr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),nv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Pf.indexOf(this._offlineEventListener);s!==-1&&Pf.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Wr.protocol=UM;class n9 extends Wr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;Wr.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",y=>{if(!s)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Wr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=n.name,this.emitReserved("upgradeError",b)}}))};function o(){s||(s=!0,x(),n.close(),n=null)}const l=y=>{const b=new Error("probe error: "+y);b.transport=n.name,o(),this.emitReserved("upgradeError",b)};function d(){l("transport closed")}function h(){l("socket closed")}function p(y){n&&y.name!==n.name&&o()}const x=()=>{n.removeListener("open",a),n.removeListener("error",l),n.removeListener("close",d),this.off("close",h),this.off("upgrading",p)};n.once("open",a),n.once("error",l),n.once("close",d),this.once("close",h),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let s9=class extends n9{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>ZB[a]).filter(a=>!!a)),super(e,s)}};function i9(t,e="",n){let s=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),s=tv(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}const a9=typeof ArrayBuffer=="function",r9=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,GM=Object.prototype.toString,o9=typeof Blob=="function"||typeof Blob<"u"&&GM.call(Blob)==="[object BlobConstructor]",l9=typeof File=="function"||typeof File<"u"&&GM.call(File)==="[object FileConstructor]";function R0(t){return a9&&(t instanceof ArrayBuffer||r9(t))||o9&&t instanceof Blob||l9&&t instanceof File}function Lf(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(Lf(t[n]))return!0;return!1}if(R0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Lf(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Lf(t[n]))return!0;return!1}function c9(t){const e=[],n=t.data,s=t;return s.data=sv(n,e),s.attachments=e.length,{packet:s,buffers:e}}function sv(t,e){if(!t)return t;if(R0(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=sv(t[s],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=sv(t[s],e));return n}return t}function u9(t,e){return t.data=iv(t.data,e),delete t.attachments,t}function iv(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=iv(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=iv(t[n],e));return t}const XM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],d9=5;var ft;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ft||(ft={}));class h9{constructor(e){this.replacer=e}encode(e){return(e.type===ft.EVENT||e.type===ft.ACK)&&Lf(e)?this.encodeAsBinary({type:e.type===ft.EVENT?ft.BINARY_EVENT:ft.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ft.BINARY_EVENT||e.type===ft.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=c9(e),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}class P0 extends Pn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===ft.BINARY_EVENT;s||n.type===ft.BINARY_ACK?(n.type=s?ft.EVENT:ft.ACK,this.reconstructor=new f9(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(R0(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(ft[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===ft.BINARY_EVENT||s.type===ft.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const l=e.substring(o,n);if(l!=Number(l)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(o,n)}else s.nsp="/";const a=e.charAt(n+1);if(a!==""&&Number(a)==a){const o=n+1;for(;++n;){const l=e.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===e.length)break}s.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(P0.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ft.CONNECT:return dp(n);case ft.DISCONNECT:return n===void 0;case ft.CONNECT_ERROR:return typeof n=="string"||dp(n);case ft.EVENT:case ft.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&XM.indexOf(n[0])===-1);case ft.ACK:case ft.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class f9{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=u9(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function p9(t){return typeof t=="string"}const m9=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function g9(t){return t===void 0||m9(t)}function dp(t){return Object.prototype.toString.call(t)==="[object Object]"}function x9(t,e){switch(t){case ft.CONNECT:return e===void 0||dp(e);case ft.DISCONNECT:return e===void 0;case ft.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&XM.indexOf(e[0])===-1);case ft.ACK:return Array.isArray(e);case ft.CONNECT_ERROR:return typeof e=="string"||dp(e);default:return!1}}function y9(t){return p9(t.nsp)&&g9(t.id)&&x9(t.type,t.data)}const v9=Object.freeze(Object.defineProperty({__proto__:null,Decoder:P0,Encoder:h9,get PacketType(){return ft},isPacketValid:y9,protocol:d9},Symbol.toStringTag,{value:"Module"}));function ki(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const b9=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class KM extends Pn{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ki(e,"open",this.onopen.bind(this)),ki(e,"packet",this.onpacket.bind(this)),ki(e,"error",this.onerror.bind(this)),ki(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,a,o;if(b9.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:ft.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,y=n.pop();this._registerAckCallback(x,y),l.id=x}const d=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,h=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!d||(h?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===e&&this.sendBuffer.splice(d,1);n.call(this,new Error("operation has timed out"))},a),l=(...d)=>{this.io.clearTimeoutFn(o),n.apply(this,d)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...n){return new Promise((s,a)=>{const o=(l,d)=>l?a(l):s(d);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...o)=>(this._queue[0],a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ft.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ft.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ft.EVENT:case ft.BINARY_EVENT:this.onevent(e);break;case ft.ACK:case ft.BINARY_ACK:this.onack(e);break;case ft.DISCONNECT:this.ondisconnect();break;case ft.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:ft.ACK,id:e,data:a}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ft.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function uc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}uc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};uc.prototype.reset=function(){this.attempts=0};uc.prototype.setMin=function(t){this.ms=t};uc.prototype.setMax=function(t){this.max=t};uc.prototype.setJitter=function(t){this.jitter=t};class av extends Pn{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Up(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new uc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const a=n.parser||v9;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new s9(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=ki(n,"open",function(){s.onopen(),e&&e()}),o=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),e?e(d):this.maybeReconnectOnOpen()},l=ki(n,"error",o);if(this._timeout!==!1){const d=this._timeout,h=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),n.close()},d);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(a),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ki(e,"ping",this.onping.bind(this)),ki(e,"data",this.ondata.bind(this)),ki(e,"error",this.onerror.bind(this)),ki(e,"close",this.onclose.bind(this)),ki(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Hp(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new KM(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Mu={};function zf(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=i9(t,e.path||"/socket.io"),s=n.source,a=n.id,o=n.path,l=Mu[a]&&o in Mu[a].nsps,d=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let h;return d?h=new av(s,e):(Mu[a]||(Mu[a]=new av(s,e)),h=Mu[a]),n.query&&!e.query&&(e.query=n.queryKey),h.socket(n.path,e)}Object.assign(zf,{Manager:av,Socket:KM,io:zf,connect:zf});let Ol=null;const _9=()=>(Ol||(Ol=zf({path:"/socket.io",autoConnect:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),Ol.on("connect",()=>{console.log(" Connected to Darkstar WebSocket")}),Ol.on("disconnect",t=>{console.warn(" Disconnected from Darkstar WebSocket:",t)}),Ol.on("connect_error",t=>{console.error(" WebSocket connection error:",t)})),Ol),Ul=(t,e)=>{A.useEffect(()=>{const n=_9();return n.on(t,e),()=>{n.off(t,e)}},[t,e])};function Fj(t){if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${e}-${n}-${s} ${a}:${o}`}function w9(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState(null),[l,d]=A.useState(null),[h,p]=A.useState(null),[x,y]=A.useState("local"),[b,j]=A.useState(null),[T,N]=A.useState(null),[M,R]=A.useState(null),[E,z]=A.useState(null),[U,I]=A.useState(null),[V,O]=A.useState(3),[q,Z]=A.useState(!1),[re,J]=A.useState(!1),[de,le]=A.useState(null),[te,se]=A.useState(3),[W,X]=A.useState(null),[ae,oe]=A.useState(null),[me,F]=A.useState(null),[ee,xe]=A.useState(!1),[H,pe]=A.useState(null),[Se,Ue]=A.useState(!1),[tt,Te]=A.useState(null),[lt,gt]=A.useState(0),[_t,Bt]=A.useState(null),[Mt,st]=A.useState(null),[fn,es]=A.useState(!1),[vn,ds]=A.useState(null),[Hn,ze]=A.useState(null),[xt,pn]=A.useState(null),[zt,Es]=A.useState(null),[ot,Wn]=A.useState(null),[Ln,Is]=A.useState(null);Ul("live_metrics",Pe=>{Pe.soc!==void 0&&e(Pe.soc)}),Ul("plan_updated",()=>{console.log(" Plan updated! Refreshing data..."),ts()}),Ul("executor_status",Pe=>{Wn({shadow_mode:Pe.shadow_mode??!1,paused:Pe.paused??null})}),Ul("ha_entity_change",Pe=>{if(Pe.entity_id===de){const mt=Pe.state==="on";J(mt)}}),A.useEffect(()=>{const Pe=async()=>{try{const mt=await De.config();if(mt.ok){const fe=(await mt.json()).water_heating?.vacation_mode;Z(fe?.enabled||!1)}}catch(mt){console.log("Failed to reload vacation mode:",mt)}};return window.addEventListener("config-updated",Pe),()=>window.removeEventListener("config-updated",Pe)},[]);const gs=A.useCallback(Pe=>{y(Pe)},[]),di=A.useCallback(Pe=>{if(xe(!0),pe(null),!Pe||Pe.length===0){F([]),xe(!1);return}De.scheduleTodayWithHistory().then(mt=>{const qt=mt.slots??[],fe=new Map;qt.forEach(Me=>{Me.start_time&&fe.set(String(Me.start_time),Me)});const ve=Pe.map(Me=>{const Ve=Me.start_time,je=Ve?fe.get(String(Ve)):void 0;if(!je)return Me;const Oe=je,Qe={...Me};return Oe.soc_actual_percent!=null&&(Qe.soc_actual_percent=Oe.soc_actual_percent),Oe.is_executed===!0&&(Qe.is_executed=!0),Qe});F(ve)}).catch(mt=>{console.error("Failed to merge history into server schedule:",mt),F(Pe??[]),pe("Failed to merge execution history; showing DB plan only.")}).finally(()=>{xe(!1)})},[]),ts=A.useCallback(async()=>{Ue(!0);let Pe=!1;try{const[mt,qt,fe,ve,Me,Ve,je,Oe,Qe,Ae,Gt]=await Promise.allSettled([De.status(),De.horizon(),De.config(),De.haAverage(),De.schedule(),De.haWaterToday(),De.learningStatus(),De.schedulerStatus(),De.scheduleTodayWithHistory(),De.executor.status(),De.energyToday()]);if(mt.status==="fulfilled"){const Fe=mt.value;e(kx.socValue(Fe)??null);const ln=Fe.local??{},Dt=Fe.db&&"planned_at"in Fe.db?Fe.db:null,fs=ln?.planned_at||ln?.planner_version?{plannedAt:ln.planned_at,version:ln.planner_version,sIndex:ln.s_index}:null,bs=Dt?.planned_at||Dt?.planner_version?{plannedAt:Dt.planned_at,version:Dt.planner_version,sIndex:Dt.s_index}:null;o(fs),d(bs),p(fs||bs||null)}else Pe=!0,console.error("Failed to load status for Dashboard:",mt.reason);if(qt.status==="fulfilled"){const Fe=qt.value;s({pvDays:kx.pvDays(Fe)??void 0,weatherDays:kx.wxDays(Fe)??void 0})}else Pe=!0,console.error("Failed to load horizon for Dashboard:",qt.reason);if(fe.status==="fulfilled"){const Fe=fe.value;Fe.system?.battery?.capacity_kwh&&j(Fe.system.battery.capacity_kwh);const ln=Fe.arbitrage||{};if(oe({enabled:ln.enable_export,mode:ln.enable_peak_only_export?"peak_only":"passive"}),Fe.automation){const Dt=Fe.automation;st({enable_scheduler:Dt.enable_scheduler,write_to_mariadb:Dt.write_to_mariadb,external_executor_mode:Dt.external_executor_mode,every_minutes:Dt.schedule?.every_minutes??null})}else st(null);Fe.water_heating&&(typeof Fe.water_heating.comfort_level=="number"&&O(Fe.water_heating.comfort_level),typeof Fe.water_heating.vacation_mode?.enabled=="boolean"&&Z(Fe.water_heating.vacation_mode.enabled)),Fe.input_sensors?.vacation_mode&&(le(Fe.input_sensors.vacation_mode),De.haEntityState(Fe.input_sensors.vacation_mode).then(Dt=>{const fs=Dt.state==="on";J(fs)}).catch(()=>{J(!1)}))}else Pe=!0,console.error("Failed to load config for Dashboard:",fe.reason);if(ve.status==="fulfilled"){const Fe=ve.value;R({kw:Fe.average_load_kw,dailyKwh:Fe.daily_kwh})}else Pe=!0,console.error("Failed to load HA average for Dashboard:",ve.reason);if(Me.status==="fulfilled"){const Fe=Me.value,ln=Fe.schedule??[];ze(ln);const Dt=new Date().toISOString().split("T")[0],bs=(Fe.schedule?.filter(ps=>ps.start_time?.startsWith(Dt))||[]).reduce((ps,Jt)=>ps+(Jt.pv_forecast_kwh||0),0);N(bs),Fe.meta?.last_error?Es({message:Fe.meta.last_error,at:Fe.meta.last_error_at||""}):Es(null);const pi=new Date,Pi=ln.find(ps=>{const Jt=new Date(ps.start_time||""),to=new Date(Jt.getTime()+1800*1e3);return pi>=Jt&&pi<to});Pi?.soc_target_percent!==void 0&&z(Pi.soc_target_percent)}else Pe=!0,console.error("Failed to load schedule for Dashboard:",Me.reason);if(Ve.status==="fulfilled"){const Fe=Ve.value;I({kwh:Fe.water_kwh_today,source:Fe.source})}else Pe=!0,console.error("Failed to load water data for Dashboard:",Ve.reason);if(je.status==="fulfilled"){const Fe=je.value,ln=Fe.metrics?.total_slots&&Fe.metrics.total_slots>0,Dt=Fe.metrics?.completed_learning_runs&&Fe.metrics.completed_learning_runs>0;X({enabled:Fe.enabled,status:ln?Dt?"learning":"ready":"gathering",samples:Fe.metrics?.total_slots})}else Pe=!0,console.error("Failed to load learning status for Dashboard:",je.reason);if(Oe.status==="fulfilled"){const Fe=Oe.value;ds({last_run_at:Fe.last_run_at??null,last_run_status:Fe.last_run_status??null,next_run_at:Fe.next_run_at??null})}else console.error("Failed to load scheduler status for Dashboard:",Oe.reason);if(Qe.status==="fulfilled"){const ln=Qe.value.slots??[];pn(ln)}else console.error("Failed to load schedule history for Dashboard:",Qe.reason);let Qt=0;if(Qe.status==="fulfilled"&&Qe.value.slots){const Fe=new Date;Fe.setHours(0,0,0,0),Qe.value.slots.filter(Dt=>new Date(Dt.start_time)>=Fe).forEach(Dt=>{Qt+=Dt.pv_forecast_kwh??0})}if(Ae.status==="fulfilled"){const Fe=Ae.value;Wn({shadow_mode:Fe.shadow_mode??!1,paused:Fe.paused??null})}else console.error("Failed to load executor status for Dashboard:",Ae.reason);if(Gt.status==="fulfilled"){const Fe=Gt.value;Is({gridImport:Fe.grid_import_kwh,gridExport:Fe.grid_export_kwh,batteryCycles:Fe.battery_cycles,pvProduction:Fe.pv_production_kwh,pvForecast:Math.round(Qt*10)/10,loadConsumption:Fe.load_consumption_kwh,netCost:Fe.net_cost_kr})}else console.error("Failed to load energy today for Dashboard:",Gt.reason);Te(new Date)}catch(mt){console.error("Error fetching dashboard data:",mt),Pe=!0}finally{Ue(!1),Bt(Pe?"Some dashboard data failed to load.":null),gt(mt=>mt+1)}},[]);A.useEffect(()=>{let Pe=null;x==="server"?Pe=l:Pe=a,p(Pe)},[x,a,l]),A.useEffect(()=>{ts()},[ts]);const xs=async()=>{if(fn)return;const mt=!(Mt?.enable_scheduler??!1);es(!0);try{await De.configSave({automation:{enable_scheduler:mt}}),st(qt=>({enable_scheduler:mt,write_to_mariadb:qt?.write_to_mariadb,external_executor_mode:qt?.external_executor_mode,every_minutes:qt?.every_minutes??null}))}catch(qt){console.error("Failed to toggle planner automation:",qt)}finally{es(!1)}},[mn,$t]=A.useState(!1),[gn,zn]=A.useState(null),hi=async()=>{$t(!0),zn(null);try{const Pe=await De.loadServerPlan();di(Pe.schedule??[]),gs("server"),zn({type:"success",message:"Plan loaded from DB"})}catch(Pe){zn({type:"error",message:Pe instanceof Error?Pe.message:"Load failed"})}finally{$t(!1),setTimeout(()=>zn(null),3e3)}},Ei=async()=>{$t(!0),zn(null);try{await De.pushToDb(),zn({type:"success",message:"Plan pushed to DB"}),ts()}catch(Pe){zn({type:"error",message:Pe instanceof Error?Pe.message:"Push failed"})}finally{$t(!1),setTimeout(()=>zn(null),3e3)}};let Cn;if(x==="server"&&me&&me.length>0)Cn=me;else if(x==="local"&&Hn&&Hn.length>0){const Pe=Hn.filter(mt=>Td(mt.start_time)||Xo(mt.start_time));if(xt&&xt.length>0){const mt=Pe.filter(qt=>Xo(qt.start_time));Cn=[...xt,...mt]}else Cn=Pe}const Ys=new Date;let As=x==="server"?"Server Plan":"Local Plan";h?.plannedAt&&(As=`Generated ${new Date(h.plannedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`);let hs="";if(Cn){const Pe=Cn.find(mt=>{const qt=new Date(mt.start_time),fe=new Date(qt.getTime()+1800*1e3);return Ys>=qt&&Ys<fe});if(Pe){const mt=new Date(new Date(Pe.start_time).getTime()+18e5),qt=Math.max(0,Math.floor((mt.getTime()-Ys.getTime())/6e4));let fe="Idle";(Pe.charge_kw||0)>.1?fe=`Charge ${Pe.charge_kw?.toFixed(1)}kW`:(Pe.discharge_kw||0)>.1?fe=`Discharge ${Pe.discharge_kw?.toFixed(1)}kW`:(Pe.export_kw||0)>.1?fe=`Export ${Pe.export_kw?.toFixed(1)}kW`:(Pe.water_kw||0)>.1&&(fe="Heat Water"),hs=`  Next: ${fe} (${qt}m)`}}const Ws=`${As}${hs}`;t!==null&&`${t.toFixed(1)}`,n?.pvDays,n?.weatherDays;const ys=vn?.last_run_at||a?.plannedAt||l?.plannedAt,Ai=ys?new Date(ys):null,Oi=Mt?.every_minutes&&Mt.every_minutes>0?Mt.every_minutes:null;let fi=null;vn?.next_run_at?fi=new Date(vn.next_run_at):Mt?.enable_scheduler&&Ai&&Oi&&(fi=new Date(Ai.getTime()+Oi*60*1e3));const vs=h?.sIndex?.effective_load_margin,Ri=h?.sIndex?.target_soc?.target_percent;return vs&&`${vs.toFixed(2)}`,Ri&&`${Ri.toFixed(0)}`,u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-6 sm:px-6 lg:pt-10 space-y-6",children:[zt&&u.jsx(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-error p-4",children:u.jsxs("div",{className:"flex items-start justify-between gap-4 w-full",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 font-semibold text-sm mb-1",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Planner Error"})]}),u.jsx("div",{className:"opacity-80 text-xs",children:zt.message}),zt.at&&u.jsx("div",{className:"opacity-60 text-[10px] mt-1",children:new Date(zt.at).toLocaleString()})]}),u.jsx("button",{onClick:()=>Es(null),className:"opacity-60 hover:opacity-100 text-xs px-2 py-1",title:"Dismiss",children:""})]})}),ot?.shadow_mode&&u.jsxs(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-purple px-4 py-3",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"font-medium",children:"Shadow Mode Active"}),u.jsx("span",{className:"opacity-70 text-xs ml-2",children:" Actions logged but not executed on Home Assistant"})]}),ot?.paused&&u.jsxs(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-warning px-4 py-3",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"font-medium",children:"Executor Paused (Idle Mode)"}),ot.paused.paused_minutes!==void 0&&u.jsxs("span",{className:"opacity-70 text-xs ml-2",children:[" Paused for ",ot.paused.paused_minutes," minutes"]})]}),(q||re)&&u.jsxs(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-warning px-4 py-3",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"font-medium",children:"Vacation Mode Active"}),u.jsx("span",{className:"opacity-70 text-xs ml-2",children:" Water heating is disabled"})]}),u.jsx(Dr.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:u.jsx(Nd,{useHistoryForToday:x==="local",refreshToken:lt,slotsOverride:Cn,range:"48h",showDayToggle:!0})}),u.jsxs("div",{className:"grid gap-6 lg:grid-cols-3 items-stretch",children:[u.jsxs(Dr.div,{className:"h-full flex flex-col gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:[u.jsxs(Ge,{className:"p-3 flex items-center justify-between shrink-0",children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:Ws}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"text-[10px] text-muted",children:tt&&`Synced ${tt.toLocaleTimeString()}`}),_t&&u.jsx("div",{className:"text-[10px] text-amber-400",children:_t}),u.jsx("button",{onClick:()=>ts(),disabled:Se,className:`rounded-pill px-2 py-1 text-[10px] font-medium transition ${Se?"bg-surface border border-line/60 text-muted cursor-not-allowed":"bg-surface border border-line/60 text-muted hover:border-accent hover:text-accent"}`,title:"Manual sync",children:u.jsx("span",{className:Se?"inline-block animate-spin":"",children:Se?"":""})})]})]}),u.jsx("div",{className:"flex-1 min-h-0",children:u.jsx(vB,{})})]}),u.jsx(Dr.div,{className:"h-full",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:u.jsx(SB,{comfortLevel:V,setComfortLevel:async Pe=>{O(Pe),await De.configSave({water_heating:{comfort_level:Pe}})},riskAppetite:te,setRiskAppetite:async Pe=>{se(Pe),await De.configSave({s_index:{risk_appetite:Pe}})},vacationMode:q,onWaterBoost:async()=>{try{await De.waterBoost.start(60),ts()}catch(Pe){console.error("Boost failed",Pe)}},onBatteryTopUp:async()=>{try{await De.executor.quickAction.set("force_charge",60),ts()}catch(Pe){console.error("Top Up failed",Pe)}}})}),u.jsx(Dr.div,{className:"h-full",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"flex h-full flex-col gap-6",children:[u.jsx(Ge,{className:"flex-1 p-4 md:p-5",children:u.jsx(qP,{onDataRefresh:ts,onPlanSourceChange:gs,onServerScheduleLoaded:di,onVacationModeChange:Pe=>Z(Pe)})}),u.jsxs(Ge,{className:"flex-1 p-4 md:p-5",children:[u.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[u.jsx("div",{className:"text-sm text-muted",children:"Planner Automation"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-muted",children:[u.jsx("span",{className:`inline-flex h-2.5 w-2.5 rounded-full ${Mt?.enable_scheduler?"bg-emerald-400 shadow-[0_0_0_2px_rgba(16,185,129,0.4)]":"bg-line"}`}),u.jsx("span",{children:Mt?.enable_scheduler?"Active":"Disabled"})]}),u.jsx("button",{type:"button",onClick:xs,disabled:fn,className:"rounded-pill px-3 py-1 text-[10px] font-semibold border border-line/60 text-muted hover:border-accent hover:text-accent disabled:opacity-50 transition",children:Mt?.enable_scheduler?"Disable":"Enable"})]})]}),u.jsx("div",{className:"text-[11px] text-muted",children:Mt?.enable_scheduler?"Planner will auto-run on the configured schedule.":"Auto-planner is off. Use Quick Actions to run manually."}),u.jsxs("div",{className:"mt-2 space-y-1 text-[10px] text-muted",children:[u.jsxs("div",{children:["Last plan run: ",Fj(Ai)]}),u.jsxs("div",{children:["Next expected run:"," ",Mt?.enable_scheduler?Fj(fi):""]}),u.jsxs("div",{children:["DB sync: ",Mt?.write_to_mariadb?"enabled":"disabled"]})]})]}),Mt?.external_executor_mode&&u.jsxs(Ge,{className:"flex-1 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[u.jsx("div",{className:"text-sm text-muted",children:"DB Sync"}),u.jsx("div",{className:`text-[10px] ${gn?.type==="success"?"text-green-400":"text-red-400"}`,children:gn?.message})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[u.jsxs("button",{type:"button",onClick:hi,disabled:mn,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-[11px] font-semibold bg-surface2 border border-line/60 text-muted hover:border-accent hover:text-accent transition disabled:opacity-50",title:"Pull plan from MariaDB current_schedule table",children:[u.jsx(Mv,{className:"h-4 w-4"}),u.jsx("span",{children:"Load from DB"})]}),u.jsxs("button",{type:"button",onClick:Ei,disabled:mn,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-[11px] font-semibold bg-surface2 border border-line/60 text-muted hover:border-accent hover:text-accent transition disabled:opacity-50",title:"Push local schedule.json to MariaDB",children:[u.jsx(Dv,{className:"h-4 w-4"}),u.jsx("span",{children:"Push to DB"})]})]})]})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[u.jsx(bB,{netCost:Ln?.netCost??null,importKwh:Ln?.gridImport??null,exportKwh:Ln?.gridExport??null}),u.jsx(_B,{pvActual:Ln?.pvProduction??null,pvForecast:Ln?.pvForecast??null,loadActual:Ln?.loadConsumption??null,loadAvg:M?.dailyKwh??null,waterKwh:U?.kwh??null}),u.jsx(wB,{soc:t,socTarget:E,sIndex:h?.sIndex?.effective_load_margin??null,cycles:Ln?.batteryCycles??null,riskLabel:{1:"Safety",2:"Conservative",3:"Neutral",4:"Aggressive",5:"Gambler"}[te]})]})]})}var Bf={exports:{}},S9=Bf.exports,Hj;function j9(){return Hj||(Hj=1,(function(t,e){(function(n,s){t.exports=s()})(S9,(function(){var n=1e3,s=6e4,a=36e5,o="millisecond",l="second",d="minute",h="hour",p="day",x="week",y="month",b="quarter",j="year",T="date",N="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(te){var se=["th","st","nd","rd"],W=te%100;return"["+te+(se[(W-20)%10]||se[W]||se[0])+"]"}},z=function(te,se,W){var X=String(te);return!X||X.length>=se?te:""+Array(se+1-X.length).join(W)+te},U={s:z,z:function(te){var se=-te.utcOffset(),W=Math.abs(se),X=Math.floor(W/60),ae=W%60;return(se<=0?"+":"-")+z(X,2,"0")+":"+z(ae,2,"0")},m:function te(se,W){if(se.date()<W.date())return-te(W,se);var X=12*(W.year()-se.year())+(W.month()-se.month()),ae=se.clone().add(X,y),oe=W-ae<0,me=se.clone().add(X+(oe?-1:1),y);return+(-(X+(W-ae)/(oe?ae-me:me-ae))||0)},a:function(te){return te<0?Math.ceil(te)||0:Math.floor(te)},p:function(te){return{M:y,y:j,w:x,d:p,D:T,h,m:d,s:l,ms:o,Q:b}[te]||String(te||"").toLowerCase().replace(/s$/,"")},u:function(te){return te===void 0}},I="en",V={};V[I]=E;var O="$isDayjsObject",q=function(te){return te instanceof de||!(!te||!te[O])},Z=function te(se,W,X){var ae;if(!se)return I;if(typeof se=="string"){var oe=se.toLowerCase();V[oe]&&(ae=oe),W&&(V[oe]=W,ae=oe);var me=se.split("-");if(!ae&&me.length>1)return te(me[0])}else{var F=se.name;V[F]=se,ae=F}return!X&&ae&&(I=ae),ae||!X&&I},re=function(te,se){if(q(te))return te.clone();var W=typeof se=="object"?se:{};return W.date=te,W.args=arguments,new de(W)},J=U;J.l=Z,J.i=q,J.w=function(te,se){return re(te,{locale:se.$L,utc:se.$u,x:se.$x,$offset:se.$offset})};var de=(function(){function te(W){this.$L=Z(W.locale,null,!0),this.parse(W),this.$x=this.$x||W.x||{},this[O]=!0}var se=te.prototype;return se.parse=function(W){this.$d=(function(X){var ae=X.date,oe=X.utc;if(ae===null)return new Date(NaN);if(J.u(ae))return new Date;if(ae instanceof Date)return new Date(ae);if(typeof ae=="string"&&!/Z$/i.test(ae)){var me=ae.match(M);if(me){var F=me[2]-1||0,ee=(me[7]||"0").substring(0,3);return oe?new Date(Date.UTC(me[1],F,me[3]||1,me[4]||0,me[5]||0,me[6]||0,ee)):new Date(me[1],F,me[3]||1,me[4]||0,me[5]||0,me[6]||0,ee)}}return new Date(ae)})(W),this.init()},se.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},se.$utils=function(){return J},se.isValid=function(){return this.$d.toString()!==N},se.isSame=function(W,X){var ae=re(W);return this.startOf(X)<=ae&&ae<=this.endOf(X)},se.isAfter=function(W,X){return re(W)<this.startOf(X)},se.isBefore=function(W,X){return this.endOf(X)<re(W)},se.$g=function(W,X,ae){return J.u(W)?this[X]:this.set(ae,W)},se.unix=function(){return Math.floor(this.valueOf()/1e3)},se.valueOf=function(){return this.$d.getTime()},se.startOf=function(W,X){var ae=this,oe=!!J.u(X)||X,me=J.p(W),F=function(Te,lt){var gt=J.w(ae.$u?Date.UTC(ae.$y,lt,Te):new Date(ae.$y,lt,Te),ae);return oe?gt:gt.endOf(p)},ee=function(Te,lt){return J.w(ae.toDate()[Te].apply(ae.toDate("s"),(oe?[0,0,0,0]:[23,59,59,999]).slice(lt)),ae)},xe=this.$W,H=this.$M,pe=this.$D,Se="set"+(this.$u?"UTC":"");switch(me){case j:return oe?F(1,0):F(31,11);case y:return oe?F(1,H):F(0,H+1);case x:var Ue=this.$locale().weekStart||0,tt=(xe<Ue?xe+7:xe)-Ue;return F(oe?pe-tt:pe+(6-tt),H);case p:case T:return ee(Se+"Hours",0);case h:return ee(Se+"Minutes",1);case d:return ee(Se+"Seconds",2);case l:return ee(Se+"Milliseconds",3);default:return this.clone()}},se.endOf=function(W){return this.startOf(W,!1)},se.$set=function(W,X){var ae,oe=J.p(W),me="set"+(this.$u?"UTC":""),F=(ae={},ae[p]=me+"Date",ae[T]=me+"Date",ae[y]=me+"Month",ae[j]=me+"FullYear",ae[h]=me+"Hours",ae[d]=me+"Minutes",ae[l]=me+"Seconds",ae[o]=me+"Milliseconds",ae)[oe],ee=oe===p?this.$D+(X-this.$W):X;if(oe===y||oe===j){var xe=this.clone().set(T,1);xe.$d[F](ee),xe.init(),this.$d=xe.set(T,Math.min(this.$D,xe.daysInMonth())).$d}else F&&this.$d[F](ee);return this.init(),this},se.set=function(W,X){return this.clone().$set(W,X)},se.get=function(W){return this[J.p(W)]()},se.add=function(W,X){var ae,oe=this;W=Number(W);var me=J.p(X),F=function(H){var pe=re(oe);return J.w(pe.date(pe.date()+Math.round(H*W)),oe)};if(me===y)return this.set(y,this.$M+W);if(me===j)return this.set(j,this.$y+W);if(me===p)return F(1);if(me===x)return F(7);var ee=(ae={},ae[d]=s,ae[h]=a,ae[l]=n,ae)[me]||1,xe=this.$d.getTime()+W*ee;return J.w(xe,this)},se.subtract=function(W,X){return this.add(-1*W,X)},se.format=function(W){var X=this,ae=this.$locale();if(!this.isValid())return ae.invalidDate||N;var oe=W||"YYYY-MM-DDTHH:mm:ssZ",me=J.z(this),F=this.$H,ee=this.$m,xe=this.$M,H=ae.weekdays,pe=ae.months,Se=ae.meridiem,Ue=function(lt,gt,_t,Bt){return lt&&(lt[gt]||lt(X,oe))||_t[gt].slice(0,Bt)},tt=function(lt){return J.s(F%12||12,lt,"0")},Te=Se||function(lt,gt,_t){var Bt=lt<12?"AM":"PM";return _t?Bt.toLowerCase():Bt};return oe.replace(R,(function(lt,gt){return gt||(function(_t){switch(_t){case"YY":return String(X.$y).slice(-2);case"YYYY":return J.s(X.$y,4,"0");case"M":return xe+1;case"MM":return J.s(xe+1,2,"0");case"MMM":return Ue(ae.monthsShort,xe,pe,3);case"MMMM":return Ue(pe,xe);case"D":return X.$D;case"DD":return J.s(X.$D,2,"0");case"d":return String(X.$W);case"dd":return Ue(ae.weekdaysMin,X.$W,H,2);case"ddd":return Ue(ae.weekdaysShort,X.$W,H,3);case"dddd":return H[X.$W];case"H":return String(F);case"HH":return J.s(F,2,"0");case"h":return tt(1);case"hh":return tt(2);case"a":return Te(F,ee,!0);case"A":return Te(F,ee,!1);case"m":return String(ee);case"mm":return J.s(ee,2,"0");case"s":return String(X.$s);case"ss":return J.s(X.$s,2,"0");case"SSS":return J.s(X.$ms,3,"0");case"Z":return me}return null})(lt)||me.replace(":","")}))},se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},se.diff=function(W,X,ae){var oe,me=this,F=J.p(X),ee=re(W),xe=(ee.utcOffset()-this.utcOffset())*s,H=this-ee,pe=function(){return J.m(me,ee)};switch(F){case j:oe=pe()/12;break;case y:oe=pe();break;case b:oe=pe()/3;break;case x:oe=(H-xe)/6048e5;break;case p:oe=(H-xe)/864e5;break;case h:oe=H/a;break;case d:oe=H/s;break;case l:oe=H/n;break;default:oe=H}return ae?oe:J.a(oe)},se.daysInMonth=function(){return this.endOf(y).$D},se.$locale=function(){return V[this.$L]},se.locale=function(W,X){if(!W)return this.$L;var ae=this.clone(),oe=Z(W,X,!0);return oe&&(ae.$L=oe),ae},se.clone=function(){return J.w(this.$d,this)},se.toDate=function(){return new Date(this.valueOf())},se.toJSON=function(){return this.isValid()?this.toISOString():null},se.toISOString=function(){return this.$d.toISOString()},se.toString=function(){return this.$d.toUTCString()},te})(),le=de.prototype;return re.prototype=le,[["$ms",o],["$s",l],["$m",d],["$H",h],["$W",p],["$M",y],["$y",j],["$D",T]].forEach((function(te){le[te[1]]=function(se){return this.$g(se,te[0],te[1])}})),re.extend=function(te,se){return te.$i||(te(se,de,re),te.$i=!0),re},re.locale=Z,re.isDayjs=q,re.unix=function(te){return re(1e3*te)},re.en=V[I],re.Ls=V,re.p={},re}))})(Bf)),Bf.exports}var k9=j9();const Qi=kv(k9);function Uj(t){let e=0,n=0,s=!0;for(;t;)!t.offsetParent&&t.tagName==="BODY"&&t.scrollLeft===0&&t.scrollTop===0&&(t=document.scrollingElement||t),e+=t.offsetLeft-(s?0:t.scrollLeft)+t.clientLeft,n+=t.offsetTop-(s?0:t.scrollTop)+t.clientTop,t=t.offsetParent,s=!1;return{x:e,y:n}}function hp(t){if(t===document.body)return{scrollLeft:0,scrollTop:0};{const e=hp(t.parentNode);return{scrollLeft:t.scrollLeft+e.scrollLeft,scrollTop:t.scrollTop+e.scrollTop}}}function fp(t){if(t===document.body||!t.offsetParent)return{offsetLeft:0,offsetTop:0};{const e=fp(t.offsetParent);return{offsetLeft:t.offsetLeft+e.offsetLeft,offsetTop:t.offsetTop+e.offsetTop}}}var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ad(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pp={exports:{}};pp.exports;(function(t,e){(function(n,s){t.exports=s()})(Ho,function(){function n(g,m){var w=Object.keys(g);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(g);m&&(S=S.filter(function(k){return Object.getOwnPropertyDescriptor(g,k).enumerable})),w.push.apply(w,S)}return w}function s(g){for(var m=1;m<arguments.length;m++){var w=arguments[m]!=null?arguments[m]:{};m%2?n(Object(w),!0).forEach(function(S){h(g,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(w)):n(Object(w)).forEach(function(S){Object.defineProperty(g,S,Object.getOwnPropertyDescriptor(w,S))})}return g}function a(g){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},a(g)}function o(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function l(g,m){for(var w=0;w<m.length;w++){var S=m[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,N(S.key),S)}}function d(g,m,w){return m&&l(g.prototype,m),Object.defineProperty(g,"prototype",{writable:!1}),g}function h(g,m,w){return(m=N(m))in g?Object.defineProperty(g,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[m]=w,g}function p(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),m&&y(g,m)}function x(g){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},x(g)}function y(g,m){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,S){return w.__proto__=S,w},y(g,m)}function b(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function j(g){var m=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}})();return function(){var w,S=x(g);if(m){var k=x(this).constructor;w=Reflect.construct(S,arguments,k)}else w=S.apply(this,arguments);return(function(C,P){if(P&&(typeof P=="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(C)})(this,w)}}function T(){return T=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(g,m,w){var S=(function(C,P){for(;!Object.prototype.hasOwnProperty.call(C,P)&&(C=x(C))!==null;);return C})(g,m);if(S){var k=Object.getOwnPropertyDescriptor(S,m);return k.get?k.get.call(arguments.length<3?g:w):k.value}},T.apply(this,arguments)}function N(g){var m=(function(w,S){if(typeof w!="object"||w===null)return w;var k=w[Symbol.toPrimitive];if(k!==void 0){var C=k.call(w,S);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)})(g,"string");return typeof m=="symbol"?m:m+""}var M=function(g){return!(!g||!g.Window)&&g instanceof g.Window},R=void 0,E=void 0;function z(g){R=g;var m=g.document.createTextNode("");m.ownerDocument!==g.document&&typeof g.wrap=="function"&&g.wrap(m)===m&&(g=g.wrap(g)),E=g}function U(g){return M(g)?g:(g.ownerDocument||g).defaultView||E.window}typeof window<"u"&&window&&z(window);var I=function(g){return!!g&&a(g)==="object"},V=function(g){return typeof g=="function"},O={window:function(g){return g===E||M(g)},docFrag:function(g){return I(g)&&g.nodeType===11},object:I,func:V,number:function(g){return typeof g=="number"},bool:function(g){return typeof g=="boolean"},string:function(g){return typeof g=="string"},element:function(g){if(!g||a(g)!=="object")return!1;var m=U(g)||E;return/object|function/.test(typeof Element>"u"?"undefined":a(Element))?g instanceof Element||g instanceof m.Element:g.nodeType===1&&typeof g.nodeName=="string"},plainObject:function(g){return I(g)&&!!g.constructor&&/function Object\b/.test(g.constructor.toString())},array:function(g){return I(g)&&g.length!==void 0&&V(g.splice)}};function q(g){var m=g.interaction;if(m.prepared.name==="drag"){var w=m.prepared.axis;w==="x"?(m.coords.cur.page.y=m.coords.start.page.y,m.coords.cur.client.y=m.coords.start.client.y,m.coords.velocity.client.y=0,m.coords.velocity.page.y=0):w==="y"&&(m.coords.cur.page.x=m.coords.start.page.x,m.coords.cur.client.x=m.coords.start.client.x,m.coords.velocity.client.x=0,m.coords.velocity.page.x=0)}}function Z(g){var m=g.iEvent,w=g.interaction;if(w.prepared.name==="drag"){var S=w.prepared.axis;if(S==="x"||S==="y"){var k=S==="x"?"y":"x";m.page[k]=w.coords.start.page[k],m.client[k]=w.coords.start.client[k],m.delta[k]=0}}}var re={id:"actions/drag",install:function(g){var m=g.actions,w=g.Interactable,S=g.defaults;w.prototype.draggable=re.draggable,m.map.drag=re,m.methodDict.drag="draggable",S.actions.drag=re.defaults},listeners:{"interactions:before-action-move":q,"interactions:action-resume":q,"interactions:action-move":Z,"auto-start:check":function(g){var m=g.interaction,w=g.interactable,S=g.buttons,k=w.options.drag;if(k&&k.enabled&&(!m.pointerIsDown||!/mouse|pointer/.test(m.pointerType)||S&w.options.drag.mouseButtons))return g.action={name:"drag",axis:k.lockAxis==="start"?k.startAxis:k.lockAxis},!1}},draggable:function(g){return O.object(g)?(this.options.drag.enabled=g.enabled!==!1,this.setPerAction("drag",g),this.setOnEvents("drag",g),/^(xy|x|y|start)$/.test(g.lockAxis)&&(this.options.drag.lockAxis=g.lockAxis),/^(xy|x|y)$/.test(g.startAxis)&&(this.options.drag.startAxis=g.startAxis),this):O.bool(g)?(this.options.drag.enabled=g,this):this.options.drag},beforeMove:q,move:Z,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(g){return g.search("drag")===0}},J=re,de={init:function(g){var m=g;de.document=m.document,de.DocumentFragment=m.DocumentFragment||le,de.SVGElement=m.SVGElement||le,de.SVGSVGElement=m.SVGSVGElement||le,de.SVGElementInstance=m.SVGElementInstance||le,de.Element=m.Element||le,de.HTMLElement=m.HTMLElement||de.Element,de.Event=m.Event,de.Touch=m.Touch||le,de.PointerEvent=m.PointerEvent||m.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function le(){}var te=de,se={init:function(g){var m=te.Element,w=g.navigator||{};se.supportsTouch="ontouchstart"in g||O.func(g.DocumentTouch)&&te.document instanceof g.DocumentTouch,se.supportsPointerEvent=w.pointerEnabled!==!1&&!!te.PointerEvent,se.isIOS=/iP(hone|od|ad)/.test(w.platform),se.isIOS7=/iP(hone|od|ad)/.test(w.platform)&&/OS 7[^\d]/.test(w.appVersion),se.isIe9=/MSIE 9/.test(w.userAgent),se.isOperaMobile=w.appName==="Opera"&&se.supportsTouch&&/Presto/.test(w.userAgent),se.prefixedMatchesSelector="matches"in m.prototype?"matches":"webkitMatchesSelector"in m.prototype?"webkitMatchesSelector":"mozMatchesSelector"in m.prototype?"mozMatchesSelector":"oMatchesSelector"in m.prototype?"oMatchesSelector":"msMatchesSelector",se.pEventTypes=se.supportsPointerEvent?te.PointerEvent===g.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,se.wheelEvent=te.document&&"onmousewheel"in te.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},W=se;function X(g,m){if(g.contains)return g.contains(m);for(;m;){if(m===g)return!0;m=m.parentNode}return!1}function ae(g,m){for(;O.element(g);){if(me(g,m))return g;g=oe(g)}return null}function oe(g){var m=g.parentNode;if(O.docFrag(m)){for(;(m=m.host)&&O.docFrag(m););return m}return m}function me(g,m){return E!==R&&(m=m.replace(/\/deep\//g," ")),g[W.prefixedMatchesSelector](m)}var F=function(g){return g.parentNode||g.host};function ee(g,m){for(var w,S=[],k=g;(w=F(k))&&k!==m&&w!==k.ownerDocument;)S.unshift(k),k=w;return S}function xe(g,m,w){for(;O.element(g);){if(me(g,m))return!0;if((g=oe(g))===w)return me(g,m)}return!1}function H(g){return g.correspondingUseElement||g}function pe(g){var m=g instanceof te.SVGElement?g.getBoundingClientRect():g.getClientRects()[0];return m&&{left:m.left,right:m.right,top:m.top,bottom:m.bottom,width:m.width||m.right-m.left,height:m.height||m.bottom-m.top}}function Se(g){var m,w=pe(g);if(!W.isIOS7&&w){var S={x:(m=(m=U(g))||E).scrollX||m.document.documentElement.scrollLeft,y:m.scrollY||m.document.documentElement.scrollTop};w.left+=S.x,w.right+=S.x,w.top+=S.y,w.bottom+=S.y}return w}function Ue(g){for(var m=[];g;)m.push(g),g=oe(g);return m}function tt(g){return!!O.string(g)&&(te.document.querySelector(g),!0)}function Te(g,m){for(var w in m)g[w]=m[w];return g}function lt(g,m,w){return g==="parent"?oe(w):g==="self"?m.getRect(w):ae(w,g)}function gt(g,m,w,S){var k=g;return O.string(k)?k=lt(k,m,w):O.func(k)&&(k=k.apply(void 0,S)),O.element(k)&&(k=Se(k)),k}function _t(g){return g&&{x:"x"in g?g.x:g.left,y:"y"in g?g.y:g.top}}function Bt(g){return!g||"x"in g&&"y"in g||((g=Te({},g)).x=g.left||0,g.y=g.top||0,g.width=g.width||(g.right||0)-g.x,g.height=g.height||(g.bottom||0)-g.y),g}function Mt(g,m,w){g.left&&(m.left+=w.x),g.right&&(m.right+=w.x),g.top&&(m.top+=w.y),g.bottom&&(m.bottom+=w.y),m.width=m.right-m.left,m.height=m.bottom-m.top}function st(g,m,w){var S=w&&g.options[w];return _t(gt(S&&S.origin||g.options.origin,g,m,[g&&m]))||{x:0,y:0}}function fn(g,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(Y){return!0},S=arguments.length>3?arguments[3]:void 0;if(S=S||{},O.string(g)&&g.search(" ")!==-1&&(g=es(g)),O.array(g))return g.forEach(function(Y){return fn(Y,m,w,S)}),S;if(O.object(g)&&(m=g,g=""),O.func(m)&&w(g))S[g]=S[g]||[],S[g].push(m);else if(O.array(m))for(var k=0,C=m;k<C.length;k++){var P=C[k];fn(g,P,w,S)}else if(O.object(m))for(var B in m)fn(es(B).map(function(Y){return"".concat(g).concat(Y)}),m[B],w,S);return S}function es(g){return g.trim().split(/ +/)}var vn=function(g,m){return Math.sqrt(g*g+m*m)},ds=["webkit","moz"];function Hn(g,m){g.__set||(g.__set={});var w=function(k){if(ds.some(function(C){return k.indexOf(C)===0}))return 1;typeof g[k]!="function"&&k!=="__set"&&Object.defineProperty(g,k,{get:function(){return k in g.__set?g.__set[k]:g.__set[k]=m[k]},set:function(C){g.__set[k]=C},configurable:!0})};for(var S in m)w(S);return g}function ze(g,m){g.page=g.page||{},g.page.x=m.page.x,g.page.y=m.page.y,g.client=g.client||{},g.client.x=m.client.x,g.client.y=m.client.y,g.timeStamp=m.timeStamp}function xt(g){g.page.x=0,g.page.y=0,g.client.x=0,g.client.y=0}function pn(g){return g instanceof te.Event||g instanceof te.Touch}function zt(g,m,w){return g=g||"page",(w=w||{}).x=m[g+"X"],w.y=m[g+"Y"],w}function Es(g,m){return m=m||{x:0,y:0},W.isOperaMobile&&pn(g)?(zt("screen",g,m),m.x+=window.scrollX,m.y+=window.scrollY):zt("page",g,m),m}function ot(g){return O.number(g.pointerId)?g.pointerId:g.identifier}function Wn(g,m,w){var S=m.length>1?Is(m):m[0];Es(S,g.page),(function(k,C){C=C||{},W.isOperaMobile&&pn(k)?zt("screen",k,C):zt("client",k,C)})(S,g.client),g.timeStamp=w}function Ln(g){var m=[];return O.array(g)?(m[0]=g[0],m[1]=g[1]):g.type==="touchend"?g.touches.length===1?(m[0]=g.touches[0],m[1]=g.changedTouches[0]):g.touches.length===0&&(m[0]=g.changedTouches[0],m[1]=g.changedTouches[1]):(m[0]=g.touches[0],m[1]=g.touches[1]),m}function Is(g){for(var m={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},w=0;w<g.length;w++){var S=g[w];for(var k in m)m[k]+=S[k]}for(var C in m)m[C]/=g.length;return m}function gs(g){if(!g.length)return null;var m=Ln(g),w=Math.min(m[0].pageX,m[1].pageX),S=Math.min(m[0].pageY,m[1].pageY),k=Math.max(m[0].pageX,m[1].pageX),C=Math.max(m[0].pageY,m[1].pageY);return{x:w,y:S,left:w,top:S,right:k,bottom:C,width:k-w,height:C-S}}function di(g,m){var w=m+"X",S=m+"Y",k=Ln(g),C=k[0][w]-k[1][w],P=k[0][S]-k[1][S];return vn(C,P)}function ts(g,m){var w=m+"X",S=m+"Y",k=Ln(g),C=k[1][w]-k[0][w],P=k[1][S]-k[0][S];return 180*Math.atan2(P,C)/Math.PI}function xs(g){return O.string(g.pointerType)?g.pointerType:O.number(g.pointerType)?[void 0,void 0,"touch","pen","mouse"][g.pointerType]:/touch/.test(g.type||"")||g instanceof te.Touch?"touch":"mouse"}function mn(g){var m=O.func(g.composedPath)?g.composedPath():g.path;return[H(m?m[0]:g.target),H(g.currentTarget)]}var $t=(function(){function g(m){o(this,g),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=m}return d(g,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),g})();Object.defineProperty($t.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var gn=function(g,m){for(var w=0;w<m.length;w++){var S=m[w];g.push(S)}return g},zn=function(g){return gn([],g)},hi=function(g,m){for(var w=0;w<g.length;w++)if(m(g[w],w,g))return w;return-1},Ei=function(g,m){return g[hi(g,m)]},Cn=(function(g){p(w,g);var m=j(w);function w(S,k,C){var P;o(this,w),(P=m.call(this,k._interaction)).dropzone=void 0,P.dragEvent=void 0,P.relatedTarget=void 0,P.draggable=void 0,P.propagationStopped=!1,P.immediatePropagationStopped=!1;var B=C==="dragleave"?S.prev:S.cur,Y=B.element,K=B.dropzone;return P.type=C,P.target=Y,P.currentTarget=Y,P.dropzone=K,P.dragEvent=k,P.relatedTarget=k.target,P.draggable=k.interactable,P.timeStamp=k.timeStamp,P}return d(w,[{key:"reject",value:function(){var S=this,k=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&k.cur.dropzone===this.dropzone&&k.cur.element===this.target)if(k.prev.dropzone=this.dropzone,k.prev.element=this.target,k.rejected=!0,k.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var C=k.activeDrops,P=hi(C,function(Y){var K=Y.dropzone,$=Y.element;return K===S.dropzone&&$===S.target});k.activeDrops.splice(P,1);var B=new w(k,this.dragEvent,"dropdeactivate");B.dropzone=this.dropzone,B.target=this.target,this.dropzone.fire(B)}else this.dropzone.fire(new w(k,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),w})($t);function Ys(g,m){for(var w=0,S=g.slice();w<S.length;w++){var k=S[w],C=k.dropzone,P=k.element;m.dropzone=C,m.target=P,C.fire(m),m.propagationStopped=m.immediatePropagationStopped=!1}}function As(g,m){for(var w=(function(C,P){for(var B=[],Y=0,K=C.interactables.list;Y<K.length;Y++){var $=K[Y];if($.options.drop.enabled){var ne=$.options.drop.accept;if(!(O.element(ne)&&ne!==P||O.string(ne)&&!me(P,ne)||O.func(ne)&&!ne({dropzone:$,draggableElement:P})))for(var ye=0,Ne=$.getAllElements();ye<Ne.length;ye++){var ke=Ne[ye];ke!==P&&B.push({dropzone:$,element:ke,rect:$.getRect(ke)})}}}return B})(g,m),S=0;S<w.length;S++){var k=w[S];k.rect=k.dropzone.getRect(k.element)}return w}function hs(g,m,w){for(var S=g.dropState,k=g.interactable,C=g.element,P=[],B=0,Y=S.activeDrops;B<Y.length;B++){var K=Y[B],$=K.dropzone,ne=K.element,ye=K.rect,Ne=$.dropCheck(m,w,k,C,ne,ye);P.push(Ne?ne:null)}var ke=(function(Ce){for(var Be,Le,Ye,nt=[],ct=0;ct<Ce.length;ct++){var Xe=Ce[ct],it=Ce[Be];if(Xe&&ct!==Be)if(it){var xn=F(Xe),Pt=F(it);if(xn!==Xe.ownerDocument)if(Pt!==Xe.ownerDocument)if(xn!==Pt){nt=nt.length?nt:ee(it);var qn=void 0;if(it instanceof te.HTMLElement&&Xe instanceof te.SVGElement&&!(Xe instanceof te.SVGSVGElement)){if(Xe===Pt)continue;qn=Xe.ownerSVGElement}else qn=Xe;for(var ws=ee(qn,it.ownerDocument),Gn=0;ws[Gn]&&ws[Gn]===nt[Gn];)Gn++;var fo=[ws[Gn-1],ws[Gn],nt[Gn]];if(fo[0])for(var rr=fo[0].lastChild;rr;){if(rr===fo[1]){Be=ct,nt=ws;break}if(rr===fo[2])break;rr=rr.previousSibling}}else Ye=it,(parseInt(U(Le=Xe).getComputedStyle(Le).zIndex,10)||0)>=(parseInt(U(Ye).getComputedStyle(Ye).zIndex,10)||0)&&(Be=ct);else Be=ct}else Be=ct}return Be})(P);return S.activeDrops[ke]||null}function Ws(g,m,w){var S=g.dropState,k={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return w.type==="dragstart"&&(k.activate=new Cn(S,w,"dropactivate"),k.activate.target=null,k.activate.dropzone=null),w.type==="dragend"&&(k.deactivate=new Cn(S,w,"dropdeactivate"),k.deactivate.target=null,k.deactivate.dropzone=null),S.rejected||(S.cur.element!==S.prev.element&&(S.prev.dropzone&&(k.leave=new Cn(S,w,"dragleave"),w.dragLeave=k.leave.target=S.prev.element,w.prevDropzone=k.leave.dropzone=S.prev.dropzone),S.cur.dropzone&&(k.enter=new Cn(S,w,"dragenter"),w.dragEnter=S.cur.element,w.dropzone=S.cur.dropzone)),w.type==="dragend"&&S.cur.dropzone&&(k.drop=new Cn(S,w,"drop"),w.dropzone=S.cur.dropzone,w.relatedTarget=S.cur.element),w.type==="dragmove"&&S.cur.dropzone&&(k.move=new Cn(S,w,"dropmove"),w.dropzone=S.cur.dropzone)),k}function ys(g,m){var w=g.dropState,S=w.activeDrops,k=w.cur,C=w.prev;m.leave&&C.dropzone.fire(m.leave),m.enter&&k.dropzone.fire(m.enter),m.move&&k.dropzone.fire(m.move),m.drop&&k.dropzone.fire(m.drop),m.deactivate&&Ys(S,m.deactivate),w.prev.dropzone=k.dropzone,w.prev.element=k.element}function Ai(g,m){var w=g.interaction,S=g.iEvent,k=g.event;if(S.type==="dragmove"||S.type==="dragend"){var C=w.dropState;m.dynamicDrop&&(C.activeDrops=As(m,w.element));var P=S,B=hs(w,P,k);C.rejected=C.rejected&&!!B&&B.dropzone===C.cur.dropzone&&B.element===C.cur.element,C.cur.dropzone=B&&B.dropzone,C.cur.element=B&&B.element,C.events=Ws(w,0,P)}}var Oi={id:"actions/drop",install:function(g){var m=g.actions,w=g.interactStatic,S=g.Interactable,k=g.defaults;g.usePlugin(J),S.prototype.dropzone=function(C){return(function(P,B){if(O.object(B)){if(P.options.drop.enabled=B.enabled!==!1,B.listeners){var Y=fn(B.listeners),K=Object.keys(Y).reduce(function(ne,ye){return ne[/^(enter|leave)/.test(ye)?"drag".concat(ye):/^(activate|deactivate|move)/.test(ye)?"drop".concat(ye):ye]=Y[ye],ne},{}),$=P.options.drop.listeners;$&&P.off($),P.on(K),P.options.drop.listeners=K}return O.func(B.ondrop)&&P.on("drop",B.ondrop),O.func(B.ondropactivate)&&P.on("dropactivate",B.ondropactivate),O.func(B.ondropdeactivate)&&P.on("dropdeactivate",B.ondropdeactivate),O.func(B.ondragenter)&&P.on("dragenter",B.ondragenter),O.func(B.ondragleave)&&P.on("dragleave",B.ondragleave),O.func(B.ondropmove)&&P.on("dropmove",B.ondropmove),/^(pointer|center)$/.test(B.overlap)?P.options.drop.overlap=B.overlap:O.number(B.overlap)&&(P.options.drop.overlap=Math.max(Math.min(1,B.overlap),0)),"accept"in B&&(P.options.drop.accept=B.accept),"checker"in B&&(P.options.drop.checker=B.checker),P}return O.bool(B)?(P.options.drop.enabled=B,P):P.options.drop})(this,C)},S.prototype.dropCheck=function(C,P,B,Y,K,$){return(function(ne,ye,Ne,ke,Ce,Be,Le){var Ye=!1;if(!(Le=Le||ne.getRect(Be)))return!!ne.options.drop.checker&&ne.options.drop.checker(ye,Ne,Ye,ne,Be,ke,Ce);var nt=ne.options.drop.overlap;if(nt==="pointer"){var ct=st(ke,Ce,"drag"),Xe=Es(ye);Xe.x+=ct.x,Xe.y+=ct.y;var it=Xe.x>Le.left&&Xe.x<Le.right,xn=Xe.y>Le.top&&Xe.y<Le.bottom;Ye=it&&xn}var Pt=ke.getRect(Ce);if(Pt&&nt==="center"){var qn=Pt.left+Pt.width/2,ws=Pt.top+Pt.height/2;Ye=qn>=Le.left&&qn<=Le.right&&ws>=Le.top&&ws<=Le.bottom}return Pt&&O.number(nt)&&(Ye=Math.max(0,Math.min(Le.right,Pt.right)-Math.max(Le.left,Pt.left))*Math.max(0,Math.min(Le.bottom,Pt.bottom)-Math.max(Le.top,Pt.top))/(Pt.width*Pt.height)>=nt),ne.options.drop.checker&&(Ye=ne.options.drop.checker(ye,Ne,Ye,ne,Be,ke,Ce)),Ye})(this,C,P,B,Y,K,$)},w.dynamicDrop=function(C){return O.bool(C)?(g.dynamicDrop=C,w):g.dynamicDrop},Te(m.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),m.methodDict.drop="dropzone",g.dynamicDrop=!1,k.actions.drop=Oi.defaults},listeners:{"interactions:before-action-start":function(g){var m=g.interaction;m.prepared.name==="drag"&&(m.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(g,m){var w=g.interaction,S=(g.event,g.iEvent);if(w.prepared.name==="drag"){var k=w.dropState;k.activeDrops=[],k.events={},k.activeDrops=As(m,w.element),k.events=Ws(w,0,S),k.events.activate&&(Ys(k.activeDrops,k.events.activate),m.fire("actions/drop:start",{interaction:w,dragEvent:S}))}},"interactions:action-move":Ai,"interactions:after-action-move":function(g,m){var w=g.interaction,S=g.iEvent;if(w.prepared.name==="drag"){var k=w.dropState;ys(w,k.events),m.fire("actions/drop:move",{interaction:w,dragEvent:S}),k.events={}}},"interactions:action-end":function(g,m){if(g.interaction.prepared.name==="drag"){var w=g.interaction,S=g.iEvent;Ai(g,m),ys(w,w.dropState.events),m.fire("actions/drop:end",{interaction:w,dragEvent:S})}},"interactions:stop":function(g){var m=g.interaction;if(m.prepared.name==="drag"){var w=m.dropState;w&&(w.activeDrops=null,w.events=null,w.cur.dropzone=null,w.cur.element=null,w.prev.dropzone=null,w.prev.element=null,w.rejected=!1)}}},getActiveDrops:As,getDrop:hs,getDropEvents:Ws,fireDropEvents:ys,filterEventType:function(g){return g.search("drag")===0||g.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},fi=Oi;function vs(g){var m=g.interaction,w=g.iEvent,S=g.phase;if(m.prepared.name==="gesture"){var k=m.pointers.map(function(K){return K.pointer}),C=S==="start",P=S==="end",B=m.interactable.options.deltaSource;if(w.touches=[k[0],k[1]],C)w.distance=di(k,B),w.box=gs(k),w.scale=1,w.ds=0,w.angle=ts(k,B),w.da=0,m.gesture.startDistance=w.distance,m.gesture.startAngle=w.angle;else if(P||m.pointers.length<2){var Y=m.prevEvent;w.distance=Y.distance,w.box=Y.box,w.scale=Y.scale,w.ds=0,w.angle=Y.angle,w.da=0}else w.distance=di(k,B),w.box=gs(k),w.scale=w.distance/m.gesture.startDistance,w.angle=ts(k,B),w.ds=w.scale-m.gesture.scale,w.da=w.angle-m.gesture.angle;m.gesture.distance=w.distance,m.gesture.angle=w.angle,O.number(w.scale)&&w.scale!==1/0&&!isNaN(w.scale)&&(m.gesture.scale=w.scale)}}var Ri={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(g){var m=g.actions,w=g.Interactable,S=g.defaults;w.prototype.gesturable=function(k){return O.object(k)?(this.options.gesture.enabled=k.enabled!==!1,this.setPerAction("gesture",k),this.setOnEvents("gesture",k),this):O.bool(k)?(this.options.gesture.enabled=k,this):this.options.gesture},m.map.gesture=Ri,m.methodDict.gesture="gesturable",S.actions.gesture=Ri.defaults},listeners:{"interactions:action-start":vs,"interactions:action-move":vs,"interactions:action-end":vs,"interactions:new":function(g){g.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(g){if(!(g.interaction.pointers.length<2)){var m=g.interactable.options.gesture;if(m&&m.enabled)return g.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(g){return g.search("gesture")===0}},Pe=Ri;function mt(g,m,w,S,k,C,P){if(!m)return!1;if(m===!0){var B=O.number(C.width)?C.width:C.right-C.left,Y=O.number(C.height)?C.height:C.bottom-C.top;if(P=Math.min(P,Math.abs((g==="left"||g==="right"?B:Y)/2)),B<0&&(g==="left"?g="right":g==="right"&&(g="left")),Y<0&&(g==="top"?g="bottom":g==="bottom"&&(g="top")),g==="left"){var K=B>=0?C.left:C.right;return w.x<K+P}if(g==="top"){var $=Y>=0?C.top:C.bottom;return w.y<$+P}if(g==="right")return w.x>(B>=0?C.right:C.left)-P;if(g==="bottom")return w.y>(Y>=0?C.bottom:C.top)-P}return!!O.element(S)&&(O.element(m)?m===S:xe(S,m,k))}function qt(g){var m=g.iEvent,w=g.interaction;if(w.prepared.name==="resize"&&w.resizeAxes){var S=m;w.interactable.options.resize.square?(w.resizeAxes==="y"?S.delta.x=S.delta.y:S.delta.y=S.delta.x,S.axes="xy"):(S.axes=w.resizeAxes,w.resizeAxes==="x"?S.delta.y=0:w.resizeAxes==="y"&&(S.delta.x=0))}}var fe,ve,Me={id:"actions/resize",before:["actions/drag"],install:function(g){var m=g.actions,w=g.browser,S=g.Interactable,k=g.defaults;Me.cursors=(function(C){return C.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}})(w),Me.defaultMargin=w.supportsTouch||w.supportsPointerEvent?20:10,S.prototype.resizable=function(C){return(function(P,B,Y){return O.object(B)?(P.options.resize.enabled=B.enabled!==!1,P.setPerAction("resize",B),P.setOnEvents("resize",B),O.string(B.axis)&&/^x$|^y$|^xy$/.test(B.axis)?P.options.resize.axis=B.axis:B.axis===null&&(P.options.resize.axis=Y.defaults.actions.resize.axis),O.bool(B.preserveAspectRatio)?P.options.resize.preserveAspectRatio=B.preserveAspectRatio:O.bool(B.square)&&(P.options.resize.square=B.square),P):O.bool(B)?(P.options.resize.enabled=B,P):P.options.resize})(this,C,g)},m.map.resize=Me,m.methodDict.resize="resizable",k.actions.resize=Me.defaults},listeners:{"interactions:new":function(g){g.interaction.resizeAxes="xy"},"interactions:action-start":function(g){(function(m){var w=m.iEvent,S=m.interaction;if(S.prepared.name==="resize"&&S.prepared.edges){var k=w,C=S.rect;S._rects={start:Te({},C),corrected:Te({},C),previous:Te({},C),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},k.edges=S.prepared.edges,k.rect=S._rects.corrected,k.deltaRect=S._rects.delta}})(g),qt(g)},"interactions:action-move":function(g){(function(m){var w=m.iEvent,S=m.interaction;if(S.prepared.name==="resize"&&S.prepared.edges){var k=w,C=S.interactable.options.resize.invert,P=C==="reposition"||C==="negate",B=S.rect,Y=S._rects,K=Y.start,$=Y.corrected,ne=Y.delta,ye=Y.previous;if(Te(ye,$),P){if(Te($,B),C==="reposition"){if($.top>$.bottom){var Ne=$.top;$.top=$.bottom,$.bottom=Ne}if($.left>$.right){var ke=$.left;$.left=$.right,$.right=ke}}}else $.top=Math.min(B.top,K.bottom),$.bottom=Math.max(B.bottom,K.top),$.left=Math.min(B.left,K.right),$.right=Math.max(B.right,K.left);for(var Ce in $.width=$.right-$.left,$.height=$.bottom-$.top,$)ne[Ce]=$[Ce]-ye[Ce];k.edges=S.prepared.edges,k.rect=$,k.deltaRect=ne}})(g),qt(g)},"interactions:action-end":function(g){var m=g.iEvent,w=g.interaction;if(w.prepared.name==="resize"&&w.prepared.edges){var S=m;S.edges=w.prepared.edges,S.rect=w._rects.corrected,S.deltaRect=w._rects.delta}},"auto-start:check":function(g){var m=g.interaction,w=g.interactable,S=g.element,k=g.rect,C=g.buttons;if(k){var P=Te({},m.coords.cur.page),B=w.options.resize;if(B&&B.enabled&&(!m.pointerIsDown||!/mouse|pointer/.test(m.pointerType)||C&B.mouseButtons)){if(O.object(B.edges)){var Y={left:!1,right:!1,top:!1,bottom:!1};for(var K in Y)Y[K]=mt(K,B.edges[K],P,m._latestPointer.eventTarget,S,k,B.margin||Me.defaultMargin);Y.left=Y.left&&!Y.right,Y.top=Y.top&&!Y.bottom,(Y.left||Y.right||Y.top||Y.bottom)&&(g.action={name:"resize",edges:Y})}else{var $=B.axis!=="y"&&P.x>k.right-Me.defaultMargin,ne=B.axis!=="x"&&P.y>k.bottom-Me.defaultMargin;($||ne)&&(g.action={name:"resize",axes:($?"x":"")+(ne?"y":"")})}return!g.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(g){var m=g.edges,w=g.axis,S=g.name,k=Me.cursors,C=null;if(w)C=k[S+w];else if(m){for(var P="",B=0,Y=["top","bottom","left","right"];B<Y.length;B++){var K=Y[B];m[K]&&(P+=K)}C=k[P]}return C},filterEventType:function(g){return g.search("resize")===0},defaultMargin:null},Ve=Me,je={id:"actions",install:function(g){g.usePlugin(Pe),g.usePlugin(Ve),g.usePlugin(J),g.usePlugin(fi)}},Oe=0,Qe={request:function(g){return fe(g)},cancel:function(g){return ve(g)},init:function(g){if(fe=g.requestAnimationFrame,ve=g.cancelAnimationFrame,!fe)for(var m=["ms","moz","webkit","o"],w=0;w<m.length;w++){var S=m[w];fe=g["".concat(S,"RequestAnimationFrame")],ve=g["".concat(S,"CancelAnimationFrame")]||g["".concat(S,"CancelRequestAnimationFrame")]}fe=fe&&fe.bind(g),ve=ve&&ve.bind(g),fe||(fe=function(k){var C=Date.now(),P=Math.max(0,16-(C-Oe)),B=g.setTimeout(function(){k(C+P)},P);return Oe=C+P,B},ve=function(k){return clearTimeout(k)})}},Ae={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(g){Ae.isScrolling=!0,Qe.cancel(Ae.i),g.autoScroll=Ae,Ae.interaction=g,Ae.prevTime=Ae.now(),Ae.i=Qe.request(Ae.scroll)},stop:function(){Ae.isScrolling=!1,Ae.interaction&&(Ae.interaction.autoScroll=null),Qe.cancel(Ae.i)},scroll:function(){var g=Ae.interaction,m=g.interactable,w=g.element,S=g.prepared.name,k=m.options[S].autoScroll,C=Gt(k.container,m,w),P=Ae.now(),B=(P-Ae.prevTime)/1e3,Y=k.speed*B;if(Y>=1){var K={x:Ae.x*Y,y:Ae.y*Y};if(K.x||K.y){var $=Qt(C);O.window(C)?C.scrollBy(K.x,K.y):C&&(C.scrollLeft+=K.x,C.scrollTop+=K.y);var ne=Qt(C),ye={x:ne.x-$.x,y:ne.y-$.y};(ye.x||ye.y)&&m.fire({type:"autoscroll",target:w,interactable:m,delta:ye,interaction:g,container:C})}Ae.prevTime=P}Ae.isScrolling&&(Qe.cancel(Ae.i),Ae.i=Qe.request(Ae.scroll))},check:function(g,m){var w;return(w=g.options[m].autoScroll)==null?void 0:w.enabled},onInteractionMove:function(g){var m=g.interaction,w=g.pointer;if(m.interacting()&&Ae.check(m.interactable,m.prepared.name))if(m.simulation)Ae.x=Ae.y=0;else{var S,k,C,P,B=m.interactable,Y=m.element,K=m.prepared.name,$=B.options[K].autoScroll,ne=Gt($.container,B,Y);if(O.window(ne))P=w.clientX<Ae.margin,S=w.clientY<Ae.margin,k=w.clientX>ne.innerWidth-Ae.margin,C=w.clientY>ne.innerHeight-Ae.margin;else{var ye=pe(ne);P=w.clientX<ye.left+Ae.margin,S=w.clientY<ye.top+Ae.margin,k=w.clientX>ye.right-Ae.margin,C=w.clientY>ye.bottom-Ae.margin}Ae.x=k?1:P?-1:0,Ae.y=C?1:S?-1:0,Ae.isScrolling||(Ae.margin=$.margin,Ae.speed=$.speed,Ae.start(m))}}};function Gt(g,m,w){return(O.string(g)?lt(g,m,w):g)||U(w)}function Qt(g){return O.window(g)&&(g=window.document.body),{x:g.scrollLeft,y:g.scrollTop}}var Fe={id:"auto-scroll",install:function(g){var m=g.defaults,w=g.actions;g.autoScroll=Ae,Ae.now=function(){return g.now()},w.phaselessTypes.autoscroll=!0,m.perAction.autoScroll=Ae.defaults},listeners:{"interactions:new":function(g){g.interaction.autoScroll=null},"interactions:destroy":function(g){g.interaction.autoScroll=null,Ae.stop(),Ae.interaction&&(Ae.interaction=null)},"interactions:stop":Ae.stop,"interactions:action-move":function(g){return Ae.onInteractionMove(g)}}},ln=Fe;function Dt(g,m){var w=!1;return function(){return w||(E.console.warn(m),w=!0),g.apply(this,arguments)}}function fs(g,m){return g.name=m.name,g.axis=m.axis,g.edges=m.edges,g}function bs(g){return O.bool(g)?(this.options.styleCursor=g,this):g===null?(delete this.options.styleCursor,this):this.options.styleCursor}function pi(g){return O.func(g)?(this.options.actionChecker=g,this):g===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Pi={id:"auto-start/interactableMethods",install:function(g){var m=g.Interactable;m.prototype.getAction=function(w,S,k,C){var P=(function(B,Y,K,$,ne){var ye=B.getRect($),Ne=Y.buttons||{0:1,1:4,3:8,4:16}[Y.button],ke={action:null,interactable:B,interaction:K,element:$,rect:ye,buttons:Ne};return ne.fire("auto-start:check",ke),ke.action})(this,S,k,C,g);return this.options.actionChecker?this.options.actionChecker(w,S,P,this,C,k):P},m.prototype.ignoreFrom=Dt(function(w){return this._backCompatOption("ignoreFrom",w)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),m.prototype.allowFrom=Dt(function(w){return this._backCompatOption("allowFrom",w)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),m.prototype.actionChecker=pi,m.prototype.styleCursor=bs}};function ps(g,m,w,S,k){return m.testIgnoreAllow(m.options[g.name],w,S)&&m.options[g.name].enabled&&$s(m,w,g,k)?g:null}function Jt(g,m,w,S,k,C,P){for(var B=0,Y=S.length;B<Y;B++){var K=S[B],$=k[B],ne=K.getAction(m,w,g,$);if(ne){var ye=ps(ne,K,$,C,P);if(ye)return{action:ye,interactable:K,element:$}}}return{action:null,interactable:null,element:null}}function to(g,m,w,S,k){var C=[],P=[],B=S;function Y($){C.push($),P.push(B)}for(;O.element(B);){C=[],P=[],k.interactables.forEachMatch(B,Y);var K=Jt(g,m,w,C,P,S,k);if(K.action&&!K.interactable.options[K.action.name].manualStart)return K;B=oe(B)}return{action:null,interactable:null,element:null}}function bc(g,m,w){var S=m.action,k=m.interactable,C=m.element;S=S||{name:null},g.interactable=k,g.element=C,fs(g.prepared,S),g.rect=k&&S.name?k.getRect(C):null,wc(g,w),w.fire("autoStart:prepared",{interaction:g})}function $s(g,m,w,S){var k=g.options,C=k[w.name].max,P=k[w.name].maxPerElement,B=S.autoStart.maxInteractions,Y=0,K=0,$=0;if(!(C&&P&&B))return!1;for(var ne=0,ye=S.interactions.list;ne<ye.length;ne++){var Ne=ye[ne],ke=Ne.prepared.name;if(Ne.interacting()&&(++Y>=B||Ne.interactable===g&&((K+=ke===w.name?1:0)>=C||Ne.element===m&&($++,ke===w.name&&$>=P))))return!1}return B>0}function na(g,m){return O.number(g)?(m.autoStart.maxInteractions=g,this):m.autoStart.maxInteractions}function _c(g,m,w){var S=w.autoStart.cursorElement;S&&S!==g&&(S.style.cursor=""),g.ownerDocument.documentElement.style.cursor=m,g.style.cursor=m,w.autoStart.cursorElement=m?g:null}function wc(g,m){var w=g.interactable,S=g.element,k=g.prepared;if(g.pointerType==="mouse"&&w&&w.options.styleCursor){var C="";if(k.name){var P=w.options[k.name].cursorChecker;C=O.func(P)?P(k,w,S,g._interacting):m.actions.map[k.name].getCursor(k)}_c(g.element,C||"",m)}else m.autoStart.cursorElement&&_c(m.autoStart.cursorElement,"",m)}var zd={id:"auto-start/base",before:["actions"],install:function(g){var m=g.interactStatic,w=g.defaults;g.usePlugin(Pi),w.base.actionChecker=null,w.base.styleCursor=!0,Te(w.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),m.maxInteractions=function(S){return na(S,g)},g.autoStart={maxInteractions:1/0,withinInteractionLimit:$s,cursorElement:null}},listeners:{"interactions:down":function(g,m){var w=g.interaction,S=g.pointer,k=g.event,C=g.eventTarget;w.interacting()||bc(w,to(w,S,k,C,m),m)},"interactions:move":function(g,m){(function(w,S){var k=w.interaction,C=w.pointer,P=w.event,B=w.eventTarget;k.pointerType!=="mouse"||k.pointerIsDown||k.interacting()||bc(k,to(k,C,P,B,S),S)})(g,m),(function(w,S){var k=w.interaction;if(k.pointerIsDown&&!k.interacting()&&k.pointerWasMoved&&k.prepared.name){S.fire("autoStart:before-start",w);var C=k.interactable,P=k.prepared.name;P&&C&&(C.options[P].manualStart||!$s(C,k.element,k.prepared,S)?k.stop():(k.start(k.prepared,C,k.element),wc(k,S)))}})(g,m)},"interactions:stop":function(g,m){var w=g.interaction,S=w.interactable;S&&S.options.styleCursor&&_c(w.element,"",m)}},maxInteractions:na,withinInteractionLimit:$s,validateAction:ps},Sc=zd,el={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(g,m){var w=g.interaction,S=g.eventTarget,k=g.dx,C=g.dy;if(w.prepared.name==="drag"){var P=Math.abs(k),B=Math.abs(C),Y=w.interactable.options.drag,K=Y.startAxis,$=P>B?"x":P<B?"y":"xy";if(w.prepared.axis=Y.lockAxis==="start"?$[0]:Y.lockAxis,$!=="xy"&&K!=="xy"&&K!==$){w.prepared.name=null;for(var ne=S,ye=function(ke){if(ke!==w.interactable){var Ce=w.interactable.options.drag;if(!Ce.manualStart&&ke.testIgnoreAllow(Ce,ne,S)){var Be=ke.getAction(w.downPointer,w.downEvent,w,ne);if(Be&&Be.name==="drag"&&(function(Le,Ye){if(!Ye)return!1;var nt=Ye.options.drag.startAxis;return Le==="xy"||nt==="xy"||nt===Le})($,ke)&&Sc.validateAction(Be,ke,ne,S,m))return ke}}};O.element(ne);){var Ne=m.interactables.forEachMatch(ne,ye);if(Ne){w.prepared.name="drag",w.interactable=Ne,w.element=ne;break}ne=oe(ne)}}}}}};function Xa(g){var m=g.prepared&&g.prepared.name;if(!m)return null;var w=g.interactable.options;return w[m].hold||w[m].delay}var mi={id:"auto-start/hold",install:function(g){var m=g.defaults;g.usePlugin(Sc),m.perAction.hold=0,m.perAction.delay=0},listeners:{"interactions:new":function(g){g.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(g){var m=g.interaction,w=Xa(m);w>0&&(m.autoStartHoldTimer=setTimeout(function(){m.start(m.prepared,m.interactable,m.element)},w))},"interactions:move":function(g){var m=g.interaction,w=g.duplicate;m.autoStartHoldTimer&&m.pointerWasMoved&&!w&&(clearTimeout(m.autoStartHoldTimer),m.autoStartHoldTimer=null)},"autoStart:before-start":function(g){var m=g.interaction;Xa(m)>0&&(m.prepared.name=null)}},getHoldDuration:Xa},_s=mi,Bd={id:"auto-start",install:function(g){g.usePlugin(Sc),g.usePlugin(_s),g.usePlugin(el)}},lm=function(g){return/^(always|never|auto)$/.test(g)?(this.options.preventDefault=g,this):O.bool(g)?(this.options.preventDefault=g?"always":"never",this):this.options.preventDefault};function jc(g){var m=g.interaction,w=g.event;m.interactable&&m.interactable.checkAndPreventDefault(w)}var kc={id:"core/interactablePreventDefault",install:function(g){var m=g.Interactable;m.prototype.preventDefault=lm,m.prototype.checkAndPreventDefault=function(w){return(function(S,k,C){var P=S.options.preventDefault;if(P!=="never")if(P!=="always"){if(k.events.supportsPassive&&/^touch(start|move)$/.test(C.type)){var B=U(C.target).document,Y=k.getDocOptions(B);if(!Y||!Y.events||Y.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(C.type)||O.element(C.target)&&me(C.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||C.preventDefault()}else C.preventDefault()})(this,g,w)},g.interactions.docEvents.push({type:"dragstart",listener:function(w){for(var S=0,k=g.interactions.list;S<k.length;S++){var C=k[S];if(C.element&&(C.element===w.target||X(C.element,w.target)))return void C.interactable.checkAndPreventDefault(w)}}})},listeners:["down","move","up","cancel"].reduce(function(g,m){return g["interactions:".concat(m)]=jc,g},{})};function sa(g,m){if(m.phaselessTypes[g])return!0;for(var w in m.map)if(g.indexOf(w)===0&&g.substr(w.length)in m.phases)return!0;return!1}function Ka(g){var m={};for(var w in g){var S=g[w];O.plainObject(S)?m[w]=Ka(S):O.array(S)?m[w]=zn(S):m[w]=S}return m}var ns=(function(){function g(m){o(this,g),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=m,this.result=Za(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return d(g,[{key:"start",value:function(m,w){var S,k,C=m.phase,P=this.interaction,B=(function(K){var $=K.interactable.options[K.prepared.name],ne=$.modifiers;return ne&&ne.length?ne:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ye){var Ne=$[ye];return Ne&&Ne.enabled&&{options:Ne,methods:Ne._methods}}).filter(function(ye){return!!ye})})(P);this.prepareStates(B),this.startEdges=Te({},P.edges),this.edges=Te({},this.startEdges),this.startOffset=(S=P.rect,k=w,S?{left:k.x-S.left,top:k.y-S.top,right:S.right-k.x,bottom:S.bottom-k.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var Y=this.fillArg({phase:C,pageCoords:w,preEnd:!1});return this.result=Za(),this.startAll(Y),this.result=this.setAll(Y)}},{key:"fillArg",value:function(m){var w=this.interaction;return m.interaction=w,m.interactable=w.interactable,m.element=w.element,m.rect||(m.rect=w.rect),m.edges||(m.edges=this.startEdges),m.startOffset=this.startOffset,m}},{key:"startAll",value:function(m){for(var w=0,S=this.states;w<S.length;w++){var k=S[w];k.methods.start&&(m.state=k,k.methods.start(m))}}},{key:"setAll",value:function(m){var w=m.phase,S=m.preEnd,k=m.skipModifiers,C=m.rect,P=m.edges;m.coords=Te({},m.pageCoords),m.rect=Te({},C),m.edges=Te({},P);for(var B=k?this.states.slice(k):this.states,Y=Za(m.coords,m.rect),K=0;K<B.length;K++){var $,ne=B[K],ye=ne.options,Ne=Te({},m.coords),ke=null;($=ne.methods)!=null&&$.set&&this.shouldDo(ye,S,w)&&(m.state=ne,ke=ne.methods.set(m),Mt(m.edges,m.rect,{x:m.coords.x-Ne.x,y:m.coords.y-Ne.y})),Y.eventProps.push(ke)}Te(this.edges,m.edges),Y.delta.x=m.coords.x-m.pageCoords.x,Y.delta.y=m.coords.y-m.pageCoords.y,Y.rectDelta.left=m.rect.left-C.left,Y.rectDelta.right=m.rect.right-C.right,Y.rectDelta.top=m.rect.top-C.top,Y.rectDelta.bottom=m.rect.bottom-C.bottom;var Ce=this.result.coords,Be=this.result.rect;if(Ce&&Be){var Le=Y.rect.left!==Be.left||Y.rect.right!==Be.right||Y.rect.top!==Be.top||Y.rect.bottom!==Be.bottom;Y.changed=Le||Ce.x!==Y.coords.x||Ce.y!==Y.coords.y}return Y}},{key:"applyToInteraction",value:function(m){var w=this.interaction,S=m.phase,k=w.coords.cur,C=w.coords.start,P=this.result,B=this.startDelta,Y=P.delta;S==="start"&&Te(this.startDelta,P.delta);for(var K=0,$=[[C,B],[k,Y]];K<$.length;K++){var ne=$[K],ye=ne[0],Ne=ne[1];ye.page.x+=Ne.x,ye.page.y+=Ne.y,ye.client.x+=Ne.x,ye.client.y+=Ne.y}var ke=this.result.rectDelta,Ce=m.rect||w.rect;Ce.left+=ke.left,Ce.right+=ke.right,Ce.top+=ke.top,Ce.bottom+=ke.bottom,Ce.width=Ce.right-Ce.left,Ce.height=Ce.bottom-Ce.top}},{key:"setAndApply",value:function(m){var w=this.interaction,S=m.phase,k=m.preEnd,C=m.skipModifiers,P=this.setAll(this.fillArg({preEnd:k,phase:S,pageCoords:m.modifiedCoords||w.coords.cur.page}));if(this.result=P,!P.changed&&(!C||C<this.states.length)&&w.interacting())return!1;if(m.modifiedCoords){var B=w.coords.cur.page,Y={x:m.modifiedCoords.x-B.x,y:m.modifiedCoords.y-B.y};P.coords.x+=Y.x,P.coords.y+=Y.y,P.delta.x+=Y.x,P.delta.y+=Y.y}this.applyToInteraction(m)}},{key:"beforeEnd",value:function(m){var w=m.interaction,S=m.event,k=this.states;if(k&&k.length){for(var C=!1,P=0;P<k.length;P++){var B=k[P];m.state=B;var Y=B.options,K=B.methods,$=K.beforeEnd&&K.beforeEnd(m);if($)return this.endResult=$,!1;C=C||!C&&this.shouldDo(Y,!0,m.phase,!0)}C&&w.move({event:S,preEnd:!0})}}},{key:"stop",value:function(m){var w=m.interaction;if(this.states&&this.states.length){var S=Te({states:this.states,interactable:w.interactable,element:w.element,rect:null},m);this.fillArg(S);for(var k=0,C=this.states;k<C.length;k++){var P=C[k];S.state=P,P.methods.stop&&P.methods.stop(S)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(m){this.states=[];for(var w=0;w<m.length;w++){var S=m[w],k=S.options,C=S.methods,P=S.name;this.states.push({options:k,methods:C,index:w,name:P})}return this.states}},{key:"restoreInteractionCoords",value:function(m){var w=m.interaction,S=w.coords,k=w.rect,C=w.modification;if(C.result){for(var P=C.startDelta,B=C.result,Y=B.delta,K=B.rectDelta,$=0,ne=[[S.start,P],[S.cur,Y]];$<ne.length;$++){var ye=ne[$],Ne=ye[0],ke=ye[1];Ne.page.x-=ke.x,Ne.page.y-=ke.y,Ne.client.x-=ke.x,Ne.client.y-=ke.y}k.left-=K.left,k.right-=K.right,k.top-=K.top,k.bottom-=K.bottom}}},{key:"shouldDo",value:function(m,w,S,k){return!(!m||m.enabled===!1||k&&!m.endOnly||m.endOnly&&!w||S==="start"&&!m.setStart)}},{key:"copyFrom",value:function(m){this.startOffset=m.startOffset,this.startDelta=m.startDelta,this.startEdges=m.startEdges,this.edges=m.edges,this.states=m.states.map(function(w){return Ka(w)}),this.result=Za(Te({},m.result.coords),Te({},m.result.rect))}},{key:"destroy",value:function(){for(var m in this)this[m]=null}}]),g})();function Za(g,m){return{rect:m,coords:g,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function gi(g,m){var w=g.defaults,S={start:g.start,set:g.set,beforeEnd:g.beforeEnd,stop:g.stop},k=function(C){var P=C||{};for(var B in P.enabled=P.enabled!==!1,w)B in P||(P[B]=w[B]);var Y={options:P,methods:S,name:m,enable:function(){return P.enabled=!0,Y},disable:function(){return P.enabled=!1,Y}};return Y};return m&&typeof m=="string"&&(k._defaults=w,k._methods=S),k}function ia(g){var m=g.iEvent,w=g.interaction.modification.result;w&&(m.modifiers=w.eventProps)}var Qa={id:"modifiers/base",before:["actions"],install:function(g){g.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(g){var m=g.interaction;m.modification=new ns(m)},"interactions:before-action-start":function(g){var m=g.interaction,w=g.interaction.modification;w.start(g,m.coords.start.page),m.edges=w.edges,w.applyToInteraction(g)},"interactions:before-action-move":function(g){var m=g.interaction,w=m.modification,S=w.setAndApply(g);return m.edges=w.edges,S},"interactions:before-action-end":function(g){var m=g.interaction,w=m.modification,S=w.beforeEnd(g);return m.edges=w.startEdges,S},"interactions:action-start":ia,"interactions:action-move":ia,"interactions:action-end":ia,"interactions:after-action-start":function(g){return g.interaction.modification.restoreInteractionCoords(g)},"interactions:after-action-move":function(g){return g.interaction.modification.restoreInteractionCoords(g)},"interactions:stop":function(g){return g.interaction.modification.stop(g)}}},Tc=Qa,Nc={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Li=(function(g){p(w,g);var m=j(w);function w(S,k,C,P,B,Y,K){var $;o(this,w),($=m.call(this,S)).relatedTarget=null,$.screenX=void 0,$.screenY=void 0,$.button=void 0,$.buttons=void 0,$.ctrlKey=void 0,$.shiftKey=void 0,$.altKey=void 0,$.metaKey=void 0,$.page=void 0,$.client=void 0,$.delta=void 0,$.rect=void 0,$.x0=void 0,$.y0=void 0,$.t0=void 0,$.dt=void 0,$.duration=void 0,$.clientX0=void 0,$.clientY0=void 0,$.velocity=void 0,$.speed=void 0,$.swipe=void 0,$.axes=void 0,$.preEnd=void 0,B=B||S.element;var ne=S.interactable,ye=(ne&&ne.options||Nc).deltaSource,Ne=st(ne,B,C),ke=P==="start",Ce=P==="end",Be=ke?b($):S.prevEvent,Le=ke?S.coords.start:Ce?{page:Be.page,client:Be.client,timeStamp:S.coords.cur.timeStamp}:S.coords.cur;return $.page=Te({},Le.page),$.client=Te({},Le.client),$.rect=Te({},S.rect),$.timeStamp=Le.timeStamp,Ce||($.page.x-=Ne.x,$.page.y-=Ne.y,$.client.x-=Ne.x,$.client.y-=Ne.y),$.ctrlKey=k.ctrlKey,$.altKey=k.altKey,$.shiftKey=k.shiftKey,$.metaKey=k.metaKey,$.button=k.button,$.buttons=k.buttons,$.target=B,$.currentTarget=B,$.preEnd=Y,$.type=K||C+(P||""),$.interactable=ne,$.t0=ke?S.pointers[S.pointers.length-1].downTime:Be.t0,$.x0=S.coords.start.page.x-Ne.x,$.y0=S.coords.start.page.y-Ne.y,$.clientX0=S.coords.start.client.x-Ne.x,$.clientY0=S.coords.start.client.y-Ne.y,$.delta=ke||Ce?{x:0,y:0}:{x:$[ye].x-Be[ye].x,y:$[ye].y-Be[ye].y},$.dt=S.coords.delta.timeStamp,$.duration=$.timeStamp-$.t0,$.velocity=Te({},S.coords.velocity[ye]),$.speed=vn($.velocity.x,$.velocity.y),$.swipe=Ce||P==="inertiastart"?$.getSwipe():null,$}return d(w,[{key:"getSwipe",value:function(){var S=this._interaction;if(S.prevEvent.speed<600||this.timeStamp-S.prevEvent.timeStamp>150)return null;var k=180*Math.atan2(S.prevEvent.velocityY,S.prevEvent.velocityX)/Math.PI;k<0&&(k+=360);var C=112.5<=k&&k<247.5,P=202.5<=k&&k<337.5;return{up:P,down:!P&&22.5<=k&&k<157.5,left:C,right:!C&&(292.5<=k||k<67.5),angle:k,speed:S.prevEvent.speed,velocity:{x:S.prevEvent.velocityX,y:S.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),w})($t);Object.defineProperties(Li.prototype,{pageX:{get:function(){return this.page.x},set:function(g){this.page.x=g}},pageY:{get:function(){return this.page.y},set:function(g){this.page.y=g}},clientX:{get:function(){return this.client.x},set:function(g){this.client.x=g}},clientY:{get:function(){return this.client.y},set:function(g){this.client.y=g}},dx:{get:function(){return this.delta.x},set:function(g){this.delta.x=g}},dy:{get:function(){return this.delta.y},set:function(g){this.delta.y=g}},velocityX:{get:function(){return this.velocity.x},set:function(g){this.velocity.x=g}},velocityY:{get:function(){return this.velocity.y},set:function(g){this.velocity.y=g}}});var cm=d(function g(m,w,S,k,C){o(this,g),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=m,this.pointer=w,this.event=S,this.downTime=k,this.downTarget=C}),Vd=(function(g){return g.interactable="",g.element="",g.prepared="",g.pointerIsDown="",g.pointerWasMoved="",g._proxy="",g})({}),Mc=(function(g){return g.start="",g.move="",g.end="",g.stop="",g.interacting="",g})({}),Dc=0,um=(function(){function g(m){var w=this,S=m.pointerType,k=m.scopeFire;o(this,g),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Dt(function($){this.move($)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Dc++,this._scopeFire=k,this.pointerType=S;var C=this;this._proxy={};var P=function($){Object.defineProperty(w._proxy,$,{get:function(){return C[$]}})};for(var B in Vd)P(B);var Y=function($){Object.defineProperty(w._proxy,$,{value:function(){return C[$].apply(C,arguments)}})};for(var K in Mc)Y(K);this._scopeFire("interactions:new",{interaction:this})}return d(g,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(m,w,S){var k=this.updatePointer(m,w,S,!0),C=this.pointers[k];this._scopeFire("interactions:down",{pointer:m,event:w,eventTarget:S,pointerIndex:k,pointerInfo:C,type:"down",interaction:this})}},{key:"start",value:function(m,w,S){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(m.name==="gesture"?2:1)||!w.options[m.name].enabled)&&(fs(this.prepared,m),this.interactable=w,this.element=S,this.rect=w.getRect(S),this.edges=this.prepared.edges?Te({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(m,w,S){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(m,w,S,!1);var k,C,P=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(k=this.coords.cur.client.x-this.coords.start.client.x,C=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=vn(k,C)>this.pointerMoveTolerance);var B,Y,K,$=this.getPointerIndex(m),ne={pointer:m,pointerIndex:$,pointerInfo:this.pointers[$],event:w,type:"move",eventTarget:S,dx:k,dy:C,duplicate:P,interaction:this};P||(B=this.coords.velocity,Y=this.coords.delta,K=Math.max(Y.timeStamp/1e3,.001),B.page.x=Y.page.x/K,B.page.y=Y.page.y/K,B.client.x=Y.client.x/K,B.client.y=Y.client.y/K,B.timeStamp=K),this._scopeFire("interactions:move",ne),P||this.simulation||(this.interacting()&&(ne.type=null,this.move(ne)),this.pointerWasMoved&&ze(this.coords.prev,this.coords.cur))}},{key:"move",value:function(m){m&&m.event||xt(this.coords.delta),(m=Te({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},m||{})).phase="move",this._doPhase(m)}},{key:"pointerUp",value:function(m,w,S,k){var C=this.getPointerIndex(m);C===-1&&(C=this.updatePointer(m,w,S,!1));var P=/cancel$/i.test(w.type)?"cancel":"up";this._scopeFire("interactions:".concat(P),{pointer:m,pointerIndex:C,pointerInfo:this.pointers[C],event:w,eventTarget:S,type:P,curEventTarget:k,interaction:this}),this.simulation||this.end(w),this.removePointer(m,w)}},{key:"documentBlur",value:function(m){this.end(m),this._scopeFire("interactions:blur",{event:m,type:"blur",interaction:this})}},{key:"end",value:function(m){var w;this._ending=!0,m=m||this._latestPointer.event,this.interacting()&&(w=this._doPhase({event:m,interaction:this,phase:"end"})),this._ending=!1,w===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(m){var w=ot(m);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:hi(this.pointers,function(S){return S.id===w})}},{key:"getPointerInfo",value:function(m){return this.pointers[this.getPointerIndex(m)]}},{key:"updatePointer",value:function(m,w,S,k){var C,P,B,Y=ot(m),K=this.getPointerIndex(m),$=this.pointers[K];return k=k!==!1&&(k||/(down|start)$/i.test(w.type)),$?$.pointer=m:($=new cm(Y,m,w,null,null),K=this.pointers.length,this.pointers.push($)),Wn(this.coords.cur,this.pointers.map(function(ne){return ne.pointer}),this._now()),C=this.coords.delta,P=this.coords.prev,B=this.coords.cur,C.page.x=B.page.x-P.page.x,C.page.y=B.page.y-P.page.y,C.client.x=B.client.x-P.client.x,C.client.y=B.client.y-P.client.y,C.timeStamp=B.timeStamp-P.timeStamp,k&&(this.pointerIsDown=!0,$.downTime=this.coords.cur.timeStamp,$.downTarget=S,Hn(this.downPointer,m),this.interacting()||(ze(this.coords.start,this.coords.cur),ze(this.coords.prev,this.coords.cur),this.downEvent=w,this.pointerWasMoved=!1)),this._updateLatestPointer(m,w,S),this._scopeFire("interactions:update-pointer",{pointer:m,event:w,eventTarget:S,down:k,pointerInfo:$,pointerIndex:K,interaction:this}),K}},{key:"removePointer",value:function(m,w){var S=this.getPointerIndex(m);if(S!==-1){var k=this.pointers[S];this._scopeFire("interactions:remove-pointer",{pointer:m,event:w,eventTarget:null,pointerIndex:S,pointerInfo:k,interaction:this}),this.pointers.splice(S,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(m,w,S){this._latestPointer.pointer=m,this._latestPointer.event=w,this._latestPointer.eventTarget=S}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(m,w,S,k){return new Li(this,m,this.prepared.name,w,this.element,S,k)}},{key:"_fireEvent",value:function(m){var w;(w=this.interactable)==null||w.fire(m),(!this.prevEvent||m.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=m)}},{key:"_doPhase",value:function(m){var w=m.event,S=m.phase,k=m.preEnd,C=m.type,P=this.rect;if(P&&S==="move"&&(Mt(this.edges,P,this.coords.delta[this.interactable.options.deltaSource]),P.width=P.right-P.left,P.height=P.bottom-P.top),this._scopeFire("interactions:before-action-".concat(S),m)===!1)return!1;var B=m.iEvent=this._createPreparedEvent(w,S,k,C);return this._scopeFire("interactions:action-".concat(S),m),S==="start"&&(this.prevEvent=B),this._fireEvent(B),this._scopeFire("interactions:after-action-".concat(S),m),!0}},{key:"_now",value:function(){return Date.now()}}]),g})();function Fd(g){no(g.interaction)}function no(g){if(!(function(w){return!(!w.offset.pending.x&&!w.offset.pending.y)})(g))return!1;var m=g.offset.pending;return so(g.coords.cur,m),so(g.coords.delta,m),Mt(g.edges,g.rect,m),m.x=0,m.y=0,!0}function xi(g){var m=g.x,w=g.y;this.offset.pending.x+=m,this.offset.pending.y+=w,this.offset.total.x+=m,this.offset.total.y+=w}function so(g,m){var w=g.page,S=g.client,k=m.x,C=m.y;w.x+=k,w.y+=C,S.x+=k,S.y+=C}Mc.offsetBy="";var Cc={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(g){g.Interaction.prototype.offsetBy=xi},listeners:{"interactions:new":function(g){g.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(g){return(function(m){m.pointerIsDown&&(so(m.coords.cur,m.offset.total),m.offset.pending.x=0,m.offset.pending.y=0)})(g.interaction)},"interactions:before-action-start":Fd,"interactions:before-action-move":Fd,"interactions:before-action-end":function(g){var m=g.interaction;if(no(m))return m.move({offset:!0}),m.end(),!1},"interactions:stop":function(g){var m=g.interaction;m.offset.total.x=0,m.offset.total.y=0,m.offset.pending.x=0,m.offset.pending.y=0}}},aa=Cc,Ja=(function(){function g(m){o(this,g),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=m}return d(g,[{key:"start",value:function(m){var w=this.interaction,S=io(w);if(!S||!S.enabled)return!1;var k=w.coords.velocity.client,C=vn(k.x,k.y),P=this.modification||(this.modification=new ns(w));if(P.copyFrom(w.modification),this.t0=w._now(),this.allowResume=S.allowResume,this.v0=C,this.currentOffset={x:0,y:0},this.startCoords=w.coords.cur.page,this.modifierArg=P.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-w.coords.cur.timeStamp<50&&C>S.minSpeed&&C>S.endSpeed)this.startInertia();else{if(P.result=P.setAll(this.modifierArg),!P.result.changed)return!1;this.startSmoothEnd()}return w.modification.result.rect=null,w.offsetBy(this.targetOffset),w._doPhase({interaction:w,event:m,phase:"inertiastart"}),w.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),w.modification.result.rect=null,this.active=!0,w.simulation=this,!0}},{key:"startInertia",value:function(){var m=this,w=this.interaction.coords.velocity.client,S=io(this.interaction),k=S.resistance,C=-Math.log(S.endSpeed/this.v0)/k;this.targetOffset={x:(w.x-C)/k,y:(w.y-C)/k},this.te=C,this.lambda_v0=k/this.v0,this.one_ve_v0=1-S.endSpeed/this.v0;var P=this.modification,B=this.modifierArg;B.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},P.result=P.setAll(B),P.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+P.result.delta.x,y:this.targetOffset.y+P.result.delta.y}),this.onNextFrame(function(){return m.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var m=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return m.smoothEndTick()})}},{key:"onNextFrame",value:function(m){var w=this;this.timeout=Qe.request(function(){w.active&&m()})}},{key:"inertiaTick",value:function(){var m,w,S,k,C,P,B,Y=this,K=this.interaction,$=io(K).resistance,ne=(K._now()-this.t0)/1e3;if(ne<this.te){var ye,Ne=1-(Math.exp(-$*ne)-this.lambda_v0)/this.one_ve_v0;this.isModified?(m=0,w=0,S=this.targetOffset.x,k=this.targetOffset.y,C=this.modifiedOffset.x,P=this.modifiedOffset.y,ye={x:Ac(B=Ne,m,S,C),y:Ac(B,w,k,P)}):ye={x:this.targetOffset.x*Ne,y:this.targetOffset.y*Ne};var ke={x:ye.x-this.currentOffset.x,y:ye.y-this.currentOffset.y};this.currentOffset.x+=ke.x,this.currentOffset.y+=ke.y,K.offsetBy(ke),K.move(),this.onNextFrame(function(){return Y.inertiaTick()})}else K.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var m=this,w=this.interaction,S=w._now()-this.t0,k=io(w).smoothEndDuration;if(S<k){var C={x:er(S,0,this.targetOffset.x,k),y:er(S,0,this.targetOffset.y,k)},P={x:C.x-this.currentOffset.x,y:C.y-this.currentOffset.y};this.currentOffset.x+=P.x,this.currentOffset.y+=P.y,w.offsetBy(P),w.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return m.smoothEndTick()})}else w.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(m){var w=m.pointer,S=m.event,k=m.eventTarget,C=this.interaction;C.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),C.updatePointer(w,S,k,!0),C._doPhase({interaction:C,event:S,phase:"resume"}),ze(C.coords.prev,C.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Qe.cancel(this.timeout)}}]),g})();function io(g){var m=g.interactable,w=g.prepared;return m&&m.options&&w.name&&m.options[w.name].inertia}var Ec={id:"inertia",before:["modifiers","actions"],install:function(g){var m=g.defaults;g.usePlugin(aa),g.usePlugin(Tc),g.actions.phases.inertiastart=!0,g.actions.phases.resume=!0,m.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(g){var m=g.interaction;m.inertia=new Ja(m)},"interactions:before-action-end":function(g){var m=g.interaction,w=g.event;return(!m._interacting||m.simulation||!m.inertia.start(w))&&null},"interactions:down":function(g){var m=g.interaction,w=g.eventTarget,S=m.inertia;if(S.active)for(var k=w;O.element(k);){if(k===m.element){S.resume(g);break}k=oe(k)}},"interactions:stop":function(g){var m=g.interaction.inertia;m.active&&m.stop()},"interactions:before-action-resume":function(g){var m=g.interaction.modification;m.stop(g),m.start(g,g.interaction.coords.cur.page),m.applyToInteraction(g)},"interactions:before-action-inertiastart":function(g){return g.interaction.modification.setAndApply(g)},"interactions:action-resume":ia,"interactions:action-inertiastart":ia,"interactions:after-action-inertiastart":function(g){return g.interaction.modification.restoreInteractionCoords(g)},"interactions:after-action-resume":function(g){return g.interaction.modification.restoreInteractionCoords(g)}}};function Ac(g,m,w,S){var k=1-g;return k*k*m+2*k*g*w+g*g*S}function er(g,m,w,S){return-w*(g/=S)*(g-2)+m}var yi=Ec;function tl(g,m){for(var w=0;w<m.length;w++){var S=m[w];if(g.immediatePropagationStopped)break;S(g)}}var tr=(function(){function g(m){o(this,g),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Te({},m||{})}return d(g,[{key:"fire",value:function(m){var w,S=this.global;(w=this.types[m.type])&&tl(m,w),!m.propagationStopped&&S&&(w=S[m.type])&&tl(m,w)}},{key:"on",value:function(m,w){var S=fn(m,w);for(m in S)this.types[m]=gn(this.types[m]||[],S[m])}},{key:"off",value:function(m,w){var S=fn(m,w);for(m in S){var k=this.types[m];if(k&&k.length)for(var C=0,P=S[m];C<P.length;C++){var B=P[C],Y=k.indexOf(B);Y!==-1&&k.splice(Y,1)}}}},{key:"getRect",value:function(m){return null}}]),g})(),zi=(function(){function g(m){o(this,g),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=m,Hn(this,m)}return d(g,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),g})();function ra(g){return O.object(g)?{capture:!!g.capture,passive:!!g.passive}:{capture:!!g,passive:!1}}function oa(g,m){return g===m||(typeof g=="boolean"?!!m.capture===g&&!m.passive:!!g.capture==!!m.capture&&!!g.passive==!!m.passive)}var Hd={id:"events",install:function(g){var m,w=[],S={},k=[],C={add:P,remove:B,addDelegate:function($,ne,ye,Ne,ke){var Ce=ra(ke);if(!S[ye]){S[ye]=[];for(var Be=0;Be<k.length;Be++){var Le=k[Be];P(Le,ye,Y),P(Le,ye,K,!0)}}var Ye=S[ye],nt=Ei(Ye,function(ct){return ct.selector===$&&ct.context===ne});nt||(nt={selector:$,context:ne,listeners:[]},Ye.push(nt)),nt.listeners.push({func:Ne,options:Ce})},removeDelegate:function($,ne,ye,Ne,ke){var Ce,Be=ra(ke),Le=S[ye],Ye=!1;if(Le)for(Ce=Le.length-1;Ce>=0;Ce--){var nt=Le[Ce];if(nt.selector===$&&nt.context===ne){for(var ct=nt.listeners,Xe=ct.length-1;Xe>=0;Xe--){var it=ct[Xe];if(it.func===Ne&&oa(it.options,Be)){ct.splice(Xe,1),ct.length||(Le.splice(Ce,1),B(ne,ye,Y),B(ne,ye,K,!0)),Ye=!0;break}}if(Ye)break}}},delegateListener:Y,delegateUseCapture:K,delegatedEvents:S,documents:k,targets:w,supportsOptions:!1,supportsPassive:!1};function P($,ne,ye,Ne){if($.addEventListener){var ke=ra(Ne),Ce=Ei(w,function(Be){return Be.eventTarget===$});Ce||(Ce={eventTarget:$,events:{}},w.push(Ce)),Ce.events[ne]||(Ce.events[ne]=[]),Ei(Ce.events[ne],function(Be){return Be.func===ye&&oa(Be.options,ke)})||($.addEventListener(ne,ye,C.supportsOptions?ke:ke.capture),Ce.events[ne].push({func:ye,options:ke}))}}function B($,ne,ye,Ne){if($.addEventListener&&$.removeEventListener){var ke=hi(w,function(xn){return xn.eventTarget===$}),Ce=w[ke];if(Ce&&Ce.events)if(ne!=="all"){var Be=!1,Le=Ce.events[ne];if(Le){if(ye==="all"){for(var Ye=Le.length-1;Ye>=0;Ye--){var nt=Le[Ye];B($,ne,nt.func,nt.options)}return}for(var ct=ra(Ne),Xe=0;Xe<Le.length;Xe++){var it=Le[Xe];if(it.func===ye&&oa(it.options,ct)){$.removeEventListener(ne,ye,C.supportsOptions?ct:ct.capture),Le.splice(Xe,1),Le.length===0&&(delete Ce.events[ne],Be=!0);break}}}Be&&!Object.keys(Ce.events).length&&w.splice(ke,1)}else for(ne in Ce.events)Ce.events.hasOwnProperty(ne)&&B($,ne,"all")}}function Y($,ne){for(var ye=ra(ne),Ne=new zi($),ke=S[$.type],Ce=mn($)[0],Be=Ce;O.element(Be);){for(var Le=0;Le<ke.length;Le++){var Ye=ke[Le],nt=Ye.selector,ct=Ye.context;if(me(Be,nt)&&X(ct,Ce)&&X(ct,Be)){var Xe=Ye.listeners;Ne.currentTarget=Be;for(var it=0;it<Xe.length;it++){var xn=Xe[it];oa(xn.options,ye)&&xn.func(Ne)}}}Be=oe(Be)}}function K($){return Y($,!0)}return(m=g.document)==null||m.createElement("div").addEventListener("test",null,{get capture(){return C.supportsOptions=!0},get passive(){return C.supportsPassive=!0}}),g.events=C,C}},nr={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(g){for(var m=0,w=nr.methodOrder;m<w.length;m++){var S=w[m],k=nr[S](g);if(k)return k}return null},simulationResume:function(g){var m=g.pointerType,w=g.eventType,S=g.eventTarget,k=g.scope;if(!/down|start/i.test(w))return null;for(var C=0,P=k.interactions.list;C<P.length;C++){var B=P[C],Y=S;if(B.simulation&&B.simulation.allowResume&&B.pointerType===m)for(;Y;){if(Y===B.element)return B;Y=oe(Y)}}return null},mouseOrPen:function(g){var m,w=g.pointerId,S=g.pointerType,k=g.eventType,C=g.scope;if(S!=="mouse"&&S!=="pen")return null;for(var P=0,B=C.interactions.list;P<B.length;P++){var Y=B[P];if(Y.pointerType===S){if(Y.simulation&&!ao(Y,w))continue;if(Y.interacting())return Y;m||(m=Y)}}if(m)return m;for(var K=0,$=C.interactions.list;K<$.length;K++){var ne=$[K];if(!(ne.pointerType!==S||/down/i.test(k)&&ne.simulation))return ne}return null},hasPointer:function(g){for(var m=g.pointerId,w=0,S=g.scope.interactions.list;w<S.length;w++){var k=S[w];if(ao(k,m))return k}return null},idle:function(g){for(var m=g.pointerType,w=0,S=g.scope.interactions.list;w<S.length;w++){var k=S[w];if(k.pointers.length===1){var C=k.interactable;if(C&&(!C.options.gesture||!C.options.gesture.enabled))continue}else if(k.pointers.length>=2)continue;if(!k.interacting()&&m===k.pointerType)return k}return null}};function ao(g,m){return g.pointers.some(function(w){return w.id===m})}var Ud=nr,Un=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Bi(g,m){return function(w){var S=m.interactions.list,k=xs(w),C=mn(w),P=C[0],B=C[1],Y=[];if(/^touch/.test(w.type)){m.prevTouchTime=m.now();for(var K=0,$=w.changedTouches;K<$.length;K++){var ne=$[K],ye={pointer:ne,pointerId:ot(ne),pointerType:k,eventType:w.type,eventTarget:P,curEventTarget:B,scope:m},Ne=ro(ye);Y.push([ye.pointer,ye.eventTarget,ye.curEventTarget,Ne])}}else{var ke=!1;if(!W.supportsPointerEvent&&/mouse/.test(w.type)){for(var Ce=0;Ce<S.length&&!ke;Ce++)ke=S[Ce].pointerType!=="mouse"&&S[Ce].pointerIsDown;ke=ke||m.now()-m.prevTouchTime<500||w.timeStamp===0}if(!ke){var Be={pointer:w,pointerId:ot(w),pointerType:k,eventType:w.type,curEventTarget:B,eventTarget:P,scope:m},Le=ro(Be);Y.push([Be.pointer,Be.eventTarget,Be.curEventTarget,Le])}}for(var Ye=0;Ye<Y.length;Ye++){var nt=Y[Ye],ct=nt[0],Xe=nt[1],it=nt[2];nt[3][g](ct,w,Xe,it)}}}function ro(g){var m=g.pointerType,w=g.scope,S={interaction:Ud.search(g),searchDetails:g};return w.fire("interactions:find",S),S.interaction||w.interactions.new({pointerType:m})}function la(g,m){var w=g.doc,S=g.scope,k=g.options,C=S.interactions.docEvents,P=S.events,B=P[m];for(var Y in S.browser.isIOS&&!k.events&&(k.events={passive:!1}),P.delegatedEvents)B(w,Y,P.delegateListener),B(w,Y,P.delegateUseCapture,!0);for(var K=k&&k.events,$=0;$<C.length;$++){var ne=C[$];B(w,ne.type,ne.listener,K)}}var dm={id:"core/interactions",install:function(g){for(var m={},w=0;w<Un.length;w++){var S=Un[w];m[S]=Bi(S,g)}var k,C=W.pEventTypes;function P(){for(var B=0,Y=g.interactions.list;B<Y.length;B++){var K=Y[B];if(K.pointerIsDown&&K.pointerType==="touch"&&!K._interacting)for(var $=function(){var Ne=ye[ne];g.documents.some(function(ke){return X(ke.doc,Ne.downTarget)})||K.removePointer(Ne.pointer,Ne.event)},ne=0,ye=K.pointers;ne<ye.length;ne++)$()}}(k=te.PointerEvent?[{type:C.down,listener:P},{type:C.down,listener:m.pointerDown},{type:C.move,listener:m.pointerMove},{type:C.up,listener:m.pointerUp},{type:C.cancel,listener:m.pointerUp}]:[{type:"mousedown",listener:m.pointerDown},{type:"mousemove",listener:m.pointerMove},{type:"mouseup",listener:m.pointerUp},{type:"touchstart",listener:P},{type:"touchstart",listener:m.pointerDown},{type:"touchmove",listener:m.pointerMove},{type:"touchend",listener:m.pointerUp},{type:"touchcancel",listener:m.pointerUp}]).push({type:"blur",listener:function(B){for(var Y=0,K=g.interactions.list;Y<K.length;Y++)K[Y].documentBlur(B)}}),g.prevTouchTime=0,g.Interaction=(function(B){p(K,B);var Y=j(K);function K(){return o(this,K),Y.apply(this,arguments)}return d(K,[{key:"pointerMoveTolerance",get:function(){return g.interactions.pointerMoveTolerance},set:function($){g.interactions.pointerMoveTolerance=$}},{key:"_now",value:function(){return g.now()}}]),K})(um),g.interactions={list:[],new:function(B){B.scopeFire=function(K,$){return g.fire(K,$)};var Y=new g.Interaction(B);return g.interactions.list.push(Y),Y},listeners:m,docEvents:k,pointerMoveTolerance:1},g.usePlugin(kc)},listeners:{"scope:add-document":function(g){return la(g,"add")},"scope:remove-document":function(g){return la(g,"remove")},"interactable:unset":function(g,m){for(var w=g.interactable,S=m.interactions.list.length-1;S>=0;S--){var k=m.interactions.list[S];k.interactable===w&&(k.stop(),m.fire("interactions:destroy",{interaction:k}),k.destroy(),m.interactions.list.length>2&&m.interactions.list.splice(S,1))}}},onDocSignal:la,doOnInteractions:Bi,methodNames:Un},Oc=dm,qs=(function(g){return g[g.On=0]="On",g[g.Off=1]="Off",g})(qs||{}),oo=(function(){function g(m,w,S,k){o(this,g),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new tr,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=w.actions,this.target=m,this._context=w.context||S,this._win=U(tt(m)?this._context:m),this._doc=this._win.document,this._scopeEvents=k,this.set(w)}return d(g,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(m,w){return O.func(w.onstart)&&this.on("".concat(m,"start"),w.onstart),O.func(w.onmove)&&this.on("".concat(m,"move"),w.onmove),O.func(w.onend)&&this.on("".concat(m,"end"),w.onend),O.func(w.oninertiastart)&&this.on("".concat(m,"inertiastart"),w.oninertiastart),this}},{key:"updatePerActionListeners",value:function(m,w,S){var k,C=this,P=(k=this._actions.map[m])==null?void 0:k.filterEventType,B=function(Y){return(P==null||P(Y))&&sa(Y,C._actions)};(O.array(w)||O.object(w))&&this._onOff(qs.Off,m,w,void 0,B),(O.array(S)||O.object(S))&&this._onOff(qs.On,m,S,void 0,B)}},{key:"setPerAction",value:function(m,w){var S=this._defaults;for(var k in w){var C=k,P=this.options[m],B=w[C];C==="listeners"&&this.updatePerActionListeners(m,P.listeners,B),O.array(B)?P[C]=zn(B):O.plainObject(B)?(P[C]=Te(P[C]||{},Ka(B)),O.object(S.perAction[C])&&"enabled"in S.perAction[C]&&(P[C].enabled=B.enabled!==!1)):O.bool(B)&&O.object(S.perAction[C])?P[C].enabled=B:P[C]=B}}},{key:"getRect",value:function(m){return m=m||(O.element(this.target)?this.target:null),O.string(this.target)&&(m=m||this._context.querySelector(this.target)),Se(m)}},{key:"rectChecker",value:function(m){var w=this;return O.func(m)?(this.getRect=function(S){var k=Te({},m.apply(w,S));return"width"in k||(k.width=k.right-k.left,k.height=k.bottom-k.top),k},this):m===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(m,w){if(tt(w)||O.object(w)){for(var S in this.options[m]=w,this._actions.map)this.options[S][m]=w;return this}return this.options[m]}},{key:"origin",value:function(m){return this._backCompatOption("origin",m)}},{key:"deltaSource",value:function(m){return m==="page"||m==="client"?(this.options.deltaSource=m,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var m=this.target;return O.string(m)?Array.from(this._context.querySelectorAll(m)):O.func(m)&&m.getAllElements?m.getAllElements():O.element(m)?[m]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(m){return this._context===m.ownerDocument||X(this._context,m)}},{key:"testIgnoreAllow",value:function(m,w,S){return!this.testIgnore(m.ignoreFrom,w,S)&&this.testAllow(m.allowFrom,w,S)}},{key:"testAllow",value:function(m,w,S){return!m||!!O.element(S)&&(O.string(m)?xe(S,m,w):!!O.element(m)&&X(m,S))}},{key:"testIgnore",value:function(m,w,S){return!(!m||!O.element(S))&&(O.string(m)?xe(S,m,w):!!O.element(m)&&X(m,S))}},{key:"fire",value:function(m){return this.events.fire(m),this}},{key:"_onOff",value:function(m,w,S,k,C){O.object(w)&&!O.array(w)&&(k=S,S=null);var P=fn(w,S,C);for(var B in P){B==="wheel"&&(B=W.wheelEvent);for(var Y=0,K=P[B];Y<K.length;Y++){var $=K[Y];sa(B,this._actions)?this.events[m===qs.On?"on":"off"](B,$):O.string(this.target)?this._scopeEvents[m===qs.On?"addDelegate":"removeDelegate"](this.target,this._context,B,$,k):this._scopeEvents[m===qs.On?"add":"remove"](this.target,B,$,k)}}return this}},{key:"on",value:function(m,w,S){return this._onOff(qs.On,m,w,S)}},{key:"off",value:function(m,w,S){return this._onOff(qs.Off,m,w,S)}},{key:"set",value:function(m){var w=this._defaults;for(var S in O.object(m)||(m={}),this.options=Ka(w.base),this._actions.methodDict){var k=S,C=this._actions.methodDict[k];this.options[k]={},this.setPerAction(k,Te(Te({},w.perAction),w.actions[k])),this[C](m[k])}for(var P in m)P!=="getRect"?O.func(this[P])&&this[P](m[P]):this.rectChecker(m.getRect);return this}},{key:"unset",value:function(){if(O.string(this.target))for(var m in this._scopeEvents.delegatedEvents)for(var w=this._scopeEvents.delegatedEvents[m],S=w.length-1;S>=0;S--){var k=w[S],C=k.selector,P=k.context,B=k.listeners;C===this.target&&P===this._context&&w.splice(S,1);for(var Y=B.length-1;Y>=0;Y--)this._scopeEvents.removeDelegate(this.target,this._context,m,B[Y][0],B[Y][1])}else this._scopeEvents.remove(this.target,"all")}}]),g})(),nl=(function(){function g(m){var w=this;o(this,g),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=m,m.addListeners({"interactable:unset":function(S){var k=S.interactable,C=k.target,P=O.string(C)?w.selectorMap[C]:C[w.scope.id],B=hi(P,function(Y){return Y===k});P.splice(B,1)}})}return d(g,[{key:"new",value:function(m,w){w=Te(w||{},{actions:this.scope.actions});var S=new this.scope.Interactable(m,w,this.scope.document,this.scope.events);return this.scope.addDocument(S._doc),this.list.push(S),O.string(m)?(this.selectorMap[m]||(this.selectorMap[m]=[]),this.selectorMap[m].push(S)):(S.target[this.scope.id]||Object.defineProperty(m,this.scope.id,{value:[],configurable:!0}),m[this.scope.id].push(S)),this.scope.fire("interactable:new",{target:m,options:w,interactable:S,win:this.scope._win}),S}},{key:"getExisting",value:function(m,w){var S=w&&w.context||this.scope.document,k=O.string(m),C=k?this.selectorMap[m]:m[this.scope.id];if(C)return Ei(C,function(P){return P._context===S&&(k||P.inContext(m))})}},{key:"forEachMatch",value:function(m,w){for(var S=0,k=this.list;S<k.length;S++){var C=k[S],P=void 0;if((O.string(C.target)?O.element(m)&&me(m,C.target):m===C.target)&&C.inContext(m)&&(P=w(C)),P!==void 0)return P}}}]),g})(),Id=(function(){function g(){var m=this;o(this,g),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=W,this.defaults=Ka(Nc),this.Eventable=tr,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(function(S){var k=function C(P,B){var Y=S.interactables.getExisting(P,B);return Y||((Y=S.interactables.new(P,B)).events.global=C.globalEvents),Y};return k.getPointerAverage=Is,k.getTouchBBox=gs,k.getTouchDistance=di,k.getTouchAngle=ts,k.getElementRect=Se,k.getElementClientRect=pe,k.matchesSelector=me,k.closest=ae,k.globalEvents={},k.version="1.10.27",k.scope=S,k.use=function(C,P){return this.scope.usePlugin(C,P),this},k.isSet=function(C,P){return!!this.scope.interactables.get(C,P&&P.context)},k.on=Dt(function(C,P,B){if(O.string(C)&&C.search(" ")!==-1&&(C=C.trim().split(/ +/)),O.array(C)){for(var Y=0,K=C;Y<K.length;Y++){var $=K[Y];this.on($,P,B)}return this}if(O.object(C)){for(var ne in C)this.on(ne,C[ne],P);return this}return sa(C,this.scope.actions)?this.globalEvents[C]?this.globalEvents[C].push(P):this.globalEvents[C]=[P]:this.scope.events.add(this.scope.document,C,P,{options:B}),this},"The interact.on() method is being deprecated"),k.off=Dt(function(C,P,B){if(O.string(C)&&C.search(" ")!==-1&&(C=C.trim().split(/ +/)),O.array(C)){for(var Y=0,K=C;Y<K.length;Y++){var $=K[Y];this.off($,P,B)}return this}if(O.object(C)){for(var ne in C)this.off(ne,C[ne],P);return this}var ye;return sa(C,this.scope.actions)?C in this.globalEvents&&(ye=this.globalEvents[C].indexOf(P))!==-1&&this.globalEvents[C].splice(ye,1):this.scope.events.remove(this.scope.document,C,P,B),this},"The interact.off() method is being deprecated"),k.debug=function(){return this.scope},k.supportsTouch=function(){return W.supportsTouch},k.supportsPointerEvent=function(){return W.supportsPointerEvent},k.stop=function(){for(var C=0,P=this.scope.interactions.list;C<P.length;C++)P[C].stop();return this},k.pointerMoveTolerance=function(C){return O.number(C)?(this.scope.interactions.pointerMoveTolerance=C,this):this.scope.interactions.pointerMoveTolerance},k.addDocument=function(C,P){this.scope.addDocument(C,P)},k.removeDocument=function(C){this.scope.removeDocument(C)},k})(this),this.InteractEvent=Li,this.Interactable=void 0,this.interactables=new nl(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(S){return m.removeDocument(S.target)};var w=this;this.Interactable=(function(S){p(C,S);var k=j(C);function C(){return o(this,C),k.apply(this,arguments)}return d(C,[{key:"_defaults",get:function(){return w.defaults}},{key:"set",value:function(P){return T(x(C.prototype),"set",this).call(this,P),w.fire("interactable:set",{options:P,interactable:this}),this}},{key:"unset",value:function(){T(x(C.prototype),"unset",this).call(this);var P=w.interactables.list.indexOf(this);P<0||(w.interactables.list.splice(P,1),w.fire("interactable:unset",{interactable:this}))}}]),C})(oo)}return d(g,[{key:"addListeners",value:function(m,w){this.listenerMaps.push({id:w,map:m})}},{key:"fire",value:function(m,w){for(var S=0,k=this.listenerMaps;S<k.length;S++){var C=k[S].map[m];if(C&&C(w,this,m)===!1)return!1}}},{key:"init",value:function(m){return this.isInitialized?this:(function(w,S){return w.isInitialized=!0,O.window(S)&&z(S),te.init(S),W.init(S),Qe.init(S),w.window=S,w.document=S.document,w.usePlugin(Oc),w.usePlugin(Hd),w})(this,m)}},{key:"pluginIsInstalled",value:function(m){var w=m.id;return w?!!this._plugins.map[w]:this._plugins.list.indexOf(m)!==-1}},{key:"usePlugin",value:function(m,w){if(!this.isInitialized)return this;if(this.pluginIsInstalled(m))return this;if(m.id&&(this._plugins.map[m.id]=m),this._plugins.list.push(m),m.install&&m.install(this,w),m.listeners&&m.before){for(var S=0,k=this.listenerMaps.length,C=m.before.reduce(function(B,Y){return B[Y]=!0,B[Yd(Y)]=!0,B},{});S<k;S++){var P=this.listenerMaps[S].id;if(P&&(C[P]||C[Yd(P)]))break}this.listenerMaps.splice(S,0,{id:m.id,map:m.listeners})}else m.listeners&&this.listenerMaps.push({id:m.id,map:m.listeners});return this}},{key:"addDocument",value:function(m,w){if(this.getDocIndex(m)!==-1)return!1;var S=U(m);w=w?Te({},w):{},this.documents.push({doc:m,options:w}),this.events.documents.push(m),m!==this.document&&this.events.add(S,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:m,window:S,scope:this,options:w})}},{key:"removeDocument",value:function(m){var w=this.getDocIndex(m),S=U(m),k=this.documents[w].options;this.events.remove(S,"unload",this.onWindowUnload),this.documents.splice(w,1),this.events.documents.splice(w,1),this.fire("scope:remove-document",{doc:m,window:S,scope:this,options:k})}},{key:"getDocIndex",value:function(m){for(var w=0;w<this.documents.length;w++)if(this.documents[w].doc===m)return w;return-1}},{key:"getDocOptions",value:function(m){var w=this.getDocIndex(m);return w===-1?null:this.documents[w].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),g})();function Yd(g){return g&&g.replace(/\/.*$/,"")}var Wd=new Id,$n=Wd.interactStatic,Rc=typeof globalThis<"u"?globalThis:window;Wd.init(Rc);var hm=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(g){var m=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(S){var k=S[0],C=S[1];return k in g||C in g}),w=function(S,k){for(var C=g.range,P=g.limits,B=P===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:P,Y=g.offset,K=Y===void 0?{x:0,y:0}:Y,$={range:C,grid:g,x:null,y:null},ne=0;ne<m.length;ne++){var ye=m[ne],Ne=ye[0],ke=ye[1],Ce=Math.round((S-K.x)/g[Ne]),Be=Math.round((k-K.y)/g[ke]);$[Ne]=Math.max(B.left,Math.min(B.right,Ce*g[Ne]+K.x)),$[ke]=Math.max(B.top,Math.min(B.bottom,Be*g[ke]+K.y))}return $};return w.grid=g,w.coordFields=m,w}}),fm={id:"snappers",install:function(g){var m=g.interactStatic;m.snappers=Te(m.snappers||{},hm),m.createSnapGrid=m.snappers.grid}},pm=fm,mm={start:function(g){var m=g.state,w=g.rect,S=g.edges,k=g.pageCoords,C=m.options,P=C.ratio,B=C.enabled,Y=m.options,K=Y.equalDelta,$=Y.modifiers;P==="preserve"&&(P=w.width/w.height),m.startCoords=Te({},k),m.startRect=Te({},w),m.ratio=P,m.equalDelta=K;var ne=m.linkedEdges={top:S.top||S.left&&!S.bottom,left:S.left||S.top&&!S.right,bottom:S.bottom||S.right&&!S.top,right:S.right||S.bottom&&!S.left};if(m.xIsPrimaryAxis=!(!S.left&&!S.right),m.equalDelta){var ye=(ne.left?1:-1)*(ne.top?1:-1);m.edgeSign={x:ye,y:ye}}else m.edgeSign={x:ne.left?-1:1,y:ne.top?-1:1};if(B!==!1&&Te(S,ne),$!=null&&$.length){var Ne=new ns(g.interaction);Ne.copyFrom(g.interaction.modification),Ne.prepareStates($),m.subModification=Ne,Ne.startAll(s({},g))}},set:function(g){var m=g.state,w=g.rect,S=g.coords,k=m.linkedEdges,C=Te({},S),P=m.equalDelta?gm:$d;if(Te(g.edges,k),P(m,m.xIsPrimaryAxis,S,w),!m.subModification)return null;var B=Te({},w);Mt(k,B,{x:S.x-C.x,y:S.y-C.y});var Y=m.subModification.setAll(s(s({},g),{},{rect:B,edges:k,pageCoords:S,prevCoords:S,prevRect:B})),K=Y.delta;return Y.changed&&(P(m,Math.abs(K.x)>Math.abs(K.y),Y.coords,Y.rect),Te(S,Y.coords)),Y.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function gm(g,m,w){var S=g.startCoords,k=g.edgeSign;m?w.y=S.y+(w.x-S.x)*k.y:w.x=S.x+(w.y-S.y)*k.x}function $d(g,m,w,S){var k=g.startRect,C=g.startCoords,P=g.ratio,B=g.edgeSign;if(m){var Y=S.width/P;w.y=C.y+(Y-k.height)*B.y}else{var K=S.height*P;w.x=C.x+(K-k.width)*B.x}}var xm=gi(mm,"aspectRatio"),qd=function(){};qd._defaults={};var sl=qd;function ca(g,m,w){return O.func(g)?gt(g,m.interactable,m.element,[w.x,w.y,m]):gt(g,m.interactable,m.element)}var sr={start:function(g){var m=g.rect,w=g.startOffset,S=g.state,k=g.interaction,C=g.pageCoords,P=S.options,B=P.elementRect,Y=Te({left:0,top:0,right:0,bottom:0},P.offset||{});if(m&&B){var K=ca(P.restriction,k,C);if(K){var $=K.right-K.left-m.width,ne=K.bottom-K.top-m.height;$<0&&(Y.left+=$,Y.right+=$),ne<0&&(Y.top+=ne,Y.bottom+=ne)}Y.left+=w.left-m.width*B.left,Y.top+=w.top-m.height*B.top,Y.right+=w.right-m.width*(1-B.right),Y.bottom+=w.bottom-m.height*(1-B.bottom)}S.offset=Y},set:function(g){var m=g.coords,w=g.interaction,S=g.state,k=S.options,C=S.offset,P=ca(k.restriction,w,m);if(P){var B=(function(Y){return!Y||"left"in Y&&"top"in Y||((Y=Te({},Y)).left=Y.x||0,Y.top=Y.y||0,Y.right=Y.right||Y.left+Y.width,Y.bottom=Y.bottom||Y.top+Y.height),Y})(P);m.x=Math.max(Math.min(B.right-C.right,m.x),B.left+C.left),m.y=Math.max(Math.min(B.bottom-C.bottom,m.y),B.top+C.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},ym=gi(sr,"restrict"),Gd={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Xd={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Pc(g,m){for(var w=0,S=["top","left","bottom","right"];w<S.length;w++){var k=S[w];k in g||(g[k]=m[k])}return g}var lo={noInner:Gd,noOuter:Xd,start:function(g){var m,w=g.interaction,S=g.startOffset,k=g.state,C=k.options;C&&(m=_t(ca(C.offset,w,w.coords.start.page))),m=m||{x:0,y:0},k.offset={top:m.y+S.top,left:m.x+S.left,bottom:m.y-S.bottom,right:m.x-S.right}},set:function(g){var m=g.coords,w=g.edges,S=g.interaction,k=g.state,C=k.offset,P=k.options;if(w){var B=Te({},m),Y=ca(P.inner,S,B)||{},K=ca(P.outer,S,B)||{};Pc(Y,Gd),Pc(K,Xd),w.top?m.y=Math.min(Math.max(K.top+C.top,B.y),Y.top+C.top):w.bottom&&(m.y=Math.max(Math.min(K.bottom+C.bottom,B.y),Y.bottom+C.bottom)),w.left?m.x=Math.min(Math.max(K.left+C.left,B.x),Y.left+C.left):w.right&&(m.x=Math.max(Math.min(K.right+C.right,B.x),Y.right+C.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},vm=gi(lo,"restrictEdges"),bm=Te({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(g){}},sr.defaults),_m=gi({start:sr.start,set:sr.set,defaults:bm},"restrictRect"),wm={width:-1/0,height:-1/0},Sm={width:1/0,height:1/0},jm=gi({start:function(g){return lo.start(g)},set:function(g){var m=g.interaction,w=g.state,S=g.rect,k=g.edges,C=w.options;if(k){var P=Bt(ca(C.min,m,g.coords))||wm,B=Bt(ca(C.max,m,g.coords))||Sm;w.options={endOnly:C.endOnly,inner:Te({},lo.noInner),outer:Te({},lo.noOuter)},k.top?(w.options.inner.top=S.bottom-P.height,w.options.outer.top=S.bottom-B.height):k.bottom&&(w.options.inner.bottom=S.top+P.height,w.options.outer.bottom=S.top+B.height),k.left?(w.options.inner.left=S.right-P.width,w.options.outer.left=S.right-B.width):k.right&&(w.options.inner.right=S.left+P.width,w.options.outer.right=S.left+B.width),lo.set(g),w.options=C}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Lc={start:function(g){var m,w=g.interaction,S=g.interactable,k=g.element,C=g.rect,P=g.state,B=g.startOffset,Y=P.options,K=Y.offsetWithOrigin?(function(ye){var Ne=ye.interaction.element,ke=_t(gt(ye.state.options.origin,null,null,[Ne])),Ce=ke||st(ye.interactable,Ne,ye.interaction.prepared.name);return Ce})(g):{x:0,y:0};if(Y.offset==="startCoords")m={x:w.coords.start.page.x,y:w.coords.start.page.y};else{var $=gt(Y.offset,S,k,[w]);(m=_t($)||{x:0,y:0}).x+=K.x,m.y+=K.y}var ne=Y.relativePoints;P.offsets=C&&ne&&ne.length?ne.map(function(ye,Ne){return{index:Ne,relativePoint:ye,x:B.left-C.width*ye.x+m.x,y:B.top-C.height*ye.y+m.y}}):[{index:0,relativePoint:null,x:m.x,y:m.y}]},set:function(g){var m=g.interaction,w=g.coords,S=g.state,k=S.options,C=S.offsets,P=st(m.interactable,m.element,m.prepared.name),B=Te({},w),Y=[];k.offsetWithOrigin||(B.x-=P.x,B.y-=P.y);for(var K=0,$=C;K<$.length;K++)for(var ne=$[K],ye=B.x-ne.x,Ne=B.y-ne.y,ke=0,Ce=k.targets.length;ke<Ce;ke++){var Be=k.targets[ke],Le=void 0;(Le=O.func(Be)?Be(ye,Ne,m._proxy,ne,ke):Be)&&Y.push({x:(O.number(Le.x)?Le.x:ye)+ne.x,y:(O.number(Le.y)?Le.y:Ne)+ne.y,range:O.number(Le.range)?Le.range:k.range,source:Be,index:ke,offset:ne})}for(var Ye={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},nt=0;nt<Y.length;nt++){var ct=Y[nt],Xe=ct.range,it=ct.x-B.x,xn=ct.y-B.y,Pt=vn(it,xn),qn=Pt<=Xe;Xe===1/0&&Ye.inRange&&Ye.range!==1/0&&(qn=!1),Ye.target&&!(qn?Ye.inRange&&Xe!==1/0?Pt/Xe<Ye.distance/Ye.range:Xe===1/0&&Ye.range!==1/0||Pt<Ye.distance:!Ye.inRange&&Pt<Ye.distance)||(Ye.target=ct,Ye.distance=Pt,Ye.range=Xe,Ye.inRange=qn,Ye.delta.x=it,Ye.delta.y=xn)}return Ye.inRange&&(w.x=Ye.target.x,w.y=Ye.target.y),S.closest=Ye,Ye},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},km=gi(Lc,"snap"),ir={start:function(g){var m=g.state,w=g.edges,S=m.options;if(!w)return null;g.state={options:{targets:null,relativePoints:[{x:w.left?0:1,y:w.top?0:1}],offset:S.offset||"self",origin:{x:0,y:0},range:S.range}},m.targetFields=m.targetFields||[["width","height"],["x","y"]],Lc.start(g),m.offsets=g.state.offsets,g.state=m},set:function(g){var m=g.interaction,w=g.state,S=g.coords,k=w.options,C=w.offsets,P={x:S.x-C[0].x,y:S.y-C[0].y};w.options=Te({},k),w.options.targets=[];for(var B=0,Y=k.targets||[];B<Y.length;B++){var K=Y[B],$=void 0;if($=O.func(K)?K(P.x,P.y,m):K){for(var ne=0,ye=w.targetFields;ne<ye.length;ne++){var Ne=ye[ne],ke=Ne[0],Ce=Ne[1];if(ke in $||Ce in $){$.x=$[ke],$.y=$[Ce];break}}w.options.targets.push($)}}var Be=Lc.set(g);return w.options=k,Be},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},co=gi(ir,"snapSize"),zc={aspectRatio:xm,restrictEdges:vm,restrict:ym,restrictRect:_m,restrictSize:jm,snapEdges:gi({start:function(g){var m=g.edges;return m?(g.state.targetFields=g.state.targetFields||[[m.left?"left":"right",m.top?"top":"bottom"]],ir.start(g)):null},set:ir.set,defaults:Te(Ka(ir.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:km,snapSize:co,spring:sl,avoid:sl,transform:sl,rubberband:sl},Kd={id:"modifiers",install:function(g){var m=g.interactStatic;for(var w in g.usePlugin(Tc),g.usePlugin(pm),m.modifiers=zc,zc){var S=zc[w],k=S._defaults,C=S._methods;k._methods=C,g.defaults.perAction[w]=k}}},Zd=Kd,Bc=(function(g){p(w,g);var m=j(w);function w(S,k,C,P,B,Y){var K;if(o(this,w),Hn(b(K=m.call(this,B)),C),C!==k&&Hn(b(K),k),K.timeStamp=Y,K.originalEvent=C,K.type=S,K.pointerId=ot(k),K.pointerType=xs(k),K.target=P,K.currentTarget=null,S==="tap"){var $=B.getPointerIndex(k);K.dt=K.timeStamp-B.pointers[$].downTime;var ne=K.timeStamp-B.tapTime;K.double=!!B.prevTap&&B.prevTap.type!=="doubletap"&&B.prevTap.target===K.target&&ne<500}else S==="doubletap"&&(K.dt=k.timeStamp-B.tapTime,K.double=!0);return K}return d(w,[{key:"_subtractOrigin",value:function(S){var k=S.x,C=S.y;return this.pageX-=k,this.pageY-=C,this.clientX-=k,this.clientY-=C,this}},{key:"_addOrigin",value:function(S){var k=S.x,C=S.y;return this.pageX+=k,this.pageY+=C,this.clientX+=k,this.clientY+=C,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),w})($t),ar={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(g){g.pointerEvents=ar,g.defaults.actions.pointerEvents=ar.defaults,Te(g.actions.phaselessTypes,ar.types)},listeners:{"interactions:new":function(g){var m=g.interaction;m.prevTap=null,m.tapTime=0},"interactions:update-pointer":function(g){var m=g.down,w=g.pointerInfo;!m&&w.hold||(w.hold={duration:1/0,timeout:null})},"interactions:move":function(g,m){var w=g.interaction,S=g.pointer,k=g.event,C=g.eventTarget;g.duplicate||w.pointerIsDown&&!w.pointerWasMoved||(w.pointerIsDown&&Vc(g),vi({interaction:w,pointer:S,event:k,eventTarget:C,type:"move"},m))},"interactions:down":function(g,m){(function(w,S){for(var k=w.interaction,C=w.pointer,P=w.event,B=w.eventTarget,Y=w.pointerIndex,K=k.pointers[Y].hold,$=Ue(B),ne={interaction:k,pointer:C,event:P,eventTarget:B,type:"hold",targets:[],path:$,node:null},ye=0;ye<$.length;ye++){var Ne=$[ye];ne.node=Ne,S.fire("pointerEvents:collect-targets",ne)}if(ne.targets.length){for(var ke=1/0,Ce=0,Be=ne.targets;Ce<Be.length;Ce++){var Le=Be[Ce].eventable.options.holdDuration;Le<ke&&(ke=Le)}K.duration=ke,K.timeout=setTimeout(function(){vi({interaction:k,eventTarget:B,pointer:C,event:P,type:"hold"},S)},ke)}})(g,m),vi(g,m)},"interactions:up":function(g,m){Vc(g),vi(g,m),(function(w,S){var k=w.interaction,C=w.pointer,P=w.event,B=w.eventTarget;k.pointerWasMoved||vi({interaction:k,eventTarget:B,pointer:C,event:P,type:"tap"},S)})(g,m)},"interactions:cancel":function(g,m){Vc(g),vi(g,m)}},PointerEvent:Bc,fire:vi,collectEventTargets:ua,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function vi(g,m){var w=g.interaction,S=g.pointer,k=g.event,C=g.eventTarget,P=g.type,B=g.targets,Y=B===void 0?ua(g,m):B,K=new Bc(P,S,k,C,w,m.now());m.fire("pointerEvents:new",{pointerEvent:K});for(var $={interaction:w,pointer:S,event:k,eventTarget:C,targets:Y,type:P,pointerEvent:K},ne=0;ne<Y.length;ne++){var ye=Y[ne];for(var Ne in ye.props||{})K[Ne]=ye.props[Ne];var ke=st(ye.eventable,ye.node);if(K._subtractOrigin(ke),K.eventable=ye.eventable,K.currentTarget=ye.node,ye.eventable.fire(K),K._addOrigin(ke),K.immediatePropagationStopped||K.propagationStopped&&ne+1<Y.length&&Y[ne+1].node!==K.currentTarget)break}if(m.fire("pointerEvents:fired",$),P==="tap"){var Ce=K.double?vi({interaction:w,pointer:S,event:k,eventTarget:C,type:"doubletap"},m):K;w.prevTap=Ce,w.tapTime=Ce.timeStamp}return K}function ua(g,m){var w=g.interaction,S=g.pointer,k=g.event,C=g.eventTarget,P=g.type,B=w.getPointerIndex(S),Y=w.pointers[B];if(P==="tap"&&(w.pointerWasMoved||!Y||Y.downTarget!==C))return[];for(var K=Ue(C),$={interaction:w,pointer:S,event:k,eventTarget:C,type:P,path:K,targets:[],node:null},ne=0;ne<K.length;ne++){var ye=K[ne];$.node=ye,m.fire("pointerEvents:collect-targets",$)}return P==="hold"&&($.targets=$.targets.filter(function(Ne){var ke,Ce;return Ne.eventable.options.holdDuration===((ke=w.pointers[B])==null||(Ce=ke.hold)==null?void 0:Ce.duration)})),$.targets}function Vc(g){var m=g.interaction,w=g.pointerIndex,S=m.pointers[w].hold;S&&S.timeout&&(clearTimeout(S.timeout),S.timeout=null)}var Tm=Object.freeze({__proto__:null,default:ar});function Nm(g){var m=g.interaction;m.holdIntervalHandle&&(clearInterval(m.holdIntervalHandle),m.holdIntervalHandle=null)}var Qd={id:"pointer-events/holdRepeat",install:function(g){g.usePlugin(ar);var m=g.pointerEvents;m.defaults.holdRepeatInterval=0,m.types.holdrepeat=g.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(g,m){return g["pointerEvents:".concat(m)]=Nm,g},{"pointerEvents:new":function(g){var m=g.pointerEvent;m.type==="hold"&&(m.count=(m.count||0)+1)},"pointerEvents:fired":function(g,m){var w=g.interaction,S=g.pointerEvent,k=g.eventTarget,C=g.targets;if(S.type==="hold"&&C.length){var P=C[0].eventable.options.holdRepeatInterval;P<=0||(w.holdIntervalHandle=setTimeout(function(){m.pointerEvents.fire({interaction:w,eventTarget:k,type:"hold",pointer:S,event:S},m)},P))}}})},Jd=Qd,uo={id:"pointer-events/interactableTargets",install:function(g){var m=g.Interactable;m.prototype.pointerEvents=function(S){return Te(this.events.options,S),this};var w=m.prototype._backCompatOption;m.prototype._backCompatOption=function(S,k){var C=w.call(this,S,k);return C===this&&(this.events.options[S]=k),C}},listeners:{"pointerEvents:collect-targets":function(g,m){var w=g.targets,S=g.node,k=g.type,C=g.eventTarget;m.interactables.forEachMatch(S,function(P){var B=P.events,Y=B.options;B.types[k]&&B.types[k].length&&P.testIgnoreAllow(Y,S,C)&&w.push({node:S,eventable:B,props:{interactable:P}})})},"interactable:new":function(g){var m=g.interactable;m.events.getRect=function(w){return m.getRect(w)}},"interactable:set":function(g,m){var w=g.interactable,S=g.options;Te(w.events.options,m.pointerEvents.defaults),Te(w.events.options,S.pointerEvents||{})}}},ho=uo,Mm={id:"pointer-events",install:function(g){g.usePlugin(Tm),g.usePlugin(Jd),g.usePlugin(ho)}},il=Mm,eh={id:"reflow",install:function(g){var m=g.Interactable;g.actions.phases.reflow=!0,m.prototype.reflow=function(w){return(function(S,k,C){for(var P=S.getAllElements(),B=C.window.Promise,Y=B?[]:null,K=function(){var ne=P[$],ye=S.getRect(ne);if(!ye)return 1;var Ne,ke=Ei(C.interactions.list,function(Le){return Le.interacting()&&Le.interactable===S&&Le.element===ne&&Le.prepared.name===k.name});if(ke)ke.move(),Y&&(Ne=ke._reflowPromise||new B(function(Le){ke._reflowResolve=Le}));else{var Ce=Bt(ye),Be=(function(Le){return{coords:Le,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}})({page:{x:Ce.x,y:Ce.y},client:{x:Ce.x,y:Ce.y},timeStamp:C.now()});Ne=(function(Le,Ye,nt,ct,Xe){var it=Le.interactions.new({pointerType:"reflow"}),xn={interaction:it,event:Xe,pointer:Xe,eventTarget:nt,phase:"reflow"};it.interactable=Ye,it.element=nt,it.prevEvent=Xe,it.updatePointer(Xe,Xe,nt,!0),xt(it.coords.delta),fs(it.prepared,ct),it._doPhase(xn);var Pt=Le.window,qn=Pt.Promise,ws=qn?new qn(function(Gn){it._reflowResolve=Gn}):void 0;return it._reflowPromise=ws,it.start(ct,Ye,nt),it._interacting?(it.move(xn),it.end(Xe)):(it.stop(),it._reflowResolve()),it.removePointer(Xe,Xe),ws})(C,S,ne,k,Be)}Y&&Y.push(Ne)},$=0;$<P.length&&!K();$++);return Y&&B.all(Y).then(function(){return S})})(this,w,g)}},listeners:{"interactions:stop":function(g,m){var w=g.interaction;w.pointerType==="reflow"&&(w._reflowResolve&&w._reflowResolve(),(function(S,k){S.splice(S.indexOf(k),1)})(m.interactions.list,w))}}},th=eh;if($n.use(kc),$n.use(aa),$n.use(il),$n.use(yi),$n.use(Zd),$n.use(Bd),$n.use(je),$n.use(ln),$n.use(th),$n.default=$n,a(t)==="object"&&t)try{t.exports=$n}catch{}return $n.default=$n,$n})})(pp,pp.exports);var T9=pp.exports;const sy=Ad(T9);var ZM={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(Ho,function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(o,l,d){var h=l.prototype;d.utc=function(N){var M={date:N,utc:!0,args:arguments};return new l(M)},h.utc=function(N){var M=d(this.toDate(),{locale:this.$L,utc:!0});return N?M.add(this.utcOffset(),n):M},h.local=function(){return d(this.toDate(),{locale:this.$L,utc:!1})};var p=h.parse;h.parse=function(N){N.utc&&(this.$u=!0),this.$utils().u(N.$offset)||(this.$offset=N.$offset),p.call(this,N)};var x=h.init;h.init=function(){if(this.$u){var N=this.$d;this.$y=N.getUTCFullYear(),this.$M=N.getUTCMonth(),this.$D=N.getUTCDate(),this.$W=N.getUTCDay(),this.$H=N.getUTCHours(),this.$m=N.getUTCMinutes(),this.$s=N.getUTCSeconds(),this.$ms=N.getUTCMilliseconds()}else x.call(this)};var y=h.utcOffset;h.utcOffset=function(N,M){var R=this.$utils().u;if(R(N))return this.$u?0:R(this.$offset)?y.call(this):this.$offset;if(typeof N=="string"&&(N=(function(I){I===void 0&&(I="");var V=I.match(s);if(!V)return null;var O=(""+V[0]).match(a)||["-",0,0],q=O[0],Z=60*+O[1]+ +O[2];return Z===0?0:q==="+"?Z:-Z})(N),N===null))return this;var E=Math.abs(N)<=16?60*N:N;if(E===0)return this.utc(M);var z=this.clone();if(M)return z.$offset=E,z.$u=!1,z;var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(z=this.local().add(E+U,n)).$offset=E,z.$x.$localOffset=U,z};var b=h.format;h.format=function(N){var M=N||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return b.call(this,M)},h.valueOf=function(){var N=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*N},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var j=h.toDate;h.toDate=function(N){return N==="s"&&this.$offset?d(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():j.call(this)};var T=h.diff;h.diff=function(N,M,R){if(N&&this.$u===N.$u)return T.call(this,N,M,R);var E=this.local(),z=d(N).local();return T.call(E,z,M,R)}}})})(ZM);var N9=ZM.exports;const M9=Ad(N9);function D9(){this.__data__=[],this.size=0}var C9=D9;function E9(t,e){return t===e||t!==t&&e!==e}var QM=E9,A9=QM;function O9(t,e){for(var n=t.length;n--;)if(A9(t[n][0],e))return n;return-1}var Ip=O9,R9=Ip,P9=Array.prototype,L9=P9.splice;function z9(t){var e=this.__data__,n=R9(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():L9.call(e,n,1),--this.size,!0}var B9=z9,V9=Ip;function F9(t){var e=this.__data__,n=V9(e,t);return n<0?void 0:e[n][1]}var H9=F9,U9=Ip;function I9(t){return U9(this.__data__,t)>-1}var Y9=I9,W9=Ip;function $9(t,e){var n=this.__data__,s=W9(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}var q9=$9,G9=C9,X9=B9,K9=H9,Z9=Y9,Q9=q9;function dc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}dc.prototype.clear=G9;dc.prototype.delete=X9;dc.prototype.get=K9;dc.prototype.has=Z9;dc.prototype.set=Q9;var Yp=dc,J9=Yp;function eV(){this.__data__=new J9,this.size=0}var tV=eV;function nV(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var sV=nV;function iV(t){return this.__data__.get(t)}var aV=iV;function rV(t){return this.__data__.has(t)}var oV=rV,lV=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,JM=lV,cV=JM,uV=typeof self=="object"&&self&&self.Object===Object&&self,dV=cV||uV||Function("return this")(),$a=dV,hV=$a,fV=hV.Symbol,L0=fV,Ij=L0,eD=Object.prototype,pV=eD.hasOwnProperty,mV=eD.toString,Du=Ij?Ij.toStringTag:void 0;function gV(t){var e=pV.call(t,Du),n=t[Du];try{t[Du]=void 0;var s=!0}catch{}var a=mV.call(t);return s&&(e?t[Du]=n:delete t[Du]),a}var xV=gV,yV=Object.prototype,vV=yV.toString;function bV(t){return vV.call(t)}var _V=bV,Yj=L0,wV=xV,SV=_V,jV="[object Null]",kV="[object Undefined]",Wj=Yj?Yj.toStringTag:void 0;function TV(t){return t==null?t===void 0?kV:jV:Wj&&Wj in Object(t)?wV(t):SV(t)}var Wp=TV;function NV(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var tD=NV,MV=Wp,DV=tD,CV="[object AsyncFunction]",EV="[object Function]",AV="[object GeneratorFunction]",OV="[object Proxy]";function RV(t){if(!DV(t))return!1;var e=MV(t);return e==EV||e==AV||e==CV||e==OV}var nD=RV,PV=$a,LV=PV["__core-js_shared__"],zV=LV,iy=zV,$j=(function(){var t=/[^.]+$/.exec(iy&&iy.keys&&iy.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function BV(t){return!!$j&&$j in t}var VV=BV,FV=Function.prototype,HV=FV.toString;function UV(t){if(t!=null){try{return HV.call(t)}catch{}try{return t+""}catch{}}return""}var sD=UV,IV=nD,YV=VV,WV=tD,$V=sD,qV=/[\\^$.*+?()[\]{}|]/g,GV=/^\[object .+?Constructor\]$/,XV=Function.prototype,KV=Object.prototype,ZV=XV.toString,QV=KV.hasOwnProperty,JV=RegExp("^"+ZV.call(QV).replace(qV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eF(t){if(!WV(t)||YV(t))return!1;var e=IV(t)?JV:GV;return e.test($V(t))}var tF=eF;function nF(t,e){return t?.[e]}var sF=nF,iF=tF,aF=sF;function rF(t,e){var n=aF(t,e);return iF(n)?n:void 0}var hc=rF,oF=hc,lF=$a,cF=oF(lF,"Map"),z0=cF,uF=hc,dF=uF(Object,"create"),$p=dF,qj=$p;function hF(){this.__data__=qj?qj(null):{},this.size=0}var fF=hF;function pF(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var mF=pF,gF=$p,xF="__lodash_hash_undefined__",yF=Object.prototype,vF=yF.hasOwnProperty;function bF(t){var e=this.__data__;if(gF){var n=e[t];return n===xF?void 0:n}return vF.call(e,t)?e[t]:void 0}var _F=bF,wF=$p,SF=Object.prototype,jF=SF.hasOwnProperty;function kF(t){var e=this.__data__;return wF?e[t]!==void 0:jF.call(e,t)}var TF=kF,NF=$p,MF="__lodash_hash_undefined__";function DF(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=NF&&e===void 0?MF:e,this}var CF=DF,EF=fF,AF=mF,OF=_F,RF=TF,PF=CF;function fc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}fc.prototype.clear=EF;fc.prototype.delete=AF;fc.prototype.get=OF;fc.prototype.has=RF;fc.prototype.set=PF;var LF=fc,Gj=LF,zF=Yp,BF=z0;function VF(){this.size=0,this.__data__={hash:new Gj,map:new(BF||zF),string:new Gj}}var FF=VF;function HF(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var UF=HF,IF=UF;function YF(t,e){var n=t.__data__;return IF(e)?n[typeof e=="string"?"string":"hash"]:n.map}var qp=YF,WF=qp;function $F(t){var e=WF(this,t).delete(t);return this.size-=e?1:0,e}var qF=$F,GF=qp;function XF(t){return GF(this,t).get(t)}var KF=XF,ZF=qp;function QF(t){return ZF(this,t).has(t)}var JF=QF,eH=qp;function tH(t,e){var n=eH(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}var nH=tH,sH=FF,iH=qF,aH=KF,rH=JF,oH=nH;function pc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}pc.prototype.clear=sH;pc.prototype.delete=iH;pc.prototype.get=aH;pc.prototype.has=rH;pc.prototype.set=oH;var iD=pc,lH=Yp,cH=z0,uH=iD,dH=200;function hH(t,e){var n=this.__data__;if(n instanceof lH){var s=n.__data__;if(!cH||s.length<dH-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new uH(s)}return n.set(t,e),this.size=n.size,this}var fH=hH,pH=Yp,mH=tV,gH=sV,xH=aV,yH=oV,vH=fH;function mc(t){var e=this.__data__=new pH(t);this.size=e.size}mc.prototype.clear=mH;mc.prototype.delete=gH;mc.prototype.get=xH;mc.prototype.has=yH;mc.prototype.set=vH;var bH=mc,_H="__lodash_hash_undefined__";function wH(t){return this.__data__.set(t,_H),this}var SH=wH;function jH(t){return this.__data__.has(t)}var kH=jH,TH=iD,NH=SH,MH=kH;function mp(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new TH;++e<n;)this.add(t[e])}mp.prototype.add=mp.prototype.push=NH;mp.prototype.has=MH;var DH=mp;function CH(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}var EH=CH;function AH(t,e){return t.has(e)}var OH=AH,RH=DH,PH=EH,LH=OH,zH=1,BH=2;function VH(t,e,n,s,a,o){var l=n&zH,d=t.length,h=e.length;if(d!=h&&!(l&&h>d))return!1;var p=o.get(t),x=o.get(e);if(p&&x)return p==e&&x==t;var y=-1,b=!0,j=n&BH?new RH:void 0;for(o.set(t,e),o.set(e,t);++y<d;){var T=t[y],N=e[y];if(s)var M=l?s(N,T,y,e,t,o):s(T,N,y,t,e,o);if(M!==void 0){if(M)continue;b=!1;break}if(j){if(!PH(e,function(R,E){if(!LH(j,E)&&(T===R||a(T,R,n,s,o)))return j.push(E)})){b=!1;break}}else if(!(T===N||a(T,N,n,s,o))){b=!1;break}}return o.delete(t),o.delete(e),b}var aD=VH,FH=$a,HH=FH.Uint8Array,UH=HH;function IH(t){var e=-1,n=Array(t.size);return t.forEach(function(s,a){n[++e]=[a,s]}),n}var YH=IH;function WH(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var $H=WH,Xj=L0,Kj=UH,qH=QM,GH=aD,XH=YH,KH=$H,ZH=1,QH=2,JH="[object Boolean]",e7="[object Date]",t7="[object Error]",n7="[object Map]",s7="[object Number]",i7="[object RegExp]",a7="[object Set]",r7="[object String]",o7="[object Symbol]",l7="[object ArrayBuffer]",c7="[object DataView]",Zj=Xj?Xj.prototype:void 0,ay=Zj?Zj.valueOf:void 0;function u7(t,e,n,s,a,o,l){switch(n){case c7:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case l7:return!(t.byteLength!=e.byteLength||!o(new Kj(t),new Kj(e)));case JH:case e7:case s7:return qH(+t,+e);case t7:return t.name==e.name&&t.message==e.message;case i7:case r7:return t==e+"";case n7:var d=XH;case a7:var h=s&ZH;if(d||(d=KH),t.size!=e.size&&!h)return!1;var p=l.get(t);if(p)return p==e;s|=QH,l.set(t,e);var x=GH(d(t),d(e),s,a,o,l);return l.delete(t),x;case o7:if(ay)return ay.call(t)==ay.call(e)}return!1}var d7=u7;function h7(t,e){for(var n=-1,s=e.length,a=t.length;++n<s;)t[a+n]=e[n];return t}var f7=h7,p7=Array.isArray,B0=p7,m7=f7,g7=B0;function x7(t,e,n){var s=e(t);return g7(t)?s:m7(s,n(t))}var y7=x7;function v7(t,e){for(var n=-1,s=t==null?0:t.length,a=0,o=[];++n<s;){var l=t[n];e(l,n,t)&&(o[a++]=l)}return o}var b7=v7;function _7(){return[]}var w7=_7,S7=b7,j7=w7,k7=Object.prototype,T7=k7.propertyIsEnumerable,Qj=Object.getOwnPropertySymbols,N7=Qj?function(t){return t==null?[]:(t=Object(t),S7(Qj(t),function(e){return T7.call(t,e)}))}:j7,M7=N7;function D7(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var C7=D7;function E7(t){return t!=null&&typeof t=="object"}var Gp=E7,A7=Wp,O7=Gp,R7="[object Arguments]";function P7(t){return O7(t)&&A7(t)==R7}var L7=P7,Jj=L7,z7=Gp,rD=Object.prototype,B7=rD.hasOwnProperty,V7=rD.propertyIsEnumerable,F7=Jj((function(){return arguments})())?Jj:function(t){return z7(t)&&B7.call(t,"callee")&&!V7.call(t,"callee")},H7=F7,gp={exports:{}};function U7(){return!1}var I7=U7;gp.exports;(function(t,e){var n=$a,s=I7,a=e&&!e.nodeType&&e,o=a&&!0&&t&&!t.nodeType&&t,l=o&&o.exports===a,d=l?n.Buffer:void 0,h=d?d.isBuffer:void 0,p=h||s;t.exports=p})(gp,gp.exports);var oD=gp.exports,Y7=9007199254740991,W7=/^(?:0|[1-9]\d*)$/;function $7(t,e){var n=typeof t;return e=e??Y7,!!e&&(n=="number"||n!="symbol"&&W7.test(t))&&t>-1&&t%1==0&&t<e}var q7=$7,G7=9007199254740991;function X7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=G7}var lD=X7,K7=Wp,Z7=lD,Q7=Gp,J7="[object Arguments]",eU="[object Array]",tU="[object Boolean]",nU="[object Date]",sU="[object Error]",iU="[object Function]",aU="[object Map]",rU="[object Number]",oU="[object Object]",lU="[object RegExp]",cU="[object Set]",uU="[object String]",dU="[object WeakMap]",hU="[object ArrayBuffer]",fU="[object DataView]",pU="[object Float32Array]",mU="[object Float64Array]",gU="[object Int8Array]",xU="[object Int16Array]",yU="[object Int32Array]",vU="[object Uint8Array]",bU="[object Uint8ClampedArray]",_U="[object Uint16Array]",wU="[object Uint32Array]",nn={};nn[pU]=nn[mU]=nn[gU]=nn[xU]=nn[yU]=nn[vU]=nn[bU]=nn[_U]=nn[wU]=!0;nn[J7]=nn[eU]=nn[hU]=nn[tU]=nn[fU]=nn[nU]=nn[sU]=nn[iU]=nn[aU]=nn[rU]=nn[oU]=nn[lU]=nn[cU]=nn[uU]=nn[dU]=!1;function SU(t){return Q7(t)&&Z7(t.length)&&!!nn[K7(t)]}var jU=SU;function kU(t){return function(e){return t(e)}}var TU=kU,xp={exports:{}};xp.exports;(function(t,e){var n=JM,s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o&&n.process,d=(function(){try{var h=a&&a.require&&a.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}})();t.exports=d})(xp,xp.exports);var NU=xp.exports,MU=jU,DU=TU,ek=NU,tk=ek&&ek.isTypedArray,CU=tk?DU(tk):MU,cD=CU,EU=C7,AU=H7,OU=B0,RU=oD,PU=q7,LU=cD,zU=Object.prototype,BU=zU.hasOwnProperty;function VU(t,e){var n=OU(t),s=!n&&AU(t),a=!n&&!s&&RU(t),o=!n&&!s&&!a&&LU(t),l=n||s||a||o,d=l?EU(t.length,String):[],h=d.length;for(var p in t)(e||BU.call(t,p))&&!(l&&(p=="length"||a&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||PU(p,h)))&&d.push(p);return d}var FU=VU,HU=Object.prototype;function UU(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||HU;return t===n}var IU=UU;function YU(t,e){return function(n){return t(e(n))}}var WU=YU,$U=WU,qU=$U(Object.keys,Object),GU=qU,XU=IU,KU=GU,ZU=Object.prototype,QU=ZU.hasOwnProperty;function JU(t){if(!XU(t))return KU(t);var e=[];for(var n in Object(t))QU.call(t,n)&&n!="constructor"&&e.push(n);return e}var eI=JU,tI=nD,nI=lD;function sI(t){return t!=null&&nI(t.length)&&!tI(t)}var iI=sI,aI=FU,rI=eI,oI=iI;function lI(t){return oI(t)?aI(t):rI(t)}var cI=lI,uI=y7,dI=M7,hI=cI;function fI(t){return uI(t,hI,dI)}var pI=fI,nk=pI,mI=1,gI=Object.prototype,xI=gI.hasOwnProperty;function yI(t,e,n,s,a,o){var l=n&mI,d=nk(t),h=d.length,p=nk(e),x=p.length;if(h!=x&&!l)return!1;for(var y=h;y--;){var b=d[y];if(!(l?b in e:xI.call(e,b)))return!1}var j=o.get(t),T=o.get(e);if(j&&T)return j==e&&T==t;var N=!0;o.set(t,e),o.set(e,t);for(var M=l;++y<h;){b=d[y];var R=t[b],E=e[b];if(s)var z=l?s(E,R,b,e,t,o):s(R,E,b,t,e,o);if(!(z===void 0?R===E||a(R,E,n,s,o):z)){N=!1;break}M||(M=b=="constructor")}if(N&&!M){var U=t.constructor,I=e.constructor;U!=I&&"constructor"in t&&"constructor"in e&&!(typeof U=="function"&&U instanceof U&&typeof I=="function"&&I instanceof I)&&(N=!1)}return o.delete(t),o.delete(e),N}var vI=yI,bI=hc,_I=$a,wI=bI(_I,"DataView"),SI=wI,jI=hc,kI=$a,TI=jI(kI,"Promise"),NI=TI,MI=hc,DI=$a,CI=MI(DI,"Set"),EI=CI,AI=hc,OI=$a,RI=AI(OI,"WeakMap"),PI=RI,rv=SI,ov=z0,lv=NI,cv=EI,uv=PI,uD=Wp,gc=sD,sk="[object Map]",LI="[object Object]",ik="[object Promise]",ak="[object Set]",rk="[object WeakMap]",ok="[object DataView]",zI=gc(rv),BI=gc(ov),VI=gc(lv),FI=gc(cv),HI=gc(uv),Bo=uD;(rv&&Bo(new rv(new ArrayBuffer(1)))!=ok||ov&&Bo(new ov)!=sk||lv&&Bo(lv.resolve())!=ik||cv&&Bo(new cv)!=ak||uv&&Bo(new uv)!=rk)&&(Bo=function(t){var e=uD(t),n=e==LI?t.constructor:void 0,s=n?gc(n):"";if(s)switch(s){case zI:return ok;case BI:return sk;case VI:return ik;case FI:return ak;case HI:return rk}return e});var UI=Bo,ry=bH,II=aD,YI=d7,WI=vI,lk=UI,ck=B0,uk=oD,$I=cD,qI=1,dk="[object Arguments]",hk="[object Array]",jf="[object Object]",GI=Object.prototype,fk=GI.hasOwnProperty;function XI(t,e,n,s,a,o){var l=ck(t),d=ck(e),h=l?hk:lk(t),p=d?hk:lk(e);h=h==dk?jf:h,p=p==dk?jf:p;var x=h==jf,y=p==jf,b=h==p;if(b&&uk(t)){if(!uk(e))return!1;l=!0,x=!1}if(b&&!x)return o||(o=new ry),l||$I(t)?II(t,e,n,s,a,o):YI(t,e,h,n,s,a,o);if(!(n&qI)){var j=x&&fk.call(t,"__wrapped__"),T=y&&fk.call(e,"__wrapped__");if(j||T){var N=j?t.value():t,M=T?e.value():e;return o||(o=new ry),a(N,M,n,s,o)}}return b?(o||(o=new ry),WI(t,e,n,s,a,o)):!1}var KI=XI,ZI=KI,pk=Gp;function dD(t,e,n,s,a){return t===e?!0:t==null||e==null||!pk(t)&&!pk(e)?t!==t&&e!==e:ZI(t,e,n,s,dD,a)}var QI=dD,JI=QI;function eY(t,e){return JI(t,e)}var tY=eY;const dv=Ad(tY);function pt(t,e){return typeof t.get=="function"?t.get(e):t[e]}function mk(t){return typeof t.count=="function"?t.count():t.length}function ed(t,e){return mk(t)===mk(e)&&t.every((n,s)=>n===pt(e,s.toString()))}function nY(t,e){const n={};return t.forEach(s=>{n[s[e]]=s}),n}function Vf(){}function Vo(...t){return(e,...n)=>{e.preventDefault(),t.forEach(s=>s&&s(e,...n))}}function hD({item:t,itemContext:e,getItemProps:n,getResizeProps:s}){const{left:a,right:o}=s(),{key:l,ref:d,...h}=n(t.itemProps??{}),{useResizeHandle:p}=e;return A.createElement("div",{...h,ref:d,key:`${l}-outer`},p?A.createElement("div",{...a,key:`${l}-lr`}):null,u.jsx("div",{className:"rct-item-content",style:{maxHeight:`${e.dimensions.height}`},children:e.title},`${l}-content`),p?A.createElement("div",{...o,key:`${l}-rr`}):null)}function hv(t,e,n){return(e-t)/n}function fv(t,e,n,s){const a=n/(e-t);return(s-t)*a}function fD(t,e,n,s){return(e-t)/n*s+t}function pD(t,e,n,s,a){let o=Qi(t).startOf(n);if(s[n]&&s[n]>1){const l=o.get(n);o=o.set(n,l-l%s[n])}for(;o.valueOf()<e;){let l=Qi(o).add(s[n]||1,n).startOf(n);l.valueOf()<=o.valueOf()&&(l=l.add(s[n]||1,n)),a(o,l),o=l}}const gk=17;function oy(t,e,n){const s={second:1e3,minute:60,hour:60,day:24,month:30,year:12};let a="year",o=t;return Object.keys(s).some(l=>{const d=l;o=o/s[d];const h=o/n[d],p=n[d]&&n[d]>1?3*gk:gk,x=e/p;if(h<x)return a=l,!0}),a}const xk={second:"minute",minute:"hour",hour:"day",day:"month",month:"year",year:"year"};function mD(t){if(!xk[t])throw new Error(`unit ${t} is not acceptable`);return xk[t]}function sY({itemTimeStart:t,itemTimeEnd:e,dragTime:n,isDragging:s,isResizing:a,resizingEdge:o,resizeTime:l}){const d=e-t;return[s&&n?n:a&&o==="left"&&l?l:t,s&&n?n+d:a&&o==="right"&&l?l:e]}function iY({itemTimeStart:t,itemTimeEnd:e,canvasTimeStart:n,canvasTimeEnd:s,canvasWidth:a}){const o=e-t,l=Math.max(t,n),d=Math.min(e,s),h=fv(n,s,a,l),p=fv(n,s,a,d)-h;return{left:h,width:Math.max(p,3),collisionLeft:t,collisionWidth:o}}function gD(t,e){const{groupIdKey:n}=e,s={};for(let a=0;a<t.length;a++)s[pt(t[a],n)]={index:a,group:t[a]};return s}function aY(t,e){var n,s;const a={},o=Object.keys(e);for(let l=0;l<o.length;l++){const d=e[o[l]];a[l]={index:d.index,group:d.group,items:[]}}for(let l=0;l<t.length;l++)if(t[l].dimensions!==void 0&&((n=t[l].dimensions)==null?void 0:n.order)!==void 0){const d=a[((s=t[l].dimensions)==null?void 0:s.order.index)??0];d&&d.items.push(t[l])}return a}function xD(t,e,n,s){const{itemTimeStartKey:a,itemTimeEndKey:o}=s;return t.filter(l=>{const d=Qi(pt(l,a)).valueOf()<=n,h=Qi(pt(l,o)).valueOf()>=e;return d&&h})}const rY=.001;function oY(t,e,n,s=rY){return t.collisionLeft+s<e.collisionLeft+e.collisionWidth&&t.collisionLeft+t.collisionWidth-s>e.collisionLeft&&t.top-n+s<e.top+e.height&&t.top+t.height+n-s>e.top}function lY(t,e,n,s,a,o,l){let d=s;const h=l??(t-e.dimensions.height)/2;if(e.dimensions.stack&&e.dimensions.top===null){e.dimensions.top=a+h,d=Math.max(d,t,e.dimensions.height+h*2);do{var p=null;for(let x=o-1,y=0;x>=y;x--){const b=n[x];if(b.dimensions.top!==null&&b.dimensions.stack&&oY(e.dimensions,b.dimensions,h)){p=b;break}}p!=null&&(e.dimensions.top=p.dimensions.top+p.dimensions.height+h*(l!==void 0?1:2),d=Math.max(d,e.dimensions.top+e.dimensions.height+h-a))}while(p)}return{groupHeight:d,verticalMargin:h,itemTop:e.dimensions.top}}function cY(t,e,n,s,a){var o,l;const d=a??(t-(((o=e.dimensions)==null?void 0:o.height)??1))/2;return e.dimensions&&e.dimensions.top===null&&(e.dimensions.top=s+d,n=Math.max(n,t,e.dimensions.height+d)),{groupHeight:n,verticalMargin:0,itemTop:((l=e.dimensions)==null?void 0:l.top)??0}}function yk(t=[]){return t.reduce((e,n)=>e+n,0)}function uY(t,e,n,s,a){const o=[],l=[],d=aY(t,e);for(const h in d){const p=d[h],{items:x,group:y}=p,b=yk(o),j=y.stackItems!==void 0?y.stackItems:s,{groupHeight:T}=dY(x,j,n,b,a);l.push(b),y.height?o.push(y.height):o.push(Math.max(T,n))}return{height:yk(o),groupHeights:o,groupTops:l}}function dY(t,e,n,s,a){let o=0,l=0;for(let d=0;d<t.length;d++){const h=e?lY(n,t[d],t,o,s,d,a):cY(n,t[d],o,s,a);o=h.groupHeight,l=h.verticalMargin}return{groupHeight:o,verticalMargin:l}}function Iu(t,e,n,s,a,o,l,d,h,p,x,y,b,j,T,N){const M=xD(t,s,a,o).map(V=>fY({item:V,keys:o,draggingItem:p,resizingItem:x,dragTime:y,resizingEdge:b,resizeTime:j,groups:e,newGroupOrder:T}));if(e.length===0)return{dimensionItems:[],height:0,groupHeights:[],groupTops:[]};const R=gD(e,o),E=M.map(V=>hY({item:V,keys:o,canvasTimeStart:s,canvasTimeEnd:a,canvasWidth:n,groupOrders:R,lineHeight:l,itemHeightRatio:d,itemVerticalGap:N})).filter(V=>!!V),{height:z,groupHeights:U,groupTops:I}=uY(E,R,l,h,N);return{dimensionItems:E,height:z,groupHeights:U,groupTops:I}}function Or(t,e){return t*e}function hY({item:t,keys:e,canvasTimeStart:n,canvasTimeEnd:s,canvasWidth:a,groupOrders:o,lineHeight:l,itemHeightRatio:d,itemVerticalGap:h}){const p=pt(t,e.itemIdKey),x=iY({itemTimeStart:pt(t,e.itemTimeStartKey),itemTimeEnd:pt(t,e.itemTimeEndKey),canvasTimeStart:n,canvasTimeEnd:s,canvasWidth:a});if(x)return x.top=null,x.order=o[pt(t,e.itemGroupKey)],x.stack=!t.isOverlay,x.height=(t.height||l)*(typeof h>"u"?d:1),{id:p,dimensions:x}}function fY({item:t,keys:e,draggingItem:n,resizingItem:s,dragTime:a,resizingEdge:o,resizeTime:l,groups:d,newGroupOrder:h}){if(!s&&!n)return t;const p=pt(t,e.itemIdKey),x=p===n,y=p===s,[b,j]=sY({itemTimeStart:pt(t,e.itemTimeStartKey),itemTimeEnd:pt(t,e.itemTimeEndKey),isDragging:x,isResizing:y,dragTime:a,resizingEdge:o,resizeTime:l});return{...t,[e.itemTimeStartKey]:b,[e.itemTimeEndKey]:j,[e.itemGroupKey]:x?pt(d[h],e.groupIdKey):pt(t,e.itemGroupKey)}}function yD(t,e,n){const s=e-t,a=t-s*(n-1)/2,o=a+s*n;return[a,o]}function vk(t,e,n,s,a,o,l){const d=o.buffer,h=l.canvasTimeStart,p=l.canvasTimeEnd,x=l.visibleTimeEnd-l.visibleTimeStart,y=e-t,b={...l,visibleTimeStart:t,visibleTimeEnd:e},j=x*(d-1)*.25;if(y!==x||t<=h+j||e>=p-j||n){const[T,N]=yD(t,e,d);b.canvasTimeStart=T,b.canvasTimeEnd=N;const M={...l,...b},R=Or(M.width,o.buffer);Object.assign(b,Iu(s,a,R,M.canvasTimeStart,M.canvasTimeEnd,o.keys,o.lineHeight,o.itemHeightRatio,o.stackItems,M.draggingItem,M.resizingItem,M.dragTime,M.resizingEdge,M.resizeTime,M.newGroupOrder,o.itemVerticalGap))}return b}const pY={fontSize:12,color:"white",cursor:"pointer",background:"#2196f3",borderTopWidth:"1px",borderBottomWidth:"1px",borderLeftWidth:"1px",borderRightWidth:"1px",borderStyle:"solid",borderColor:"#1a6fb3",zIndex:80},mY={background:"#ffc107",borderTopWidth:"1px",borderLeftWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px",borderStyle:"solid",borderColor:"#ff9800",zIndex:82},gY={willChange:"left, top, width",cursor:"move"},xY={borderLeftWidth:3},yY={cursor:"w-resize"},vY={borderRightWidth:"3px"},bY={cursor:"e-resize"},_Y={position:"absolute",width:24,maxWidth:"20%",minWidth:2,height:"100%",top:0,left:0,cursor:"pointer",zIndex:88},wY={position:"absolute",width:24,maxWidth:"20%",minWidth:2,height:"100%",top:0,right:0,cursor:"pointer",zIndex:88},SY={getTimelineState:()=>(console.warn('"getTimelineState" default func is being used'),{}),getLeftOffsetFromDate:()=>(console.warn('"getLeftOffsetFromDate" default func is being used'),0),getDateFromLeftOffsetPosition:()=>(console.warn('"getDateFromLeftOffsetPosition" default func is being used'),0),showPeriod:()=>{console.warn('"showPeriod" default func is being used')}},V0=Kt.createContext(SY),{Consumer:jY,Provider:kY}=V0;class TY extends Kt.Component{constructor(e){super(e),Object.defineProperty(this,"getTimelineState",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{visibleTimeStart:n,visibleTimeEnd:s,canvasTimeStart:a,canvasTimeEnd:o,canvasWidth:l,timelineUnit:d,timelineWidth:h}=this.props;return{visibleTimeStart:n,visibleTimeEnd:s,canvasTimeStart:a,canvasTimeEnd:o,canvasWidth:l,timelineUnit:d,timelineWidth:h}}}),Object.defineProperty(this,"getLeftOffsetFromDate",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const{canvasTimeStart:s,canvasTimeEnd:a,canvasWidth:o}=this.props;return fv(s,a,o,n)}}),Object.defineProperty(this,"getDateFromLeftOffsetPosition",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const{canvasTimeStart:s,canvasTimeEnd:a,canvasWidth:o}=this.props;return fD(s,a,o,n)}}),this.state={timelineContext:{getTimelineState:this.getTimelineState,getLeftOffsetFromDate:this.getLeftOffsetFromDate,getDateFromLeftOffsetPosition:this.getDateFromLeftOffsetPosition,showPeriod:this.props.showPeriod}}}render(){return u.jsx(kY,{value:this.state.timelineContext,children:this.props.children})}}const Xp=jY,NY=()=>A.useContext(V0);Qi.extend(M9);class F0 extends A.Component{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{interactMounted:!1,dragging:!1,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null,resizing:!1,resizeEdge:null,resizeStart:null,resizeTime:null}}),Object.defineProperty(this,"itemId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"itemTitle",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"itemDivTitle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"itemTimeStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"itemTimeEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"itemRef",{enumerable:!0,configurable:!0,writable:!0,value:A.createRef()}),Object.defineProperty(this,"dragLeft",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dragRight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startedClicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedTouching",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"dragInProgress",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"fireInteractEvent",{enumerable:!0,configurable:!0,writable:!0,value:n=>{var s;if(this.itemRef&&this.itemRef.current){const a=new CustomEvent("itemInteraction",{bubbles:!0,detail:{itemInteraction:n}});(s=this.itemRef.current)==null||s.dispatchEvent(a)}}}),Object.defineProperty(this,"onMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.state.interactMounted||(n.preventDefault(),this.startedClicking=!0)}}),Object.defineProperty(this,"onMouseUp",{enumerable:!0,configurable:!0,writable:!0,value:n=>{!this.state.interactMounted&&this.startedClicking&&(this.startedClicking=!1,this.actualClick(n,"click"))}}),Object.defineProperty(this,"onTouchStart",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.state.interactMounted||(n.preventDefault(),this.startedTouching=!0)}}),Object.defineProperty(this,"onTouchEnd",{enumerable:!0,configurable:!0,writable:!0,value:n=>{!this.state.interactMounted&&this.startedTouching&&(this.startedTouching=!1,this.actualClick(n,"touch"))}}),Object.defineProperty(this,"handleDoubleClick",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.stopPropagation(),this.props.onItemDoubleClick&&this.props.onItemDoubleClick(this.itemId,n)}}),Object.defineProperty(this,"handleContextMenu",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.props.onContextMenu&&(n.preventDefault(),n.stopPropagation(),this.props.onContextMenu(this.itemId,n))}}),Object.defineProperty(this,"getDragLeftRef",{enumerable:!0,configurable:!0,writable:!0,value:n=>this.dragLeft=n}),Object.defineProperty(this,"getDragRightRef",{enumerable:!0,configurable:!0,writable:!0,value:n=>this.dragRight=n}),Object.defineProperty(this,"getItemProps",{enumerable:!0,configurable:!0,writable:!0,value:(n={})=>{const s="rct-item"+(this.props.item.className?` ${this.props.item.className}`:"");return{key:this.itemId,ref:this.itemRef,title:this.itemDivTitle,className:s+` ${n.className?n.className:""}`,onMouseDown:Vo(this.onMouseDown,n.onMouseDown),onMouseUp:Vo(this.onMouseUp,n.onMouseUp),onTouchStart:Vo(this.onTouchStart,n.onTouchStart),onTouchEnd:Vo(this.onTouchEnd,n.onTouchEnd),onDoubleClick:Vo(this.handleDoubleClick,n.onDoubleClick),onContextMenu:Vo(this.handleContextMenu,n.onContextMenu),style:Object.assign({},this.getItemStyle(n))}}}),Object.defineProperty(this,"getResizeProps",{enumerable:!0,configurable:!0,writable:!0,value:(n={})=>{let s="rct-item-handler rct-item-handler-left rct-item-handler-resize-left";n.leftClassName&&(s+=` ${n.leftClassName}`);let a="rct-item-handler rct-item-handler-right rct-item-handler-resize-right";return n.rightClassName&&(a+=` ${n.rightClassName}`),{left:{ref:this.getDragLeftRef,className:s,style:Object.assign({},_Y,n.leftStyle)},right:{ref:this.getDragRightRef,className:a,style:Object.assign({},wY,n.rightStyle)}}}}),this.cacheDataFromProps(e)}shouldComponentUpdate(e,n){return!dv(this.props,e)||!dv(this.state,n)}cacheDataFromProps(e){this.itemId=pt(e.item,e.keys.itemIdKey),this.itemTitle=pt(e.item,e.keys.itemTitleKey),this.itemDivTitle=e.keys.itemDivTitleKey?pt(e.item,e.keys.itemDivTitleKey):this.itemTitle,this.itemTimeStart=pt(e.item,e.keys.itemTimeStartKey),this.itemTimeEnd=pt(e.item,e.keys.itemTimeEndKey)}getTimeRatio(){const{canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s}=this.props;return hv(e,n,s)}dragTimeSnap(e,n){const{dragSnap:s}=this.props;if(s){const a=n?Qi().utcOffset()*60*1e3:0;return Math.round(e/s)*s-a%s}else return e}resizeTimeSnap(e){const{dragSnap:n}=this.props;if(n){const s=this.itemTimeEnd%n;return Math.round((e-s)/n)*n+s}else return e}dragTime(e){const n=Qi(this.itemTimeStart);return this.state.dragging?this.dragTimeSnap(this.timeFor(e)+this.state.dragStart.offset,!0):n.valueOf()}timeFor(e){const n=hv(this.props.canvasTimeStart,this.props.canvasTimeEnd,this.props.canvasWidth),s=fp(this.props.scrollRef).offsetLeft,a=hp(this.props.scrollRef);return(e.pageX-s+a.scrollLeft)*n+this.props.canvasTimeStart}dragGroupDelta(e){const{groupTops:n,order:s}=this.props;if(this.state.dragging){if(!this.props.canChangeGroup)return 0;let a=0;const o=fp(this.props.scrollRef).offsetTop,l=hp(this.props.scrollRef);for(const d of Object.keys(n)){const h=n[d];if(e.pageY-o+l.scrollTop>h)a=parseInt(d,10)-s.index;else break}return this.props.order.index+a<0?0-this.props.order.index:a}else return 0}resizeTimeDelta(e,n){const s=this.itemTimeEnd-this.itemTimeStart,a=this.dragTimeSnap((e.pageX-this.state.resizeStart)*this.getTimeRatio());return s+(n==="left"?-a:a)<(this.props.dragSnap||1e3)?n==="left"?s-(this.props.dragSnap||1e3):(this.props.dragSnap||1e3)-s:a}mountInteract(){const e=this.props.useResizeHandle?".rct-item-handler-resize-left":!0,n=this.props.useResizeHandle?".rct-item-handler-resize-right":!0;sy(this.itemRef.current).resizable({edges:{left:this.canResizeLeft()&&e,right:this.canResizeRight()&&n,top:!1,bottom:!1},enabled:this.props.selected&&(this.canResizeLeft()||this.canResizeRight())}).draggable({enabled:this.props.selected&&this.canMove()}).styleCursor(!1).on("dragstart",s=>{if(this.props.selected){this.dragInProgress=!0,this.fireInteractEvent(!0);const a=this.timeFor(s);this.setState({dragging:!0,dragStart:{x:s.pageX,y:s.pageY,offset:this.itemTimeStart-a},preDragPosition:{x:s.target.offsetLeft,y:s.target.offsetTop},dragTime:this.itemTimeStart,dragGroupDelta:0})}else return!1}).on("dragmove",s=>{this.state.dragging&&this.setState(a=>{if(!this.dragInProgress)return{...a};let o=this.dragTime(s);const l=this.dragGroupDelta(s);return this.props.moveResizeValidator&&(o=this.props.moveResizeValidator("move",this.props.item,o)),this.props.onDrag&&this.props.onDrag(this.itemId,o,this.props.order.index+l),{dragTime:o,dragGroupDelta:l}})}).on("dragend",s=>{if(this.state.dragging){if(this.props.onDrop){this.dragInProgress=!1,this.fireInteractEvent(!1);let a=this.dragTime(s);this.props.moveResizeValidator&&(a=this.props.moveResizeValidator("move",this.props.item,a)),this.props.onDrop(this.itemId,a,this.props.order.index+this.dragGroupDelta(s))}this.setState({dragging:!1,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null})}}).on("resizestart",s=>{if(this.props.selected)this.fireInteractEvent(!0),this.setState({resizing:!0,resizeEdge:null,resizeStart:s.pageX,resizeTime:0});else return!1}).on("resizemove",s=>{if(this.state.resizing){let a=this.state.resizeEdge;a||(a=s.deltaRect.left!==0?"left":"right",this.setState({resizeEdge:a}));let o=this.resizeTimeSnap(this.timeFor(s));this.props.moveResizeValidator&&(o=this.props.moveResizeValidator("resize",this.props.item,o,a)),this.props.onResizing&&this.props.onResizing(this.itemId,o,a),this.setState({resizeTime:o})}}).on("resizeend",s=>{if(this.state.resizing){this.fireInteractEvent(!1);const{resizeEdge:a}=this.state;let o=this.resizeTimeSnap(this.timeFor(s));this.props.moveResizeValidator&&(o=this.props.moveResizeValidator("resize",this.props.item,o,a)),this.props.onResized&&this.props.onResized(this.itemId,o,a,this.resizeTimeDelta(s,a)),this.setState({resizing:!1,resizeStart:null,resizeEdge:null,resizeTime:null})}}).on("tap",s=>{this.actualClick(s,s.pointerType==="mouse"?"click":"touch")}),this.setState({interactMounted:!0})}canResizeLeft(e=this.props){var n;return!e.canResizeLeft||e.minResizeWidth===void 0?!1:parseInt((n=e.dimensions.width)==null?void 0:n.toString(),10)>=e.minResizeWidth}canResizeRight(e=this.props){var n;return!e.canResizeRight||e.minResizeWidth===void 0?!1:parseInt((n=e.dimensions.width)==null?void 0:n.toString(),10)>=e.minResizeWidth}canMove(e=this.props){return!!e.canMove}componentDidUpdate(e){this.cacheDataFromProps(this.props);let{interactMounted:n}=this.state;const s=e.selected&&this.canMove(e),a=e.selected&&this.canResizeLeft(e),o=e.selected&&this.canResizeRight(e),l=this.props.selected&&this.canMove(this.props),d=this.props.selected&&this.canResizeLeft(this.props),h=this.props.selected&&this.canResizeRight(this.props);if(this.itemRef&&this.itemRef.current){if(this.props.selected&&!n&&(this.mountInteract(),n=!0),n&&(a!==d||o!==h)){const p=this.props.useResizeHandle?this.dragLeft:!0,x=this.props.useResizeHandle?this.dragRight:!0;sy(this.itemRef.current).resizable({enabled:d||h,edges:{top:!1,bottom:!1,left:d&&p,right:h&&x}})}n&&s!==l&&sy(this.itemRef.current).draggable({enabled:l})}else n=!1;n!==this.state.interactMounted&&this.setState({interactMounted:n})}actualClick(e,n){this.props.canSelect&&this.props.onSelect&&this.props.onSelect(this.itemId,n,e)}getItemStyle(e){const n=this.props.dimensions,s={position:"absolute",boxSizing:"border-box",left:`${n.left}px`,top:`${n.top}px`,width:`${n.width}px`,height:`${n.height}px`,lineHeight:`${n.height}px`};return Object.assign({},pY,this.props.selected?mY:{},this.props.selected&&this.canMove(this.props)?gY:{},this.props.selected&&this.canResizeLeft(this.props)?xY:{},this.props.selected&&this.canResizeLeft(this.props)&&this.state.dragging?yY:{},this.props.selected&&this.canResizeRight(this.props)?vY:{},this.props.selected&&this.canResizeRight(this.props)&&this.state.dragging?bY:{},e.style,s)}render(){if(typeof this.props.order>"u"||this.props.order===null)return null;const e=this.context,n={dimensions:this.props.dimensions,useResizeHandle:!!this.props.useResizeHandle,title:this.itemTitle,canMove:this.canMove(this.props),canResizeLeft:this.canResizeLeft(this.props),canResizeRight:this.canResizeRight(this.props),selected:this.props.selected,dragging:this.state.dragging,dragStart:this.state.dragStart,dragTime:this.state.dragTime,dragGroupDelta:this.state.dragGroupDelta,resizing:this.state.resizing,resizeEdge:this.state.resizeEdge,resizeStart:this.state.resizeStart,resizeTime:this.state.resizeTime};return this.props.itemRenderer?this.props.itemRenderer({item:this.props.item,timelineContext:e,itemContext:n,getItemProps:this.getItemProps,getResizeProps:this.getResizeProps}):hD({item:this.props.item,itemContext:n,getItemProps:this.getItemProps,getResizeProps:this.getResizeProps})}}Object.defineProperty(F0,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{selected:!1,itemRenderer:hD}});Object.defineProperty(F0,"contextType",{enumerable:!0,configurable:!0,writable:!0,value:V0});function MY(t,e){const n=pt(t,"canResize")!==void 0?pt(t,"canResize"):e;return n==="left"||n==="both"}function DY(t,e){const n=pt(t,"canResize")!==void 0?pt(t,"canResize"):e;return n==="right"||n==="both"||n===!0}class CY extends A.Component{shouldComponentUpdate(e){return!(ed(e.groups,this.props.groups)&&ed(e.items,this.props.items)&&ed(e.dimensionItems,this.props.dimensionItems)&&e.keys===this.props.keys&&e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.selectedItem===this.props.selectedItem&&e.selected===this.props.selected&&e.dragSnap===this.props.dragSnap&&e.minResizeWidth===this.props.minResizeWidth&&e.canChangeGroup===this.props.canChangeGroup&&e.canMove===this.props.canMove&&e.canResize===this.props.canResize&&e.canSelect===this.props.canSelect)}isSelected(e,n){if(this.props.selected){const s=pt(e,n);return this.props.selected.includes(s)}else return this.props.selectedItem===pt(e,n)}getVisibleItems(e,n){const{keys:s,items:a}=this.props;return xD(a,e,n,s)}render(){const{canvasTimeStart:e,canvasTimeEnd:n,dimensionItems:s,keys:a,groups:o}=this.props,{itemIdKey:l,itemGroupKey:d}=a,h=gD(o,a),p=this.getVisibleItems(e,n),x=nY(s,"id");return u.jsx("div",{className:"rct-items",children:p.filter(y=>x[pt(y,l)]).map(y=>u.jsx(F0,{itemProps:y.itemProps,item:y,keys:this.props.keys,order:h[pt(y,d)],dimensions:x[pt(y,l)].dimensions,selected:this.isSelected(y,l),canChangeGroup:pt(y,"canChangeGroup")!==void 0?pt(y,"canChangeGroup"):this.props.canChangeGroup,canMove:pt(y,"canMove")!==void 0?pt(y,"canMove"):this.props.canMove,canResizeLeft:MY(y,this.props.canResize),canResizeRight:DY(y,this.props.canResize),canSelect:pt(y,"canSelect")!==void 0?pt(y,"canSelect"):this.props.canSelect,useResizeHandle:this.props.useResizeHandle,groupTops:this.props.groupTops,canvasTimeStart:this.props.canvasTimeStart,canvasTimeEnd:this.props.canvasTimeEnd,canvasWidth:this.props.canvasWidth,dragSnap:this.props.dragSnap,minResizeWidth:this.props.minResizeWidth,onResizing:this.props.itemResizing,onResized:this.props.itemResized,moveResizeValidator:this.props.moveResizeValidator,onDrag:this.props.itemDrag,onDrop:this.props.itemDrop,onItemDoubleClick:this.props.onItemDoubleClick,onContextMenu:this.props.onItemContextMenu,onSelect:this.props.itemSelect,itemRenderer:this.props.itemRenderer,scrollRef:this.props.scrollRef},pt(y,l)))})}}class bk extends A.Component{shouldComponentUpdate(e){return!(e.keys===this.props.keys&&e.width===this.props.width&&e.height===this.props.height&&ed(e.groups,this.props.groups)&&ed(e.groupHeights,this.props.groupHeights))}renderGroupContent(e,n=!1,s,a){return this.props.groupRenderer?Kt.createElement(this.props.groupRenderer,{group:e,isRightSidebar:n}):pt(e,n?a:s)}render(){const{width:e,groupHeights:n,height:s,isRightSidebar:a}=this.props,{groupIdKey:o,groupTitleKey:l,groupRightTitleKey:d}=this.props.keys,h={width:`${e}px`,height:`${s}px`},p={width:`${e}px`},x=this.props.groups.map((y,b)=>{const j={height:`${n[b]}px`,lineHeight:`${n[b]}px`};return u.jsx("div",{className:"rct-sidebar-row rct-sidebar-row-"+(b%2===0?"even":"odd"),style:j,children:this.renderGroupContent(y,a,l,d)},pt(y,o))});return u.jsx("div",{className:"rct-sidebar"+(a?" rct-sidebar-right":""),style:h,children:u.jsx("div",{style:p,children:x})})}}class EY extends A.Component{shouldComponentUpdate(e){return!(e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.lineCount===this.props.lineCount&&e.minUnit===this.props.minUnit&&e.timeSteps===this.props.timeSteps&&e.height===this.props.height&&e.verticalLineClassNamesForTime===this.props.verticalLineClassNamesForTime)}render(){const{canvasTimeStart:e,canvasTimeEnd:n,minUnit:s,timeSteps:a,height:o,verticalLineClassNamesForTime:l,getLeftOffsetFromDate:d}=this.props,h=[];return pD(e,n,s,a,(p,x)=>{const y=p.get(s==="day"?"date":s)===(s==="day"?1:0);let b=[];l&&(b=l(p.unix()*1e3,x.unix()*1e3-1));const j="rct-vl"+(y?" rct-vl-first":"")+(s==="day"||s==="hour"||s==="minute"?` rct-day-${p.day()} `:" ")+b.join(" "),T=d(p.valueOf()),N=d(x.valueOf());h.push(u.jsx("div",{className:j,style:{pointerEvents:"none",top:"0px",left:`${T}px`,width:`${N-T}px`,height:`${o}px`}},`line-${p.valueOf()}`))}),u.jsx("div",{className:"rct-vertical-lines",children:h})}}const AY=({...t})=>u.jsx(Xp,{children:({getLeftOffsetFromDate:e})=>u.jsx(EY,{getLeftOffsetFromDate:e,...t})});class OY extends A.Component{constructor(){super(...arguments),Object.defineProperty(this,"handleMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.originClickX=e.clientX}}),Object.defineProperty(this,"handleMouseUp",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.props.clickTolerance!==void 0&&Math.abs(this.originClickX-e.clientX)>this.props.clickTolerance&&(this.cancelClick=!0)}}),Object.defineProperty(this,"handleClick",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.cancelClick||this.props.onClick(e),this.cancelClick=!1,this.originClickX=null}}),Object.defineProperty(this,"originClickX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cancelClick",{enumerable:!0,configurable:!0,writable:!0,value:!1})}render(){const e=Kt.Children.only(this.props.children);return Kt.cloneElement(e,{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick})}}class RY extends A.Component{render(){const{onContextMenu:e,onDoubleClick:n,isEvenRow:s,style:a,onClick:o,clickTolerance:l,horizontalLineClassNamesForGroup:d,group:h}=this.props;let p=[];return d&&(p=d(h)),u.jsx(OY,{clickTolerance:l,onClick:o,children:u.jsx("div",{onContextMenu:e,onDoubleClick:n,className:(s?"rct-hl-even ":"rct-hl-odd ")+(p?p.join(" "):""),style:a})})}}class PY extends A.Component{shouldComponentUpdate(e){return!(e.canvasWidth===this.props.canvasWidth&&e.lineCount===this.props.lineCount&&e.groupHeights===this.props.groupHeights&&e.groups===this.props.groups)}render(){const{canvasWidth:e,lineCount:n,groupHeights:s,onRowClick:a,onRowDoubleClick:o,clickTolerance:l,groups:d,horizontalLineClassNamesForGroup:h,onRowContextClick:p}=this.props,x=[];for(let y=0;y<n;y++)x.push(u.jsx(RY,{clickTolerance:l,onContextMenu:b=>p(b,y),onClick:b=>a(b,y),onDoubleClick:b=>o(b,y),isEvenRow:y%2===0,group:d[y],horizontalLineClassNamesForGroup:h,style:{width:`${e}px`,height:`${s[y]}px`}},`horizontal-line-${y}`));return u.jsx("div",{className:"rct-horizontal-lines",children:x})}}class LY extends A.Component{constructor(e){super(e),Object.defineProperty(this,"scrollComponentRef",{enumerable:!0,configurable:!0,writable:!0,value:A.createRef()}),Object.defineProperty(this,"dragLastPosition",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastTouchDistance",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"singleTouchStart",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastSingleTouch",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isItemInteraction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"handlePointerStart",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="touch"?this.handleTouchStart(n):n.pointerType==="mouse"&&this.handleMouseDown(n)}}),Object.defineProperty(this,"handlePointerMove",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="touch"?this.handleTouchMove(n):n.pointerType==="mouse"&&this.handleMouseMove(n)}}),Object.defineProperty(this,"handlePointerEnd",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="touch"?this.handleTouchEnd():n.pointerType==="mouse"&&this.handleMouseUp()}}),Object.defineProperty(this,"handleScroll",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const n=this.scrollComponentRef.current.scrollLeft;this.props.onScroll(n)}}),Object.defineProperty(this,"handleWheel",{enumerable:!0,configurable:!0,writable:!0,value:n=>{if(n.ctrlKey||n.metaKey||n.altKey){n.preventDefault();const s=Uj(n.currentTarget),a=n.clientX-s.x,o=n.ctrlKey?10:n.metaKey?3:1;this.props.onWheelZoom(o,a,n.deltaY)}else n.shiftKey&&(n.preventDefault(),this.props.onScroll(this.scrollComponentRef.current.scrollLeft+(n.deltaY||n.deltaX)))}}),Object.defineProperty(this,"handleMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.button===0&&(this.dragLastPosition=n.pageX,this.setState({isDragging:!0}))}}),Object.defineProperty(this,"handleMouseMove",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.state.isDragging&&!this.isItemInteraction&&(this.props.onScroll(this.scrollComponentRef.current.scrollLeft+this.dragLastPosition-n.pageX),this.dragLastPosition=n.pageX)}}),Object.defineProperty(this,"handleMouseUp",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.dragLastPosition=null,this.setState({isDragging:!1})}}),Object.defineProperty(this,"handlePointerLeave",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="mouse"&&(this.dragLastPosition=null,this.setState({isDragging:!1}))}}),Object.defineProperty(this,"handleTouchStart",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.isPrimary?(n.preventDefault(),this.lastTouchDistance=null,this.singleTouchStart={x:n.clientX,y:n.clientY,screenY:window.scrollY},this.lastSingleTouch={x:n.clientX,y:n.clientY,screenY:window.scrollY}):(n.preventDefault(),this.lastTouchDistance=Math.abs(n.clientX-this.singleTouchStart.x),this.singleTouchStart=null,this.lastSingleTouch=null)}}),Object.defineProperty(this,"handleTouchMove",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const{width:s,onZoom:a}=this.props;if(this.isItemInteraction){n.preventDefault();return}if(this.lastTouchDistance&&!n.isPrimary){n.preventDefault();const o=Math.abs(n.clientX-this.singleTouchStart.x),l=Uj(n.currentTarget),d=(n.clientX+this.singleTouchStart.x)/2-l.x;o!==0&&this.lastTouchDistance!==0&&(a(this.lastTouchDistance/o,d/s),this.lastTouchDistance=o)}else if(this.lastSingleTouch&&n.isPrimary){n.preventDefault();const o=n.clientX,l=n.clientY,d=o-this.lastSingleTouch.x,h=o-this.singleTouchStart.x,p=l-this.singleTouchStart.y;this.lastSingleTouch={x:o,y:l,screenY:window.pageYOffset};const x=Math.abs(h)*3>Math.abs(p),y=Math.abs(p)*3>Math.abs(h);d!==0&&x&&this.props.onScroll(this.scrollComponentRef.current.scrollLeft-d),y&&window.scrollTo(window.scrollX,this.singleTouchStart.screenY-p)}}}),Object.defineProperty(this,"handleTouchEnd",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.lastTouchDistance&&(this.lastTouchDistance=null),this.lastSingleTouch&&(this.lastSingleTouch=null,this.singleTouchStart=null)}}),Object.defineProperty(this,"handleItemInteract",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.isItemInteraction=n.detail.itemInteraction}}),this.state={isDragging:!1}}componentDidMount(){this.scrollComponentRef.current&&(this.props.scrollRef(this.scrollComponentRef.current),this.scrollComponentRef.current.addEventListener("wheel",this.handleWheel,{passive:!1}),this.scrollComponentRef.current.addEventListener("itemInteraction",this.handleItemInteract),this.scrollComponentRef.current.addEventListener("pointerdown",this.handlePointerStart,{passive:!1}),this.scrollComponentRef.current.addEventListener("pointermove",this.handlePointerMove,{passive:!1}),this.scrollComponentRef.current.addEventListener("pointerup",this.handlePointerEnd),this.scrollComponentRef.current.addEventListener("pointerleave",this.handlePointerLeave))}componentWillUnmount(){this.scrollComponentRef.current&&(this.scrollComponentRef.current.removeEventListener("wheel",this.handleWheel),this.scrollComponentRef.current.removeEventListener("itemInteraction",this.handleItemInteract),this.scrollComponentRef.current.removeEventListener("pointerdown",this.handlePointerStart),this.scrollComponentRef.current.removeEventListener("pointermove",this.handlePointerMove),this.scrollComponentRef.current.removeEventListener("pointerup",this.handlePointerEnd),this.scrollComponentRef.current.removeEventListener("pointerleave",this.handlePointerLeave))}render(){const{width:e,height:n,children:s}=this.props,{isDragging:a}=this.state,o={width:`${e}px`,height:`${n+20}px`,cursor:a?"move":"default",position:"relative"};return u.jsx("div",{ref:this.scrollComponentRef,"data-testid":"scroll-element",className:"rct-scroll",style:o,onScroll:this.handleScroll,children:s})}}const zY={subscribeToMouseOver:()=>(console.warn('"subscribeToMouseOver" default func is being used'),()=>{})},{Consumer:BY,Provider:VY}=Kt.createContext(zY),FY=VY,HY=BY,UY={markers:[],subscribeMarker:()=>(console.warn("default subscribe marker used"),{unsubscribe:Vf,getMarker:Vf}),updateMarker:()=>(console.warn("default subscribe marker used"),Vf)},{Consumer:IY,Provider:YY}=Kt.createContext(UY);let _k=0;const WY=()=>(_k+=1,_k+1);class $Y extends Kt.Component{constructor(e){super(e),Object.defineProperty(this,"handleSubscribeToMarker",{enumerable:!0,configurable:!0,writable:!0,value:n=>(n={...n,id:WY()},this.setState(s=>({markers:[...s.markers,n]})),{unsubscribe:()=>{this.setState(s=>({markers:s.markers.filter(a=>a.id!==n.id)}))},getMarker:()=>n})}),Object.defineProperty(this,"handleUpdateMarker",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const s=this.state.markers.findIndex(a=>a.id===n.id);s<0||this.setState(a=>({markers:[...a.markers.slice(0,s),n,...a.markers.slice(s+1)]}))}}),this.state={markers:[],subscribeMarker:this.handleSubscribeToMarker,updateMarker:this.handleUpdateMarker}}render(){return u.jsx(YY,{value:this.state,children:this.props.children})}}const vD=IY;var Wl;(function(t){t.Today="Today",t.Custom="Custom",t.Cursor="Cursor"})(Wl||(Wl={}));const qY={position:"absolute",top:0,bottom:0,width:"2px",backgroundColor:"black",pointerEvents:"none"},H0=t=>({...qY,left:t}),U0=t=>function({styles:e}){return u.jsx("div",{style:e,"data-testid":t})},GY=U0("default-today-line");let bD=class extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{date:Date.now()}}),Object.defineProperty(this,"intervalToken",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}componentDidMount(){this.intervalToken=this.createIntervalUpdater(this.props.interval)}componentDidUpdate(t){t.interval!==this.props.interval&&(clearInterval(this.intervalToken),this.intervalToken=this.createIntervalUpdater(this.props.interval))}createIntervalUpdater(t){return setInterval(()=>{this.setState({date:Date.now()})},t)}componentWillUnmount(){clearInterval(this.intervalToken)}render(){const{date:t}=this.state,e=this.props.getLeftOffsetFromDate(t),n=H0(e);return this.props.renderer({styles:n,date:t})}};Object.defineProperty(bD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{renderer:GY}});const XY=U0("default-customer-marker-id");let _D=class extends Kt.Component{render(){const{date:t}=this.props,e=this.props.getLeftOffsetFromDate(t),n=H0(e);return this.props.renderer({styles:n,date:t})}};Object.defineProperty(_D,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{renderer:XY}});const KY=U0("default-cursor-marker");let wD=class extends Kt.Component{constructor(t){super(t),Object.defineProperty(this,"handleCanvasMouseOver",{enumerable:!0,configurable:!0,writable:!0,value:({leftOffset:e,date:n,isCursorOverCanvas:s})=>{this.setState({leftOffset:e,date:n,isShowingCursor:s})}}),Object.defineProperty(this,"unsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state={leftOffset:0,date:0,isShowingCursor:!1}}componentDidMount(){this.unsubscribe=this.props.subscribeToCanvasMouseOver(this.handleCanvasMouseOver)}componentWillUnmount(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}render(){const{isShowingCursor:t,leftOffset:e,date:n}=this.state;if(!t)return null;const s=H0(e);return this.props.renderer?this.props.renderer({styles:s,date:n}):null}};Object.defineProperty(wD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{renderer:KY}});const SD=t=>u.jsx(HY,{children:({subscribeToMouseOver:e})=>u.jsx(wD,{subscribeToCanvasMouseOver:e,...t})});SD.displayName="CursorMarkerWrapper";const ZY=()=>u.jsx(Xp,{children:({getLeftOffsetFromDate:t,getTimelineState:e})=>u.jsx(vD,{children:({markers:n})=>{const s=e();return n.map(a=>{switch(a.type){case Wl.Today:return new Date().valueOf()>=s.canvasTimeStart&&new Date().valueOf()<=s.canvasTimeEnd?u.jsx(bD,{getLeftOffsetFromDate:t,renderer:a.renderer,interval:a.interval},a.id):null;case Wl.Custom:return a.date>=s.canvasTimeStart&&a.date<=s.canvasTimeEnd?u.jsx(_D,{renderer:a.renderer,date:a.date,getLeftOffsetFromDate:t},a.id):null;case Wl.Cursor:return u.jsx(SD,{renderer:a.renderer,getLeftOffsetFromDate:t},a.id);default:return null}})}})}),QY={position:"absolute",left:0,right:0,top:0,bottom:0};class JY extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"handleMouseMove",{enumerable:!0,configurable:!0,writable:!0,value:e=>{var n;if(this.subscription!==null){const{pageX:s}=e,{left:a}=((n=this.containerEl.current)==null?void 0:n.getBoundingClientRect())??{left:0},o=s-a,l=this.props.getDateFromLeftOffsetPosition(o);this.subscription({leftOffset:o,date:l,isCursorOverCanvas:!0})}}}),Object.defineProperty(this,"handleMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.subscription!==null&&this.subscription({leftOffset:0,date:0,isCursorOverCanvas:!1})}}),Object.defineProperty(this,"handleMouseMoveSubscribe",{enumerable:!0,configurable:!0,writable:!0,value:e=>(this.subscription=e,()=>{this.subscription=null})}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{subscribeToMouseOver:this.handleMouseMoveSubscribe}}),Object.defineProperty(this,"containerEl",{enumerable:!0,configurable:!0,writable:!0,value:Kt.createRef()}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:null})}render(){return u.jsx(FY,{value:this.state,children:u.jsxs("div",{style:QY,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,ref:this.containerEl,children:[u.jsx(ZY,{}),this.props.children]})})}}const eW=t=>u.jsx(Xp,{children:({getDateFromLeftOffsetPosition:e})=>u.jsx(JY,{getDateFromLeftOffsetPosition:e,...t})});function tW(t){t._resizeEventListener=()=>t.resize(),window.addEventListener("resize",t._resizeEventListener)}function nW(t){window.removeEventListener("resize",t._resizeEventListener)}const wk={addListener:tW,removeListener:nW},sW={groupIdKey:"id",groupTitleKey:"title",groupRightTitleKey:"rightTitle",groupLabelKey:"title",itemIdKey:"id",itemTitleKey:"title",itemDivTitleKey:"title",itemGroupKey:"group",itemTimeStartKey:"start_time",itemTimeEndKey:"end_time"},iW={second:1,minute:1,hour:1,day:1,month:1,year:1},aW={year:{long:"YYYY",mediumLong:"YYYY",medium:"YYYY",short:"YY"},month:{long:"MMMM YYYY",mediumLong:"MMMM",medium:"MMMM",short:"MM/YY"},week:{long:"w",mediumLong:"w",medium:"w",short:"w"},day:{long:"dddd, LL",mediumLong:"dddd, LL",medium:"dd D",short:"D"},hour:{long:"dddd, LL, HH:00",mediumLong:"L, HH:00",medium:"HH:00",short:"HH"},minute:{long:"HH:mm",mediumLong:"HH:mm",medium:"HH:mm",short:"mm"},second:{long:"mm:ss",mediumLong:"mm:ss",medium:"mm:ss",short:"ss"}},rW={registerScroll:()=>(console.warn("default registerScroll header used"),Vf),rightSidebarWidth:0,leftSidebarWidth:150,timeSteps:{}},jD=Kt.createContext(rW);class oW extends Kt.Component{render(){const e={rightSidebarWidth:this.props.rightSidebarWidth,leftSidebarWidth:this.props.leftSidebarWidth,timeSteps:this.props.timeSteps,registerScroll:this.props.registerScroll};return u.jsx(jD.Provider,{value:e,children:this.props.children})}}const lW=jD,I0=()=>A.useContext(lW);var kD={exports:{}};(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var d=arguments[l];d&&(o=a(o,s(d)))}return o}function s(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var d in o)e.call(o,d)&&o[d]&&(l=a(l,d));return l}function a(o,l){return l?o?o+" "+l:o+l:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(kD);var cW=kD.exports;const Sk=Ad(cW),uW="left",TD="right";class dW extends A.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"getRootProps",{enumerable:!0,configurable:!0,writable:!0,value:(e={})=>{const{style:n}=e,s=this.props.variant===TD?this.props.rightSidebarWidth:this.props.leftSidebarWidth;return{style:{color:n?.color??"#fff",...n,width:s}}}}),Object.defineProperty(this,"getStateAndHelpers",{enumerable:!0,configurable:!0,writable:!0,value:()=>({getRootProps:this.getRootProps,data:this.props.headerData})})}render(){const e=this.getStateAndHelpers();return this.props.children(e)}}const hW=({getRootProps:t})=>u.jsx("div",{"data-testid":"sidebarHeader",...t()}),Ff=t=>{const{children:e,variant:n=uW,headerData:s}=t,{leftSidebarWidth:a,rightSidebarWidth:o}=I0();return u.jsx(dW,{leftSidebarWidth:a,rightSidebarWidth:o,variant:n,headerData:s,children:e||hW})};Ff.secretKey="SidebarHeader";class fW extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"getRootStyle",{enumerable:!0,configurable:!0,writable:!0,value:()=>({...this.props.style,display:"flex",width:"100%"})}),Object.defineProperty(this,"getCalendarHeaderStyle",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{leftSidebarWidth:e,rightSidebarWidth:n,calendarHeaderStyle:s}=this.props;return{...s,overflow:"hidden",width:`calc(100% - ${e+n}px)`}}}),Object.defineProperty(this,"isSidebarHeader",{enumerable:!0,configurable:!0,writable:!0,value:e=>e.type===void 0?!1:e.type.secretKey===Ff.secretKey})}render(){let e,n;const s=[],a=Array.isArray(this.props.children)?this.props.children.filter(o=>o):[this.props.children];return Kt.Children.map(a,o=>{var l;this.isSidebarHeader(o)?((l=o?.props)==null?void 0:l.variant)===TD?e=o:n=o:s.push(o)}),n||(n=u.jsx(Ff,{})),!e&&this.props.rightSidebarWidth&&(e=u.jsx(Ff,{variant:"right"})),u.jsxs("div",{"data-testid":"headerRootDiv",style:this.getRootStyle(),className:Sk("rct-header-root",this.props.className),children:[n,u.jsx("div",{ref:this.props.registerScroll,style:this.getCalendarHeaderStyle(),className:Sk("rct-calendar-header",this.props.calendarHeaderClassName),"data-testid":"headerContainer",children:s}),e]})}}const pv=({children:t,style:e,className:n,calendarHeaderStyle:s,calendarHeaderClassName:a})=>{const{leftSidebarWidth:o,rightSidebarWidth:l,registerScroll:d}=I0();return u.jsx(fW,{leftSidebarWidth:o,rightSidebarWidth:l,registerScroll:d,style:e,className:n,calendarHeaderStyle:s,calendarHeaderClassName:a,children:t})};pv.secretKey="TimelineHeaders";class ND extends Kt.Component{constructor(e){super(e),Object.defineProperty(this,"getHeaderIntervals",{enumerable:!0,configurable:!0,writable:!0,value:({canvasTimeStart:h,canvasTimeEnd:p,unit:x,timeSteps:y,getLeftOffsetFromDate:b})=>{const j=[];return pD(h,p,x,y,(T,N)=>{const M=b(T.valueOf()),R=b(N.valueOf())-M;j.push({startTime:T,endTime:N,labelWidth:R,left:M})}),j}}),Object.defineProperty(this,"getRootProps",{enumerable:!0,configurable:!0,writable:!0,value:(h={})=>{const{style:p}=h;return{style:Object.assign({},p||{},{position:"relative",width:this.props.canvasWidth,height:this.props.height})}}}),Object.defineProperty(this,"getIntervalProps",{enumerable:!0,configurable:!0,writable:!0,value:(h={})=>{const{interval:p,style:x}=h;if(!p)throw new Error("you should provide interval to the prop getter");const{startTime:y,labelWidth:b,left:j}=p;return{style:{...x,left:j,width:b,position:"absolute"},key:`label-${y.valueOf()}`}}}),Object.defineProperty(this,"getStateAndHelpers",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{unit:h,showPeriod:p,headerData:x}=this.props;return{headerContext:{unit:h,intervals:this.state.intervals},getRootProps:this.getRootProps,getIntervalProps:this.getIntervalProps,showPeriod:p,data:x}}});const{canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l}=e,d=this.getHeaderIntervals({canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l});this.state={intervals:d}}componentDidUpdate(e){if(!dv(e,this.props)){const{canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l}=this.props,d=this.getHeaderIntervals({canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l});this.setState({intervals:d})}}render(){const e=this.getStateAndHelpers();return this.props.children(e)}}Object.defineProperty(ND,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{height:30}});function pW({children:t,unit:e,headerData:n,height:s}){const{getTimelineState:a,showPeriod:o,getLeftOffsetFromDate:l}=NY(),d=a(),{timeSteps:h}=I0();return u.jsx(ND,{children:t,timeSteps:h,showPeriod:o,unit:e||d.timelineUnit,...d,headerData:n,getLeftOffsetFromDate:l,height:s})}var jk=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function mW(t,e){return!!(t===e||jk(t)&&jk(e))}function gW(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!mW(t[n],e[n]))return!1;return!0}function kk(t,e){e===void 0&&(e=gW);var n=null;function s(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var l=t.apply(this,a);return n={lastResult:l,lastArgs:a,lastThis:this},l}return s.clear=function(){n=null},s}class xW extends Kt.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"onIntervalClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{primaryHeader:e,interval:n,unit:s,showPeriod:a}=this.props;if(e){const o=mD(s),l=n.startTime.clone().startOf(o),d=n.startTime.clone().endOf(o);a(l,d)}else a(n.startTime,n.endTime)}}),Object.defineProperty(this,"getIntervalProps",{enumerable:!0,configurable:!0,writable:!0,value:(e={})=>({...this.props.getIntervalProps({interval:this.props.interval,...e}),onClick:Vo(this.onIntervalClick,e.onClick)})})}render(){const{intervalText:e,interval:n,intervalRenderer:s,headerData:a}=this.props,o=s;if(o)return o({getIntervalProps:this.getIntervalProps,intervalContext:{interval:n,intervalText:e},data:a});const{key:l,...d}=this.getIntervalProps();return A.createElement("div",{"data-testid":"dateHeaderInterval",...d,key:l,className:`rct-dateHeader ${this.props.primaryHeader?"rct-dateHeader-primary":""}`},u.jsx("span",{children:e}))}}function yW({headerContext:{intervals:t,unit:e},getRootProps:n,getIntervalProps:s,showPeriod:a,data:{style:o,intervalRenderer:l,className:d,getLabelFormat:h,unitProp:p,headerData:x}}){return u.jsx("div",{"data-testid":"dateHeader",className:d,...n({style:o}),children:t.map(y=>{const b=h([y.startTime,y.endTime],e,y.labelWidth);return u.jsx(xW,{unit:e,interval:y,showPeriod:a,intervalText:b,primaryHeader:p==="primaryHeader",getIntervalProps:s,intervalRenderer:l,headerData:x},`label-${y.startTime.valueOf()}`)})})}class vW extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"getHeaderUnit",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.props.unit==="primaryHeader"?mD(this.props.timelineUnit):this.props.unit?this.props.unit:this.props.timelineUnit}),Object.defineProperty(this,"getRootStyle",{enumerable:!0,configurable:!0,writable:!0,value:kk(e=>({height:30,...e}))}),Object.defineProperty(this,"getLabelFormat",{enumerable:!0,configurable:!0,writable:!0,value:(e,n,s)=>{const{labelFormat:a}=this.props;if(typeof a=="string")return e[0].format(a);if(typeof a=="function")return a(e,n,s);throw new Error("labelFormat should be function or string")}}),Object.defineProperty(this,"getHeaderData",{enumerable:!0,configurable:!0,writable:!0,value:kk((e,n,s,a,o,l)=>({intervalRenderer:e,style:n,className:s,getLabelFormat:a,unitProp:o,headerData:l}))})}render(){const e=this.getHeaderUnit(),{height:n}=this.props;return u.jsx(pW,{children:yW,unit:e,height:n,headerData:this.getHeaderData(this.props.intervalRenderer,this.getRootStyle(this.props.style),this.props.className,this.getLabelFormat,this.props.unit,this.props.headerData)})}}function Tk({labelFormat:t,unit:e,style:n,className:s,intervalRenderer:a,headerData:o,height:l}){return u.jsx(Xp,{children:({getTimelineState:d})=>{const h=d();return u.jsx(vW,{timelineUnit:h.timelineUnit,unit:e,labelFormat:t||bW,style:n,className:s,intervalRenderer:a,headerData:o,height:l})}})}const bW=([t],e,n=150,s=aW)=>{let a;return n>=150?a=s[e].long:n>=100?a=s[e].mediumLong:n>=50?a=s[e].medium:a=s[e].short,t.format(a)};var MD={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(Ho,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(s,a,o){var l=a.prototype,d=l.format;o.en.formats=n,l.format=function(h){h===void 0&&(h="YYYY-MM-DDTHH:mm:ssZ");var p=this.$locale().formats,x=(function(y,b){return y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,T,N){var M=N&&N.toUpperCase();return T||b[N]||n[N]||b[M].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(R,E,z){return E||z.slice(1)})})})(h,p===void 0?{}:p);return d.call(this,x)}}})})(MD);var _W=MD.exports;const wW=Ad(_W);Qi.extend(wW);class Y0 extends A.Component{constructor(e){super(e),Object.defineProperty(this,"getTimelineContext",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{width:b,visibleTimeStart:j,visibleTimeEnd:T,canvasTimeStart:N,canvasTimeEnd:M}=this.state,R=T-j,E=Or(b,this.props.buffer),z=oy(R,b,this.props.timeSteps);return{canvasWidth:E,timelineUnit:z,timelineWidth:b,visibleTimeStart:j,visibleTimeEnd:T,canvasTimeStart:N,canvasTimeEnd:M}}}),Object.defineProperty(this,"getTimelineUnit",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{width:b,visibleTimeStart:j,visibleTimeEnd:T}=this.state,{timeSteps:N}=this.props,M=T-j;return oy(M,b,N)}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scrollComponent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"scrollHeaderRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resize",{enumerable:!0,configurable:!0,writable:!0,value:(b=this.props)=>{var j;const{width:T}=((j=this.container.current)==null?void 0:j.getBoundingClientRect())??{width:0},N=T-b.sidebarWidth-b.rightSidebarWidth,M=Or(N,b.buffer),{dimensionItems:R,height:E,groupHeights:z,groupTops:U}=Iu(b.items,b.groups,M,this.state.canvasTimeStart,this.state.canvasTimeEnd,b.keys,b.lineHeight,b.itemHeightRatio,b.stackItems,this.state.draggingItem,this.state.resizingItem,this.state.dragTime,this.state.resizingEdge,this.state.resizeTime,this.state.newGroupOrder,b.itemVerticalGap);this.setState({width:N,dimensionItems:R,height:E,groupHeights:z,groupTops:U});const I=N*((b.buffer-1)/2);this.scrollComponent&&(this.scrollComponent.scrollLeft=I),this.scrollHeaderRef&&(this.scrollHeaderRef.scrollLeft=I)}}),Object.defineProperty(this,"onScroll",{enumerable:!0,configurable:!0,writable:!0,value:b=>{var j,T;const N=this.state.width,M=this.state.canvasTimeStart,R=this.state.visibleTimeEnd-this.state.visibleTimeStart,E=M+R*b/N;(this.state.visibleTimeStart!==E||this.state.visibleTimeEnd!==E+R)&&((T=(j=this.props).onTimeChange)==null||T.call(j,E,E+R,this.updateScrollCanvas,this.getTimelineUnit()))}}),Object.defineProperty(this,"updateScrollCanvas",{enumerable:!0,configurable:!0,writable:!0,value:(b,j,T=!1,N=this.props.items,M=this.props.groups)=>{this.setState(vk(b,j,T,N,M,this.props,this.state))}}),Object.defineProperty(this,"handleWheelZoom",{enumerable:!0,configurable:!0,writable:!0,value:(b,j,T)=>{this.changeZoom(1+b*T/500,j/this.state.width)}}),Object.defineProperty(this,"changeZoom",{enumerable:!0,configurable:!0,writable:!0,value:(b,j=.5)=>{const{minZoom:T,maxZoom:N}=this.props,M=this.state.visibleTimeEnd-this.state.visibleTimeStart,R=Math.min(Math.max(Math.round(M*b),T),N),E=Math.round(this.state.visibleTimeStart+(M-R)*j);this.props.onTimeChange&&this.props.onTimeChange(E,E+R,this.updateScrollCanvas,this.getTimelineUnit())}}),Object.defineProperty(this,"showPeriod",{enumerable:!0,configurable:!0,writable:!0,value:(b,j)=>{var T,N;const M=b.valueOf(),R=j.valueOf()-M;R<this.props.minZoom||(N=(T=this.props).onTimeChange)==null||N.call(T,M,M+R,this.updateScrollCanvas,this.getTimelineUnit())}}),Object.defineProperty(this,"selectItem",{enumerable:!0,configurable:!0,writable:!0,value:(b,j,T)=>{if(this.isItemSelected(b)||this.props.itemTouchSendsClick&&j==="touch"){if(b&&this.props.onItemClick){const N=this.timeFromItemEvent(T);this.props.onItemClick(b,T,N)}}else if(this.setState({selectedItem:b}),b&&this.props.onItemSelect){const N=this.timeFromItemEvent(T);this.props.onItemSelect(b,T,N)}else b===null&&this.props.onItemDeselect&&this.props.onItemDeselect(T)}}),Object.defineProperty(this,"doubleClickItem",{enumerable:!0,configurable:!0,writable:!0,value:(b,j)=>{if(this.props.onItemDoubleClick){const T=this.timeFromItemEvent(j);this.props.onItemDoubleClick(b,j,T)}}}),Object.defineProperty(this,"contextMenuClickItem",{enumerable:!0,configurable:!0,writable:!0,value:(b,j)=>{if(this.props.onItemContextMenu){const T=this.timeFromItemEvent(j);this.props.onItemContextMenu(b,j,T)}}}),Object.defineProperty(this,"getTimeFromRowClickEvent",{enumerable:!0,configurable:!0,writable:!0,value:b=>{const{dragSnap:j,buffer:T}=this.props,{width:N,canvasTimeStart:M,canvasTimeEnd:R}=this.state,{offsetX:E}=b.nativeEvent;let z=fD(M,R,Or(N,T),E);return z=Math.floor(z/j)*j,z}}),Object.defineProperty(this,"timeFromItemEvent",{enumerable:!0,configurable:!0,writable:!0,value:b=>{const{width:j,visibleTimeStart:T,visibleTimeEnd:N}=this.state,M=this.props.dragSnap,R=this.scrollComponent,{left:E}=R.getBoundingClientRect(),z=(b.clientX-E)/j,U=N-T,I=z*U;let V=Math.round(T+I);return V=Math.floor(V/M)*M,V}}),Object.defineProperty(this,"dragItem",{enumerable:!0,configurable:!0,writable:!0,value:(b,j,T)=>{const N=this.props.groups[T],M=this.props.keys;this.setState({draggingItem:b,dragTime:j,newGroupOrder:T,dragGroupTitle:N?pt(N,M.groupLabelKey):""}),this.updatingItem({eventType:"move",itemId:b,time:j,newGroupOrder:T})}}),Object.defineProperty(this,"dropItem",{enumerable:!0,configurable:!0,writable:!0,value:(b,j,T)=>{this.setState({draggingItem:null,dragTime:null,dragGroupTitle:null}),this.props.onItemMove&&this.props.onItemMove(b,j,T)}}),Object.defineProperty(this,"resizingItem",{enumerable:!0,configurable:!0,writable:!0,value:(b,j,T)=>{this.setState({resizingItem:b,resizingEdge:T,resizeTime:j}),this.updatingItem({eventType:"resize",itemId:b,time:j,edge:T||void 0})}}),Object.defineProperty(this,"resizedItem",{enumerable:!0,configurable:!0,writable:!0,value:(b,j,T,N)=>{this.setState({resizingItem:null,resizingEdge:null,resizeTime:null}),this.props.onItemResize&&N!==0&&this.props.onItemResize(b,j,T)}}),Object.defineProperty(this,"updatingItem",{enumerable:!0,configurable:!0,writable:!0,value:({eventType:b,itemId:j,time:T,edge:N,newGroupOrder:M})=>{this.props.onItemDrag&&(b==="move"?this.props.onItemDrag({eventType:b,itemId:j,time:T,newGroupOrder:M}):this.props.onItemDrag({eventType:b,itemId:j,time:T,edge:N}))}}),Object.defineProperty(this,"handleRowClick",{enumerable:!0,configurable:!0,writable:!0,value:(b,j)=>{if(this.hasSelectedItem()&&this.selectItem(null,"click",b),this.props.onCanvasClick==null)return;const T=this.getTimeFromRowClickEvent(b),N=pt(this.props.groups[j],this.props.keys.groupIdKey);this.props.onCanvasClick(N,T,b)}}),Object.defineProperty(this,"handleRowDoubleClick",{enumerable:!0,configurable:!0,writable:!0,value:(b,j)=>{if(this.props.onCanvasDoubleClick==null)return;const T=this.getTimeFromRowClickEvent(b),N=pt(this.props.groups[j],this.props.keys.groupIdKey);this.props.onCanvasDoubleClick(N,T,b)}}),Object.defineProperty(this,"handleScrollContextMenu",{enumerable:!0,configurable:!0,writable:!0,value:(b,j)=>{if(this.props.onCanvasContextMenu==null)return;const T=this.getTimeFromRowClickEvent(b),N=pt(this.props.groups[j],this.props.keys.groupIdKey);this.props.onCanvasContextMenu&&(b.preventDefault(),this.props.onCanvasContextMenu(N,T,b))}}),Object.defineProperty(this,"handleHeaderRef",{enumerable:!0,configurable:!0,writable:!0,value:b=>{this.scrollHeaderRef=b,this.props.headerRef&&this.props.headerRef(b)}}),Object.defineProperty(this,"isTimelineHeader",{enumerable:!0,configurable:!0,writable:!0,value:b=>b.type===void 0?!1:b.type.secretKey===pv.secretKey}),Object.defineProperty(this,"renderHeaders",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.props.children){let b;if(Kt.Children.map(this.props.children,j=>{this.isTimelineHeader(j)&&(b=j)}),b)return b}return u.jsxs(pv,{children:[u.jsx(Tk,{unit:"primaryHeader"}),u.jsx(Tk,{})]})}}),Object.defineProperty(this,"getScrollElementRef",{enumerable:!0,configurable:!0,writable:!0,value:b=>{this.props.scrollRef&&this.props.scrollRef(b),this.scrollComponent=b}}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:Kt.createRef()}),Object.defineProperty(this,"getBoundingClientRect",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.scrollComponent.getBoundingClientRect()}),Object.defineProperty(this,"calculateDropCoordinatesToTimeAndGroup",{enumerable:!0,configurable:!0,writable:!0,value:(b,j)=>{const T=Or(this.state.width,this.props.buffer),N=hv(this.state.canvasTimeStart,this.state.canvasTimeEnd,T),M=fp(this.scrollComponent).offsetLeft,R=hp(this.scrollComponent),E=(b-M+R.scrollLeft)*N+this.state.canvasTimeStart;let z=0;for(const I of this.state.groupTops)if(j>Number(I))z=this.state.groupTops.indexOf(I);else break;if(!this.props.dragSnap)return{time:E,groupIndex:z};const U=Qi().utcOffset()*60*1e3;return{time:Math.round(E/this.props.dragSnap)*this.props.dragSnap-U%this.props.dragSnap,groupIndex:z}}}),this.getSelected=this.getSelected.bind(this),this.hasSelectedItem=this.hasSelectedItem.bind(this),this.isItemSelected=this.isItemSelected.bind(this);let n=null,s=null;if(this.props.defaultTimeStart&&this.props.defaultTimeEnd)n=this.props.defaultTimeStart,s=this.props.defaultTimeEnd;else if(this.props.visibleTimeStart&&this.props.visibleTimeEnd)n=this.props.visibleTimeStart,s=this.props.visibleTimeEnd;else throw new Error('You must provide either "defaultTimeStart" and "defaultTimeEnd" or "visibleTimeStart" and "visibleTimeEnd" to initialize the Timeline');const[a,o]=yD(n,s,e.buffer),l={width:1e3,visibleTimeStart:n,visibleTimeEnd:s,canvasTimeStart:a,canvasTimeEnd:o,selectedItem:null,dragTime:null,dragGroupTitle:null,resizeTime:null,resizingItem:null,resizingEdge:null,newGroupOrder:0},d=Or(l.width,e.buffer),{dimensionItems:h,height:p,groupHeights:x,groupTops:y}=Iu(e.items,e.groups,d,l.canvasTimeStart,l.canvasTimeEnd,e.keys,e.lineHeight,e.itemHeightRatio,e.stackItems,l.draggingItem,l.resizingItem,l.dragTime,l.resizingEdge,l.resizeTime,l.newGroupOrder,e.itemVerticalGap);l.dimensionItems=h,l.height=p,l.groupHeights=x,l.groupTops=y,this.state=l}componentDidMount(){this.resize(this.props),this.props.resizeDetector&&this.props.resizeDetector.addListener&&this.props.resizeDetector.addListener(this),wk.addListener(this)}componentWillUnmount(){this.props.resizeDetector&&this.props.resizeDetector.addListener&&this.props.resizeDetector.removeListener(this),wk.removeListener(this)}static getDerivedStateFromProps(e,n){const{visibleTimeStart:s,visibleTimeEnd:a,items:o,groups:l}=e,d={items:o,groups:l},h=o!==n.items||l!==n.groups;if(s&&a)Object.assign(d,vk(s,a,h,o,l,e,n));else if(h){const p=Or(n.width,e.buffer);Object.assign(d,Iu(o,l,p,n.canvasTimeStart,n.canvasTimeEnd,e.keys,e.lineHeight,e.itemHeightRatio,e.stackItems,n.draggingItem,n.resizingItem,n.dragTime,n.resizingEdge,n.resizeTime,n.newGroupOrder,e.itemVerticalGap))}return d}componentDidUpdate(e,n){const s=this.state.visibleTimeEnd-this.state.visibleTimeStart,a=n.visibleTimeEnd-n.visibleTimeStart;this.props.onZoom&&s!==a&&this.props.onZoom(this.getTimelineContext(),this.getTimelineUnit()),this.props.onBoundsChange&&this.state.canvasTimeStart!==n.canvasTimeStart&&this.props.onBoundsChange(this.state.canvasTimeStart,this.state.canvasTimeStart+s*3);const o=Math.round(this.state.width*(this.state.visibleTimeStart-this.state.canvasTimeStart)/s);(Math.round(n.width*(n.visibleTimeStart-n.canvasTimeStart)/a)!==o||this.scrollComponent.scrollLeft!==o)&&(this.scrollComponent.scrollLeft=o,this.scrollHeaderRef.scrollLeft=o)}columns(e,n,s,a,o,l){var d;return u.jsx(AY,{canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,lineCount:((d=this.props.groups)==null?void 0:d.length)||0,minUnit:a,timeSteps:o,height:l,verticalLineClassNamesForTime:this.props.verticalLineClassNamesForTime})}rows(e,n,s){var a;return u.jsx(PY,{groups:s,canvasWidth:e,lineCount:((a=this.props.groups)==null?void 0:a.length)||0,groupHeights:n,clickTolerance:this.props.clickTolerance,onRowClick:this.handleRowClick,onRowDoubleClick:this.handleRowDoubleClick,horizontalLineClassNamesForGroup:this.props.horizontalLineClassNamesForGroup,onRowContextClick:this.handleScrollContextMenu})}items({canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,dimensionItems:a,groupTops:o}){return u.jsx(CY,{canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,dimensionItems:a,groupTops:o,items:this.props.items,groups:this.props.groups,keys:this.props.keys,selectedItem:this.state.selectedItem||void 0,dragSnap:this.props.dragSnap,minResizeWidth:this.props.minResizeWidth,canChangeGroup:this.props.canChangeGroup,canMove:this.props.canMove,canResize:this.props.canResize,useResizeHandle:this.props.useResizeHandle,canSelect:this.props.canSelect,moveResizeValidator:this.props.moveResizeValidator,itemSelect:this.selectItem,itemDrag:this.dragItem,itemDrop:this.dropItem,onItemDoubleClick:this.doubleClickItem,onItemContextMenu:this.props.onItemContextMenu?this.contextMenuClickItem:void 0,itemResizing:this.resizingItem,itemResized:this.resizedItem,itemRenderer:this.props.itemRenderer,selected:this.props.selected,scrollRef:this.scrollComponent})}sidebar(e,n){const{sidebarWidth:s}=this.props;return s&&u.jsx(bk,{groups:this.props.groups,groupRenderer:this.props.groupRenderer,keys:this.props.keys,width:s,groupHeights:n,height:e})}rightSidebar(e,n){const{rightSidebarWidth:s}=this.props;return s&&u.jsx(bk,{groups:this.props.groups,keys:this.props.keys,groupRenderer:this.props.groupRenderer,isRightSidebar:!0,width:s,groupHeights:n,height:e})}childrenWithProps(e,n,s,a,o,l,d,h,p,x,y){if(!this.props.children)return null;const b=Array.isArray(this.props.children)?this.props.children.filter(T=>T):[this.props.children],j={canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,visibleTimeStart:h,visibleTimeEnd:p,dimensionItems:a,items:this.props.items,groups:this.props.groups,keys:this.props.keys,groupHeights:o,groupTops:l,selected:this.getSelected(),height:d,minUnit:x,timeSteps:y};return Kt.Children.map(b,T=>this.isTimelineHeader(T)?null:Kt.cloneElement(T,j))}getSelected(){return this.state.selectedItem&&!this.props.selected?[this.state.selectedItem]:this.props.selected||[]}hasSelectedItem(){return Array.isArray(this.props.selected)?this.props.selected.length>0:!!this.state.selectedItem}isItemSelected(e){return this.getSelected().some(n=>n===e)}render(){const{items:e,groups:n,sidebarWidth:s,rightSidebarWidth:a,timeSteps:o,traditionalZoom:l,buffer:d}=this.props,{draggingItem:h,resizingItem:p,width:x,visibleTimeStart:y,visibleTimeEnd:b,canvasTimeStart:j,canvasTimeEnd:T}=this.state;let{dimensionItems:N,height:M,groupHeights:R,groupTops:E}=this.state;const z=b-y,U=Or(x,d),I=oy(z,x,o);if(h||p){const O=Iu(e,n,U,this.state.canvasTimeStart,this.state.canvasTimeEnd,this.props.keys,this.props.lineHeight,this.props.itemHeightRatio,this.props.stackItems,this.state.draggingItem,this.state.resizingItem,this.state.dragTime,this.state.resizingEdge,this.state.resizeTime,this.state.newGroupOrder,this.props.itemVerticalGap);N=O.dimensionItems,M=O.height,R=O.groupHeights,E=O.groupTops}const V={height:`${M}px`};return u.jsx(TY,{visibleTimeStart:y,visibleTimeEnd:b,canvasTimeStart:j,canvasTimeEnd:T,canvasWidth:U,showPeriod:this.showPeriod,timelineUnit:I,timelineWidth:this.state.width,children:u.jsx($Y,{children:u.jsx(oW,{registerScroll:this.handleHeaderRef,timeSteps:o,leftSidebarWidth:this.props.sidebarWidth,rightSidebarWidth:this.props.rightSidebarWidth,children:u.jsxs("div",{style:this.props.style,ref:this.container,className:`react-calendar-timeline ${this.props.className}`,children:[this.renderHeaders(),u.jsxs("div",{style:V,className:"rct-outer",children:[s>0?this.sidebar(M,R):null,u.jsx(LY,{scrollRef:this.getScrollElementRef,width:x,height:M,onZoom:this.changeZoom,onWheelZoom:this.handleWheelZoom,traditionalZoom:!!l,onScroll:this.onScroll,children:u.jsxs(eW,{children:[this.columns(j,T,U,I,o,M),this.rows(U,R,n),this.items({canvasTimeStart:j,canvasTimeEnd:T,canvasWidth:U,dimensionItems:N,groupTops:E}),this.childrenWithProps(j,T,U,N,R,E,M,y,b,I,o)]})}),a>0?this.rightSidebar(M,R):null]})]})})})})}}Object.defineProperty(Y0,"setDayjsLocale",{enumerable:!0,configurable:!0,writable:!0,value:Qi.locale});Object.defineProperty(Y0,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{sidebarWidth:150,rightSidebarWidth:0,dragSnap:1e3*60*15,minResizeWidth:20,lineHeight:30,itemHeightRatio:.65,buffer:3,minZoom:3600*1e3,maxZoom:5*365.24*86400*1e3,clickTolerance:3,canChangeGroup:!0,canMove:!0,canResize:"right",useResizeHandle:!1,canSelect:!0,stackItems:!1,traditionalZoom:!1,horizontalLineClassNamesForGroup:null,onItemMove:null,onItemResize:null,onItemClick:null,onItemSelect:null,onItemDeselect:null,onItemDrag:null,onCanvasClick:null,onItemDoubleClick:null,onItemContextMenu:null,onZoom:null,verticalLineClassNamesForTime:null,moveResizeValidator:null,dayBackground:null,defaultTimeStart:null,defaultTimeEnd:null,itemTouchSendsClick:!1,style:{},className:"",keys:sW,timeSteps:iW,headerRef:()=>{},scrollRef:()=>{},visibleTimeStart:null,visibleTimeEnd:null,onTimeChange:function(t,e,n){n(t,e)},onBoundsChange:null,children:null,selected:null}});const SW=t=>t.children||null;class DD extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"unsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"getMarker",{enumerable:!0,configurable:!0,writable:!0,value:null})}componentDidMount(){const{unsubscribe:e,getMarker:n}=this.props.subscribeMarker({type:Wl.Today,renderer:this.props.children,interval:this.props.interval});this.unsubscribe=e,this.getMarker=n}componentWillUnmount(){this.unsubscribe!=null&&(this.unsubscribe(),this.unsubscribe=null)}componentDidUpdate(e){if(e.interval!==this.props.interval&&this.getMarker){const n=this.getMarker();this.props.updateMarker({...n,interval:this.props.interval})}}render(){return null}}Object.defineProperty(DD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{interval:1e3*10}});const CD=t=>u.jsx(vD,{children:({subscribeMarker:e,updateMarker:n})=>u.jsx(DD,{subscribeMarker:e,updateMarker:n,...t})});CD.displayName="TodayMarkerWrapper";function jW({lanes:t,blocks:e,selectedBlockId:n,onBlockMove:s,onBlockResize:a,onBlockSelect:o,onAddBlock:l}){const d=A.useRef(null),h=t.map(E=>({id:E.id,title:E.label})),p=e.map(E=>({id:E.id,group:E.lane,title:"",start_time:E.start,end_time:E.end,canMove:!E.isHistorical,canResize:E.isHistorical?!1:"both",canChangeGroup:!E.isHistorical,className:`ds-timeline-item ds-timeline-${E.lane}${E.isHistorical?" ds-timeline-item-historical":""}${n===E.id?" ds-timeline-item-selected":""}`})),x=new Date,y=new Date(x);y.setHours(0,0,0,0);const b=new Date(y.getTime()+2880*60*1e3),[j,T]=A.useState(y.getTime()),[N,M]=A.useState(b.getTime()),R=E=>{E.preventDefault();const z=y.getTime(),U=b.getTime(),I=U-z,V=N-j,O=E.deltaY<0?"in":"out",q=.15;let Z=O==="in"?V*(1-q):V*(1+q);const re=I*.05;Z<re&&(Z=re),Z>I&&(Z=I);let J=.5;const de=d.current;if(de){const W=de.getBoundingClientRect();if(W.width>0){const X=E.clientX-W.left;J=Math.min(1,Math.max(0,X/W.width))}}let te=j+V*J-Z*J,se=te+Z;te<z&&(te=z,se=te+Z),se>U&&(se=U,te=se-Z),T(te),M(se)};return u.jsx("div",{className:"relative",children:u.jsx("div",{ref:d,onWheel:R,className:"relative",children:u.jsx(Y0,{groups:h,items:p,visibleTimeStart:j,visibleTimeEnd:N,defaultTimeStart:y,defaultTimeEnd:b,lineHeight:64,sidebarWidth:96,canMove:!0,canResize:"both",canChangeGroup:!0,groupRenderer:({group:E})=>{const z=t.find(I=>I.id===E.id);if(!z)return null;const U=z.id==="battery"?"+ chg":z.id==="water"?"+ wtr":z.id==="export"?"+ exp":"+ hld";return u.jsx("div",{className:"flex h-full items-center justify-center",children:u.jsx("button",{type:"button",className:"flex h-12 w-12 items-center justify-center rounded-2xl border-none text-[11px] font-semibold shadow-float hover:brightness-110",onClick:()=>l&&l(z.id),title:`Add ${z.label.toLowerCase()} action`,style:{backgroundColor:z.color,color:"#0f1216"},children:U})})},onTimeChange:(E,z,U)=>{const I=y.getTime(),V=b.getTime(),O=z-E,q=V-I;let Z=E,re=z;if(O>q&&(Z=I,re=V),Z<I){const J=I-Z;Z=I,re+=J}if(re>V){const J=re-V;re=V,Z-=J}T(Z),M(re),U(Z,re)},onItemMove:(E,z,U)=>{const I=String(E),V=e.find(Z=>Z.id===I);if(!V||V.isHistorical||!s)return;const O=new Date(z),q=h[U]?.id;s({id:I,start:O,lane:q})},onItemResize:(E,z,U)=>{const I=String(E),V=new Date(z),O=e.find(re=>re.id===I);if(!O||O.isHistorical||!a)return;let q=O.start,Z=O.end;U==="left"?q=V:Z=V,a({id:I,start:q,end:Z})},onItemSelect:E=>{o&&o(String(E))},onItemDeselect:()=>{o&&o(null)},children:u.jsx(SW,{children:u.jsx(CD,{children:({styles:E})=>u.jsx("div",{style:E,className:"ds-timeline-now-marker"})})})})})})}const kW=[{id:"battery",label:"Battery",color:"#AAB6C4"},{id:"water",label:"Water",color:"#FF7A7A"},{id:"export",label:"Export",color:"#9BF6A3"},{id:"hold",label:"Hold",color:"#FFD966"}];function ly(t,e){const n=t.filter(d=>Td(d.start_time)||Xo(d.start_time));if(!n.length)return[];const s=[...n].sort((d,h)=>new Date(d.start_time).getTime()-new Date(h.start_time).getTime()),a=[],o={};let l=0;for(const d of s){const h=new Date(d.start_time),p=d.end_time?new Date(d.end_time):new Date(h.getTime()+1800*1e3),x=d.is_historical===!0,y=[],b=d.charge_kw??0,j=d.battery_discharge_kw??d.discharge_kw??0,T=d.water_heating_kw??0,N=d.export_kwh??0,M=(b||0)<=0&&(j||0)<=0&&(T||0)<=0&&(N||0)<=0;let R=!1;if(e){const E=typeof d.projected_soc_percent=="number"?d.projected_soc_percent:typeof d.soc_target_percent=="number"?d.soc_target_percent:null;M&&typeof E=="number"&&(E<=e.minSocPercent+.01||E>=e.maxSocPercent-.01)&&(R=!0)}b>0&&y.push("battery"),T>0&&y.push("water"),N>0&&y.push("export"),y.length||!R&&M&&y.push("hold");for(const E of y){const z=o[E];if(z&&h.getTime()<=z.end.getTime())p.getTime()>z.end.getTime()&&(z.end=p);else{const U={id:`auto-${l++}-${E}`,lane:E,start:h,end:p,source:"schedule",isHistorical:x};a.push(U),o[E]=U}}}return a}function TW(){const[t,e]=A.useState(null),[n,s]=A.useState([]),[a,o]=A.useState(null),[l,d]=A.useState(null),[h,p]=A.useState(!0),[x,y]=A.useState(!1),[b,j]=A.useState(0),[T,N]=A.useState(null),[M,R]=A.useState(null);A.useEffect(()=>{let J=!1;return Promise.allSettled([De.schedule(),De.scheduleTodayWithHistory(),De.config()]).then(([de,le,te])=>{if(J)return;let se=null;if(te.status==="fulfilled"){const X=te.value.battery||{},ae=Number(X.min_soc_percent??0),oe=Number(X.max_soc_percent??100),me=Number(X.max_charge_power_kw??0),F=Number(X.max_discharge_power_kw??0);se={minSocPercent:Number.isFinite(ae)?ae:0,maxSocPercent:Number.isFinite(oe)?oe:100,maxChargeKw:Number.isFinite(me)?me:0,maxDischargeKw:Number.isFinite(F)?F:0},R(se)}else console.error("Failed to load config for Planning constraints:",te.reason);if(de.status==="fulfilled"){const W=de.value.schedule??[];e(W),s(ly(W,se)),o(null)}else console.error("Failed to load schedule for Planning:",de.reason),d("Failed to load schedule");if(le.status==="fulfilled"){const W=le.value.slots??[];N(W)}else console.error("Failed to load execution history for Planning:",le.reason)}).finally(()=>{J||p(!1)}),()=>{J=!0}},[]);const E=A.useMemo(()=>n,[n]),z=A.useMemo(()=>{if(!t)return null;const J=t.filter(de=>Td(de.start_time)||Xo(de.start_time));if(T&&T.length){const de=J.filter(le=>Xo(le.start_time));return[...T,...de]}return J},[t,T]),U=({id:J,start:de,lane:le})=>{s(te=>te.map(se=>{if(se.id!==J)return se;const W=se.end.getTime()-se.start.getTime(),X=new Date(de.getTime()+W);return{...se,start:de,end:X,lane:le}}))},I=({id:J,start:de,end:le})=>{s(te=>te.map(se=>se.id===J?{...se,start:de,end:le}:se))},V=J=>{o(J)},O=()=>{a&&(s(J=>J.filter(de=>de.id!==a)),o(null))},q=(J,de)=>{if(!de)return{ok:!0};const le=[];for(const X of J){const ae=X.start_time,oe=typeof X.projected_soc_percent=="number"?X.projected_soc_percent:typeof X.soc_target_percent=="number"?X.soc_target_percent:null;typeof oe=="number"&&(oe<de.minSocPercent-.01?le.push(`${ae}: SoC ${oe.toFixed(1)}% below min ${de.minSocPercent}%`):oe>de.maxSocPercent+.01&&le.push(`${ae}: SoC ${oe.toFixed(1)}% above max ${de.maxSocPercent}%`));const me=Math.max(X.battery_charge_kw??X.charge_kw??0,0),F=Math.max(X.battery_discharge_kw??X.discharge_kw??0,0);de.maxChargeKw>0&&me>de.maxChargeKw+1e-6&&le.push(`${ae}: charge ${me.toFixed(2)} kW exceeds max ${de.maxChargeKw} kW`),de.maxDischargeKw>0&&F>de.maxDischargeKw+1e-6&&le.push(`${ae}: discharge ${F.toFixed(2)} kW exceeds max ${de.maxDischargeKw} kW`)}if(!le.length)return{ok:!0};const te=le[0],se=le.length-1,W=se>0?` (and ${se} more slots)`:"";return{ok:!1,message:`Manual plan violates device/SoC limits: ${te}${W}`}},Z=()=>{if(!n.length||x)return;y(!0),d(null);const J={battery:"Charge",water:"Water Heating",export:"Export",hold:"Hold"},de=n.map(le=>({id:le.id,group:le.lane,title:null,action:J[le.lane],start:le.start.toISOString(),end:le.end.toISOString()}));De.simulate(de).then(le=>{const te=le.schedule??[],se=q(te,M);if(!se.ok){console.error("Manual plan validation failed:",se.message),d(se.message);return}d(null),e(te),s(ly(te,M)),o(null),j(W=>W+1)}).catch(le=>{console.error("Failed to apply manual changes:",le),d("Failed to apply manual changes")}).finally(()=>{y(!1)})},re=J=>{const de=new Date,le=new Date(de);le.setMinutes(le.getMinutes()<30?0:30,0,0);const te=new Date(le.getTime()+3600*1e3),se=`manual-${Date.now()}-${J}`;s(W=>[...W,{id:se,lane:J,start:le,end:te,source:"schedule"}])};return u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12",children:[u.jsxs(Ge,{className:"p-4 md:p-6 mb-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between pb-4",children:[u.jsx("div",{className:"text-sm text-muted",children:"Planning Timeline"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[h&&"Loading schedule",!h&&l&&l]})]}),u.jsx("div",{className:"rounded-xl2 border border-line/60 bg-surface2 overflow-hidden",children:u.jsx(jW,{lanes:kW,blocks:E,selectedBlockId:a,onBlockMove:U,onBlockResize:I,onBlockSelect:V,onAddBlock:re})}),u.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[u.jsx("button",{className:"rounded-pill bg-accent text-canvas px-5 py-2.5 font-semibold disabled:opacity-40",disabled:h||x||n.length===0,onClick:Z,children:"Apply manual changes"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"rounded-pill border border-line/70 px-4 py-2.5 text-text hover:border-accent disabled:opacity-40",disabled:!a,onClick:O,children:"Delete block"}),u.jsx("button",{className:"rounded-pill border border-line/70 px-4 py-2.5 text-text hover:border-accent disabled:opacity-40",disabled:h||!t,onClick:()=>{t&&(s(ly(t)),o(null))},children:"Reset plan"})]})]})]}),z&&z.length>0&&u.jsx(Nd,{day:"today",range:"48h",showDayToggle:!1,refreshToken:b,slotsOverride:z})]})}function Fr({label:t,value:e,hint:n}){return u.jsxs("div",{className:"rounded-xl2 bg-surface2 border border-line/60 px-4 py-3",children:[u.jsx("div",{className:"text-[11px] text-muted tracking-wide",children:t}),u.jsx("div",{className:"text-lg leading-tight",children:e}),n&&u.jsx("div",{className:"text-[11px] text-muted mt-1",children:n})]})}function NW(t){if(!t||t<=0)return"";const e=["B","KB","MB","GB"];let n=t,s=0;for(;n>=1024&&s<e.length-1;)n/=1024,s+=1;return`${n.toFixed(1)} ${e[s]}`}function cy(t){if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toLocaleString(void 0,{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function MW(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState(!0),[l,d]=A.useState(null),[h,p]=A.useState(null),[x,y]=A.useState(null),[b,j]=A.useState(!1),[T,N]=A.useState(null),[M,R]=A.useState(!1),[E,z]=A.useState(null),[U,I]=A.useState(null),V=A.useRef(null),O=A.useRef(null);A.useEffect(()=>{let H=!1;return o(!0),d(null),Promise.allSettled([De.learningStatus(),De.config(),De.learningHistory(),De.debug(),De.learningDailyMetrics()]).then(Se=>{if(H)return;const[Ue,tt,Te,lt,gt]=Se;if(Ue.status==="fulfilled"?e(Ue.value):(console.error("Failed to load learning status:",Ue.reason),d("Failed to load learning status")),tt.status==="fulfilled"?s(tt.value):(console.error("Failed to load config for learning tab:",tt.reason),l||d("Failed to load config")),Te.status==="fulfilled"?p(Te.value):console.error("Failed to load learning history:",Te.reason),lt.status==="fulfilled"&&lt.value&&typeof lt.value=="object"){const _t=lt.value.s_index;_t&&typeof _t=="object"&&y({mode:_t.mode,base_factor:_t.base_factor,factor:_t.factor,max_factor:_t.max_factor})}gt.status==="fulfilled"?I(gt.value):console.error("Failed to load daily learning metrics:",gt.reason),o(!1)}),()=>{H=!0}},[]);const q=t?.metrics,Z=q?.completed_learning_runs??q?.total_learning_runs??0,re=q?.failed_learning_runs??0,J=q?.days_with_data??0,de=NW(q?.db_size_bytes),le=t?.enabled===!0,te=q?.last_learning_run??t?.last_updated,se=q?.last_observation,W=t?.sync_interval_minutes,X=t?.last_error,ae=q&&Object.keys(q).length>0||Z>0||re>0||J>0,oe=U?.s_index_base_factor,me=U?.pv_error_mean_abs_kwh,F=U?.load_error_mean_abs_kwh,ee=async()=>{if(!(!le||b)){j(!0),N(null);try{const H=await De.learningRun(),pe=[];H.message&&pe.push(H.message),typeof H.changes_applied=="number"&&pe.push(`changes applied: ${H.changes_applied}`),!pe.length&&H.status&&pe.push(H.status),N(pe.join("  ")||"Learning run completed.")}catch(H){console.error("Failed to run learning:",H),N("Failed to run learning (see logs).")}finally{j(!1);try{const H=await De.learningStatus();e(H);const pe=await De.learningHistory();p(pe)}catch(H){console.error("Failed to refresh learning status/history after run:",H)}}}},xe=async()=>{if(!M){R(!0),z(null);try{const H=await De.learningLoops(),pe=[];Object.entries(H).forEach(([Ue,tt])=>{if(!tt||typeof tt!="object")return;const Te=tt.status||"no_changes";pe.push(`${Ue}: ${Te}`)}),z(pe.length?pe.join("  "):"No loops reported any changes.")}catch(H){console.error("Failed to test learning loops:",H),z("Failed to test loops (see logs).")}finally{R(!1)}}};return A.useEffect(()=>{if(!V.current)return;const H=h?.runs??[],pe=h?.s_index_history??[];if(!H.length&&!pe.length){O.current&&(O.current.destroy(),O.current=null);return}const Se=new Map;H.forEach(st=>{const fn=new Date(st.started_at);if(Number.isNaN(fn.getTime()))return;const es=fn.toISOString().slice(0,10),vn=Se.get(es)??0,ds=typeof st.changes_applied=="number"?st.changes_applied:0;Se.set(es,vn+ds)});const Ue=new Set;for(const st of Se.keys())Ue.add(st);pe.forEach(st=>{st.date&&Ue.add(st.date)});const tt=Array.from(Ue).sort(),Te=tt,lt=tt.map(st=>Se.get(st)??0),gt=new Map;pe.forEach(st=>{gt.set(st.date,st.value!==null&&st.value!==void 0?st.value:null)});const _t=tt.map(st=>gt.has(st)?gt.get(st):null),Bt={labels:Te,datasets:[{type:"bar",label:"Changes applied",data:lt,backgroundColor:"rgba(244, 143, 177, 0.7)",borderRadius:4,yAxisID:"y"},{type:"line",label:"S-index factor",data:_t,borderColor:"rgba(129, 212, 250, 0.9)",backgroundColor:"rgba(129, 212, 250, 0.2)",tension:.2,pointRadius:2,yAxisID:"y1"}]},Mt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#a6b0bf",usePointStyle:!0}},tooltip:{callbacks:{label:st=>st.dataset.label==="Changes applied"?`Changes applied: ${st.parsed.y}`:st.dataset.label==="S-index factor"?`S-index: ${st.parsed.y.toFixed(3)}`:`${st.dataset.label}: ${st.parsed.y}`}}},scales:{x:{ticks:{color:"#a6b0bf",maxRotation:0},grid:{display:!1}},y:{ticks:{color:"#a6b0bf",stepSize:1},grid:{color:"rgba(255,255,255,0.06)"},beginAtZero:!0,position:"left",title:{display:!1}},y1:{ticks:{color:"#a6b0bf"},grid:{display:!1},beginAtZero:!1,position:"right",title:{display:!1}}}};if(O.current){O.current.data=Bt,O.current.options=Mt,O.current.update();return}return O.current=new li(V.current,{type:"bar",data:Bt,options:Mt}),()=>{O.current&&(O.current.destroy(),O.current=null)}},[h]),u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12",children:[u.jsxs("div",{className:"mb-6 flex items-baseline justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-muted",children:"Learning Engine"}),u.jsx("div",{className:"text-[13px] text-muted/80",children:"Status, metrics, and history for the automatic tuning loop."})]}),u.jsxs("div",{className:"text-[11px] text-muted",children:[a&&"Loading",!a&&l&&l]})]}),u.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[u.jsxs(Ge,{className:"p-5 lg:col-span-1",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Overview"}),u.jsxs("div",{className:"space-y-2 text-sm text-muted",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Learning"}),u.jsx("span",{className:`rounded-pill border px-2.5 py-0.5 text-[11px] ${le?"border-emerald-500/60 text-emerald-300":"border-line/70 text-muted"}`,children:le?"enabled":"disabled"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Last run"}),u.jsx("span",{children:cy(te)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Last observation"}),u.jsx("span",{children:cy(se)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Sync interval"}),u.jsx("span",{children:W!=null?`${W} min`:""})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"SQLite path"}),u.jsx("span",{className:"truncate max-w-[12rem] text-[11px] text-muted/80",children:t?.sqlite_path||n?.learning?.sqlite_path||""})]}),u.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[u.jsx("button",{className:"rounded-pill bg-accent text-canvas px-3 py-1.5 text-[11px] font-semibold disabled:opacity-40",onClick:ee,disabled:!le||b,children:b?"Running":"Run learning now"}),u.jsx("button",{className:"rounded-pill border border-line/70 px-3 py-1.5 text-[11px] font-semibold text-muted hover:border-accent disabled:opacity-40",onClick:xe,disabled:M,children:M?"Testing loops":"Test loops"})]}),(T||E)&&u.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-muted/90",children:[T&&u.jsx("div",{children:T}),E&&u.jsx("div",{children:E})]}),!a&&!l&&!le&&u.jsxs("div",{className:"mt-3 rounded-xl2 border border-dashed border-line/60 bg-surface2/60 px-3 py-2 text-[12px] text-muted/90",children:["Learning is currently ",u.jsx("span",{className:"font-semibold",children:"disabled"}),". Enable it in the Settings  Parameters section to start collecting data."]}),!a&&!l&&le&&!ae&&u.jsx("div",{className:"mt-3 rounded-xl2 border border-dashed border-line/60 bg-surface2/60 px-3 py-2 text-[12px] text-muted/90",children:"Learning is enabled but no runs have been recorded yet. This panel will fill in after the planner has accumulated enough data."}),!a&&!l&&X&&u.jsxs("div",{className:"mt-3 rounded-xl2 border border-amber-500/60 bg-amber-500/5 px-3 py-2 text-[12px] text-amber-200",children:[u.jsx("div",{className:"font-semibold mb-0.5",children:"Last learning error"}),u.jsx("div",{className:"line-clamp-3 break-words",children:X})]})]})]}),u.jsxs(Ge,{className:"p-5 lg:col-span-2",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Metrics"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4",children:[u.jsx(Fr,{label:"Completed runs",value:Z?Z.toString():"0"}),u.jsx(Fr,{label:"Failed runs",value:re?re.toString():"0"}),u.jsx(Fr,{label:"Days with data",value:J?J.toString():"0"}),u.jsx(Fr,{label:"DB size",value:de})]}),oe!=null&&u.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-[11px] text-muted",children:[u.jsxs("div",{children:[u.jsx("div",{className:"uppercase tracking-wide text-[10px] text-muted/70",children:"Learned S-index base"}),u.jsx("div",{className:"mt-0.5 text-[13px]",children:oe.toFixed(3)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"uppercase tracking-wide text-[10px] text-muted/70",children:"PV MAE (kWh)"}),u.jsx("div",{className:"mt-0.5 text-[13px]",children:me!=null?me.toFixed(3):""})]}),u.jsxs("div",{children:[u.jsx("div",{className:"uppercase tracking-wide text-[10px] text-muted/70",children:"Load MAE (kWh)"}),u.jsx("div",{className:"mt-0.5 text-[13px]",children:F!=null?F.toFixed(3):""})]})]})]})]}),u.jsxs("div",{className:"grid gap-6 mt-6 lg:grid-cols-3",children:[u.jsxs(Ge,{className:"p-5 lg:col-span-2",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Parameter impact"}),u.jsx("div",{className:"text-sm text-muted/80",children:"Read-only snapshot of key thresholds that learning can adjust (decision thresholds, S-index factors, daily change limits). Edits are made in the Settings tab."}),u.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-muted/90 md:grid-cols-2",children:[u.jsxs("div",{className:"rounded-xl2 border border-line/60 px-3 py-2",children:[u.jsx("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-muted",children:u.jsx("span",{children:"Decision thresholds"})}),u.jsxs("div",{className:"mt-2 space-y-1.5 text-[13px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Battery use margin"}),u.jsxs("span",{className:"tabular-nums",children:[n?.decision_thresholds?.battery_use_margin_sek??""," ",u.jsx("span",{className:"text-[11px] text-muted",children:"SEK/kWh"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Battery  Water margin"}),u.jsxs("span",{className:"tabular-nums",children:[n?.decision_thresholds?.battery_water_margin_sek??""," ",u.jsx("span",{className:"text-[11px] text-muted",children:"SEK/kWh"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Export profit margin"}),u.jsxs("span",{className:"tabular-nums",children:[n?.decision_thresholds?.export_profit_margin_sek??""," ",u.jsx("span",{className:"text-[11px] text-muted",children:"SEK/kWh"})]})]})]})]}),u.jsxs("div",{className:"rounded-xl2 border border-line/60 px-3 py-2",children:[u.jsx("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-muted",children:u.jsx("span",{children:"S-index & learning limits"})}),u.jsxs("div",{className:"mt-2 space-y-1.5 text-[13px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Current S-index"}),u.jsxs("span",{className:"tabular-nums",children:[x?.factor??x?.base_factor??n?.s_index?.base_factor??"",x?.mode&&u.jsxs("span",{className:"ml-1 text-[11px] text-muted",children:["(",x.mode,")"]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"S-index base factor"}),u.jsxs("span",{className:"tabular-nums",children:[n?.s_index?.base_factor??"",n?.learning?.max_daily_param_change?.s_index_base_factor?u.jsx("span",{className:"ml-1 rounded-full bg-emerald-500/10 px-1.5 py-0.5 text-[10px] text-emerald-300",children:"learning can adjust"}):null]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"PV deficit weight"}),u.jsxs("span",{className:"tabular-nums",children:[n?.s_index?.pv_deficit_weight??"",n?.learning?.max_daily_param_change?.s_index_pv_deficit_weight?u.jsx("span",{className:"ml-1 rounded-full bg-emerald-500/10 px-1.5 py-0.5 text-[10px] text-emerald-300",children:"learning can adjust"}):null]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Temp weight"}),u.jsxs("span",{className:"tabular-nums",children:[n?.s_index?.temp_weight??"",n?.learning?.max_daily_param_change?.s_index_temp_weight?u.jsx("span",{className:"ml-1 rounded-full bg-emerald-500/10 px-1.5 py-0.5 text-[10px] text-emerald-300",children:"learning can adjust"}):null]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Min improvement"}),u.jsx("span",{className:"tabular-nums",children:n?.learning?.min_improvement_threshold??""})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Min samples"}),u.jsx("span",{className:"tabular-nums",children:n?.learning?.min_sample_threshold??""})]})]})]})]})]}),u.jsxs(Ge,{className:"p-5 lg:col-span-1",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"History"}),u.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"Recent learning runs and how many parameter changes were applied."}),u.jsx("div",{className:"h-40 mb-3",children:u.jsx("canvas",{ref:V,className:"w-full h-full"})}),h?.recent_changes&&h.recent_changes.length>0&&u.jsxs("div",{className:"mt-1 border-t border-line/50 pt-2",children:[u.jsx("div",{className:"mb-1 text-[11px] uppercase tracking-wide text-muted",children:"Recent changes"}),u.jsx("div",{className:"space-y-1.5 max-h-32 overflow-auto text-[11px] text-muted/90",children:h.recent_changes.slice(0,6).map((H,pe)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"truncate max-w-[10rem]",children:H.param_path}),u.jsxs("span",{className:"ml-2 tabular-nums text-right",children:[H.old_value??""," ",u.jsx("span",{className:"mx-0.5 text-muted/70",children:""}),H.new_value??""]})]}),u.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted/70",children:[u.jsxs("span",{children:[H.loop||"learning"," ",H.reason&&u.jsxs("span",{className:"ml-1 line-clamp-1",children:[" ",H.reason]})]}),H.started_at&&u.jsx("span",{children:cy(H.started_at)})]})]},`${H.run_id??"r"}-${H.param_path}-${pe}`))})]})]})]})]})}function DW(){const[t,e]=A.useState([]),[n,s]=A.useState(!1),[a,o]=A.useState(null),[l,d]=A.useState("all"),[h,p]=A.useState("all"),[x,y]=A.useState(null),[b,j]=A.useState(!1),[T,N]=A.useState(null),[M,R]=A.useState("today"),E=A.useRef(null),z=A.useRef(null);A.useEffect(()=>{s(!0),o(null),De.debugLogs().then(O=>e(O.logs??[])).catch(O=>{console.error("Failed to fetch debug logs:",O),o("Failed to load logs")}).finally(()=>s(!1))},[]),A.useEffect(()=>{(()=>{j(!0),N(null);let O="today";if(M==="yesterday"){const q=new Date;q.setDate(q.getDate()-1),O=q.toISOString().slice(0,10)}De.historySoc(O).then(q=>y(q)).catch(q=>{console.error("Failed to fetch historic SoC:",q),N("Failed to load SoC history")}).finally(()=>j(!1))})()},[M]);const U=t.filter(V=>{if(l==="all")return!0;const O=(V.level||"").toUpperCase();return l==="error"?O==="ERROR"||O==="CRITICAL":O==="WARN"||O==="WARNING"||O==="ERROR"||O==="CRITICAL"}).filter(V=>{if(h==="all")return!0;const O=new Date(V.timestamp).getTime();if(Number.isNaN(O))return!0;const Z=Date.now()-O,re=3600*1e3;return h==="1h"?Z<=re:h==="6h"?Z<=6*re:h==="24h"?Z<=24*re:!0}),I=t.filter(V=>{const O=(V.level||"").toUpperCase();return O==="ERROR"||O==="CRITICAL"});return A.useEffect(()=>{if(!E.current)return;const V=x?.slots??[];if(!V.length){z.current&&(z.current.destroy(),z.current=null);return}const O=V.map(J=>{const de=new Date(J.timestamp);return Number.isNaN(de.getTime())?"":de.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}),q=V.map(J=>J.soc_percent??0),Z={labels:O,datasets:[{type:"line",label:"SoC (%)",data:q,borderColor:"rgba(129, 200, 253, 0.9)",backgroundColor:"rgba(129, 200, 253, 0.15)",pointRadius:0,tension:.25}]},re={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:J=>`SoC: ${J.parsed.y?.toFixed(1)??"--"}%`}}},scales:{x:{ticks:{color:"#a6b0bf",maxRotation:0},grid:{display:!1}},y:{ticks:{color:"#a6b0bf",stepSize:10},grid:{color:"rgba(255,255,255,0.06)"},beginAtZero:!0,suggestedMax:100}}};if(z.current){z.current.data=Z,z.current.options=re,z.current.update();return}return z.current=new li(E.current,{type:"line",data:Z,options:re}),()=>{z.current&&(z.current.destroy(),z.current=null)}},[x]),u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"text-sm text-muted",children:"Debug & Diagnostics"}),u.jsx("div",{className:"text-[13px] text-muted/80",children:"Logs and SoC history to understand what the planner has been doing recently."})]}),u.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[u.jsxs(Ge,{className:"p-5 lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("div",{className:"text-sm text-muted",children:"Logs"}),u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[u.jsx("button",{className:"rounded-pill border border-line/60 px-3 py-1 hover:border-accent disabled:opacity-40",onClick:()=>{s(!0),o(null),De.debugLogs().then(V=>e(V.logs??[])).catch(V=>{console.error("Failed to refresh debug logs:",V),o("Failed to refresh logs")}).finally(()=>s(!1))},disabled:n,children:n?"Refreshing":"Refresh"}),u.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:h,onChange:V=>p(V.target.value),children:[u.jsx("option",{value:"all",children:"All time"}),u.jsx("option",{value:"1h",children:"Last 1 hour"}),u.jsx("option",{value:"6h",children:"Last 6 hours"}),u.jsx("option",{value:"24h",children:"Last 24 hours"})]}),u.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:l,onChange:V=>d(V.target.value),children:[u.jsx("option",{value:"all",children:"All levels"}),u.jsx("option",{value:"warn_error",children:"Warn + Error"}),u.jsx("option",{value:"error",children:"Errors only"})]})]})]}),a&&u.jsx("div",{className:"text-[11px] text-amber-400 mb-2",children:a}),u.jsxs("div",{className:"h-64 overflow-auto rounded-xl2 border border-line/60 bg-surface2/40 text-[11px] font-mono text-muted/90",children:[U.length===0&&!n&&!a&&u.jsx("div",{className:"px-3 py-2 text-muted/70",children:"No logs captured yet."}),U.map((V,O)=>u.jsxs("div",{className:"px-3 py-1.5 border-b border-line/20 last:border-b-0",children:[u.jsx("span",{className:"text-muted/60 mr-2",children:new Date(V.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),u.jsx("span",{className:"mr-2 rounded-full px-1.5 py-0.5 text-[10px] uppercase tracking-wide border border-line/50",children:V.level}),u.jsx("span",{className:"text-muted/70 mr-2",children:V.logger}),u.jsx("span",{children:V.message})]},`${V.timestamp}-${O}`))]})]}),u.jsxs(Ge,{className:"p-5 lg:col-span-1",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Recent events"}),u.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"Quick view of recent errors and warnings from the log stream."}),u.jsxs("div",{className:"space-y-2 text-[12px] text-muted/90",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Total log entries"}),u.jsx("span",{className:"tabular-nums",children:t.length})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Error/critical entries"}),u.jsx("span",{className:"tabular-nums",children:I.length})]}),u.jsx("div",{className:"mt-3 text-[11px] text-muted/70 uppercase tracking-wide",children:"Last errors"}),u.jsxs("div",{className:"space-y-1.5 max-h-40 overflow-auto",children:[I.slice(-5).map((V,O)=>u.jsxs("div",{className:"rounded-md bg-rose-500/5 border border-rose-500/40 px-2 py-1.5",children:[u.jsxs("div",{className:"text-[10px] text-rose-200/80 mb-0.5",children:[new Date(V.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})," "," ",V.logger]}),u.jsx("div",{className:"text-[11px] text-rose-50/90 line-clamp-2",children:V.message})]},`${V.timestamp}-err-${O}`)),I.length===0&&u.jsx("div",{className:"text-[11px] text-muted/70",children:"No error-level entries yet."})]})]})]})]}),u.jsx("div",{className:"grid gap-6 mt-6 lg:grid-cols-3",children:u.jsxs(Ge,{className:"p-5 lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("div",{className:"text-sm text-muted",children:"Historical SoC"}),u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[u.jsx("span",{className:"text-muted/70",children:"Range"}),u.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:M,onChange:V=>R(V.target.value),children:[u.jsx("option",{value:"today",children:"Today"}),u.jsx("option",{value:"yesterday",children:"Yesterday"})]})]})]}),u.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"SoC (%) over the selected day from the learning database. Use this to correlate planner behaviour with actual SoC movement."}),T&&u.jsx("div",{className:"text-[11px] text-amber-400 mb-2",children:T}),u.jsx("div",{className:"h-48",children:u.jsx("canvas",{ref:E,className:"w-full h-full"})})]})})]})}function CW({value:t,onChange:e}){const n=A.useMemo(()=>{if(typeof t!="number"||Number.isNaN(t))return 0;let y=t%360;return y<0&&(y+=360),y},[t]),[s,a]=A.useState(!1),o=y=>{const b=Math.round(y),j=[0,45,90,135,180,225,270,315];let T=b,N=1/0;for(const M of j){const R=Math.abs(b-M);R<N&&R<=7&&(N=R,T=M)}return T},l=y=>{const b=y.currentTarget.getBoundingClientRect(),j=b.left+b.width/2,T=b.top+b.height/2,N=y.clientX-j,M=y.clientY-T;let E=Math.atan2(N,-M)*180/Math.PI;E<0&&(E+=360);const z=o(E);e(z)},d=y=>{a(!0);try{y.currentTarget.setPointerCapture(y.pointerId)}catch{}l(y)},h=y=>{s&&l(y)},p=y=>{if(s){a(!1);try{y.currentTarget.releasePointerCapture(y.pointerId)}catch{}}},x=`rotate(${n} 24 24)`;return u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"relative h-16 w-16 cursor-pointer",onPointerDown:d,onPointerMove:h,onPointerUp:p,"aria-label":"Solar azimuth dial",role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":Math.round(n),children:u.jsxs("svg",{viewBox:"0 0 48 48",className:"h-full w-full",children:[u.jsx("circle",{cx:"24",cy:"24",r:"21",className:"fill-surface2 stroke-line/60",strokeWidth:"2"}),u.jsx("g",{children:Array.from({length:12}).map((y,b)=>{const j=b*30,T=j%90===0,N=!T&&j%45===0,M=21,R=T?16:N?18:19,E=(j-90)*Math.PI/180,z=24+M*Math.cos(E),U=24+M*Math.sin(E),I=24+R*Math.cos(E),V=24+R*Math.sin(E),O=T||N?"stroke-line/80":"stroke-line/40",q=T?1.6:1;return u.jsx("line",{x1:z,y1:U,x2:I,y2:V,className:O,strokeWidth:q},j)})}),u.jsx("text",{x:"24",y:"9",textAnchor:"middle",className:"fill-muted text-[8px]",children:"N"}),u.jsx("text",{x:"24",y:"45",textAnchor:"middle",className:"fill-muted text-[8px]",children:"S"}),u.jsx("text",{x:"43",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"E"}),u.jsx("text",{x:"5",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"W"}),u.jsxs("g",{transform:x,children:[u.jsx("line",{x1:"24",y1:"24",x2:"24",y2:"6",className:"stroke-accent",strokeWidth:"2.2",strokeLinecap:"round"}),u.jsx("circle",{cx:"24",cy:"24",r:"2.5",className:"fill-accent"})]})]})}),u.jsxs("div",{className:"text-[11px] text-muted leading-tight",children:[u.jsxs("div",{className:"font-medium text-text",children:[Math.round(n),""]}),u.jsx("div",{children:"0 = North  90 = East  180 = South  270 = West"})]})]})}function EW({value:t,onChange:e}){const n=A.useMemo(()=>{if(typeof t!="number"||Number.isNaN(t))return 0;let y=t;return y<0&&(y=0),y>90&&(y=90),y},[t]),[s,a]=A.useState(!1),o=y=>{const b=y.currentTarget.getBoundingClientRect(),j=b.left+b.width/2,T=b.top+b.height/2,N=y.clientX-j,M=y.clientY-T;let E=Math.atan2(N,-M)*180/Math.PI;E<0&&(E+=360),(E<270||E>360)&&(E>=0&&E<=135?E=360:E=270);let z=360-E;z<0&&(z=0),z>90&&(z=90);const U=Math.round(z/5)*5;e(U)},l=y=>{a(!0);try{y.currentTarget.setPointerCapture(y.pointerId)}catch{}o(y)},d=y=>{s&&o(y)},h=y=>{if(s){a(!1);try{y.currentTarget.releasePointerCapture(y.pointerId)}catch{}}},x=`rotate(${A.useMemo(()=>360-n,[n])} 24 24)`;return u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"relative h-16 w-16 cursor-pointer",onPointerDown:l,onPointerMove:d,onPointerUp:h,"aria-label":"Solar tilt dial",role:"slider","aria-valuemin":0,"aria-valuemax":90,"aria-valuenow":Math.round(n),children:u.jsxs("svg",{viewBox:"0 0 48 48",className:"h-full w-full",children:[u.jsx("circle",{cx:"24",cy:"24",r:"21",className:"fill-surface2 stroke-line/40",strokeWidth:"2"}),u.jsx("path",{d:"M3 24 A21 21 0 0 1 24 3",className:"fill-none stroke-accent/70",strokeWidth:"2.2"}),u.jsx("g",{children:Array.from({length:7}).map((y,b)=>{const j=b*15,T=360-j,N=21,M=j%30===0?18:19,R=(T-90)*Math.PI/180,E=24+N*Math.cos(R),z=24+N*Math.sin(R),U=24+M*Math.cos(R),I=24+M*Math.sin(R),V=j===0||j===90?"stroke-line/80":"stroke-line/60",O=j===0||j===90?1.6:1.2;return u.jsx("line",{x1:E,y1:z,x2:U,y2:I,className:V,strokeWidth:O},j)})}),u.jsx("text",{x:"24",y:"9",textAnchor:"middle",className:"fill-muted text-[8px]",children:"0"}),u.jsx("text",{x:"5",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"90"}),u.jsxs("g",{transform:x,children:[u.jsx("line",{x1:"24",y1:"24",x2:"24",y2:"6",className:"stroke-accent",strokeWidth:"2.2",strokeLinecap:"round"}),u.jsx("circle",{cx:"24",cy:"24",r:"2.5",className:"fill-accent"})]})]})}),u.jsxs("div",{className:"text-[11px] text-muted leading-tight",children:[u.jsxs("div",{className:"font-medium text-text",children:[Math.round(n),""]}),u.jsx("div",{children:"Drag along the arc: 0 = flat  90 = vertical panel"})]})]})}function AW({entities:t,value:e,onChange:n,placeholder:s="Select entity...",disabled:a=!1,loading:o=!1}){const[l,d]=A.useState(!1),[h,p]=A.useState(""),[x,y]=A.useState(0),b=A.useRef(null),j=A.useRef(null),T=A.useRef(null),N=t.find(V=>V.entity_id===e),M=A.useMemo(()=>{if(!h.trim())return t;const V=h.toLowerCase();return t.filter(O=>O.entity_id.toLowerCase().includes(V)||O.friendly_name.toLowerCase().includes(V))},[t,h]),R=A.useMemo(()=>{const V={};return M.forEach(O=>{const q=O.domain||O.entity_id.split(".")[0];V[q]||(V[q]=[]),V[q].push(O)}),V},[M]),E=A.useMemo(()=>{const V=[];return Object.values(R).forEach(O=>V.push(...O)),V},[R]);A.useEffect(()=>{y(0)},[M.length]),A.useEffect(()=>{const V=O=>{b.current&&!b.current.contains(O.target)&&(d(!1),p(""))};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]),A.useEffect(()=>{if(l&&T.current){const V=T.current.querySelector('[data-highlighted="true"]');V&&V.scrollIntoView({block:"nearest"})}},[x,l]);const z=V=>{n(V.entity_id),d(!1),p("")},U=V=>{if(!l){(V.key==="Enter"||V.key===" "||V.key==="ArrowDown")&&(V.preventDefault(),d(!0));return}switch(V.key){case"ArrowDown":V.preventDefault(),y(O=>Math.min(O+1,E.length-1));break;case"ArrowUp":V.preventDefault(),y(O=>Math.max(O-1,0));break;case"Enter":V.preventDefault(),E[x]&&z(E[x]);break;case"Escape":V.preventDefault(),d(!1),p("");break}},I=V=>{V.stopPropagation(),n(""),d(!1),p("")};return u.jsxs("div",{ref:b,className:"relative",children:[u.jsxs("button",{type:"button",disabled:a,onClick:()=>{a||(d(!l),l||setTimeout(()=>j.current?.focus(),0))},onKeyDown:U,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[u.jsx("span",{className:N?"text-text":"text-muted",children:o?"Loading...":N?.friendly_name||N?.entity_id||s}),u.jsxs("div",{className:"flex items-center gap-1",children:[e&&!a&&u.jsx("button",{type:"button",onClick:I,className:"p-0.5 rounded hover:bg-line/60 text-muted hover:text-text",tabIndex:-1,children:u.jsx(ic,{className:"h-3.5 w-3.5"})}),u.jsx(Tp,{className:`h-4 w-4 text-muted transition-transform ${l?"rotate-180":""}`})]})]}),l&&u.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[280px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float",children:[u.jsx("div",{className:"p-2 border-b border-line",children:u.jsxs("div",{className:"relative",children:[u.jsx(Av,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),u.jsx("input",{ref:j,type:"text",value:h,onChange:V=>p(V.target.value),onKeyDown:U,placeholder:"Search entities...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40"})]})}),u.jsx("div",{ref:T,className:"max-h-[240px] overflow-y-auto p-1",children:M.length===0?u.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No entities found"}):Object.entries(R).map(([V,O])=>u.jsxs("div",{className:"mb-1",children:[u.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:V}),O.map(q=>{const re=E.findIndex(de=>de.entity_id===q.entity_id)===x,J=q.entity_id===e;return u.jsxs("button",{type:"button","data-highlighted":re,onClick:()=>z(q),className:`
                                                    w-full text-left px-2 py-1.5 rounded-md text-sm
                                                    transition-colors
                                                    ${re?"bg-accent/20 text-text":"text-text hover:bg-surface2"}
                                                    ${J?"font-medium":""}
                                                `,children:[u.jsx("div",{className:"truncate",children:q.friendly_name||q.entity_id}),u.jsx("div",{className:"text-[10px] text-muted truncate",children:q.entity_id})]},q.entity_id)})]},V))})]})]})}function OW({value:t,onChange:e,placeholder:n="Select service (e.g. notify.mobile_app)...",disabled:s=!1}){const[a,o]=A.useState(!1),[l,d]=A.useState(""),[h,p]=A.useState([]),[x,y]=A.useState(!1),[b,j]=A.useState(0),T=A.useRef(null),N=A.useRef(null),M=A.useRef(null);A.useEffect(()=>{a&&h.length===0&&!x&&(y(!0),De.haServices().then(O=>{p(O.services||[])}).catch(O=>{console.error("Failed to fetch HA services:",O)}).finally(()=>{y(!1)}))},[a,h.length,x]);const R=A.useMemo(()=>{if(!l.trim())return h;const O=l.toLowerCase();return h.filter(q=>q.toLowerCase().includes(O))},[h,l]),E=A.useMemo(()=>{const O={};return R.forEach(q=>{const Z=q.split(".")[0]||"other";O[Z]||(O[Z]=[]),O[Z].push(q)}),O},[R]),z=A.useMemo(()=>{const O=[];return Object.values(E).forEach(q=>O.push(...q)),O},[E]);A.useEffect(()=>{j(0)},[R.length]),A.useEffect(()=>{const O=q=>{T.current&&!T.current.contains(q.target)&&(o(!1),d(""))};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]),A.useEffect(()=>{if(a&&M.current){const O=M.current.querySelector('[data-highlighted="true"]');O&&O.scrollIntoView({block:"nearest"})}},[b,a]);const U=O=>{e(O),o(!1),d("")},I=O=>{if(!a){(O.key==="Enter"||O.key===" "||O.key==="ArrowDown")&&(O.preventDefault(),o(!0));return}switch(O.key){case"ArrowDown":O.preventDefault(),j(q=>Math.min(q+1,z.length-1));break;case"ArrowUp":O.preventDefault(),j(q=>Math.max(q-1,0));break;case"Enter":O.preventDefault(),z[b]&&U(z[b]);break;case"Escape":O.preventDefault(),o(!1),d("");break}},V=O=>{O.stopPropagation(),e(""),o(!1),d("")};return u.jsxs("div",{ref:T,className:"relative",children:[u.jsxs("button",{type:"button",disabled:s,onClick:()=>{s||(o(!a),a||setTimeout(()=>N.current?.focus(),0))},onKeyDown:I,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[u.jsx("span",{className:t?"text-text":"text-muted",children:x&&h.length===0?"Loading services...":t||n}),u.jsxs("div",{className:"flex items-center gap-1",children:[t&&!s&&u.jsx("button",{type:"button",onClick:V,className:"p-0.5 rounded hover:bg-line/60 text-muted hover:text-text",tabIndex:-1,children:u.jsx(ic,{className:"h-3.5 w-3.5"})}),u.jsx(Tp,{className:`h-4 w-4 text-muted transition-transform ${a?"rotate-180":""}`})]})]}),a&&u.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[280px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float",children:[u.jsx("div",{className:"p-2 border-b border-line",children:u.jsxs("div",{className:"relative",children:[u.jsx(Av,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),u.jsx("input",{ref:N,type:"text",value:l,onChange:O=>d(O.target.value),onKeyDown:I,placeholder:"Search services...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40"})]})}),u.jsx("div",{ref:M,className:"max-h-[240px] overflow-y-auto p-1 scrollbar-thin",children:x&&h.length===0?u.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted animate-pulse",children:"Loading from Home Assistant..."}):R.length===0?u.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No services found"}):Object.entries(E).map(([O,q])=>u.jsxs("div",{className:"mb-1",children:[u.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:O}),q.map(Z=>{const J=z.indexOf(Z)===b,de=Z===t;return u.jsx("button",{type:"button","data-highlighted":J,onClick:()=>U(Z),className:`
                                                    w-full text-left px-2 py-1.5 rounded-md text-sm
                                                    transition-colors
                                                    ${J?"bg-accent/20 text-text":"text-text hover:bg-surface2"}
                                                    ${de?"font-medium":""}
                                                `,children:u.jsx("div",{className:"truncate",children:Z})},Z)})]},O))})]})]})}function Cr({text:t,className:e=""}){const[n,s]=A.useState(!1);return t?u.jsxs("div",{className:`relative inline-block ${e}`,children:[u.jsx("button",{type:"button",className:"ml-1.5 text-muted/60 hover:text-accent transition-colors",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onFocus:()=>s(!0),onBlur:()=>s(!1),children:u.jsx(vA,{className:"w-3.5 h-3.5"})}),n&&u.jsxs("div",{className:"absolute z-50 w-64 p-2.5 text-xs bg-surface2 border border-line rounded-lg shadow-lg left-0 bottom-full mb-1.5",children:[u.jsx("div",{className:"text-muted leading-relaxed",children:t}),u.jsx("div",{className:"absolute w-2 h-2 bg-surface2 border-r border-b border-line transform rotate-45 left-3 -bottom-1"})]})]}):null}const RW="IANA timezone for all schedule calculations",Er={timezone:RW,"advisor.enable_llm":"Enable LLM-powered advice on Dashboard","advisor.model":"OpenRouter model identifier (requires API key in secrets.yaml)","advisor.personality":"Advice style: concise | friendly | technical","advisor.auto_fetch":"Automatically fetch advice when Dashboard loads","system.has_solar":"Enable PV forecasting & solar-related features","system.has_battery":"Enable battery control & grid arbitrage","system.has_water_heater":"Enable water heating optimization","system.grid.max_power_kw":"HARD limit: max grid import (cannot be exceeded)","system.inverter.max_power_kw":"Maximum inverter AC power output","system.location.latitude":"Decimal degrees, positive north (for PV forecasting)","system.location.longitude":"Decimal degrees, positive east (for PV forecasting)","system.solar_array.azimuth":"Panel direction: 0=North, 90=East, 180=South, 270=West","system.solar_array.kwp":"Total DC peak power of PV array in kilowatts","system.solar_array.tilt":"Panel angle from horizontal: 0=flat, 90=vertical","battery.max_soc_percent":"Planner target ceiling (BMS still enforces absolute limit)","battery_economics.battery_cycle_cost_kwh":"Degradation cost applied per kWh cycled through the battery","charging_strategy.charge_threshold_percentile":"Bottom X% of daily prices are considered 'cheap'","charging_strategy.cheap_price_tolerance_sek":"Extends 'cheap' window to prices within this tolerance","charging_strategy.price_smoothing_sek_kwh":"Groups slots slightly above cheapest into charge window","charging_strategy.block_consolidation_tolerance_sek":"Price tolerance for merging adjacent charge blocks","charging_strategy.consolidation_max_gap_slots":"Max gap (in 15-min slots) to bridge when consolidating","strategic_charging.price_threshold_sek":"[NOT IMPLEMENTED] Floor price for opportunistic charging","strategic_charging.target_soc_percent":"SoC target for cheap window expansion (used in windows.py)","water_heating.power_kw":"Power consumption of the water heater","water_heating.min_hours_per_day":"Minimum run-time per day","water_heating.min_kwh_per_day":"Optional; defaults to power * hours when unset","water_heating.max_blocks_per_day":"Prefer single block, up to two if needed","water_heating.defer_up_to_hours":"Allow deferring into early tomorrow up to N hours if cheaper","water_heating.plan_days_ahead":"Plan at most today + 1 day (tomorrow) within 48h horizon","water_heating.max_hours_between_heating":"Max gap between heating sessions (0 = no constraint)","water_heating.comfort_level":"1-5 (EconomyMaximum) - controls gap penalty","water_heating.min_spacing_hours":"Min gap between starts to avoid efficiency loss","water_heating.spacing_penalty_sek":"Soft penalty for frequent starts","water_heating.vacation_mode.enabled":"Master switch (HA entity can override when ON)","water_heating.vacation_mode.anti_legionella_temp_c":"Target temperature for safety cycle","water_heating.vacation_mode.anti_legionella_interval_days":"Run cycle every N days","water_heating.vacation_mode.anti_legionella_duration_hours":"Duration at power_kw (e.g., 3h * 3kW = 9kWh)","s_index.mode":"Options: probabilistic | dynamic","s_index.static_factor":"Used when mode=static","s_index.base_factor":"Starting point for dynamic calculationsWfz","s_index.max_factor":"Upper bound clamp for dynamic mode","s_index.pv_deficit_weight":"Weight for PV/load deficit contribution","s_index.temp_weight":"Weight for temperature adjustment","s_index.temp_baseline_c":"Baseline temperature (no adjustment)","s_index.temp_cold_c":"Temperature where adjustment reaches 100%","s_index.s_index_horizon_days":"Number of days ahead to evaluate (integer)","s_index.risk_appetite":"1-5 scale (1=safe, 3=neutral, 5=gambler)","export.enable_export":"[NOT IMPLEMENTED] Master switch for grid export","manual_planning.charge_target_percent":"Cap for manual charge slots","manual_planning.export_target_percent":"Floor target when manually scheduling export","debug.enable_planner_debug":"Enable verbose planner logging","debug.sample_size":"Sample size for debug output charts","automation.enable_scheduler":"Enable automatic schedule regeneration","automation.write_to_mariadb":"Write telemetry to MariaDB (requires secrets.yaml)","automation.external_executor_mode":"Use external executor instead of built-in","automation.schedule.every_minutes":"How often to regenerate schedule","automation.schedule.jitter_minutes":"Random delay to avoid thundering herd","automation.ml_training.enabled":"Enable automatic ML model retraining","automation.ml_training.run_days":"Days of week to train (0=Mon, 6=Sun)","automation.ml_training.run_time":"Time of day to run training (HH:MM)","learning.default_battery_cost_sek_per_kwh":"Conservative default until dynamic cost is recorded","nordpool.price_area":"Nordpool bidding zone (SE1-SE4, NO1-NO5, DK1-DK2, FI, etc.)","nordpool.currency":"Price currency","nordpool.resolution_minutes":"Slot resolution (15, 30, or 60)","pricing.vat_percent":"VAT percentage on electricity","pricing.grid_transfer_fee_sek":"Grid operator transfer fee per kWh","pricing.energy_tax_sek":"Energy tax per kWh","pricing.subscription_fee_sek_per_month":"[FUTURE] Fixed monthly grid subscription (for cost analysis)","forecasting.active_forecast_version":"Forecast engine: aurora (ML) | legacy","forecasting.pv_confidence_percent":"PV forecast scaling (100 = trust forecast fully)","forecasting.load_safety_margin_percent":"Load forecast scaling (>100 = expect more load)","grid.import_limit_kw":"Soft limit for effekttariff (breached with high penalty)","kepler.ramping_cost_sek_per_kw":"Penalty for power changes between slots (reduces sawtooth)","input_sensors.alarm_state":"Alarm panel for occupancy detection (ML feature)","input_sensors.vacation_mode":"Vacation mode toggle (reduces load forecasts)","input_sensors.battery_soc":"Current battery state of charge (%)","input_sensors.pv_power":"Current PV production (W or kW)","input_sensors.load_power":"Current load consumption (W or kW)","input_sensors.total_battery_charge":"Cumulative battery charge (kWh)","input_sensors.total_battery_discharge":"Cumulative battery discharge (kWh)","input_sensors.total_grid_export":"Cumulative grid export (kWh)","input_sensors.total_grid_import":"Cumulative grid import (kWh)","input_sensors.total_load_consumption":"Cumulative load (kWh)","input_sensors.total_pv_production":"Cumulative PV production (kWh)","input_sensors.water_heater_consumption":"Water heater daily energy (kWh)","input_sensors.today_grid_import":"Today's grid import (kWh)","input_sensors.today_grid_export":"Today's grid export (kWh)","input_sensors.today_battery_charge":"Today's battery charge (kWh)","input_sensors.today_pv_production":"Today's PV production (kWh)","input_sensors.today_load_consumption":"Today's load consumption (kWh)","input_sensors.today_net_cost":"Today's net electricity cost","executor.enabled":"Enable executor control loop","executor.shadow_mode":"Log actions but don't execute (for testing)","executor.interval_seconds":"How often to run (default: 5 minutes)","executor.pause_reminder_minutes":"Notify if paused longer than this","executor.history_retention_days":"Keep execution history for N days","executor.automation_toggle_entity":"Master enable/disable switch","executor.manual_override_entity":"Manual override active flag","executor.soc_target_entity":"SoC target input_number","executor.inverter.work_mode_entity":"Inverter mode selector","executor.inverter.work_mode_export":"Value for export mode","executor.inverter.work_mode_zero_export":"Value for zero-export mode","executor.inverter.grid_charging_entity":"Enable/disable grid charging","executor.inverter.max_charging_current_entity":"Max charge current (A)","executor.inverter.max_discharging_current_entity":"Max discharge current (A)","executor.controller.battery_capacity_kwh":"Battery capacity in kWh (for current calculations)","executor.controller.system_voltage_v":"Nominal battery voltage","executor.controller.worst_case_voltage_v":"Minimum voltage for conservative calculations","executor.controller.inverter_ac_limit_kw":"Max AC power output of inverter","executor.controller.charge_efficiency":"Charging efficiency (0-1)","executor.controller.max_charge_a":"Maximum charging current (A)","executor.controller.min_charge_a":"Minimum meaningful charge current (A)","executor.controller.round_step_a":"Round current commands to nearest X amps","executor.controller.write_threshold_a":"Only write if change exceeds X amps","executor.water_heater.target_entity":"HA entity to control","executor.water_heater.temp_off":"Idle mode (legionella-safe minimum)","executor.water_heater.temp_normal":"Scheduled heating target (used by planner)","executor.water_heater.temp_boost":"Manual boost button (Dashboard/Executor)","executor.water_heater.temp_max":"PV dump target + safety limit (never exceeded)","executor.notifications.service":"HA notify service to use","executor.notifications.on_charge_start":"Notify when grid charging starts","executor.notifications.on_charge_stop":"Notify when grid charging stops","executor.notifications.on_export_start":"Notify when export/discharge starts","executor.notifications.on_export_stop":"Notify when export/discharge stops","executor.notifications.on_water_heat_start":"Notify when water heating starts","executor.notifications.on_water_heat_stop":"Notify when water heating stops","executor.notifications.on_soc_target_change":"Notify when SoC target changes","executor.notifications.on_override_activated":"Notify when manual override triggers","executor.notifications.on_error":"Notify on executor errors","dashboard.auto_refresh_enabled":"Auto-refresh dashboard schedule display","dashboard.overlay_defaults":"Default chart overlays","ui.theme":"Color theme name","ui.theme_accent_index":"Accent color index (0-based)","appliances.dishwasher.label":"Display name in UI","appliances.dishwasher.duration_hours":"Typical run duration"};function mv({value:t,onChange:e,options:n,placeholder:s="Select...",disabled:a=!1,className:o="",searchable:l=!1}){const[d,h]=A.useState(!1),[p,x]=A.useState(""),[y,b]=A.useState(0),j=A.useRef(null),T=A.useRef(null),N=A.useRef(null),M=n.find(V=>V.value===t),R=A.useMemo(()=>{if(!p.trim())return n;const V=p.toLowerCase();return n.filter(O=>O.label.toLowerCase().includes(V)||O.value.toLowerCase().includes(V)||O.group?.toLowerCase().includes(V))},[n,p]),E=A.useMemo(()=>{const V={},O=[];return R.forEach(q=>{q.group?(V[q.group]||(V[q.group]=[]),V[q.group].push(q)):O.push(q)}),{groups:V,noGroup:O}},[R]),z=A.useMemo(()=>[...E.noGroup,...Object.values(E.groups).flat()],[E]);A.useEffect(()=>{b(0)},[R.length,d]),A.useEffect(()=>{const V=O=>{j.current&&!j.current.contains(O.target)&&(h(!1),x(""))};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]),A.useEffect(()=>{if(d&&N.current){const V=N.current.querySelector(`[data-index="${y}"]`);V&&V.scrollIntoView({block:"nearest"})}},[y,d]);const U=V=>{e(V),h(!1),x("")},I=V=>{if(!a){if(!d){(V.key==="Enter"||V.key===" "||V.key==="ArrowDown")&&(V.preventDefault(),h(!0));return}switch(V.key){case"ArrowDown":V.preventDefault(),b(O=>Math.min(O+1,z.length-1));break;case"ArrowUp":V.preventDefault(),b(O=>Math.max(O-1,0));break;case"Enter":V.preventDefault(),z[y]&&U(z[y].value);break;case"Escape":V.preventDefault(),h(!1),x("");break;case"Tab":h(!1);break}}};return u.jsxs("div",{ref:j,className:`relative ${o}`,children:[u.jsxs("button",{type:"button",disabled:a,onClick:()=>{a||(h(!d),!d&&l&&setTimeout(()=>T.current?.focus(),0))},onKeyDown:I,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[u.jsx("span",{className:M?"text-text":"text-muted",children:M?.label||s}),u.jsx(Tp,{className:`h-4 w-4 text-muted transition-transform ${d?"rotate-180":""}`})]}),d&&u.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[180px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float animate-in fade-in zoom-in-95 duration-100",children:[l&&u.jsx("div",{className:"p-2 border-b border-line",children:u.jsxs("div",{className:"relative",children:[u.jsx(Av,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),u.jsx("input",{ref:T,type:"text",value:p,onChange:V=>x(V.target.value),placeholder:"Search...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40",onKeyDown:I})]})}),u.jsx("div",{ref:N,className:"max-h-[240px] overflow-y-auto p-1 scrollbar-thin",children:z.length===0?u.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No options found"}):u.jsxs(u.Fragment,{children:[E.noGroup.map((V,O)=>{const q=M?.value===V.value,Z=z[y]?.value===V.value;return u.jsxs("div",{"data-index":y,className:`
                                                flex items-center justify-between px-2 py-1.5 rounded-md text-sm cursor-pointer
                                                ${Z?"bg-accent/20 text-text":"text-text"}
                                                ${q?"font-medium":""}
                                            `,onClick:()=>U(V.value),onMouseEnter:()=>b(z.findIndex(re=>re.value===V.value)),children:[u.jsx("span",{children:V.label}),q&&u.jsx(Iw,{className:"h-3.5 w-3.5 text-accent"})]},V.value)}),Object.entries(E.groups).map(([V,O])=>u.jsxs("div",{className:"mt-1 first:mt-0",children:[u.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:V}),O.map(q=>{const Z=M?.value===q.value,re=z.findIndex(de=>de.value===q.value),J=re===y;return u.jsxs("div",{"data-index":re,className:`
                                                        flex items-center justify-between px-2 py-1.5 rounded-md text-sm cursor-pointer
                                                        ${J?"bg-accent/20 text-text":"text-text"}
                                                        ${Z?"font-medium":""}
                                                    `,onClick:()=>U(q.value),onMouseEnter:()=>b(re),children:[u.jsx("span",{children:q.label}),Z&&u.jsx(Iw,{className:"h-3.5 w-3.5 text-accent"})]},q.value)})]},V))]})})]})]})}function ED({open:t,onOpenChange:e,title:n,children:s,footer:a,size:o="md",className:l=""}){const d=A.useRef(null);if(A.useEffect(()=>{const x=y=>{t&&y.key==="Escape"&&e(!1)};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[t,e]),A.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),!t)return null;const h={sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-4xl"},p=u.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6",children:[u.jsx("div",{ref:d,className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:x=>{x.target===d.current&&e(!1)}}),u.jsxs("div",{className:`
                    relative w-full ${h[o]} 
                    bg-surface rounded-ds-lg border border-line shadow-2xl 
                    animate-in zoom-in-95 fade-in duration-200
                    flex flex-col max-h-[90vh]
                    ${l}
                `,role:"dialog","aria-modal":"true",children:[u.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-line shrink-0",children:[u.jsx("div",{className:"text-lg font-semibold text-text",children:n}),u.jsx("button",{onClick:()=>e(!1),className:"p-1 rounded-md text-muted hover:text-text hover:bg-surface2 transition-colors",children:u.jsx(ic,{className:"h-5 w-5"})})]}),u.jsx("div",{className:"px-6 py-4 overflow-y-auto scrollbar-thin",children:s}),a&&u.jsx("div",{className:"px-6 py-4 border-t border-line bg-surface2/30 flex justify-end gap-3 shrink-0 rounded-b-ds-lg",children:a})]})]});return Pk.createPortal(p,document.body)}function Yu({checked:t,onCheckedChange:e,disabled:n=!1,className:s=""}){return u.jsx("div",{className:`toggle ${t?"active":""} ${s} ${n?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!n&&e(!t),children:u.jsx("div",{className:"toggle-knob"})})}const AD=A.createContext(void 0);function PW({children:t}){const[e,n]=A.useState([]),s=A.useCallback(o=>{n(l=>l.filter(d=>d.id!==o))},[]),a=A.useCallback(({message:o,description:l,variant:d})=>{const h=Math.random().toString(36).substring(2,9);n(p=>[...p,{id:h,message:o,description:l,variant:d}]),setTimeout(()=>{s(h)},5e3)},[s]);return u.jsxs(AD.Provider,{value:{toast:a,dismiss:s},children:[t,Pk.createPortal(u.jsx("div",{className:"fixed bottom-0 right-0 z-[100] p-6 space-y-4 max-w-sm w-full pointer-events-none",children:e.map(o=>u.jsxs("div",{className:`
                                pointer-events-auto
                                flex gap-3 p-4 rounded-ds-lg shadow-2xl border
                                animate-in slide-in-from-right-full duration-300
                                ${LW(o.variant)}
                            `,children:[u.jsx("div",{className:"shrink-0 mt-0.5",children:zW(o.variant)}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-semibold text-sm",children:o.message}),o.description&&u.jsx("div",{className:"text-xs opacity-90 mt-1",children:o.description})]}),u.jsx("button",{onClick:()=>s(o.id),className:"shrink-0 -mt-1 -mr-1 p-1 rounded hover:bg-black/10 transition-colors",children:u.jsx(ic,{className:"h-4 w-4"})})]},o.id))}),document.body)]})}function OD(){const t=A.useContext(AD);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t}function LW(t){switch(t){case"success":return"bg-surface2 border-good text-text";case"error":return"bg-bad text-white border-bad";case"warning":return"bg-warn text-black border-warn";case"info":return"bg-surface2 border-line text-text"}}function zW(t){switch(t){case"success":return u.jsx(Zk,{className:"h-5 w-5 text-good"});case"error":return u.jsx(yA,{className:"h-5 w-5 text-white"});case"warning":return u.jsx(Wu,{className:"h-5 w-5 text-black"});case"info":return u.jsx(jy,{className:"h-5 w-5 text-accent"})}}const BW=[{id:"system",label:"System"},{id:"parameters",label:"Parameters"},{id:"ui",label:"UI"},{id:"advanced",label:"Advanced"}],gv=[{title:"System Profile",description:"Core hardware toggles and high-level system preferences.",fields:[{key:"system.has_solar",label:"Solar panels installed",helper:"Enable PV forecasting and solar optimization",path:["system","has_solar"],type:"boolean"},{key:"system.has_battery",label:"Home battery installed",helper:"Enable battery control and grid arbitrage",path:["system","has_battery"],type:"boolean"},{key:"system.has_water_heater",label:"Smart water heater",helper:"Enable water heating optimization",path:["system","has_water_heater"],type:"boolean"},{key:"export.enable_export",label:"Enable grid export",helper:"[EXPERIMENTAL] Master switch for grid export",path:["export","enable_export"],type:"boolean"}]},{title:"Location & Solar Array",description:"Geolocation and PV array parameters used by the forecasting engine.",fields:[{key:"system.location.latitude",label:"Latitude",helper:"Decimal degrees, positive north. Example: 55.4932",path:["system","location","latitude"],type:"number"},{key:"system.location.longitude",label:"Longitude",helper:"Decimal degrees, positive east. Example: 13.1112",path:["system","location","longitude"],type:"number"},{key:"system.solar_array.azimuth",label:"Solar azimuth ()",helper:"Panel direction: 0 = North, 90 = East, 180 = South, 270 = West.",path:["system","solar_array","azimuth"],type:"number"},{key:"system.solar_array.tilt",label:"Solar tilt ()",helper:"Angle from horizontal. 0 = flat, 90 = vertical.",path:["system","solar_array","tilt"],type:"number"},{key:"system.solar_array.kwp",label:"Solar capacity (kWp)",helper:"Total DC peak power of the PV array.",path:["system","solar_array","kwp"],type:"number"}]},{title:"Battery Specifications",description:"Capacity, max power, and SoC limits define safe operating bands.",fields:[{key:"battery.capacity_kwh",label:"Battery capacity (kWh)",path:["battery","capacity_kwh"],type:"number"},{key:"battery.max_charge_power_kw",label:"Max charge power (kW)",path:["battery","max_charge_power_kw"],type:"number"},{key:"battery.max_discharge_power_kw",label:"Max discharge power (kW)",path:["battery","max_discharge_power_kw"],type:"number"},{key:"battery.min_soc_percent",label:"Min SoC (%)",path:["battery","min_soc_percent"],type:"number"},{key:"battery.max_soc_percent",label:"Max SoC (%)",path:["battery","max_soc_percent"],type:"number"},{key:"system.grid.max_power_kw",label:"HARD Grid max power (kW)",helper:"Absolute limit from your grid fuse/connection.",path:["system","grid","max_power_kw"],type:"number"},{key:"grid.import_limit_kw",label:"Soft import limit (kW)",helper:"Threshold for peak power penalties (effekttariff).",path:["grid","import_limit_kw"],type:"number"}]},{title:"Pricing & Timezone",description:"Nordpool zone and local timezone for planner calculations.",fields:[{key:"nordpool.price_area",label:"Nordpool Price Area",helper:"e.g. SE4, NO1, DK2",path:["nordpool","price_area"],type:"text"},{key:"pricing.vat_percent",label:"VAT (%)",path:["pricing","vat_percent"],type:"number"},{key:"pricing.grid_transfer_fee_sek",label:"Grid transfer fee (SEK/kWh)",path:["pricing","grid_transfer_fee_sek"],type:"number"},{key:"pricing.energy_tax_sek",label:"Energy tax (SEK/kWh)",path:["pricing","energy_tax_sek"],type:"number"},{key:"timezone",label:"Timezone",helper:"e.g. Europe/Stockholm",path:["timezone"],type:"text"}]},{title:"Notifications",description:"Configure automated notifications via Home Assistant.",fields:[{key:"executor.notifications.service",label:"HA Notify Service",helper:"e.g. notify.mobile_app_iphone",path:["executor","notifications","service"],type:"service"},{key:"executor.notifications.on_charge_start",label:"On charge start",path:["executor","notifications","on_charge_start"],type:"boolean"},{key:"executor.notifications.on_charge_stop",label:"On charge stop",path:["executor","notifications","on_charge_stop"],type:"boolean"},{key:"executor.notifications.on_discharge_start",label:"On discharge start",path:["executor","notifications","on_discharge_start"],type:"boolean"},{key:"executor.notifications.on_discharge_stop",label:"On discharge stop",path:["executor","notifications","on_discharge_stop"],type:"boolean"},{key:"executor.notifications.on_water_heating_start",label:"On water heating start",path:["executor","notifications","on_water_heat_start"],type:"boolean"},{key:"executor.notifications.on_water_heating_stop",label:"On water heating stop",path:["executor","notifications","on_water_heat_stop"],type:"boolean"},{key:"executor.notifications.on_soc_target_change",label:"On SoC target change",path:["executor","notifications","on_soc_target_change"],type:"boolean"},{key:"executor.notifications.on_override_activated",label:"On override activated",path:["executor","notifications","on_override_activated"],type:"boolean"},{key:"executor.notifications.on_error",label:"On error",path:["executor","notifications","on_error"],type:"boolean"}]},{title:" Home Assistant Connection ",isHA:!0,description:"Connection parameters for your Home Assistant instance.",fields:[{key:"home_assistant.url",label:"HA URL",helper:"e.g. http://homeassistant.local:8123",path:["home_assistant","url"],type:"text"},{key:"home_assistant.token",label:"Long-Lived Access Token",path:["home_assistant","token"],type:"text"}]},{title:"Required HA Entities",isHA:!0,description:"Core sensors and switches required for battery control.",fields:[{key:"input_sensors.battery_soc",label:"Battery SoC (%)",path:["input_sensors","battery_soc"],type:"entity"},{key:"input_sensors.pv_power",label:"PV Power (W/kW)",path:["input_sensors","pv_power"],type:"entity"},{key:"input_sensors.load_power",label:"Load Power (W/kW)",path:["input_sensors","load_power"],type:"entity"},{key:"executor.inverter.work_mode_entity",label:"Work Mode Selector",path:["executor","inverter","work_mode_entity"],type:"entity"},{key:"executor.inverter.grid_charging_entity",label:"Grid Charging Switch",path:["executor","inverter","grid_charging_entity"],type:"entity"},{key:"executor.inverter.max_charging_current_entity",label:"Max Charge Current",path:["executor","inverter","max_charging_current_entity"],type:"entity"},{key:"executor.inverter.max_discharging_current_entity",label:"Max Discharge Current",path:["executor","inverter","max_discharging_current_entity"],type:"entity"}]},{title:"Optional HA Entities",isHA:!0,description:"Optional sensors for better forecasting and dashboard metrics.",fields:[{key:"executor.automation_toggle_entity",label:"Automation Toggle",path:["executor","automation_toggle_entity"],type:"entity"},{key:"executor.manual_override_entity",label:"Manual Override Toggle",path:["executor","manual_override_entity"],type:"entity"},{key:"executor.soc_target_entity",label:"Target SoC Feedback",path:["executor","soc_target_entity"],type:"entity"},{key:"executor.water_heater.target_entity",label:"Water Heater Setpoint",path:["executor","water_heater","target_entity"],type:"entity"},{key:"input_sensors.vacation_mode",label:"Vacation Mode Toggle",path:["input_sensors","vacation_mode"],type:"entity"},{key:"input_sensors.alarm_state",label:"Alarm Control Panel",path:["input_sensors","alarm_state"],type:"entity"},{key:"input_sensors.water_heater_consumption",label:"Water Heater Daily Energy",path:["input_sensors","water_heater_consumption"],type:"entity"},{key:"input_sensors.today_net_cost",label:"Today's Net Cost",path:["input_sensors","today_net_cost"],type:"entity"},{key:"input_sensors.total_battery_charge",label:"Total Battery Charge (kWh)",path:["input_sensors","total_battery_charge"],type:"entity"},{key:"input_sensors.total_battery_discharge",label:"Total Battery Discharge (kWh)",path:["input_sensors","total_battery_discharge"],type:"entity"},{key:"input_sensors.total_grid_export",label:"Total Grid Export (kWh)",path:["input_sensors.total_grid_export"],type:"entity"},{key:"input_sensors.total_grid_import",label:"Total Grid Import (kWh)",path:["input_sensors.total_grid_import"],type:"entity"},{key:"input_sensors.total_load_consumption",label:"Total Load Consumption (kWh)",path:["input_sensors.total_load_consumption"],type:"entity"},{key:"input_sensors.total_pv_production",label:"Total PV Production (kWh)",path:["input_sensors.total_pv_production"],type:"entity"}]}],RD=[{title:"Charging Strategy",description:"Price smoothing, consolidation tolerances, and gap settings that govern charge windows.",fields:[{key:"charging_strategy.price_smoothing_sek_kwh",label:"Price smoothing (SEK/kWh)",path:["charging_strategy","price_smoothing_sek_kwh"],type:"number"},{key:"charging_strategy.block_consolidation_tolerance_sek",label:"Consolidation tolerance (SEK)",path:["charging_strategy","block_consolidation_tolerance_sek"],type:"number"},{key:"charging_strategy.consolidation_max_gap_slots",label:"Max gap slots",path:["charging_strategy","consolidation_max_gap_slots"],type:"number"},{key:"charging_strategy.charge_threshold_percentile",label:"Charge threshold (percentile)",path:["charging_strategy","charge_threshold_percentile"],type:"number"},{key:"charging_strategy.cheap_price_tolerance_sek",label:"Cheap price tolerance (SEK)",path:["charging_strategy","cheap_price_tolerance_sek"],type:"number"}]},{title:"Arbitrage & Export",description:"Export thresholds, peak-only export, and future guard buffers.",fields:[{key:"arbitrage.export_percentile_threshold",label:"Export percentile threshold",path:["arbitrage","export_percentile_threshold"],type:"number"},{key:"arbitrage.enable_peak_only_export",label:"Enable peak-only export",path:["arbitrage","enable_peak_only_export"],type:"boolean",helper:"Override to only export when we hit the percentile threshold."},{key:"arbitrage.export_future_price_guard",label:"Future price guard",path:["arbitrage","export_future_price_guard"],type:"boolean"},{key:"arbitrage.future_price_guard_buffer_sek",label:"Future guard buffer (SEK)",path:["arbitrage","future_price_guard_buffer_sek"],type:"number"},{key:"arbitrage.export_profit_margin_sek",label:"Export profit margin (SEK)",path:["arbitrage","export_profit_margin_sek"],type:"number"}]},{title:"Water Heating",description:"Quota, deferral, and sizing controls for the water heater scheduler.",fields:[{key:"water_heating.power_kw",label:"Water heater power (kW)",path:["water_heating","power_kw"],type:"number"},{key:"water_heating.defer_up_to_hours",label:"Max defer hours",path:["water_heating","defer_up_to_hours"],type:"number"},{key:"water_heating.max_blocks_per_day",label:"Max blocks per day",path:["water_heating","max_blocks_per_day"],type:"number"},{key:"water_heating.min_kwh_per_day",label:"Min kWh/day",path:["water_heating","min_kwh_per_day"],type:"number"},{key:"water_heating.min_spacing_hours",label:"Min spacing (hours)",path:["water_heating","min_spacing_hours"],type:"number",helper:"Minimum gap between heating sessions to avoid efficiency loss."},{key:"water_heating.spacing_penalty_sek",label:"Spacing penalty (SEK)",path:["water_heating","spacing_penalty_sek"],type:"number",helper:"Penalty applied when heating sessions are too close."},{key:"water_heating.schedule_future_only",label:"Schedule future only",path:["water_heating","schedule_future_only"],type:"boolean"}]},{title:"Learning Parameter Limits",description:"Limits that keep learning adjustments conservative.",fields:[{key:"learning.min_sample_threshold",label:"Min sample threshold",path:["learning","min_sample_threshold"],type:"number"},{key:"learning.min_improvement_threshold",label:"Min improvement (%)",path:["learning","min_improvement_threshold"],type:"number"},{key:"learning.max_daily_param_change.battery_use_margin_sek",label:"Battery margin change (SEK)",path:["learning","max_daily_param_change","battery_use_margin_sek"],type:"number"},{key:"learning.max_daily_param_change.export_profit_margin_sek",label:"Export margin change (SEK)",path:["learning","max_daily_param_change","export_profit_margin_sek"],type:"number"},{key:"learning.max_daily_param_change.future_price_guard_buffer_sek",label:"Future guard buffer change (SEK)",path:["learning","max_daily_param_change","future_price_guard_buffer_sek"],type:"number"},{key:"learning.max_daily_param_change.load_safety_margin_percent",label:"Load safety change (%)",path:["learning","max_daily_param_change","load_safety_margin_percent"],type:"number"},{key:"learning.max_daily_param_change.pv_confidence_percent",label:"PV confidence change (%)",path:["learning","max_daily_param_change","pv_confidence_percent"],type:"number"},{key:"learning.max_daily_param_change.s_index_base_factor",label:"S-index base change",path:["learning","max_daily_param_change","s_index_base_factor"],type:"number"},{key:"learning.max_daily_param_change.s_index_pv_deficit_weight",label:"S-index PV weight change",path:["learning","max_daily_param_change","s_index_pv_deficit_weight"],type:"number"},{key:"learning.max_daily_param_change.s_index_temp_weight",label:"S-index temp weight change",path:["learning","max_daily_param_change","s_index_temp_weight"],type:"number"}]},{title:"S-Index Safety",description:"Seasonal index parameters for reserve calculations.",fields:[{key:"s_index.temp_cold_c",label:"Cold temp (C)",path:["s_index","temp_cold_c"],type:"number"},{key:"s_index.s_index_horizon_days",label:"S-Index Horizon (days)",path:["s_index","s_index_horizon_days"],type:"select",options:[{label:"1 Day",value:"1"},{label:"2 Days",value:"2"},{label:"3 Days",value:"3"},{label:"4 Days",value:"4"},{label:"5 Days",value:"5"},{label:"6 Days",value:"6"},{label:"7 Days",value:"7"}]}]}],W0=gv.flatMap(t=>t.fields),VW=W0.reduce((t,e)=>(t[e.key]=e,t),{}),$0=RD.flatMap(t=>t.fields),FW=$0.reduce((t,e)=>(t[e.key]=e,t),{}),PD=[{title:"Dashboard Defaults",description:"Overlay defaults and refresh cadence for the planner dashboard.",fields:[{key:"dashboard.auto_refresh_enabled",label:"Auto refresh",helper:"Enable automatic refresh of the dashboard schedule.",path:["dashboard","auto_refresh_enabled"],type:"boolean"}]},{title:"AI Advisor",description:"Control the Smart Advisor LLM settings.",fields:[{key:"advisor.enable_llm",label:"Enable LLM advice",path:["advisor","enable_llm"],type:"boolean"},{key:"advisor.auto_fetch",label:"Auto-fetch advice on dashboard load",path:["advisor","auto_fetch"],type:"boolean"},{key:"advisor.personality",label:"Advisor personality",path:["advisor","personality"],type:"select",options:[{label:"Concise (Money focus)",value:"concise"},{label:"Friendly (Emoji style)",value:"friendly"},{label:"Technical (Data heavy)",value:"technical"}]}]}],LD=[{title:"Experimental Features",description:"Toggle advanced and experimental modes.",fields:[{key:"automation.external_executor_mode",label:"External Executor Mode",helper:"When enabled, Darkstar expects an external system to execute the plan.",path:["automation","external_executor_mode"],type:"boolean"},{key:"automation.write_to_mariadb",label:"Log to MariaDB",helper:"Requires MariaDB credentials in secrets.yaml",path:["automation","write_to_mariadb"],type:"boolean"}]},{title:"Danger Zone",description:"Sensitive actions. Proceed with caution.",fields:[]}],q0=PD.flatMap(t=>t.fields),HW=q0.reduce((t,e)=>(t[e.key]=e,t),{}),G0=LD.flatMap(t=>t.fields),UW=G0.reduce((t,e)=>(t[e.key]=e,t),{});function Ua(t,e){return e.reduce((n,s)=>n&&typeof n=="object"?n[s]:void 0,t)}function Kp(t,e,n){let s=t;e.forEach((a,o)=>{if(o===e.length-1){s[a]=n;return}(!s[a]||typeof s[a]!="object")&&(s[a]={}),s=s[a]})}function kf(t){const e={};return W0.forEach(n=>{const s=t?Ua(t,n.path):void 0;n.type==="boolean"?e[n.key]=s===!0?"true":"false":e[n.key]=s!=null?String(s):""}),e}function Tf(t){const e={};return $0.forEach(n=>{const s=t?Ua(t,n.path):void 0;n.type==="boolean"?e[n.key]=s===!0?"true":"false":n.type==="array"&&Array.isArray(s)?e[n.key]=s.join(", "):e[n.key]=s!=null?String(s):""}),e}function IW(t,e){const n=e.trim();if(t.type==="number"){if(n==="")return null;const s=Number(n);return Number.isNaN(s)?void 0:s}return t.type==="boolean"?n==="true":n}function YW(t,e){const n=e.trim();if(t.type==="number"){if(n==="")return null;const s=Number(n);return Number.isNaN(s)?void 0:s}return t.type==="boolean"?n==="true":t.type==="array"?n?n.split(",").map(o=>o.trim()).filter(Boolean).map(o=>Number(o)).filter(o=>!Number.isNaN(o)):[]:n}function WW(t,e){const n={};return W0.forEach(s=>{const a=e[s.key]??"",o=IW(s,a);if(o===void 0||s.type==="number"&&o===null)return;const l=Ua(t,s.path);o!==l&&Kp(n,s.path,o)}),n}function $W(t,e){const n={};return $0.forEach(s=>{const a=e[s.key]??"",o=YW(s,a);if(o===void 0)return;const l=Ua(t,s.path);(()=>{if(s.type==="array"){if(!Array.isArray(o)||!Array.isArray(l)||o.length!==l.length)return!1;for(let h=0;h<o.length;h+=1)if(o[h]!==l[h])return!1;return!0}return o===l})()||Kp(n,s.path,o)}),n}function uy(t){const e={};return q0.forEach(n=>{const s=t?Ua(t,n.path):void 0;n.type==="boolean"?e[n.key]=s===!0?"true":"false":e[n.key]=s!=null?String(s):""}),t?.dashboard?.overlay_defaults!==void 0&&(e["dashboard.overlay_defaults"]=String(t.dashboard.overlay_defaults)),e}function dy(t){const e={};return G0.forEach(n=>{const s=t?Ua(t,n.path):void 0;e[n.key]=s===!0?"true":"false"}),e}function qW(t,e){const n=e.trim();return t.type==="boolean"?n===""?null:n==="true"?!0:n==="false"?!1:void 0:n}function GW(t,e){const n=e.trim();return t.type==="boolean"?n===""?null:n==="true"?!0:n==="false"?!1:void 0:n}function XW(t,e){const n={};q0.forEach(a=>{const o=e[a.key]??"",l=qW(a,o);if(l===void 0||a.type==="boolean"&&l===null)return;const d=Ua(t,a.path);l!==d&&Kp(n,a.path,l)});const s=e["dashboard.overlay_defaults"];if(s!==void 0){const a=Ua(t,["dashboard","overlay_defaults"]);s!==a&&(n.dashboard||(n.dashboard={}),n.dashboard.overlay_defaults=s)}return n}function KW(t,e){const n={};return G0.forEach(s=>{const a=e[s.key]??"",o=GW(s,a);if(o===void 0||s.type==="boolean"&&o===null)return;const l=Ua(t,s.path);o!==l&&Kp(n,s.path,o)}),n}function ZW(){const{toast:t}=OD(),[e,n]=A.useState("system"),[s,a]=A.useState(null),[o,l]=A.useState(()=>kf(null)),[d,h]=A.useState(()=>Tf(null)),[p,x]=A.useState(()=>uy(null)),[y,b]=A.useState(()=>dy(null)),[j,T]=A.useState({}),[N,M]=A.useState({}),[R,E]=A.useState({}),[z,U]=A.useState({}),[I,V]=A.useState(!0),[O,q]=A.useState(null),[Z,re]=A.useState(!1),[J,de]=A.useState(!1),[le,te]=A.useState(!1),[se,W]=A.useState(!1),[X,ae]=A.useState(null),[oe,me]=A.useState(null),[F,ee]=A.useState(null),[xe,H]=A.useState(null),[pe,Se]=A.useState([]),[Ue,tt]=A.useState(null),[Te,lt]=A.useState(null),[gt,_t]=A.useState(!0),[Bt,Mt]=A.useState(null),[st,fn]=A.useState(!1),[es,vn]=A.useState(null),[ds,Hn]=A.useState(!1),[ze,xt]=A.useState(!1),[pn,zt]=A.useState(null),[Es,ot]=A.useState([]),[Wn,Ln]=A.useState(!1),[Is,gs]=A.useState(null),di=async()=>{Ln(!0);try{const fe=await De.haEntities();ot(fe.entities||[])}catch(fe){console.error("Failed to load HA entities",fe)}finally{Ln(!1)}},ts=async()=>{gs("Testing...");try{const fe=o["home_assistant.url"],ve=o["home_assistant.token"],Me=await De.haTest({url:fe,token:ve});Me.success?(gs("Success: Connected!"),di()):gs(`Error: ${Me.message}`)}catch(fe){gs(`Error: ${fe.message}`)}},xs=async()=>{V(!0),q(null);try{const fe=await De.config();a(fe),l(kf(fe)),h(Tf(fe)),x(uy(fe)),b(dy(fe));const ve=fe?.ui?.theme_accent_index;lt(typeof ve=="number"?ve:null)}catch(fe){q(fe?.message||"Failed to load configuration")}finally{V(!1)}},mn=async()=>{_t(!0),Mt(null);try{const fe=await De.theme();Se(fe.themes),tt(fe.current??null),lt(fe.accent_index??null)}catch(fe){Mt(fe?.message||"Failed to load themes")}finally{_t(!1)}};A.useEffect(()=>{xs(),mn(),di()},[]);const $t=(fe,ve)=>{const Me=VW[fe];if(Me&&(l(Ve=>({...Ve,[fe]:ve})),ae(null),Me.type==="number")){const Ve=ve.trim();T(je=>{const Oe={...je};Ve===""?Oe[fe]="Required":Number.isNaN(Number(Ve))?Oe[fe]="Must be a number":fe.includes("percent")&&(Number(Ve)<0||Number(Ve)>100)?Oe[fe]="Must be between 0 and 100":fe.includes("power_kw")&&Number(Ve)<0?Oe[fe]="Must be positive":fe.includes("capacity_kwh")&&Number(Ve)<=0?Oe[fe]="Must be greater than 0":fe==="nordpool.resolution_minutes"&&![15,30,60].includes(Number(Ve))?Oe[fe]="Must be 15, 30, or 60":delete Oe[fe];const Qe="battery.min_soc_percent",Ae="battery.max_soc_percent",Gt=fe===Qe?Ve:(o[Qe]??"").trim(),Qt=fe===Ae?Ve:(o[Ae]??"").trim(),Fe=Number(Gt),ln=Number(Qt);return!Number.isNaN(Fe)&&!Number.isNaN(ln)&&(Fe>=ln?(Oe[Qe]="Min SoC must be less than max SoC",Oe[Ae]="Max SoC must be greater than min SoC"):(Oe[Qe]&&Oe[Qe].startsWith("Min SoC")&&delete Oe[Qe],Oe[Ae]&&Oe[Ae].startsWith("Max SoC")&&delete Oe[Ae])),Oe})}},gn=(fe,ve)=>{const Me=FW[fe];if(Me&&(h(Ve=>({...Ve,[fe]:ve})),me(null),Me.type==="number")){const Ve=ve.trim();M(je=>{const Oe={...je};return Ve===""?Oe[fe]="Required":Number.isNaN(Number(Ve))?Oe[fe]="Must be a number":fe.includes("percent")&&(Number(Ve)<0||Number(Ve)>100)?Oe[fe]="Must be between 0 and 100":fe.includes("sek")&&Number(Ve)<0||fe.includes("power_kw")&&Number(Ve)<0?Oe[fe]="Must be positive":fe.includes("kwh")&&Number(Ve)<=0?Oe[fe]="Must be greater than 0":delete Oe[fe],Oe})}},zn=(fe,ve)=>{const Me=HW[fe];if(!(!Me&&fe!=="dashboard.overlay_defaults")&&(x(Ve=>({...Ve,[fe]:ve})),ee(null),fe!=="dashboard.overlay_defaults"&&Me.type==="boolean")){const Ve=ve.trim();E(je=>{const Oe={...je};return Ve===""?Oe[fe]="Required":Ve!=="true"&&Ve!=="false"?Oe[fe]="Invalid value":delete Oe[fe],Oe})}},hi=(fe,ve)=>{const Me=UW[fe];if(Me&&(b(Ve=>({...Ve,[fe]:ve})),H(null),Me.type==="boolean")){const Ve=ve.trim();U(je=>{const Oe={...je};return Ve===""?Oe[fe]="Required":Ve!=="true"&&Ve!=="false"?Oe[fe]="Invalid value":delete Oe[fe],Oe})}},Cn=Object.values(j).filter(Boolean).length>0,As=Object.values(N).filter(Boolean).length>0,hs=async()=>{if(!s)return;if(Cn){ae("Fix validation errors before saving.");return}const fe=WW(s,o);if(!Object.keys(fe).length){ae("No changes detected.");return}re(!0),ae(null);try{const ve=await De.configSave(fe);if(ve.status!=="success"){const Ve={};ve.errors?.forEach(je=>{je.field&&(Ve[je.field]=je.message||"Invalid value")}),Object.keys(Ve).length?(T(je=>({...je,...Ve})),ae("Fix highlighted fields before saving.")):ae(ve.errors&&ve.errors[0]?.message?ve.errors[0].message:"Save failed.");return}const Me=await De.config();a(Me),l(kf(Me)),h(Tf(Me)),T({}),T({}),ae("System settings saved."),t({message:"System settings saved",variant:"success"})}catch(ve){const Me=ve instanceof Error?ve.message:"Unknown error";ae(`Save failed: ${Me}`),t({message:`Save failed: ${Me}`,variant:"error"})}finally{re(!1)}},Ws=async()=>{if(!s)return;if(As){me("Fix validation errors before saving.");return}const fe=$W(s,d);if(!Object.keys(fe).length){me("No changes detected.");return}de(!0),me(null);try{const ve=await De.configSave(fe);if(ve.status!=="success"){const Ve={};ve.errors?.forEach(je=>{je.field&&(Ve[je.field]=je.message||"Invalid value")}),Object.keys(Ve).length?(M(je=>({...je,...Ve})),me("Fix highlighted fields before saving.")):me(ve.errors&&ve.errors[0]?.message?ve.errors[0].message:"Save failed.");return}const Me=await De.config();a(Me),l(kf(Me)),h(Tf(Me)),M({}),M({}),me("Parameters saved."),t({message:"Parameters saved",variant:"success"})}catch(ve){const Me=ve instanceof Error?ve.message:"Unknown error";me(`Save failed: ${Me}`),t({message:`Save failed: ${Me}`,variant:"error"})}finally{de(!1)}},ys=async()=>{if(!s)return;if(Object.values(R).filter(Boolean).length>0){ee("Fix validation errors before saving.");return}const ve=XW(s,p);if(!Object.keys(ve).length){ee("No changes detected.");return}te(!0),ee(null);try{const Me=await De.configSave(ve);if(Me.status!=="success"){const je={};Me.errors?.forEach(Oe=>{Oe.field&&(je[Oe.field]=Oe.message||"Invalid value")}),Object.keys(je).length?(E(Oe=>({...Oe,...je})),ee("Fix highlighted fields before saving.")):ee(Me.errors&&Me.errors[0]?.message?Me.errors[0].message:"Save failed.");return}const Ve=await De.config();a(Ve),x(uy(Ve)),E({}),E({}),ee("UI preferences saved."),t({message:"UI preferences saved",variant:"success"})}catch(Me){const Ve=Me instanceof Error?Me.message:"Unknown error";ee(`Save failed: ${Ve}`),t({message:`Save failed: ${Ve}`,variant:"error"})}finally{te(!1)}},Ai=async()=>{if(!s)return;if(Object.values(z).filter(Boolean).length>0){H("Fix validation errors before saving.");return}const ve=KW(s,y);if(!Object.keys(ve).length){H("No changes detected.");return}W(!0),H(null);try{const Me=await De.configSave(ve);if(Me.status!=="success"){const je={};Me.errors?.forEach(Oe=>{Oe.field&&(je[Oe.field]=Oe.message||"Invalid value")}),Object.keys(je).length?(U(Oe=>({...Oe,...je})),H("Fix highlighted fields before saving.")):H(Me.errors&&Me.errors[0]?.message?Me.errors[0].message:"Save failed.");return}const Ve=await De.config();a(Ve),b(dy(Ve)),U({}),U({}),H("Advanced settings saved."),t({message:"Advanced settings saved",variant:"success"})}catch(Me){const Ve=Me instanceof Error?Me.message:"Unknown error";H(`Save failed: ${Ve}`),t({message:`Save failed: ${Ve}`,variant:"error"})}finally{W(!1)}},Oi=async()=>{if(!Ue){vn("Select a theme before applying.");return}fn(!0),vn(null);try{await De.setTheme({theme:Ue,accent_index:Te??void 0}),await mn(),await xs(),vn("Theme applied successfully."),t({message:"Theme applied successfully",variant:"success"})}catch(fe){vn(fe?.message||"Failed to apply theme"),t({message:"Failed to apply theme",variant:"error"})}finally{fn(!1)}},fi=fe=>{const ve=fe.trim();if(ve===""){lt(null);return}const Me=Number(ve);Number.isNaN(Me)||lt(Math.max(0,Math.min(15,Me)))},vs=async()=>{Hn(!0),zt(null);try{await De.configReset(),T({}),M({}),E({}),U({}),await xs(),await mn(),zt("All settings have been reset to default values."),zt("All settings have been reset to default values."),xt(!1),t({message:"Settings reset complete",variant:"success"})}catch(fe){const ve=fe instanceof Error?fe.message:"Unknown error";t({message:`Reset failed: ${ve}`,variant:"error"})}finally{Hn(!1)}},Ri=()=>I?u.jsx(Ge,{className:"p-6 text-sm text-muted",children:"Loading system configuration"}):O?u.jsx(Ge,{className:"p-6 text-sm text-red-400",children:O}):u.jsxs("div",{className:"space-y-4",children:[gv.map((fe,ve)=>{const Me=ve>0?gv[ve-1]:null,Ve=fe.isHA&&Me&&!Me.isHA;return u.jsxs("div",{children:[Ve&&u.jsxs("div",{className:"py-8 flex items-center gap-4",children:[u.jsx("div",{className:"h-px flex-1 bg-line/30"}),u.jsx("span",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-muted whitespace-nowrap",children:"Home Assistant Integration"}),u.jsx("div",{className:"h-px flex-1 bg-line/30"})]}),u.jsxs(Ge,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"System"})]}),u.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:fe.fields.map(je=>{const Oe=je.key==="system.solar_array.azimuth",Qe=je.key==="system.solar_array.tilt";if(Oe){const Ae=o[je.key],Gt=Ae&&Ae.trim()!==""?Number(Ae):null;return u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(CW,{value:typeof Gt=="number"&&!Number.isNaN(Gt)?Gt:null,onChange:Qt=>$t(je.key,String(Math.round(Qt)))}),u.jsx("input",{type:"number",inputMode:"decimal",value:o[je.key]??"",onChange:Qt=>$t(je.key,Qt.target.value),className:"mt-2 w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper}),j[je.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:j[je.key]})]},je.key)}if(Qe){const Ae=o[je.key],Gt=Ae&&Ae.trim()!==""?Number(Ae):null;return u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(EW,{value:typeof Gt=="number"&&!Number.isNaN(Gt)?Gt:null,onChange:Qt=>$t(je.key,String(Math.round(Qt)))}),u.jsx("input",{type:"number",inputMode:"decimal",value:o[je.key]??"",onChange:Qt=>$t(je.key,Qt.target.value),className:"mt-2 w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper}),j[je.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:j[je.key]})]},je.key)}return je.type==="entity"?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(AW,{entities:Es,value:o[je.key]??"",onChange:Ae=>$t(je.key,Ae),loading:Wn,placeholder:"Select entity..."}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper})]},je.key):je.type==="service"?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(OW,{value:o[je.key]??"",onChange:Ae=>$t(je.key,Ae),placeholder:"Select notification service..."}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper})]},je.key):je.type==="boolean"?u.jsxs("div",{className:"flex flex-col justify-center",children:[u.jsxs("div",{className:"flex items-center gap-3 h-full",children:[u.jsx(Yu,{checked:o[je.key]==="true",onCheckedChange:Ae=>$t(je.key,Ae?"true":"false")}),u.jsx("span",{className:"font-semibold text-sm",children:je.label})]}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted ml-6 mt-1",children:je.helper})]},je.key):u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx("input",{type:je.type==="number"?"number":"text",inputMode:je.type==="number"?"decimal":void 0,value:o[je.key]??"",onChange:Ae=>$t(je.key,Ae.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper}),j[je.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:j[je.key]})]},je.key)})}),fe.title==="Home Assistant Connection"&&u.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[u.jsx("button",{type:"button",onClick:ts,className:"rounded-xl px-4 py-2 text-[11px] font-semibold bg-neutral hover:bg-neutral/80 text-white transition",children:Is&&Is.startsWith("Testing")?"Testing...":"Test Connection"}),Is&&u.jsx("span",{className:`text-xs ${Is.startsWith("Success")?"text-green-400":"text-red-400"}`,children:Is})]})]})]},fe.title)}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:Z||I,onClick:hs,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:Z?"Saving":"Save System Settings"}),X&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${X.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:X})]})]}),Pe=()=>I?u.jsx(Ge,{className:"p-6 text-sm text-muted",children:"Loading parameter configuration"}):O?u.jsx(Ge,{className:"p-6 text-sm text-red-400",children:O}):u.jsxs("div",{className:"space-y-4",children:[RD.map(fe=>u.jsxs(Ge,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Parameters"})]}),u.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:fe.fields.map(ve=>u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"block text-sm font-medium mb-1.5",children:[ve.label,u.jsx(Cr,{text:Er[ve.key]||ve.helper})]}),ve.type==="select"?u.jsx(mv,{value:d[ve.key]??"",onChange:Me=>gn(ve.key,Me),options:ve.options||[],placeholder:"Select..."}):ve.type==="boolean"?u.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[u.jsx(Yu,{checked:d[ve.key]==="true",onCheckedChange:Me=>gn(ve.key,Me?"true":"false")}),u.jsx("span",{className:"text-sm font-semibold",children:"Enabled"})]}):u.jsx("input",{type:ve.type==="number"?"number":"text",inputMode:ve.type==="number"?"decimal":void 0,value:d[ve.key]??"",onChange:Me=>gn(ve.key,Me.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),ve.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:ve.helper}),N[ve.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:N[ve.key]})]},ve.key))})]},fe.title)),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:J||I,onClick:Ws,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:J?"Saving & Re-planning":"Save & Re-plan"}),oe&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${oe.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:oe})]})]}),mt=()=>I?u.jsx(Ge,{className:"p-6 text-sm text-muted",children:"Loading UI configuration"}):O?u.jsx(Ge,{className:"p-6 text-sm text-red-400",children:O}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs(Ge,{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:"Theme & Appearance"}),u.jsx("p",{className:"text-xs text-muted mt-1",children:"Select a theme for the app and adjust the accent color."})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"UI"})]}),gt?u.jsx("p",{className:"text-sm text-muted",children:"Loading themes"}):Bt?u.jsx("p",{className:"text-sm text-red-400",children:Bt}):u.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:pe.map(fe=>{const ve=Ue===fe.name;return u.jsxs("button",{type:"button",onClick:()=>tt(fe.name),className:`group flex flex-col gap-2 rounded-xl border p-3 text-left transition ${ve?"border-accent shadow-sm":"border-line/50 hover:border-white/40"}`,children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.name}),u.jsx("div",{className:"flex h-6 overflow-hidden rounded-sm border border-line/40",children:fe.palette.slice(0,4).map(Me=>u.jsx("span",{className:"flex-1",style:{backgroundColor:Me}},`${fe.name}-${Me}`))}),u.jsx("div",{className:"text-[10px] uppercase text-muted tracking-wide",children:ve?"Selected":"Select"})]},fe.name)})}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:"Accent index"}),u.jsx("input",{type:"number",min:0,max:15,value:Te??"",onChange:fe=>fi(fe.target.value),className:"h-10 w-20 rounded-lg border border-line/50 bg-surface2 px-3 text-sm focus:border-accent focus:outline-none"}),u.jsx("button",{disabled:st||gt,onClick:Oi,className:"rounded-pill bg-accent px-4 py-2 text-sm font-semibold text-[#100f0e] shadow-sm transition hover:bg-accent2 disabled:opacity-50",children:st?"Applying":"Apply theme"}),es&&u.jsx("p",{className:`text-sm ${es.startsWith("Failed")?"text-red-400":"text-muted"}`,children:es})]})]}),PD.map(fe=>u.jsxs(Ge,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"UI"})]}),u.jsxs("div",{className:"space-y-4",children:[fe.title==="Dashboard Defaults"&&u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:"Overlay defaults"}),u.jsx("p",{className:"text-[11px] text-muted mb-3",children:"Select which overlays are enabled by default on the dashboard."}),u.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:(()=>{const ve=p["dashboard.overlay_defaults"]||"",Me=[...new Set(ve.split(",").map(Oe=>Oe.trim().toLowerCase()))],Ve=!Me.includes("load_off"),je=(Oe,Qe)=>{const Ae=[...new Set(ve.split(",").map(Qt=>Qt.trim().toLowerCase()))];let Gt;Qe?Gt=Ae.filter(Qt=>Qt!==Oe.toLowerCase()):Gt=[...Ae,Oe.toLowerCase()],zn("dashboard.overlay_defaults",Gt.join(", "))};return u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>je("load_off",!Ve),className:`rounded-pill px-3 py-1 border text-[11px] transition ${Ve?"bg-accent text-[#100f0e] border-accent":"border-line/60 text-muted hover:border-accent"}`,children:"Load"}),[["Charge","charge"],["Discharge","discharge"],["Export","export"],["Water","water"],["SoC Target","socTarget"],["SoC Projected","socProjected"]].map(([Oe,Qe])=>{const Ae=Me.includes(Qe.toLowerCase());return u.jsx("button",{type:"button",onClick:()=>{const Gt=[...new Set(ve.split(",").map(Fe=>Fe.trim().toLowerCase()))];let Qt;Ae?Qt=Gt.filter(Fe=>Fe!==Qe.toLowerCase()):Qt=[...Gt,Qe.toLowerCase()],zn("dashboard.overlay_defaults",Qt.join(", "))},className:`rounded-pill px-3 py-1 border text-[11px] transition ${Ae?"bg-accent text-[#100f0e] border-accent":"border-line/60 text-muted hover:border-accent"}`,children:Oe},Qe)})]})})()})]})}),u.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:fe.fields.map(ve=>u.jsxs("div",{className:"space-y-1",children:[ve.type==="boolean"?u.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[u.jsx(Yu,{checked:p[ve.key]==="true",onCheckedChange:Me=>zn(ve.key,Me?"true":"false")}),u.jsx("span",{className:"text-sm font-semibold",children:ve.label})]}):ve.type==="select"?u.jsxs(u.Fragment,{children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[ve.label,u.jsx(Cr,{text:Er[ve.key]||ve.helper})]}),u.jsx(mv,{value:p[ve.key]??"",onChange:Me=>zn(ve.key,Me),options:ve.options||[],placeholder:"Select..."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[ve.label,u.jsx(Cr,{text:Er[ve.key]||ve.helper})]}),u.jsx("input",{type:"text",value:p[ve.key]??"",onChange:Me=>zn(ve.key,Me.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"})]}),ve.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:ve.helper}),R[ve.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:R[ve.key]})]},ve.key))})]})]},fe.title)),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:le||I,onClick:ys,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:le?"Saving":"Save UI Preferences"}),F&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${F.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:F})]})]}),qt=()=>I?u.jsx(Ge,{className:"p-6 text-sm text-muted",children:"Loading advanced configuration"}):O?u.jsx(Ge,{className:"p-6 text-sm text-red-400",children:O}):u.jsxs("div",{className:"space-y-4",children:[LD.filter(fe=>fe.title!=="Danger Zone").map(fe=>u.jsxs(Ge,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Advanced"})]}),u.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:fe.fields.map(ve=>u.jsxs("div",{className:"space-y-1",children:[ve.type==="boolean"&&u.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[u.jsx(Yu,{checked:y[ve.key]==="true",onCheckedChange:Me=>hi(ve.key,Me?"true":"false")}),u.jsx("span",{className:"text-sm font-semibold",children:ve.label})]}),ve.helper&&u.jsx("p",{className:"text-[11px] text-muted ml-6",children:ve.helper}),z[ve.key]&&u.jsx("p",{className:"text-[11px] text-red-400 ml-6",children:z[ve.key]})]},ve.key))})]},fe.title)),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:se||I,onClick:Ai,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:se?"Saving":"Save Advanced Settings"}),xe&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${xe.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:xe})]}),u.jsx("div",{className:"py-8",children:u.jsx("div",{className:"h-px bg-line/20"})}),u.jsxs(Ge,{className:"border-red-500/30 bg-red-500/5 p-6",children:[u.jsx("div",{className:"flex items-center justify-between gap-4",children:u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-red-400",children:"Danger Zone"}),u.jsx("p",{className:"text-xs text-red-400/70 mt-1",children:"Irreversible actions that affect your entire system configuration."})]})}),u.jsx("div",{className:"mt-6",children:u.jsx("button",{type:"button",onClick:()=>xt(!0),className:"rounded-lg bg-[#EE3B47] px-4 py-2 text-xs font-bold uppercase tracking-wider text-white transition hover:bg-[#D6323D]",children:"Reset all settings to defaults"})})]})]});return u.jsxs(u.Fragment,{children:[u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12 space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-semibold",children:"Settings"}),u.jsx("p",{className:"text-sm text-muted",children:"System, parameters, and UI preferences collected into one modern surface."})]})}),u.jsx("div",{className:"flex flex-wrap gap-2",children:BW.map(fe=>{const ve=e===fe.id;return u.jsx("button",{onClick:()=>n(fe.id),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${ve?"bg-accent text-[#0F1216] shadow-sm":"bg-surface border border-line/50 text-muted"}`,children:fe.label},fe.id)})}),pn&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${pn.startsWith("Reset failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:pn}),e==="system"?Ri():e==="parameters"?Pe():e==="ui"?mt():qt()]}),u.jsx(ED,{open:ze,onOpenChange:xt,title:u.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[u.jsx(Wu,{className:"h-5 w-5"}),u.jsx("span",{children:"Danger Connection Reset"})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"rounded-md bg-red-500/10 p-4 border border-red-500/20",children:u.jsx("p",{className:"text-sm font-medium text-red-300",children:"Are you absolute sure? This action cannot be undone."})}),u.jsx("p",{className:"text-sm text-muted",children:"This will reset all system configuration, parameters, and UI preferences to their default values. The application will reload after resetting."}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[u.jsx("button",{type:"button",onClick:()=>xt(!1),className:"rounded-lg bg-surface px-4 py-2 text-sm font-semibold text-muted hover:text-text transition",children:"Cancel"}),u.jsx("button",{type:"button",onClick:vs,disabled:ds,className:"rounded-lg bg-red-500 px-4 py-2 text-sm font-bold text-white shadow-lg transition hover:bg-red-600 disabled:opacity-50",children:ds?"Resetting...":"Yes, reset everything"})]})]})})]})}const zD="label";function Nk(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function QW(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function BD(t,e){t.labels=e}function VD(t,e,n=zD){const s=[];t.datasets=e.map(a=>{const o=t.datasets.find(l=>l[n]===a[n]);return!o||!a.data||s.includes(o)?{...a}:(s.push(o),Object.assign(o,a),o)})}function JW(t,e=zD){const n={labels:[],datasets:[]};return BD(n,t.labels),VD(n,t.datasets,e),n}function e$(t,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:o,type:l,data:d,options:h,plugins:p=[],fallbackContent:x,updateMode:y,...b}=t,j=A.useRef(null),T=A.useRef(null),N=()=>{j.current&&(T.current=new li(j.current,{type:l,data:JW(d,o),options:h&&{...h},plugins:p}),Nk(e,T.current))},M=()=>{Nk(e,null),T.current&&(T.current.destroy(),T.current=null)};return A.useEffect(()=>{!a&&T.current&&h&&QW(T.current,h)},[a,h]),A.useEffect(()=>{!a&&T.current&&BD(T.current.config.data,d.labels)},[a,d.labels]),A.useEffect(()=>{!a&&T.current&&d.datasets&&VD(T.current.config.data,d.datasets,o)},[a,d.datasets]),A.useEffect(()=>{T.current&&(a?(M(),setTimeout(N)):T.current.update(y))},[a,h,d.labels,d.datasets,y]),A.useEffect(()=>{T.current&&(M(),setTimeout(N))},[l]),A.useEffect(()=>(N(),()=>M()),[]),u.jsx("canvas",{ref:j,role:"img",height:n,width:s,...b,children:x})}const t$=A.forwardRef(e$);function X0(t,e){return li.register(e),A.forwardRef((n,s)=>u.jsx(t$,{...n,ref:s,type:t}))}const K0=X0("line",LT),n$=X0("bar",PT),s$=X0("radar",BT);li.register(jd,kd,ac,Wa,Rp,oc,rc,Op);function xv({title:t,slots:e,color:n}){const a={labels:e.map(l=>new Date(l.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),datasets:[{label:"Actual",data:e.map(l=>l.actual??null),borderColor:"#94a3b8",backgroundColor:"#94a3b8",borderWidth:2,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1},{label:"p90",data:e.map(l=>l.p90),borderColor:`${n}40`,borderWidth:1,backgroundColor:`${n}33`,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:"+1"},{label:"p10 (Risk)",data:e.map(l=>l.p10),borderColor:`${n}80`,borderWidth:1.5,borderDash:[4,4],backgroundColor:"transparent",pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1},{label:"p50 (Forecast)",data:e.map(l=>l.p50),borderColor:n,backgroundColor:n,borderWidth:2,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1}]},o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#cbd5e1",font:{size:11},boxWidth:8,usePointStyle:!0}},title:{display:!!t,text:t,color:"#e2e8f0",font:{size:13,weight:"normal"},align:"start",padding:{bottom:10}},tooltip:{mode:"index",intersect:!1,backgroundColor:"#1e293b",titleColor:"#e2e8f0",bodyColor:"#cbd5e1",borderColor:"#334155",borderWidth:1}},scales:{x:{grid:{color:"#334155",drawBorder:!1},ticks:{color:"#94a3b8",maxRotation:0,autoSkip:!0,maxTicksLimit:8}},y:{grid:{color:"#334155",drawBorder:!1},ticks:{color:"#94a3b8"},min:0}},interaction:{mode:"nearest",axis:"x",intersect:!1},layout:{padding:{bottom:0,left:10,right:10}}};return u.jsx("div",{className:"w-full h-[250px]",children:u.jsx(K0,{data:a,options:o})})}function i$(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState("baseline"),[l,d]=A.useState(!1),[h,p]=A.useState(null),[x,y]=A.useState(!1),[b,j]=A.useState(!1),[T,N]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const te=await De.forecastEval();e(te)}catch(te){console.error("Failed to load forecast eval:",te)}})()},[]),A.useEffect(()=>{(async()=>{d(!0);try{const te=await De.forecastDay();s(te)}catch(te){console.error("Failed to load forecast day:",te)}finally{d(!1)}})()},[]),A.useEffect(()=>{(async()=>{try{const te=await De.config();p(te)}catch(te){console.error("Failed to load config for forecasting:",te)}})()},[]);const M=t?.versions.find(le=>le.version==="baseline_7_day_avg")||null,R=t?.versions.find(le=>le.version==="aurora")||null,E=(le,te)=>{if(!le)return"";const se=le[te];return se==null?"":se.toFixed(3)},z=n?.slots??[];z.map(le=>new Date(le.slot_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),z.map(le=>le.load_kwh??0),z.map(le=>le.baseline_load??0),z.map(le=>le.aurora_load??0);const U=h?.forecasting?.active_forecast_version||"baseline_7_day_avg",I=!!R&&R.samples>0,V=(le,te,se)=>{if(!le||!te)return null;const W=le[se],X=te[se];return W==null||X==null?null:W-X},O=V(M,R,"mae_pv"),q=V(M,R,"mae_load"),Z=async le=>{if(h){y(!0);try{await De.configSave({forecasting:{active_forecast_version:le}});const te=await De.config();p(te)}catch(te){console.error("Failed to save active forecast version:",te)}finally{y(!1)}}},re=async()=>{try{const[le,te]=await Promise.all([De.forecastEval(),De.forecastDay()]);e(le),s(te)}catch(le){console.error("Failed to reload forecasting data:",le)}},J=async()=>{j(!0);try{await De.forecastRunEval(7),await re()}catch(le){console.error("Failed to run AURORA evaluation:",le)}finally{j(!1)}},de=async()=>{N(!0);try{await De.forecastRunForward(48),await re()}catch(le){console.error("Failed to run AURORA forward forecasts:",le)}finally{N(!1)}};return u.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-medium text-text",children:"Forecasting"}),u.jsx("p",{className:"text-[11px] text-muted",children:"Baseline vs AURORA forecasts. Use the selector to choose which source the planner uses."})]}),u.jsxs("div",{className:"flex flex-col items-end gap-2",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px]",children:[u.jsx("span",{className:"text-muted",children:"Highlight"}),u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${a==="baseline"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>o("baseline"),children:"Baseline"}),u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${a==="aurora"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>o("aurora"),children:"AURORA"})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px]",children:[u.jsx("span",{className:"text-muted",children:"Planner forecast source"}),u.jsxs("select",{value:U,onChange:le=>Z(le.target.value),disabled:x,className:"rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px] text-white focus:border-accent focus:outline-none",children:[u.jsx("option",{value:"baseline_7_day_avg",children:"Baseline (7-day average)"}),u.jsx("option",{value:"aurora",children:"AURORA (ML model, experimental)"})]})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px]",children:[u.jsx("button",{type:"button",onClick:J,disabled:b,className:"rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px] text-white hover:border-accent disabled:opacity-50",children:b?"Running eval":"Run eval (7d)"}),u.jsx("button",{type:"button",onClick:de,disabled:T,className:"rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px] text-white hover:border-accent disabled:opacity-50",children:T?"Running forward":"Run forward (48h)"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[u.jsx(Fr,{label:"Baseline MAE PV",value:E(M,"mae_pv"),hint:"Last window"}),u.jsx(Fr,{label:"Baseline MAE Load",value:E(M,"mae_load"),hint:"Last window"}),u.jsx(Fr,{label:"AURORA MAE PV",value:E(R,"mae_pv"),hint:"Last window"}),u.jsx(Fr,{label:"AURORA MAE Load",value:E(R,"mae_load"),hint:"Last window"})]}),M&&R&&u.jsxs(Ge,{className:"p-3 md:p-4",children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:"MAE delta (AURORA vs baseline, last window)"}),u.jsxs("div",{className:"flex flex-wrap gap-4 text-[11px]",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-muted mr-1",children:"PV:"}),O!=null?u.jsxs("span",{className:O>0?"text-green-400":O<0?"text-amber-300":"",children:[O>0?" ":O<0?" ":"",Math.abs(O).toFixed(3)," kWh MAE"]}):u.jsx("span",{className:"text-muted",children:""})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-muted mr-1",children:"Load:"}),q!=null?u.jsxs("span",{className:q>0?"text-green-400":q<0?"text-amber-300":"",children:[q>0?" ":q<0?" ":"",Math.abs(q).toFixed(3)," kWh MAE"]}):u.jsx("span",{className:"text-muted",children:""})]})]})]}),!I&&u.jsx("div",{className:"text-[11px] text-amber-300",children:"AURORA metrics are not available yet. Run an evaluation or keep the planner on baseline."}),u.jsx(Nd,{day:"today",range:"48h",showDayToggle:!1}),z.some(le=>le.aurora_pv_p10!=null||le.aurora_load_p10!=null)&&u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsx(Ge,{className:"p-4",children:u.jsx(xv,{title:"PV Forecast (kWh) with Confidence Bands",color:"#22c55e",slots:z.map(le=>({time:le.slot_start,p10:le.aurora_pv_p10??null,p50:le.aurora_pv??null,p90:le.aurora_pv_p90??null,actual:le.pv_kwh}))})}),u.jsx(Ge,{className:"p-4",children:u.jsx(xv,{title:"Load Forecast (kWh) with Confidence Bands",color:"#f97316",slots:z.map(le=>({time:le.slot_start,p10:le.aurora_load_p10??null,p50:le.aurora_load??null,p90:le.aurora_load_p90??null,actual:le.load_kwh}))})})]}),u.jsxs(Ge,{children:[u.jsx("div",{className:"text-[11px] text-muted mb-2",children:"Today's slots"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full text-[11px] text-muted",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-line/60",children:[u.jsx("th",{className:"py-1 pr-3 text-left font-normal",children:"Time"}),u.jsx("th",{className:"py-1 pr-3 text-right font-normal",children:"Load (kWh)"}),u.jsx("th",{className:"py-1 pr-3 text-right font-normal",children:"Baseline (kWh)"}),u.jsx("th",{className:"py-1 pr-3 text-right font-normal",children:"AURORA (kWh)"})]})}),u.jsxs("tbody",{children:[z.map(le=>{const te=new Date(le.slot_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return u.jsxs("tr",{className:"border-b border-line/20",children:[u.jsx("td",{className:"py-1 pr-3",children:te}),u.jsx("td",{className:"py-1 pr-3 text-right",children:le.load_kwh?.toFixed(3)??""}),u.jsx("td",{className:"py-1 pr-3 text-right",children:le.baseline_load?.toFixed(3)??""}),u.jsx("td",{className:"py-1 pr-3 text-right",children:le.aurora_load?.toFixed(3)??""})]},le.slot_start)}),z.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"py-2 text-center text-muted",children:"No slots available for today."})})]})]})})]})]})}function a$(){const[t,e]=A.useState(!1),[n,s]=A.useState(null),[a,o]=A.useState(null),[l,d]=A.useState(10),[h,p]=A.useState(5);A.useEffect(()=>{De.config().then(b=>{s(b),d(b.battery?.capacity_kwh||10),p(b.battery?.max_charge_power_kw||5)})},[]);const x=async()=>{e(!0);try{const b={battery:{capacity_kwh:l,max_charge_power_kw:h,max_discharge_power_kw:h}},j=await De.simulate({manual_plan:[],overrides:b});o(j)}catch(b){console.error(b)}finally{e(!1)}},y=()=>{n&&(d(n.battery?.capacity_kwh||10),p(n.battery?.max_charge_power_kw||5),o(null))};return u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[u.jsxs("header",{children:[u.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-text flex items-center gap-3",children:[u.jsx(Gw,{className:"h-8 w-8 text-accent"}),"The Lab"]}),u.jsx("p",{className:"text-muted mt-1",children:'Run "What If?" simulations without affecting your real schedule.'})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-5 space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium text-text",children:[u.jsx($i,{className:"h-5 w-5 text-accent"}),u.jsx("span",{children:"Hardware Config"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[u.jsx("span",{className:"text-muted",children:"Battery Capacity"}),u.jsxs("span",{className:"text-text font-mono",children:[l," kWh"]})]}),u.jsx("input",{type:"range",min:"5",max:"100",step:"1",value:l,onChange:b=>d(parseFloat(b.target.value)),className:"w-full accent-accent h-2 bg-surface2 rounded-lg appearance-none cursor-pointer"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[u.jsx("span",{className:"text-muted",children:"Max Power (Charge/Discharge)"}),u.jsxs("span",{className:"text-text font-mono",children:[h," kW"]})]}),u.jsx("input",{type:"range",min:"1",max:"25",step:"0.5",value:h,onChange:b=>p(parseFloat(b.target.value)),className:"w-full accent-accent h-2 bg-surface2 rounded-lg appearance-none cursor-pointer"})]})]}),u.jsxs("div",{className:"pt-4 flex gap-3",children:[u.jsx("button",{onClick:x,disabled:t,className:"flex-1 btn btn-primary flex items-center justify-center gap-2",children:t?"Simulating...":u.jsxs(u.Fragment,{children:[u.jsx(Ev,{className:"h-4 w-4"})," Run Sim"]})}),u.jsx("button",{onClick:y,className:"btn btn-ghost px-3",title:"Reset to Config",children:u.jsx(DA,{className:"h-4 w-4"})})]})]}),u.jsx("div",{className:"card p-5 bg-surface/50 border-dashed",children:u.jsxs("p",{className:"text-xs text-muted leading-relaxed",children:[u.jsx("strong",{children:"Note:"})," These simulations use live market prices and forecasts. Adjusting capacity scales your current SoC% to the new size. Results are not saved to the planner."]})})]}),u.jsx("div",{className:"lg:col-span-2 space-y-6",children:a?u.jsx(Nd,{range:"48h",showDayToggle:!1,slotsOverride:a.schedule}):u.jsxs("div",{className:"h-full min-h-[400px] card flex flex-col items-center justify-center text-muted space-y-4",children:[u.jsx(Gw,{className:"h-12 w-12 opacity-20"}),u.jsx("p",{children:"Adjust parameters and click Run Sim to see results."})]})})]})]})}li.register(jd,kd,ac,Wa,Kv,oc,rc);function r$({slots:t,mode:e,highlightIndex:n}){if(!t||t.length===0)return u.jsx("div",{className:"text-[11px] text-muted px-4 py-6",children:"No forecast data available for the next 48 hours."});const s=t.map(y=>new Date(y.slot_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),a=e==="load",o=t.map(y=>a?y.base.load_kwh:y.base.pv_kwh),l=t.map(y=>a?y.final.load_kwh:y.final.pv_kwh),d=t.map(y=>a?y.correction.load_kwh:y.correction.pv_kwh),h=d.map((y,b)=>{const j=y>=0?"rgba(34, 197, 94, 0.8)":"rgba(239, 68, 68, 0.8)";return typeof n=="number"&&b===n?y>=0?"rgba(34, 197, 94, 0.9)":"rgba(239, 68, 68, 0.9)":j}),p={labels:s,datasets:[{type:"line",label:a?"Base load (kWh)":"Base solar (kWh)",data:o,borderColor:"rgba(148, 163, 184, 0.9)",backgroundColor:y=>{const b=y.chart,{ctx:j,chartArea:T}=b;if(!T)return"rgba(56, 189, 248, 0.18)";const N=j.createLinearGradient(0,T.bottom,0,T.top);return N.addColorStop(0,"rgba(15, 23, 42, 0.0)"),N.addColorStop(.5,"rgba(56, 189, 248, 0.12)"),N.addColorStop(1,"rgba(56, 189, 248, 0.25)"),N},borderWidth:1.5,tension:.4,pointRadius:0,fill:"origin"},{type:"line",label:a?"Final load (kWh)":"Final solar (kWh)",data:l,borderColor:"rgba(59, 130, 246, 0.98)",backgroundColor:"rgba(59, 130, 246, 0.3)",borderWidth:2,borderDash:[4,3],tension:.4,pointRadius:0},{type:"bar",label:a?"Load correction (kWh)":"Solar correction (kWh)",data:d,backgroundColor:h,borderColor:h,borderWidth:0,yAxisID:"y"}]},x={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e5e7eb",font:{size:10}}},tooltip:{backgroundColor:"#020617",borderColor:"#4b5563",borderWidth:1,titleColor:"#e5e7eb",bodyColor:"#e5e7eb",padding:8,callbacks:{label(y){const b=y.dataset.label||"",j=y.parsed.y;return`${b}: ${typeof j=="number"?j.toFixed(2):j}`}}}},scales:{x:{ticks:{color:"#9ca3af",maxRotation:0,autoSkip:!0,maxTicksLimit:12,font:{size:9}},grid:{display:!1}},y:{ticks:{color:"#9ca3af",font:{size:9}},grid:{display:!1}}}};return u.jsx("div",{className:"w-full h-60 transition-opacity duration-300",children:u.jsx(K0,{data:p,options:x},e)})}li.register(rN,ac,Wa,Op,oc,rc);function o$({weatherVolatility:t,riskFactor:e,forecastAccuracy:n,priceSpread:s,forecastBias:a}){const o=Math.min(100,t.cloud*100),l=Math.min(100,t.temp*100),d=Math.max(0,Math.min(100,(e-1)*25)),h=n,p=s!=null?Math.max(0,Math.min(100,s/2.5*100)):50,x=a!=null?Math.max(0,Math.min(100,(a+2)/4*100)):50,y=["Cloud Vol.","Temp Vol.","Aggression","Accuracy","Spread","Bias"],b=["#38bdf8","#f472b6","#fbbf24","#34d399","#a78bfa","#fb923c"],j={labels:y,datasets:[{label:"Current Context",data:[o,l,d,h,p,x],backgroundColor:"rgba(56, 189, 248, 0.15)",borderColor:"rgba(56, 189, 248, 0.5)",borderWidth:2,pointBackgroundColor:b,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:b,pointRadius:4}]},T={scales:{r:{angleLines:{color:"rgba(255, 255, 255, 0.1)"},grid:{color:"rgba(255, 255, 255, 0.1)"},pointLabels:{display:!1},ticks:{display:!1,backdropColor:"transparent"},suggestedMin:0,suggestedMax:100}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1e293b",titleColor:"#f8fafc",bodyColor:"#cbd5e1",borderColor:"#334155",borderWidth:1}},maintainAspectRatio:!1},N=y.slice(0,3),M=y.slice(3);return u.jsxs("div",{className:"relative w-full h-full min-h-[200px]",children:[u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:u.jsx(s$,{data:j,options:T})}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-3 pb-2 z-10",children:[u.jsx("div",{className:"flex flex-col gap-1",children:N.map((R,E)=>u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm ring-1 ring-white/10",style:{backgroundColor:b[E]}}),u.jsx("span",{className:"text-[9px] text-muted font-medium leading-tight",children:R})]},R))}),u.jsx("div",{className:"flex flex-col gap-1",children:M.map((R,E)=>u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm ring-1 ring-white/10",style:{backgroundColor:b[E+3]}}),u.jsx("span",{className:"text-[9px] text-muted font-medium leading-tight",children:R})]},R))})]})]})}function l$({events:t}){const e=A.useMemo(()=>[...t].sort((a,o)=>new Date(o.timestamp).getTime()-new Date(a.timestamp).getTime()),[t]),n=a=>{const o=(a.type+" "+a.message).toLowerCase();if(o.includes("charge")||o.includes("charging"))return u.jsx($i,{className:"h-4 w-4 text-amber-400"});if(o.includes("export")||o.includes("discharging"))return u.jsx(Ny,{className:"h-4 w-4 text-emerald-400"});if(o.includes("defensive")||o.includes("safety")||o.includes("hold"))return u.jsx(CA,{className:"h-4 w-4 text-blue-400"});if(o.includes("idle")||o.includes("wait"))return u.jsx(bA,{className:"h-4 w-4 text-slate-400"});if(o.includes("weather"))return u.jsx(qw,{className:"h-4 w-4 text-sky-400"});if(o.includes("learning")||o.includes("tune"))return u.jsx(Xw,{className:"h-4 w-4 text-purple-400"});if(o.includes("price")||o.includes("cost"))return u.jsx(Ty,{className:"h-4 w-4 text-emerald-400"});switch(a.type){case"STRATEGY_CHANGE":return u.jsx(Kk,{className:"h-4 w-4 text-purple-400"});case"WEATHER_ADJUSTMENT":return u.jsx(qw,{className:"h-4 w-4 text-blue-400"});case"PRICE_VOLATILITY":return u.jsx($i,{className:"h-4 w-4 text-amber-400"});case"LEARNING_EVENT":return u.jsx(Xw,{className:"h-4 w-4 text-emerald-400"});default:return u.jsx(jy,{className:"h-4 w-4 text-slate-400"})}},s=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return t.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted text-xs",children:[u.jsx(jy,{className:"h-6 w-6 mb-2 opacity-50"}),"No activity recorded yet."]}):u.jsxs("div",{className:"relative space-y-4 pl-2",children:[u.jsx("div",{className:"absolute left-[19px] top-2 bottom-2 w-[1px] bg-line/50"}),e.map((a,o)=>u.jsxs("div",{className:"relative flex gap-3 items-start group",children:[u.jsx("div",{className:"relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-surface border border-line/60 group-hover:border-accent/50 transition-colors",children:n(a)}),u.jsxs("div",{className:"flex-1 pt-1.5 min-w-0",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsx("p",{className:"text-xs font-medium text-text truncate",children:a.type.replace("_"," ")}),u.jsx("span",{className:"text-[10px] text-muted shrink-0 font-mono",children:s(a.timestamp)})]}),u.jsx("p",{className:"text-[11px] text-muted mt-0.5 leading-relaxed break-words",children:a.message}),a.details&&Object.keys(a.details).length>0&&u.jsx("div",{className:"mt-1.5",children:u.jsxs("details",{className:"group/details",children:[u.jsxs("summary",{className:"cursor-pointer text-[10px] text-accent/80 hover:text-accent select-none list-none flex items-center gap-1",children:[u.jsx("span",{children:"Details"}),u.jsx("span",{className:"opacity-50 group-open/details:rotate-180 transition-transform",children:""})]}),u.jsx("pre",{className:"mt-1 p-2 rounded bg-surface2/50 text-[10px] text-muted overflow-x-auto font-mono",children:JSON.stringify(a.details,null,2)})]})})]})]},o))]})}function c$({metrics:t,perfData:e}){let n=0,s=0;e?.cost_series&&e.cost_series.forEach(b=>{n+=b.planned,s+=b.realized});const a=s-n,o=a<=0?`Saved ${Math.abs(a).toFixed(1)} SEK`:`Overspent ${a.toFixed(1)} SEK`,l=a<=0,d=t?.mae_pv_aurora?.toFixed(2)??"N/A",h=t?.mae_load_aurora?.toFixed(2)??"N/A",p=t?.max_price_spread,x=p!=null?`${p.toFixed(2)} SEK`:"N/A",y=p!=null&&p>0;return u.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[u.jsxs(Ge,{className:"p-4 flex items-center justify-between relative overflow-hidden group",children:[u.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${l?"bg-emerald-500":"bg-rose-500"}`}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:`p-2 rounded-full ${l?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:u.jsx(Qk,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"7-Day Cost Drift"}),u.jsx("div",{className:`text-lg font-semibold ${l?"text-emerald-400":"text-rose-400"}`,children:o})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"vs Plan"}),l?u.jsx(Zw,{className:"h-4 w-4 text-emerald-500 ml-auto"}):u.jsx(Ty,{className:"h-4 w-4 text-rose-500 ml-auto"})]})]}),u.jsxs(Ge,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[u.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${y?"bg-emerald-500":"bg-rose-500"}`}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:`p-2 rounded-full ${y?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:u.jsx(id,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"Max Price Spread"}),u.jsx("div",{className:`text-lg font-semibold ${y?"text-emerald-400":"text-rose-400"}`,children:x})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"Arbitrage"}),y?u.jsx(Ty,{className:"h-4 w-4 text-emerald-500 ml-auto"}):u.jsx(Zw,{className:"h-4 w-4 text-rose-500 ml-auto"})]})]}),u.jsxs(Ge,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-amber-500/[0.02]"}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:"p-2 rounded-full bg-amber-500/10 text-amber-400",children:u.jsx($i,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"PV Forecast Error"}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[d," ",u.jsx("span",{className:"text-xs font-normal text-muted",children:"kWh"})]})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"MAE (7d)"}),u.jsx(Kw,{className:"h-4 w-4 text-amber-500/50 ml-auto"})]})]}),u.jsxs(Ge,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-blue-500/[0.02]"}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:"p-2 rounded-full bg-blue-500/10 text-blue-400",children:u.jsx(id,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"Load Forecast Error"}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[h," ",u.jsx("span",{className:"text-xs font-normal text-muted",children:"kWh"})]})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"MAE (7d)"}),u.jsx(Kw,{className:"h-4 w-4 text-blue-500/50 ml-auto"})]})]})]})}var FD;function Re(){return FD.apply(null,arguments)}function u$(t){FD=t}function Mi(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function $o(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Ot(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Z0(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Ot(t,e))return!1;return!0}function Ds(t){return t===void 0}function Ia(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Od(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function HD(t,e){var n=[],s,a=t.length;for(s=0;s<a;++s)n.push(e(t[s],s));return n}function Hr(t,e){for(var n in e)Ot(e,n)&&(t[n]=e[n]);return Ot(e,"toString")&&(t.toString=e.toString),Ot(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ea(t,e,n,s){return uC(t,e,n,s,!0).utc()}function d$(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ht(t){return t._pf==null&&(t._pf=d$()),t._pf}var yv;Array.prototype.some?yv=Array.prototype.some:yv=function(t){var e=Object(this),n=e.length>>>0,s;for(s=0;s<n;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function Q0(t){var e=null,n=!1,s=t._d&&!isNaN(t._d.getTime());if(s&&(e=ht(t),n=yv.call(e.parsedDateParts,function(a){return a!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s;return t._isValid}function Zp(t){var e=ea(NaN);return t!=null?Hr(ht(e),t):ht(e).userInvalidated=!0,e}var Mk=Re.momentProperties=[],hy=!1;function J0(t,e){var n,s,a,o=Mk.length;if(Ds(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Ds(e._i)||(t._i=e._i),Ds(e._f)||(t._f=e._f),Ds(e._l)||(t._l=e._l),Ds(e._strict)||(t._strict=e._strict),Ds(e._tzm)||(t._tzm=e._tzm),Ds(e._isUTC)||(t._isUTC=e._isUTC),Ds(e._offset)||(t._offset=e._offset),Ds(e._pf)||(t._pf=ht(e)),Ds(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)s=Mk[n],a=e[s],Ds(a)||(t[s]=a);return t}function Rd(t){J0(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),hy===!1&&(hy=!0,Re.updateOffset(this),hy=!1)}function Di(t){return t instanceof Rd||t!=null&&t._isAMomentObject!=null}function UD(t){Re.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function ci(t,e){var n=!0;return Hr(function(){if(Re.deprecationHandler!=null&&Re.deprecationHandler(null,t),n){var s=[],a,o,l,d=arguments.length;for(o=0;o<d;o++){if(a="",typeof arguments[o]=="object"){a+=`
[`+o+"] ";for(l in arguments[0])Ot(arguments[0],l)&&(a+=l+": "+arguments[0][l]+", ");a=a.slice(0,-2)}else a=arguments[o];s.push(a)}UD(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var Dk={};function ID(t,e){Re.deprecationHandler!=null&&Re.deprecationHandler(t,e),Dk[t]||(UD(e),Dk[t]=!0)}Re.suppressDeprecationWarnings=!1;Re.deprecationHandler=null;function ta(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function h$(t){var e,n;for(n in t)Ot(t,n)&&(e=t[n],ta(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function vv(t,e){var n=Hr({},t),s;for(s in e)Ot(e,s)&&($o(t[s])&&$o(e[s])?(n[s]={},Hr(n[s],t[s]),Hr(n[s],e[s])):e[s]!=null?n[s]=e[s]:delete n[s]);for(s in t)Ot(t,s)&&!Ot(e,s)&&$o(t[s])&&(n[s]=Hr({},n[s]));return n}function eb(t){t!=null&&this.set(t)}var bv;Object.keys?bv=Object.keys:bv=function(t){var e,n=[];for(e in t)Ot(t,e)&&n.push(e);return n};var f$={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function p$(t,e,n){var s=this._calendar[t]||this._calendar.sameElse;return ta(s)?s.call(e,n):s}function Ji(t,e,n){var s=""+Math.abs(t),a=e-s.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+s}var tb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Nf=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,fy={},$l={};function qe(t,e,n,s){var a=s;typeof s=="string"&&(a=function(){return this[s]()}),t&&($l[t]=a),e&&($l[e[0]]=function(){return Ji(a.apply(this,arguments),e[1],e[2])}),n&&($l[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)})}function m$(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function g$(t){var e=t.match(tb),n,s;for(n=0,s=e.length;n<s;n++)$l[e[n]]?e[n]=$l[e[n]]:e[n]=m$(e[n]);return function(a){var o="",l;for(l=0;l<s;l++)o+=ta(e[l])?e[l].call(a,t):e[l];return o}}function Hf(t,e){return t.isValid()?(e=YD(e,t.localeData()),fy[e]=fy[e]||g$(e),fy[e](t)):t.localeData().invalidDate()}function YD(t,e){var n=5;function s(a){return e.longDateFormat(a)||a}for(Nf.lastIndex=0;n>=0&&Nf.test(t);)t=t.replace(Nf,s),Nf.lastIndex=0,n-=1;return t}var x$={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function y$(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(tb).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var v$="Invalid date";function b$(){return this._invalidDate}var _$="%d",w$=/\d{1,2}/;function S$(t){return this._ordinal.replace("%d",t)}var j$={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function k$(t,e,n,s){var a=this._relativeTime[n];return ta(a)?a(t,e,n,s):a.replace(/%d/i,t)}function T$(t,e){var n=this._relativeTime[t>0?"future":"past"];return ta(n)?n(e):n.replace(/%s/i,e)}var Ck={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ui(t){return typeof t=="string"?Ck[t]||Ck[t.toLowerCase()]:void 0}function nb(t){var e={},n,s;for(s in t)Ot(t,s)&&(n=ui(s),n&&(e[n]=t[s]));return e}var N$={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function M$(t){var e=[],n;for(n in t)Ot(t,n)&&e.push({unit:n,priority:N$[n]});return e.sort(function(s,a){return s.priority-a.priority}),e}var WD=/\d/,Us=/\d\d/,$D=/\d{3}/,sb=/\d{4}/,Qp=/[+-]?\d{6}/,on=/\d\d?/,qD=/\d\d\d\d?/,GD=/\d\d\d\d\d\d?/,Jp=/\d{1,3}/,ib=/\d{1,4}/,em=/[+-]?\d{1,6}/,xc=/\d+/,tm=/[+-]?\d+/,D$=/Z|[+-]\d\d:?\d\d/gi,nm=/Z|[+-]\d\d(?::?\d\d)?/gi,C$=/[+-]?\d+(\.\d{1,3})?/,Pd=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,yc=/^[1-9]\d?/,ab=/^([1-9]\d|\d)/,yp;yp={};function He(t,e,n){yp[t]=ta(e)?e:function(s,a){return s&&n?n:e}}function E$(t,e){return Ot(yp,t)?yp[t](e._strict,e._locale):new RegExp(A$(t))}function A$(t){return Va(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,s,a,o){return n||s||a||o}))}function Va(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function oi(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function kt(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=oi(e)),n}var _v={};function Wt(t,e){var n,s=e,a;for(typeof t=="string"&&(t=[t]),Ia(e)&&(s=function(o,l){l[e]=kt(o)}),a=t.length,n=0;n<a;n++)_v[t[n]]=s}function Ld(t,e){Wt(t,function(n,s,a,o){a._w=a._w||{},e(n,a._w,a,o)})}function O$(t,e,n){e!=null&&Ot(_v,t)&&_v[t](e,n._a,n,t)}function sm(t){return t%4===0&&t%100!==0||t%400===0}var cs=0,Pa=1,Wi=2,Fn=3,Ni=4,La=5,Uo=6,R$=7,P$=8;qe("Y",0,0,function(){var t=this.year();return t<=9999?Ji(t,4):"+"+t});qe(0,["YY",2],0,function(){return this.year()%100});qe(0,["YYYY",4],0,"year");qe(0,["YYYYY",5],0,"year");qe(0,["YYYYYY",6,!0],0,"year");He("Y",tm);He("YY",on,Us);He("YYYY",ib,sb);He("YYYYY",em,Qp);He("YYYYYY",em,Qp);Wt(["YYYYY","YYYYYY"],cs);Wt("YYYY",function(t,e){e[cs]=t.length===2?Re.parseTwoDigitYear(t):kt(t)});Wt("YY",function(t,e){e[cs]=Re.parseTwoDigitYear(t)});Wt("Y",function(t,e){e[cs]=parseInt(t,10)});function td(t){return sm(t)?366:365}Re.parseTwoDigitYear=function(t){return kt(t)+(kt(t)>68?1900:2e3)};var XD=vc("FullYear",!0);function L$(){return sm(this.year())}function vc(t,e){return function(n){return n!=null?(KD(this,t,n),Re.updateOffset(this,e),this):xd(this,t)}}function xd(t,e){if(!t.isValid())return NaN;var n=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function KD(t,e,n){var s,a,o,l,d;if(!(!t.isValid()||isNaN(n))){switch(s=t._d,a=t._isUTC,e){case"Milliseconds":return void(a?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(a?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(a?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(a?s.setUTCHours(n):s.setHours(n));case"Date":return void(a?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}o=n,l=t.month(),d=t.date(),d=d===29&&l===1&&!sm(o)?28:d,a?s.setUTCFullYear(o,l,d):s.setFullYear(o,l,d)}}function z$(t){return t=ui(t),ta(this[t])?this[t]():this}function B$(t,e){if(typeof t=="object"){t=nb(t);var n=M$(t),s,a=n.length;for(s=0;s<a;s++)this[n[s].unit](t[n[s].unit])}else if(t=ui(t),ta(this[t]))return this[t](e);return this}function V$(t,e){return(t%e+e)%e}var Mn;Array.prototype.indexOf?Mn=Array.prototype.indexOf:Mn=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function rb(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=V$(e,12);return t+=(e-n)/12,n===1?sm(t)?29:28:31-n%7%2}qe("M",["MM",2],"Mo",function(){return this.month()+1});qe("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});qe("MMMM",0,0,function(t){return this.localeData().months(this,t)});He("M",on,yc);He("MM",on,Us);He("MMM",function(t,e){return e.monthsShortRegex(t)});He("MMMM",function(t,e){return e.monthsRegex(t)});Wt(["M","MM"],function(t,e){e[Pa]=kt(t)-1});Wt(["MMM","MMMM"],function(t,e,n,s){var a=n._locale.monthsParse(t,s,n._strict);a!=null?e[Pa]=a:ht(n).invalidMonth=t});var F$="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ZD="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),QD=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,H$=Pd,U$=Pd;function I$(t,e){return t?Mi(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||QD).test(e)?"format":"standalone"][t.month()]:Mi(this._months)?this._months:this._months.standalone}function Y$(t,e){return t?Mi(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[QD.test(e)?"format":"standalone"][t.month()]:Mi(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function W$(t,e,n){var s,a,o,l=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)o=ea([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:null):(a=Mn.call(this._longMonthsParse,l),a!==-1?a:null):e==="MMM"?(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:(a=Mn.call(this._longMonthsParse,l),a!==-1?a:null)):(a=Mn.call(this._longMonthsParse,l),a!==-1?a:(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:null))}function $$(t,e,n){var s,a,o;if(this._monthsParseExact)return W$.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(a=ea([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!n&&!this._monthsParse[s]&&(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(n&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!n&&this._monthsParse[s].test(t))return s}}function JD(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=kt(e);else if(e=t.localeData().monthsParse(e),!Ia(e))return t}var n=e,s=t.date();return s=s<29?s:Math.min(s,rb(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,s):t._d.setMonth(n,s),t}function eC(t){return t!=null?(JD(this,t),Re.updateOffset(this,!0),this):xd(this,"Month")}function q$(){return rb(this.year(),this.month())}function G$(t){return this._monthsParseExact?(Ot(this,"_monthsRegex")||tC.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Ot(this,"_monthsShortRegex")||(this._monthsShortRegex=H$),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function X$(t){return this._monthsParseExact?(Ot(this,"_monthsRegex")||tC.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Ot(this,"_monthsRegex")||(this._monthsRegex=U$),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function tC(){function t(h,p){return p.length-h.length}var e=[],n=[],s=[],a,o,l,d;for(a=0;a<12;a++)o=ea([2e3,a]),l=Va(this.monthsShort(o,"")),d=Va(this.months(o,"")),e.push(l),n.push(d),s.push(d),s.push(l);e.sort(t),n.sort(t),s.sort(t),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function K$(t,e,n,s,a,o,l){var d;return t<100&&t>=0?(d=new Date(t+400,e,n,s,a,o,l),isFinite(d.getFullYear())&&d.setFullYear(t)):d=new Date(t,e,n,s,a,o,l),d}function yd(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function vp(t,e,n){var s=7+e-n,a=(7+yd(t,0,s).getUTCDay()-e)%7;return-a+s-1}function nC(t,e,n,s,a){var o=(7+n-s)%7,l=vp(t,s,a),d=1+7*(e-1)+o+l,h,p;return d<=0?(h=t-1,p=td(h)+d):d>td(t)?(h=t+1,p=d-td(t)):(h=t,p=d),{year:h,dayOfYear:p}}function vd(t,e,n){var s=vp(t.year(),e,n),a=Math.floor((t.dayOfYear()-s-1)/7)+1,o,l;return a<1?(l=t.year()-1,o=a+Fa(l,e,n)):a>Fa(t.year(),e,n)?(o=a-Fa(t.year(),e,n),l=t.year()+1):(l=t.year(),o=a),{week:o,year:l}}function Fa(t,e,n){var s=vp(t,e,n),a=vp(t+1,e,n);return(td(t)-s+a)/7}qe("w",["ww",2],"wo","week");qe("W",["WW",2],"Wo","isoWeek");He("w",on,yc);He("ww",on,Us);He("W",on,yc);He("WW",on,Us);Ld(["w","ww","W","WW"],function(t,e,n,s){e[s.substr(0,1)]=kt(t)});function Z$(t){return vd(t,this._week.dow,this._week.doy).week}var Q$={dow:0,doy:6};function J$(){return this._week.dow}function eq(){return this._week.doy}function tq(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function nq(t){var e=vd(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}qe("d",0,"do","day");qe("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});qe("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});qe("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});qe("e",0,0,"weekday");qe("E",0,0,"isoWeekday");He("d",on);He("e",on);He("E",on);He("dd",function(t,e){return e.weekdaysMinRegex(t)});He("ddd",function(t,e){return e.weekdaysShortRegex(t)});He("dddd",function(t,e){return e.weekdaysRegex(t)});Ld(["dd","ddd","dddd"],function(t,e,n,s){var a=n._locale.weekdaysParse(t,s,n._strict);a!=null?e.d=a:ht(n).invalidWeekday=t});Ld(["d","e","E"],function(t,e,n,s){e[s]=kt(t)});function sq(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function iq(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function ob(t,e){return t.slice(e,7).concat(t.slice(0,e))}var aq="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),sC="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),rq="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),oq=Pd,lq=Pd,cq=Pd;function uq(t,e){var n=Mi(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?ob(n,this._week.dow):t?n[t.day()]:n}function dq(t){return t===!0?ob(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function hq(t){return t===!0?ob(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function fq(t,e,n){var s,a,o,l=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)o=ea([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(a=Mn.call(this._weekdaysParse,l),a!==-1?a:null):e==="ddd"?(a=Mn.call(this._shortWeekdaysParse,l),a!==-1?a:null):(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null):e==="dddd"?(a=Mn.call(this._weekdaysParse,l),a!==-1||(a=Mn.call(this._shortWeekdaysParse,l),a!==-1)?a:(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null)):e==="ddd"?(a=Mn.call(this._shortWeekdaysParse,l),a!==-1||(a=Mn.call(this._weekdaysParse,l),a!==-1)?a:(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null)):(a=Mn.call(this._minWeekdaysParse,l),a!==-1||(a=Mn.call(this._weekdaysParse,l),a!==-1)?a:(a=Mn.call(this._shortWeekdaysParse,l),a!==-1?a:null))}function pq(t,e,n){var s,a,o;if(this._weekdaysParseExact)return fq.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(a=ea([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(n&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(n&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!n&&this._weekdaysParse[s].test(t))return s}}function mq(t){if(!this.isValid())return t!=null?this:NaN;var e=xd(this,"Day");return t!=null?(t=sq(t,this.localeData()),this.add(t-e,"d")):e}function gq(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function xq(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=iq(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function yq(t){return this._weekdaysParseExact?(Ot(this,"_weekdaysRegex")||lb.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Ot(this,"_weekdaysRegex")||(this._weekdaysRegex=oq),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function vq(t){return this._weekdaysParseExact?(Ot(this,"_weekdaysRegex")||lb.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ot(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=lq),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function bq(t){return this._weekdaysParseExact?(Ot(this,"_weekdaysRegex")||lb.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ot(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=cq),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function lb(){function t(x,y){return y.length-x.length}var e=[],n=[],s=[],a=[],o,l,d,h,p;for(o=0;o<7;o++)l=ea([2e3,1]).day(o),d=Va(this.weekdaysMin(l,"")),h=Va(this.weekdaysShort(l,"")),p=Va(this.weekdays(l,"")),e.push(d),n.push(h),s.push(p),a.push(d),a.push(h),a.push(p);e.sort(t),n.sort(t),s.sort(t),a.sort(t),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function cb(){return this.hours()%12||12}function _q(){return this.hours()||24}qe("H",["HH",2],0,"hour");qe("h",["hh",2],0,cb);qe("k",["kk",2],0,_q);qe("hmm",0,0,function(){return""+cb.apply(this)+Ji(this.minutes(),2)});qe("hmmss",0,0,function(){return""+cb.apply(this)+Ji(this.minutes(),2)+Ji(this.seconds(),2)});qe("Hmm",0,0,function(){return""+this.hours()+Ji(this.minutes(),2)});qe("Hmmss",0,0,function(){return""+this.hours()+Ji(this.minutes(),2)+Ji(this.seconds(),2)});function iC(t,e){qe(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}iC("a",!0);iC("A",!1);function aC(t,e){return e._meridiemParse}He("a",aC);He("A",aC);He("H",on,ab);He("h",on,yc);He("k",on,yc);He("HH",on,Us);He("hh",on,Us);He("kk",on,Us);He("hmm",qD);He("hmmss",GD);He("Hmm",qD);He("Hmmss",GD);Wt(["H","HH"],Fn);Wt(["k","kk"],function(t,e,n){var s=kt(t);e[Fn]=s===24?0:s});Wt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Wt(["h","hh"],function(t,e,n){e[Fn]=kt(t),ht(n).bigHour=!0});Wt("hmm",function(t,e,n){var s=t.length-2;e[Fn]=kt(t.substr(0,s)),e[Ni]=kt(t.substr(s)),ht(n).bigHour=!0});Wt("hmmss",function(t,e,n){var s=t.length-4,a=t.length-2;e[Fn]=kt(t.substr(0,s)),e[Ni]=kt(t.substr(s,2)),e[La]=kt(t.substr(a)),ht(n).bigHour=!0});Wt("Hmm",function(t,e,n){var s=t.length-2;e[Fn]=kt(t.substr(0,s)),e[Ni]=kt(t.substr(s))});Wt("Hmmss",function(t,e,n){var s=t.length-4,a=t.length-2;e[Fn]=kt(t.substr(0,s)),e[Ni]=kt(t.substr(s,2)),e[La]=kt(t.substr(a))});function wq(t){return(t+"").toLowerCase().charAt(0)==="p"}var Sq=/[ap]\.?m?\.?/i,jq=vc("Hours",!0);function kq(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var rC={calendar:f$,longDateFormat:x$,invalidDate:v$,ordinal:_$,dayOfMonthOrdinalParse:w$,relativeTime:j$,months:F$,monthsShort:ZD,week:Q$,weekdays:aq,weekdaysMin:rq,weekdaysShort:sC,meridiemParse:Sq},un={},Cu={},bd;function Tq(t,e){var n,s=Math.min(t.length,e.length);for(n=0;n<s;n+=1)if(t[n]!==e[n])return n;return s}function Ek(t){return t&&t.toLowerCase().replace("_","-")}function Nq(t){for(var e=0,n,s,a,o;e<t.length;){for(o=Ek(t[e]).split("-"),n=o.length,s=Ek(t[e+1]),s=s?s.split("-"):null;n>0;){if(a=im(o.slice(0,n).join("-")),a)return a;if(s&&s.length>=n&&Tq(o,s)>=n-1)break;n--}e++}return bd}function Mq(t){return!!(t&&t.match("^[^/\\\\]*$"))}function im(t){var e=null,n;if(un[t]===void 0&&typeof Yf<"u"&&Yf&&Yf.exports&&Mq(t))try{e=bd._abbr,n=require,n("./locale/"+t),$r(e)}catch{un[t]=null}return un[t]}function $r(t,e){var n;return t&&(Ds(e)?n=qa(t):n=ub(t,e),n?bd=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),bd._abbr}function ub(t,e){if(e!==null){var n,s=rC;if(e.abbr=t,un[t]!=null)ID("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=un[t]._config;else if(e.parentLocale!=null)if(un[e.parentLocale]!=null)s=un[e.parentLocale]._config;else if(n=im(e.parentLocale),n!=null)s=n._config;else return Cu[e.parentLocale]||(Cu[e.parentLocale]=[]),Cu[e.parentLocale].push({name:t,config:e}),null;return un[t]=new eb(vv(s,e)),Cu[t]&&Cu[t].forEach(function(a){ub(a.name,a.config)}),$r(t),un[t]}else return delete un[t],null}function Dq(t,e){if(e!=null){var n,s,a=rC;un[t]!=null&&un[t].parentLocale!=null?un[t].set(vv(un[t]._config,e)):(s=im(t),s!=null&&(a=s._config),e=vv(a,e),s==null&&(e.abbr=t),n=new eb(e),n.parentLocale=un[t],un[t]=n),$r(t)}else un[t]!=null&&(un[t].parentLocale!=null?(un[t]=un[t].parentLocale,t===$r()&&$r(t)):un[t]!=null&&delete un[t]);return un[t]}function qa(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return bd;if(!Mi(t)){if(e=im(t),e)return e;t=[t]}return Nq(t)}function Cq(){return bv(un)}function db(t){var e,n=t._a;return n&&ht(t).overflow===-2&&(e=n[Pa]<0||n[Pa]>11?Pa:n[Wi]<1||n[Wi]>rb(n[cs],n[Pa])?Wi:n[Fn]<0||n[Fn]>24||n[Fn]===24&&(n[Ni]!==0||n[La]!==0||n[Uo]!==0)?Fn:n[Ni]<0||n[Ni]>59?Ni:n[La]<0||n[La]>59?La:n[Uo]<0||n[Uo]>999?Uo:-1,ht(t)._overflowDayOfYear&&(e<cs||e>Wi)&&(e=Wi),ht(t)._overflowWeeks&&e===-1&&(e=R$),ht(t)._overflowWeekday&&e===-1&&(e=P$),ht(t).overflow=e),t}var Eq=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Aq=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Oq=/Z|[+-]\d\d(?::?\d\d)?/,Mf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],py=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Rq=/^\/?Date\((-?\d+)/i,Pq=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Lq={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function oC(t){var e,n,s=t._i,a=Eq.exec(s)||Aq.exec(s),o,l,d,h,p=Mf.length,x=py.length;if(a){for(ht(t).iso=!0,e=0,n=p;e<n;e++)if(Mf[e][1].exec(a[1])){l=Mf[e][0],o=Mf[e][2]!==!1;break}if(l==null){t._isValid=!1;return}if(a[3]){for(e=0,n=x;e<n;e++)if(py[e][1].exec(a[3])){d=(a[2]||" ")+py[e][0];break}if(d==null){t._isValid=!1;return}}if(!o&&d!=null){t._isValid=!1;return}if(a[4])if(Oq.exec(a[4]))h="Z";else{t._isValid=!1;return}t._f=l+(d||"")+(h||""),fb(t)}else t._isValid=!1}function zq(t,e,n,s,a,o){var l=[Bq(t),ZD.indexOf(e),parseInt(n,10),parseInt(s,10),parseInt(a,10)];return o&&l.push(parseInt(o,10)),l}function Bq(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Vq(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Fq(t,e,n){if(t){var s=sC.indexOf(t),a=new Date(e[0],e[1],e[2]).getDay();if(s!==a)return ht(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Hq(t,e,n){if(t)return Lq[t];if(e)return 0;var s=parseInt(n,10),a=s%100,o=(s-a)/100;return o*60+a}function lC(t){var e=Pq.exec(Vq(t._i)),n;if(e){if(n=zq(e[4],e[3],e[2],e[5],e[6],e[7]),!Fq(e[1],n,t))return;t._a=n,t._tzm=Hq(e[8],e[9],e[10]),t._d=yd.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ht(t).rfc2822=!0}else t._isValid=!1}function Uq(t){var e=Rq.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(oC(t),t._isValid===!1)delete t._isValid;else return;if(lC(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:Re.createFromInputFallback(t)}Re.createFromInputFallback=ci("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Pl(t,e,n){return t??e??n}function Iq(t){var e=new Date(Re.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function hb(t){var e,n,s=[],a,o,l;if(!t._d){for(a=Iq(t),t._w&&t._a[Wi]==null&&t._a[Pa]==null&&Yq(t),t._dayOfYear!=null&&(l=Pl(t._a[cs],a[cs]),(t._dayOfYear>td(l)||t._dayOfYear===0)&&(ht(t)._overflowDayOfYear=!0),n=yd(l,0,t._dayOfYear),t._a[Pa]=n.getUTCMonth(),t._a[Wi]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=a[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Fn]===24&&t._a[Ni]===0&&t._a[La]===0&&t._a[Uo]===0&&(t._nextDay=!0,t._a[Fn]=0),t._d=(t._useUTC?yd:K$).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Fn]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(ht(t).weekdayMismatch=!0)}}function Yq(t){var e,n,s,a,o,l,d,h,p;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,l=4,n=Pl(e.GG,t._a[cs],vd(rn(),1,4).year),s=Pl(e.W,1),a=Pl(e.E,1),(a<1||a>7)&&(h=!0)):(o=t._locale._week.dow,l=t._locale._week.doy,p=vd(rn(),o,l),n=Pl(e.gg,t._a[cs],p.year),s=Pl(e.w,p.week),e.d!=null?(a=e.d,(a<0||a>6)&&(h=!0)):e.e!=null?(a=e.e+o,(e.e<0||e.e>6)&&(h=!0)):a=o),s<1||s>Fa(n,o,l)?ht(t)._overflowWeeks=!0:h!=null?ht(t)._overflowWeekday=!0:(d=nC(n,s,a,o,l),t._a[cs]=d.year,t._dayOfYear=d.dayOfYear)}Re.ISO_8601=function(){};Re.RFC_2822=function(){};function fb(t){if(t._f===Re.ISO_8601){oC(t);return}if(t._f===Re.RFC_2822){lC(t);return}t._a=[],ht(t).empty=!0;var e=""+t._i,n,s,a,o,l,d=e.length,h=0,p,x;for(a=YD(t._f,t._locale).match(tb)||[],x=a.length,n=0;n<x;n++)o=a[n],s=(e.match(E$(o,t))||[])[0],s&&(l=e.substr(0,e.indexOf(s)),l.length>0&&ht(t).unusedInput.push(l),e=e.slice(e.indexOf(s)+s.length),h+=s.length),$l[o]?(s?ht(t).empty=!1:ht(t).unusedTokens.push(o),O$(o,s,t)):t._strict&&!s&&ht(t).unusedTokens.push(o);ht(t).charsLeftOver=d-h,e.length>0&&ht(t).unusedInput.push(e),t._a[Fn]<=12&&ht(t).bigHour===!0&&t._a[Fn]>0&&(ht(t).bigHour=void 0),ht(t).parsedDateParts=t._a.slice(0),ht(t).meridiem=t._meridiem,t._a[Fn]=Wq(t._locale,t._a[Fn],t._meridiem),p=ht(t).era,p!==null&&(t._a[cs]=t._locale.erasConvertYear(p,t._a[cs])),hb(t),db(t)}function Wq(t,e,n){var s;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(s=t.isPM(n),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function $q(t){var e,n,s,a,o,l,d=!1,h=t._f.length;if(h===0){ht(t).invalidFormat=!0,t._d=new Date(NaN);return}for(a=0;a<h;a++)o=0,l=!1,e=J0({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[a],fb(e),Q0(e)&&(l=!0),o+=ht(e).charsLeftOver,o+=ht(e).unusedTokens.length*10,ht(e).score=o,d?o<s&&(s=o,n=e):(s==null||o<s||l)&&(s=o,n=e,l&&(d=!0));Hr(t,n||e)}function qq(t){if(!t._d){var e=nb(t._i),n=e.day===void 0?e.date:e.day;t._a=HD([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),hb(t)}}function Gq(t){var e=new Rd(db(cC(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function cC(t){var e=t._i,n=t._f;return t._locale=t._locale||qa(t._l),e===null||n===void 0&&e===""?Zp({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Di(e)?new Rd(db(e)):(Od(e)?t._d=e:Mi(n)?$q(t):n?fb(t):Xq(t),Q0(t)||(t._d=null),t))}function Xq(t){var e=t._i;Ds(e)?t._d=new Date(Re.now()):Od(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Uq(t):Mi(e)?(t._a=HD(e.slice(0),function(n){return parseInt(n,10)}),hb(t)):$o(e)?qq(t):Ia(e)?t._d=new Date(e):Re.createFromInputFallback(t)}function uC(t,e,n,s,a){var o={};return(e===!0||e===!1)&&(s=e,e=void 0),(n===!0||n===!1)&&(s=n,n=void 0),($o(t)&&Z0(t)||Mi(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=a,o._l=n,o._i=t,o._f=e,o._strict=s,Gq(o)}function rn(t,e,n,s){return uC(t,e,n,s,!1)}var Kq=ci("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=rn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Zp()}),Zq=ci("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=rn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Zp()});function dC(t,e){var n,s;if(e.length===1&&Mi(e[0])&&(e=e[0]),!e.length)return rn();for(n=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](n))&&(n=e[s]);return n}function Qq(){var t=[].slice.call(arguments,0);return dC("isBefore",t)}function Jq(){var t=[].slice.call(arguments,0);return dC("isAfter",t)}var eG=function(){return Date.now?Date.now():+new Date},Eu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function tG(t){var e,n=!1,s,a=Eu.length;for(e in t)if(Ot(t,e)&&!(Mn.call(Eu,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<a;++s)if(t[Eu[s]]){if(n)return!1;parseFloat(t[Eu[s]])!==kt(t[Eu[s]])&&(n=!0)}return!0}function nG(){return this._isValid}function sG(){return Ci(NaN)}function am(t){var e=nb(t),n=e.year||0,s=e.quarter||0,a=e.month||0,o=e.week||e.isoWeek||0,l=e.day||0,d=e.hour||0,h=e.minute||0,p=e.second||0,x=e.millisecond||0;this._isValid=tG(e),this._milliseconds=+x+p*1e3+h*6e4+d*1e3*60*60,this._days=+l+o*7,this._months=+a+s*3+n*12,this._data={},this._locale=qa(),this._bubble()}function Uf(t){return t instanceof am}function wv(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function iG(t,e,n){var s=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0,l;for(l=0;l<s;l++)kt(t[l])!==kt(e[l])&&o++;return o+a}function hC(t,e){qe(t,0,0,function(){var n=this.utcOffset(),s="+";return n<0&&(n=-n,s="-"),s+Ji(~~(n/60),2)+e+Ji(~~n%60,2)})}hC("Z",":");hC("ZZ","");He("Z",nm);He("ZZ",nm);Wt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=pb(nm,t)});var aG=/([\+\-]|\d\d)/gi;function pb(t,e){var n=(e||"").match(t),s,a,o;return n===null?null:(s=n[n.length-1]||[],a=(s+"").match(aG)||["-",0,0],o=+(a[1]*60)+kt(a[2]),o===0?0:a[0]==="+"?o:-o)}function mb(t,e){var n,s;return e._isUTC?(n=e.clone(),s=(Di(t)||Od(t)?t.valueOf():rn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),Re.updateOffset(n,!1),n):rn(t).local()}function Sv(t){return-Math.round(t._d.getTimezoneOffset())}Re.updateOffset=function(){};function rG(t,e,n){var s=this._offset||0,a;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=pb(nm,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(a=Sv(this)),this._offset=t,this._isUTC=!0,a!=null&&this.add(a,"m"),s!==t&&(!e||this._changeInProgress?mC(this,Ci(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Re.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:Sv(this)}function oG(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function lG(t){return this.utcOffset(0,t)}function cG(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Sv(this),"m")),this}function uG(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=pb(D$,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function dG(t){return this.isValid()?(t=t?rn(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function hG(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function fG(){if(!Ds(this._isDSTShifted))return this._isDSTShifted;var t={},e;return J0(t,this),t=cC(t),t._a?(e=t._isUTC?ea(t._a):rn(t._a),this._isDSTShifted=this.isValid()&&iG(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function pG(){return this.isValid()?!this._isUTC:!1}function mG(){return this.isValid()?this._isUTC:!1}function fC(){return this.isValid()?this._isUTC&&this._offset===0:!1}var gG=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,xG=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ci(t,e){var n=t,s=null,a,o,l;return Uf(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Ia(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(s=gG.exec(t))?(a=s[1]==="-"?-1:1,n={y:0,d:kt(s[Wi])*a,h:kt(s[Fn])*a,m:kt(s[Ni])*a,s:kt(s[La])*a,ms:kt(wv(s[Uo]*1e3))*a}):(s=xG.exec(t))?(a=s[1]==="-"?-1:1,n={y:Ao(s[2],a),M:Ao(s[3],a),w:Ao(s[4],a),d:Ao(s[5],a),h:Ao(s[6],a),m:Ao(s[7],a),s:Ao(s[8],a)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(l=yG(rn(n.from),rn(n.to)),n={},n.ms=l.milliseconds,n.M=l.months),o=new am(n),Uf(t)&&Ot(t,"_locale")&&(o._locale=t._locale),Uf(t)&&Ot(t,"_isValid")&&(o._isValid=t._isValid),o}Ci.fn=am.prototype;Ci.invalid=sG;function Ao(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ak(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function yG(t,e){var n;return t.isValid()&&e.isValid()?(e=mb(e,t),t.isBefore(e)?n=Ak(t,e):(n=Ak(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function pC(t,e){return function(n,s){var a,o;return s!==null&&!isNaN(+s)&&(ID(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=s,s=o),a=Ci(n,s),mC(this,a,t),this}}function mC(t,e,n,s){var a=e._milliseconds,o=wv(e._days),l=wv(e._months);t.isValid()&&(s=s??!0,l&&JD(t,xd(t,"Month")+l*n),o&&KD(t,"Date",xd(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),s&&Re.updateOffset(t,o||l))}var vG=pC(1,"add"),bG=pC(-1,"subtract");function gC(t){return typeof t=="string"||t instanceof String}function _G(t){return Di(t)||Od(t)||gC(t)||Ia(t)||SG(t)||wG(t)||t===null||t===void 0}function wG(t){var e=$o(t)&&!Z0(t),n=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,o,l=s.length;for(a=0;a<l;a+=1)o=s[a],n=n||Ot(t,o);return e&&n}function SG(t){var e=Mi(t),n=!1;return e&&(n=t.filter(function(s){return!Ia(s)&&gC(t)}).length===0),e&&n}function jG(t){var e=$o(t)&&!Z0(t),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,o;for(a=0;a<s.length;a+=1)o=s[a],n=n||Ot(t,o);return e&&n}function kG(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function TG(t,e){arguments.length===1&&(arguments[0]?_G(arguments[0])?(t=arguments[0],e=void 0):jG(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||rn(),s=mb(n,this).startOf("day"),a=Re.calendarFormat(this,s)||"sameElse",o=e&&(ta(e[a])?e[a].call(this,n):e[a]);return this.format(o||this.localeData().calendar(a,this,rn(n)))}function NG(){return new Rd(this)}function MG(t,e){var n=Di(t)?t:rn(t);return this.isValid()&&n.isValid()?(e=ui(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function DG(t,e){var n=Di(t)?t:rn(t);return this.isValid()&&n.isValid()?(e=ui(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function CG(t,e,n,s){var a=Di(t)?t:rn(t),o=Di(e)?e:rn(e);return this.isValid()&&a.isValid()&&o.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(a,n):!this.isBefore(a,n))&&(s[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function EG(t,e){var n=Di(t)?t:rn(t),s;return this.isValid()&&n.isValid()?(e=ui(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function AG(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function OG(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function RG(t,e,n){var s,a,o;if(!this.isValid())return NaN;if(s=mb(t,this),!s.isValid())return NaN;switch(a=(s.utcOffset()-this.utcOffset())*6e4,e=ui(e),e){case"year":o=If(this,s)/12;break;case"month":o=If(this,s);break;case"quarter":o=If(this,s)/3;break;case"second":o=(this-s)/1e3;break;case"minute":o=(this-s)/6e4;break;case"hour":o=(this-s)/36e5;break;case"day":o=(this-s-a)/864e5;break;case"week":o=(this-s-a)/6048e5;break;default:o=this-s}return n?o:oi(o)}function If(t,e){if(t.date()<e.date())return-If(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(n,"months"),a,o;return e-s<0?(a=t.clone().add(n-1,"months"),o=(e-s)/(s-a)):(a=t.clone().add(n+1,"months"),o=(e-s)/(a-s)),-(n+o)||0}Re.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Re.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function PG(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function LG(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?Hf(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ta(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Hf(n,"Z")):Hf(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function zG(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,s,a,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+s+a+o)}function BG(t){t||(t=this.isUtc()?Re.defaultFormatUtc:Re.defaultFormat);var e=Hf(this,t);return this.localeData().postformat(e)}function VG(t,e){return this.isValid()&&(Di(t)&&t.isValid()||rn(t).isValid())?Ci({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function FG(t){return this.from(rn(),t)}function HG(t,e){return this.isValid()&&(Di(t)&&t.isValid()||rn(t).isValid())?Ci({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function UG(t){return this.to(rn(),t)}function xC(t){var e;return t===void 0?this._locale._abbr:(e=qa(t),e!=null&&(this._locale=e),this)}var yC=ci("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function vC(){return this._locale}var bp=1e3,ql=60*bp,_p=60*ql,bC=(365*400+97)*24*_p;function Gl(t,e){return(t%e+e)%e}function _C(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-bC:new Date(t,e,n).valueOf()}function wC(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-bC:Date.UTC(t,e,n)}function IG(t){var e,n;if(t=ui(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?wC:_C,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Gl(e+(this._isUTC?0:this.utcOffset()*ql),_p);break;case"minute":e=this._d.valueOf(),e-=Gl(e,ql);break;case"second":e=this._d.valueOf(),e-=Gl(e,bp);break}return this._d.setTime(e),Re.updateOffset(this,!0),this}function YG(t){var e,n;if(t=ui(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?wC:_C,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=_p-Gl(e+(this._isUTC?0:this.utcOffset()*ql),_p)-1;break;case"minute":e=this._d.valueOf(),e+=ql-Gl(e,ql)-1;break;case"second":e=this._d.valueOf(),e+=bp-Gl(e,bp)-1;break}return this._d.setTime(e),Re.updateOffset(this,!0),this}function WG(){return this._d.valueOf()-(this._offset||0)*6e4}function $G(){return Math.floor(this.valueOf()/1e3)}function qG(){return new Date(this.valueOf())}function GG(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function XG(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function KG(){return this.isValid()?this.toISOString():null}function ZG(){return Q0(this)}function QG(){return Hr({},ht(this))}function JG(){return ht(this).overflow}function eX(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}qe("N",0,0,"eraAbbr");qe("NN",0,0,"eraAbbr");qe("NNN",0,0,"eraAbbr");qe("NNNN",0,0,"eraName");qe("NNNNN",0,0,"eraNarrow");qe("y",["y",1],"yo","eraYear");qe("y",["yy",2],0,"eraYear");qe("y",["yyy",3],0,"eraYear");qe("y",["yyyy",4],0,"eraYear");He("N",gb);He("NN",gb);He("NNN",gb);He("NNNN",dX);He("NNNNN",hX);Wt(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,s){var a=n._locale.erasParse(t,s,n._strict);a?ht(n).era=a:ht(n).invalidEra=t});He("y",xc);He("yy",xc);He("yyy",xc);He("yyyy",xc);He("yo",fX);Wt(["y","yy","yyy","yyyy"],cs);Wt(["yo"],function(t,e,n,s){var a;n._locale._eraYearOrdinalRegex&&(a=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[cs]=n._locale.eraYearOrdinalParse(t,a):e[cs]=parseInt(t,10)});function tX(t,e){var n,s,a,o=this._eras||qa("en")._eras;for(n=0,s=o.length;n<s;++n)switch(typeof o[n].since==="string"&&(a=Re(o[n].since).startOf("day"),o[n].since=a.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=Re(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf();break}return o}function nX(t,e,n){var s,a,o=this.eras(),l,d,h;for(t=t.toUpperCase(),s=0,a=o.length;s<a;++s)if(l=o[s].name.toUpperCase(),d=o[s].abbr.toUpperCase(),h=o[s].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(d===t)return o[s];break;case"NNNN":if(l===t)return o[s];break;case"NNNNN":if(h===t)return o[s];break}else if([l,d,h].indexOf(t)>=0)return o[s]}function sX(t,e){var n=t.since<=t.until?1:-1;return e===void 0?Re(t.since).year():Re(t.since).year()+(e-t.offset)*n}function iX(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].name;return""}function aX(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].narrow;return""}function rX(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].abbr;return""}function oX(){var t,e,n,s,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t)if(n=a[t].since<=a[t].until?1:-1,s=this.clone().startOf("day").valueOf(),a[t].since<=s&&s<=a[t].until||a[t].until<=s&&s<=a[t].since)return(this.year()-Re(a[t].since).year())*n+a[t].offset;return this.year()}function lX(t){return Ot(this,"_erasNameRegex")||xb.call(this),t?this._erasNameRegex:this._erasRegex}function cX(t){return Ot(this,"_erasAbbrRegex")||xb.call(this),t?this._erasAbbrRegex:this._erasRegex}function uX(t){return Ot(this,"_erasNarrowRegex")||xb.call(this),t?this._erasNarrowRegex:this._erasRegex}function gb(t,e){return e.erasAbbrRegex(t)}function dX(t,e){return e.erasNameRegex(t)}function hX(t,e){return e.erasNarrowRegex(t)}function fX(t,e){return e._eraYearOrdinalRegex||xc}function xb(){var t=[],e=[],n=[],s=[],a,o,l,d,h,p=this.eras();for(a=0,o=p.length;a<o;++a)l=Va(p[a].name),d=Va(p[a].abbr),h=Va(p[a].narrow),e.push(l),t.push(d),n.push(h),s.push(l),s.push(d),s.push(h);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}qe(0,["gg",2],0,function(){return this.weekYear()%100});qe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function rm(t,e){qe(0,[t,t.length],0,e)}rm("gggg","weekYear");rm("ggggg","weekYear");rm("GGGG","isoWeekYear");rm("GGGGG","isoWeekYear");He("G",tm);He("g",tm);He("GG",on,Us);He("gg",on,Us);He("GGGG",ib,sb);He("gggg",ib,sb);He("GGGGG",em,Qp);He("ggggg",em,Qp);Ld(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,s){e[s.substr(0,2)]=kt(t)});Ld(["gg","GG"],function(t,e,n,s){e[s]=Re.parseTwoDigitYear(t)});function pX(t){return SC.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function mX(t){return SC.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function gX(){return Fa(this.year(),1,4)}function xX(){return Fa(this.isoWeekYear(),1,4)}function yX(){var t=this.localeData()._week;return Fa(this.year(),t.dow,t.doy)}function vX(){var t=this.localeData()._week;return Fa(this.weekYear(),t.dow,t.doy)}function SC(t,e,n,s,a){var o;return t==null?vd(this,s,a).year:(o=Fa(t,s,a),e>o&&(e=o),bX.call(this,t,e,n,s,a))}function bX(t,e,n,s,a){var o=nC(t,e,n,s,a),l=yd(o.year,0,o.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}qe("Q",0,"Qo","quarter");He("Q",WD);Wt("Q",function(t,e){e[Pa]=(kt(t)-1)*3});function _X(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}qe("D",["DD",2],"Do","date");He("D",on,yc);He("DD",on,Us);He("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Wt(["D","DD"],Wi);Wt("Do",function(t,e){e[Wi]=kt(t.match(on)[0])});var jC=vc("Date",!0);qe("DDD",["DDDD",3],"DDDo","dayOfYear");He("DDD",Jp);He("DDDD",$D);Wt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=kt(t)});function wX(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}qe("m",["mm",2],0,"minute");He("m",on,ab);He("mm",on,Us);Wt(["m","mm"],Ni);var SX=vc("Minutes",!1);qe("s",["ss",2],0,"second");He("s",on,ab);He("ss",on,Us);Wt(["s","ss"],La);var jX=vc("Seconds",!1);qe("S",0,0,function(){return~~(this.millisecond()/100)});qe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});qe(0,["SSS",3],0,"millisecond");qe(0,["SSSS",4],0,function(){return this.millisecond()*10});qe(0,["SSSSS",5],0,function(){return this.millisecond()*100});qe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});qe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});qe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});qe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});He("S",Jp,WD);He("SS",Jp,Us);He("SSS",Jp,$D);var Ur,kC;for(Ur="SSSS";Ur.length<=9;Ur+="S")He(Ur,xc);function kX(t,e){e[Uo]=kt(("0."+t)*1e3)}for(Ur="S";Ur.length<=9;Ur+="S")Wt(Ur,kX);kC=vc("Milliseconds",!1);qe("z",0,0,"zoneAbbr");qe("zz",0,0,"zoneName");function TX(){return this._isUTC?"UTC":""}function NX(){return this._isUTC?"Coordinated Universal Time":""}var Ee=Rd.prototype;Ee.add=vG;Ee.calendar=TG;Ee.clone=NG;Ee.diff=RG;Ee.endOf=YG;Ee.format=BG;Ee.from=VG;Ee.fromNow=FG;Ee.to=HG;Ee.toNow=UG;Ee.get=z$;Ee.invalidAt=JG;Ee.isAfter=MG;Ee.isBefore=DG;Ee.isBetween=CG;Ee.isSame=EG;Ee.isSameOrAfter=AG;Ee.isSameOrBefore=OG;Ee.isValid=ZG;Ee.lang=yC;Ee.locale=xC;Ee.localeData=vC;Ee.max=Zq;Ee.min=Kq;Ee.parsingFlags=QG;Ee.set=B$;Ee.startOf=IG;Ee.subtract=bG;Ee.toArray=GG;Ee.toObject=XG;Ee.toDate=qG;Ee.toISOString=LG;Ee.inspect=zG;typeof Symbol<"u"&&Symbol.for!=null&&(Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Ee.toJSON=KG;Ee.toString=PG;Ee.unix=$G;Ee.valueOf=WG;Ee.creationData=eX;Ee.eraName=iX;Ee.eraNarrow=aX;Ee.eraAbbr=rX;Ee.eraYear=oX;Ee.year=XD;Ee.isLeapYear=L$;Ee.weekYear=pX;Ee.isoWeekYear=mX;Ee.quarter=Ee.quarters=_X;Ee.month=eC;Ee.daysInMonth=q$;Ee.week=Ee.weeks=tq;Ee.isoWeek=Ee.isoWeeks=nq;Ee.weeksInYear=yX;Ee.weeksInWeekYear=vX;Ee.isoWeeksInYear=gX;Ee.isoWeeksInISOWeekYear=xX;Ee.date=jC;Ee.day=Ee.days=mq;Ee.weekday=gq;Ee.isoWeekday=xq;Ee.dayOfYear=wX;Ee.hour=Ee.hours=jq;Ee.minute=Ee.minutes=SX;Ee.second=Ee.seconds=jX;Ee.millisecond=Ee.milliseconds=kC;Ee.utcOffset=rG;Ee.utc=lG;Ee.local=cG;Ee.parseZone=uG;Ee.hasAlignedHourOffset=dG;Ee.isDST=hG;Ee.isLocal=pG;Ee.isUtcOffset=mG;Ee.isUtc=fC;Ee.isUTC=fC;Ee.zoneAbbr=TX;Ee.zoneName=NX;Ee.dates=ci("dates accessor is deprecated. Use date instead.",jC);Ee.months=ci("months accessor is deprecated. Use month instead",eC);Ee.years=ci("years accessor is deprecated. Use year instead",XD);Ee.zone=ci("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",oG);Ee.isDSTShifted=ci("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",fG);function MX(t){return rn(t*1e3)}function DX(){return rn.apply(null,arguments).parseZone()}function TC(t){return t}var Rt=eb.prototype;Rt.calendar=p$;Rt.longDateFormat=y$;Rt.invalidDate=b$;Rt.ordinal=S$;Rt.preparse=TC;Rt.postformat=TC;Rt.relativeTime=k$;Rt.pastFuture=T$;Rt.set=h$;Rt.eras=tX;Rt.erasParse=nX;Rt.erasConvertYear=sX;Rt.erasAbbrRegex=cX;Rt.erasNameRegex=lX;Rt.erasNarrowRegex=uX;Rt.months=I$;Rt.monthsShort=Y$;Rt.monthsParse=$$;Rt.monthsRegex=X$;Rt.monthsShortRegex=G$;Rt.week=Z$;Rt.firstDayOfYear=eq;Rt.firstDayOfWeek=J$;Rt.weekdays=uq;Rt.weekdaysMin=hq;Rt.weekdaysShort=dq;Rt.weekdaysParse=pq;Rt.weekdaysRegex=yq;Rt.weekdaysShortRegex=vq;Rt.weekdaysMinRegex=bq;Rt.isPM=wq;Rt.meridiem=kq;function wp(t,e,n,s){var a=qa(),o=ea().set(s,e);return a[n](o,t)}function NC(t,e,n){if(Ia(t)&&(e=t,t=void 0),t=t||"",e!=null)return wp(t,e,n,"month");var s,a=[];for(s=0;s<12;s++)a[s]=wp(t,s,n,"month");return a}function yb(t,e,n,s){typeof t=="boolean"?(Ia(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Ia(e)&&(n=e,e=void 0),e=e||"");var a=qa(),o=t?a._week.dow:0,l,d=[];if(n!=null)return wp(e,(n+o)%7,s,"day");for(l=0;l<7;l++)d[l]=wp(e,(l+o)%7,s,"day");return d}function CX(t,e){return NC(t,e,"months")}function EX(t,e){return NC(t,e,"monthsShort")}function AX(t,e,n){return yb(t,e,n,"weekdays")}function OX(t,e,n){return yb(t,e,n,"weekdaysShort")}function RX(t,e,n){return yb(t,e,n,"weekdaysMin")}$r("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=kt(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});Re.lang=ci("moment.lang is deprecated. Use moment.locale instead.",$r);Re.langData=ci("moment.langData is deprecated. Use moment.localeData instead.",qa);var Na=Math.abs;function PX(){var t=this._data;return this._milliseconds=Na(this._milliseconds),this._days=Na(this._days),this._months=Na(this._months),t.milliseconds=Na(t.milliseconds),t.seconds=Na(t.seconds),t.minutes=Na(t.minutes),t.hours=Na(t.hours),t.months=Na(t.months),t.years=Na(t.years),this}function MC(t,e,n,s){var a=Ci(e,n);return t._milliseconds+=s*a._milliseconds,t._days+=s*a._days,t._months+=s*a._months,t._bubble()}function LX(t,e){return MC(this,t,e,1)}function zX(t,e){return MC(this,t,e,-1)}function Ok(t){return t<0?Math.floor(t):Math.ceil(t)}function BX(){var t=this._milliseconds,e=this._days,n=this._months,s=this._data,a,o,l,d,h;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=Ok(jv(n)+e)*864e5,e=0,n=0),s.milliseconds=t%1e3,a=oi(t/1e3),s.seconds=a%60,o=oi(a/60),s.minutes=o%60,l=oi(o/60),s.hours=l%24,e+=oi(l/24),h=oi(DC(e)),n+=h,e-=Ok(jv(h)),d=oi(n/12),n%=12,s.days=e,s.months=n,s.years=d,this}function DC(t){return t*4800/146097}function jv(t){return t*146097/4800}function VX(t){if(!this.isValid())return NaN;var e,n,s=this._milliseconds;if(t=ui(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,n=this._months+DC(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(jv(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function Ga(t){return function(){return this.as(t)}}var CC=Ga("ms"),FX=Ga("s"),HX=Ga("m"),UX=Ga("h"),IX=Ga("d"),YX=Ga("w"),WX=Ga("M"),$X=Ga("Q"),qX=Ga("y"),GX=CC;function XX(){return Ci(this)}function KX(t){return t=ui(t),this.isValid()?this[t+"s"]():NaN}function Jo(t){return function(){return this.isValid()?this._data[t]:NaN}}var ZX=Jo("milliseconds"),QX=Jo("seconds"),JX=Jo("minutes"),eK=Jo("hours"),tK=Jo("days"),nK=Jo("months"),sK=Jo("years");function iK(){return oi(this.days()/7)}var Ca=Math.round,Il={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function aK(t,e,n,s,a){return a.relativeTime(e||1,!!n,t,s)}function rK(t,e,n,s){var a=Ci(t).abs(),o=Ca(a.as("s")),l=Ca(a.as("m")),d=Ca(a.as("h")),h=Ca(a.as("d")),p=Ca(a.as("M")),x=Ca(a.as("w")),y=Ca(a.as("y")),b=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||l<=1&&["m"]||l<n.m&&["mm",l]||d<=1&&["h"]||d<n.h&&["hh",d]||h<=1&&["d"]||h<n.d&&["dd",h];return n.w!=null&&(b=b||x<=1&&["w"]||x<n.w&&["ww",x]),b=b||p<=1&&["M"]||p<n.M&&["MM",p]||y<=1&&["y"]||["yy",y],b[2]=e,b[3]=+t>0,b[4]=s,aK.apply(null,b)}function oK(t){return t===void 0?Ca:typeof t=="function"?(Ca=t,!0):!1}function lK(t,e){return Il[t]===void 0?!1:e===void 0?Il[t]:(Il[t]=e,t==="s"&&(Il.ss=e-1),!0)}function cK(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=Il,a,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(s=Object.assign({},Il,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),a=this.localeData(),o=rK(this,!n,s,a),n&&(o=a.pastFuture(+this,o)),a.postformat(o)}var my=Math.abs;function Rl(t){return(t>0)-(t<0)||+t}function om(){if(!this.isValid())return this.localeData().invalidDate();var t=my(this._milliseconds)/1e3,e=my(this._days),n=my(this._months),s,a,o,l,d=this.asSeconds(),h,p,x,y;return d?(s=oi(t/60),a=oi(s/60),t%=60,s%=60,o=oi(n/12),n%=12,l=t?t.toFixed(3).replace(/\.?0+$/,""):"",h=d<0?"-":"",p=Rl(this._months)!==Rl(d)?"-":"",x=Rl(this._days)!==Rl(d)?"-":"",y=Rl(this._milliseconds)!==Rl(d)?"-":"",h+"P"+(o?p+o+"Y":"")+(n?p+n+"M":"")+(e?x+e+"D":"")+(a||s||t?"T":"")+(a?y+a+"H":"")+(s?y+s+"M":"")+(t?y+l+"S":"")):"P0D"}var Nt=am.prototype;Nt.isValid=nG;Nt.abs=PX;Nt.add=LX;Nt.subtract=zX;Nt.as=VX;Nt.asMilliseconds=CC;Nt.asSeconds=FX;Nt.asMinutes=HX;Nt.asHours=UX;Nt.asDays=IX;Nt.asWeeks=YX;Nt.asMonths=WX;Nt.asQuarters=$X;Nt.asYears=qX;Nt.valueOf=GX;Nt._bubble=BX;Nt.clone=XX;Nt.get=KX;Nt.milliseconds=ZX;Nt.seconds=QX;Nt.minutes=JX;Nt.hours=eK;Nt.days=tK;Nt.weeks=iK;Nt.months=nK;Nt.years=sK;Nt.humanize=cK;Nt.toISOString=om;Nt.toString=om;Nt.toJSON=om;Nt.locale=xC;Nt.localeData=vC;Nt.toIsoString=ci("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",om);Nt.lang=yC;qe("X",0,0,"unix");qe("x",0,0,"valueOf");He("x",tm);He("X",C$);Wt("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Wt("x",function(t,e,n){n._d=new Date(kt(t))});Re.version="2.30.1";u$(rn);Re.fn=Ee;Re.min=Qq;Re.max=Jq;Re.now=eG;Re.utc=ea;Re.unix=MX;Re.months=CX;Re.isDate=Od;Re.locale=$r;Re.invalid=Zp;Re.duration=Ci;Re.isMoment=Di;Re.weekdays=AX;Re.parseZone=DX;Re.localeData=qa;Re.isDuration=Uf;Re.monthsShort=EX;Re.weekdaysMin=RX;Re.defineLocale=ub;Re.updateLocale=Dq;Re.locales=Cq;Re.weekdaysShort=OX;Re.normalizeUnits=ui;Re.relativeTimeRounding=oK;Re.relativeTimeThreshold=lK;Re.calendarFormat=kG;Re.prototype=Ee;Re.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const uK={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};VT._date.override(typeof Re=="function"?{_id:"moment",formats:function(){return uK},parse:function(t,e){return typeof t=="string"&&typeof e=="string"?t=Re(t,e):t instanceof Re||(t=Re(t)),t.isValid()?t.valueOf():null},format:function(t,e){return Re(t).format(e)},add:function(t,e,n){return Re(t).add(e,n).valueOf()},diff:function(t,e,n){return Re(t).diff(Re(e),n)},startOf:function(t,e,n){return t=Re(t),e==="isoWeek"?(n=Math.trunc(Math.min(Math.max(0,n),6)),t.isoWeekday(n).startOf("day").valueOf()):t.startOf(e).valueOf()},endOf:function(t,e){return Re(t).endOf(e).valueOf()}}:{});li.register(jd,kd,ac,Wa,Kv,Rp,oc,rc,np);function dK(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState(""),[l,d]=A.useState(null),[h,p]=A.useState(!1),[x,y]=A.useState(!1),[b,j]=A.useState(3),[T,N]=A.useState(!1),[M,R]=A.useState(!1),[E,z]=A.useState("load"),[U,I]=A.useState("forecast"),[V,O]=A.useState(""),q=A.useRef(null),[Z,re]=A.useState(!1),[J,de]=A.useState(!1),[le,te]=A.useState(!1),[se,W]=A.useState(!1),[X,ae]=A.useState(!1),[oe,me]=A.useState(!1),[F,ee]=A.useState(null),[xe,H]=A.useState(!0),pe=async()=>{p(!0);try{const ze=await De.aurora.dashboard();e(ze);const xt=ze.state?.risk_profile?.risk_appetite;typeof xt=="number"&&j(xt),re(!!ze.state?.auto_tune_enabled),te(!!ze.state?.reflex_enabled),ae(ze.state?.risk_profile?.mode==="probabilistic")}catch(ze){console.error("Failed to load Aurora dashboard:",ze)}finally{p(!1)}};A.useEffect(()=>{pe(),(async()=>{try{const xt=await De.schedulerStatus();s(xt)}catch(xt){console.error("Failed to load scheduler status:",xt)}})()},[]),A.useEffect(()=>{(async()=>{try{const xt=await De.performanceData(7);ee(xt)}catch(xt){console.error("Failed to load performance data:",xt)}finally{H(!1)}})()},[]);const Se=async()=>{if(t){y(!0);try{const ze=await De.aurora.briefing(t);o(ze.briefing),d(new Date().toISOString())}catch(ze){console.error("Failed to fetch Aurora briefing:",ze),o("Failed to fetch Aurora briefing.")}finally{y(!1)}}},Ue=async ze=>{j(ze),N(!0);try{await De.configSave({s_index:{risk_appetite:ze}}),q.current!==null&&window.clearTimeout(q.current),O("Saved."),q.current=window.setTimeout(()=>{O(""),q.current=null},2e3)}catch(xt){console.error("Failed to save risk level (risk_appetite):",xt),O("Failed to save.")}finally{N(!1)}},tt=async()=>{const ze=!Z;re(ze),de(!0);try{await De.configSave({learning:{auto_tune_enabled:ze}})}catch(xt){console.error("Failed to toggle auto-tune:",xt),re(!ze)}finally{de(!1)}},Te=async()=>{const ze=!le;te(ze),W(!0);try{await De.aurora.toggleReflex(ze)}catch(xt){console.error("Failed to toggle reflex:",xt),te(!ze)}finally{W(!1)}},lt=async()=>{const ze=!X;ae(ze),me(!0);try{await De.configSave({s_index:{mode:ze?"probabilistic":"dynamic"}})}catch(xt){console.error("Failed to toggle probabilistic mode:",xt),ae(!ze)}finally{me(!1)}};A.useMemo(()=>{const ze=t?.state?.risk_profile?.persona;return ze||"Unknown"},[t]);const gt=t?.identity?.graduation?.label??"infant";t?.identity?.graduation?.runs;const _t=t?.state?.weather_volatility,Bt=_t?.overall??0,Mt=Bt<.3?"bg-emerald-400/90":Bt<.7?"bg-sky-400/90":"bg-amber-400/90",st=Bt<.3?"from-emerald-900/60 via-surface to-surface":Bt<.7?"from-sky-900/60 via-surface to-surface":"from-amber-900/60 via-surface to-surface",fn=t?.horizon?.slots??[],es=t?.horizon?.end??new Date().toISOString(),vn=t?.history?.strategy_events??[],ds=A.useMemo(()=>F?{datasets:[{label:"Planned",data:F.soc_series.map(ze=>({x:ze.time,y:ze.planned})),borderColor:"#94a3b8",borderDash:[5,5],borderWidth:1.5,pointRadius:0,tension:.4},{label:"Actual",data:F.soc_series.map(ze=>({x:ze.time,y:ze.actual})),borderColor:"#60a5fa",backgroundColor:"rgba(96, 165, 250, 0.1)",borderWidth:1.5,pointRadius:0,fill:!0,tension:.4}]}:null,[F]),Hn=A.useMemo(()=>F?{labels:F.cost_series.map(ze=>ze.date.slice(5)),datasets:[{label:"Plan",data:F.cost_series.map(ze=>ze.planned),backgroundColor:"#94a3b8",borderRadius:2},{label:"Real",data:F.cost_series.map(ze=>ze.realized),backgroundColor:F.cost_series.map(ze=>ze.realized<=ze.planned?"#34d399":"#f87171"),borderRadius:2}]}:null,[F]);return u.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[u.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-lg font-medium text-text flex items-center gap-2",children:["Aurora Command Center",u.jsx("span",{className:"px-2 py-0.5 rounded-full bg-surface2 border border-line/50 text-[10px] text-muted uppercase tracking-wider",children:gt})]}),u.jsx("p",{className:"text-[11px] text-muted",children:"The Mastermind. Observing context, managing risk, and learning from reality."})]})}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[u.jsx(Ge,{className:`lg:col-span-6 p-4 md:p-5 bg-gradient-to-br ${st} relative overflow-hidden`,children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row gap-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative flex items-center justify-center",children:[u.jsx("div",{className:`absolute h-16 w-16 rounded-full ${Mt} opacity-30 animate-pulse`}),u.jsx("div",{className:"relative flex items-center justify-center w-14 h-14 rounded-full bg-surface/90 border border-line/80 shadow-float ring-2 ring-accent/20",children:u.jsx(wy,{className:"h-8 w-8 text-accent drop-shadow-[0_0_12px_rgba(56,189,248,0.75)]"})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-semibold text-text uppercase tracking-wide",children:"Status"}),u.jsx("div",{className:"text-lg font-medium text-text",children:Bt>.6?"Defensive Mode":Bt>.3?"Cautious Mode":"Optimal Mode"}),u.jsxs("div",{className:"text-[11px] text-muted flex items-center gap-2",children:[u.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${Bt>.6?"bg-amber-400":"bg-emerald-400"}`}),Bt>.6?"High Volatility Detected":"Conditions Stable"]})]})]}),u.jsxs("div",{className:"flex-1 bg-surface/40 rounded-xl p-3 border border-white/5 backdrop-blur-sm",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-text font-medium",children:[u.jsx(tT,{className:"h-3 w-3 text-accent"}),"Daily Briefing"]}),u.jsx("button",{onClick:Se,disabled:!t||x,className:"text-[10px] text-muted hover:text-accent disabled:opacity-50 transition-colors",children:x?"Thinking...":"Refresh"})]}),u.jsx("div",{className:"text-[11px] leading-relaxed text-muted/90 font-mono",children:a||"Aurora is analyzing current market and weather conditions..."})]})]})}),u.jsxs(Ge,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col justify-center",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("span",{className:"text-[10px] uppercase font-bold text-muted tracking-wider",children:"Risk Appetite"}),u.jsxs("div",{className:"flex items-center gap-2",children:[t?.state?.risk_profile?.raw_factor!=null&&(t.state.risk_profile.raw_factor??0)>0&&u.jsxs("span",{className:"text-[9px] text-muted/60",title:"Calculated based on risk",children:["Calc: ",(t.state.risk_profile.raw_factor??0).toFixed(2)]}),u.jsxs("span",{className:"text-[9px] text-muted",title:"Proected factor for next run",children:["Applied: ",(t?.state?.risk_profile?.current_factor??1).toFixed(2)]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1 p-1 bg-surface2/50 rounded-lg border border-line/30",children:[1,2,3,4,5].map(ze=>{const xt=b===ze;let pn="bg-surface border-line text-text shadow-sm";return xt&&(ze===1?pn="bg-emerald-500/20 border-emerald-500/50 text-emerald-100 shadow-[0_0_10px_rgba(16,185,129,0.2)]":ze===2?pn="bg-teal-500/20 border-teal-500/50 text-teal-100":ze===3?pn="bg-blue-500/20 border-blue-500/50 text-blue-100":ze===4?pn="bg-amber-500/20 border-amber-500/50 text-amber-100":ze===5&&(pn="bg-red-500/20 border-red-500/50 text-red-100 shadow-[0_0_10px_rgba(239,68,68,0.2)]")),u.jsx("button",{onClick:()=>Ue(ze),className:`
                       relative flex items-center justify-center h-9 rounded-md text-[10px] font-medium transition-all duration-200
                       border border-transparent
                       ${xt?pn:"text-muted hover:bg-surface/50 hover:text-text"}
                     `,children:ze},ze)})}),u.jsxs("div",{className:"text-center h-8 flex flex-col justify-center",children:[u.jsx("span",{className:`text-[11px] font-medium transition-colors duration-300 ${b===1?"text-emerald-400":b===2?"text-teal-400":b===3?"text-blue-400":b===4?"text-amber-400":"text-red-400"}`,children:{1:"Safety First",2:"Conservative",3:"Neutral (Balanced)",4:"Aggressive",5:"Gambler"}[b]}),u.jsx("span",{className:"text-[9px] text-muted/70",children:{1:"Covers Worst Case (p90)",2:"Covers High Load (p75)",3:"Trusts the Mean (p50)",4:"Expects Lower Load",5:"Bets on Sun/Empty"}[b]})]})]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-line/30 flex flex-col items-center gap-2",children:[u.jsx("button",{onClick:async()=>{R(!0);try{await Ue(b),await De.runPlanner(),await pe()}finally{R(!1)}},disabled:M,className:`flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface hover:bg-surface2 border border-line/50 text-[10px] transition-colors ${M?"opacity-70 cursor-not-allowed text-muted":"text-muted hover:text-text"}`,title:"Run Strategy Engine to update forecast based on new risk",children:M?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-3 w-3 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),u.jsx("span",{children:"Re-planning..."})]}):u.jsxs(u.Fragment,{children:[u.jsx($i,{className:"h-3 w-3 text-accent"}),u.jsx("span",{children:"Apply & Re-Plan"})]})}),M&&u.jsx("span",{className:"text-[9px] text-muted/70 animate-pulse",children:"Regenerating schedule with new risk level..."})]})]}),u.jsxs(Ge,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx($i,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Controls"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Auto-Tuner"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Allow Aurora to act"})]}),u.jsx("button",{onClick:tt,disabled:J,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${Z?"bg-accent":"bg-surface2"}`,children:u.jsx("span",{className:`${Z?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Aurora Reflex"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Long-term auto-tuning"})]}),u.jsx("button",{onClick:Te,disabled:se,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${le?"bg-accent":"bg-surface2"}`,children:u.jsx("span",{className:`${le?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Probabilistic"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Use p10/p90 confidence bands"})]}),u.jsx("button",{onClick:lt,disabled:oe,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${X?"bg-accent":"bg-surface2"}`,children:u.jsx("span",{className:`${X?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),u.jsx("div",{className:"mt-auto pt-2 text-center text-[10px] text-muted",children:"More controls coming soon."})]})]}),u.jsx(c$,{metrics:t?.metrics,perfData:F}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-12 lg:h-[450px]",children:[u.jsxs(Ge,{className:"lg:col-span-4 p-4 flex flex-col h-full min-h-0 overflow-hidden",children:[u.jsx("div",{className:"mb-4 flex items-center justify-between shrink-0",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(id,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Context Radar"})]})}),u.jsx("div",{className:"flex-1 min-h-0 relative",children:u.jsx(o$,{weatherVolatility:{cloud:_t?.cloud_volatility??0,temp:_t?.temp_volatility??0,overall:Bt},riskFactor:b??3,forecastAccuracy:t?.metrics?.mae_pv_aurora!=null?Math.max(0,100-t.metrics.mae_pv_aurora*20):85,priceSpread:t?.metrics?.max_price_spread,forecastBias:t?.metrics?.forecast_bias})})]}),u.jsxs(Ge,{className:"lg:col-span-4 p-4 flex flex-col h-full min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Kk,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Activity Log"})]}),u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsxs("span",{className:"text-[10px] text-muted",children:[vn.length," events"]}),n?.ml_training_last_run_at&&u.jsxs("span",{className:"text-[9px] text-muted/70",title:"Last ML Training Run",children:["ML Train:"," ",new Date(n.ml_training_last_run_at).toLocaleString("sv-SE",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),u.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto pr-2 custom-scrollbar",children:u.jsx(l$,{events:vn})})]}),u.jsxs(Ge,{className:"lg:col-span-4 p-4 md:p-5 flex flex-col h-full min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"mb-4 shrink-0",children:[u.jsx("div",{className:"text-xs font-medium text-text",children:"Cost Reality"}),u.jsx("div",{className:"text-[11px] text-muted",children:"Daily financial outcome"})]}),u.jsx("div",{className:"flex-1 min-h-0",children:Hn&&u.jsx(n$,{data:Hn,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{color:"#94a3b8",font:{size:10}}},y:{grid:{color:"#334155"},ticks:{color:"#94a3b8"}}},plugins:{legend:{labels:{color:"#e2e8f0",font:{size:10}}}}}})})]})]}),u.jsx("div",{className:"grid gap-4 lg:grid-cols-12",children:u.jsxs(Ge,{className:"lg:col-span-12 p-4 flex flex-col h-[350px] overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3 shrink-0",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-medium text-text",children:U==="forecast"?"Forecast Horizon (48h)":"SoC Tunnel"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[U==="forecast"?X?`Probabilistic View (${E.toUpperCase()})`:`Decomposition View (${E.toUpperCase()})`:"Plan vs Reality",U==="forecast"&&u.jsxs(u.Fragment,{children:["  ",new Date().toISOString().slice(0,10)," -"," ",new Date(es).toISOString().slice(0,10)]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-line/70 bg-surface2 px-1 py-0.5 text-[11px] mr-2",children:[u.jsx("button",{className:`px-3 py-0.5 rounded-full ${U==="forecast"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>I("forecast"),children:"Forecast"}),u.jsx("button",{className:`px-3 py-0.5 rounded-full ${U==="soc"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>I("soc"),children:"SoC"})]}),U==="forecast"&&u.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-line/70 bg-surface2 px-1 py-0.5 text-[11px]",children:[u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${E==="load"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>z("load"),children:u.jsx($i,{className:"h-3 w-3"})}),u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${E==="pv"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>z("pv"),children:u.jsx(nT,{className:"h-3 w-3"})})]})]})]}),u.jsx("div",{className:"flex-1 min-h-0",children:h?u.jsx("div",{className:"text-[11px] text-muted",children:"Loading..."}):U==="soc"?u.jsx("div",{className:"h-full w-full",children:ds&&u.jsx(K0,{data:ds,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"}},grid:{color:"#334155",display:!1},ticks:{color:"#94a3b8",maxTicksLimit:6}},y:{min:0,max:100,grid:{color:"#334155"},ticks:{color:"#94a3b8",display:!1}}},plugins:{legend:{display:!1}}}})}):X?u.jsx("div",{className:"h-full w-full",children:u.jsx(xv,{title:"",color:E==="load"?"#f97316":"#22c55e",slots:(()=>{const ze=t?.horizon?.history_series?.[E==="load"?"load":"pv"]||[],xt=fn.map(ot=>E==="load"?{time:ot.slot_start,p10:ot.probabilistic?.load_p10??null,p50:ot.final.load_kwh,p90:ot.probabilistic?.load_p90??null,actual:null}:{time:ot.slot_start,p10:ot.probabilistic?.pv_p10??null,p50:ot.final.pv_kwh,p90:ot.probabilistic?.pv_p90??null,actual:null}),pn=new Map;ze.forEach(ot=>{pn.set(ot.slot_start,{time:ot.slot_start,p10:ot.p10??null,p50:ot.forecast??null,p90:ot.p90??null,actual:ot.actual})}),xt.forEach(ot=>{const Wn=pn.get(ot.time);Wn?pn.set(ot.time,{...Wn,p10:ot.p10,p50:ot.p50,p90:ot.p90}):pn.set(ot.time,ot)});const zt=new Date().getTime(),Es=1440*60*1e3;return Array.from(pn.values()).sort((ot,Wn)=>new Date(ot.time).getTime()-new Date(Wn.time).getTime()).filter(ot=>{const Wn=new Date(ot.time).getTime();return Wn>=zt-Es&&Wn<=zt+Es})})()})}):u.jsx(r$,{slots:fn,mode:E})})]})})]})}function Au({data:t,colorClass:e="bg-accent",height:n=32,bars:s=12}){const a=A.useMemo(()=>{if(!t||t.length===0)return Array(s).fill(.2);const o=t.slice(-s),l=Math.max(...o,1),d=Math.min(...o,0),h=l-d||1;return o.map(p=>.1+.9*((p-d)/h))},[t,s]);return u.jsx("div",{className:"mini-bars",style:{height:n},children:a.map((o,l)=>u.jsx("div",{className:`mini-bar ${e}`,style:{height:`${Math.round(o*100)}%`}},l))})}const ii={status:async()=>{const t=await fetch("api/executor/status");if(!t.ok)throw new Error(`Status failed: ${t.status}`);return t.json()},toggle:async t=>{const e=await fetch("api/executor/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Toggle failed: ${e.status}`);return e.json()},run:async()=>{const t=await fetch("api/executor/run",{method:"POST"});if(!t.ok)throw new Error(`Run failed: ${t.status}`);return t.json()},history:async(t=20)=>{const e=await fetch(`api/executor/history?limit=${t}`);if(!e.ok)throw new Error(`History failed: ${e.status}`);return e.json()},stats:async(t=7)=>{const e=await fetch(`api/executor/stats?days=${t}`);if(!e.ok)throw new Error(`Stats failed: ${e.status}`);return e.json()},live:async()=>{const t=await fetch("api/executor/live");if(!t.ok)throw new Error(`Live failed: ${t.status}`);return t.json()},notifications:{get:async()=>{const t=await fetch("api/executor/notifications");if(!t.ok)throw new Error(`Notifications failed: ${t.status}`);return t.json()},update:async t=>{const e=await fetch("api/executor/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Notifications update failed: ${e.status}`);return e.json()},test:async()=>{const t=await fetch("api/executor/notifications/test",{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.error||`Test failed: ${t.status}`);return e}},config:{get:async()=>{const t=await fetch("api/executor/config");if(!t.ok)throw new Error(`Config get failed: ${t.status}`);return t.json()},update:async t=>{const e=await fetch("api/executor/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Config update failed: ${e.status}`);return e.json()}},quickAction:{get:async()=>{const t=await fetch("api/executor/quick-action");if(!t.ok)throw new Error(`Quick action get failed: ${t.status}`);return t.json()},set:async(t,e)=>{const n=await fetch("api/executor/quick-action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,duration_minutes:e})});if(!n.ok)throw new Error(`Quick action set failed: ${n.status}`);return n.json()},clear:async()=>{const t=await fetch("api/executor/quick-action",{method:"DELETE"});if(!t.ok)throw new Error(`Quick action clear failed: ${t.status}`);return t.json()}}};function gy({enabled:t,onChange:e,disabled:n=!1,size:s="md"}){const a=s==="sm"?"h-5 w-9":"h-6 w-11",o=s==="sm"?"h-3 w-3":"h-4 w-4",l=s==="sm"?t?"translate-x-5":"translate-x-1":t?"translate-x-6":"translate-x-1";return u.jsx("button",{type:"button",role:"switch","aria-checked":t,disabled:n,onClick:()=>e(!t),className:`relative inline-flex items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${a} ${t?"bg-accent":"bg-surface2"} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:u.jsx("span",{className:`inline-block transform rounded-full bg-white transition-transform ${o} ${l}`})})}li.register(jd,kd,ac,Wa,Rp,oc,rc,Op);function hK(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState([]),[l,d]=A.useState(null),[h,p]=A.useState({soc:[],pv:[],load:[],import:[],export:[],labels:[]}),[x,y]=A.useState(!0),[b,j]=A.useState(!1),[T,N]=A.useState(!1),[M,R]=A.useState(null),[E,z]=A.useState(!1),[U,I]=A.useState(null),[V,O]=A.useState(!1),[q,Z]=A.useState(!1),[re,J]=A.useState(null),[de,le]=A.useState(null),te=A.useCallback(async()=>{try{const[H,pe,Se]=await Promise.all([ii.status(),ii.stats(7),ii.history(20)]);e(H),s(pe),o(Se.records),R(null)}catch(H){R(H.message||"Failed to load executor data")}finally{y(!1)}},[]);Ul("live_metrics",H=>{d(pe=>{const Se={...pe||{}};return H.soc!==void 0&&(Se.soc={value:`${H.soc.toFixed(0)}%`,numeric:H.soc,unit:"%"}),H.pv_kw!==void 0&&(Se.pv_power={value:`${H.pv_kw.toFixed(1)} kW`,numeric:H.pv_kw*1e3,unit:"W"}),H.load_kw!==void 0&&(Se.load_power={value:`${H.load_kw.toFixed(1)} kW`,numeric:H.load_kw*1e3,unit:"W"}),H.grid_import_kw!==void 0&&(Se.grid_import={value:`${H.grid_import_kw.toFixed(2)} kW`,numeric:H.grid_import_kw*1e3,unit:"W"}),H.grid_export_kw!==void 0&&(Se.grid_export={value:`${H.grid_export_kw.toFixed(2)} kW`,numeric:H.grid_export_kw*1e3,unit:"W"}),H.work_mode&&(Se.work_mode={value:H.work_mode}),Se}),p(pe=>{const Ue=[...pe.labels,""],tt=[...pe.soc,H.soc??pe.soc[pe.soc.length-1]??0],Te=[...pe.pv,H.pv_kw??pe.pv[pe.pv.length-1]??0],lt=[...pe.load,H.load_kw??pe.load[pe.load.length-1]??0],gt=[...pe.import,H.grid_import_kw??pe.import[pe.import.length-1]??0],_t=[...pe.export,H.grid_export_kw??pe.export[pe.export.length-1]??0];return Ue.length>20&&(Ue.shift(),tt.shift(),Te.shift(),lt.shift(),gt.shift(),_t.shift()),{labels:Ue,soc:tt,pv:Te,load:lt,import:gt,export:_t}})}),Ul("executor_status",H=>{e(H)}),A.useEffect(()=>{y(!0),te();const H=setInterval(te,3e4);return()=>clearInterval(H)},[te]),A.useEffect(()=>{(async()=>{try{const pe=await ii.live();d(pe)}catch{}})()},[]),A.useEffect(()=>{(async()=>{try{const pe=await ii.notifications.get();I(pe)}catch{}})()},[]);const se=async(H,pe)=>{if(U){O(!0);try{await ii.notifications.update({[H]:pe}),I(Se=>Se?{...Se,[H]:pe}:null)}catch(Se){R(Se.message)}finally{O(!1)}}},W=async H=>{j(!0);try{await ii.toggle({enabled:H}),await te()}catch(pe){R(pe.message)}finally{j(!1)}},X=async()=>{Z(!0),J(null);try{const H=await ii.notifications.test();J({success:!0,message:H.message||"Test sent!"})}catch(H){J({success:!1,message:H.message})}finally{Z(!1)}},ae=async H=>{j(!0);try{await ii.toggle({shadow_mode:H}),await te()}catch(pe){R(pe.message)}finally{j(!1)}},oe=async()=>{N(!0);try{await ii.run(),await te()}catch(H){R(H.message)}finally{N(!1)}},me=H=>{if(!H)return"";try{return new Date(H).toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})}catch{return H}},F=H=>{if(!H)return"";try{return new Date(H).toLocaleString("sv-SE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return H}},ee=t?.enabled?t?.shadow_mode?"from-amber-900/60 via-surface to-surface":"from-emerald-900/60 via-surface to-surface":"from-slate-800/60 via-surface to-surface",xe=t?.enabled?t?.shadow_mode?"bg-amber-400/90":"bg-emerald-400/90":"bg-slate-500/90";return x?u.jsx("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-10 bg-surface2 rounded w-48"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[u.jsx("div",{className:"h-64 bg-surface2 rounded"}),u.jsx("div",{className:"h-64 bg-surface2 rounded lg:col-span-2"})]})]})}):u.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[u.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-lg font-medium text-text flex items-center gap-2",children:["Executor Control Center",u.jsx("span",{className:`px-2 py-0.5 rounded-full border text-[10px] uppercase tracking-wider ${t?.enabled?t?.shadow_mode?"bg-amber-500/20 border-amber-500/50 text-amber-300":"bg-emerald-500/20 border-emerald-500/50 text-emerald-300":"bg-slate-500/20 border-slate-500/50 text-slate-400"}`,children:t?.enabled?t?.shadow_mode?"Shadow":"Active":"Disabled"})]}),u.jsx("p",{className:"text-[11px] text-muted",children:"Native execution engine  controls inverter and water heater based on the schedule."})]})}),M&&u.jsxs("div",{className:"rounded-xl p-3 bg-red-500/10 border border-red-500/30 flex items-center gap-3",children:[u.jsx(Wu,{className:"h-4 w-4 text-red-400"}),u.jsx("span",{className:"text-red-300 text-[11px] flex-1",children:M}),u.jsx("button",{onClick:()=>R(null),className:"text-red-400 hover:text-red-300 text-lg",children:""})]}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[u.jsxs(Ge,{className:`lg:col-span-5 p-4 md:p-5 bg-gradient-to-br ${ee} relative overflow-hidden`,children:[u.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[u.jsxs("div",{className:"relative flex items-center justify-center shrink-0",children:[u.jsx("div",{className:`absolute h-14 w-14 rounded-full ${xe} opacity-30 animate-pulse`}),u.jsx("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full bg-surface/90 border border-line/80 shadow-float ring-2 ring-accent/20",children:u.jsx(Sy,{className:"h-6 w-6 text-accent drop-shadow-[0_0_12px_rgba(56,189,248,0.75)]"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-xs font-semibold text-text uppercase tracking-wide",children:"Status"}),u.jsx("div",{className:"text-lg font-medium text-text",children:t?.enabled?t?.shadow_mode?"Shadow Mode":"Executing":"Standby"}),u.jsxs("div",{className:"text-[11px] text-muted flex items-center gap-2 mt-1",children:[u.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${t?.last_run_status==="success"?"bg-emerald-400":t?.last_run_status==="error"?"bg-red-400":"bg-slate-400"}`}),t?.last_run_status==="success"?"Last run successful":t?.last_run_status==="error"?"Last run failed":"No runs yet"]})]})]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10 grid grid-cols-3 gap-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Last Run"}),u.jsx("div",{className:"text-sm font-mono text-text",children:me(t?.last_run_at)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Next Run"}),u.jsx("div",{className:"text-sm font-mono text-text",children:me(t?.next_run_at)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Version"}),u.jsx("div",{className:"text-sm font-mono text-text",children:t?.version||""})]})]}),t?.override_active&&u.jsx("div",{className:"mt-3 p-2 rounded-lg bg-amber-500/20 border border-amber-500/30",children:u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-amber-300",children:[u.jsx(Wu,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-medium",children:"Override Active:"}),u.jsx("span",{children:t.override_type})]})})]}),u.jsxs(Ge,{className:"lg:col-span-4 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(ky,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Controls"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Executor Enabled"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Execute actions on Home Assistant"})]}),u.jsx(gy,{enabled:t?.enabled??!1,onChange:W,disabled:b,size:"sm"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("div",{className:"text-[11px] font-medium text-text flex items-center gap-1.5",children:["Shadow Mode",u.jsx(_A,{className:"h-3 w-3 text-muted"})]}),u.jsx("span",{className:"text-[9px] text-muted",children:"Log only, don't execute actions"})]}),u.jsx(gy,{enabled:t?.shadow_mode??!1,onChange:ae,disabled:b,size:"sm"})]}),u.jsxs("button",{onClick:()=>z(!0),className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50 mt-2 hover:bg-surface2 transition-colors w-full",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Sx,{className:"h-4 w-4 text-muted"}),u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Notifications"})]}),U&&Object.entries(U).some(([H,pe])=>H.startsWith("on_")&&pe===!0)&&u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute inset-0 rounded-full bg-accent/50 blur-sm animate-pulse"}),u.jsx("span",{className:"relative h-2.5 w-2.5 rounded-full bg-accent block ring-2 ring-accent/30"})]})]}),u.jsx("div",{className:"mt-auto pt-4",children:u.jsx("button",{onClick:oe,disabled:T,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-surface hover:bg-surface2 border border-line/50 text-[11px] font-medium transition-all ${T?"opacity-70 cursor-not-allowed text-muted":"text-text hover:border-accent/50"}`,children:T?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-3.5 w-3.5 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),u.jsx("span",{children:"Running..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ev,{className:"h-3.5 w-3.5 text-accent"}),u.jsx("span",{children:"Run Now"})]})})})]}),u.jsxs(Ge,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(qf,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"7-Day Stats"})]}),n&&u.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-1",children:[u.jsxs("div",{className:"p-3 rounded-lg bg-surface2/30 border border-line/30",children:[u.jsx("div",{className:"text-xl font-bold text-text",children:n.total_executions}),u.jsx("div",{className:"text-[10px] text-muted",children:"Total Runs"})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[u.jsxs("div",{className:"text-xl font-bold text-emerald-400",children:[n.success_rate,"%"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Success Rate"})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[u.jsx("div",{className:"text-xl font-bold text-amber-400",children:n.override_count}),u.jsx("div",{className:"text-[10px] text-muted",children:"Overrides"})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[u.jsx("div",{className:"text-xl font-bold text-red-400",children:n.failed}),u.jsx("div",{className:"text-[10px] text-muted",children:"Failed"})]})]})]}),u.jsxs(Ge,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx($i,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Quick Actions"})]}),t?.quick_action&&u.jsx("div",{className:"mb-3 p-3 rounded-lg bg-accent/10 border border-accent/30",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-[11px] font-medium text-accent capitalize",children:[t.quick_action.type.replace("_"," ")," Active"]}),u.jsxs("div",{className:"text-[10px] text-muted",children:[t.quick_action.remaining_minutes.toFixed(0)," min remaining"]})]}),u.jsx("button",{onClick:async()=>{try{await ii.quickAction.clear(),te()}catch(H){console.error(H)}},className:"text-[10px] px-2 py-1 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",children:"Cancel"})]})}),u.jsx("div",{className:"space-y-2 flex-1",children:[{type:"force_charge",label:"Force Charge",icon:_y,labelClass:"text-emerald-400",btnClass:"bg-emerald-500/10 border-emerald-500/20 text-emerald-400 hover:bg-emerald-500/20"},{type:"force_export",label:"Force Export",icon:Ny,labelClass:"text-amber-400",btnClass:"bg-amber-500/10 border-amber-500/20 text-amber-400 hover:bg-amber-500/20"},{type:"force_heat",label:"Force Heat",icon:Cv,labelClass:"text-orange-400",btnClass:"bg-orange-500/10 border-orange-500/20 text-orange-400 hover:bg-orange-500/20"},{type:"force_stop",label:"Stop All",icon:NA,labelClass:"text-red-400",btnClass:"bg-red-500/10 border-red-500/20 text-red-400 hover:bg-red-500/20"}].map(H=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:`text-[11px] ${H.labelClass} w-20 font-medium flex items-center gap-1`,children:[u.jsx(H.icon,{className:"h-3 w-3"}),H.label]}),u.jsx("div",{className:"flex gap-1 flex-1",children:[15,30,60].map(pe=>u.jsxs("button",{onClick:async()=>{try{await ii.quickAction.set(H.type,pe),te()}catch(Se){alert("Failed: "+Se.message)}},disabled:t?.quick_action?.type===H.type,className:`flex-1 px-2 py-1.5 text-[10px] rounded-lg border transition-all ${t?.quick_action?.type===H.type?"bg-accent/20 border-accent/40 text-accent":H.btnClass}`,children:[pe,"m"]},pe))})]},H.type))}),u.jsx("div",{className:"mt-3 text-[9px] text-muted/60 text-center",children:"Overrides schedule for selected duration"})]})]}),u.jsxs(Ge,{className:"p-4 md:p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(id,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Live System"}),u.jsx("span",{className:"text-[9px] text-muted/70",children:"(every 10s)"})]}),l?.work_mode&&u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${l.work_mode.value.includes("Export")?"bg-emerald-500/20 border-emerald-500/30 text-emerald-300":"bg-blue-500/20 border-blue-500/30 text-blue-300"}`,children:l.work_mode.value})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[u.jsxs("div",{className:"metric-card-border metric-card-border-battery p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Au,{data:h.soc,colorClass:"bg-good"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(Xk,{className:`h-6 w-6 ${(l?.soc?.numeric??0)>50?"text-good":(l?.soc?.numeric??0)>20?"text-warn":"text-bad"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-good",children:[l?.soc?.numeric?.toFixed(0)??"","%"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Battery SoC"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-solar p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Au,{data:h.pv,colorClass:"bg-accent"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(Ov,{className:`h-6 w-6 ${(l?.pv_power?.numeric??0)>500?"text-accent":"text-accent/40"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-accent",children:[l?.pv_power?.numeric?(l.pv_power.numeric/1e3).toFixed(1):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"PV Power"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-house p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Au,{data:h.load,colorClass:"bg-house"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(TA,{className:"h-6 w-6 text-house"}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-house",children:[l?.load_power?.numeric?(l.load_power.numeric/1e3).toFixed(1):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Load"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-grid p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Au,{data:h.import,colorClass:(l?.grid_import?.numeric??0)>100?"bg-bad":"bg-grid"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(Mv,{className:`h-6 w-6 ${(l?.grid_import?.numeric??0)>100?"text-bad":"text-grid"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:`text-lg font-bold ${(l?.grid_import?.numeric??0)>100?"text-bad":"text-text"}`,children:[l?.grid_import?.numeric?(l.grid_import.numeric/1e3).toFixed(2):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Grid Import"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-bad p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Au,{data:h.export,colorClass:"bg-bad"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(Dv,{className:"h-6 w-6 text-bad"}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-bad",children:[l?.grid_export?.numeric?(l.grid_export.numeric/1e3).toFixed(2):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Grid Export"})]})]})]})]})]}),u.jsxs(Ge,{className:"p-4 md:p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(wA,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Execution History"}),u.jsxs("span",{className:"text-[10px] text-muted",children:["(",a.length," records)"]})]}),u.jsxs("button",{onClick:te,className:"flex items-center gap-1.5 text-[10px] text-muted hover:text-accent transition px-2 py-1 rounded-lg hover:bg-surface2",children:[u.jsx(eT,{className:"h-3 w-3"}),"Refresh"]})]}),a.length===0?u.jsxs("div",{className:"text-center py-12 text-muted",children:[u.jsx($w,{className:"h-10 w-10 mx-auto opacity-20 mb-3"}),u.jsx("p",{className:"text-[11px]",children:"No execution history yet."}),u.jsx("p",{className:"text-[10px] mt-1 text-muted/70",children:"Run the executor to see results here."})]}):u.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[t?.next_run_at&&u.jsxs("div",{className:"p-3 rounded-xl border-2 border-dashed border-line/30 bg-surface2/10 opacity-70",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx($w,{className:"h-4 w-4 text-muted animate-pulse"}),u.jsxs("span",{className:"text-[11px] text-muted font-mono",children:["Next: ",me(t.next_run_at)]})]}),u.jsx("span",{className:"text-[9px] text-muted/70 bg-surface2/50 px-2 py-0.5 rounded-full",children:"Scheduled"})]}),t.current_slot_plan&&u.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2 text-[10px]",children:[t.current_slot_plan.charge_kw>0&&u.jsxs("div",{className:"flex items-center gap-1 text-emerald-400",children:[u.jsx(_y,{className:"h-3 w-3"}),u.jsxs("span",{children:[t.current_slot_plan.charge_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.export_kw>0&&u.jsxs("div",{className:"flex items-center gap-1 text-amber-400",children:[u.jsx(Ny,{className:"h-3 w-3"}),u.jsxs("span",{children:[t.current_slot_plan.export_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.water_kw>0&&u.jsxs("div",{className:"flex items-center gap-1 text-sky-400",children:[u.jsx(Jk,{className:"h-3 w-3"}),u.jsxs("span",{children:[t.current_slot_plan.water_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.soc_target>0&&u.jsx("div",{className:"flex items-center gap-1 text-muted",children:u.jsxs("span",{children:["SoC",t.current_slot_plan.soc_target,"%"]})}),!t.current_slot_plan.charge_kw&&!t.current_slot_plan.export_kw&&!t.current_slot_plan.water_kw&&u.jsx("div",{className:"text-muted/60 col-span-4",children:"Idle / Self-consumption"})]})]}),a.map(H=>{const pe=de===H.id;return u.jsxs("div",{className:`rounded-xl border transition-all ${H.success?"bg-surface2/30 border-line/40 hover:border-line/60":"bg-red-500/10 border-red-500/30 hover:border-red-500/50"}`,children:[u.jsxs("div",{className:"p-3 cursor-pointer flex items-center justify-between",onClick:()=>le(pe?null:H.id),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Tp,{className:`h-3 w-3 text-muted transition-transform ${pe?"rotate-180":""}`}),H.success?u.jsx(Zk,{className:"h-4 w-4 text-emerald-400"}):u.jsx(Wu,{className:"h-4 w-4 text-red-400"}),u.jsx("span",{className:"text-[11px] text-text font-mono",children:F(H.executed_at)}),H.commanded_charge_current_a&&H.commanded_charge_current_a>0&&u.jsx("span",{className:"text-[9px] text-emerald-400 bg-emerald-500/20 px-1.5 py-0.5 rounded",children:" Charge"}),H.commanded_work_mode==="Export First"&&u.jsx("span",{className:"text-[9px] text-amber-400 bg-amber-500/20 px-1.5 py-0.5 rounded",children:" Export"}),H.commanded_water_temp&&H.commanded_water_temp>50&&u.jsx("span",{className:"text-[9px] text-orange-400 bg-orange-500/20 px-1.5 py-0.5 rounded",children:" Heat"}),(!H.commanded_charge_current_a||H.commanded_charge_current_a===0)&&H.commanded_work_mode!=="Export First"&&(!H.commanded_water_temp||H.commanded_water_temp<=50)&&u.jsx("span",{className:"text-[9px] text-muted/60 bg-surface2/50 px-1.5 py-0.5 rounded",children:" Idle"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[H.override_active?u.jsx("span",{className:"text-[9px] text-amber-400 bg-amber-500/20 px-2 py-0.5 rounded-full border border-amber-500/30",children:H.override_type}):null,H.duration_ms&&u.jsxs("span",{className:"text-[9px] text-muted font-mono",children:[H.duration_ms,"ms"]})]})]}),pe&&u.jsxs("div",{className:"px-3 pb-3 border-t border-line/20",children:[u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"Planned (from Schedule)"}),u.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 text-[10px]",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Charge"}),u.jsxs("span",{className:H.planned_charge_kw?"text-emerald-400":"text-muted/40",children:[H.planned_charge_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Export"}),u.jsxs("span",{className:H.planned_export_kw?"text-amber-400":"text-muted/40",children:[H.planned_export_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Water"}),u.jsxs("span",{className:H.planned_water_kw?"text-orange-400":"text-muted/40",children:[H.planned_water_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC Target"}),u.jsxs("span",{className:"text-text",children:[H.planned_soc_target??"","%"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC Projected"}),u.jsxs("span",{className:"text-text",children:[H.planned_soc_projected??"","%"]})]})]})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"Commanded (What We Set)"}),u.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 text-[10px]",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Work Mode"}),u.jsx("span",{className:"text-text font-medium",children:H.commanded_work_mode??""})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Grid Charging"}),u.jsx("span",{className:H.commanded_grid_charging?"text-emerald-400":"text-muted/40",children:H.commanded_grid_charging?"ON":"OFF"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Charge I"}),u.jsxs("span",{className:H.commanded_charge_current_a?"text-emerald-400":"text-muted/40",children:[H.commanded_charge_current_a??""," A"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Discharge I"}),u.jsxs("span",{className:H.commanded_discharge_current_a?"text-amber-400":"text-muted/40",children:[H.commanded_discharge_current_a??""," A"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC Target"}),u.jsxs("span",{className:"text-text",children:[H.commanded_soc_target??"","%"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Water Temp"}),u.jsxs("span",{className:H.commanded_water_temp&&H.commanded_water_temp>50?"text-orange-400":"text-muted/40",children:[H.commanded_water_temp??"","C"]})]})]})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"State Before Execution"}),u.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2 text-[10px]",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC"}),u.jsxs("span",{className:"text-text",children:[H.before_soc_percent?.toFixed(0)??"","%"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Work Mode"}),u.jsx("span",{className:"text-text",children:H.before_work_mode??""})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"PV Power"}),u.jsxs("span",{className:"text-yellow-400",children:[H.before_pv_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Load"}),u.jsxs("span",{className:"text-sky-400",children:[H.before_load_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Water Temp"}),u.jsxs("span",{className:"text-text",children:[H.before_water_temp??"","C"]})]})]})]}),H.error_message&&u.jsx("div",{className:"mt-2 text-[10px] text-red-400 bg-red-500/10 rounded-lg p-2",children:H.error_message}),H.override_reason&&u.jsxs("div",{className:"mt-2 text-[10px] text-amber-300/80 bg-amber-500/10 rounded-lg p-2",children:["Override: ",H.override_reason]})]})]},H.id)})]})]}),E&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>z(!1),children:u.jsxs("div",{className:"bg-surface border border-line rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:H=>H.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Sx,{className:"h-5 w-5 text-accent"}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Notification Settings"})]}),u.jsx("button",{onClick:()=>z(!1),className:"text-muted hover:text-text transition p-1",children:u.jsx(ic,{className:"h-5 w-5"})})]}),U&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"p-2 rounded-lg bg-surface2/30 border border-line/30 mb-3",children:[u.jsx("div",{className:"text-[10px] text-muted mb-1",children:"HA Notify Service"}),u.jsx("div",{className:"text-[11px] text-text font-mono",children:U.service||"Not configured"})]}),[{key:"on_charge_start",label:"Charge Started",desc:"When grid charging begins"},{key:"on_charge_stop",label:"Charge Stopped",desc:"When grid charging ends"},{key:"on_export_start",label:"Export Started",desc:"When battery export begins"},{key:"on_export_stop",label:"Export Stopped",desc:"When battery export ends"},{key:"on_water_heat_start",label:"Water Heating Started",desc:"When water heater activates"},{key:"on_water_heat_stop",label:"Water Heating Stopped",desc:"When water heater deactivates"},{key:"on_soc_target_change",label:"SoC Target Changed",desc:"When battery target changes"},{key:"on_override_activated",label:"Override Activated",desc:"When emergency override triggers"},{key:"on_error",label:"Errors",desc:"When execution fails"}].map(H=>u.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:H.label}),u.jsx("span",{className:"text-[9px] text-muted",children:H.desc})]}),u.jsx(gy,{enabled:U[H.key],onChange:pe=>se(H.key,pe),disabled:V,size:"sm"})]},H.key))]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-line/30",children:[u.jsx("button",{onClick:X,disabled:q,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border text-[11px] font-medium transition-all ${q?"bg-surface2/50 border-line/30 text-muted cursor-not-allowed":"bg-accent/10 border-accent/30 text-accent hover:bg-accent/20"}`,children:q?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-3 w-3 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),"Sending..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Sx,{className:"h-3.5 w-3.5"}),"Send Test Notification"]})}),re&&u.jsx("div",{className:`mt-2 text-center text-[10px] ${re.success?"text-emerald-400":"text-red-400"}`,children:re.message}),u.jsx("div",{className:"mt-2 text-center text-[9px] text-muted/70",children:"Changes are saved automatically"})]})]})})]})}function Ou({variant:t="info",children:e,className:n=""}){return u.jsx("div",{className:`banner banner-${t} ${n}`,children:e})}function Ru({variant:t="muted",children:e,className:n=""}){return u.jsx("span",{className:`badge badge-${t} ${n}`,children:e})}function fK(){const{toast:t}=OD(),[e,n]=A.useState(!1),[s,a]=A.useState(65),[o,l]=A.useState(!1),[d,h]=A.useState(!1),[p,x]=A.useState("");return u.jsxs("main",{className:"mx-auto max-w-6xl px-6 py-10 space-y-12",children:[u.jsxs("header",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text",children:"Darkstar Design System"}),u.jsx("p",{className:"text-muted text-lg mt-2",children:"Visual reference & component showcase"})]}),u.jsx(sT,{})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Color Palette"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[{name:"Accent",var:"--color-accent",hex:"#FFCE59"},{name:"Good",var:"--color-good",hex:"#1FB256"},{name:"Warn",var:"--color-warn",hex:"#F59E0B"},{name:"Bad",var:"--color-bad",hex:"#F15132"},{name:"Water",var:"--color-water",hex:"#4EA8DE"},{name:"House",var:"--color-house",hex:"#A855F7"},{name:"Peak",var:"--color-peak",hex:"#EC4899"},{name:"Night",var:"--color-night",hex:"#06B6D4"},{name:"Grid",var:"--color-grid",hex:"#64748B"},{name:"Neutral",var:"--color-neutral",hex:"#989FA5"},{name:"AI",var:"--color-ai",hex:"#8B5CF6"}].map(y=>u.jsxs("div",{className:"rounded-ds-md overflow-hidden shadow-float bg-surface",children:[u.jsx("div",{className:"h-16",style:{backgroundColor:`rgb(var(${y.var}))`}}),u.jsxs("div",{className:"p-2",children:[u.jsx("div",{className:"text-sm font-medium text-text",children:y.name}),u.jsx("div",{className:"text-xs text-muted font-mono",children:y.hex})]})]},y.name))}),u.jsx("h3",{className:"text-lg font-medium text-text mt-6 mb-3",children:"Surface Colors"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Canvas",var:"--color-canvas"},{name:"Surface",var:"--color-surface"},{name:"Surface2",var:"--color-surface2"},{name:"Line",var:"--color-line"}].map(y=>u.jsx("div",{className:"h-20 rounded-ds-md border border-line flex items-center justify-center",style:{backgroundColor:`rgb(var(${y.var}))`},children:u.jsx("span",{className:"text-sm font-medium text-text",children:y.name})},y.name))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Typography"}),u.jsxs("div",{className:"space-y-3 bg-surface p-6 rounded-ds-lg",children:[u.jsx("div",{className:"text-4xl",children:"text-4xl (28px)  Page Titles"}),u.jsx("div",{className:"text-3xl",children:"text-3xl (24px)  Section Headers"}),u.jsx("div",{className:"text-2xl",children:"text-2xl (18px)  Subsections"}),u.jsx("div",{className:"text-xl",children:"text-xl (16px)  Large Body"}),u.jsx("div",{className:"text-lg",children:"text-lg (14px)  Body Text"}),u.jsx("div",{className:"text-md",children:"text-md (13px)  Secondary"}),u.jsx("div",{className:"text-base",children:"text-base (12px)  Small Body"}),u.jsx("div",{className:"text-sm",children:"text-sm (11px)  Labels"}),u.jsx("div",{className:"text-xs",children:"text-xs (10px)  Micro"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Buttons"}),u.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[u.jsx("button",{className:"btn btn-primary",children:"Primary"}),u.jsx("button",{className:"btn btn-secondary",children:"Secondary"}),u.jsx("button",{className:"btn btn-danger",children:"Danger"}),u.jsx("button",{className:"btn btn-ghost",children:"Ghost"}),u.jsx("button",{className:"btn btn-primary btn-pill",children:"Pill Primary"}),u.jsx("button",{className:"btn btn-ghost btn-pill",children:"Pill Ghost"})]}),u.jsxs("div",{className:"flex flex-wrap gap-4 items-center mt-4",children:[u.jsx("button",{className:"btn btn-primary",disabled:!0,children:"Disabled Primary"}),u.jsx("button",{className:"btn btn-secondary",disabled:!0,children:"Disabled Secondary"}),u.jsx("button",{className:"btn btn-ghost",disabled:!0,children:"Disabled Ghost"})]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("p",{className:"text-sm text-muted mb-2",children:"Dynamic color (using CSS custom property):"}),u.jsx("button",{className:"btn btn-pill btn-dynamic",style:{"--btn-bg":"rgb(var(--color-water))","--btn-text":"#fff"},children:"Custom Water Color"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Banners / Alerts"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(Ou,{variant:"info",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Info Banner  Neutral information message"})]}),u.jsxs(Ou,{variant:"success",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Success Banner  Action completed successfully"})]}),u.jsxs(Ou,{variant:"warning",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Warning Banner  Requires attention"})]}),u.jsxs(Ou,{variant:"error",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Error Banner  Critical issue detected"})]}),u.jsxs(Ou,{variant:"purple",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Purple Banner  Special mode (shadow mode)"})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Badges"}),u.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[u.jsx(Ru,{variant:"accent",children:"Accent"}),u.jsx(Ru,{variant:"good",children:"Good"}),u.jsx(Ru,{variant:"warn",children:"Warning"}),u.jsx(Ru,{variant:"bad",children:"Error"}),u.jsx(Ru,{variant:"muted",children:"Muted"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Form Elements"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-muted mb-2",children:"Text Input"}),u.jsx("input",{type:"text",className:"input",placeholder:"Enter value..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-muted mb-2",children:"Number Input"}),u.jsx("input",{type:"number",className:"input",placeholder:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-muted mb-2",children:"Toggle Switch"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Yu,{checked:e,onCheckedChange:n}),u.jsx("span",{className:"text-sm text-text",children:e?"On":"Off"})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Loading States"}),u.jsxs("div",{className:"flex items-center gap-8",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-muted mb-2",children:"Spinner"}),u.jsx("div",{className:"spinner"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-sm text-muted mb-2",children:"Skeleton"}),u.jsx("div",{className:"skeleton h-8 w-full"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"text-sm text-muted mb-2",children:["Progress Bar (",s,"%)"]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-bar-fill",style:{width:`${s}%`}})}),u.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:y=>a(Number(y.target.value)),className:"slider mt-2"})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Data Visualization"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-surface p-4 rounded-ds-lg",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Mini-Bar Chart (Solar)"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"mini-bars",children:[40,55,75,90,100,85,70,45].map((y,b)=>u.jsx("div",{className:"mini-bar",style:{height:`${y}%`,background:"rgb(var(--color-accent))"}},b))}),u.jsx("span",{className:"font-mono font-bold text-accent",children:"4.2kW"})]})]}),u.jsxs("div",{className:"bg-surface p-4 rounded-ds-lg",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Mini-Bar Chart (Battery)"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"mini-bars",children:[60,65,70,75,80,82,85,85].map((y,b)=>u.jsx("div",{className:"mini-bar",style:{height:`${y}%`,background:"rgb(var(--color-good))"}},b))}),u.jsx("span",{className:"font-mono font-bold text-good",children:"85%"})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Chart.js  Live Example"}),u.jsx("p",{className:"text-muted text-sm mb-4",children:"This is the actual ChartCard component used throughout Darkstar."}),u.jsx("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:u.jsx(Nd,{day:"today",showDayToggle:!1})})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Power Flow Visualization"}),u.jsx("p",{className:"text-muted text-sm mb-4",children:"Animated energy flow between sources and loads (inspired by power-flow-card-plus)."}),u.jsx("div",{className:"bg-surface rounded-ds-lg p-8 shadow-float",children:u.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full max-w-lg mx-auto",children:[u.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-accent))",strokeWidth:3,fill:"none"},children:u.jsx("path",{d:"M100,50 L200,150"})}),u.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-good))",strokeWidth:3,fill:"none",animationDelay:"0.25s"},children:u.jsx("path",{d:"M200,150 L200,250"})}),u.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-house))",strokeWidth:3,fill:"none",animationDelay:"0.5s"},children:u.jsx("path",{d:"M200,150 L300,150"})}),u.jsx("g",{style:{stroke:"rgb(var(--color-grid))",strokeWidth:3,fill:"none",strokeDasharray:"5 5"},children:u.jsx("path",{d:"M100,250 L200,150"})}),u.jsxs("g",{transform:"translate(100, 50)",children:[u.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-accent))",strokeWidth:"3",className:"animate-glow"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-accent))",fontSize:"24",children:""}),u.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"4.2 kW"}),u.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Solar"})]}),u.jsxs("g",{transform:"translate(200, 150)",children:[u.jsx("circle",{r:"40",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-house))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-house))",fontSize:"24",children:""}),u.jsx("text",{y:"-50",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"3.1 kW"})]}),u.jsxs("g",{transform:"translate(200, 250)",children:[u.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-good))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-good))",fontSize:"24",children:""}),u.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"85%"}),u.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"+0.6 kW"})]}),u.jsxs("g",{transform:"translate(100, 250)",children:[u.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-grid))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-grid))",fontSize:"24",children:""}),u.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"0 W"}),u.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Grid"})]}),u.jsxs("g",{transform:"translate(300, 150)",children:[u.jsx("circle",{r:"30",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-water))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-water))",fontSize:"20",children:""}),u.jsx("text",{y:"50",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"0.5 kW"}),u.jsx("text",{y:"65",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Water"})]})]})})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Animation Examples"}),u.jsx("p",{className:"text-muted text-sm mb-4",children:"CSS animations available in the design system."}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-accent animate-pulse"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Pulse"}),u.jsx("code",{className:"text-xs text-muted",children:".animate-pulse"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-good animate-bounce"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Bounce"}),u.jsx("code",{className:"text-xs text-muted",children:".animate-bounce"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-accent animate-glow"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Glow"}),u.jsx("code",{className:"text-xs text-muted",children:".animate-glow"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"spinner mx-auto mb-3",style:{width:"3rem",height:"3rem",borderWidth:"4px"}}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Spinner"}),u.jsx("code",{className:"text-xs text-muted",children:".spinner"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Skeleton Loading"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"skeleton h-4 w-3/4"}),u.jsx("div",{className:"skeleton h-4 w-1/2"}),u.jsx("div",{className:"skeleton h-4 w-full"})]}),u.jsx("code",{className:"text-xs text-muted mt-2 block",children:".skeleton"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Mini Bar Animation"}),u.jsx("div",{className:"mini-bars",children:[40,60,80,100,80,60,40,20].map((y,b)=>u.jsx("div",{className:"mini-bar animate-pulse",style:{height:`${y}%`,background:"rgb(var(--color-accent))",animationDelay:`${b*.1}s`}},b))}),u.jsx("code",{className:"text-xs text-muted mt-2 block",children:".mini-bars"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("button",{className:"btn btn-primary animate-glow mb-2",children:"Glowing Button"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Button Glow"}),u.jsx("code",{className:"text-xs text-muted",children:".btn + .animate-glow"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Animated Progress"}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-bar-fill",style:{width:"75%",animation:"skeleton-shimmer 1.5s infinite",background:"linear-gradient(90deg, rgb(var(--color-accent)), rgb(var(--color-accent2)), rgb(var(--color-accent)))",backgroundSize:"200% 100%"}})}),u.jsx("code",{className:"text-xs text-muted mt-2 block",children:".progress-bar"})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Metric Cards"}),u.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[{border:"solar",label:"Solar",value:"4.2 kW",sub:"+12% today"},{border:"battery",label:"Battery",value:"78%",sub:"Target: 85%"},{border:"house",label:"House Load",value:"1.8 kW",sub:"Avg: 2.1 kW"},{border:"water",label:"Water",value:"2.4 kWh",sub:"Today"},{border:"grid",label:"Grid",value:"-0.5 kW",sub:"Exporting"},{border:"bad",label:"Error",value:"3",sub:"Issues detected"}].map(y=>u.jsxs("div",{className:`metric-card-border metric-card-border-${y.border} bg-surface p-4`,children:[u.jsx("div",{className:"text-xs text-muted uppercase tracking-wider",children:y.label}),u.jsx("div",{className:"text-2xl font-bold text-text mt-1",children:y.value}),u.jsx("div",{className:"text-xs text-muted mt-1",children:y.sub})]},y.border))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Border Radius"}),u.jsx("div",{className:"flex gap-4 items-end",children:[{name:"sm",size:"8px"},{name:"md",size:"12px"},{name:"lg",size:"16px"},{name:"xl",size:"20px"},{name:"pill",size:"9999px"}].map(y=>u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:`w-16 h-16 bg-accent rounded-ds-${y.name}`}),u.jsx("div",{className:"text-xs text-muted mt-2",children:y.name}),u.jsx("div",{className:"text-xs text-muted",children:y.size})]},y.name))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Spacing Scale (4px grid)"}),u.jsx("div",{className:"flex gap-4 items-end flex-wrap",children:[1,2,3,4,5,6,8,10,12].map(y=>u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"bg-accent",style:{width:`var(--space-${y})`,height:`var(--space-${y})`,minWidth:"4px",minHeight:"4px"}}),u.jsxs("div",{className:"text-xs text-muted mt-2",children:["ds-",y]})]},y))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Dark / Light Mode Comparison"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"rounded-ds-lg overflow-hidden",style:{background:"#0f1216"},children:[u.jsx("div",{className:"px-4 py-3",style:{background:"#14191f"},children:u.jsx("span",{className:"text-sm font-semibold",style:{color:"#e6e9ef"},children:" Dark Mode  Glow Buttons"})}),u.jsxs("div",{className:"p-4 space-y-2",style:{background:"#14191f"},children:[u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#FFCE59"},children:" Solar"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#FFCE59"},children:"4.2kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#1FB256"},children:" Battery"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#1FB256"},children:"85%"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#A855F7"},children:" House"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#e6e9ef"},children:"1.8kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#4EA8DE"},children:" Water"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#e6e9ef"},children:"58C"})]}),u.jsxs("div",{className:"flex gap-2 pt-3",children:[u.jsx("button",{style:{background:"#FFCE59",color:"#1a1d23",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",boxShadow:"0 0 16px rgba(255, 206, 89, 0.4), 0 0 32px rgba(255, 206, 89, 0.2)"},children:" Boost"}),u.jsx("button",{style:{background:"#989FA5",color:"#fff",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",boxShadow:"0 0 12px rgba(152, 159, 165, 0.3)"},children:" Vacation"})]})]})]}),u.jsxs("div",{className:"rounded-ds-lg overflow-hidden",style:{background:"#DFDFDF"},children:[u.jsx("div",{className:"px-4 py-3",style:{background:"#EFEFEF"},children:u.jsx("span",{className:"text-sm font-semibold",style:{color:"#2D2D2D"},children:" Light Mode  Flat Buttons (TE Style)"})}),u.jsxs("div",{className:"p-4 space-y-2",style:{background:"#EFEFEF"},children:[u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#b38b00"},children:"Solar"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"4.2kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#1FB256"},children:"Battery"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"85%"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#A855F7"},children:"House"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"1.8kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#4EA8DE"},children:"Water"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"58C"})]}),u.jsxs("div",{className:"flex gap-2 pt-3",children:[u.jsx("button",{style:{background:"#FFCE59",color:"#2D2D2D",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",border:"none"},children:" Boost"}),u.jsx("button",{style:{background:"#989FA5",color:"#fff",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",border:"none"},children:" Vacation"})]})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Future Components (Inspiration)"}),u.jsx("p",{className:"text-muted text-sm mb-6",children:"These components are not yet implemented but can be added as needed."}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Card"}),u.jsx("p",{className:"text-xs text-muted",children:"Container with shadow, padding, and rounded corners for grouping content."}),u.jsx("div",{className:"mt-3 p-3 bg-surface2 rounded-ds-md",children:u.jsx("div",{className:"text-xs text-text",children:"Card content goes here..."})})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Select (Dropdown)"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Custom searchable dropdown."}),u.jsx(mv,{options:[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Delete",value:"3",group:"Danger"}],value:"1",onChange:()=>{}})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Tabs"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Navigation between views."}),u.jsxs("div",{className:"flex gap-1 bg-surface2 p-1 rounded-ds-md",children:[u.jsx("div",{className:"px-3 py-1.5 text-xs font-medium bg-accent text-black rounded",children:"Active"}),u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted rounded",children:"Tab 2"}),u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted rounded",children:"Tab 3"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Avatars"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"User profile images or initials."}),u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center text-xs font-bold text-black",children:"JD"}),u.jsx("div",{className:"w-8 h-8 rounded-full bg-water flex items-center justify-center text-xs font-bold text-white",children:"AB"}),u.jsx("div",{className:"w-8 h-8 rounded-full bg-house flex items-center justify-center text-xs font-bold text-white",children:"?"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Tooltip"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Hover for more info."}),u.jsx("span",{className:"tooltip px-3 py-1.5 bg-surface2 rounded text-xs text-text cursor-help","data-tooltip":"This is a tooltip!",children:"Hover me"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Data Table"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Tabular data display."}),u.jsxs("div",{className:"text-xs",children:[u.jsxs("div",{className:"flex gap-2 py-1 border-b border-line text-muted font-medium",children:[u.jsx("span",{className:"flex-1",children:"Name"}),u.jsx("span",{className:"w-16 text-right",children:"Value"})]}),u.jsxs("div",{className:"flex gap-2 py-1 text-text",children:[u.jsx("span",{className:"flex-1",children:"Solar"}),u.jsx("span",{className:"w-16 text-right text-accent",children:"4.2kW"})]}),u.jsxs("div",{className:"flex gap-2 py-1 text-text",children:[u.jsx("span",{className:"flex-1",children:"Battery"}),u.jsx("span",{className:"w-16 text-right text-good",children:"85%"})]})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Gauge / Dial"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Circular progress indicator."}),u.jsxs("div",{className:"w-16 h-16 rounded-full border-4 border-surface2 relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-accent border-r-accent",style:{transform:"rotate(45deg)"}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-text",children:"75%"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Notification Badge"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Alert indicator on icons."}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx("div",{className:"w-10 h-10 bg-surface2 rounded-lg flex items-center justify-center text-lg",children:""}),u.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-bad rounded-full flex items-center justify-center text-[10px] font-bold text-white",children:"3"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Stepper"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Multi-step progress."}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-accent flex items-center justify-center text-[10px] font-bold text-black",children:"1"}),u.jsx("div",{className:"flex-1 h-0.5 bg-accent"}),u.jsx("div",{className:"w-6 h-6 rounded-full bg-accent flex items-center justify-center text-[10px] font-bold text-black",children:"2"}),u.jsx("div",{className:"flex-1 h-0.5 bg-surface2"}),u.jsx("div",{className:"w-6 h-6 rounded-full bg-surface2 flex items-center justify-center text-[10px] font-bold text-muted",children:"3"})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" More Future Components"}),u.jsx("p",{className:"text-muted text-sm mb-6",children:"Additional component patterns for future implementation."}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Modal / Dialog"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Overlay for confirmations & forms."}),u.jsx("button",{className:"btn btn-primary text-xs",onClick:()=>h(!0),children:"Open Modal"}),u.jsx(ED,{open:d,onOpenChange:h,title:"Example Modal",footer:u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn btn-ghost",onClick:()=>h(!1),children:"Cancel"}),u.jsx("button",{className:"btn btn-primary",onClick:()=>h(!1),children:"Confirm"})]}),children:u.jsx("p",{className:"text-text",children:"This is a reusable modal component using React Portal."})})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Accordion"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Expandable content sections."}),u.jsxs("div",{className:"bg-surface2 rounded-ds-md overflow-hidden",children:[u.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-text flex justify-between items-center cursor-pointer",onClick:()=>l(!o),children:[u.jsx("span",{children:"Click to expand"}),u.jsx("span",{children:o?"":"+"})]}),o&&u.jsx("div",{className:"px-3 py-2 text-xs text-muted border-t border-line",children:"Hidden content revealed!"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Search Input"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"With autocomplete dropdown."}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",className:"input pr-8",placeholder:"Search entities...",value:p,onChange:y=>x(y.target.value)}),u.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted",children:""})]}),p&&u.jsxs("div",{className:"mt-1 bg-surface2 rounded-ds-md p-1 shadow-lg",children:[u.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"sensor.solar_power"}),u.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"sensor.battery_soc"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Date Picker"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Calendar date selection."}),u.jsxs("div",{className:"bg-surface2 rounded-ds-md p-2 w-48",children:[u.jsx("div",{className:"text-xs font-medium text-text text-center mb-2",children:"December 2024"}),u.jsxs("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-center",children:[["M","T","W","T","F","S","S"].map((y,b)=>u.jsx("div",{className:"text-muted",children:y},b)),[...Array(31)].map((y,b)=>u.jsx("div",{className:`py-1 rounded cursor-pointer ${b===30?"bg-accent text-black font-bold":"text-text hover:bg-accent/20"}`,children:b+1},b))]})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Toast Notification"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Temporary status messages."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("button",{className:"btn btn-secondary w-full text-xs",onClick:()=>t({variant:"success",message:"Success!",description:"Action completed successfully."}),children:"Trigger Success Toast"}),u.jsx("button",{className:"btn btn-ghost w-full text-xs border border-bad/50 text-bad hover:bg-bad/10",onClick:()=>t({variant:"error",message:"Error!",description:"Something went wrong."}),children:"Trigger Error Toast"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Breadcrumbs"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Navigation path trail."}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-accent hover:underline cursor-pointer",children:"Home"}),u.jsx("span",{className:"text-muted",children:"/"}),u.jsx("span",{className:"text-accent hover:underline cursor-pointer",children:"Settings"}),u.jsx("span",{className:"text-muted",children:"/"}),u.jsx("span",{className:"text-text font-medium",children:"Entities"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float col-span-full lg:col-span-2",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Timeline / Activity Log"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Chronological event display."}),u.jsx("div",{className:"space-y-3",children:[{time:"14:32",event:"Battery charging started",color:"good"},{time:"14:15",event:"Solar production peaked at 4.2kW",color:"accent"},{time:"13:45",event:"Grid export enabled",color:"water"}].map((y,b)=>u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 bg-${y.color}`}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-mono text-muted",children:y.time}),u.jsx("div",{className:"text-xs text-text",children:y.event})]})]},b))})]})]})]}),d&&u.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:u.jsxs("div",{className:"modal",onClick:y=>y.stopPropagation(),children:[u.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Modal Title"}),u.jsx("p",{className:"text-sm text-muted mb-4",children:"This is a sample modal dialog. It uses the design system's modal classes."}),u.jsxs("div",{className:"flex gap-2 justify-end",children:[u.jsx("button",{className:"btn btn-ghost",onClick:()=>h(!1),children:"Cancel"}),u.jsx("button",{className:"btn btn-primary",onClick:()=>h(!1),children:"Confirm"})]})]})}),u.jsxs("footer",{className:"text-center text-muted text-sm pt-8 border-t border-line",children:[u.jsxs("p",{children:["SSOT: ",u.jsx("code",{className:"bg-surface2 px-2 py-1 rounded text-xs",children:"frontend/src/index.css"})]}),u.jsx("p",{className:"mt-2",children:"Toggle dark/light mode using the switch in the header."})]})]})}function pK({health:t,onDismiss:e}){if(!t||t.healthy)return null;const n=t.issues.filter(a=>a.severity==="critical"),s=t.issues.filter(a=>a.severity==="warning");return u.jsxs("div",{className:"system-alert-container",children:[n.length>0&&u.jsxs("div",{className:"system-alert system-alert--critical",children:[u.jsx("div",{className:"system-alert__icon",children:""}),u.jsxs("div",{className:"system-alert__content",children:[u.jsxs("div",{className:"system-alert__title",children:["System Error",n.length>1?"s":""," Detected"]}),u.jsx("ul",{className:"system-alert__list",children:n.map((a,o)=>u.jsxs("li",{className:"system-alert__item",children:[u.jsx("strong",{children:a.message}),a.entity_id&&u.jsx("code",{className:"system-alert__entity",children:a.entity_id}),u.jsx("div",{className:"system-alert__guidance",children:a.guidance})]},o))})]}),e&&u.jsx("button",{className:"system-alert__dismiss",onClick:e,title:"Dismiss (will reappear on next check)",children:""})]}),s.length>0&&u.jsxs("div",{className:"system-alert system-alert--warning",children:[u.jsx("div",{className:"system-alert__icon",children:""}),u.jsxs("div",{className:"system-alert__content",children:[u.jsxs("div",{className:"system-alert__title",children:["Warning",s.length>1?"s":""]}),u.jsx("ul",{className:"system-alert__list",children:s.map((a,o)=>u.jsxs("li",{className:"system-alert__item",children:[u.jsx("strong",{children:a.message}),u.jsx("div",{className:"system-alert__guidance",children:a.guidance})]},o))})]})]})]})}function mK(){const[t,e]=A.useState(!1),[n,s]=A.useState(null);return A.useEffect(()=>{let a=!1,o=0;const l=async()=>{try{const[,h]=await Promise.all([De.status(),De.health()]);if(a)return;o=0,e(!1),s(h)}catch{if(a)return;o+=1,o>=3&&(e(!0),s(null))}};l();const d=window.setInterval(l,6e4);return()=>{a=!0,window.clearInterval(d)}},[]),u.jsx(OA,{children:u.jsx(PW,{children:u.jsxs(lA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[u.jsx(AA,{}),u.jsxs("div",{className:"lg:pl-[96px]",children:[n&&!n.healthy&&u.jsx(pK,{health:n}),t&&!n&&u.jsx("div",{className:"bg-amber-900/80 border-b border-amber-500/60 text-amber-100 text-[11px] px-4 py-2 flex items-center justify-between",children:u.jsx("span",{children:"Backend appears offline or degraded. Some data may be stale or unavailable."})}),u.jsxs(eA,{children:[u.jsx(Si,{path:"/",element:u.jsx(w9,{})}),u.jsx(Si,{path:"/planning",element:u.jsx(TW,{})}),u.jsx(Si,{path:"/forecasting",element:u.jsx(i$,{})}),u.jsx(Si,{path:"/executor",element:u.jsx(hK,{})}),u.jsx(Si,{path:"/aurora",element:u.jsx(dK,{})}),u.jsx(Si,{path:"/learning",element:u.jsx(MW,{})}),u.jsx(Si,{path:"/debug",element:u.jsx(DW,{})}),u.jsx(Si,{path:"/lab",element:u.jsx(a$,{})}),u.jsx(Si,{path:"/settings",element:u.jsx(ZW,{})}),u.jsx(Si,{path:"/design-system",element:u.jsx(fK,{})})]})]})]})})})}c5.createRoot(document.getElementById("root")).render(u.jsx(Kt.StrictMode,{children:u.jsx(mK,{})}))});export default gK();
