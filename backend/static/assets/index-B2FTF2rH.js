var HE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var sK=HE((uK,Vf)=>{function UE(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function vv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dx={exports:{}},xu={};var yw;function IE(){if(yw)return xu;yw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:t,type:s,key:l,ref:a!==void 0?a:null,props:o}}return xu.Fragment=e,xu.jsx=n,xu.jsxs=n,xu}var vw;function YE(){return vw||(vw=1,dx.exports=IE()),dx.exports}var u=YE(),hx={exports:{}},rt={};var bw;function WE(){if(bw)return rt;bw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function j(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function R(V,ee,pe){this.props=V,this.context=ee,this.refs=D,this.updater=pe||k}R.prototype.isReactComponent={},R.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},R.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function E(){}E.prototype=R.prototype;function B(V,ee,pe){this.props=V,this.context=ee,this.refs=D,this.updater=pe||k}var U=B.prototype=new E;U.constructor=B,N(U,R.prototype),U.isPureReactComponent=!0;var $=Array.isArray;function I(){}var O={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function J(V,ee,pe){var F=pe.ref;return{$$typeof:t,type:V,key:ee,ref:F!==void 0?F:null,props:pe}}function oe(V,ee){return J(V.type,ee,V.props)}function ie(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function me(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(pe){return ee[pe]})}var le=/\/+/g;function Z(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?me(""+V.key):ee.toString(36)}function re(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(I,I):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function H(V,ee,pe,F,de){var Se=typeof V;(Se==="undefined"||Se==="boolean")&&(V=null);var Ie=!1;if(V===null)Ie=!0;else switch(Se){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(V.$$typeof){case t:case e:Ie=!0;break;case g:return Ie=V._init,H(Ie(V._payload),ee,pe,F,de)}}if(Ie)return de=de(V),Ie=F===""?"."+Z(V,0):F,$(de)?(pe="",Ie!=null&&(pe=Ie.replace(le,"$&/")+"/"),H(de,ee,pe,"",function(ft){return ft})):de!=null&&(ie(de)&&(de=oe(de,pe+(de.key==null||V&&V.key===de.key?"":(""+de.key).replace(le,"$&/")+"/")+Ie)),ee.push(de)),1;Ie=0;var tt=F===""?".":F+":";if($(V))for(var Te=0;Te<V.length;Te++)F=V[Te],Se=tt+Z(F,Te),Ie+=H(F,ee,pe,Se,de);else if(Te=j(V),typeof Te=="function")for(V=Te.call(V),Te=0;!(F=V.next()).done;)F=F.value,Se=tt+Z(F,Te++),Ie+=H(F,ee,pe,Se,de);else if(Se==="object"){if(typeof V.then=="function")return H(re(V),ee,pe,F,de);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function X(V,ee,pe){if(V==null)return V;var F=[],de=0;return H(V,F,"","",function(Se){return ee.call(pe,Se,de++)}),F}function ne(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(pe){(V._status===0||V._status===-1)&&(V._status=1,V._result=pe)},function(pe){(V._status===0||V._status===-1)&&(V._status=2,V._result=pe)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var ae=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},xe={map:X,forEach:function(V,ee,pe){X(V,function(){ee.apply(this,arguments)},pe)},count:function(V){var ee=0;return X(V,function(){ee++}),ee},toArray:function(V){return X(V,function(ee){return ee})||[]},only:function(V){if(!ie(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return rt.Activity=y,rt.Children=xe,rt.Component=R,rt.Fragment=n,rt.Profiler=a,rt.PureComponent=B,rt.StrictMode=s,rt.Suspense=h,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,rt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return O.H.useMemoCache(V)}},rt.cache=function(V){return function(){return V.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(V,ee,pe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var F=N({},V.props),de=V.key;if(ee!=null)for(Se in ee.key!==void 0&&(de=""+ee.key),ee)!q.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(F[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)F.children=pe;else if(1<Se){for(var Ie=Array(Se),tt=0;tt<Se;tt++)Ie[tt]=arguments[tt+2];F.children=Ie}return J(V.type,de,F)},rt.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},rt.createElement=function(V,ee,pe){var F,de={},Se=null;if(ee!=null)for(F in ee.key!==void 0&&(Se=""+ee.key),ee)q.call(ee,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(de[F]=ee[F]);var Ie=arguments.length-2;if(Ie===1)de.children=pe;else if(1<Ie){for(var tt=Array(Ie),Te=0;Te<Ie;Te++)tt[Te]=arguments[Te+2];de.children=tt}if(V&&V.defaultProps)for(F in Ie=V.defaultProps,Ie)de[F]===void 0&&(de[F]=Ie[F]);return J(V,Se,de)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(V){return{$$typeof:d,render:V}},rt.isValidElement=ie,rt.lazy=function(V){return{$$typeof:g,_payload:{_status:-1,_result:V},_init:ne}},rt.memo=function(V,ee){return{$$typeof:p,type:V,compare:ee===void 0?null:ee}},rt.startTransition=function(V){var ee=O.T,pe={};O.T=pe;try{var F=V(),de=O.S;de!==null&&de(pe,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(I,ae)}catch(Se){ae(Se)}finally{ee!==null&&pe.types!==null&&(ee.types=pe.types),O.T=ee}},rt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},rt.use=function(V){return O.H.use(V)},rt.useActionState=function(V,ee,pe){return O.H.useActionState(V,ee,pe)},rt.useCallback=function(V,ee){return O.H.useCallback(V,ee)},rt.useContext=function(V){return O.H.useContext(V)},rt.useDebugValue=function(){},rt.useDeferredValue=function(V,ee){return O.H.useDeferredValue(V,ee)},rt.useEffect=function(V,ee){return O.H.useEffect(V,ee)},rt.useEffectEvent=function(V){return O.H.useEffectEvent(V)},rt.useId=function(){return O.H.useId()},rt.useImperativeHandle=function(V,ee,pe){return O.H.useImperativeHandle(V,ee,pe)},rt.useInsertionEffect=function(V,ee){return O.H.useInsertionEffect(V,ee)},rt.useLayoutEffect=function(V,ee){return O.H.useLayoutEffect(V,ee)},rt.useMemo=function(V,ee){return O.H.useMemo(V,ee)},rt.useOptimistic=function(V,ee){return O.H.useOptimistic(V,ee)},rt.useReducer=function(V,ee,pe){return O.H.useReducer(V,ee,pe)},rt.useRef=function(V){return O.H.useRef(V)},rt.useState=function(V){return O.H.useState(V)},rt.useSyncExternalStore=function(V,ee,pe){return O.H.useSyncExternalStore(V,ee,pe)},rt.useTransition=function(){return O.H.useTransition()},rt.version="19.2.3",rt}var _w;function bv(){return _w||(_w=1,hx.exports=WE()),hx.exports}var A=bv();const Kt=vv(A),$E=UE({__proto__:null,default:Kt},[A]);var fx={exports:{}},yu={},px={exports:{}},mx={};var ww;function qE(){return ww||(ww=1,(function(t){function e(H,X){var ne=H.length;H.push(X);e:for(;0<ne;){var ae=ne-1>>>1,xe=H[ae];if(0<a(xe,X))H[ae]=X,H[ne]=xe,ne=ae;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var X=H[0],ne=H.pop();if(ne!==X){H[0]=ne;e:for(var ae=0,xe=H.length,V=xe>>>1;ae<V;){var ee=2*(ae+1)-1,pe=H[ee],F=ee+1,de=H[F];if(0>a(pe,ne))F<xe&&0>a(de,pe)?(H[ae]=de,H[F]=ne,ae=F):(H[ae]=pe,H[ee]=ne,ae=ee);else if(F<xe&&0>a(de,ne))H[ae]=de,H[F]=ne,ae=F;else break e}}return X}function a(H,X){var ne=H.sortIndex-X.sortIndex;return ne!==0?ne:H.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],p=[],g=1,y=null,_=3,j=!1,k=!1,N=!1,D=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function U(H){for(var X=n(p);X!==null;){if(X.callback===null)s(p);else if(X.startTime<=H)s(p),X.sortIndex=X.expirationTime,e(h,X);else break;X=n(p)}}function $(H){if(N=!1,U(H),!k)if(n(h)!==null)k=!0,I||(I=!0,me());else{var X=n(p);X!==null&&re($,X.startTime-H)}}var I=!1,O=-1,q=5,J=-1;function oe(){return D?!0:!(t.unstable_now()-J<q)}function ie(){if(D=!1,I){var H=t.unstable_now();J=H;var X=!0;try{e:{k=!1,N&&(N=!1,E(O),O=-1),j=!0;var ne=_;try{t:{for(U(H),y=n(h);y!==null&&!(y.expirationTime>H&&oe());){var ae=y.callback;if(typeof ae=="function"){y.callback=null,_=y.priorityLevel;var xe=ae(y.expirationTime<=H);if(H=t.unstable_now(),typeof xe=="function"){y.callback=xe,U(H),X=!0;break t}y===n(h)&&s(h),U(H)}else s(h);y=n(h)}if(y!==null)X=!0;else{var V=n(p);V!==null&&re($,V.startTime-H),X=!1}}break e}finally{y=null,_=ne,j=!1}X=void 0}}finally{X?me():I=!1}}}var me;if(typeof B=="function")me=function(){B(ie)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Z=le.port2;le.port1.onmessage=ie,me=function(){Z.postMessage(null)}}else me=function(){R(ie,0)};function re(H,X){O=R(function(){H(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(H){switch(_){case 1:case 2:case 3:var X=3;break;default:X=_}var ne=_;_=X;try{return H()}finally{_=ne}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=_;_=H;try{return X()}finally{_=ne}},t.unstable_scheduleCallback=function(H,X,ne){var ae=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,H){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ne+xe,H={id:g++,callback:X,priorityLevel:H,startTime:ne,expirationTime:xe,sortIndex:-1},ne>ae?(H.sortIndex=ne,e(p,H),n(h)===null&&H===n(p)&&(N?(E(O),O=-1):N=!0,re($,ne-ae))):(H.sortIndex=xe,e(h,H),k||j||(k=!0,I||(I=!0,me()))),H},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(H){var X=_;return function(){var ne=_;_=X;try{return H.apply(this,arguments)}finally{_=ne}}}})(mx)),mx}var Sw;function GE(){return Sw||(Sw=1,px.exports=qE()),px.exports}var gx={exports:{}},ts={};var jw;function XE(){if(jw)return ts;jw=1;var t=bv();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:h,containerInfo:p,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ts.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(h,p,null,g)},ts.flushSync=function(h){var p=l.T,g=s.p;try{if(l.T=null,s.p=2,h)return h()}finally{l.T=p,s.p=g,s.d.f()}},ts.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},ts.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},ts.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,j=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:j}):g==="script"&&s.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:j,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ts.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},ts.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin);s.d.L(h,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ts.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=d(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},ts.requestFormReset=function(h){s.d.r(h)},ts.unstable_batchedUpdates=function(h,p){return h(p)},ts.useFormState=function(h,p,g){return l.H.useFormState(h,p,g)},ts.useFormStatus=function(){return l.H.useHostTransitionStatus()},ts.version="19.2.3",ts}var Tw;function MT(){if(Tw)return gx.exports;Tw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gx.exports=XE(),gx.exports}var kw;function KE(){if(kw)return yu;kw=1;var t=GE(),e=bv(),n=MT();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function l(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var c=i,f=r;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return h(v),i;if(b===f)return h(v),r;b=b.sibling}throw Error(s(188))}if(c.return!==f.return)c=v,f=b;else{for(var M=!1,L=v.child;L;){if(L===c){M=!0,c=v,f=b;break}if(L===f){M=!0,f=v,c=b;break}L=L.sibling}if(!M){for(L=b.child;L;){if(L===c){M=!0,c=b,f=v;break}if(L===f){M=!0,f=b,c=v;break}L=L.sibling}if(!M)throw Error(s(189))}}if(c.alternate!==f)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:r}function g(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=g(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var le=Symbol.for("react.client.reference");function Z(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===le?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case R:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case I:return"SuspenseList";case J:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case B:return i.displayName||"Context";case E:return(i._context.displayName||"Context")+".Consumer";case U:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:Z(i.type)||"Memo";case q:r=i._payload,i=i._init;try{return Z(i(r))}catch{}}return null}var re=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ae=[],xe=-1;function V(i){return{current:i}}function ee(i){0>xe||(i.current=ae[xe],ae[xe]=null,xe--)}function pe(i,r){xe++,ae[xe]=i.current,i.current=r}var F=V(null),de=V(null),Se=V(null),Ie=V(null);function tt(i,r){switch(pe(Se,r),pe(de,i),pe(F,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?H1(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=H1(r),i=U1(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(F),pe(F,i)}function Te(){ee(F),ee(de),ee(Se)}function ft(i){i.memoizedState!==null&&pe(Ie,i);var r=F.current,c=U1(r,i.type);r!==c&&(pe(de,i),pe(F,c))}function xt(i){de.current===i&&(ee(F),ee(de)),Ie.current===i&&(ee(Ie),fu._currentValue=ne)}var _t,Bt;function Dt(i){if(_t===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);_t=r&&r[1]||"",Bt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_t+i+Bt}var st=!1;function ln(i,r){if(!i||st)return"";st=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ge){var he=ge}Reflect.construct(i,[],we)}else{try{we.call()}catch(ge){he=ge}i.call(we.prototype)}}else{try{throw Error()}catch(ge){he=ge}(we=i())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ge){if(ge&&he&&typeof ge.stack=="string")return[ge.stack,he.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),M=b[0],L=b[1];if(M&&L){var G=M.split(`
`),ue=L.split(`
`);for(v=f=0;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;for(;v<ue.length&&!ue[v].includes("DetermineComponentFrameRoot");)v++;if(f===G.length||v===ue.length)for(f=G.length-1,v=ue.length-1;1<=f&&0<=v&&G[f]!==ue[v];)v--;for(;1<=f&&0<=v;f--,v--)if(G[f]!==ue[v]){if(f!==1||v!==1)do if(f--,v--,0>v||G[f]!==ue[v]){var be=`
`+G[f].replace(" at new "," at ");return i.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",i.displayName)),be}while(1<=f&&0<=v);break}}}finally{st=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Dt(c):""}function Yn(i,r){switch(i.tag){case 26:case 27:case 5:return Dt(i.type);case 16:return Dt("Lazy");case 13:return i.child!==r&&r!==null?Dt("Suspense Fallback"):Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 15:return ln(i.type,!1);case 11:return ln(i.type.render,!1);case 1:return ln(i.type,!0);case 31:return Dt("Activity");default:return""}}function Sn(i){try{var r="",c=null;do r+=Yn(i,c),c=i,i=i.return;while(i);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var cs=Object.prototype.hasOwnProperty,Wn=t.unstable_scheduleCallback,ze=t.unstable_cancelCallback,wt=t.unstable_shouldYield,fn=t.unstable_requestPaint,Ut=t.unstable_now,Cs=t.unstable_getCurrentPriorityLevel,lt=t.unstable_ImmediatePriority,Vn=t.unstable_UserBlockingPriority,gn=t.unstable_NormalPriority,ui=t.unstable_LowPriority,Is=t.unstable_IdlePriority,Ci=t.log,Fn=t.unstable_setDisableYieldValue,ms=null,It=null;function xn(i){if(typeof Ci=="function"&&Fn(i),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(ms,i)}catch{}}var Qt=Math.clz32?Math.clz32:di,us=Math.log,Ei=Math.LN2;function di(i){return i>>>=0,i===0?32:31-(us(i)/Ei|0)|0}var Pn=256,Es=262144,As=4194304;function ds(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ys(i,r,c){var f=i.pendingLanes;if(f===0)return 0;var v=0,b=i.suspendedLanes,M=i.pingedLanes;i=i.warmLanes;var L=f&134217727;return L!==0?(f=L&~b,f!==0?v=ds(f):(M&=L,M!==0?v=ds(M):c||(c=L&~i,c!==0&&(v=ds(c))))):(L=f&~b,L!==0?v=ds(L):M!==0?v=ds(M):c||(c=f&~i,c!==0&&(v=ds(c)))),v===0?0:r!==0&&r!==v&&(r&b)===0&&(b=v&-v,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:v}function gs(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Ai(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oi(){var i=As;return As<<=1,(As&62914560)===0&&(As=4194304),i}function hi(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function xs(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ri(i,r,c,f,v,b){var M=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var L=i.entanglements,G=i.expirationTimes,ue=i.hiddenUpdates;for(c=M&~c;0<c;){var be=31-Qt(c),we=1<<be;L[be]=0,G[be]=-1;var he=ue[be];if(he!==null)for(ue[be]=null,be=0;be<he.length;be++){var ge=he[be];ge!==null&&(ge.lane&=-536870913)}c&=~we}f!==0&&Pe(i,f,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(M&~r))}function Pe(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var f=31-Qt(r);i.entangledLanes|=r,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function gt(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var f=31-Qt(c),v=1<<f;v&r|i[f]&r&&(i[f]|=r),c&=~v}}function fe(i,r){var c=r&-r;return c=(c&42)!==0?1:ye(c),(c&(i.suspendedLanes|r))!==0?0:c}function ye(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ce(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Oe(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:dw(i.type))}function je(i,r){var c=X.p;try{return X.p=i,r()}finally{X.p=c}}var Le=Math.random().toString(36).slice(2),it="__reactFiber$"+Le,We="__reactProps$"+Le,Re="__reactContainer$"+Le,Yt="__reactEvents$"+Le,ys="__reactListeners$"+Le,He="__reactHandles$"+Le,jn="__reactResources$"+Le,Ct="__reactMarker$"+Le;function hs(i){delete i[it],delete i[We],delete i[Yt],delete i[ys],delete i[He]}function vs(i){var r=i[it];if(r)return r;for(var c=i.parentNode;c;){if(r=c[Re]||c[it]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=X1(i);i!==null;){if(c=i[it])return c;i=X1(i)}return r}i=c,c=i.parentNode}return null}function fi(i){if(i=i[it]||i[Re]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Pi(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function fs(i){var r=i[jn];return r||(r=i[jn]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Jt(i){i[Ct]=!0}var to=new Set,vc={};function Ws(i,r){na(i,r),na(i+"Capture",r)}function na(i,r){for(vc[i]=r,i=0;i<r.length;i++)to.add(r[i])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},Ad={};function wc(i){return cs.call(Ad,i)?!0:cs.call(_c,i)?!1:bc.test(i)?Ad[i]=!0:(_c[i]=!0,!1)}function el(i,r,c){if(wc(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function Xa(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function pi(i,r,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+f)}}function bs(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Od(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function sm(i,r,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return v.call(this)},set:function(M){c=""+M,b.call(this,M)}}),Object.defineProperty(i,r,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Sc(i){if(!i._valueTracker){var r=Od(i)?"checked":"value";i._valueTracker=sm(i,r,""+i[r])}}function jc(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),f="";return i&&(f=Od(i)?i.checked?"true":"false":i.value),i=f,i!==c?(r.setValue(i),!0):!1}function sa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ka=/[\n"\\]/g;function es(i){return i.replace(Ka,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Za(i,r,c,f,v,b,M,L){i.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.type=M:i.removeAttribute("type"),r!=null?M==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+bs(r)):i.value!==""+bs(r)&&(i.value=""+bs(r)):M!=="submit"&&M!=="reset"||i.removeAttribute("value"),r!=null?ia(i,M,bs(r)):c!=null?ia(i,M,bs(c)):f!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+bs(L):i.removeAttribute("name")}function mi(i,r,c,f,v,b,M,L){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){Sc(i);return}c=c!=null?""+bs(c):"",r=r!=null?""+bs(r):c,L||r===i.value||(i.value=r),i.defaultValue=r}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=L?i.checked:!!f,i.defaultChecked=!!f,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(i.name=M),Sc(i)}function ia(i,r,c){r==="number"&&sa(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Qa(i,r,c,f){if(i=i.options,r){r={};for(var v=0;v<c.length;v++)r["$"+c[v]]=!0;for(c=0;c<i.length;c++)v=r.hasOwnProperty("$"+i[c].value),i[c].selected!==v&&(i[c].selected=v),v&&f&&(i[c].defaultSelected=!0)}else{for(c=""+bs(c),r=null,v=0;v<i.length;v++){if(i[v].value===c){i[v].selected=!0,f&&(i[v].defaultSelected=!0);return}r!==null||i[v].disabled||(r=i[v])}r!==null&&(r.selected=!0)}}function Tc(i,r,c){if(r!=null&&(r=""+bs(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+bs(c):""}function kc(i,r,c,f){if(r==null){if(f!=null){if(c!=null)throw Error(s(92));if(re(f)){if(1<f.length)throw Error(s(93));f=f[0]}c=f}c==null&&(c=""),r=c}c=bs(r),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),Sc(i)}function Li(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var im=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rd(i,r,c){var f=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":f?i.setProperty(r,c):typeof c!="number"||c===0||im.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function Nc(i,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var v in r)f=r[v],r.hasOwnProperty(v)&&c[v]!==f&&Rd(i,v,f)}else for(var b in r)r.hasOwnProperty(b)&&Rd(i,b,r[b])}function Mc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var am=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(i){return Pd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function gi(){}var so=null;function Dc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var aa=null,Ja=null;function io(i){var r=fi(i);if(r&&(i=r.stateNode)){var c=i[We]||null;e:switch(i=r.stateNode,r.type){case"input":if(Za(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+es(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var f=c[r];if(f!==i&&f.form===i.form){var v=f[We]||null;if(!v)throw Error(s(90));Za(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<c.length;r++)f=c[r],f.form===i.form&&jc(f)}break e;case"textarea":Tc(i,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Qa(i,!!c.multiple,r,!1)}}}var Cc=!1;function Ec(i,r,c){if(Cc)return i(r,c);Cc=!0;try{var f=i(r);return f}finally{if(Cc=!1,(aa!==null||Ja!==null)&&(Eh(),aa&&(r=aa,i=Ja,Ja=aa=null,io(r),i)))for(r=0;r<i.length;r++)io(i[r])}}function er(i,r){var c=i.stateNode;if(c===null)return null;var f=c[We]||null;if(f===null)return null;c=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=!1;if(xi)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){tl=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{tl=!1}var zi=null,ra=null,oa=null;function Ld(){if(oa)return oa;var i,r=ra,c=r.length,f,v="value"in zi?zi.value:zi.textContent,b=v.length;for(i=0;i<c&&r[i]===v[i];i++);var M=c-i;for(f=1;f<=M&&r[c-f]===v[b-f];f++);return oa=v.slice(i,1<f?1-f:void 0)}function nr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ao(){return!0}function zd(){return!1}function Hn(i){function r(c,f,v,b,M){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ao:zd,this.isPropagationStopped=zd,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),r}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=Hn(Bi),la=y({},Bi,{view:0,detail:0}),rm=Hn(la),Ac,$s,oo,nl=y({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==oo&&(oo&&i.type==="mousemove"?(Ac=i.screenX-oo.screenX,$s=i.screenY-oo.screenY):$s=Ac=0,oo=i),Ac)},movementY:function(i){return"movementY"in i?i.movementY:$s}}),Bd=Hn(nl),Vd=y({},nl,{dataTransfer:0}),Fd=Hn(Vd),$n=y({},la,{relatedTarget:0}),Oc=Hn($n),om=y({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),lm=Hn(om),cm=y({},Bi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),um=Hn(cm),dm=y({},Bi,{data:0}),Hd=Hn(dm),hm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ca(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=sl[i])?!!r[i]:!1}function sr(){return ca}var fm=y({},la,{key:function(i){if(i.key){var r=hm[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=nr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ud[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(i){return i.type==="keypress"?nr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?nr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Id=Hn(fm),Yd=y({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rc=Hn(Yd),lo=y({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),pm=Hn(lo),mm=y({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gm=Hn(mm),xm=y({},nl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ym=Hn(xm),vm=y({},Bi,{newState:0,oldState:0}),Pc=Hn(vm),bm=[9,13,27,32],ir=xi&&"CompositionEvent"in window,co=null;xi&&"documentMode"in document&&(co=document.documentMode);var Lc=xi&&"TextEvent"in window&&!co,Wd=xi&&(!ir||co&&8<co&&11>=co),$d=" ",zc=!1;function ar(i,r){switch(i){case"keyup":return bm.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yi(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ua=!1;function Bc(i,r){switch(i){case"compositionend":return yi(r);case"keypress":return r.which!==32?null:(zc=!0,$d);case"textInput":return i=r.data,i===$d&&zc?null:i;default:return null}}function _m(i,r){if(ua)return i==="compositionend"||!ir&&ar(i,r)?(i=Ld(),oa=ra=zi=null,ua=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wd&&r.locale!=="ko"?null:r.data;default:return null}}var wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!wm[i.type]:r==="textarea"}function Gd(i,r,c,f){aa?Ja?Ja.push(f):Ja=[f]:aa=f,r=Bh(r,"onChange"),0<r.length&&(c=new ro("onChange","change",null,c,f),i.push({event:c,listeners:r}))}var uo=null,ho=null;function Sm(i){P1(i,0)}function il(i){var r=Pi(i);if(jc(r))return i}function Xd(i,r){if(i==="change")return r}var Kd=!1;if(xi){var x;if(xi){var m="oninput"in document;if(!m){var w=document.createElement("div");w.setAttribute("oninput","return;"),m=typeof w.oninput=="function"}x=m}else x=!1;Kd=x&&(!document.documentMode||9<document.documentMode)}function S(){uo&&(uo.detachEvent("onpropertychange",T),ho=uo=null)}function T(i){if(i.propertyName==="value"&&il(ho)){var r=[];Gd(r,ho,i,Dc(i)),Ec(Sm,r)}}function C(i,r,c){i==="focusin"?(S(),uo=r,ho=c,uo.attachEvent("onpropertychange",T)):i==="focusout"&&S()}function P(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return il(ho)}function z(i,r){if(i==="click")return il(r)}function Y(i,r){if(i==="input"||i==="change")return il(r)}function K(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var W=typeof Object.is=="function"?Object.is:K;function te(i,r){if(W(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),f=Object.keys(r);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!cs.call(r,v)||!W(i[v],r[v]))return!1}return!0}function ve(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ne(i,r){var c=ve(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=r&&f>=r)return{node:c,offset:r-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ve(c)}}function ke(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?ke(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function De(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=sa(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=sa(i.document)}return r}function Ve(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Be=xi&&"documentMode"in document&&11>=document.documentMode,Ye=null,nt=null,ct=null,Ke=!1;function at(i,r,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ke||Ye==null||Ye!==sa(f)||(f=Ye,"selectionStart"in f&&Ve(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ct&&te(ct,f)||(ct=f,f=Bh(nt,"onSelect"),0<f.length&&(r=new ro("onSelect","select",null,r,c),i.push({event:r,listeners:f}),r.target=Ye)))}function pn(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Lt={animationend:pn("Animation","AnimationEnd"),animationiteration:pn("Animation","AnimationIteration"),animationstart:pn("Animation","AnimationStart"),transitionrun:pn("Transition","TransitionRun"),transitionstart:pn("Transition","TransitionStart"),transitioncancel:pn("Transition","TransitionCancel"),transitionend:pn("Transition","TransitionEnd")},qn={},_s={};xi&&(_s=document.createElement("div").style,"AnimationEvent"in window||(delete Lt.animationend.animation,delete Lt.animationiteration.animation,delete Lt.animationstart.animation),"TransitionEvent"in window||delete Lt.transitionend.transition);function Gn(i){if(qn[i])return qn[i];if(!Lt[i])return i;var r=Lt[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in _s)return qn[i]=r[c];return i}var fo=Gn("animationend"),rr=Gn("animationiteration"),fb=Gn("animationstart"),_C=Gn("transitionrun"),wC=Gn("transitionstart"),SC=Gn("transitioncancel"),pb=Gn("transitionend"),mb=new Map,jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jm.push("scrollEnd");function vi(i,r){mb.set(i,r),Ws(r,[i])}var Zd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qs=[],al=0,Tm=0;function Qd(){for(var i=al,r=Tm=al=0;r<i;){var c=qs[r];qs[r++]=null;var f=qs[r];qs[r++]=null;var v=qs[r];qs[r++]=null;var b=qs[r];if(qs[r++]=null,f!==null&&v!==null){var M=f.pending;M===null?v.next=v:(v.next=M.next,M.next=v),f.pending=v}b!==0&&gb(c,v,b)}}function Jd(i,r,c,f){qs[al++]=i,qs[al++]=r,qs[al++]=c,qs[al++]=f,Tm|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function km(i,r,c,f){return Jd(i,r,c,f),eh(i)}function po(i,r){return Jd(i,null,null,r),eh(i)}function gb(i,r,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var v=!1,b=i.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&r!==null&&(v=31-Qt(c),i=b.hiddenUpdates,f=i[v],f===null?i[v]=[r]:f.push(r),r.lane=c|536870912),b):null}function eh(i){if(50<ru)throw ru=0,Pg=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var rl={};function jC(i,r,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(i,r,c,f){return new jC(i,r,c,f)}function Nm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function da(i,r){var c=i.alternate;return c===null?(c=Os(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function xb(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function th(i,r,c,f,v,b){var M=0;if(f=i,typeof i=="function")Nm(i)&&(M=1);else if(typeof i=="string")M=DE(i,c,F.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case J:return i=Os(31,c,r,v),i.elementType=J,i.lanes=b,i;case N:return mo(c.children,v,b,r);case D:M=8,v|=24;break;case R:return i=Os(12,c,r,v|2),i.elementType=R,i.lanes=b,i;case $:return i=Os(13,c,r,v),i.elementType=$,i.lanes=b,i;case I:return i=Os(19,c,r,v),i.elementType=I,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:M=10;break e;case E:M=9;break e;case U:M=11;break e;case O:M=14;break e;case q:M=16,f=null;break e}M=29,c=Error(s(130,i===null?"null":typeof i,"")),f=null}return r=Os(M,c,r,v),r.elementType=i,r.type=f,r.lanes=b,r}function mo(i,r,c,f){return i=Os(7,i,f,r),i.lanes=c,i}function Mm(i,r,c){return i=Os(6,i,null,r),i.lanes=c,i}function yb(i){var r=Os(18,null,null,0);return r.stateNode=i,r}function Dm(i,r,c){return r=Os(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var vb=new WeakMap;function Gs(i,r){if(typeof i=="object"&&i!==null){var c=vb.get(i);return c!==void 0?c:(r={value:i,source:r,stack:Sn(r)},vb.set(i,r),r)}return{value:i,source:r,stack:Sn(r)}}var ol=[],ll=0,nh=null,Vc=0,Xs=[],Ks=0,or=null,Vi=1,Fi="";function ha(i,r){ol[ll++]=Vc,ol[ll++]=nh,nh=i,Vc=r}function bb(i,r,c){Xs[Ks++]=Vi,Xs[Ks++]=Fi,Xs[Ks++]=or,or=i;var f=Vi;i=Fi;var v=32-Qt(f)-1;f&=~(1<<v),c+=1;var b=32-Qt(r)+v;if(30<b){var M=v-v%5;b=(f&(1<<M)-1).toString(32),f>>=M,v-=M,Vi=1<<32-Qt(r)+v|c<<v|f,Fi=b+i}else Vi=1<<b|c<<v|f,Fi=i}function Cm(i){i.return!==null&&(ha(i,1),bb(i,1,0))}function Em(i){for(;i===nh;)nh=ol[--ll],ol[ll]=null,Vc=ol[--ll],ol[ll]=null;for(;i===or;)or=Xs[--Ks],Xs[Ks]=null,Fi=Xs[--Ks],Xs[Ks]=null,Vi=Xs[--Ks],Xs[Ks]=null}function _b(i,r){Xs[Ks++]=Vi,Xs[Ks++]=Fi,Xs[Ks++]=or,Vi=r.id,Fi=r.overflow,or=i}var Xn=null,en=null,Nt=!1,lr=null,Zs=!1,Am=Error(s(519));function cr(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fc(Gs(r,i)),Am}function wb(i){var r=i.stateNode,c=i.type,f=i.memoizedProps;switch(r[it]=i,r[We]=f,c){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(c=0;c<lu.length;c++)vt(lu[c],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":vt("invalid",r),mi(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":vt("invalid",r);break;case"textarea":vt("invalid",r),kc(r,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||f.suppressHydrationWarning===!0||V1(r.textContent,c)?(f.popover!=null&&(vt("beforetoggle",r),vt("toggle",r)),f.onScroll!=null&&vt("scroll",r),f.onScrollEnd!=null&&vt("scrollend",r),f.onClick!=null&&(r.onclick=gi),r=!0):r=!1,r||cr(i,!0)}function Sb(i){for(Xn=i.return;Xn;)switch(Xn.tag){case 5:case 31:case 13:Zs=!1;return;case 27:case 3:Zs=!0;return;default:Xn=Xn.return}}function cl(i){if(i!==Xn)return!1;if(!Nt)return Sb(i),Nt=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Kg(i.type,i.memoizedProps)),c=!c),c&&en&&cr(i),Sb(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));en=G1(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));en=G1(i)}else r===27?(r=en,Sr(i.type)?(i=tx,tx=null,en=i):en=r):en=Xn?Js(i.stateNode.nextSibling):null;return!0}function go(){en=Xn=null,Nt=!1}function Om(){var i=lr;return i!==null&&(Ts===null?Ts=i:Ts.push.apply(Ts,i),lr=null),i}function Fc(i){lr===null?lr=[i]:lr.push(i)}var Rm=V(null),xo=null,fa=null;function ur(i,r,c){pe(Rm,r._currentValue),r._currentValue=c}function pa(i){i._currentValue=Rm.current,ee(Rm)}function Pm(i,r,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),i===c)break;i=i.return}}function Lm(i,r,c,f){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var M=v.child;b=b.firstContext;e:for(;b!==null;){var L=b;b=v;for(var G=0;G<r.length;G++)if(L.context===r[G]){b.lanes|=c,L=b.alternate,L!==null&&(L.lanes|=c),Pm(b.return,c,i),f||(M=null);break e}b=L.next}}else if(v.tag===18){if(M=v.return,M===null)throw Error(s(341));M.lanes|=c,b=M.alternate,b!==null&&(b.lanes|=c),Pm(M,c,i),M=null}else M=v.child;if(M!==null)M.return=v;else for(M=v;M!==null;){if(M===i){M=null;break}if(v=M.sibling,v!==null){v.return=M.return,M=v;break}M=M.return}v=M}}function ul(i,r,c,f){i=null;for(var v=r,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var M=v.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var L=v.type;W(v.pendingProps.value,M.value)||(i!==null?i.push(L):i=[L])}}else if(v===Ie.current){if(M=v.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(fu):i=[fu])}v=v.return}i!==null&&Lm(r,i,c,f),r.flags|=262144}function sh(i){for(i=i.firstContext;i!==null;){if(!W(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function yo(i){xo=i,fa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Kn(i){return jb(xo,i)}function ih(i,r){return xo===null&&yo(i),jb(i,r)}function jb(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},fa===null){if(i===null)throw Error(s(308));fa=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else fa=fa.next=r;return c}var TC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},kC=t.unstable_scheduleCallback,NC=t.unstable_NormalPriority,Cn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zm(){return{controller:new TC,data:new Map,refCount:0}}function Hc(i){i.refCount--,i.refCount===0&&kC(NC,function(){i.controller.abort()})}var Uc=null,Bm=0,dl=0,hl=null;function MC(i,r){if(Uc===null){var c=Uc=[];Bm=0,dl=Hg(),hl={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Bm++,r.then(Tb,Tb),r}function Tb(){if(--Bm===0&&Uc!==null){hl!==null&&(hl.status="fulfilled");var i=Uc;Uc=null,dl=0,hl=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function DC(i,r){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return i.then(function(){f.status="fulfilled",f.value=r;for(var v=0;v<c.length;v++)(0,c[v])(r)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var kb=H.S;H.S=function(i,r){c1=Ut(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&MC(i,r),kb!==null&&kb(i,r)};var vo=V(null);function Vm(){var i=vo.current;return i!==null?i:Xt.pooledCache}function ah(i,r){r===null?pe(vo,vo.current):pe(vo,r.pool)}function Nb(){var i=Vm();return i===null?null:{parent:Cn._currentValue,pool:i}}var fl=Error(s(460)),Fm=Error(s(474)),rh=Error(s(542)),oh={then:function(){}};function Mb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Db(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(gi,gi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Eb(i),i;default:if(typeof r.status=="string")r.then(gi,gi);else{if(i=Xt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(f){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=f}},function(f){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Eb(i),i}throw _o=r,fl}}function bo(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(_o=c,fl):c}}var _o=null;function Cb(){if(_o===null)throw Error(s(459));var i=_o;return _o=null,i}function Eb(i){if(i===fl||i===rh)throw Error(s(483))}var pl=null,Ic=0;function lh(i){var r=Ic;return Ic+=1,pl===null&&(pl=[]),Db(pl,i,r)}function Yc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ch(i,r){throw r.$$typeof===_?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Ab(i){function r(se,Q){if(i){var ce=se.deletions;ce===null?(se.deletions=[Q],se.flags|=16):ce.push(Q)}}function c(se,Q){if(!i)return null;for(;Q!==null;)r(se,Q),Q=Q.sibling;return null}function f(se){for(var Q=new Map;se!==null;)se.key!==null?Q.set(se.key,se):Q.set(se.index,se),se=se.sibling;return Q}function v(se,Q){return se=da(se,Q),se.index=0,se.sibling=null,se}function b(se,Q,ce){return se.index=ce,i?(ce=se.alternate,ce!==null?(ce=ce.index,ce<Q?(se.flags|=67108866,Q):ce):(se.flags|=67108866,Q)):(se.flags|=1048576,Q)}function M(se){return i&&se.alternate===null&&(se.flags|=67108866),se}function L(se,Q,ce,_e){return Q===null||Q.tag!==6?(Q=Mm(ce,se.mode,_e),Q.return=se,Q):(Q=v(Q,ce),Q.return=se,Q)}function G(se,Q,ce,_e){var qe=ce.type;return qe===N?be(se,Q,ce.props.children,_e,ce.key):Q!==null&&(Q.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===q&&bo(qe)===Q.type)?(Q=v(Q,ce.props),Yc(Q,ce),Q.return=se,Q):(Q=th(ce.type,ce.key,ce.props,null,se.mode,_e),Yc(Q,ce),Q.return=se,Q)}function ue(se,Q,ce,_e){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ce.containerInfo||Q.stateNode.implementation!==ce.implementation?(Q=Dm(ce,se.mode,_e),Q.return=se,Q):(Q=v(Q,ce.children||[]),Q.return=se,Q)}function be(se,Q,ce,_e,qe){return Q===null||Q.tag!==7?(Q=mo(ce,se.mode,_e,qe),Q.return=se,Q):(Q=v(Q,ce),Q.return=se,Q)}function we(se,Q,ce){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Mm(""+Q,se.mode,ce),Q.return=se,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case j:return ce=th(Q.type,Q.key,Q.props,null,se.mode,ce),Yc(ce,Q),ce.return=se,ce;case k:return Q=Dm(Q,se.mode,ce),Q.return=se,Q;case q:return Q=bo(Q),we(se,Q,ce)}if(re(Q)||me(Q))return Q=mo(Q,se.mode,ce,null),Q.return=se,Q;if(typeof Q.then=="function")return we(se,lh(Q),ce);if(Q.$$typeof===B)return we(se,ih(se,Q),ce);ch(se,Q)}return null}function he(se,Q,ce,_e){var qe=Q!==null?Q.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return qe!==null?null:L(se,Q,""+ce,_e);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:return ce.key===qe?G(se,Q,ce,_e):null;case k:return ce.key===qe?ue(se,Q,ce,_e):null;case q:return ce=bo(ce),he(se,Q,ce,_e)}if(re(ce)||me(ce))return qe!==null?null:be(se,Q,ce,_e,null);if(typeof ce.then=="function")return he(se,Q,lh(ce),_e);if(ce.$$typeof===B)return he(se,Q,ih(se,ce),_e);ch(se,ce)}return null}function ge(se,Q,ce,_e,qe){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return se=se.get(ce)||null,L(Q,se,""+_e,qe);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case j:return se=se.get(_e.key===null?ce:_e.key)||null,G(Q,se,_e,qe);case k:return se=se.get(_e.key===null?ce:_e.key)||null,ue(Q,se,_e,qe);case q:return _e=bo(_e),ge(se,Q,ce,_e,qe)}if(re(_e)||me(_e))return se=se.get(ce)||null,be(Q,se,_e,qe,null);if(typeof _e.then=="function")return ge(se,Q,ce,lh(_e),qe);if(_e.$$typeof===B)return ge(se,Q,ce,ih(Q,_e),qe);ch(Q,_e)}return null}function Ue(se,Q,ce,_e){for(var qe=null,Et=null,$e=Q,dt=Q=0,jt=null;$e!==null&&dt<ce.length;dt++){$e.index>dt?(jt=$e,$e=null):jt=$e.sibling;var At=he(se,$e,ce[dt],_e);if(At===null){$e===null&&($e=jt);break}i&&$e&&At.alternate===null&&r(se,$e),Q=b(At,Q,dt),Et===null?qe=At:Et.sibling=At,Et=At,$e=jt}if(dt===ce.length)return c(se,$e),Nt&&ha(se,dt),qe;if($e===null){for(;dt<ce.length;dt++)$e=we(se,ce[dt],_e),$e!==null&&(Q=b($e,Q,dt),Et===null?qe=$e:Et.sibling=$e,Et=$e);return Nt&&ha(se,dt),qe}for($e=f($e);dt<ce.length;dt++)jt=ge($e,se,dt,ce[dt],_e),jt!==null&&(i&&jt.alternate!==null&&$e.delete(jt.key===null?dt:jt.key),Q=b(jt,Q,dt),Et===null?qe=jt:Et.sibling=jt,Et=jt);return i&&$e.forEach(function(Mr){return r(se,Mr)}),Nt&&ha(se,dt),qe}function Ze(se,Q,ce,_e){if(ce==null)throw Error(s(151));for(var qe=null,Et=null,$e=Q,dt=Q=0,jt=null,At=ce.next();$e!==null&&!At.done;dt++,At=ce.next()){$e.index>dt?(jt=$e,$e=null):jt=$e.sibling;var Mr=he(se,$e,At.value,_e);if(Mr===null){$e===null&&($e=jt);break}i&&$e&&Mr.alternate===null&&r(se,$e),Q=b(Mr,Q,dt),Et===null?qe=Mr:Et.sibling=Mr,Et=Mr,$e=jt}if(At.done)return c(se,$e),Nt&&ha(se,dt),qe;if($e===null){for(;!At.done;dt++,At=ce.next())At=we(se,At.value,_e),At!==null&&(Q=b(At,Q,dt),Et===null?qe=At:Et.sibling=At,Et=At);return Nt&&ha(se,dt),qe}for($e=f($e);!At.done;dt++,At=ce.next())At=ge($e,se,dt,At.value,_e),At!==null&&(i&&At.alternate!==null&&$e.delete(At.key===null?dt:At.key),Q=b(At,Q,dt),Et===null?qe=At:Et.sibling=At,Et=At);return i&&$e.forEach(function(FE){return r(se,FE)}),Nt&&ha(se,dt),qe}function qt(se,Q,ce,_e){if(typeof ce=="object"&&ce!==null&&ce.type===N&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:e:{for(var qe=ce.key;Q!==null;){if(Q.key===qe){if(qe=ce.type,qe===N){if(Q.tag===7){c(se,Q.sibling),_e=v(Q,ce.props.children),_e.return=se,se=_e;break e}}else if(Q.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===q&&bo(qe)===Q.type){c(se,Q.sibling),_e=v(Q,ce.props),Yc(_e,ce),_e.return=se,se=_e;break e}c(se,Q);break}else r(se,Q);Q=Q.sibling}ce.type===N?(_e=mo(ce.props.children,se.mode,_e,ce.key),_e.return=se,se=_e):(_e=th(ce.type,ce.key,ce.props,null,se.mode,_e),Yc(_e,ce),_e.return=se,se=_e)}return M(se);case k:e:{for(qe=ce.key;Q!==null;){if(Q.key===qe)if(Q.tag===4&&Q.stateNode.containerInfo===ce.containerInfo&&Q.stateNode.implementation===ce.implementation){c(se,Q.sibling),_e=v(Q,ce.children||[]),_e.return=se,se=_e;break e}else{c(se,Q);break}else r(se,Q);Q=Q.sibling}_e=Dm(ce,se.mode,_e),_e.return=se,se=_e}return M(se);case q:return ce=bo(ce),qt(se,Q,ce,_e)}if(re(ce))return Ue(se,Q,ce,_e);if(me(ce)){if(qe=me(ce),typeof qe!="function")throw Error(s(150));return ce=qe.call(ce),Ze(se,Q,ce,_e)}if(typeof ce.then=="function")return qt(se,Q,lh(ce),_e);if(ce.$$typeof===B)return qt(se,Q,ih(se,ce),_e);ch(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Q!==null&&Q.tag===6?(c(se,Q.sibling),_e=v(Q,ce),_e.return=se,se=_e):(c(se,Q),_e=Mm(ce,se.mode,_e),_e.return=se,se=_e),M(se)):c(se,Q)}return function(se,Q,ce,_e){try{Ic=0;var qe=qt(se,Q,ce,_e);return pl=null,qe}catch($e){if($e===fl||$e===rh)throw $e;var Et=Os(29,$e,null,se.mode);return Et.lanes=_e,Et.return=se,Et}}}var wo=Ab(!0),Ob=Ab(!1),dr=!1;function Hm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Um(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function hr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function fr(i,r,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(zt&2)!==0){var v=f.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),f.pending=r,r=eh(i),gb(i,null,c),r}return Jd(i,f,r,c),eh(i)}function Wc(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var f=r.lanes;f&=i.pendingLanes,c|=f,r.lanes=c,gt(i,c)}}function Im(i,r){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?v=b=M:b=b.next=M,c=c.next}while(c!==null);b===null?v=b=r:b=b.next=r}else v=b=r;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var Ym=!1;function $c(){if(Ym){var i=hl;if(i!==null)throw i}}function qc(i,r,c,f){Ym=!1;var v=i.updateQueue;dr=!1;var b=v.firstBaseUpdate,M=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var G=L,ue=G.next;G.next=null,M===null?b=ue:M.next=ue,M=G;var be=i.alternate;be!==null&&(be=be.updateQueue,L=be.lastBaseUpdate,L!==M&&(L===null?be.firstBaseUpdate=ue:L.next=ue,be.lastBaseUpdate=G))}if(b!==null){var we=v.baseState;M=0,be=ue=G=null,L=b;do{var he=L.lane&-536870913,ge=he!==L.lane;if(ge?(St&he)===he:(f&he)===he){he!==0&&he===dl&&(Ym=!0),be!==null&&(be=be.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ue=i,Ze=L;he=r;var qt=c;switch(Ze.tag){case 1:if(Ue=Ze.payload,typeof Ue=="function"){we=Ue.call(qt,we,he);break e}we=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Ze.payload,he=typeof Ue=="function"?Ue.call(qt,we,he):Ue,he==null)break e;we=y({},we,he);break e;case 2:dr=!0}}he=L.callback,he!==null&&(i.flags|=64,ge&&(i.flags|=8192),ge=v.callbacks,ge===null?v.callbacks=[he]:ge.push(he))}else ge={lane:he,tag:L.tag,payload:L.payload,callback:L.callback,next:null},be===null?(ue=be=ge,G=we):be=be.next=ge,M|=he;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;ge=L,L=ge.next,ge.next=null,v.lastBaseUpdate=ge,v.shared.pending=null}}while(!0);be===null&&(G=we),v.baseState=G,v.firstBaseUpdate=ue,v.lastBaseUpdate=be,b===null&&(v.shared.lanes=0),yr|=M,i.lanes=M,i.memoizedState=we}}function Rb(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Pb(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Rb(c[i],r)}var ml=V(null),uh=V(0);function Lb(i,r){i=Sa,pe(uh,i),pe(ml,r),Sa=i|r.baseLanes}function Wm(){pe(uh,Sa),pe(ml,ml.current)}function $m(){Sa=uh.current,ee(ml),ee(uh)}var Rs=V(null),Qs=null;function pr(i){var r=i.alternate;pe(Tn,Tn.current&1),pe(Rs,i),Qs===null&&(r===null||ml.current!==null||r.memoizedState!==null)&&(Qs=i)}function qm(i){pe(Tn,Tn.current),pe(Rs,i),Qs===null&&(Qs=i)}function zb(i){i.tag===22?(pe(Tn,Tn.current),pe(Rs,i),Qs===null&&(Qs=i)):mr()}function mr(){pe(Tn,Tn.current),pe(Rs,Rs.current)}function Ps(i){ee(Rs),Qs===i&&(Qs=null),ee(Tn)}var Tn=V(0);function dh(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Jg(c)||ex(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ma=0,ut=null,Wt=null,En=null,hh=!1,gl=!1,So=!1,fh=0,Gc=0,xl=null,CC=0;function yn(){throw Error(s(321))}function Gm(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!W(i[c],r[c]))return!1;return!0}function Xm(i,r,c,f,v,b){return ma=b,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=i===null||i.memoizedState===null?b_:ug,So=!1,b=c(f,v),So=!1,gl&&(b=Vb(r,c,f,v)),Bb(i),b}function Bb(i){H.H=Zc;var r=Wt!==null&&Wt.next!==null;if(ma=0,En=Wt=ut=null,hh=!1,Gc=0,xl=null,r)throw Error(s(300));i===null||An||(i=i.dependencies,i!==null&&sh(i)&&(An=!0))}function Vb(i,r,c,f){ut=i;var v=0;do{if(gl&&(xl=null),Gc=0,gl=!1,25<=v)throw Error(s(301));if(v+=1,En=Wt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}H.H=__,b=r(c,f)}while(gl);return b}function EC(){var i=H.H,r=i.useState()[0];return r=typeof r.then=="function"?Xc(r):r,i=i.useState()[0],(Wt!==null?Wt.memoizedState:null)!==i&&(ut.flags|=1024),r}function Km(){var i=fh!==0;return fh=0,i}function Zm(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function Qm(i){if(hh){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}hh=!1}ma=0,En=Wt=ut=null,gl=!1,Gc=fh=0,xl=null}function ps(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?ut.memoizedState=En=i:En=En.next=i,En}function kn(){if(Wt===null){var i=ut.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var r=En===null?ut.memoizedState:En.next;if(r!==null)En=r,Wt=i;else{if(i===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},En===null?ut.memoizedState=En=i:En=En.next=i}return En}function ph(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xc(i){var r=Gc;return Gc+=1,xl===null&&(xl=[]),i=Db(xl,i,r),r=ut,(En===null?r.memoizedState:En.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?b_:ug),i}function mh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Xc(i);if(i.$$typeof===B)return Kn(i)}throw Error(s(438,String(i)))}function Jm(i){var r=null,c=ut.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var f=ut.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=ph(),ut.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),f=0;f<i;f++)c[f]=oe;return r.index++,c}function ga(i,r){return typeof r=="function"?r(i):r}function gh(i){var r=kn();return eg(r,Wt,i)}function eg(i,r,c){var f=i.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=c;var v=i.baseQueue,b=f.pending;if(b!==null){if(v!==null){var M=v.next;v.next=b.next,b.next=M}r.baseQueue=v=b,f.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{r=v.next;var L=M=null,G=null,ue=r,be=!1;do{var we=ue.lane&-536870913;if(we!==ue.lane?(St&we)===we:(ma&we)===we){var he=ue.revertLane;if(he===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),we===dl&&(be=!0);else if((ma&he)===he){ue=ue.next,he===dl&&(be=!0);continue}else we={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},G===null?(L=G=we,M=b):G=G.next=we,ut.lanes|=he,yr|=he;we=ue.action,So&&c(b,we),b=ue.hasEagerState?ue.eagerState:c(b,we)}else he={lane:we,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},G===null?(L=G=he,M=b):G=G.next=he,ut.lanes|=we,yr|=we;ue=ue.next}while(ue!==null&&ue!==r);if(G===null?M=b:G.next=L,!W(b,i.memoizedState)&&(An=!0,be&&(c=hl,c!==null)))throw c;i.memoizedState=b,i.baseState=M,i.baseQueue=G,f.lastRenderedState=b}return v===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function tg(i){var r=kn(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var f=c.dispatch,v=c.pending,b=r.memoizedState;if(v!==null){c.pending=null;var M=v=v.next;do b=i(b,M.action),M=M.next;while(M!==v);W(b,r.memoizedState)||(An=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,f]}function Fb(i,r,c){var f=ut,v=kn(),b=Nt;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=r();var M=!W((Wt||v).memoizedState,c);if(M&&(v.memoizedState=c,An=!0),v=v.queue,ig(Ib.bind(null,f,v,i),[i]),v.getSnapshot!==r||M||En!==null&&En.memoizedState.tag&1){if(f.flags|=2048,yl(9,{destroy:void 0},Ub.bind(null,f,v,c,r),null),Xt===null)throw Error(s(349));b||(ma&127)!==0||Hb(f,r,c)}return c}function Hb(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=ut.updateQueue,r===null?(r=ph(),ut.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function Ub(i,r,c,f){r.value=c,r.getSnapshot=f,Yb(r)&&Wb(i)}function Ib(i,r,c){return c(function(){Yb(r)&&Wb(i)})}function Yb(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!W(i,c)}catch{return!0}}function Wb(i){var r=po(i,2);r!==null&&ks(r,i,2)}function ng(i){var r=ps();if(typeof i=="function"){var c=i;if(i=c(),So){xn(!0);try{c()}finally{xn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:i},r}function $b(i,r,c,f){return i.baseState=c,eg(i,Wt,typeof f=="function"?f:ga)}function AC(i,r,c,f,v){if(vh(i))throw Error(s(485));if(i=r.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){b.listeners.push(M)}};H.T!==null?c(!0):b.isTransition=!1,f(b),c=r.pending,c===null?(b.next=r.pending=b,qb(r,b)):(b.next=c.next,r.pending=c.next=b)}}function qb(i,r){var c=r.action,f=r.payload,v=i.state;if(r.isTransition){var b=H.T,M={};H.T=M;try{var L=c(v,f),G=H.S;G!==null&&G(M,L),Gb(i,r,L)}catch(ue){sg(i,r,ue)}finally{b!==null&&M.types!==null&&(b.types=M.types),H.T=b}}else try{b=c(v,f),Gb(i,r,b)}catch(ue){sg(i,r,ue)}}function Gb(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Xb(i,r,f)},function(f){return sg(i,r,f)}):Xb(i,r,c)}function Xb(i,r,c){r.status="fulfilled",r.value=c,Kb(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,qb(i,c)))}function sg(i,r,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=c,Kb(r),r=r.next;while(r!==f)}i.action=null}function Kb(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Zb(i,r){return r}function Qb(i,r){if(Nt){var c=Xt.formState;if(c!==null){e:{var f=ut;if(Nt){if(en){t:{for(var v=en,b=Zs;v.nodeType!==8;){if(!b){v=null;break t}if(v=Js(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){en=Js(v.nextSibling),f=v.data==="F!";break e}}cr(f)}f=!1}f&&(r=c[0])}}return c=ps(),c.memoizedState=c.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zb,lastRenderedState:r},c.queue=f,c=x_.bind(null,ut,f),f.dispatch=c,f=ng(!1),b=cg.bind(null,ut,!1,f.queue),f=ps(),v={state:r,dispatch:null,action:i,pending:null},f.queue=v,c=AC.bind(null,ut,v,b,c),v.dispatch=c,f.memoizedState=i,[r,c,!1]}function Jb(i){var r=kn();return e_(r,Wt,i)}function e_(i,r,c){if(r=eg(i,r,Zb)[0],i=gh(ga)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=Xc(r)}catch(M){throw M===fl?rh:M}else f=r;r=kn();var v=r.queue,b=v.dispatch;return c!==r.memoizedState&&(ut.flags|=2048,yl(9,{destroy:void 0},OC.bind(null,v,c),null)),[f,b,i]}function OC(i,r){i.action=r}function t_(i){var r=kn(),c=Wt;if(c!==null)return e_(r,c,i);kn(),r=r.memoizedState,c=kn();var f=c.queue.dispatch;return c.memoizedState=i,[r,f,!1]}function yl(i,r,c,f){return i={tag:i,create:c,deps:f,inst:r,next:null},r=ut.updateQueue,r===null&&(r=ph(),ut.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,r.lastEffect=i),i}function n_(){return kn().memoizedState}function xh(i,r,c,f){var v=ps();ut.flags|=i,v.memoizedState=yl(1|r,{destroy:void 0},c,f===void 0?null:f)}function yh(i,r,c,f){var v=kn();f=f===void 0?null:f;var b=v.memoizedState.inst;Wt!==null&&f!==null&&Gm(f,Wt.memoizedState.deps)?v.memoizedState=yl(r,b,c,f):(ut.flags|=i,v.memoizedState=yl(1|r,b,c,f))}function s_(i,r){xh(8390656,8,i,r)}function ig(i,r){yh(2048,8,i,r)}function RC(i){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=ph(),ut.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function i_(i){var r=kn().memoizedState;return RC({ref:r,nextImpl:i}),function(){if((zt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function a_(i,r){return yh(4,2,i,r)}function r_(i,r){return yh(4,4,i,r)}function o_(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function l_(i,r,c){c=c!=null?c.concat([i]):null,yh(4,4,o_.bind(null,r,i),c)}function ag(){}function c_(i,r){var c=kn();r=r===void 0?null:r;var f=c.memoizedState;return r!==null&&Gm(r,f[1])?f[0]:(c.memoizedState=[i,r],i)}function u_(i,r){var c=kn();r=r===void 0?null:r;var f=c.memoizedState;if(r!==null&&Gm(r,f[1]))return f[0];if(f=i(),So){xn(!0);try{i()}finally{xn(!1)}}return c.memoizedState=[f,r],f}function rg(i,r,c){return c===void 0||(ma&1073741824)!==0&&(St&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=d1(),ut.lanes|=i,yr|=i,c)}function d_(i,r,c,f){return W(c,r)?c:ml.current!==null?(i=rg(i,c,f),W(i,r)||(An=!0),i):(ma&42)===0||(ma&1073741824)!==0&&(St&261930)===0?(An=!0,i.memoizedState=c):(i=d1(),ut.lanes|=i,yr|=i,r)}function h_(i,r,c,f,v){var b=X.p;X.p=b!==0&&8>b?b:8;var M=H.T,L={};H.T=L,cg(i,!1,r,c);try{var G=v(),ue=H.S;if(ue!==null&&ue(L,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var be=DC(G,f);Kc(i,r,be,Bs(i))}else Kc(i,r,f,Bs(i))}catch(we){Kc(i,r,{then:function(){},status:"rejected",reason:we},Bs())}finally{X.p=b,M!==null&&L.types!==null&&(M.types=L.types),H.T=M}}function PC(){}function og(i,r,c,f){if(i.tag!==5)throw Error(s(476));var v=f_(i).queue;h_(i,v,r,ne,c===null?PC:function(){return p_(i),c(f)})}function f_(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:ne},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function p_(i){var r=f_(i);r.next===null&&(r=i.alternate.memoizedState),Kc(i,r.next.queue,{},Bs())}function lg(){return Kn(fu)}function m_(){return kn().memoizedState}function g_(){return kn().memoizedState}function LC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Bs();i=hr(c);var f=fr(r,i,c);f!==null&&(ks(f,r,c),Wc(f,r,c)),r={cache:zm()},i.payload=r;return}r=r.return}}function zC(i,r,c){var f=Bs();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},vh(i)?y_(r,c):(c=km(i,r,c,f),c!==null&&(ks(c,i,f),v_(c,r,f)))}function x_(i,r,c){var f=Bs();Kc(i,r,c,f)}function Kc(i,r,c,f){var v={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(vh(i))y_(r,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var M=r.lastRenderedState,L=b(M,c);if(v.hasEagerState=!0,v.eagerState=L,W(L,M))return Jd(i,r,v,0),Xt===null&&Qd(),!1}catch{}if(c=km(i,r,v,f),c!==null)return ks(c,i,f),v_(c,r,f),!0}return!1}function cg(i,r,c,f){if(f={lane:2,revertLane:Hg(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},vh(i)){if(r)throw Error(s(479))}else r=km(i,c,f,2),r!==null&&ks(r,i,2)}function vh(i){var r=i.alternate;return i===ut||r!==null&&r===ut}function y_(i,r){gl=hh=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function v_(i,r,c){if((c&4194048)!==0){var f=r.lanes;f&=i.pendingLanes,c|=f,r.lanes=c,gt(i,c)}}var Zc={readContext:Kn,use:mh,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn};Zc.useEffectEvent=yn;var b_={readContext:Kn,use:mh,useCallback:function(i,r){return ps().memoizedState=[i,r===void 0?null:r],i},useContext:Kn,useEffect:s_,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,xh(4194308,4,o_.bind(null,r,i),c)},useLayoutEffect:function(i,r){return xh(4194308,4,i,r)},useInsertionEffect:function(i,r){xh(4,2,i,r)},useMemo:function(i,r){var c=ps();r=r===void 0?null:r;var f=i();if(So){xn(!0);try{i()}finally{xn(!1)}}return c.memoizedState=[f,r],f},useReducer:function(i,r,c){var f=ps();if(c!==void 0){var v=c(r);if(So){xn(!0);try{c(r)}finally{xn(!1)}}}else v=r;return f.memoizedState=f.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},f.queue=i,i=i.dispatch=zC.bind(null,ut,i),[f.memoizedState,i]},useRef:function(i){var r=ps();return i={current:i},r.memoizedState=i},useState:function(i){i=ng(i);var r=i.queue,c=x_.bind(null,ut,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:ag,useDeferredValue:function(i,r){var c=ps();return rg(c,i,r)},useTransition:function(){var i=ng(!1);return i=h_.bind(null,ut,i.queue,!0,!1),ps().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var f=ut,v=ps();if(Nt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),Xt===null)throw Error(s(349));(St&127)!==0||Hb(f,r,c)}v.memoizedState=c;var b={value:c,getSnapshot:r};return v.queue=b,s_(Ib.bind(null,f,b,i),[i]),f.flags|=2048,yl(9,{destroy:void 0},Ub.bind(null,f,b,c,r),null),c},useId:function(){var i=ps(),r=Xt.identifierPrefix;if(Nt){var c=Fi,f=Vi;c=(f&~(1<<32-Qt(f)-1)).toString(32)+c,r="_"+r+"R_"+c,c=fh++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=CC++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:lg,useFormState:Qb,useActionState:Qb,useOptimistic:function(i){var r=ps();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=cg.bind(null,ut,!0,c),c.dispatch=r,[i,r]},useMemoCache:Jm,useCacheRefresh:function(){return ps().memoizedState=LC.bind(null,ut)},useEffectEvent:function(i){var r=ps(),c={impl:i};return r.memoizedState=c,function(){if((zt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},ug={readContext:Kn,use:mh,useCallback:c_,useContext:Kn,useEffect:ig,useImperativeHandle:l_,useInsertionEffect:a_,useLayoutEffect:r_,useMemo:u_,useReducer:gh,useRef:n_,useState:function(){return gh(ga)},useDebugValue:ag,useDeferredValue:function(i,r){var c=kn();return d_(c,Wt.memoizedState,i,r)},useTransition:function(){var i=gh(ga)[0],r=kn().memoizedState;return[typeof i=="boolean"?i:Xc(i),r]},useSyncExternalStore:Fb,useId:m_,useHostTransitionStatus:lg,useFormState:Jb,useActionState:Jb,useOptimistic:function(i,r){var c=kn();return $b(c,Wt,i,r)},useMemoCache:Jm,useCacheRefresh:g_};ug.useEffectEvent=i_;var __={readContext:Kn,use:mh,useCallback:c_,useContext:Kn,useEffect:ig,useImperativeHandle:l_,useInsertionEffect:a_,useLayoutEffect:r_,useMemo:u_,useReducer:tg,useRef:n_,useState:function(){return tg(ga)},useDebugValue:ag,useDeferredValue:function(i,r){var c=kn();return Wt===null?rg(c,i,r):d_(c,Wt.memoizedState,i,r)},useTransition:function(){var i=tg(ga)[0],r=kn().memoizedState;return[typeof i=="boolean"?i:Xc(i),r]},useSyncExternalStore:Fb,useId:m_,useHostTransitionStatus:lg,useFormState:t_,useActionState:t_,useOptimistic:function(i,r){var c=kn();return Wt!==null?$b(c,Wt,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Jm,useCacheRefresh:g_};__.useEffectEvent=i_;function dg(i,r,c,f){r=i.memoizedState,c=c(f,r),c=c==null?r:y({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var hg={enqueueSetState:function(i,r,c){i=i._reactInternals;var f=Bs(),v=hr(f);v.payload=r,c!=null&&(v.callback=c),r=fr(i,v,f),r!==null&&(ks(r,i,f),Wc(r,i,f))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var f=Bs(),v=hr(f);v.tag=1,v.payload=r,c!=null&&(v.callback=c),r=fr(i,v,f),r!==null&&(ks(r,i,f),Wc(r,i,f))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Bs(),f=hr(c);f.tag=2,r!=null&&(f.callback=r),r=fr(i,f,c),r!==null&&(ks(r,i,c),Wc(r,i,c))}};function w_(i,r,c,f,v,b,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,M):r.prototype&&r.prototype.isPureReactComponent?!te(c,f)||!te(v,b):!0}function S_(i,r,c,f){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,f),r.state!==i&&hg.enqueueReplaceState(r,r.state,null)}function jo(i,r){var c=r;if("ref"in r){c={};for(var f in r)f!=="ref"&&(c[f]=r[f])}if(i=i.defaultProps){c===r&&(c=y({},c));for(var v in i)c[v]===void 0&&(c[v]=i[v])}return c}function j_(i){Zd(i)}function T_(i){console.error(i)}function k_(i){Zd(i)}function bh(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function N_(i,r,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function fg(i,r,c){return c=hr(c),c.tag=3,c.payload={element:null},c.callback=function(){bh(i,r)},c}function M_(i){return i=hr(i),i.tag=3,i}function D_(i,r,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;i.payload=function(){return v(b)},i.callback=function(){N_(r,c,f)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(i.callback=function(){N_(r,c,f),typeof v!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var L=f.stack;this.componentDidCatch(f.value,{componentStack:L!==null?L:""})})}function BC(i,r,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=c.alternate,r!==null&&ul(r,c,v,!0),c=Rs.current,c!==null){switch(c.tag){case 31:case 13:return Qs===null?Ah():c.alternate===null&&vn===0&&(vn=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===oh?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([f]):r.add(f),Bg(i,f,v)),!1;case 22:return c.flags|=65536,f===oh?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([f]):c.add(f)),Bg(i,f,v)),!1}throw Error(s(435,c.tag))}return Bg(i,f,v),Ah(),!1}if(Nt)return r=Rs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,f!==Am&&(i=Error(s(422),{cause:f}),Fc(Gs(i,c)))):(f!==Am&&(r=Error(s(423),{cause:f}),Fc(Gs(r,c))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,f=Gs(f,c),v=fg(i.stateNode,f,v),Im(i,v),vn!==4&&(vn=2)),!1;var b=Error(s(520),{cause:f});if(b=Gs(b,c),au===null?au=[b]:au.push(b),vn!==4&&(vn=2),r===null)return!0;f=Gs(f,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=v&-v,c.lanes|=i,i=fg(c.stateNode,f,i),Im(c,i),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vr===null||!vr.has(b))))return c.flags|=65536,v&=-v,c.lanes|=v,v=M_(v),D_(v,i,c,f),Im(c,v),!1}c=c.return}while(c!==null);return!1}var pg=Error(s(461)),An=!1;function Zn(i,r,c,f){r.child=i===null?Ob(r,null,c,f):wo(r,i.child,c,f)}function C_(i,r,c,f,v){c=c.render;var b=r.ref;if("ref"in f){var M={};for(var L in f)L!=="ref"&&(M[L]=f[L])}else M=f;return yo(r),f=Xm(i,r,c,M,b,v),L=Km(),i!==null&&!An?(Zm(i,r,v),xa(i,r,v)):(Nt&&L&&Cm(r),r.flags|=1,Zn(i,r,f,v),r.child)}function E_(i,r,c,f,v){if(i===null){var b=c.type;return typeof b=="function"&&!Nm(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,A_(i,r,b,f,v)):(i=th(c.type,null,f,r,r.mode,v),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!wg(i,v)){var M=b.memoizedProps;if(c=c.compare,c=c!==null?c:te,c(M,f)&&i.ref===r.ref)return xa(i,r,v)}return r.flags|=1,i=da(b,f),i.ref=r.ref,i.return=r,r.child=i}function A_(i,r,c,f,v){if(i!==null){var b=i.memoizedProps;if(te(b,f)&&i.ref===r.ref)if(An=!1,r.pendingProps=f=b,wg(i,v))(i.flags&131072)!==0&&(An=!0);else return r.lanes=i.lanes,xa(i,r,v)}return mg(i,r,c,f,v)}function O_(i,r,c,f){var v=f.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(f=r.child=i.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~b}else f=0,r.child=null;return R_(i,r,b,c,f)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&ah(r,b!==null?b.cachePool:null),b!==null?Lb(r,b):Wm(),zb(r);else return f=r.lanes=536870912,R_(i,r,b!==null?b.baseLanes|c:c,c,f)}else b!==null?(ah(r,b.cachePool),Lb(r,b),mr(),r.memoizedState=null):(i!==null&&ah(r,null),Wm(),mr());return Zn(i,r,v,c),r.child}function Qc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function R_(i,r,c,f,v){var b=Vm();return b=b===null?null:{parent:Cn._currentValue,pool:b},r.memoizedState={baseLanes:c,cachePool:b},i!==null&&ah(r,null),Wm(),zb(r),i!==null&&ul(i,r,f,!0),r.childLanes=v,null}function _h(i,r){return r=Sh({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function P_(i,r,c){return wo(r,i.child,null,c),i=_h(r,r.pendingProps),i.flags|=2,Ps(r),r.memoizedState=null,i}function VC(i,r,c){var f=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Nt){if(f.mode==="hidden")return i=_h(r,f),r.lanes=536870912,Qc(null,i);if(qm(r),(i=en)?(i=q1(i,Zs),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:or!==null?{id:Vi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},c=yb(i),c.return=r,r.child=c,Xn=r,en=null)):i=null,i===null)throw cr(r);return r.lanes=536870912,null}return _h(r,f)}var b=i.memoizedState;if(b!==null){var M=b.dehydrated;if(qm(r),v)if(r.flags&256)r.flags&=-257,r=P_(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(An||ul(i,r,c,!1),v=(c&i.childLanes)!==0,An||v){if(f=Xt,f!==null&&(M=fe(f,c),M!==0&&M!==b.retryLane))throw b.retryLane=M,po(i,M),ks(f,i,M),pg;Ah(),r=P_(i,r,c)}else i=b.treeContext,en=Js(M.nextSibling),Xn=r,Nt=!0,lr=null,Zs=!1,i!==null&&_b(r,i),r=_h(r,f),r.flags|=4096;return r}return i=da(i.child,{mode:f.mode,children:f.children}),i.ref=r.ref,r.child=i,i.return=r,i}function wh(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function mg(i,r,c,f,v){return yo(r),c=Xm(i,r,c,f,void 0,v),f=Km(),i!==null&&!An?(Zm(i,r,v),xa(i,r,v)):(Nt&&f&&Cm(r),r.flags|=1,Zn(i,r,c,v),r.child)}function L_(i,r,c,f,v,b){return yo(r),r.updateQueue=null,c=Vb(r,f,c,v),Bb(i),f=Km(),i!==null&&!An?(Zm(i,r,b),xa(i,r,b)):(Nt&&f&&Cm(r),r.flags|=1,Zn(i,r,c,b),r.child)}function z_(i,r,c,f,v){if(yo(r),r.stateNode===null){var b=rl,M=c.contextType;typeof M=="object"&&M!==null&&(b=Kn(M)),b=new c(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=hg,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},Hm(r),M=c.contextType,b.context=typeof M=="object"&&M!==null?Kn(M):rl,b.state=r.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(dg(r,c,M,f),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(M=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),M!==b.state&&hg.enqueueReplaceState(b,b.state,null),qc(r,f,b,v),$c(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(i===null){b=r.stateNode;var L=r.memoizedProps,G=jo(c,L);b.props=G;var ue=b.context,be=c.contextType;M=rl,typeof be=="object"&&be!==null&&(M=Kn(be));var we=c.getDerivedStateFromProps;be=typeof we=="function"||typeof b.getSnapshotBeforeUpdate=="function",L=r.pendingProps!==L,be||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(L||ue!==M)&&S_(r,b,f,M),dr=!1;var he=r.memoizedState;b.state=he,qc(r,f,b,v),$c(),ue=r.memoizedState,L||he!==ue||dr?(typeof we=="function"&&(dg(r,c,we,f),ue=r.memoizedState),(G=dr||w_(r,c,G,f,he,ue,M))?(be||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=ue),b.props=f,b.state=ue,b.context=M,f=G):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,Um(i,r),M=r.memoizedProps,be=jo(c,M),b.props=be,we=r.pendingProps,he=b.context,ue=c.contextType,G=rl,typeof ue=="object"&&ue!==null&&(G=Kn(ue)),L=c.getDerivedStateFromProps,(ue=typeof L=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==we||he!==G)&&S_(r,b,f,G),dr=!1,he=r.memoizedState,b.state=he,qc(r,f,b,v),$c();var ge=r.memoizedState;M!==we||he!==ge||dr||i!==null&&i.dependencies!==null&&sh(i.dependencies)?(typeof L=="function"&&(dg(r,c,L,f),ge=r.memoizedState),(be=dr||w_(r,c,be,f,he,ge,G)||i!==null&&i.dependencies!==null&&sh(i.dependencies))?(ue||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ge,G),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ge,G)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===i.memoizedProps&&he===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&he===i.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=ge),b.props=f,b.state=ge,b.context=G,f=be):(typeof b.componentDidUpdate!="function"||M===i.memoizedProps&&he===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&he===i.memoizedState||(r.flags|=1024),f=!1)}return b=f,wh(i,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&f?(r.child=wo(r,i.child,null,v),r.child=wo(r,null,c,v)):Zn(i,r,c,v),r.memoizedState=b.state,i=r.child):i=xa(i,r,v),i}function B_(i,r,c,f){return go(),r.flags|=256,Zn(i,r,c,f),r.child}var gg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xg(i){return{baseLanes:i,cachePool:Nb()}}function yg(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=zs),i}function V_(i,r,c){var f=r.pendingProps,v=!1,b=(r.flags&128)!==0,M;if((M=b)||(M=i!==null&&i.memoizedState===null?!1:(Tn.current&2)!==0),M&&(v=!0,r.flags&=-129),M=(r.flags&32)!==0,r.flags&=-33,i===null){if(Nt){if(v?pr(r):mr(),(i=en)?(i=q1(i,Zs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:or!==null?{id:Vi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},c=yb(i),c.return=r,r.child=c,Xn=r,en=null)):i=null,i===null)throw cr(r);return ex(i)?r.lanes=32:r.lanes=536870912,null}var L=f.children;return f=f.fallback,v?(mr(),v=r.mode,L=Sh({mode:"hidden",children:L},v),f=mo(f,v,c,null),L.return=r,f.return=r,L.sibling=f,r.child=L,f=r.child,f.memoizedState=xg(c),f.childLanes=yg(i,M,c),r.memoizedState=gg,Qc(null,f)):(pr(r),vg(r,L))}var G=i.memoizedState;if(G!==null&&(L=G.dehydrated,L!==null)){if(b)r.flags&256?(pr(r),r.flags&=-257,r=bg(i,r,c)):r.memoizedState!==null?(mr(),r.child=i.child,r.flags|=128,r=null):(mr(),L=f.fallback,v=r.mode,f=Sh({mode:"visible",children:f.children},v),L=mo(L,v,c,null),L.flags|=2,f.return=r,L.return=r,f.sibling=L,r.child=f,wo(r,i.child,null,c),f=r.child,f.memoizedState=xg(c),f.childLanes=yg(i,M,c),r.memoizedState=gg,r=Qc(null,f));else if(pr(r),ex(L)){if(M=L.nextSibling&&L.nextSibling.dataset,M)var ue=M.dgst;M=ue,f=Error(s(419)),f.stack="",f.digest=M,Fc({value:f,source:null,stack:null}),r=bg(i,r,c)}else if(An||ul(i,r,c,!1),M=(c&i.childLanes)!==0,An||M){if(M=Xt,M!==null&&(f=fe(M,c),f!==0&&f!==G.retryLane))throw G.retryLane=f,po(i,f),ks(M,i,f),pg;Jg(L)||Ah(),r=bg(i,r,c)}else Jg(L)?(r.flags|=192,r.child=i.child,r=null):(i=G.treeContext,en=Js(L.nextSibling),Xn=r,Nt=!0,lr=null,Zs=!1,i!==null&&_b(r,i),r=vg(r,f.children),r.flags|=4096);return r}return v?(mr(),L=f.fallback,v=r.mode,G=i.child,ue=G.sibling,f=da(G,{mode:"hidden",children:f.children}),f.subtreeFlags=G.subtreeFlags&65011712,ue!==null?L=da(ue,L):(L=mo(L,v,c,null),L.flags|=2),L.return=r,f.return=r,f.sibling=L,r.child=f,Qc(null,f),f=r.child,L=i.child.memoizedState,L===null?L=xg(c):(v=L.cachePool,v!==null?(G=Cn._currentValue,v=v.parent!==G?{parent:G,pool:G}:v):v=Nb(),L={baseLanes:L.baseLanes|c,cachePool:v}),f.memoizedState=L,f.childLanes=yg(i,M,c),r.memoizedState=gg,Qc(i.child,f)):(pr(r),c=i.child,i=c.sibling,c=da(c,{mode:"visible",children:f.children}),c.return=r,c.sibling=null,i!==null&&(M=r.deletions,M===null?(r.deletions=[i],r.flags|=16):M.push(i)),r.child=c,r.memoizedState=null,c)}function vg(i,r){return r=Sh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Sh(i,r){return i=Os(22,i,null,r),i.lanes=0,i}function bg(i,r,c){return wo(r,i.child,null,c),i=vg(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function F_(i,r,c){i.lanes|=r;var f=i.alternate;f!==null&&(f.lanes|=r),Pm(i.return,r,c)}function _g(i,r,c,f,v,b){var M=i.memoizedState;M===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v,treeForkCount:b}:(M.isBackwards=r,M.rendering=null,M.renderingStartTime=0,M.last=f,M.tail=c,M.tailMode=v,M.treeForkCount=b)}function H_(i,r,c){var f=r.pendingProps,v=f.revealOrder,b=f.tail;f=f.children;var M=Tn.current,L=(M&2)!==0;if(L?(M=M&1|2,r.flags|=128):M&=1,pe(Tn,M),Zn(i,r,f,c),f=Nt?Vc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&F_(i,c,r);else if(i.tag===19)F_(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(c=r.child,v=null;c!==null;)i=c.alternate,i!==null&&dh(i)===null&&(v=c),c=c.sibling;c=v,c===null?(v=r.child,r.child=null):(v=c.sibling,c.sibling=null),_g(r,!1,v,c,b,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=r.child,r.child=null;v!==null;){if(i=v.alternate,i!==null&&dh(i)===null){r.child=v;break}i=v.sibling,v.sibling=c,c=v,v=i}_g(r,!0,c,null,b,f);break;case"together":_g(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function xa(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),yr|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(ul(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,c=da(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=da(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function wg(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&sh(i)))}function FC(i,r,c){switch(r.tag){case 3:tt(r,r.stateNode.containerInfo),ur(r,Cn,i.memoizedState.cache),go();break;case 27:case 5:ft(r);break;case 4:tt(r,r.stateNode.containerInfo);break;case 10:ur(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,qm(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(pr(r),r.flags|=128,null):(c&r.child.childLanes)!==0?V_(i,r,c):(pr(r),i=xa(i,r,c),i!==null?i.sibling:null);pr(r);break;case 19:var v=(i.flags&128)!==0;if(f=(c&r.childLanes)!==0,f||(ul(i,r,c,!1),f=(c&r.childLanes)!==0),v){if(f)return H_(i,r,c);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),pe(Tn,Tn.current),f)break;return null;case 22:return r.lanes=0,O_(i,r,c,r.pendingProps);case 24:ur(r,Cn,i.memoizedState.cache)}return xa(i,r,c)}function U_(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)An=!0;else{if(!wg(i,c)&&(r.flags&128)===0)return An=!1,FC(i,r,c);An=(i.flags&131072)!==0}else An=!1,Nt&&(r.flags&1048576)!==0&&bb(r,Vc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var f=r.pendingProps;if(i=bo(r.elementType),r.type=i,typeof i=="function")Nm(i)?(f=jo(i,f),r.tag=1,r=z_(null,r,i,f,c)):(r.tag=0,r=mg(null,r,i,f,c));else{if(i!=null){var v=i.$$typeof;if(v===U){r.tag=11,r=C_(null,r,i,f,c);break e}else if(v===O){r.tag=14,r=E_(null,r,i,f,c);break e}}throw r=Z(i)||i,Error(s(306,r,""))}}return r;case 0:return mg(i,r,r.type,r.pendingProps,c);case 1:return f=r.type,v=jo(f,r.pendingProps),z_(i,r,f,v,c);case 3:e:{if(tt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));f=r.pendingProps;var b=r.memoizedState;v=b.element,Um(i,r),qc(r,f,null,c);var M=r.memoizedState;if(f=M.cache,ur(r,Cn,f),f!==b.cache&&Lm(r,[Cn],c,!0),$c(),f=M.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:M.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=B_(i,r,f,c);break e}else if(f!==v){v=Gs(Error(s(424)),r),Fc(v),r=B_(i,r,f,c);break e}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,en=Js(i.firstChild),Xn=r,Nt=!0,lr=null,Zs=!0,c=Ob(r,null,f,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(go(),f===v){r=xa(i,r,c);break e}Zn(i,r,f,c)}r=r.child}return r;case 26:return wh(i,r),i===null?(c=J1(r.type,null,r.pendingProps,null))?r.memoizedState=c:Nt||(c=r.type,i=r.pendingProps,f=Vh(Se.current).createElement(c),f[it]=r,f[We]=i,Qn(f,c,i),Jt(f),r.stateNode=f):r.memoizedState=J1(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return ft(r),i===null&&Nt&&(f=r.stateNode=K1(r.type,r.pendingProps,Se.current),Xn=r,Zs=!0,v=en,Sr(r.type)?(tx=v,en=Js(f.firstChild)):en=v),Zn(i,r,r.pendingProps.children,c),wh(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Nt&&((v=f=en)&&(f=gE(f,r.type,r.pendingProps,Zs),f!==null?(r.stateNode=f,Xn=r,en=Js(f.firstChild),Zs=!1,v=!0):v=!1),v||cr(r)),ft(r),v=r.type,b=r.pendingProps,M=i!==null?i.memoizedProps:null,f=b.children,Kg(v,b)?f=null:M!==null&&Kg(v,M)&&(r.flags|=32),r.memoizedState!==null&&(v=Xm(i,r,EC,null,null,c),fu._currentValue=v),wh(i,r),Zn(i,r,f,c),r.child;case 6:return i===null&&Nt&&((i=c=en)&&(c=xE(c,r.pendingProps,Zs),c!==null?(r.stateNode=c,Xn=r,en=null,i=!0):i=!1),i||cr(r)),null;case 13:return V_(i,r,c);case 4:return tt(r,r.stateNode.containerInfo),f=r.pendingProps,i===null?r.child=wo(r,null,f,c):Zn(i,r,f,c),r.child;case 11:return C_(i,r,r.type,r.pendingProps,c);case 7:return Zn(i,r,r.pendingProps,c),r.child;case 8:return Zn(i,r,r.pendingProps.children,c),r.child;case 12:return Zn(i,r,r.pendingProps.children,c),r.child;case 10:return f=r.pendingProps,ur(r,r.type,f.value),Zn(i,r,f.children,c),r.child;case 9:return v=r.type._context,f=r.pendingProps.children,yo(r),v=Kn(v),f=f(v),r.flags|=1,Zn(i,r,f,c),r.child;case 14:return E_(i,r,r.type,r.pendingProps,c);case 15:return A_(i,r,r.type,r.pendingProps,c);case 19:return H_(i,r,c);case 31:return VC(i,r,c);case 22:return O_(i,r,c,r.pendingProps);case 24:return yo(r),f=Kn(Cn),i===null?(v=Vm(),v===null&&(v=Xt,b=zm(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=c),v=b),r.memoizedState={parent:f,cache:v},Hm(r),ur(r,Cn,v)):((i.lanes&c)!==0&&(Um(i,r),qc(r,null,null,c),$c()),v=i.memoizedState,b=r.memoizedState,v.parent!==f?(v={parent:f,cache:f},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),ur(r,Cn,f)):(f=b.cache,ur(r,Cn,f),f!==v.cache&&Lm(r,[Cn],c,!0))),Zn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ya(i){i.flags|=4}function Sg(i,r,c,f,v){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(m1())i.flags|=8192;else throw _o=oh,Fm}else i.flags&=-16777217}function I_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!iw(r))if(m1())i.flags|=8192;else throw _o=oh,Fm}function jh(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Oi():536870912,i.lanes|=r,wl|=r)}function Jc(i,r){if(!Nt)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function tn(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(r)for(var v=i.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=f,i.childLanes=c,r}function HC(i,r,c){var f=r.pendingProps;switch(Em(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(r),null;case 1:return tn(r),null;case 3:return c=r.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),pa(Cn),Te(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(cl(r)?ya(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Om())),tn(r),null;case 26:var v=r.type,b=r.memoizedState;return i===null?(ya(r),b!==null?(tn(r),I_(r,b)):(tn(r),Sg(r,v,null,f,c))):b?b!==i.memoizedState?(ya(r),tn(r),I_(r,b)):(tn(r),r.flags&=-16777217):(i=i.memoizedProps,i!==f&&ya(r),tn(r),Sg(r,v,i,f,c)),null;case 27:if(xt(r),c=Se.current,v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&ya(r);else{if(!f){if(r.stateNode===null)throw Error(s(166));return tn(r),null}i=F.current,cl(r)?wb(r):(i=K1(v,f,c),r.stateNode=i,ya(r))}return tn(r),null;case 5:if(xt(r),v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&ya(r);else{if(!f){if(r.stateNode===null)throw Error(s(166));return tn(r),null}if(b=F.current,cl(r))wb(r);else{var M=Vh(Se.current);switch(b){case 1:b=M.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=M.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=M.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?M.createElement("select",{is:f.is}):M.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?M.createElement(v,{is:f.is}):M.createElement(v)}}b[it]=r,b[We]=f;e:for(M=r.child;M!==null;){if(M.tag===5||M.tag===6)b.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===r)break e;for(;M.sibling===null;){if(M.return===null||M.return===r)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}r.stateNode=b;e:switch(Qn(b,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ya(r)}}return tn(r),Sg(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==f&&ya(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(s(166));if(i=Se.current,cl(r)){if(i=r.stateNode,c=r.memoizedProps,f=null,v=Xn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}i[it]=r,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||V1(i.nodeValue,c)),i||cr(r,!0)}else i=Vh(i).createTextNode(f),i[it]=r,r.stateNode=i}return tn(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(f=cl(r),c!==null){if(i===null){if(!f)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[it]=r}else go(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),i=!1}else c=Om(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(Ps(r),r):(Ps(r),null);if((r.flags&128)!==0)throw Error(s(558))}return tn(r),null;case 13:if(f=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=cl(r),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(s(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[it]=r}else go(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),v=!1}else v=Om(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Ps(r),r):(Ps(r),null)}return Ps(r),(r.flags&128)!==0?(r.lanes=c,r):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=r.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),jh(r,r.updateQueue),tn(r),null);case 4:return Te(),i===null&&Wg(r.stateNode.containerInfo),tn(r),null;case 10:return pa(r.type),tn(r),null;case 19:if(ee(Tn),f=r.memoizedState,f===null)return tn(r),null;if(v=(r.flags&128)!==0,b=f.rendering,b===null)if(v)Jc(f,!1);else{if(vn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=dh(i),b!==null){for(r.flags|=128,Jc(f,!1),i=b.updateQueue,r.updateQueue=i,jh(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)xb(c,i),c=c.sibling;return pe(Tn,Tn.current&1|2),Nt&&ha(r,f.treeForkCount),r.child}i=i.sibling}f.tail!==null&&Ut()>Dh&&(r.flags|=128,v=!0,Jc(f,!1),r.lanes=4194304)}else{if(!v)if(i=dh(b),i!==null){if(r.flags|=128,v=!0,i=i.updateQueue,r.updateQueue=i,jh(r,i),Jc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Nt)return tn(r),null}else 2*Ut()-f.renderingStartTime>Dh&&c!==536870912&&(r.flags|=128,v=!0,Jc(f,!1),r.lanes=4194304);f.isBackwards?(b.sibling=r.child,r.child=b):(i=f.last,i!==null?i.sibling=b:r.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ut(),i.sibling=null,c=Tn.current,pe(Tn,v?c&1|2:c&1),Nt&&ha(r,f.treeForkCount),i):(tn(r),null);case 22:case 23:return Ps(r),$m(),f=r.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(c&536870912)!==0&&(r.flags&128)===0&&(tn(r),r.subtreeFlags&6&&(r.flags|=8192)):tn(r),c=r.updateQueue,c!==null&&jh(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048),i!==null&&ee(vo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),pa(Cn),tn(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function UC(i,r){switch(Em(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return pa(Cn),Te(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return xt(r),null;case 31:if(r.memoizedState!==null){if(Ps(r),r.alternate===null)throw Error(s(340));go()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Ps(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));go()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ee(Tn),null;case 4:return Te(),null;case 10:return pa(r.type),null;case 22:case 23:return Ps(r),$m(),i!==null&&ee(vo),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return pa(Cn),null;case 25:return null;default:return null}}function Y_(i,r){switch(Em(r),r.tag){case 3:pa(Cn),Te();break;case 26:case 27:case 5:xt(r);break;case 4:Te();break;case 31:r.memoizedState!==null&&Ps(r);break;case 13:Ps(r);break;case 19:ee(Tn);break;case 10:pa(r.type);break;case 22:case 23:Ps(r),$m(),i!==null&&ee(vo);break;case 24:pa(Cn)}}function eu(i,r){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&i)===i){f=void 0;var b=c.create,M=c.inst;f=b(),M.destroy=f}c=c.next}while(c!==v)}}catch(L){Ft(r,r.return,L)}}function gr(i,r,c){try{var f=r.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&i)===i){var M=f.inst,L=M.destroy;if(L!==void 0){M.destroy=void 0,v=r;var G=c,ue=L;try{ue()}catch(be){Ft(v,G,be)}}}f=f.next}while(f!==b)}}catch(be){Ft(r,r.return,be)}}function W_(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{Pb(r,c)}catch(f){Ft(i,i.return,f)}}}function $_(i,r,c){c.props=jo(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){Ft(i,r,f)}}function tu(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(v){Ft(i,r,v)}}function Hi(i,r){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){Ft(i,r,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){Ft(i,r,v)}else c.current=null}function q_(i){var r=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){Ft(i,i.return,v)}}function jg(i,r,c){try{var f=i.stateNode;uE(f,i.type,c,r),f[We]=r}catch(v){Ft(i,i.return,v)}}function G_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Sr(i.type)||i.tag===4}function Tg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||G_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Sr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kg(i,r,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=gi));else if(f!==4&&(f===27&&Sr(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(kg(i,r,c),i=i.sibling;i!==null;)kg(i,r,c),i=i.sibling}function Th(i,r,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(f!==4&&(f===27&&Sr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Th(i,r,c),i=i.sibling;i!==null;)Th(i,r,c),i=i.sibling}function X_(i){var r=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Qn(r,f,c),r[it]=i,r[We]=c}catch(b){Ft(i,i.return,b)}}var va=!1,On=!1,Ng=!1,K_=typeof WeakSet=="function"?WeakSet:Set,Un=null;function IC(i,r){if(i=i.containerInfo,Gg=$h,i=De(i),Ve(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var M=0,L=-1,G=-1,ue=0,be=0,we=i,he=null;t:for(;;){for(var ge;we!==c||v!==0&&we.nodeType!==3||(L=M+v),we!==b||f!==0&&we.nodeType!==3||(G=M+f),we.nodeType===3&&(M+=we.nodeValue.length),(ge=we.firstChild)!==null;)he=we,we=ge;for(;;){if(we===i)break t;if(he===c&&++ue===v&&(L=M),he===b&&++be===f&&(G=M),(ge=we.nextSibling)!==null)break;we=he,he=we.parentNode}we=ge}c=L===-1||G===-1?null:{start:L,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(Xg={focusedElem:i,selectionRange:c},$h=!1,Un=r;Un!==null;)if(r=Un,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Un=i;else for(;Un!==null;){switch(r=Un,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)v=i[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=r,v=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var Ue=jo(c.type,v);i=f.getSnapshotBeforeUpdate(Ue,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(Ze){Ft(c,c.return,Ze)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)Qg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Qg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Un=i;break}Un=r.return}}function Z_(i,r,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:_a(i,c),f&4&&eu(5,c);break;case 1:if(_a(i,c),f&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(M){Ft(c,c.return,M)}else{var v=jo(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(v,r,i.__reactInternalSnapshotBeforeUpdate)}catch(M){Ft(c,c.return,M)}}f&64&&W_(c),f&512&&tu(c,c.return);break;case 3:if(_a(i,c),f&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Pb(i,r)}catch(M){Ft(c,c.return,M)}}break;case 27:r===null&&f&4&&X_(c);case 26:case 5:_a(i,c),r===null&&f&4&&q_(c),f&512&&tu(c,c.return);break;case 12:_a(i,c);break;case 31:_a(i,c),f&4&&e1(i,c);break;case 13:_a(i,c),f&4&&t1(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=QC.bind(null,c),yE(i,c))));break;case 22:if(f=c.memoizedState!==null||va,!f){r=r!==null&&r.memoizedState!==null||On,v=va;var b=On;va=f,(On=r)&&!b?wa(i,c,(c.subtreeFlags&8772)!==0):_a(i,c),va=v,On=b}break;case 30:break;default:_a(i,c)}}function Q_(i){var r=i.alternate;r!==null&&(i.alternate=null,Q_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&hs(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var cn=null,ws=!1;function ba(i,r,c){for(c=c.child;c!==null;)J_(i,r,c),c=c.sibling}function J_(i,r,c){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(ms,c)}catch{}switch(c.tag){case 26:On||Hi(c,r),ba(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:On||Hi(c,r);var f=cn,v=ws;Sr(c.type)&&(cn=c.stateNode,ws=!1),ba(i,r,c),uu(c.stateNode),cn=f,ws=v;break;case 5:On||Hi(c,r);case 6:if(f=cn,v=ws,cn=null,ba(i,r,c),cn=f,ws=v,cn!==null)if(ws)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(c.stateNode)}catch(b){Ft(c,r,b)}else try{cn.removeChild(c.stateNode)}catch(b){Ft(c,r,b)}break;case 18:cn!==null&&(ws?(i=cn,W1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Cl(i)):W1(cn,c.stateNode));break;case 4:f=cn,v=ws,cn=c.stateNode.containerInfo,ws=!0,ba(i,r,c),cn=f,ws=v;break;case 0:case 11:case 14:case 15:gr(2,c,r),On||gr(4,c,r),ba(i,r,c);break;case 1:On||(Hi(c,r),f=c.stateNode,typeof f.componentWillUnmount=="function"&&$_(c,r,f)),ba(i,r,c);break;case 21:ba(i,r,c);break;case 22:On=(f=On)||c.memoizedState!==null,ba(i,r,c),On=f;break;default:ba(i,r,c)}}function e1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Cl(i)}catch(c){Ft(r,r.return,c)}}}function t1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Cl(i)}catch(c){Ft(r,r.return,c)}}function YC(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new K_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new K_),r;default:throw Error(s(435,i.tag))}}function kh(i,r){var c=YC(i);r.forEach(function(f){if(!c.has(f)){c.add(f);var v=JC.bind(null,i,f);f.then(v,v)}})}function Ss(i,r){var c=r.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],b=i,M=r,L=M;e:for(;L!==null;){switch(L.tag){case 27:if(Sr(L.type)){cn=L.stateNode,ws=!1;break e}break;case 5:cn=L.stateNode,ws=!1;break e;case 3:case 4:cn=L.stateNode.containerInfo,ws=!0;break e}L=L.return}if(cn===null)throw Error(s(160));J_(b,M,v),cn=null,ws=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)n1(r,i),r=r.sibling}var bi=null;function n1(i,r){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ss(r,i),js(i),f&4&&(gr(3,i,i.return),eu(3,i),gr(5,i,i.return));break;case 1:Ss(r,i),js(i),f&512&&(On||c===null||Hi(c,c.return)),f&64&&va&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=bi;if(Ss(r,i),js(i),f&512&&(On||c===null||Hi(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ct]||b[it]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),Qn(b,f,c),b[it]=i,Jt(b),f=b;break e;case"link":var M=nw("link","href",v).get(f+(c.href||""));if(M){for(var L=0;L<M.length;L++)if(b=M[L],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(L,1);break t}}b=v.createElement(f),Qn(b,f,c),v.head.appendChild(b);break;case"meta":if(M=nw("meta","content",v).get(f+(c.content||""))){for(L=0;L<M.length;L++)if(b=M[L],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(L,1);break t}}b=v.createElement(f),Qn(b,f,c),v.head.appendChild(b);break;default:throw Error(s(468,f))}b[it]=i,Jt(b),f=b}i.stateNode=f}else sw(v,i.type,i.stateNode);else i.stateNode=tw(v,f,i.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?sw(v,i.type,i.stateNode):tw(v,f,i.memoizedProps)):f===null&&i.stateNode!==null&&jg(i,i.memoizedProps,c.memoizedProps)}break;case 27:Ss(r,i),js(i),f&512&&(On||c===null||Hi(c,c.return)),c!==null&&f&4&&jg(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Ss(r,i),js(i),f&512&&(On||c===null||Hi(c,c.return)),i.flags&32){v=i.stateNode;try{Li(v,"")}catch(Ue){Ft(i,i.return,Ue)}}f&4&&i.stateNode!=null&&(v=i.memoizedProps,jg(i,v,c!==null?c.memoizedProps:v)),f&1024&&(Ng=!0);break;case 6:if(Ss(r,i),js(i),f&4){if(i.stateNode===null)throw Error(s(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Ue){Ft(i,i.return,Ue)}}break;case 3:if(Uh=null,v=bi,bi=Fh(r.containerInfo),Ss(r,i),bi=v,js(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Cl(r.containerInfo)}catch(Ue){Ft(i,i.return,Ue)}Ng&&(Ng=!1,s1(i));break;case 4:f=bi,bi=Fh(i.stateNode.containerInfo),Ss(r,i),js(i),bi=f;break;case 12:Ss(r,i),js(i);break;case 31:Ss(r,i),js(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,kh(i,f)));break;case 13:Ss(r,i),js(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Mh=Ut()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,kh(i,f)));break;case 22:v=i.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,ue=va,be=On;if(va=ue||v,On=be||G,Ss(r,i),On=be,va=ue,js(i),f&8192)e:for(r=i.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(c===null||G||va||On||To(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){G=c=r;try{if(b=G.stateNode,v)M=b.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{L=G.stateNode;var we=G.memoizedProps.style,he=we!=null&&we.hasOwnProperty("display")?we.display:null;L.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Ue){Ft(G,G.return,Ue)}}}else if(r.tag===6){if(c===null){G=r;try{G.stateNode.nodeValue=v?"":G.memoizedProps}catch(Ue){Ft(G,G.return,Ue)}}}else if(r.tag===18){if(c===null){G=r;try{var ge=G.stateNode;v?$1(ge,!0):$1(G.stateNode,!1)}catch(Ue){Ft(G,G.return,Ue)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,kh(i,c))));break;case 19:Ss(r,i),js(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,kh(i,f)));break;case 30:break;case 21:break;default:Ss(r,i),js(i)}}function js(i){var r=i.flags;if(r&2){try{for(var c,f=i.return;f!==null;){if(G_(f)){c=f;break}f=f.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,b=Tg(i);Th(i,b,v);break;case 5:var M=c.stateNode;c.flags&32&&(Li(M,""),c.flags&=-33);var L=Tg(i);Th(i,L,M);break;case 3:case 4:var G=c.stateNode.containerInfo,ue=Tg(i);kg(i,ue,G);break;default:throw Error(s(161))}}catch(be){Ft(i,i.return,be)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function s1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;s1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function _a(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Z_(i,r.alternate,r),r=r.sibling}function To(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:gr(4,r,r.return),To(r);break;case 1:Hi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&$_(r,r.return,c),To(r);break;case 27:uu(r.stateNode);case 26:case 5:Hi(r,r.return),To(r);break;case 22:r.memoizedState===null&&To(r);break;case 30:To(r);break;default:To(r)}i=i.sibling}}function wa(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,v=i,b=r,M=b.flags;switch(b.tag){case 0:case 11:case 15:wa(v,b,c),eu(4,b);break;case 1:if(wa(v,b,c),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ue){Ft(f,f.return,ue)}if(f=b,v=f.updateQueue,v!==null){var L=f.stateNode;try{var G=v.shared.hiddenCallbacks;if(G!==null)for(v.shared.hiddenCallbacks=null,v=0;v<G.length;v++)Rb(G[v],L)}catch(ue){Ft(f,f.return,ue)}}c&&M&64&&W_(b),tu(b,b.return);break;case 27:X_(b);case 26:case 5:wa(v,b,c),c&&f===null&&M&4&&q_(b),tu(b,b.return);break;case 12:wa(v,b,c);break;case 31:wa(v,b,c),c&&M&4&&e1(v,b);break;case 13:wa(v,b,c),c&&M&4&&t1(v,b);break;case 22:b.memoizedState===null&&wa(v,b,c),tu(b,b.return);break;case 30:break;default:wa(v,b,c)}r=r.sibling}}function Mg(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Hc(c))}function Dg(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Hc(i))}function _i(i,r,c,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)i1(i,r,c,f),r=r.sibling}function i1(i,r,c,f){var v=r.flags;switch(r.tag){case 0:case 11:case 15:_i(i,r,c,f),v&2048&&eu(9,r);break;case 1:_i(i,r,c,f);break;case 3:_i(i,r,c,f),v&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Hc(i)));break;case 12:if(v&2048){_i(i,r,c,f),i=r.stateNode;try{var b=r.memoizedProps,M=b.id,L=b.onPostCommit;typeof L=="function"&&L(M,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){Ft(r,r.return,G)}}else _i(i,r,c,f);break;case 31:_i(i,r,c,f);break;case 13:_i(i,r,c,f);break;case 23:break;case 22:b=r.stateNode,M=r.alternate,r.memoizedState!==null?b._visibility&2?_i(i,r,c,f):nu(i,r):b._visibility&2?_i(i,r,c,f):(b._visibility|=2,vl(i,r,c,f,(r.subtreeFlags&10256)!==0||!1)),v&2048&&Mg(M,r);break;case 24:_i(i,r,c,f),v&2048&&Dg(r.alternate,r);break;default:_i(i,r,c,f)}}function vl(i,r,c,f,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,M=r,L=c,G=f,ue=M.flags;switch(M.tag){case 0:case 11:case 15:vl(b,M,L,G,v),eu(8,M);break;case 23:break;case 22:var be=M.stateNode;M.memoizedState!==null?be._visibility&2?vl(b,M,L,G,v):nu(b,M):(be._visibility|=2,vl(b,M,L,G,v)),v&&ue&2048&&Mg(M.alternate,M);break;case 24:vl(b,M,L,G,v),v&&ue&2048&&Dg(M.alternate,M);break;default:vl(b,M,L,G,v)}r=r.sibling}}function nu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,f=r,v=f.flags;switch(f.tag){case 22:nu(c,f),v&2048&&Mg(f.alternate,f);break;case 24:nu(c,f),v&2048&&Dg(f.alternate,f);break;default:nu(c,f)}r=r.sibling}}var su=8192;function bl(i,r,c){if(i.subtreeFlags&su)for(i=i.child;i!==null;)a1(i,r,c),i=i.sibling}function a1(i,r,c){switch(i.tag){case 26:bl(i,r,c),i.flags&su&&i.memoizedState!==null&&CE(c,bi,i.memoizedState,i.memoizedProps);break;case 5:bl(i,r,c);break;case 3:case 4:var f=bi;bi=Fh(i.stateNode.containerInfo),bl(i,r,c),bi=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=su,su=16777216,bl(i,r,c),su=f):bl(i,r,c));break;default:bl(i,r,c)}}function r1(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function iu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];Un=f,l1(f,i)}r1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)o1(i),i=i.sibling}function o1(i){switch(i.tag){case 0:case 11:case 15:iu(i),i.flags&2048&&gr(9,i,i.return);break;case 3:iu(i);break;case 12:iu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Nh(i)):iu(i);break;default:iu(i)}}function Nh(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];Un=f,l1(f,i)}r1(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:gr(8,r,r.return),Nh(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Nh(r));break;default:Nh(r)}i=i.sibling}}function l1(i,r){for(;Un!==null;){var c=Un;switch(c.tag){case 0:case 11:case 15:gr(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Hc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Un=f;else e:for(c=i;Un!==null;){f=Un;var v=f.sibling,b=f.return;if(Q_(f),f===c){Un=null;break e}if(v!==null){v.return=b,Un=v;break e}Un=b}}}var WC={getCacheForType:function(i){var r=Kn(Cn),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return Kn(Cn).controller.signal}},$C=typeof WeakMap=="function"?WeakMap:Map,zt=0,Xt=null,yt=null,St=0,Vt=0,Ls=null,xr=!1,_l=!1,Cg=!1,Sa=0,vn=0,yr=0,ko=0,Eg=0,zs=0,wl=0,au=null,Ts=null,Ag=!1,Mh=0,c1=0,Dh=1/0,Ch=null,vr=null,Ln=0,br=null,Sl=null,ja=0,Og=0,Rg=null,u1=null,ru=0,Pg=null;function Bs(){return(zt&2)!==0&&St!==0?St&-St:H.T!==null?Hg():Oe()}function d1(){if(zs===0)if((St&536870912)===0||Nt){var i=Es;Es<<=1,(Es&3932160)===0&&(Es=262144),zs=i}else zs=536870912;return i=Rs.current,i!==null&&(i.flags|=32),zs}function ks(i,r,c){(i===Xt&&(Vt===2||Vt===9)||i.cancelPendingCommit!==null)&&(jl(i,0),_r(i,St,zs,!1)),xs(i,c),((zt&2)===0||i!==Xt)&&(i===Xt&&((zt&2)===0&&(ko|=c),vn===4&&_r(i,St,zs,!1)),Ui(i))}function h1(i,r,c){if((zt&6)!==0)throw Error(s(327));var f=!c&&(r&127)===0&&(r&i.expiredLanes)===0||gs(i,r),v=f?XC(i,r):zg(i,r,!0),b=f;do{if(v===0){_l&&!f&&_r(i,r,0,!1);break}else{if(c=i.current.alternate,b&&!qC(c)){v=zg(i,r,!1),b=!1;continue}if(v===2){if(b=r,i.errorRecoveryDisabledLanes&b)var M=0;else M=i.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){r=M;e:{var L=i;v=au;var G=L.current.memoizedState.isDehydrated;if(G&&(jl(L,M).flags|=256),M=zg(L,M,!1),M!==2){if(Cg&&!G){L.errorRecoveryDisabledLanes|=b,ko|=b,v=4;break e}b=Ts,Ts=v,b!==null&&(Ts===null?Ts=b:Ts.push.apply(Ts,b))}v=M}if(b=!1,v!==2)continue}}if(v===1){jl(i,0),_r(i,r,0,!0);break}e:{switch(f=i,b=v,b){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:_r(f,r,zs,!xr);break e;case 2:Ts=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(v=Mh+300-Ut(),10<v)){if(_r(f,r,zs,!xr),Ys(f,0,!0)!==0)break e;ja=r,f.timeoutHandle=I1(f1.bind(null,f,c,Ts,Ch,Ag,r,zs,ko,wl,xr,b,"Throttled",-0,0),v);break e}f1(f,c,Ts,Ch,Ag,r,zs,ko,wl,xr,b,null,-0,0)}}break}while(!0);Ui(i)}function f1(i,r,c,f,v,b,M,L,G,ue,be,we,he,ge){if(i.timeoutHandle=-1,we=r.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},a1(r,b,we);var Ue=(b&62914560)===b?Mh-Ut():(b&4194048)===b?c1-Ut():0;if(Ue=EE(we,Ue),Ue!==null){ja=b,i.cancelPendingCommit=Ue(_1.bind(null,i,r,b,c,f,v,M,L,G,be,we,null,he,ge)),_r(i,b,M,!ue);return}}_1(i,r,b,c,f,v,M,L,G)}function qC(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],b=v.getSnapshot;v=v.value;try{if(!W(b(),v))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function _r(i,r,c,f){r&=~Eg,r&=~ko,i.suspendedLanes|=r,i.pingedLanes&=~r,f&&(i.warmLanes|=r),f=i.expirationTimes;for(var v=r;0<v;){var b=31-Qt(v),M=1<<b;f[b]=-1,v&=~M}c!==0&&Pe(i,c,r)}function Eh(){return(zt&6)===0?(ou(0),!1):!0}function Lg(){if(yt!==null){if(Vt===0)var i=yt.return;else i=yt,fa=xo=null,Qm(i),pl=null,Ic=0,i=yt;for(;i!==null;)Y_(i.alternate,i),i=i.return;yt=null}}function jl(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,fE(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ja=0,Lg(),Xt=i,yt=c=da(i.current,null),St=r,Vt=0,Ls=null,xr=!1,_l=gs(i,r),Cg=!1,wl=zs=Eg=ko=yr=vn=0,Ts=au=null,Ag=!1,(r&8)!==0&&(r|=r&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=r;0<f;){var v=31-Qt(f),b=1<<v;r|=i[v],f&=~b}return Sa=r,Qd(),c}function p1(i,r){ut=null,H.H=Zc,r===fl||r===rh?(r=Cb(),Vt=3):r===Fm?(r=Cb(),Vt=4):Vt=r===pg?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ls=r,yt===null&&(vn=1,bh(i,Gs(r,i.current)))}function m1(){var i=Rs.current;return i===null?!0:(St&4194048)===St?Qs===null:(St&62914560)===St||(St&536870912)!==0?i===Qs:!1}function g1(){var i=H.H;return H.H=Zc,i===null?Zc:i}function x1(){var i=H.A;return H.A=WC,i}function Ah(){vn=4,xr||(St&4194048)!==St&&Rs.current!==null||(_l=!0),(yr&134217727)===0&&(ko&134217727)===0||Xt===null||_r(Xt,St,zs,!1)}function zg(i,r,c){var f=zt;zt|=2;var v=g1(),b=x1();(Xt!==i||St!==r)&&(Ch=null,jl(i,r)),r=!1;var M=vn;e:do try{if(Vt!==0&&yt!==null){var L=yt,G=Ls;switch(Vt){case 8:Lg(),M=6;break e;case 3:case 2:case 9:case 6:Rs.current===null&&(r=!0);var ue=Vt;if(Vt=0,Ls=null,Tl(i,L,G,ue),c&&_l){M=0;break e}break;default:ue=Vt,Vt=0,Ls=null,Tl(i,L,G,ue)}}GC(),M=vn;break}catch(be){p1(i,be)}while(!0);return r&&i.shellSuspendCounter++,fa=xo=null,zt=f,H.H=v,H.A=b,yt===null&&(Xt=null,St=0,Qd()),M}function GC(){for(;yt!==null;)y1(yt)}function XC(i,r){var c=zt;zt|=2;var f=g1(),v=x1();Xt!==i||St!==r?(Ch=null,Dh=Ut()+500,jl(i,r)):_l=gs(i,r);e:do try{if(Vt!==0&&yt!==null){r=yt;var b=Ls;t:switch(Vt){case 1:Vt=0,Ls=null,Tl(i,r,b,1);break;case 2:case 9:if(Mb(b)){Vt=0,Ls=null,v1(r);break}r=function(){Vt!==2&&Vt!==9||Xt!==i||(Vt=7),Ui(i)},b.then(r,r);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:Mb(b)?(Vt=0,Ls=null,v1(r)):(Vt=0,Ls=null,Tl(i,r,b,7));break;case 5:var M=null;switch(yt.tag){case 26:M=yt.memoizedState;case 5:case 27:var L=yt;if(M?iw(M):L.stateNode.complete){Vt=0,Ls=null;var G=L.sibling;if(G!==null)yt=G;else{var ue=L.return;ue!==null?(yt=ue,Oh(ue)):yt=null}break t}}Vt=0,Ls=null,Tl(i,r,b,5);break;case 6:Vt=0,Ls=null,Tl(i,r,b,6);break;case 8:Lg(),vn=6;break e;default:throw Error(s(462))}}KC();break}catch(be){p1(i,be)}while(!0);return fa=xo=null,H.H=f,H.A=v,zt=c,yt!==null?0:(Xt=null,St=0,Qd(),vn)}function KC(){for(;yt!==null&&!wt();)y1(yt)}function y1(i){var r=U_(i.alternate,i,Sa);i.memoizedProps=i.pendingProps,r===null?Oh(i):yt=r}function v1(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=L_(c,r,r.pendingProps,r.type,void 0,St);break;case 11:r=L_(c,r,r.pendingProps,r.type.render,r.ref,St);break;case 5:Qm(r);default:Y_(c,r),r=yt=xb(r,Sa),r=U_(c,r,Sa)}i.memoizedProps=i.pendingProps,r===null?Oh(i):yt=r}function Tl(i,r,c,f){fa=xo=null,Qm(r),pl=null,Ic=0;var v=r.return;try{if(BC(i,v,r,c,St)){vn=1,bh(i,Gs(c,i.current)),yt=null;return}}catch(b){if(v!==null)throw yt=v,b;vn=1,bh(i,Gs(c,i.current)),yt=null;return}r.flags&32768?(Nt||f===1?i=!0:_l||(St&536870912)!==0?i=!1:(xr=i=!0,(f===2||f===9||f===3||f===6)&&(f=Rs.current,f!==null&&f.tag===13&&(f.flags|=16384))),b1(r,i)):Oh(r)}function Oh(i){var r=i;do{if((r.flags&32768)!==0){b1(r,xr);return}i=r.return;var c=HC(r.alternate,r,Sa);if(c!==null){yt=c;return}if(r=r.sibling,r!==null){yt=r;return}yt=r=i}while(r!==null);vn===0&&(vn=5)}function b1(i,r){do{var c=UC(i.alternate,i);if(c!==null){c.flags&=32767,yt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){yt=i;return}yt=i=c}while(i!==null);vn=6,yt=null}function _1(i,r,c,f,v,b,M,L,G){i.cancelPendingCommit=null;do Rh();while(Ln!==0);if((zt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(b=r.lanes|r.childLanes,b|=Tm,Ri(i,c,b,M,L,G),i===Xt&&(yt=Xt=null,St=0),Sl=r,br=i,ja=c,Og=b,Rg=v,u1=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,eE(gn,function(){return k1(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=H.T,H.T=null,v=X.p,X.p=2,M=zt,zt|=4;try{IC(i,r,c)}finally{zt=M,X.p=v,H.T=f}}Ln=1,w1(),S1(),j1()}}function w1(){if(Ln===1){Ln=0;var i=br,r=Sl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var f=X.p;X.p=2;var v=zt;zt|=4;try{n1(r,i);var b=Xg,M=De(i.containerInfo),L=b.focusedElem,G=b.selectionRange;if(M!==L&&L&&L.ownerDocument&&ke(L.ownerDocument.documentElement,L)){if(G!==null&&Ve(L)){var ue=G.start,be=G.end;if(be===void 0&&(be=ue),"selectionStart"in L)L.selectionStart=ue,L.selectionEnd=Math.min(be,L.value.length);else{var we=L.ownerDocument||document,he=we&&we.defaultView||window;if(he.getSelection){var ge=he.getSelection(),Ue=L.textContent.length,Ze=Math.min(G.start,Ue),qt=G.end===void 0?Ze:Math.min(G.end,Ue);!ge.extend&&Ze>qt&&(M=qt,qt=Ze,Ze=M);var se=Ne(L,Ze),Q=Ne(L,qt);if(se&&Q&&(ge.rangeCount!==1||ge.anchorNode!==se.node||ge.anchorOffset!==se.offset||ge.focusNode!==Q.node||ge.focusOffset!==Q.offset)){var ce=we.createRange();ce.setStart(se.node,se.offset),ge.removeAllRanges(),Ze>qt?(ge.addRange(ce),ge.extend(Q.node,Q.offset)):(ce.setEnd(Q.node,Q.offset),ge.addRange(ce))}}}}for(we=[],ge=L;ge=ge.parentNode;)ge.nodeType===1&&we.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<we.length;L++){var _e=we[L];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}$h=!!Gg,Xg=Gg=null}finally{zt=v,X.p=f,H.T=c}}i.current=r,Ln=2}}function S1(){if(Ln===2){Ln=0;var i=br,r=Sl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var f=X.p;X.p=2;var v=zt;zt|=4;try{Z_(i,r.alternate,r)}finally{zt=v,X.p=f,H.T=c}}Ln=3}}function j1(){if(Ln===4||Ln===3){Ln=0,fn();var i=br,r=Sl,c=ja,f=u1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ln=5:(Ln=0,Sl=br=null,T1(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(vr=null),Ce(c),r=r.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(ms,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=H.T,v=X.p,X.p=2,H.T=null;try{for(var b=i.onRecoverableError,M=0;M<f.length;M++){var L=f[M];b(L.value,{componentStack:L.stack})}}finally{H.T=r,X.p=v}}(ja&3)!==0&&Rh(),Ui(i),v=i.pendingLanes,(c&261930)!==0&&(v&42)!==0?i===Pg?ru++:(ru=0,Pg=i):ru=0,ou(0)}}function T1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Hc(r)))}function Rh(){return w1(),S1(),j1(),k1()}function k1(){if(Ln!==5)return!1;var i=br,r=Og;Og=0;var c=Ce(ja),f=H.T,v=X.p;try{X.p=32>c?32:c,H.T=null,c=Rg,Rg=null;var b=br,M=ja;if(Ln=0,Sl=br=null,ja=0,(zt&6)!==0)throw Error(s(331));var L=zt;if(zt|=4,o1(b.current),i1(b,b.current,M,c),zt=L,ou(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(ms,b)}catch{}return!0}finally{X.p=v,H.T=f,T1(i,r)}}function N1(i,r,c){r=Gs(c,r),r=fg(i.stateNode,r,2),i=fr(i,r,2),i!==null&&(xs(i,2),Ui(i))}function Ft(i,r,c){if(i.tag===3)N1(i,i,c);else for(;r!==null;){if(r.tag===3){N1(r,i,c);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(vr===null||!vr.has(f))){i=Gs(c,i),c=M_(2),f=fr(r,c,2),f!==null&&(D_(c,f,r,i),xs(f,2),Ui(f));break}}r=r.return}}function Bg(i,r,c){var f=i.pingCache;if(f===null){f=i.pingCache=new $C;var v=new Set;f.set(r,v)}else v=f.get(r),v===void 0&&(v=new Set,f.set(r,v));v.has(c)||(Cg=!0,v.add(c),i=ZC.bind(null,i,r,c),r.then(i,i))}function ZC(i,r,c){var f=i.pingCache;f!==null&&f.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Xt===i&&(St&c)===c&&(vn===4||vn===3&&(St&62914560)===St&&300>Ut()-Mh?(zt&2)===0&&jl(i,0):Eg|=c,wl===St&&(wl=0)),Ui(i)}function M1(i,r){r===0&&(r=Oi()),i=po(i,r),i!==null&&(xs(i,r),Ui(i))}function QC(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),M1(i,c)}function JC(i,r){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,v=i.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(r),M1(i,c)}function eE(i,r){return Wn(i,r)}var Ph=null,kl=null,Vg=!1,Lh=!1,Fg=!1,wr=0;function Ui(i){i!==kl&&i.next===null&&(kl===null?Ph=kl=i:kl=kl.next=i),Lh=!0,Vg||(Vg=!0,nE())}function ou(i,r){if(!Fg&&Lh){Fg=!0;do for(var c=!1,f=Ph;f!==null;){if(i!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var M=f.suspendedLanes,L=f.pingedLanes;b=(1<<31-Qt(42|i)+1)-1,b&=v&~(M&~L),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,A1(f,b))}else b=St,b=Ys(f,f===Xt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||gs(f,b)||(c=!0,A1(f,b));f=f.next}while(c);Fg=!1}}function tE(){D1()}function D1(){Lh=Vg=!1;var i=0;wr!==0&&hE()&&(i=wr);for(var r=Ut(),c=null,f=Ph;f!==null;){var v=f.next,b=C1(f,r);b===0?(f.next=null,c===null?Ph=v:c.next=v,v===null&&(kl=c)):(c=f,(i!==0||(b&3)!==0)&&(Lh=!0)),f=v}Ln!==0&&Ln!==5||ou(i),wr!==0&&(wr=0)}function C1(i,r){for(var c=i.suspendedLanes,f=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var M=31-Qt(b),L=1<<M,G=v[M];G===-1?((L&c)===0||(L&f)!==0)&&(v[M]=Ai(L,r)):G<=r&&(i.expiredLanes|=L),b&=~L}if(r=Xt,c=St,c=Ys(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===r&&(Vt===2||Vt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&ze(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||gs(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(f!==null&&ze(f),Ce(c)){case 2:case 8:c=Vn;break;case 32:c=gn;break;case 268435456:c=Is;break;default:c=gn}return f=E1.bind(null,i),c=Wn(c,f),i.callbackPriority=r,i.callbackNode=c,r}return f!==null&&f!==null&&ze(f),i.callbackPriority=2,i.callbackNode=null,2}function E1(i,r){if(Ln!==0&&Ln!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Rh()&&i.callbackNode!==c)return null;var f=St;return f=Ys(i,i===Xt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(h1(i,f,r),C1(i,Ut()),i.callbackNode!=null&&i.callbackNode===c?E1.bind(null,i):null)}function A1(i,r){if(Rh())return null;h1(i,r,!0)}function nE(){pE(function(){(zt&6)!==0?Wn(lt,tE):D1()})}function Hg(){if(wr===0){var i=dl;i===0&&(i=Pn,Pn<<=1,(Pn&261888)===0&&(Pn=256)),wr=i}return wr}function O1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:no(""+i)}function R1(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function sE(i,r,c,f,v){if(r==="submit"&&c&&c.stateNode===v){var b=O1((v[We]||null).action),M=f.submitter;M&&(r=(r=M[We]||null)?O1(r.formAction):M.getAttribute("formAction"),r!==null&&(b=r,M=null));var L=new ro("action","action",null,f,v);i.push({event:L,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(wr!==0){var G=M?R1(v,M):new FormData(v);og(c,{pending:!0,data:G,method:v.method,action:b},null,G)}}else typeof b=="function"&&(L.preventDefault(),G=M?R1(v,M):new FormData(v),og(c,{pending:!0,data:G,method:v.method,action:b},b,G))},currentTarget:v}]})}}for(var Ug=0;Ug<jm.length;Ug++){var Ig=jm[Ug],iE=Ig.toLowerCase(),aE=Ig[0].toUpperCase()+Ig.slice(1);vi(iE,"on"+aE)}vi(fo,"onAnimationEnd"),vi(rr,"onAnimationIteration"),vi(fb,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(_C,"onTransitionRun"),vi(wC,"onTransitionStart"),vi(SC,"onTransitionCancel"),vi(pb,"onTransitionEnd"),na("onMouseEnter",["mouseout","mouseover"]),na("onMouseLeave",["mouseout","mouseover"]),na("onPointerEnter",["pointerout","pointerover"]),na("onPointerLeave",["pointerout","pointerover"]),Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lu));function P1(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],v=f.event;f=f.listeners;e:{var b=void 0;if(r)for(var M=f.length-1;0<=M;M--){var L=f[M],G=L.instance,ue=L.currentTarget;if(L=L.listener,G!==b&&v.isPropagationStopped())break e;b=L,v.currentTarget=ue;try{b(v)}catch(be){Zd(be)}v.currentTarget=null,b=G}else for(M=0;M<f.length;M++){if(L=f[M],G=L.instance,ue=L.currentTarget,L=L.listener,G!==b&&v.isPropagationStopped())break e;b=L,v.currentTarget=ue;try{b(v)}catch(be){Zd(be)}v.currentTarget=null,b=G}}}}function vt(i,r){var c=r[Yt];c===void 0&&(c=r[Yt]=new Set);var f=i+"__bubble";c.has(f)||(L1(r,i,2,!1),c.add(f))}function Yg(i,r,c){var f=0;r&&(f|=4),L1(c,i,f,r)}var zh="_reactListening"+Math.random().toString(36).slice(2);function Wg(i){if(!i[zh]){i[zh]=!0,to.forEach(function(c){c!=="selectionchange"&&(rE.has(c)||Yg(c,!1,i),Yg(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[zh]||(r[zh]=!0,Yg("selectionchange",!1,r))}}function L1(i,r,c,f){switch(dw(r)){case 2:var v=RE;break;case 8:v=PE;break;default:v=rx}c=v.bind(null,r,c,i),v=void 0,!tl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),f?v!==void 0?i.addEventListener(r,c,{capture:!0,passive:v}):i.addEventListener(r,c,!0):v!==void 0?i.addEventListener(r,c,{passive:v}):i.addEventListener(r,c,!1)}function $g(i,r,c,f,v){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var M=f.tag;if(M===3||M===4){var L=f.stateNode.containerInfo;if(L===v)break;if(M===4)for(M=f.return;M!==null;){var G=M.tag;if((G===3||G===4)&&M.stateNode.containerInfo===v)return;M=M.return}for(;L!==null;){if(M=vs(L),M===null)return;if(G=M.tag,G===5||G===6||G===26||G===27){f=b=M;continue e}L=L.parentNode}}f=f.return}Ec(function(){var ue=b,be=Dc(c),we=[];e:{var he=mb.get(i);if(he!==void 0){var ge=ro,Ue=i;switch(i){case"keypress":if(nr(c)===0)break e;case"keydown":case"keyup":ge=Id;break;case"focusin":Ue="focus",ge=Oc;break;case"focusout":Ue="blur",ge=Oc;break;case"beforeblur":case"afterblur":ge=Oc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=pm;break;case fo:case rr:case fb:ge=lm;break;case pb:ge=gm;break;case"scroll":case"scrollend":ge=rm;break;case"wheel":ge=ym;break;case"copy":case"cut":case"paste":ge=um;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Rc;break;case"toggle":case"beforetoggle":ge=Pc}var Ze=(r&4)!==0,qt=!Ze&&(i==="scroll"||i==="scrollend"),se=Ze?he!==null?he+"Capture":null:he;Ze=[];for(var Q=ue,ce;Q!==null;){var _e=Q;if(ce=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||ce===null||se===null||(_e=er(Q,se),_e!=null&&Ze.push(cu(Q,_e,ce))),qt)break;Q=Q.return}0<Ze.length&&(he=new ge(he,Ue,null,c,be),we.push({event:he,listeners:Ze}))}}if((r&7)===0){e:{if(he=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",he&&c!==so&&(Ue=c.relatedTarget||c.fromElement)&&(vs(Ue)||Ue[Re]))break e;if((ge||he)&&(he=be.window===be?be:(he=be.ownerDocument)?he.defaultView||he.parentWindow:window,ge?(Ue=c.relatedTarget||c.toElement,ge=ue,Ue=Ue?vs(Ue):null,Ue!==null&&(qt=o(Ue),Ze=Ue.tag,Ue!==qt||Ze!==5&&Ze!==27&&Ze!==6)&&(Ue=null)):(ge=null,Ue=ue),ge!==Ue)){if(Ze=Bd,_e="onMouseLeave",se="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(Ze=Rc,_e="onPointerLeave",se="onPointerEnter",Q="pointer"),qt=ge==null?he:Pi(ge),ce=Ue==null?he:Pi(Ue),he=new Ze(_e,Q+"leave",ge,c,be),he.target=qt,he.relatedTarget=ce,_e=null,vs(be)===ue&&(Ze=new Ze(se,Q+"enter",Ue,c,be),Ze.target=ce,Ze.relatedTarget=qt,_e=Ze),qt=_e,ge&&Ue)t:{for(Ze=oE,se=ge,Q=Ue,ce=0,_e=se;_e;_e=Ze(_e))ce++;_e=0;for(var qe=Q;qe;qe=Ze(qe))_e++;for(;0<ce-_e;)se=Ze(se),ce--;for(;0<_e-ce;)Q=Ze(Q),_e--;for(;ce--;){if(se===Q||Q!==null&&se===Q.alternate){Ze=se;break t}se=Ze(se),Q=Ze(Q)}Ze=null}else Ze=null;ge!==null&&z1(we,he,ge,Ze,!1),Ue!==null&&qt!==null&&z1(we,qt,Ue,Ze,!0)}}e:{if(he=ue?Pi(ue):window,ge=he.nodeName&&he.nodeName.toLowerCase(),ge==="select"||ge==="input"&&he.type==="file")var Et=Xd;else if(qd(he))if(Kd)Et=Y;else{Et=P;var $e=C}else ge=he.nodeName,!ge||ge.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ue&&Mc(ue.elementType)&&(Et=Xd):Et=z;if(Et&&(Et=Et(i,ue))){Gd(we,Et,c,be);break e}$e&&$e(i,he,ue),i==="focusout"&&ue&&he.type==="number"&&ue.memoizedProps.value!=null&&ia(he,"number",he.value)}switch($e=ue?Pi(ue):window,i){case"focusin":(qd($e)||$e.contentEditable==="true")&&(Ye=$e,nt=ue,ct=null);break;case"focusout":ct=nt=Ye=null;break;case"mousedown":Ke=!0;break;case"contextmenu":case"mouseup":case"dragend":Ke=!1,at(we,c,be);break;case"selectionchange":if(Be)break;case"keydown":case"keyup":at(we,c,be)}var dt;if(ir)e:{switch(i){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else ua?ar(i,c)&&(jt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(jt="onCompositionStart");jt&&(Wd&&c.locale!=="ko"&&(ua||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&ua&&(dt=Ld()):(zi=be,ra="value"in zi?zi.value:zi.textContent,ua=!0)),$e=Bh(ue,jt),0<$e.length&&(jt=new Hd(jt,i,null,c,be),we.push({event:jt,listeners:$e}),dt?jt.data=dt:(dt=yi(c),dt!==null&&(jt.data=dt)))),(dt=Lc?Bc(i,c):_m(i,c))&&(jt=Bh(ue,"onBeforeInput"),0<jt.length&&($e=new Hd("onBeforeInput","beforeinput",null,c,be),we.push({event:$e,listeners:jt}),$e.data=dt)),sE(we,i,ue,c,be)}P1(we,r)})}function cu(i,r,c){return{instance:i,listener:r,currentTarget:c}}function Bh(i,r){for(var c=r+"Capture",f=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=er(i,c),v!=null&&f.unshift(cu(i,v,b)),v=er(i,r),v!=null&&f.push(cu(i,v,b))),i.tag===3)return f;i=i.return}return[]}function oE(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function z1(i,r,c,f,v){for(var b=r._reactName,M=[];c!==null&&c!==f;){var L=c,G=L.alternate,ue=L.stateNode;if(L=L.tag,G!==null&&G===f)break;L!==5&&L!==26&&L!==27||ue===null||(G=ue,v?(ue=er(c,b),ue!=null&&M.unshift(cu(c,ue,G))):v||(ue=er(c,b),ue!=null&&M.push(cu(c,ue,G)))),c=c.return}M.length!==0&&i.push({event:r,listeners:M})}var lE=/\r\n?/g,cE=/\u0000|\uFFFD/g;function B1(i){return(typeof i=="string"?i:""+i).replace(lE,`
`).replace(cE,"")}function V1(i,r){return r=B1(r),B1(i)===r}function $t(i,r,c,f,v,b){switch(c){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||Li(i,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&Li(i,""+f);break;case"className":Xa(i,"class",f);break;case"tabIndex":Xa(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Xa(i,c,f);break;case"style":Nc(i,f,b);break;case"data":if(r!=="object"){Xa(i,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=no(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&$t(i,r,"name",v.name,v,null),$t(i,r,"formEncType",v.formEncType,v,null),$t(i,r,"formMethod",v.formMethod,v,null),$t(i,r,"formTarget",v.formTarget,v,null)):($t(i,r,"encType",v.encType,v,null),$t(i,r,"method",v.method,v,null),$t(i,r,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=no(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=gi);break;case"onScroll":f!=null&&vt("scroll",i);break;case"onScrollEnd":f!=null&&vt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=no(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":vt("beforetoggle",i),vt("toggle",i),el(i,"popover",f);break;case"xlinkActuate":pi(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":pi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":pi(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":pi(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":pi(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":pi(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":pi(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":pi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":pi(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":el(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=am.get(c)||c,el(i,c,f))}}function qg(i,r,c,f,v,b){switch(c){case"style":Nc(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Li(i,f):(typeof f=="number"||typeof f=="bigint")&&Li(i,""+f);break;case"onScroll":f!=null&&vt("scroll",i);break;case"onScrollEnd":f!=null&&vt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),r=c.slice(2,v?c.length-7:void 0),b=i[We]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(r,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,f,v);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):el(i,c,f)}}}function Qn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",i),vt("load",i);var f=!1,v=!1,b;for(b in c)if(c.hasOwnProperty(b)){var M=c[b];if(M!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:$t(i,r,b,M,c,null)}}v&&$t(i,r,"srcSet",c.srcSet,c,null),f&&$t(i,r,"src",c.src,c,null);return;case"input":vt("invalid",i);var L=b=M=v=null,G=null,ue=null;for(f in c)if(c.hasOwnProperty(f)){var be=c[f];if(be!=null)switch(f){case"name":v=be;break;case"type":M=be;break;case"checked":G=be;break;case"defaultChecked":ue=be;break;case"value":b=be;break;case"defaultValue":L=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,r));break;default:$t(i,r,f,be,c,null)}}mi(i,b,L,G,ue,M,v,!1);return;case"select":vt("invalid",i),f=M=b=null;for(v in c)if(c.hasOwnProperty(v)&&(L=c[v],L!=null))switch(v){case"value":b=L;break;case"defaultValue":M=L;break;case"multiple":f=L;default:$t(i,r,v,L,c,null)}r=b,c=M,i.multiple=!!f,r!=null?Qa(i,!!f,r,!1):c!=null&&Qa(i,!!f,c,!0);return;case"textarea":vt("invalid",i),b=v=f=null;for(M in c)if(c.hasOwnProperty(M)&&(L=c[M],L!=null))switch(M){case"value":f=L;break;case"defaultValue":v=L;break;case"children":b=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:$t(i,r,M,L,c,null)}kc(i,f,v,b);return;case"option":for(G in c)c.hasOwnProperty(G)&&(f=c[G],f!=null)&&(G==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":$t(i,r,G,f,c,null));return;case"dialog":vt("beforetoggle",i),vt("toggle",i),vt("cancel",i),vt("close",i);break;case"iframe":case"object":vt("load",i);break;case"video":case"audio":for(f=0;f<lu.length;f++)vt(lu[f],i);break;case"image":vt("error",i),vt("load",i);break;case"details":vt("toggle",i);break;case"embed":case"source":case"link":vt("error",i),vt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in c)if(c.hasOwnProperty(ue)&&(f=c[ue],f!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:$t(i,r,ue,f,c,null)}return;default:if(Mc(r)){for(be in c)c.hasOwnProperty(be)&&(f=c[be],f!==void 0&&qg(i,r,be,f,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(f=c[L],f!=null&&$t(i,r,L,f,c,null))}function uE(i,r,c,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,M=null,L=null,G=null,ue=null,be=null;for(ge in c){var we=c[ge];if(c.hasOwnProperty(ge)&&we!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":G=we;default:f.hasOwnProperty(ge)||$t(i,r,ge,null,f,we)}}for(var he in f){var ge=f[he];if(we=c[he],f.hasOwnProperty(he)&&(ge!=null||we!=null))switch(he){case"type":b=ge;break;case"name":v=ge;break;case"checked":ue=ge;break;case"defaultChecked":be=ge;break;case"value":M=ge;break;case"defaultValue":L=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,r));break;default:ge!==we&&$t(i,r,he,ge,f,we)}}Za(i,M,L,G,ue,be,b,v);return;case"select":ge=M=L=he=null;for(b in c)if(G=c[b],c.hasOwnProperty(b)&&G!=null)switch(b){case"value":break;case"multiple":ge=G;default:f.hasOwnProperty(b)||$t(i,r,b,null,f,G)}for(v in f)if(b=f[v],G=c[v],f.hasOwnProperty(v)&&(b!=null||G!=null))switch(v){case"value":he=b;break;case"defaultValue":L=b;break;case"multiple":M=b;default:b!==G&&$t(i,r,v,b,f,G)}r=L,c=M,f=ge,he!=null?Qa(i,!!c,he,!1):!!f!=!!c&&(r!=null?Qa(i,!!c,r,!0):Qa(i,!!c,c?[]:"",!1));return;case"textarea":ge=he=null;for(L in c)if(v=c[L],c.hasOwnProperty(L)&&v!=null&&!f.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:$t(i,r,L,null,f,v)}for(M in f)if(v=f[M],b=c[M],f.hasOwnProperty(M)&&(v!=null||b!=null))switch(M){case"value":he=v;break;case"defaultValue":ge=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==b&&$t(i,r,M,v,f,b)}Tc(i,he,ge);return;case"option":for(var Ue in c)he=c[Ue],c.hasOwnProperty(Ue)&&he!=null&&!f.hasOwnProperty(Ue)&&(Ue==="selected"?i.selected=!1:$t(i,r,Ue,null,f,he));for(G in f)he=f[G],ge=c[G],f.hasOwnProperty(G)&&he!==ge&&(he!=null||ge!=null)&&(G==="selected"?i.selected=he&&typeof he!="function"&&typeof he!="symbol":$t(i,r,G,he,f,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in c)he=c[Ze],c.hasOwnProperty(Ze)&&he!=null&&!f.hasOwnProperty(Ze)&&$t(i,r,Ze,null,f,he);for(ue in f)if(he=f[ue],ge=c[ue],f.hasOwnProperty(ue)&&he!==ge&&(he!=null||ge!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:$t(i,r,ue,he,f,ge)}return;default:if(Mc(r)){for(var qt in c)he=c[qt],c.hasOwnProperty(qt)&&he!==void 0&&!f.hasOwnProperty(qt)&&qg(i,r,qt,void 0,f,he);for(be in f)he=f[be],ge=c[be],!f.hasOwnProperty(be)||he===ge||he===void 0&&ge===void 0||qg(i,r,be,he,f,ge);return}}for(var se in c)he=c[se],c.hasOwnProperty(se)&&he!=null&&!f.hasOwnProperty(se)&&$t(i,r,se,null,f,he);for(we in f)he=f[we],ge=c[we],!f.hasOwnProperty(we)||he===ge||he==null&&ge==null||$t(i,r,we,he,f,ge)}function F1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dE(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var v=c[f],b=v.transferSize,M=v.initiatorType,L=v.duration;if(b&&L&&F1(M)){for(M=0,L=v.responseEnd,f+=1;f<c.length;f++){var G=c[f],ue=G.startTime;if(ue>L)break;var be=G.transferSize,we=G.initiatorType;be&&F1(we)&&(G=G.responseEnd,M+=be*(G<L?1:(L-ue)/(G-ue)))}if(--f,r+=8*(b+M)/(v.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Gg=null,Xg=null;function Vh(i){return i.nodeType===9?i:i.ownerDocument}function H1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U1(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Kg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Zg=null;function hE(){var i=window.event;return i&&i.type==="popstate"?i===Zg?!1:(Zg=i,!0):(Zg=null,!1)}var I1=typeof setTimeout=="function"?setTimeout:void 0,fE=typeof clearTimeout=="function"?clearTimeout:void 0,Y1=typeof Promise=="function"?Promise:void 0,pE=typeof queueMicrotask=="function"?queueMicrotask:typeof Y1<"u"?function(i){return Y1.resolve(null).then(i).catch(mE)}:I1;function mE(i){setTimeout(function(){throw i})}function Sr(i){return i==="head"}function W1(i,r){var c=r,f=0;do{var v=c.nextSibling;if(i.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(v),Cl(r);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")uu(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,uu(c);for(var b=c.firstChild;b;){var M=b.nextSibling,L=b.nodeName;b[Ct]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=M}}else c==="body"&&uu(i.ownerDocument.body);c=v}while(c);Cl(r)}function $1(i,r){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function Qg(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Qg(c),hs(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function gE(i,r,c,f){for(;i.nodeType===1;){var v=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Ct])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Js(i.nextSibling),i===null)break}return null}function xE(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Js(i.nextSibling),i===null))return null;return i}function q1(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Js(i.nextSibling),i===null))return null;return i}function Jg(i){return i.data==="$?"||i.data==="$~"}function ex(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yE(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var f=function(){r(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Js(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var tx=null;function G1(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return Js(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function X1(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function K1(i,r,c){switch(r=Vh(c),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function uu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);hs(i)}var ei=new Map,Z1=new Set;function Fh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ta=X.d;X.d={f:vE,r:bE,D:_E,C:wE,L:SE,m:jE,X:kE,S:TE,M:NE};function vE(){var i=Ta.f(),r=Eh();return i||r}function bE(i){var r=fi(i);r!==null&&r.tag===5&&r.type==="form"?p_(r):Ta.r(i)}var Nl=typeof document>"u"?null:document;function Q1(i,r,c){var f=Nl;if(f&&typeof r=="string"&&r){var v=es(r);v='link[rel="'+i+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Z1.has(v)||(Z1.add(v),i={rel:i,crossOrigin:c,href:r},f.querySelector(v)===null&&(r=f.createElement("link"),Qn(r,"link",i),Jt(r),f.head.appendChild(r)))}}function _E(i){Ta.D(i),Q1("dns-prefetch",i,null)}function wE(i,r){Ta.C(i,r),Q1("preconnect",i,r)}function SE(i,r,c){Ta.L(i,r,c);var f=Nl;if(f&&i&&r){var v='link[rel="preload"][as="'+es(r)+'"]';r==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+es(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+es(c.imageSizes)+'"]')):v+='[href="'+es(i)+'"]';var b=v;switch(r){case"style":b=Ml(i);break;case"script":b=Dl(i)}ei.has(b)||(i=y({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),ei.set(b,i),f.querySelector(v)!==null||r==="style"&&f.querySelector(du(b))||r==="script"&&f.querySelector(hu(b))||(r=f.createElement("link"),Qn(r,"link",i),Jt(r),f.head.appendChild(r)))}}function jE(i,r){Ta.m(i,r);var c=Nl;if(c&&i){var f=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+es(f)+'"][href="'+es(i)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Dl(i)}if(!ei.has(b)&&(i=y({rel:"modulepreload",href:i},r),ei.set(b,i),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(hu(b)))return}f=c.createElement("link"),Qn(f,"link",i),Jt(f),c.head.appendChild(f)}}}function TE(i,r,c){Ta.S(i,r,c);var f=Nl;if(f&&i){var v=fs(f).hoistableStyles,b=Ml(i);r=r||"default";var M=v.get(b);if(!M){var L={loading:0,preload:null};if(M=f.querySelector(du(b)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},c),(c=ei.get(b))&&nx(i,c);var G=M=f.createElement("link");Jt(G),Qn(G,"link",i),G._p=new Promise(function(ue,be){G.onload=ue,G.onerror=be}),G.addEventListener("load",function(){L.loading|=1}),G.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Hh(M,r,f)}M={type:"stylesheet",instance:M,count:1,state:L},v.set(b,M)}}}function kE(i,r){Ta.X(i,r);var c=Nl;if(c&&i){var f=fs(c).hoistableScripts,v=Dl(i),b=f.get(v);b||(b=c.querySelector(hu(v)),b||(i=y({src:i,async:!0},r),(r=ei.get(v))&&sx(i,r),b=c.createElement("script"),Jt(b),Qn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function NE(i,r){Ta.M(i,r);var c=Nl;if(c&&i){var f=fs(c).hoistableScripts,v=Dl(i),b=f.get(v);b||(b=c.querySelector(hu(v)),b||(i=y({src:i,async:!0,type:"module"},r),(r=ei.get(v))&&sx(i,r),b=c.createElement("script"),Jt(b),Qn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function J1(i,r,c,f){var v=(v=Se.current)?Fh(v):null;if(!v)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Ml(c.href),c=fs(v).hoistableStyles,f=c.get(r),f||(f={type:"style",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ml(c.href);var b=fs(v).hoistableStyles,M=b.get(i);if(M||(v=v.ownerDocument||v,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,M),(b=v.querySelector(du(i)))&&!b._p&&(M.instance=b,M.state.loading=5),ei.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ei.set(i,c),b||ME(v,i,c,M.state))),r&&f===null)throw Error(s(528,""));return M}if(r&&f!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Dl(c),c=fs(v).hoistableScripts,f=c.get(r),f||(f={type:"script",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ml(i){return'href="'+es(i)+'"'}function du(i){return'link[rel="stylesheet"]['+i+"]"}function ew(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function ME(i,r,c,f){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=i.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Qn(r,"link",c),Jt(r),i.head.appendChild(r))}function Dl(i){return'[src="'+es(i)+'"]'}function hu(i){return"script[async]"+i}function tw(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var f=i.querySelector('style[data-href~="'+es(c.href)+'"]');if(f)return r.instance=f,Jt(f),f;var v=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Jt(f),Qn(f,"style",v),Hh(f,c.precedence,i),r.instance=f;case"stylesheet":v=Ml(c.href);var b=i.querySelector(du(v));if(b)return r.state.loading|=4,r.instance=b,Jt(b),b;f=ew(c),(v=ei.get(v))&&nx(f,v),b=(i.ownerDocument||i).createElement("link"),Jt(b);var M=b;return M._p=new Promise(function(L,G){M.onload=L,M.onerror=G}),Qn(b,"link",f),r.state.loading|=4,Hh(b,c.precedence,i),r.instance=b;case"script":return b=Dl(c.src),(v=i.querySelector(hu(b)))?(r.instance=v,Jt(v),v):(f=c,(v=ei.get(b))&&(f=y({},c),sx(f,v)),i=i.ownerDocument||i,v=i.createElement("script"),Jt(v),Qn(v,"link",f),i.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Hh(f,c.precedence,i));return r.instance}function Hh(i,r,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,M=0;M<f.length;M++){var L=f[M];if(L.dataset.precedence===r)b=L;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function nx(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function sx(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Uh=null;function nw(i,r,c){if(Uh===null){var f=new Map,v=Uh=new Map;v.set(c,f)}else v=Uh,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),v=0;v<c.length;v++){var b=c[v];if(!(b[Ct]||b[it]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var M=b.getAttribute(r)||"";M=i+M;var L=f.get(M);L?L.push(b):f.set(M,[b])}}return f}function sw(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function DE(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function iw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function CE(i,r,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Ml(f.href),b=r.querySelector(du(v));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Ih.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=b,Jt(b);return}b=r.ownerDocument||r,f=ew(f),(v=ei.get(v))&&nx(f,v),b=b.createElement("link"),Jt(b);var M=b;M._p=new Promise(function(L,G){M.onload=L,M.onerror=G}),Qn(b,"link",f),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Ih.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var ix=0;function EE(i,r){return i.stylesheets&&i.count===0&&Wh(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&Wh(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&ix===0&&(ix=62500*dE());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Wh(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>ix?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Ih(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Yh=null;function Wh(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Yh=new Map,r.forEach(AE,i),Yh=null,Ih.call(i))}function AE(i,r){if(!(r.state.loading&4)){var c=Yh.get(i);if(c)var f=c.get(null);else{c=new Map,Yh.set(i,c);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var M=v[b];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),f=M)}f&&c.set(null,f)}v=r.instance,M=v.getAttribute("data-precedence"),b=c.get(M)||f,b===f&&c.set(null,v),c.set(M,v),this.count++,f=Ih.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),r.state.loading|=4}}var fu={$$typeof:B,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function OE(i,r,c,f,v,b,M,L,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function aw(i,r,c,f,v,b,M,L,G,ue,be,we){return i=new OE(i,r,c,M,G,ue,be,we,L),r=1,b===!0&&(r|=24),b=Os(3,null,null,r),i.current=b,b.stateNode=i,r=zm(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:r},Hm(b),i}function rw(i){return i?(i=rl,i):rl}function ow(i,r,c,f,v,b){v=rw(v),f.context===null?f.context=v:f.pendingContext=v,f=hr(r),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=fr(i,f,r),c!==null&&(ks(c,i,r),Wc(c,i,r))}function lw(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function ax(i,r){lw(i,r),(i=i.alternate)&&lw(i,r)}function cw(i){if(i.tag===13||i.tag===31){var r=po(i,67108864);r!==null&&ks(r,i,67108864),ax(i,67108864)}}function uw(i){if(i.tag===13||i.tag===31){var r=Bs();r=ye(r);var c=po(i,r);c!==null&&ks(c,i,r),ax(i,r)}}var $h=!0;function RE(i,r,c,f){var v=H.T;H.T=null;var b=X.p;try{X.p=2,rx(i,r,c,f)}finally{X.p=b,H.T=v}}function PE(i,r,c,f){var v=H.T;H.T=null;var b=X.p;try{X.p=8,rx(i,r,c,f)}finally{X.p=b,H.T=v}}function rx(i,r,c,f){if($h){var v=ox(f);if(v===null)$g(i,r,f,qh,c),hw(i,f);else if(zE(v,i,r,c,f))f.stopPropagation();else if(hw(i,f),r&4&&-1<LE.indexOf(i)){for(;v!==null;){var b=fi(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var M=ds(b.pendingLanes);if(M!==0){var L=b;for(L.pendingLanes|=2,L.entangledLanes|=2;M;){var G=1<<31-Qt(M);L.entanglements[1]|=G,M&=~G}Ui(b),(zt&6)===0&&(Dh=Ut()+500,ou(0))}}break;case 31:case 13:L=po(b,2),L!==null&&ks(L,b,2),Eh(),ax(b,2)}if(b=ox(f),b===null&&$g(i,r,f,qh,c),b===v)break;v=b}v!==null&&f.stopPropagation()}else $g(i,r,f,null,c)}}function ox(i){return i=Dc(i),lx(i)}var qh=null;function lx(i){if(qh=null,i=vs(i),i!==null){var r=o(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=l(r),i!==null)return i;i=null}else if(c===31){if(i=d(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return qh=i,null}function dw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cs()){case lt:return 2;case Vn:return 8;case gn:case ui:return 32;case Is:return 268435456;default:return 32}default:return 32}}var cx=!1,jr=null,Tr=null,kr=null,pu=new Map,mu=new Map,Nr=[],LE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(i,r){switch(i){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":pu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(r.pointerId)}}function gu(i,r,c,f,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},r!==null&&(r=fi(r),r!==null&&cw(r)),i):(i.eventSystemFlags|=f,r=i.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),i)}function zE(i,r,c,f,v){switch(r){case"focusin":return jr=gu(jr,i,r,c,f,v),!0;case"dragenter":return Tr=gu(Tr,i,r,c,f,v),!0;case"mouseover":return kr=gu(kr,i,r,c,f,v),!0;case"pointerover":var b=v.pointerId;return pu.set(b,gu(pu.get(b)||null,i,r,c,f,v)),!0;case"gotpointercapture":return b=v.pointerId,mu.set(b,gu(mu.get(b)||null,i,r,c,f,v)),!0}return!1}function fw(i){var r=vs(i.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){i.blockedOn=r,je(i.priority,function(){uw(c)});return}}else if(r===31){if(r=d(c),r!==null){i.blockedOn=r,je(i.priority,function(){uw(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Gh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=ox(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);so=f,c.target.dispatchEvent(f),so=null}else return r=fi(c),r!==null&&cw(r),i.blockedOn=c,!1;r.shift()}return!0}function pw(i,r,c){Gh(i)&&c.delete(r)}function BE(){cx=!1,jr!==null&&Gh(jr)&&(jr=null),Tr!==null&&Gh(Tr)&&(Tr=null),kr!==null&&Gh(kr)&&(kr=null),pu.forEach(pw),mu.forEach(pw)}function Xh(i,r){i.blockedOn===r&&(i.blockedOn=null,cx||(cx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,BE)))}var Kh=null;function mw(i){Kh!==i&&(Kh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Kh===i&&(Kh=null);for(var r=0;r<i.length;r+=3){var c=i[r],f=i[r+1],v=i[r+2];if(typeof f!="function"){if(lx(f||c)===null)continue;break}var b=fi(c);b!==null&&(i.splice(r,3),r-=3,og(b,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function Cl(i){function r(G){return Xh(G,i)}jr!==null&&Xh(jr,i),Tr!==null&&Xh(Tr,i),kr!==null&&Xh(kr,i),pu.forEach(r),mu.forEach(r);for(var c=0;c<Nr.length;c++){var f=Nr[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Nr.length&&(c=Nr[0],c.blockedOn===null);)fw(c),c.blockedOn===null&&Nr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],b=c[f+1],M=v[We]||null;if(typeof b=="function")M||mw(c);else if(M){var L=null;if(b&&b.hasAttribute("formAction")){if(v=b,M=b[We]||null)L=M.formAction;else if(lx(v)!==null)continue}else L=M.action;typeof L=="function"?c[f+1]=L:(c.splice(f,3),f-=3),mw(c)}}}function gw(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(M){return v=M})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function ux(i){this._internalRoot=i}Zh.prototype.render=ux.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,f=Bs();ow(c,f,i,r,null,null)},Zh.prototype.unmount=ux.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;ow(i.current,2,null,i,null,null),Eh(),r[Re]=null}};function Zh(i){this._internalRoot=i}Zh.prototype.unstable_scheduleHydration=function(i){if(i){var r=Oe();i={blockedOn:null,target:i,priority:r};for(var c=0;c<Nr.length&&r!==0&&r<Nr[c].priority;c++);Nr.splice(c,0,i),c===0&&fw(i)}};var xw=e.version;if(xw!=="19.2.3")throw Error(s(527,xw,"19.2.3"));X.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var VE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ms=Qh.inject(VE),It=Qh}catch{}}return yu.createRoot=function(i,r){if(!a(i))throw Error(s(299));var c=!1,f="",v=j_,b=T_,M=k_;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(M=r.onRecoverableError)),r=aw(i,1,!1,null,null,c,f,null,v,b,M,gw),i[Re]=r.current,Wg(i),new ux(r)},yu.hydrateRoot=function(i,r,c){if(!a(i))throw Error(s(299));var f=!1,v="",b=j_,M=T_,L=k_,G=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.formState!==void 0&&(G=c.formState)),r=aw(i,1,!0,r,c??null,f,v,G,b,M,L,gw),r.context=rw(null),c=r.current,f=Bs(),f=ye(f),v=hr(f),v.callback=null,fr(c,v,f),c=f,r.current.lanes=c,xs(r,c),Ui(r),i[Re]=r.current,Wg(i),new Zh(r)},yu.version="19.2.3",yu}var Nw;function ZE(){if(Nw)return fx.exports;Nw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fx.exports=KE(),fx.exports}var QE=ZE();const JE=vv(QE);MT();function Zu(){return Zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Zu.apply(this,arguments)}var Rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rr||(Rr={}));const Mw="popstate";function eA(t){t===void 0&&(t={});function e(s,a){let{pathname:o,search:l,hash:d}=s.location;return fy("",{pathname:o,search:l,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Ff(a)}return nA(e,n,null,t)}function wn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _v(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tA(){return Math.random().toString(36).substr(2,8)}function Dw(t,e){return{usr:t.state,key:t.key,idx:e}}function fy(t,e,n,s){return n===void 0&&(n=null),Zu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nc(e):e,{state:n,key:e&&e.key||s||tA()})}function Ff(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function nc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function nA(t,e,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,d=Rr.Pop,h=null,p=g();p==null&&(p=0,l.replaceState(Zu({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function y(){d=Rr.Pop;let D=g(),R=D==null?null:D-p;p=D,h&&h({action:d,location:N.location,delta:R})}function _(D,R){d=Rr.Push;let E=fy(N.location,D,R);p=g()+1;let B=Dw(E,p),U=N.createHref(E);try{l.pushState(B,"",U)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;a.location.assign(U)}o&&h&&h({action:d,location:N.location,delta:1})}function j(D,R){d=Rr.Replace;let E=fy(N.location,D,R);p=g();let B=Dw(E,p),U=N.createHref(E);l.replaceState(B,"",U),o&&h&&h({action:d,location:N.location,delta:0})}function k(D){let R=a.location.origin!=="null"?a.location.origin:a.location.href,E=typeof D=="string"?D:Ff(D);return E=E.replace(/ $/,"%20"),wn(R,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,R)}let N={get action(){return d},get location(){return t(a,l)},listen(D){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(Mw,y),h=D,()=>{a.removeEventListener(Mw,y),h=null}},createHref(D){return e(a,D)},createURL:k,encodeLocation(D){let R=k(D);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:_,replace:j,go(D){return l.go(D)}};return N}var Cw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cw||(Cw={}));function sA(t,e,n){return n===void 0&&(n="/"),iA(t,e,n)}function iA(t,e,n,s){let a=typeof e=="string"?nc(e):e,o=Xl(a.pathname||"/",n);if(o==null)return null;let l=DT(t);aA(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let p=gA(o);d=pA(l[h],p)}return d}function DT(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(o,l,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(wn(h.relativePath.startsWith(s),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(s.length));let p=Ir([s,h.relativePath]),g=n.concat(h);o.children&&o.children.length>0&&(wn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),DT(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:hA(p,o.index),routesMeta:g})};return t.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,l);else for(let h of CT(o.path))a(o,l,h)}),e}function CT(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=CT(s.join("/")),d=[];return d.push(...l.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...l),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function aA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const rA=/^:[\w-]+$/,oA=3,lA=2,cA=1,uA=10,dA=-2,Ew=t=>t==="*";function hA(t,e){let n=t.split("/"),s=n.length;return n.some(Ew)&&(s+=dA),e&&(s+=lA),n.filter(a=>!Ew(a)).reduce((a,o)=>a+(rA.test(o)?oA:o===""?cA:uA),s)}function fA(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function pA(t,e,n){let{routesMeta:s}=t,a={},o="/",l=[];for(let d=0;d<s.length;++d){let h=s[d],p=d===s.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=py({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),_=h.route;if(!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:Ir([o,y.pathname]),pathnameBase:_A(Ir([o,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(o=Ir([o,y.pathnameBase]))}return l}function py(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=mA(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((p,g,y)=>{let{paramName:_,isOptional:j}=g;if(_==="*"){let N=d[y]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const k=d[y];return j&&!k?p[_]=void 0:p[_]=(k||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function mA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_v(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function gA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _v(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const xA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yA=t=>xA.test(t);function vA(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?nc(t):t,o;if(n)if(yA(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),_v(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=Aw(n.substring(1),"/"):o=Aw(n,e)}else o=e;return{pathname:o,search:wA(s),hash:SA(a)}}function Aw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function xx(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ET(t,e){let n=bA(t);return e?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function AT(t,e,n,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=nc(t):(a=Zu({},t),wn(!a.pathname||!a.pathname.includes("?"),xx("?","pathname","search",a)),wn(!a.pathname||!a.pathname.includes("#"),xx("#","pathname","hash",a)),wn(!a.search||!a.search.includes("#"),xx("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,d;if(l==null)d=n;else{let y=e.length-1;if(!s&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),y-=1;a.pathname=_.join("/")}d=y>=0?e[y]:"/"}let h=vA(a,d),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),_A=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OT=["post","put","patch","delete"];new Set(OT);const TA=["get",...OT];new Set(TA);function Qu(){return Qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qu.apply(this,arguments)}const yp=A.createContext(null),RT=A.createContext(null),Zr=A.createContext(null),vp=A.createContext(null),Ko=A.createContext({outlet:null,matches:[],isDataRoute:!1}),PT=A.createContext(null);function kA(t,e){let{relative:n}=e===void 0?{}:e;gd()||wn(!1);let{basename:s,navigator:a}=A.useContext(Zr),{hash:o,pathname:l,search:d}=bp(t,{relative:n}),h=l;return s!=="/"&&(h=l==="/"?s:Ir([s,l])),a.createHref({pathname:h,search:d,hash:o})}function gd(){return A.useContext(vp)!=null}function sc(){return gd()||wn(!1),A.useContext(vp).location}function LT(t){A.useContext(Zr).static||A.useLayoutEffect(t)}function NA(){let{isDataRoute:t}=A.useContext(Ko);return t?FA():MA()}function MA(){gd()||wn(!1);let t=A.useContext(yp),{basename:e,future:n,navigator:s}=A.useContext(Zr),{matches:a}=A.useContext(Ko),{pathname:o}=sc(),l=JSON.stringify(ET(a,n.v7_relativeSplatPath)),d=A.useRef(!1);return LT(()=>{d.current=!0}),A.useCallback(function(p,g){if(g===void 0&&(g={}),!d.current)return;if(typeof p=="number"){s.go(p);return}let y=AT(p,JSON.parse(l),o,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ir([e,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[e,s,l,o,t])}function bp(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=A.useContext(Zr),{matches:a}=A.useContext(Ko),{pathname:o}=sc(),l=JSON.stringify(ET(a,s.v7_relativeSplatPath));return A.useMemo(()=>AT(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function DA(t,e){return CA(t,e)}function CA(t,e,n,s){gd()||wn(!1);let{navigator:a}=A.useContext(Zr),{matches:o}=A.useContext(Ko),l=o[o.length-1],d=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let p=sc(),g;if(e){var y;let D=typeof e=="string"?nc(e):e;h==="/"||(y=D.pathname)!=null&&y.startsWith(h)||wn(!1),g=D}else g=p;let _=g.pathname||"/",j=_;if(h!=="/"){let D=h.replace(/^\//,"").split("/");j="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let k=sA(t,{pathname:j}),N=PA(k&&k.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:Ir([h,a.encodeLocation?a.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:Ir([h,a.encodeLocation?a.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,n,s);return e&&N?A.createElement(vp.Provider,{value:{location:Qu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Rr.Pop}},N):N}function EA(){let t=VA(),e=jA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:a},n):null,null)}const AA=A.createElement(EA,null);class OA extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Ko.Provider,{value:this.props.routeContext},A.createElement(PT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RA(t){let{routeContext:e,match:n,children:s}=t,a=A.useContext(yp);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Ko.Provider,{value:e},s)}function PA(t,e,n,s){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=(a=n)==null?void 0:a.errors;if(d!=null){let g=l.findIndex(y=>y.route.id&&d?.[y.route.id]!==void 0);g>=0||wn(!1),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,p=-1;if(n&&s&&s.v7_partialHydration)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:_,errors:j}=n,k=y.route.loader&&_[y.route.id]===void 0&&(!j||j[y.route.id]===void 0);if(y.route.lazy||k){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,y,_)=>{let j,k=!1,N=null,D=null;n&&(j=d&&y.route.id?d[y.route.id]:void 0,N=y.route.errorElement||AA,h&&(p<0&&_===0?(HA("route-fallback"),k=!0,D=null):p===_&&(k=!0,D=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,_+1)),E=()=>{let B;return j?B=N:k?B=D:y.route.Component?B=A.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=g,A.createElement(RA,{match:y,routeContext:{outlet:g,matches:R,isDataRoute:n!=null},children:B})};return n&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?A.createElement(OA,{location:n.location,revalidation:n.revalidation,component:N,error:j,children:E(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):E()},null)}var zT=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(zT||{}),BT=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(BT||{});function LA(t){let e=A.useContext(yp);return e||wn(!1),e}function zA(t){let e=A.useContext(RT);return e||wn(!1),e}function BA(t){let e=A.useContext(Ko);return e||wn(!1),e}function VT(t){let e=BA(),n=e.matches[e.matches.length-1];return n.route.id||wn(!1),n.route.id}function VA(){var t;let e=A.useContext(PT),n=zA(),s=VT();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function FA(){let{router:t}=LA(zT.UseNavigateStable),e=VT(BT.UseNavigateStable),n=A.useRef(!1);return LT(()=>{n.current=!0}),A.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Qu({fromRouteId:e},o)))},[t,e])}const Ow={};function HA(t,e,n){Ow[t]||(Ow[t]=!0)}function UA(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function wi(t){wn(!1)}function IA(t){let{basename:e="/",children:n=null,location:s,navigationType:a=Rr.Pop,navigator:o,static:l=!1,future:d}=t;gd()&&wn(!1);let h=e.replace(/^\/*/,"/"),p=A.useMemo(()=>({basename:h,navigator:o,static:l,future:Qu({v7_relativeSplatPath:!1},d)}),[h,d,o,l]);typeof s=="string"&&(s=nc(s));let{pathname:g="/",search:y="",hash:_="",state:j=null,key:k="default"}=s,N=A.useMemo(()=>{let D=Xl(g,h);return D==null?null:{location:{pathname:D,search:y,hash:_,state:j,key:k},navigationType:a}},[h,g,y,_,j,k,a]);return N==null?null:A.createElement(Zr.Provider,{value:p},A.createElement(vp.Provider,{children:n,value:N}))}function YA(t){let{children:e,location:n}=t;return DA(my(e),n)}new Promise(()=>{});function my(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(s,a)=>{if(!A.isValidElement(s))return;let o=[...e,a];if(s.type===A.Fragment){n.push.apply(n,my(s.props.children,o));return}s.type!==wi&&wn(!1),!s.props.index||!s.props.children||wn(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=my(s.props.children,o)),n.push(l)}),n}function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Hf.apply(this,arguments)}function FT(t,e){if(t==null)return{};var n={},s=Object.keys(t),a,o;for(o=0;o<s.length;o++)a=s[o],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function WA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $A(t,e){return t.button===0&&(!e||e==="_self")&&!WA(t)}const qA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XA="6";try{window.__reactRouterVersion=XA}catch{}const KA=A.createContext({isTransitioning:!1}),ZA="startTransition",Rw=$E[ZA];function QA(t){let{basename:e,children:n,future:s,window:a}=t,o=A.useRef();o.current==null&&(o.current=eA({window:a,v5Compat:!0}));let l=o.current,[d,h]=A.useState({action:l.action,location:l.location}),{v7_startTransition:p}=s||{},g=A.useCallback(y=>{p&&Rw?Rw(()=>h(y)):h(y)},[h,p]);return A.useLayoutEffect(()=>l.listen(g),[l,g]),A.useEffect(()=>UA(s),[s]),A.createElement(IA,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:l,future:s})}const JA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oo=A.forwardRef(function(e,n){let{onClick:s,relative:a,reloadDocument:o,replace:l,state:d,target:h,to:p,preventScrollReset:g,viewTransition:y}=e,_=FT(e,qA),{basename:j}=A.useContext(Zr),k,N=!1;if(typeof p=="string"&&e5.test(p)&&(k=p,JA))try{let B=new URL(window.location.href),U=p.startsWith("//")?new URL(B.protocol+p):new URL(p),$=Xl(U.pathname,j);U.origin===B.origin&&$!=null?p=$+U.search+U.hash:N=!0}catch{}let D=kA(p,{relative:a}),R=s5(p,{replace:l,state:d,target:h,preventScrollReset:g,relative:a,viewTransition:y});function E(B){s&&s(B),B.defaultPrevented||R(B)}return A.createElement("a",Hf({},_,{href:k||D,onClick:N||o?s:E,ref:n,target:h}))}),t5=A.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:a=!1,className:o="",end:l=!1,style:d,to:h,viewTransition:p,children:g}=e,y=FT(e,GA),_=bp(h,{relative:y.relative}),j=sc(),k=A.useContext(RT),{navigator:N,basename:D}=A.useContext(Zr),R=k!=null&&i5(_)&&p===!0,E=N.encodeLocation?N.encodeLocation(_).pathname:_.pathname,B=j.pathname,U=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;a||(B=B.toLowerCase(),U=U?U.toLowerCase():null,E=E.toLowerCase()),U&&D&&(U=Xl(U,D)||U);const $=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let I=B===E||!l&&B.startsWith(E)&&B.charAt($)==="/",O=U!=null&&(U===E||!l&&U.startsWith(E)&&U.charAt(E.length)==="/"),q={isActive:I,isPending:O,isTransitioning:R},J=I?s:void 0,oe;typeof o=="function"?oe=o(q):oe=[o,I?"active":null,O?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let ie=typeof d=="function"?d(q):d;return A.createElement(Oo,Hf({},y,{"aria-current":J,className:oe,ref:n,style:ie,to:h,viewTransition:p}),typeof g=="function"?g(q):g)});var gy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gy||(gy={}));var Pw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Pw||(Pw={}));function n5(t){let e=A.useContext(yp);return e||wn(!1),e}function s5(t,e){let{target:n,replace:s,state:a,preventScrollReset:o,relative:l,viewTransition:d}=e===void 0?{}:e,h=NA(),p=sc(),g=bp(t,{relative:l});return A.useCallback(y=>{if($A(y,n)){y.preventDefault();let _=s!==void 0?s:Ff(p)===Ff(g);h(t,{replace:_,state:a,preventScrollReset:o,relative:l,viewTransition:d})}},[p,h,g,s,a,n,t,o,l,d])}function i5(t,e){e===void 0&&(e={});let n=A.useContext(KA);n==null&&wn(!1);let{basename:s}=n5(gy.useViewTransitionState),a=bp(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Xl(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=Xl(n.nextLocation.pathname,s)||n.nextLocation.pathname;return py(a.pathname,l)!=null||py(a.pathname,o)!=null}const a5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HT=(...t)=>t.filter((e,n,s)=>!!e&&s.indexOf(e)===n).join(" ");var r5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o5=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:l,...d},h)=>A.createElement("svg",{ref:h,...r5,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:HT("lucide",a),...d},[...l.map(([p,g])=>A.createElement(p,g)),...Array.isArray(o)?o:[o]]));const et=(t,e)=>{const n=A.forwardRef(({className:s,...a},o)=>A.createElement(o5,{ref:o,iconNode:e,className:HT(`lucide-${a5(t)}`,s),...a}));return n.displayName=`${t}`,n};const Ju=et("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const wv=et("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);const Sv=et("ArrowUpFromLine",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const xy=et("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const UT=et("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const yx=et("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const yy=et("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const IT=et("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);const Lw=et("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const jv=et("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const zw=et("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Bw=et("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const l5=et("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const c5=et("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Vw=et("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Fw=et("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);const u5=et("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);const vy=et("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const YT=et("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const WT=et("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);const d5=et("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Tv=et("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const Hw=et("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const Uf=et("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const Uw=et("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const h5=et("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Iw=et("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const f5=et("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const p5=et("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const m5=et("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const kv=et("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const g5=et("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);const x5=et("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);const $T=et("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const y5=et("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const v5=et("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const qT=et("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const by=et("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const b5=et("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const GT=et("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const XT=et("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);const Nv=et("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Yw=et("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const _5=et("TreePalm",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]);const Ww=et("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const _y=et("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const vx=et("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const wy=et("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const _p=et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const $i=et("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function bx(t){return u.jsx("svg",{viewBox:"0 0 741 741",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:u.jsx("path",{d:"m0-71v71h741v-142h-741zm0 882.5v70.5h741v-141h-741zm355.5-782.94c-3.3 0.83-8.48 2.92-11.5 4.62-3.02 1.71-6.85 4.12-8.5 5.36-1.65 1.23-4.89 4.66-7.2 7.6-2.31 2.95-5.52 8.06-7.13 11.36-1.61 3.3-5.03 13.2-7.6 22-2.57 8.8-5.52 18.7-6.55 22-1.03 3.3-4.63 15.9-8.01 28-3.37 12.1-6.97 24.7-7.98 28-1.02 3.3-3.5 11.63-5.51 18.5-2.01 6.88-6.14 19.93-9.18 29-3.04 9.08-8.34 22.35-11.76 29.5-3.43 7.15-8.26 16.15-10.75 20-2.48 3.85-7.22 10.38-10.53 14.5-3.31 4.13-9.12 10.22-12.91 13.55-3.79 3.32-8.69 7.4-10.89 9.06-2.2 1.65-7.6 5.29-12 8.09-4.4 2.79-18.35 10.37-31 16.84-12.65 6.47-25.7 13.66-29 15.97-3.3 2.32-7.61 6.19-9.58 8.6-1.98 2.41-4.74 6.42-6.14 8.89-1.41 2.48-3.38 6.98-4.4 10-1.29 3.85-1.83 8.35-1.81 15 0.03 7.34 0.58 11.09 2.42 16.5 1.39 4.06 4.31 9.5 6.95 12.97 2.51 3.28 7.09 8 10.19 10.5 3.09 2.49 13.44 8.52 23 13.4 9.55 4.88 21.19 10.92 25.87 13.43 4.68 2.51 11.87 6.81 16 9.55 4.12 2.75 10.65 7.55 14.5 10.67 3.85 3.12 9.93 8.82 13.5 12.66 3.57 3.84 9.4 11.22 12.95 16.4 3.55 5.18 8.58 13.7 11.17 18.92 2.59 5.23 5.69 11.98 6.9 15 1.2 3.03 3.67 9.78 5.49 15 1.82 5.23 5.56 16.7 8.31 25.5 2.76 8.8 7.55 24.78 10.65 35.5 3.11 10.73 7.84 26.93 10.51 36 2.68 9.08 6.93 23.81 9.45 32.75 2.51 8.94 5.64 18.39 6.95 21 1.31 2.61 4.09 7 6.19 9.75 2.09 2.75 5.63 6.67 7.87 8.72 2.23 2.04 6.54 5.05 9.56 6.69 3.02 1.64 8.43 3.73 12 4.66 4.88 1.26 8.62 1.53 15 1.06 6.56-0.49 10.1-1.36 15.5-3.85 3.85-1.77 9.25-4.88 12-6.92 2.75-2.03 6.56-5.65 8.47-8.03 1.91-2.38 4.98-7.25 6.82-10.83 1.84-3.57 4.02-8.97 4.84-12 0.82-3.02 2.79-10 4.36-15.5 1.58-5.5 5.36-18.55 8.4-29 3.05-10.45 8.5-29.12 12.12-41.5 3.61-12.37 7.45-25.54 8.53-29.25 1.08-3.71 4.71-14.51 8.07-24 3.36-9.49 8.51-22.2 11.45-28.25 2.93-6.05 7.22-13.92 9.53-17.5 2.3-3.57 6.76-9.65 9.91-13.5 3.15-3.85 8.94-10.04 12.86-13.75 3.93-3.71 10.4-9.04 14.39-11.84 3.99-2.8 11.3-7.48 16.25-10.4 4.95-2.92 17.77-9.76 28.5-15.19 10.73-5.44 21.52-11.27 24-12.96 2.48-1.69 6.71-5.5 9.41-8.47 2.7-2.96 6.38-8.54 8.18-12.39 1.8-3.85 3.75-10.04 4.34-13.75 0.73-4.63 0.76-8.94 0.07-13.75-0.55-3.85-1.92-9.59-3.05-12.75-1.12-3.16-4.05-8.56-6.5-12-2.45-3.44-6.81-8.02-9.7-10.17-2.89-2.16-16.05-9.52-29.25-16.35-13.2-6.84-28.09-15.08-33.1-18.33-5-3.24-11.08-7.21-13.5-8.81-2.42-1.59-8.67-7.22-13.9-12.5-5.23-5.27-12.25-13.64-15.6-18.59-3.36-4.95-8.02-12.6-10.35-17-2.34-4.4-5.36-10.7-6.71-14-1.36-3.3-4.63-11.85-7.28-19-2.66-7.15-6.72-19.75-9.03-28-2.32-8.25-5.29-18.37-6.6-22.5-1.31-4.12-5.28-17.62-8.81-30-3.53-12.37-8.1-28.12-10.15-35-2.06-6.87-4.52-15.42-5.48-19-0.96-3.57-3.15-9.87-4.87-14-1.72-4.12-5.34-10.42-8.03-14-3.25-4.3-7.22-8.01-11.75-10.97-3.76-2.46-9.32-5.31-12.34-6.33-3.02-1.03-9.1-2.04-13.5-2.26-5.13-0.26-10.16 0.14-14 1.12z"})})}async function Qe(t,e="GET",n){const s=t.startsWith("/")?t.slice(1):t,a={method:e,headers:{Accept:"application/json","Content-Type":"application/json"}};n&&(e==="POST"||e==="DELETE")&&(a.body=JSON.stringify(n));const o=await fetch(s,a);if(!o.ok)throw new Error(`${t} -> ${o.status}`);return o.json()}const Me={schedule:()=>Qe("/api/schedule"),scheduleTodayWithHistory:()=>Qe("/api/schedule/today_with_history"),status:()=>Qe("/api/status"),health:()=>Qe("/api/health"),version:()=>Qe("/api/version"),horizon:()=>Qe("/api/forecast/horizon"),config:()=>Qe("/api/config"),configSave:t=>Qe("/api/config/save","POST",t),configReset:()=>Qe("/api/config/reset","POST"),setTheme:t=>Qe("/api/theme","POST",t),haAverage:()=>Qe("/api/ha/average"),haWaterToday:()=>Qe("/api/ha/water_today"),haTest:t=>Qe("/api/ha/test","POST",t),haEntities:()=>Qe("/api/ha/entities"),haServices:()=>Qe("/api/ha/services"),haEntityState:t=>Qe(`/api/ha/entity/${t}`),learningStatus:()=>Qe("/api/learning/status"),learningHistory:()=>Qe("/api/learning/history"),learningDailyMetrics:()=>Qe("/api/learning/daily_metrics"),learningRun:()=>Qe("/api/learning/run","POST"),learningLoops:()=>Qe("/api/learning/loops"),theme:()=>Qe("/api/themes"),runPlanner:()=>Qe("/api/run_planner","POST"),loadServerPlan:()=>Qe("/api/db/current_schedule"),pushToDb:()=>Qe("/api/db/push_current","POST"),resetToOptimal:()=>Qe("/api/schedule/save","POST"),simulate:async t=>{const e=await fetch("api/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Simulation failed");return e.json()},getAdvice:async()=>{const t=await fetch("api/analyst/advice");if(!t.ok)throw new Error("Failed to fetch advice");return t.json()},analystRun:()=>Qe("/api/analyst/run"),debug:()=>Qe("/api/debug"),debugLogs:()=>Qe("/api/debug/logs"),historySoc:(t="today")=>Qe(`/api/history/soc?date=${t}`),forecastEval:()=>Qe("/api/forecast/eval"),forecastDay:t=>Qe(t?`/api/forecast/day?date=${t}`:"/api/forecast/day"),forecastRunEval:(t=7)=>Qe("/api/forecast/run_eval","POST",{days_back:t}),forecastRunForward:(t=48)=>Qe("/api/forecast/run_forward","POST",{horizon_hours:t}),schedulerStatus:()=>Qe("/api/scheduler/status"),aurora:{dashboard:()=>Qe("/api/aurora/dashboard"),briefing:t=>Qe("/api/aurora/briefing","POST",t),toggleReflex:t=>Qe("/api/aurora/config/toggle_reflex","POST",{enabled:t})},performanceData:(t=7)=>Qe(`/api/performance/data?days=${t}`),executor:{status:()=>Qe("/api/executor/status"),run:()=>Qe("/api/executor/run","POST"),pause:()=>Qe("/api/executor/pause","POST"),resume:()=>Qe("/api/executor/resume","POST"),quickAction:{get:()=>Qe("/api/executor/quick-action"),set:(t,e)=>Qe("/api/executor/quick-action","POST",{type:t,duration_minutes:e}),clear:()=>Qe("/api/executor/quick-action","DELETE")}},waterBoost:{status:()=>Qe("/api/water/boost"),start:t=>Qe("/api/water/boost","POST",{duration_minutes:t}),cancel:()=>Qe("/api/water/boost","DELETE")},energyToday:()=>Qe("/api/energy/today")},_x={socValue:t=>t.current_soc?.value,pvDays:t=>t.pv_forecast_days??t.pv_days_schedule??null,wxDays:t=>t.weather_forecast_days??null};function KT(){const[t,e]=A.useState("dark"),[n,s]=A.useState(!0),a=h=>h==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":h,o=h=>{const p=document.documentElement;h==="dark"?p.classList.add("dark"):p.classList.remove("dark")};A.useEffect(()=>{(async()=>{try{const g=(await Me.config())?.ui?.theme_mode;if(g&&["light","dark","system"].includes(g))e(g),o(a(g));else{const y=localStorage.getItem("darkstar-theme");y&&["light","dark","system"].includes(y)?(e(y),o(a(y))):(e("dark"),o("dark"))}}catch{const g=localStorage.getItem("darkstar-theme")||"dark";e(g),o(a(g))}finally{s(!1)}})()},[]),A.useEffect(()=>{if(t!=="system")return;const h=window.matchMedia("(prefers-color-scheme: dark)"),p=g=>{o(g.matches?"dark":"light")};return h.addEventListener("change",p),()=>h.removeEventListener("change",p)},[t]);const l=async()=>{const h=t==="dark"?"light":"dark";e(h),o(h),localStorage.setItem("darkstar-theme",h);try{await Me.configSave({ui:{theme_mode:h}})}catch(p){console.warn("[ThemeToggle] Failed to save theme to backend:",p)}};if(n)return u.jsx("div",{className:"h-12 w-12 rounded-2xl border border-line/70 bg-surface/80 flex items-center justify-center",children:u.jsx("div",{className:"h-5 w-5 rounded-full bg-muted/30 animate-pulse"})});const d=a(t);return u.jsxs("button",{type:"button",onClick:l,className:"group relative flex items-center justify-center w-12 h-12 rounded-2xl border border-line/70 bg-surface/80 hover:bg-surface2 transition",title:`Switch to ${d==="dark"?"light":"dark"} mode`,children:[d==="dark"?u.jsx(Nv,{className:"h-5 w-5 text-muted group-hover:text-accent transition-colors"}):u.jsx(p5,{className:"h-5 w-5 text-muted group-hover:text-accent transition-colors"}),u.jsx("span",{className:"absolute -right-2 top-1 rounded-full bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition z-50 whitespace-nowrap",children:d==="dark"?"Light mode":"Dark mode"})]})}const vu=({to:t,icon:e,label:n,onClick:s})=>{const a="group relative flex items-center justify-center w-12 h-12 rounded-2xl border border-line/70 bg-surface/80 hover:bg-surface2 transition",o="ring-2 ring-accent/50",l=u.jsxs(u.Fragment,{children:[u.jsx(e,{className:"h-5 w-5 text-muted group-hover:text-text"}),u.jsx("span",{className:"absolute -right-2 top-1 rounded-pill bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition z-50 whitespace-nowrap",children:n})]});return t?u.jsx(t5,{to:t,className:({isActive:d})=>`${a} ${d?o:""}`,title:n,children:l}):u.jsx("button",{onClick:s,className:a,title:n,children:l})};function w5(){const{pathname:t}=sc(),[e,n]=A.useState(!1),[s,a]=A.useState(null),[o,l]=A.useState("...");A.useEffect(()=>{const h=async()=>{try{await Me.status(),a(!0)}catch{a(!1)}};h();const p=setInterval(h,3e4);return()=>clearInterval(p)},[]),A.useEffect(()=>{Me.version().then(h=>l(h.version||"dev")).catch(()=>l("dev"))},[]);const d=()=>n(!1);return u.jsxs(u.Fragment,{children:[u.jsx("aside",{className:"hidden lg:block fixed left-6 top-6 bottom-6 z-50",children:u.jsxs("div",{className:"h-full w-16 rounded-2xl bg-surface shadow-float border border-line/60 flex flex-col items-center gap-3 p-2",children:[u.jsxs(Oo,{to:"/",className:"mt-1 mb-1 flex items-center justify-center group relative",children:[u.jsx("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-surface2 border border-line/60 overflow-hidden",children:u.jsx(bx,{className:"h-8 w-8 text-accent"})}),u.jsxs("span",{className:"absolute left-14 top-1/2 -translate-y-1/2 rounded-pill bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition whitespace-nowrap z-50 pointer-events-none",children:["darkstar v",o]})]}),u.jsx(vu,{to:"/",icon:Uf,label:"Dash"}),u.jsx(vu,{to:"/executor",icon:vy,label:"Executor"}),u.jsx(vu,{to:"/aurora",icon:yy,label:"Aurora"}),u.jsx(vu,{to:"/debug",icon:Lw,label:"Debug"}),u.jsx("div",{className:"mt-auto w-8 h-px bg-line/70"}),u.jsxs("div",{className:"py-2 flex flex-col items-center gap-2",children:[u.jsx("div",{className:`h-1.5 w-1.5 rounded-full transition-all duration-500 ${s===!0?"bg-good shadow-[0_0_8px_rgba(31,178,86,0.5)]":s===!1?"bg-bad":"bg-slate-700"}`,title:s===!0?"System Online":s===!1?"System Offline":"Connecting..."}),u.jsxs("span",{className:"text-[10px] text-muted/30 font-mono select-none tracking-widest whitespace-nowrap opacity-50 hover:opacity-100 transition",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:["darkstar v",o]})]}),u.jsx(KT,{}),u.jsx(vu,{to:"/settings",icon:by,label:"Settings"})]})}),u.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-surface/95 border-b border-line/60 flex items-center justify-between px-4 py-2",children:[u.jsx("button",{type:"button","aria-label":"Open navigation",className:"inline-flex h-10 w-10 items-center justify-center rounded-xl border border-line/70 bg-surface2 text-muted hover:border-accent hover:text-accent",onClick:()=>n(!0),children:u.jsx(f5,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[u.jsx(bx,{className:"h-5 w-5 text-accent"}),u.jsxs("span",{className:"font-mono",children:["v",o]})]}),u.jsx("div",{className:"w-10"})]}),e&&u.jsxs("div",{className:"lg:hidden fixed inset-0 z-50 bg-[rgba(4,6,10,0.92)] backdrop-blur-sm",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-line/60",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-2xl bg-surface2 border border-line/60",children:u.jsx(bx,{className:"h-5 w-5 text-accent"})}),u.jsxs("span",{className:"text-muted font-mono",children:["darkstar v",o]})]}),u.jsx("button",{type:"button","aria-label":"Close navigation",className:"inline-flex h-9 w-9 items-center justify-center rounded-xl border border-line/70 bg-surface text-muted hover:border-accent hover:text-accent",onClick:d,children:u.jsx(_p,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",onClick:d,children:[u.jsxs(Oo,{to:"/",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(Uf,{className:`h-6 w-6 ${t==="/"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Dash"})]}),u.jsxs(Oo,{to:"/executor",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/executor"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(vy,{className:`h-6 w-6 ${t==="/executor"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Executor"})]}),u.jsxs(Oo,{to:"/aurora",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/aurora"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(yy,{className:`h-6 w-6 ${t==="/aurora"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Aurora"})]}),u.jsxs(Oo,{to:"/debug",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/debug"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(Lw,{className:`h-6 w-6 ${t==="/debug"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Debug"})]}),u.jsxs(Oo,{to:"/settings",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/settings"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[u.jsx(by,{className:`h-6 w-6 ${t==="/settings"?"text-accent":"text-muted"}`}),u.jsx("span",{className:"text-sm",children:"Settings"})]})]})]})]})}class S5 extends A.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("[ErrorBoundary] Caught error:",e),console.error("[ErrorBoundary] Component stack:",n.componentStack)}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-canvas flex items-center justify-center p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-surface border border-line rounded-2xl p-8 shadow-float text-center",children:[u.jsx("div",{className:"h-16 w-16 mx-auto mb-4 rounded-full bg-red-500/20 border border-red-500/40 flex items-center justify-center",children:u.jsx("svg",{className:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),u.jsx("h1",{className:"text-lg font-semibold text-text mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-sm text-muted mb-4",children:"The application encountered an unexpected error."}),this.state.error&&u.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30",children:u.jsx("code",{className:"text-xs text-red-400 break-all",children:this.state.error.message})}),u.jsx("button",{onClick:this.handleReload,className:"px-6 py-2.5 rounded-full bg-accent text-canvas font-medium text-sm hover:bg-accent2 transition-colors",children:"Reload Page"}),u.jsx("p",{className:"mt-4 text-xs text-muted/60",children:"If this keeps happening, check the browser console for details."})]})}):this.props.children}}const j5={card:"rounded-xl2 bg-surface shadow-float border border-line/60"};function Xe({children:t,className:e=""}){return u.jsx("div",{className:`${j5.card} ${e}`,children:t})}function xd(t){return t+.5|0}const Pr=(t,e,n)=>Math.max(Math.min(t,n),e);function Au(t){return Pr(xd(t*2.55),0,255)}function Yr(t){return Pr(xd(t*255),0,255)}function Ea(t){return Pr(xd(t/2.55)/100,0,1)}function $w(t){return Pr(xd(t*100),0,100)}const ti={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Sy=[..."0123456789ABCDEF"],T5=t=>Sy[t&15],k5=t=>Sy[(t&240)>>4]+Sy[t&15],Jh=t=>(t&240)>>4===(t&15),N5=t=>Jh(t.r)&&Jh(t.g)&&Jh(t.b)&&Jh(t.a);function M5(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ti[t[1]]*17,g:255&ti[t[2]]*17,b:255&ti[t[3]]*17,a:e===5?ti[t[4]]*17:255}:(e===7||e===9)&&(n={r:ti[t[1]]<<4|ti[t[2]],g:ti[t[3]]<<4|ti[t[4]],b:ti[t[5]]<<4|ti[t[6]],a:e===9?ti[t[7]]<<4|ti[t[8]]:255})),n}const D5=(t,e)=>t<255?e(t):"";function C5(t){var e=N5(t)?T5:k5;return t?"#"+e(t.r)+e(t.g)+e(t.b)+D5(t.a,e):void 0}const E5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ZT(t,e,n){const s=e*Math.min(n,1-n),a=(o,l=(o+t/30)%12)=>n-s*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function A5(t,e,n){const s=(a,o=(a+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function O5(t,e,n){const s=ZT(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function R5(t,e,n,s,a){return t===a?(e-n)/s+(e<n?6:0):e===a?(n-t)/s+2:(t-e)/s+4}function Mv(t){const n=t.r/255,s=t.g/255,a=t.b/255,o=Math.max(n,s,a),l=Math.min(n,s,a),d=(o+l)/2;let h,p,g;return o!==l&&(g=o-l,p=d>.5?g/(2-o-l):g/(o+l),h=R5(n,s,a,g,o),h=h*60+.5),[h|0,p||0,d]}function Dv(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Yr)}function Cv(t,e,n){return Dv(ZT,t,e,n)}function P5(t,e,n){return Dv(O5,t,e,n)}function L5(t,e,n){return Dv(A5,t,e,n)}function QT(t){return(t%360+360)%360}function z5(t){const e=E5.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Au(+e[5]):Yr(+e[5]));const a=QT(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?s=P5(a,o,l):e[1]==="hsv"?s=L5(a,o,l):s=Cv(a,o,l),{r:s[0],g:s[1],b:s[2],a:n}}function B5(t,e){var n=Mv(t);n[0]=QT(n[0]+e),n=Cv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function V5(t){if(!t)return;const e=Mv(t),n=e[0],s=$w(e[1]),a=$w(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${Ea(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const qw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function F5(){const t={},e=Object.keys(Gw),n=Object.keys(qw);let s,a,o,l,d;for(s=0;s<e.length;s++){for(l=d=e[s],a=0;a<n.length;a++)o=n[a],d=d.replace(o,qw[o]);o=parseInt(Gw[l],16),t[d]=[o>>16&255,o>>8&255,o&255]}return t}let ef;function H5(t){ef||(ef=F5(),ef.transparent=[0,0,0,0]);const e=ef[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const U5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function I5(t){const e=U5.exec(t);let n=255,s,a,o;if(e){if(e[7]!==s){const l=+e[7];n=e[8]?Au(l):Pr(l*255,0,255)}return s=+e[1],a=+e[3],o=+e[5],s=255&(e[2]?Au(s):Pr(s,0,255)),a=255&(e[4]?Au(a):Pr(a,0,255)),o=255&(e[6]?Au(o):Pr(o,0,255)),{r:s,g:a,b:o,a:n}}}function Y5(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ea(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const wx=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,El=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function W5(t,e,n){const s=El(Ea(t.r)),a=El(Ea(t.g)),o=El(Ea(t.b));return{r:Yr(wx(s+n*(El(Ea(e.r))-s))),g:Yr(wx(a+n*(El(Ea(e.g))-a))),b:Yr(wx(o+n*(El(Ea(e.b))-o))),a:t.a+n*(e.a-t.a)}}function tf(t,e,n){if(t){let s=Mv(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Cv(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function JT(t,e){return t&&Object.assign(e||{},t)}function Xw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Yr(t[3]))):(e=JT(t,{r:0,g:0,b:0,a:1}),e.a=Yr(e.a)),e}function $5(t){return t.charAt(0)==="r"?I5(t):z5(t)}class ed{constructor(e){if(e instanceof ed)return e;const n=typeof e;let s;n==="object"?s=Xw(e):n==="string"&&(s=M5(e)||H5(e)||$5(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=JT(this._rgb);return e&&(e.a=Ea(e.a)),e}set rgb(e){this._rgb=Xw(e)}rgbString(){return this._valid?Y5(this._rgb):void 0}hexString(){return this._valid?C5(this._rgb):void 0}hslString(){return this._valid?V5(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let o;const l=n===o?.5:n,d=2*l-1,h=s.a-a.a,p=((d*h===-1?d:(d+h)/(1+d*h))+1)/2;o=1-p,s.r=255&p*s.r+o*a.r+.5,s.g=255&p*s.g+o*a.g+.5,s.b=255&p*s.b+o*a.b+.5,s.a=l*s.a+(1-l)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=W5(this._rgb,e._rgb,n)),this}clone(){return new ed(this.rgb)}alpha(e){return this._rgb.a=Yr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=xd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tf(this._rgb,2,e),this}darken(e){return tf(this._rgb,2,-e),this}saturate(e){return tf(this._rgb,1,e),this}desaturate(e){return tf(this._rgb,1,-e),this}rotate(e){return B5(this._rgb,e),this}}function ka(){}const q5=(()=>{let t=0;return()=>t++})();function bt(t){return t==null}function dn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Tt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function _n(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Vs(t,e){return _n(t)?t:e}function ot(t,e){return typeof t>"u"?e:t}const G5=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,ek=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Zt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ht(t,e,n,s){let a,o,l;if(dn(t))for(o=t.length,a=0;a<o;a++)e.call(n,t[a],a);else if(Tt(t))for(l=Object.keys(t),o=l.length,a=0;a<o;a++)e.call(n,t[l[a]],l[a])}function If(t,e){let n,s,a,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(a=t[n],o=e[n],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Yf(t){if(dn(t))return t.map(Yf);if(Tt(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=Yf(t[n[a]]);return e}return t}function tk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function X5(t,e,n,s){if(!tk(t))return;const a=e[t],o=n[t];Tt(a)&&Tt(o)?td(a,o,s):e[t]=Yf(o)}function td(t,e,n){const s=dn(e)?e:[e],a=s.length;if(!Tt(t))return t;n=n||{};const o=n.merger||X5;let l;for(let d=0;d<a;++d){if(l=s[d],!Tt(l))continue;const h=Object.keys(l);for(let p=0,g=h.length;p<g;++p)o(h[p],t,l,n)}return t}function Hu(t,e){return td(t,e,{merger:K5})}function K5(t,e,n){if(!tk(t))return;const s=e[t],a=n[t];Tt(s)&&Tt(a)?Hu(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Yf(a))}const Kw={"":t=>t,x:t=>t.x,y:t=>t.y};function Z5(t){const e=t.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function Q5(t){const e=Z5(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function qr(t,e){return(Kw[e]||(Kw[e]=Q5(e)))(t)}function Ev(t){return t.charAt(0).toUpperCase()+t.slice(1)}const nd=t=>typeof t<"u",Gr=t=>typeof t=="function",Zw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function J5(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ot=Math.PI,sn=2*Ot,eO=sn+Ot,Wf=Number.POSITIVE_INFINITY,tO=Ot/180,Dn=Ot/2,No=Ot/4,Qw=Ot*2/3,Lr=Math.log10,qi=Math.sign;function Uu(t,e,n){return Math.abs(t-e)<n}function Jw(t){const e=Math.round(t);t=Uu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Lr(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function nO(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((a,o)=>a-o).pop(),e}function sO(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Kl(t){return!sO(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function iO(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function nk(t,e,n){let s,a,o;for(s=0,a=t.length;s<a;s++)o=t[s][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Ti(t){return t*(Ot/180)}function Av(t){return t*(180/Ot)}function eS(t){if(!_n(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function sk(t,e){const n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s);let o=Math.atan2(s,n);return o<-.5*Ot&&(o+=sn),{angle:o,distance:a}}function jy(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function aO(t,e){return(t-e+eO)%sn-Ot}function is(t){return(t%sn+sn)%sn}function sd(t,e,n,s){const a=is(t),o=is(e),l=is(n),d=is(o-a),h=is(l-a),p=is(a-o),g=is(a-l);return a===o||a===l||s&&o===l||d>h&&p<g}function In(t,e,n){return Math.max(e,Math.min(n,t))}function rO(t){return In(t,-32768,32767)}function Aa(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Ov(t,e,n){n=n||(l=>t[l]<e);let s=t.length-1,a=0,o;for(;s-a>1;)o=a+s>>1,n(o)?a=o:s=o;return{lo:a,hi:s}}const Oa=(t,e,n,s)=>Ov(t,n,s?a=>{const o=t[a][e];return o<n||o===n&&t[a+1][e]===n}:a=>t[a][e]<n),oO=(t,e,n)=>Ov(t,n,s=>t[s][e]>=n);function lO(t,e,n){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>n;)a--;return s>0||a<t.length?t.slice(s,a):t}const ik=["push","pop","shift","splice","unshift"];function cO(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ik.forEach(n=>{const s="_onData"+Ev(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const l=a.apply(this,o);return t._chartjs.listeners.forEach(d=>{typeof d[s]=="function"&&d[s](...o)}),l}})})}function tS(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(ik.forEach(o=>{delete t[o]}),delete t._chartjs)}function ak(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const rk=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function ok(t,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,rk.call(window,()=>{s=!1,t.apply(e,n)}))}}function uO(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Rv=t=>t==="start"?"left":t==="end"?"right":"center",ns=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,dO=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function lk(t,e,n){const s=e.length;let a=0,o=s;if(t._sorted){const{iScale:l,vScale:d,_parsed:h}=t,p=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,g=l.axis,{min:y,max:_,minDefined:j,maxDefined:k}=l.getUserBounds();if(j){if(a=Math.min(Oa(h,g,y).lo,n?s:Oa(e,g,l.getPixelForValue(y)).lo),p){const N=h.slice(0,a+1).reverse().findIndex(D=>!bt(D[d.axis]));a-=Math.max(0,N)}a=In(a,0,s-1)}if(k){let N=Math.max(Oa(h,l.axis,_,!0).hi+1,n?0:Oa(e,g,l.getPixelForValue(_),!0).hi+1);if(p){const D=h.slice(N-1).findIndex(R=>!bt(R[d.axis]));N+=Math.max(0,D)}o=In(N,a,s)-a}else o=s-a}return{start:a,count:o}}function ck(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,a={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=a,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,a),o}const nf=t=>t===0||t===1,nS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*sn/n)),sS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*sn/n)+1,Iu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Dn)+1,easeOutSine:t=>Math.sin(t*Dn),easeInOutSine:t=>-.5*(Math.cos(Ot*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>nf(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>nf(t)?t:nS(t,.075,.3),easeOutElastic:t=>nf(t)?t:sS(t,.075,.3),easeInOutElastic(t){return nf(t)?t:t<.5?.5*nS(t*2,.1125,.45):.5+.5*sS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Iu.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Iu.easeInBounce(t*2)*.5:Iu.easeOutBounce(t*2-1)*.5+.5};function Pv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function iS(t){return Pv(t)?t:new ed(t)}function Sx(t){return Pv(t)?t:new ed(t).saturate(.5).darken(.1).hexString()}const hO=["x","y","borderWidth","radius","tension"],fO=["color","borderColor","backgroundColor"];function pO(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:fO},numbers:{type:"number",properties:hO}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function mO(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const aS=new Map;function gO(t,e){e=e||{};const n=t+JSON.stringify(e);let s=aS.get(n);return s||(s=new Intl.NumberFormat(t,e),aS.set(n,s)),s}function yd(t,e,n){return gO(e,n).format(t)}const uk={values(t){return dn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let a,o=t;if(n.length>1){const p=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(p<1e-4||p>1e15)&&(a="scientific"),o=xO(t,n)}const l=Lr(Math.abs(o)),d=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:a,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(h,this.options.ticks.format),yd(t,s,h)},logarithmic(t,e,n){if(t===0)return"0";const s=n[e].significand||t/Math.pow(10,Math.floor(Lr(t)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?uk.numeric.call(this,t,e,n):""}};function xO(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var wp={formatters:uk};function yO(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const qo=Object.create(null),Ty=Object.create(null);function Yu(t,e){if(!e)return t;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const o=n[s];t=t[o]||(t[o]=Object.create(null))}return t}function jx(t,e,n){return typeof e=="string"?td(Yu(t,e),n):td(Yu(t,""),e)}class vO{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>Sx(a.backgroundColor),this.hoverBorderColor=(s,a)=>Sx(a.borderColor),this.hoverColor=(s,a)=>Sx(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return jx(this,e,n)}get(e){return Yu(this,e)}describe(e,n){return jx(Ty,e,n)}override(e,n){return jx(qo,e,n)}route(e,n,s,a){const o=Yu(this,e),l=Yu(this,s),d="_"+n;Object.defineProperties(o,{[d]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const h=this[d],p=l[a];return Tt(h)?Object.assign({},p,h):ot(h,p)},set(h){this[d]=h}}})}apply(e){e.forEach(n=>n(this))}}var hn=new vO({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pO,mO,yO]);function bO(t){return!t||bt(t.size)||bt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function $f(t,e,n,s,a){let o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),o>s&&(s=o),s}function _O(t,e,n,s){s=s||{};let a=s.data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(a=s.data={},o=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let l=0;const d=n.length;let h,p,g,y,_;for(h=0;h<d;h++)if(y=n[h],y!=null&&!dn(y))l=$f(t,a,o,l,y);else if(dn(y))for(p=0,g=y.length;p<g;p++)_=y[p],_!=null&&!dn(_)&&(l=$f(t,a,o,l,_));t.restore();const j=o.length/2;if(j>n.length){for(h=0;h<j;h++)delete a[o[h]];o.splice(0,j)}return l}function Mo(t,e,n){const s=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function rS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ky(t,e,n,s){dk(t,e,n,s,null)}function dk(t,e,n,s,a){let o,l,d,h,p,g,y,_;const j=e.pointStyle,k=e.rotation,N=e.radius;let D=(k||0)*tO;if(j&&typeof j=="object"&&(o=j.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(D),t.drawImage(j,-j.width/2,-j.height/2,j.width,j.height),t.restore();return}if(!(isNaN(N)||N<=0)){switch(t.beginPath(),j){default:a?t.ellipse(n,s,a/2,N,0,0,sn):t.arc(n,s,N,0,sn),t.closePath();break;case"triangle":g=a?a/2:N,t.moveTo(n+Math.sin(D)*g,s-Math.cos(D)*N),D+=Qw,t.lineTo(n+Math.sin(D)*g,s-Math.cos(D)*N),D+=Qw,t.lineTo(n+Math.sin(D)*g,s-Math.cos(D)*N),t.closePath();break;case"rectRounded":p=N*.516,h=N-p,l=Math.cos(D+No)*h,y=Math.cos(D+No)*(a?a/2-p:h),d=Math.sin(D+No)*h,_=Math.sin(D+No)*(a?a/2-p:h),t.arc(n-y,s-d,p,D-Ot,D-Dn),t.arc(n+_,s-l,p,D-Dn,D),t.arc(n+y,s+d,p,D,D+Dn),t.arc(n-_,s+l,p,D+Dn,D+Ot),t.closePath();break;case"rect":if(!k){h=Math.SQRT1_2*N,g=a?a/2:h,t.rect(n-g,s-h,2*g,2*h);break}D+=No;case"rectRot":y=Math.cos(D)*(a?a/2:N),l=Math.cos(D)*N,d=Math.sin(D)*N,_=Math.sin(D)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+_,s-l),t.lineTo(n+y,s+d),t.lineTo(n-_,s+l),t.closePath();break;case"crossRot":D+=No;case"cross":y=Math.cos(D)*(a?a/2:N),l=Math.cos(D)*N,d=Math.sin(D)*N,_=Math.sin(D)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+y,s+d),t.moveTo(n+_,s-l),t.lineTo(n-_,s+l);break;case"star":y=Math.cos(D)*(a?a/2:N),l=Math.cos(D)*N,d=Math.sin(D)*N,_=Math.sin(D)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+y,s+d),t.moveTo(n+_,s-l),t.lineTo(n-_,s+l),D+=No,y=Math.cos(D)*(a?a/2:N),l=Math.cos(D)*N,d=Math.sin(D)*N,_=Math.sin(D)*(a?a/2:N),t.moveTo(n-y,s-d),t.lineTo(n+y,s+d),t.moveTo(n+_,s-l),t.lineTo(n-_,s+l);break;case"line":l=a?a/2:Math.cos(D)*N,d=Math.sin(D)*N,t.moveTo(n-l,s-d),t.lineTo(n+l,s+d);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(D)*(a?a/2:N),s+Math.sin(D)*N);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ra(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Sp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function jp(t){t.restore()}function wO(t,e,n,s,a){if(!e)return t.lineTo(n.x,n.y);if(a==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else a==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function SO(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function jO(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),bt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function TO(t,e,n,s,a){if(a.strikethrough||a.underline){const o=t.measureText(s),l=e-o.actualBoundingBoxLeft,d=e+o.actualBoundingBoxRight,h=n-o.actualBoundingBoxAscent,p=n+o.actualBoundingBoxDescent,g=a.strikethrough?(h+p)/2:p;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,g),t.lineTo(d,g),t.stroke()}}function kO(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Go(t,e,n,s,a,o={}){const l=dn(e)?e:[e],d=o.strokeWidth>0&&o.strokeColor!=="";let h,p;for(t.save(),t.font=a.string,jO(t,o),h=0;h<l.length;++h)p=l[h],o.backdrop&&kO(t,o.backdrop),d&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),bt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(p,n,s,o.maxWidth)),t.fillText(p,n,s,o.maxWidth),TO(t,n,s,p,o),s+=Number(a.lineHeight);t.restore()}function id(t,e){const{x:n,y:s,w:a,h:o,radius:l}=e;t.arc(n+l.topLeft,s+l.topLeft,l.topLeft,1.5*Ot,Ot,!0),t.lineTo(n,s+o-l.bottomLeft),t.arc(n+l.bottomLeft,s+o-l.bottomLeft,l.bottomLeft,Ot,Dn,!0),t.lineTo(n+a-l.bottomRight,s+o),t.arc(n+a-l.bottomRight,s+o-l.bottomRight,l.bottomRight,Dn,0,!0),t.lineTo(n+a,s+l.topRight),t.arc(n+a-l.topRight,s+l.topRight,l.topRight,0,-Dn,!0),t.lineTo(n+l.topLeft,s)}const NO=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,MO=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function DO(t,e){const n=(""+t).match(NO);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const CO=t=>+t||0;function Lv(t,e){const n={},s=Tt(e),a=s?Object.keys(e):e,o=Tt(t)?s?l=>ot(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)n[l]=CO(o(l));return n}function hk(t){return Lv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Io(t){return Lv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ls(t){const e=hk(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function zn(t,e){t=t||{},e=e||hn.font;let n=ot(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=ot(t.style,e.style);s&&!(""+s).match(MO)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:ot(t.family,e.family),lineHeight:DO(ot(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:ot(t.weight,e.weight),string:""};return a.string=bO(a),a}function Ou(t,e,n,s){let a,o,l;for(a=0,o=t.length;a<o;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function EO(t,e,n){const{min:s,max:a}=t,o=ek(e,(a-s)/2),l=(d,h)=>n&&d===0?0:d+h;return{min:l(s,-Math.abs(o)),max:l(a,o)}}function Qr(t,e){return Object.assign(Object.create(t),e)}function zv(t,e=[""],n,s,a=()=>t[0]){const o=n||t;typeof s>"u"&&(s=gk("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:a,override:d=>zv([d,...t],e,o,s)};return new Proxy(l,{deleteProperty(d,h){return delete d[h],delete d._keys,delete t[0][h],!0},get(d,h){return pk(d,h,()=>VO(h,e,t,d))},getOwnPropertyDescriptor(d,h){return Reflect.getOwnPropertyDescriptor(d._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(d,h){return lS(d).includes(h)},ownKeys(d){return lS(d)},set(d,h,p){const g=d._storage||(d._storage=a());return d[h]=g[h]=p,delete d._keys,!0}})}function Zl(t,e,n,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:fk(t,s),setContext:o=>Zl(t,o,n,s),override:o=>Zl(t.override(o),e,n,s)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete t[l],!0},get(o,l,d){return pk(o,l,()=>OO(o,l,d))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(o,l,d){return t[l]=d,delete o[l],!0}})}function fk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:s,isScriptable:Gr(n)?n:()=>n,isIndexable:Gr(s)?s:()=>s}}const AO=(t,e)=>t?t+Ev(e):e,Bv=(t,e)=>Tt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function OO(t,e,n){const{_proxy:s,_context:a,_subProxy:o,_descriptors:l}=t;let d=s[e];return Gr(d)&&l.isScriptable(e)&&(d=RO(e,d,t,n)),dn(d)&&d.length&&(d=PO(e,d,t,l.isIndexable)),Bv(e,d)&&(d=Zl(d,a,o&&o[e],l)),d}function RO(t,e,n,s){const{_proxy:a,_context:o,_subProxy:l,_stack:d}=n;if(d.has(t))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+t);d.add(t);let h=e(o,l||s);return d.delete(t),Bv(t,h)&&(h=Vv(a._scopes,a,t,h)),h}function PO(t,e,n,s){const{_proxy:a,_context:o,_subProxy:l,_descriptors:d}=n;if(typeof o.index<"u"&&s(t))return e[o.index%e.length];if(Tt(e[0])){const h=e,p=a._scopes.filter(g=>g!==h);e=[];for(const g of h){const y=Vv(p,a,t,g);e.push(Zl(y,o,l&&l[t],d))}}return e}function mk(t,e,n){return Gr(t)?t(e,n):t}const LO=(t,e)=>t===!0?e:typeof t=="string"?qr(e,t):void 0;function zO(t,e,n,s,a){for(const o of e){const l=LO(n,o);if(l){t.add(l);const d=mk(l._fallback,n,a);if(typeof d<"u"&&d!==n&&d!==s)return d}else if(l===!1&&typeof s<"u"&&n!==s)return null}return!1}function Vv(t,e,n,s){const a=e._rootScopes,o=mk(e._fallback,n,s),l=[...t,...a],d=new Set;d.add(s);let h=oS(d,l,n,o||n,s);return h===null||typeof o<"u"&&o!==n&&(h=oS(d,l,o,h,s),h===null)?!1:zv(Array.from(d),[""],a,o,()=>BO(e,n,s))}function oS(t,e,n,s,a){for(;n;)n=zO(t,e,n,s,a);return n}function BO(t,e,n){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return dn(a)&&Tt(n)?n:a||{}}function VO(t,e,n,s){let a;for(const o of e)if(a=gk(AO(o,t),n),typeof a<"u")return Bv(t,a)?Vv(n,s,t,a):a}function gk(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function lS(t){let e=t._keys;return e||(e=t._keys=FO(t._scopes)),e}function FO(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}function xk(t,e,n,s){const{iScale:a}=t,{key:o="r"}=this._parsing,l=new Array(s);let d,h,p,g;for(d=0,h=s;d<h;++d)p=d+n,g=e[p],l[d]={r:a.parse(qr(g,o),p)};return l}const HO=Number.EPSILON||1e-14,Ql=(t,e)=>e<t.length&&!t[e].skip&&t[e],yk=t=>t==="x"?"y":"x";function UO(t,e,n,s){const a=t.skip?e:t,o=e,l=n.skip?e:n,d=jy(o,a),h=jy(l,o);let p=d/(d+h),g=h/(d+h);p=isNaN(p)?0:p,g=isNaN(g)?0:g;const y=s*p,_=s*g;return{previous:{x:o.x-y*(l.x-a.x),y:o.y-y*(l.y-a.y)},next:{x:o.x+_*(l.x-a.x),y:o.y+_*(l.y-a.y)}}}function IO(t,e,n){const s=t.length;let a,o,l,d,h,p=Ql(t,0);for(let g=0;g<s-1;++g)if(h=p,p=Ql(t,g+1),!(!h||!p)){if(Uu(e[g],0,HO)){n[g]=n[g+1]=0;continue}a=n[g]/e[g],o=n[g+1]/e[g],d=Math.pow(a,2)+Math.pow(o,2),!(d<=9)&&(l=3/Math.sqrt(d),n[g]=a*l*e[g],n[g+1]=o*l*e[g])}}function YO(t,e,n="x"){const s=yk(n),a=t.length;let o,l,d,h=Ql(t,0);for(let p=0;p<a;++p){if(l=d,d=h,h=Ql(t,p+1),!d)continue;const g=d[n],y=d[s];l&&(o=(g-l[n])/3,d[`cp1${n}`]=g-o,d[`cp1${s}`]=y-o*e[p]),h&&(o=(h[n]-g)/3,d[`cp2${n}`]=g+o,d[`cp2${s}`]=y+o*e[p])}}function WO(t,e="x"){const n=yk(e),s=t.length,a=Array(s).fill(0),o=Array(s);let l,d,h,p=Ql(t,0);for(l=0;l<s;++l)if(d=h,h=p,p=Ql(t,l+1),!!h){if(p){const g=p[e]-h[e];a[l]=g!==0?(p[n]-h[n])/g:0}o[l]=d?p?qi(a[l-1])!==qi(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}IO(t,a,o),YO(t,o,e)}function sf(t,e,n){return Math.max(Math.min(t,n),e)}function $O(t,e){let n,s,a,o,l,d=Ra(t[0],e);for(n=0,s=t.length;n<s;++n)l=o,o=d,d=n<s-1&&Ra(t[n+1],e),o&&(a=t[n],l&&(a.cp1x=sf(a.cp1x,e.left,e.right),a.cp1y=sf(a.cp1y,e.top,e.bottom)),d&&(a.cp2x=sf(a.cp2x,e.left,e.right),a.cp2y=sf(a.cp2y,e.top,e.bottom)))}function qO(t,e,n,s,a){let o,l,d,h;if(e.spanGaps&&(t=t.filter(p=>!p.skip)),e.cubicInterpolationMode==="monotone")WO(t,a);else{let p=s?t[t.length-1]:t[0];for(o=0,l=t.length;o<l;++o)d=t[o],h=UO(p,d,t[Math.min(o+1,l-(s?0:1))%l],e.tension),d.cp1x=h.previous.x,d.cp1y=h.previous.y,d.cp2x=h.next.x,d.cp2y=h.next.y,p=d}e.capBezierPoints&&$O(t,n)}function Fv(){return typeof window<"u"&&typeof document<"u"}function Hv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function qf(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Tp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function GO(t,e){return Tp(t).getPropertyValue(e)}const XO=["top","right","bottom","left"];function Yo(t,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const o=XO[a];s[o]=parseFloat(t[e+"-"+o+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const KO=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ZO(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:a,offsetY:o}=s;let l=!1,d,h;if(KO(a,o,t.target))d=a,h=o;else{const p=e.getBoundingClientRect();d=s.clientX-p.left,h=s.clientY-p.top,l=!0}return{x:d,y:h,box:l}}function Ro(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,a=Tp(n),o=a.boxSizing==="border-box",l=Yo(a,"padding"),d=Yo(a,"border","width"),{x:h,y:p,box:g}=ZO(t,n),y=l.left+(g&&d.left),_=l.top+(g&&d.top);let{width:j,height:k}=e;return o&&(j-=l.width+d.width,k-=l.height+d.height),{x:Math.round((h-y)/j*n.width/s),y:Math.round((p-_)/k*n.height/s)}}function QO(t,e,n){let s,a;if(e===void 0||n===void 0){const o=t&&Hv(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const l=o.getBoundingClientRect(),d=Tp(o),h=Yo(d,"border","width"),p=Yo(d,"padding");e=l.width-p.width-h.width,n=l.height-p.height-h.height,s=qf(d.maxWidth,o,"clientWidth"),a=qf(d.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:s||Wf,maxHeight:a||Wf}}const zr=t=>Math.round(t*10)/10;function JO(t,e,n,s){const a=Tp(t),o=Yo(a,"margin"),l=qf(a.maxWidth,t,"clientWidth")||Wf,d=qf(a.maxHeight,t,"clientHeight")||Wf,h=QO(t,e,n);let{width:p,height:g}=h;if(a.boxSizing==="content-box"){const _=Yo(a,"border","width"),j=Yo(a,"padding");p-=j.width+_.width,g-=j.height+_.height}return p=Math.max(0,p-o.width),g=Math.max(0,s?p/s:g-o.height),p=zr(Math.min(p,l,h.maxWidth)),g=zr(Math.min(g,d,h.maxHeight)),p&&!g&&(g=zr(p/2)),(e!==void 0||n!==void 0)&&s&&h.height&&g>h.height&&(g=h.height,p=zr(Math.floor(g*s))),{width:p,height:g}}function cS(t,e,n){const s=e||1,a=zr(t.height*s),o=zr(t.width*s);t.height=zr(t.height),t.width=zr(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||l.height!==a||l.width!==o?(t.currentDevicePixelRatio=s,l.height=a,l.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const e3=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Fv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function uS(t,e){const n=GO(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Po(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function t3(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function n3(t,e,n,s){const a={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},l=Po(t,a,n),d=Po(a,o,n),h=Po(o,e,n),p=Po(l,d,n),g=Po(d,h,n);return Po(p,g,n)}const s3=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},i3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Yl(t,e,n){return t?s3(e,n):i3()}function vk(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function bk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function _k(t){return t==="angle"?{between:sd,compare:aO,normalize:is}:{between:Aa,compare:(e,n)=>e-n,normalize:e=>e}}function dS({start:t,end:e,count:n,loop:s,style:a}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:a}}function a3(t,e,n){const{property:s,start:a,end:o}=n,{between:l,normalize:d}=_k(s),h=e.length;let{start:p,end:g,loop:y}=t,_,j;if(y){for(p+=h,g+=h,_=0,j=h;_<j&&l(d(e[p%h][s]),a,o);++_)p--,g--;p%=h,g%=h}return g<p&&(g+=h),{start:p,end:g,loop:y,style:t.style}}function wk(t,e,n){if(!n)return[t];const{property:s,start:a,end:o}=n,l=e.length,{compare:d,between:h,normalize:p}=_k(s),{start:g,end:y,loop:_,style:j}=a3(t,e,n),k=[];let N=!1,D=null,R,E,B;const U=()=>h(a,B,R)&&d(a,B)!==0,$=()=>d(o,R)===0||h(o,B,R),I=()=>N||U(),O=()=>!N||$();for(let q=g,J=g;q<=y;++q)E=e[q%l],!E.skip&&(R=p(E[s]),R!==B&&(N=h(R,a,o),D===null&&I()&&(D=d(R,a)===0?q:J),D!==null&&O()&&(k.push(dS({start:D,end:q,loop:_,count:l,style:j})),D=null),J=q,B=R));return D!==null&&k.push(dS({start:D,end:y,loop:_,count:l,style:j})),k}function Sk(t,e){const n=[],s=t.segments;for(let a=0;a<s.length;a++){const o=wk(s[a],t.points,e);o.length&&n.push(...o)}return n}function r3(t,e,n,s){let a=0,o=e-1;if(n&&!s)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,n&&(o+=a);o>a&&t[o%e].skip;)o--;return o%=e,{start:a,end:o}}function o3(t,e,n,s){const a=t.length,o=[];let l=e,d=t[e],h;for(h=e+1;h<=n;++h){const p=t[h%a];p.skip||p.stop?d.skip||(s=!1,o.push({start:e%a,end:(h-1)%a,loop:s}),e=l=p.stop?h:null):(l=h,d.skip&&(e=h)),d=p}return l!==null&&o.push({start:e%a,end:l%a,loop:s}),o}function l3(t,e){const n=t.points,s=t.options.spanGaps,a=n.length;if(!a)return[];const o=!!t._loop,{start:l,end:d}=r3(n,a,o,s);if(s===!0)return hS(t,[{start:l,end:d,loop:o}],n,e);const h=d<l?d+a:d,p=!!t._fullLoop&&l===0&&d===a-1;return hS(t,o3(n,l,h,p),n,e)}function hS(t,e,n,s){return!s||!s.setContext||!n?e:c3(t,e,n,s)}function c3(t,e,n,s){const a=t._chart.getContext(),o=fS(t.options),{_datasetIndex:l,options:{spanGaps:d}}=t,h=n.length,p=[];let g=o,y=e[0].start,_=y;function j(k,N,D,R){const E=d?-1:1;if(k!==N){for(k+=h;n[k%h].skip;)k-=E;for(;n[N%h].skip;)N+=E;k%h!==N%h&&(p.push({start:k%h,end:N%h,loop:D,style:R}),g=R,y=N%h)}}for(const k of e){y=d?y:k.start;let N=n[y%h],D;for(_=y+1;_<=k.end;_++){const R=n[_%h];D=fS(s.setContext(Qr(a,{type:"segment",p0:N,p1:R,p0DataIndex:(_-1)%h,p1DataIndex:_%h,datasetIndex:l}))),u3(D,g)&&j(y,_-1,k.loop,g),N=R,g=D}y<_-1&&j(y,_-1,k.loop,g)}return p}function fS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function u3(t,e){if(!e)return!1;const n=[],s=function(a,o){return Pv(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function af(t,e,n){return t.options.clip?t[n]:e[n]}function d3(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:af(n,e,"left"),right:af(n,e,"right"),top:af(s,e,"top"),bottom:af(s,e,"bottom")}:e}function jk(t,e){const n=e._clip;if(n.disabled)return!1;const s=d3(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class h3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const o=n.listeners[a],l=n.duration;o.forEach(d=>d({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(s-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=rk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const o=s.items;let l=o.length-1,d=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>s.duration&&(s.duration=h._total),h.tick(e),d=!0):(o[l]=o[o.length-1],o.pop());d&&(a.draw(),this._notify(a,s,e,"progress")),o.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ma=new h3;const pS="transparent",f3={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=iS(t||pS),a=s.valid&&iS(e||pS);return a&&a.valid?a.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class p3{constructor(e,n,s,a){const o=n[s];a=Ou([e.to,a,o,e.from]);const l=Ou([e.from,o,a]);this._active=!0,this._fn=e.fn||f3[e.type||typeof l],this._easing=Iu[e.easing]||Iu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],o=s-this._start,l=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Ou([e.to,n,a,e.from]),this._from=Ou([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,o=this._from,l=this._loop,d=this._to;let h;if(this._active=o!==d&&(l||n<s),!this._active){this._target[a]=d,this._notify(!0);return}if(n<0){this._target[a]=o;return}h=n/s%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[a]=this._fn(o,d,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class Tk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Tt(e))return;const n=Object.keys(hn.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!Tt(o))return;const l={};for(const d of n)l[d]=o[d];(dn(o.properties)&&o.properties||[a]).forEach(d=>{(d===a||!s.has(d))&&s.set(d,l)})})}_animateOptions(e,n){const s=n.options,a=g3(e,s);if(!a)return[];const o=this._createAnimations(a,s);return s.$shared&&m3(e.options.$animations,s).then(()=>{e.options=s},()=>{}),o}_createAnimations(e,n){const s=this._properties,a=[],o=e.$animations||(e.$animations={}),l=Object.keys(n),d=Date.now();let h;for(h=l.length-1;h>=0;--h){const p=l[h];if(p.charAt(0)==="$")continue;if(p==="options"){a.push(...this._animateOptions(e,n));continue}const g=n[p];let y=o[p];const _=s.get(p);if(y)if(_&&y.active()){y.update(_,g,d);continue}else y.cancel();if(!_||!_.duration){e[p]=g;continue}o[p]=y=new p3(_,e,p,g),a.push(y)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Ma.add(this._chart,s),!0}}function m3(t,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=t[s[a]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function g3(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function mS(t,e){const n=t&&t.options||{},s=n.reverse,a=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:s?o:a,end:s?a:o}}function x3(t,e,n){if(n===!1)return!1;const s=mS(t,n),a=mS(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function y3(t){let e,n,s,a;return Tt(t)?(e=t.top,n=t.right,s=t.bottom,a=t.left):e=n=s=a=t,{top:e,right:n,bottom:s,left:a,disabled:t===!1}}function kk(t,e){const n=[],s=t._getSortedDatasetMetas(e);let a,o;for(a=0,o=s.length;a<o;++a)n.push(s[a].index);return n}function gS(t,e,n,s={}){const a=t.keys,o=s.mode==="single";let l,d,h,p;if(e===null)return;let g=!1;for(l=0,d=a.length;l<d;++l){if(h=+a[l],h===n){if(g=!0,s.all)continue;break}p=t.values[h],_n(p)&&(o||e===0||qi(e)===qi(p))&&(e+=p)}return!g&&!s.all?0:e}function v3(t,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",l=Object.keys(t),d=new Array(l.length);let h,p,g;for(h=0,p=l.length;h<p;++h)g=l[h],d[h]={[a]:g,[o]:t[g]};return d}function Tx(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function b3(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function _3(t){const{min:e,max:n,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function w3(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function xS(t,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const o=t[a.index];if(n&&o>0||!n&&o<0)return a.index}return null}function yS(t,e){const{chart:n,_cachedMeta:s}=t,a=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:d}=s,h=o.axis,p=l.axis,g=b3(o,l,s),y=e.length;let _;for(let j=0;j<y;++j){const k=e[j],{[h]:N,[p]:D}=k,R=k._stacks||(k._stacks={});_=R[p]=w3(a,g,N),_[d]=D,_._top=xS(_,l,!0,s.type),_._bottom=xS(_,l,!1,s.type);const E=_._visualValues||(_._visualValues={});E[d]=D}}function kx(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function S3(t,e){return Qr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function j3(t,e,n){return Qr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function bu(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const o=a._stacks;if(!o||o[s]===void 0||o[s][n]===void 0)return;delete o[s][n],o[s]._visualValues!==void 0&&o[s]._visualValues[n]!==void 0&&delete o[s]._visualValues[n]}}}const Nx=t=>t==="reset"||t==="none",vS=(t,e)=>e?t:Object.assign({},t),T3=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kk(n,!0),values:null};class Jr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&bu(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(y,_,j,k)=>y==="x"?_:y==="r"?k:j,o=n.xAxisID=ot(s.xAxisID,kx(e,"x")),l=n.yAxisID=ot(s.yAxisID,kx(e,"y")),d=n.rAxisID=ot(s.rAxisID,kx(e,"r")),h=n.indexAxis,p=n.iAxisID=a(h,o,l,d),g=n.vAxisID=a(h,l,o,d);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(d),n.iScale=this.getScaleForId(p),n.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tS(this._data,this),e._stacked&&bu(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Tt(n)){const a=this._cachedMeta;this._data=v3(n,a)}else if(s!==n){if(s){tS(s,this);const a=this._cachedMeta;bu(a),a._parsed=[]}n&&Object.isExtensible(n)&&cO(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const o=n._stacked;n._stacked=Tx(n.vScale,n),n.stack!==s.stack&&(a=!0,bu(n),n.stack=s.stack),this._resyncElements(e),(a||o!==n._stacked)&&(yS(this,n._parsed),n._stacked=Tx(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:o,_stacked:l}=s,d=o.axis;let h=e===0&&n===a.length?!0:s._sorted,p=e>0&&s._parsed[e-1],g,y,_;if(this._parsing===!1)s._parsed=a,s._sorted=!0,_=a;else{dn(a[e])?_=this.parseArrayData(s,a,e,n):Tt(a[e])?_=this.parseObjectData(s,a,e,n):_=this.parsePrimitiveData(s,a,e,n);const j=()=>y[d]===null||p&&y[d]<p[d];for(g=0;g<n;++g)s._parsed[g+e]=y=_[g],h&&(j()&&(h=!1),p=y);s._sorted=h}l&&yS(this,_)}parsePrimitiveData(e,n,s,a){const{iScale:o,vScale:l}=e,d=o.axis,h=l.axis,p=o.getLabels(),g=o===l,y=new Array(a);let _,j,k;for(_=0,j=a;_<j;++_)k=_+s,y[_]={[d]:g||o.parse(p[k],k),[h]:l.parse(n[k],k)};return y}parseArrayData(e,n,s,a){const{xScale:o,yScale:l}=e,d=new Array(a);let h,p,g,y;for(h=0,p=a;h<p;++h)g=h+s,y=n[g],d[h]={x:o.parse(y[0],g),y:l.parse(y[1],g)};return d}parseObjectData(e,n,s,a){const{xScale:o,yScale:l}=e,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,p=new Array(a);let g,y,_,j;for(g=0,y=a;g<y;++g)_=g+s,j=n[_],p[g]={x:o.parse(qr(j,d),_),y:l.parse(qr(j,h),_)};return p}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,o=this._cachedMeta,l=n[e.axis],d={keys:kk(a,!0),values:n._stacks[e.axis]._visualValues};return gS(d,l,o.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const o=s[n.axis];let l=o===null?NaN:o;const d=a&&s._stacks[n.axis];a&&d&&(a.values=d,l=gS(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,o=s._sorted&&e===s.iScale,l=a.length,d=this._getOtherScale(e),h=T3(n,s,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:y}=_3(d);let _,j;function k(){j=a[_];const N=j[d.axis];return!_n(j[e.axis])||g>N||y<N}for(_=0;_<l&&!(!k()&&(this.updateRangeFromParsed(p,e,j,h),o));++_);if(o){for(_=l-1;_>=0;--_)if(!k()){this.updateRangeFromParsed(p,e,j,h);break}}return p}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,o,l;for(a=0,o=n.length;a<o;++a)l=n[a][e.axis],_n(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=y3(ot(this.options.clip,x3(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],o=n.chartArea,l=[],d=this._drawStart||0,h=this._drawCount||a.length-d,p=this.options.drawActiveElementsOnTop;let g;for(s.dataset&&s.dataset.draw(e,o,d,h),g=d;g<d+h;++g){const y=a[g];y.hidden||(y.active&&p?l.push(y):y.draw(e,o))}for(g=0;g<l.length;++g)l[g].draw(e,o)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=j3(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=S3(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",o=this._cachedDataOpts,l=e+"-"+n,d=o[l],h=this.enableOptionSharing&&nd(s);if(d)return vS(d,h);const p=this.chart.config,g=p.datasetElementScopeKeys(this._type,e),y=a?[`${e}Hover`,"hover",e,""]:[e,""],_=p.getOptionScopes(this.getDataset(),g),j=Object.keys(hn.elements[e]),k=()=>this.getContext(s,a,n),N=p.resolveNamedOptions(_,j,k,y);return N.$shared&&(N.$shared=h,o[l]=Object.freeze(vS(N,h))),N}_resolveAnimations(e,n,s){const a=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,d=o[l];if(d)return d;let h;if(a.options.animation!==!1){const g=this.chart.config,y=g.datasetAnimationScopeKeys(this._type,n),_=g.getOptionScopes(this.getDataset(),y);h=g.createResolver(_,this.getContext(e,s,n))}const p=new Tk(a,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(p)),p}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Nx(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,o=this.getSharedOptions(s),l=this.includeOptions(n,o)||o!==a;return this.updateSharedOptions(o,n,s),{sharedOptions:o,includeOptions:l}}updateElement(e,n,s,a){Nx(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!Nx(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const o=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[d,h,p]of this._syncList)this[d](h,p);this._syncList=[];const a=s.length,o=n.length,l=Math.min(o,a);l&&this.parse(0,l),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,n,s=!0){const a=this._cachedMeta,o=a.data,l=e+n;let d;const h=p=>{for(p.length+=n,d=p.length-1;d>=l;d--)p[d]=p[d-n]};for(h(o),d=e;d<l;++d)o[d]=new this.dataElementType;this._parsing&&h(a._parsed),this.parse(e,n),s&&this.updateElements(o,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&bu(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function k3(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,o=n.length;a<o;a++)s=s.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=ak(s.sort((a,o)=>a-o))}return t._cache.$bar}function N3(t){const e=t.iScale,n=k3(e,t.type);let s=e._length,a,o,l,d;const h=()=>{l===32767||l===-32768||(nd(d)&&(s=Math.min(s,Math.abs(l-d)||s)),d=l)};for(a=0,o=n.length;a<o;++a)l=e.getPixelForValue(n[a]),h();for(d=void 0,a=0,o=e.ticks.length;a<o;++a)l=e.getPixelForTick(a),h();return s}function M3(t,e,n,s){const a=n.barThickness;let o,l;return bt(a)?(o=e.min*n.categoryPercentage,l=n.barPercentage):(o=a*s,l=1),{chunk:o/s,ratio:l,start:e.pixels[t]-o/2}}function D3(t,e,n,s){const a=e.pixels,o=a[t];let l=t>0?a[t-1]:null,d=t<a.length-1?a[t+1]:null;const h=n.categoryPercentage;l===null&&(l=o-(d===null?e.end-e.start:d-o)),d===null&&(d=o+o-l);const p=o-(o-Math.min(l,d))/2*h;return{chunk:Math.abs(d-l)/2*h/s,ratio:n.barPercentage,start:p}}function C3(t,e,n,s){const a=n.parse(t[0],s),o=n.parse(t[1],s),l=Math.min(a,o),d=Math.max(a,o);let h=l,p=d;Math.abs(l)>Math.abs(d)&&(h=d,p=l),e[n.axis]=p,e._custom={barStart:h,barEnd:p,start:a,end:o,min:l,max:d}}function Nk(t,e,n,s){return dn(t)?C3(t,e,n,s):e[n.axis]=n.parse(t,s),e}function bS(t,e,n,s){const a=t.iScale,o=t.vScale,l=a.getLabels(),d=a===o,h=[];let p,g,y,_;for(p=n,g=n+s;p<g;++p)_=e[p],y={},y[a.axis]=d||a.parse(l[p],p),h.push(Nk(_,y,o,p));return h}function Mx(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function E3(t,e,n){return t!==0?qi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function A3(t){let e,n,s,a,o;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(a="end",o="start"):(a="start",o="end"),{start:n,end:s,reverse:e,top:a,bottom:o}}function O3(t,e,n,s){let a=e.borderSkipped;const o={};if(!a){t.borderSkipped=o;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:d,reverse:h,top:p,bottom:g}=A3(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?a=p:(n._bottom||0)===s?a=g:(o[_S(g,l,d,h)]=!0,a=p)),o[_S(a,l,d,h)]=!0,t.borderSkipped=o}function _S(t,e,n,s){return s?(t=R3(t,e,n),t=wS(t,n,e)):t=wS(t,e,n),t}function R3(t,e,n){return t===e?n:t===n?e:t}function wS(t,e,n){return t==="start"?e:t==="end"?n:t}function P3(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Mk extends Jr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,a){return bS(e,n,s,a)}parseArrayData(e,n,s,a){return bS(e,n,s,a)}parseObjectData(e,n,s,a){const{iScale:o,vScale:l}=e,{xAxisKey:d="x",yAxisKey:h="y"}=this._parsing,p=o.axis==="x"?d:h,g=l.axis==="x"?d:h,y=[];let _,j,k,N;for(_=s,j=s+a;_<j;++_)N=n[_],k={},k[o.axis]=o.parse(qr(N,p),_),y.push(Nk(qr(N,g),k,l,_));return y}updateRangeFromParsed(e,n,s,a){super.updateRangeFromParsed(e,n,s,a);const o=s._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:a}=n,o=this.getParsed(e),l=o._custom,d=Mx(l)?"["+l.start+", "+l.end+"]":""+a.getLabelForValue(o[a.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,a){const o=a==="reset",{index:l,_cachedMeta:{vScale:d}}=this,h=d.getBasePixel(),p=d.isHorizontal(),g=this._getRuler(),{sharedOptions:y,includeOptions:_}=this._getSharedOptions(n,a);for(let j=n;j<n+s;j++){const k=this.getParsed(j),N=o||bt(k[d.axis])?{base:h,head:h}:this._calculateBarValuePixels(j),D=this._calculateBarIndexPixels(j,g),R=(k._stacks||{})[d.axis],E={horizontal:p,base:N.base,enableBorderRadius:!R||Mx(k._custom)||l===R._top||l===R._bottom,x:p?N.head:D.center,y:p?D.center:N.head,height:p?D.size:Math.abs(N.size),width:p?Math.abs(N.size):D.size};_&&(E.options=y||this.resolveDataElementOptions(j,e[j].active?"active":a));const B=E.options||e[j].options;O3(E,B,R,l),P3(E,B,g.ratio),this.updateElement(e[j],j,E,a)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(g=>g.controller.options.grouped),o=s.options.stacked,l=[],d=this._cachedMeta.controller.getParsed(n),h=d&&d[s.axis],p=g=>{const y=g._parsed.find(j=>j[s.axis]===h),_=y&&y[g.vScale.axis];if(bt(_)||isNaN(_))return!0};for(const g of a)if(!(n!==void 0&&p(g))&&((o===!1||l.indexOf(g.stack)===-1||o===void 0&&g.stack===void 0)&&l.push(g.stack),g.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[ot(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const a=this._getStacks(e,s),o=n!==void 0?a.indexOf(n):-1;return o===-1?a.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,a=[];let o,l;for(o=0,l=n.data.length;o<l;++o)a.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const d=e.barThickness;return{min:d||N3(n),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:d?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:a},options:{base:o,minBarLength:l}}=this,d=o||0,h=this.getParsed(e),p=h._custom,g=Mx(p);let y=h[n.axis],_=0,j=s?this.applyStack(n,h,s):y,k,N;j!==y&&(_=j-y,j=y),g&&(y=p.barStart,j=p.barEnd-p.barStart,y!==0&&qi(y)!==qi(p.barEnd)&&(_=0),_+=y);const D=!bt(o)&&!g?o:_;let R=n.getPixelForValue(D);if(this.chart.getDataVisibility(e)?k=n.getPixelForValue(_+j):k=R,N=k-R,Math.abs(N)<l){N=E3(N,n,d)*l,y===d&&(R-=N/2);const E=n.getPixelForDecimal(0),B=n.getPixelForDecimal(1),U=Math.min(E,B),$=Math.max(E,B);R=Math.max(Math.min(R,$),U),k=R+N,s&&!g&&(h._stacks[n.axis]._visualValues[a]=n.getValueForPixel(k)-n.getValueForPixel(R))}if(R===n.getPixelForValue(d)){const E=qi(N)*n.getLineWidthForValue(d)/2;R+=E,N-=E}return{size:N,base:R,head:k,center:k+N/2}}_calculateBarIndexPixels(e,n){const s=n.scale,a=this.options,o=a.skipNull,l=ot(a.maxBarThickness,1/0);let d,h;const p=this._getAxisCount();if(n.grouped){const g=o?this._getStackCount(e):n.stackCount,y=a.barThickness==="flex"?D3(e,n,a,g*p):M3(e,n,a,g*p),_=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,j=this._getAxis().indexOf(ot(_,this.getFirstScaleIdForIndexAxis())),k=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+j;d=y.start+y.chunk*k+y.chunk/2,h=Math.min(l,y.chunk*y.ratio)}else d=s.getPixelForValue(this.getParsed(e)[s.axis],e),h=Math.min(l,n.min*n.ratio);return{base:d-h/2,head:d+h/2,center:d,size:h}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,a=s.length;let o=0;for(;o<a;++o)this.getParsed(o)[n.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}class L3 extends Jr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,a){const o=super.parsePrimitiveData(e,n,s,a);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+s).radius;return o}parseArrayData(e,n,s,a){const o=super.parseArrayData(e,n,s,a);for(let l=0;l<o.length;l++){const d=n[s+l];o[l]._custom=ot(d[2],this.resolveDataElementOptions(l+s).radius)}return o}parseObjectData(e,n,s,a){const o=super.parseObjectData(e,n,s,a);for(let l=0;l<o.length;l++){const d=n[s+l];o[l]._custom=ot(d&&d.r&&+d.r,this.resolveDataElementOptions(l+s).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:a,yScale:o}=n,l=this.getParsed(e),d=a.getLabelForValue(l.x),h=o.getLabelForValue(l.y),p=l._custom;return{label:s[e]||"",value:"("+d+", "+h+(p?", "+p:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,a){const o=a==="reset",{iScale:l,vScale:d}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,a),g=l.axis,y=d.axis;for(let _=n;_<n+s;_++){const j=e[_],k=!o&&this.getParsed(_),N={},D=N[g]=o?l.getPixelForDecimal(.5):l.getPixelForValue(k[g]),R=N[y]=o?d.getBasePixel():d.getPixelForValue(k[y]);N.skip=isNaN(D)||isNaN(R),p&&(N.options=h||this.resolveDataElementOptions(_,j.active?"active":a),o&&(N.options.radius=0)),this.updateElement(j,_,N,a)}}resolveDataElementOptions(e,n){const s=this.getParsed(e);let a=super.resolveDataElementOptions(e,n);a.$shared&&(a=Object.assign({},a,{$shared:!1}));const o=a.radius;return n!=="active"&&(a.radius=0),a.radius+=ot(s&&s._custom,o),a}}function z3(t,e,n){let s=1,a=1,o=0,l=0;if(e<sn){const d=t,h=d+e,p=Math.cos(d),g=Math.sin(d),y=Math.cos(h),_=Math.sin(h),j=(B,U,$)=>sd(B,d,h,!0)?1:Math.max(U,U*n,$,$*n),k=(B,U,$)=>sd(B,d,h,!0)?-1:Math.min(U,U*n,$,$*n),N=j(0,p,y),D=j(Dn,g,_),R=k(Ot,p,y),E=k(Ot+Dn,g,_);s=(N-R)/2,a=(D-E)/2,o=-(N+R)/2,l=-(D+E)/2}return{ratioX:s,ratioY:a,offsetX:o,offsetY:l}}class Uv extends Jr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:a,color:o,useBorderRadius:l,borderRadius:d}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((h,p)=>{const y=e.getDatasetMeta(0).controller.getStyle(p);return{text:h,fillStyle:y.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(p),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:a,pointStyle:s,borderRadius:l&&(d||y.borderRadius),index:p}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let o=h=>+s[h];if(Tt(s[e])){const{key:h="value"}=this._parsing;o=p=>+qr(s[p],h)}let l,d;for(l=e,d=e+n;l<d;++l)a._parsed[l]=o(l)}}_getRotation(){return Ti(this.options.rotation-90)}_getCircumference(){return Ti(this.options.circumference)}_getRotationExtents(){let e=sn,n=-sn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,o=a._getRotation(),l=a._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,a=this._cachedMeta,o=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,d=Math.max((Math.min(s.width,s.height)-l)/2,0),h=Math.min(G5(this.options.cutout,d),1),p=this._getRingWeight(this.index),{circumference:g,rotation:y}=this._getRotationExtents(),{ratioX:_,ratioY:j,offsetX:k,offsetY:N}=z3(y,g,h),D=(s.width-l)/_,R=(s.height-l)/j,E=Math.max(Math.min(D,R)/2,0),B=ek(this.options.radius,E),U=Math.max(B*h,0),$=(B-U)/this._getVisibleDatasetWeightTotal();this.offsetX=k*B,this.offsetY=N*B,a.total=this.calculateTotal(),this.outerRadius=B-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*p,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const s=this.options,a=this._cachedMeta,o=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/sn)}updateElements(e,n,s,a){const o=a==="reset",l=this.chart,d=l.chartArea,p=l.options.animation,g=(d.left+d.right)/2,y=(d.top+d.bottom)/2,_=o&&p.animateScale,j=_?0:this.innerRadius,k=_?0:this.outerRadius,{sharedOptions:N,includeOptions:D}=this._getSharedOptions(n,a);let R=this._getRotation(),E;for(E=0;E<n;++E)R+=this._circumference(E,o);for(E=n;E<n+s;++E){const B=this._circumference(E,o),U=e[E],$={x:g+this.offsetX,y:y+this.offsetY,startAngle:R,endAngle:R+B,circumference:B,outerRadius:k,innerRadius:j};D&&($.options=N||this.resolveDataElementOptions(E,U.active?"active":a)),R+=B,this.updateElement(U,E,$,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,a;for(a=0;a<n.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?sn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],o=yd(n._parsed[e],s.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const s=this.chart;let a,o,l,d,h;if(!e){for(a=0,o=s.data.datasets.length;a<o;++a)if(s.isDatasetVisible(a)){l=s.getDatasetMeta(a),e=l.data,d=l.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)h=d.resolveDataElementOptions(a),h.borderAlign!=="inner"&&(n=Math.max(n,h.borderWidth||0,h.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,a=e.length;s<a;++s){const o=this.resolveDataElementOptions(s);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(ot(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Dk extends Jr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:a=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:d,count:h}=lk(n,a,l);this._drawStart=d,this._drawCount=h,ck(n)&&(d=0,h=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=a;const p=this.resolveDatasetElementOptions(e);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:p},e),this.updateElements(a,d,h,e)}updateElements(e,n,s,a){const o=a==="reset",{iScale:l,vScale:d,_stacked:h,_dataset:p}=this._cachedMeta,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,a),_=l.axis,j=d.axis,{spanGaps:k,segment:N}=this.options,D=Kl(k)?k:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||a==="none",E=n+s,B=e.length;let U=n>0&&this.getParsed(n-1);for(let $=0;$<B;++$){const I=e[$],O=R?I:{};if($<n||$>=E){O.skip=!0;continue}const q=this.getParsed($),J=bt(q[j]),oe=O[_]=l.getPixelForValue(q[_],$),ie=O[j]=o||J?d.getBasePixel():d.getPixelForValue(h?this.applyStack(d,q,h):q[j],$);O.skip=isNaN(oe)||isNaN(ie)||J,O.stop=$>0&&Math.abs(q[_]-U[_])>D,N&&(O.parsed=q,O.raw=p.data[$]),y&&(O.options=g||this.resolveDataElementOptions($,I.active?"active":a)),R||this.updateElement(I,$,O,a),U=q}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const o=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class Ck extends Jr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:a}}=e.legend.options;return n.labels.map((o,l)=>{const h=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:a,lineWidth:h.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],o=yd(n._parsed[e].r,s.options.locale);return{label:a[e]||"",value:o}}parseObjectData(e,n,s,a){return xk.bind(this)(e,n,s,a)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,a)=>{const o=this.getParsed(a).r;!isNaN(o)&&this.chart.getDataVisibility(a)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,s=e.options,a=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(a/2,0),l=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),d=(o-l)/e.getVisibleDatasetCount();this.outerRadius=o-d*this.index,this.innerRadius=this.outerRadius-d}updateElements(e,n,s,a){const o=a==="reset",l=this.chart,h=l.options.animation,p=this._cachedMeta.rScale,g=p.xCenter,y=p.yCenter,_=p.getIndexAngle(0)-.5*Ot;let j=_,k;const N=360/this.countVisibleElements();for(k=0;k<n;++k)j+=this._computeAngle(k,a,N);for(k=n;k<n+s;k++){const D=e[k];let R=j,E=j+this._computeAngle(k,a,N),B=l.getDataVisibility(k)?p.getDistanceFromCenterForValue(this.getParsed(k).r):0;j=E,o&&(h.animateScale&&(B=0),h.animateRotate&&(R=E=_));const U={x:g,y,innerRadius:0,outerRadius:B,startAngle:R,endAngle:E,options:this.resolveDataElementOptions(k,D.active?"active":a)};this.updateElement(D,k,U,a)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((s,a)=>{!isNaN(this.getParsed(a).r)&&this.chart.getDataVisibility(a)&&n++}),n}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?Ti(this.resolveDataElementOptions(e,n).angle||s):0}}class B3 extends Uv{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Ek extends Jr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,a){return xk.bind(this)(e,n,s,a)}update(e){const n=this._cachedMeta,s=n.dataset,a=n.data||[],o=n.iScale.getLabels();if(s.points=a,e!=="resize"){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0);const d={_loop:!0,_fullLoop:o.length===a.length,options:l};this.updateElement(s,void 0,d,e)}this.updateElements(a,0,a.length,e)}updateElements(e,n,s,a){const o=this._cachedMeta.rScale,l=a==="reset";for(let d=n;d<n+s;d++){const h=e[d],p=this.resolveDataElementOptions(d,h.active?"active":a),g=o.getPointPositionForValue(d,this.getParsed(d).r),y=l?o.xCenter:g.x,_=l?o.yCenter:g.y,j={x:y,y:_,angle:g.angle,skip:isNaN(y)||isNaN(_),options:p};this.updateElement(h,d,j,a)}}}class V3 extends Jr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:a,yScale:o}=n,l=this.getParsed(e),d=a.getLabelForValue(l.x),h=o.getLabelForValue(l.y);return{label:s[e]||"",value:"("+d+", "+h+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,a=this.chart._animationsDisabled;let{start:o,count:l}=lk(n,s,a);if(this._drawStart=o,this._drawCount=l,ck(n)&&(o=0,l=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:d,_dataset:h}=n;d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!h._decimated,d.points=s;const p=this.resolveDatasetElementOptions(e);p.segment=this.options.segment,this.updateElement(d,void 0,{animated:!a,options:p},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,a){const o=a==="reset",{iScale:l,vScale:d,_stacked:h,_dataset:p}=this._cachedMeta,g=this.resolveDataElementOptions(n,a),y=this.getSharedOptions(g),_=this.includeOptions(a,y),j=l.axis,k=d.axis,{spanGaps:N,segment:D}=this.options,R=Kl(N)?N:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||a==="none";let B=n>0&&this.getParsed(n-1);for(let U=n;U<n+s;++U){const $=e[U],I=this.getParsed(U),O=E?$:{},q=bt(I[k]),J=O[j]=l.getPixelForValue(I[j],U),oe=O[k]=o||q?d.getBasePixel():d.getPixelForValue(h?this.applyStack(d,I,h):I[k],U);O.skip=isNaN(J)||isNaN(oe)||q,O.stop=U>0&&Math.abs(I[j]-B[j])>R,D&&(O.parsed=I,O.raw=p.data[U]),_&&(O.options=y||this.resolveDataElementOptions(U,$.active?"active":a)),E||this.updateElement($,U,O,a),B=I}this.updateSharedOptions(y,a,g)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let d=0;for(let h=n.length-1;h>=0;--h)d=Math.max(d,n[h].size(this.resolveDataElementOptions(h))/2);return d>0&&d}const s=e.dataset,a=s.options&&s.options.borderWidth||0;if(!n.length)return a;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(a,o,l)/2}}var F3=Object.freeze({__proto__:null,BarController:Mk,BubbleController:L3,DoughnutController:Uv,LineController:Dk,PieController:B3,PolarAreaController:Ck,RadarController:Ek,ScatterController:V3});function Do(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Iv{static override(e){Object.assign(Iv.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Do()}parse(){return Do()}format(){return Do()}add(){return Do()}diff(){return Do()}startOf(){return Do()}endOf(){return Do()}}var Ak={_date:Iv};function H3(t,e,n,s){const{controller:a,data:o,_sorted:l}=t,d=a._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&l&&o.length){const p=d._reversePixels?oO:Oa;if(s){if(a._sharedOptions){const g=o[0],y=typeof g.getRange=="function"&&g.getRange(e);if(y){const _=p(o,e,n-y),j=p(o,e,n+y);return{lo:_.lo,hi:j.hi}}}}else{const g=p(o,e,n);if(h){const{vScale:y}=a._cachedMeta,{_parsed:_}=t,j=_.slice(0,g.lo+1).reverse().findIndex(N=>!bt(N[y.axis]));g.lo-=Math.max(0,j);const k=_.slice(g.hi).findIndex(N=>!bt(N[y.axis]));g.hi+=Math.max(0,k)}return g}}return{lo:0,hi:o.length-1}}function kp(t,e,n,s,a){const o=t.getSortedVisibleDatasetMetas(),l=n[e];for(let d=0,h=o.length;d<h;++d){const{index:p,data:g}=o[d],{lo:y,hi:_}=H3(o[d],e,l,a);for(let j=y;j<=_;++j){const k=g[j];k.skip||s(k,p,j)}}}function U3(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,a){const o=e?Math.abs(s.x-a.x):0,l=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function Dx(t,e,n,s,a){const o=[];return!a&&!t.isPointInArea(e)||kp(t,n,e,function(d,h,p){!a&&!Ra(d,t.chartArea,0)||d.inRange(e.x,e.y,s)&&o.push({element:d,datasetIndex:h,index:p})},!0),o}function I3(t,e,n,s){let a=[];function o(l,d,h){const{startAngle:p,endAngle:g}=l.getProps(["startAngle","endAngle"],s),{angle:y}=sk(l,{x:e.x,y:e.y});sd(y,p,g)&&a.push({element:l,datasetIndex:d,index:h})}return kp(t,n,e,o),a}function Y3(t,e,n,s,a,o){let l=[];const d=U3(n);let h=Number.POSITIVE_INFINITY;function p(g,y,_){const j=g.inRange(e.x,e.y,a);if(s&&!j)return;const k=g.getCenterPoint(a);if(!(!!o||t.isPointInArea(k))&&!j)return;const D=d(e,k);D<h?(l=[{element:g,datasetIndex:y,index:_}],h=D):D===h&&l.push({element:g,datasetIndex:y,index:_})}return kp(t,n,e,p),l}function Cx(t,e,n,s,a,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!s?I3(t,e,n,a):Y3(t,e,n,s,a,o)}function SS(t,e,n,s,a){const o=[],l=n==="x"?"inXRange":"inYRange";let d=!1;return kp(t,n,e,(h,p,g)=>{h[l]&&h[l](e[n],a)&&(o.push({element:h,datasetIndex:p,index:g}),d=d||h.inRange(e.x,e.y,a))}),s&&!d?[]:o}var W3={modes:{index(t,e,n,s){const a=Ro(e,t),o=n.axis||"x",l=n.includeInvisible||!1,d=n.intersect?Dx(t,a,o,s,l):Cx(t,a,o,!1,s,l),h=[];return d.length?(t.getSortedVisibleDatasetMetas().forEach(p=>{const g=d[0].index,y=p.data[g];y&&!y.skip&&h.push({element:y,datasetIndex:p.index,index:g})}),h):[]},dataset(t,e,n,s){const a=Ro(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;let d=n.intersect?Dx(t,a,o,s,l):Cx(t,a,o,!1,s,l);if(d.length>0){const h=d[0].datasetIndex,p=t.getDatasetMeta(h).data;d=[];for(let g=0;g<p.length;++g)d.push({element:p[g],datasetIndex:h,index:g})}return d},point(t,e,n,s){const a=Ro(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Dx(t,a,o,s,l)},nearest(t,e,n,s){const a=Ro(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Cx(t,a,o,n.intersect,s,l)},x(t,e,n,s){const a=Ro(e,t);return SS(t,a,"x",n.intersect,s)},y(t,e,n,s){const a=Ro(e,t);return SS(t,a,"y",n.intersect,s)}}};const Ok=["left","top","right","bottom"];function _u(t,e){return t.filter(n=>n.pos===e)}function jS(t,e){return t.filter(n=>Ok.indexOf(n.pos)===-1&&n.box.axis===e)}function wu(t,e){return t.sort((n,s)=>{const a=e?s:n,o=e?n:s;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function $3(t){const e=[];let n,s,a,o,l,d;for(n=0,s=(t||[]).length;n<s;++n)a=t[n],{position:o,options:{stack:l,stackWeight:d=1}}=a,e.push({index:n,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:d});return e}function q3(t){const e={};for(const n of t){const{stack:s,pos:a,stackWeight:o}=n;if(!s||!Ok.includes(a))continue;const l=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function G3(t,e){const n=q3(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let o,l,d;for(o=0,l=t.length;o<l;++o){d=t[o];const{fullSize:h}=d.box,p=n[d.stack],g=p&&d.stackWeight/p.weight;d.horizontal?(d.width=g?g*s:h&&e.availableWidth,d.height=a):(d.width=s,d.height=g?g*a:h&&e.availableHeight)}return n}function X3(t){const e=$3(t),n=wu(e.filter(p=>p.box.fullSize),!0),s=wu(_u(e,"left"),!0),a=wu(_u(e,"right")),o=wu(_u(e,"top"),!0),l=wu(_u(e,"bottom")),d=jS(e,"x"),h=jS(e,"y");return{fullSize:n,leftAndTop:s.concat(o),rightAndBottom:a.concat(h).concat(l).concat(d),chartArea:_u(e,"chartArea"),vertical:s.concat(a).concat(h),horizontal:o.concat(l).concat(d)}}function TS(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function Rk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function K3(t,e,n,s){const{pos:a,box:o}=n,l=t.maxPadding;if(!Tt(a)){n.size&&(t[a]-=n.size);const y=s[n.stack]||{size:0,count:1};y.size=Math.max(y.size,n.horizontal?o.height:o.width),n.size=y.size/y.count,t[a]+=n.size}o.getPadding&&Rk(l,o.getPadding());const d=Math.max(0,e.outerWidth-TS(l,t,"left","right")),h=Math.max(0,e.outerHeight-TS(l,t,"top","bottom")),p=d!==t.w,g=h!==t.h;return t.w=d,t.h=h,n.horizontal?{same:p,other:g}:{same:g,other:p}}function Z3(t){const e=t.maxPadding;function n(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Q3(t,e){const n=e.maxPadding;function s(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{o[l]=Math.max(e[l],n[l])}),o}return s(t?["left","right"]:["top","bottom"])}function Ru(t,e,n,s){const a=[];let o,l,d,h,p,g;for(o=0,l=t.length,p=0;o<l;++o){d=t[o],h=d.box,h.update(d.width||e.w,d.height||e.h,Q3(d.horizontal,e));const{same:y,other:_}=K3(e,n,d,s);p|=y&&a.length,g=g||_,h.fullSize||a.push(d)}return p&&Ru(a,e,n,s)||g}function rf(t,e,n,s,a){t.top=n,t.left=e,t.right=e+s,t.bottom=n+a,t.width=s,t.height=a}function kS(t,e,n,s){const a=n.padding;let{x:o,y:l}=e;for(const d of t){const h=d.box,p=s[d.stack]||{placed:0,weight:1},g=d.stackWeight/p.weight||1;if(d.horizontal){const y=e.w*g,_=p.size||h.height;nd(p.start)&&(l=p.start),h.fullSize?rf(h,a.left,l,n.outerWidth-a.right-a.left,_):rf(h,e.left+p.placed,l,y,_),p.start=l,p.placed+=y,l=h.bottom}else{const y=e.h*g,_=p.size||h.width;nd(p.start)&&(o=p.start),h.fullSize?rf(h,o,a.top,_,n.outerHeight-a.bottom-a.top):rf(h,o,e.top+p.placed,_,y),p.start=o,p.placed+=y,o=h.right}}e.x=o,e.y=l}var as={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const a=ls(t.options.layout.padding),o=Math.max(e-a.width,0),l=Math.max(n-a.height,0),d=X3(t.boxes),h=d.vertical,p=d.horizontal;Ht(t.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const g=h.reduce((N,D)=>D.box.options&&D.box.options.display===!1?N:N+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/g,hBoxMaxHeight:l/2}),_=Object.assign({},a);Rk(_,ls(s));const j=Object.assign({maxPadding:_,w:o,h:l,x:a.left,y:a.top},a),k=G3(h.concat(p),y);Ru(d.fullSize,j,y,k),Ru(h,j,y,k),Ru(p,j,y,k)&&Ru(h,j,y,k),Z3(j),kS(d.leftAndTop,j,y,k),j.x+=j.w,j.y+=j.h,kS(d.rightAndBottom,j,y,k),t.chartArea={left:j.left,top:j.top,right:j.left+j.w,bottom:j.top+j.h,height:j.h,width:j.w},Ht(d.chartArea,N=>{const D=N.box;Object.assign(D,t.chartArea),D.update(j.w,j.h,{left:0,top:0,right:0,bottom:0})})}};class Pk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class J3 extends Pk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const jf="$chartjs",e4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},NS=t=>t===null||t==="";function t4(t,e){const n=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[jf]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",NS(a)){const o=uS(t,"width");o!==void 0&&(t.width=o)}if(NS(s))if(t.style.height==="")t.height=t.width/(e||2);else{const o=uS(t,"height");o!==void 0&&(t.height=o)}return t}const Lk=e3?{passive:!0}:!1;function n4(t,e,n){t&&t.addEventListener(e,n,Lk)}function s4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Lk)}function i4(t,e){const n=e4[t.type]||t.type,{x:s,y:a}=Ro(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function Gf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function a4(t,e,n){const s=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const d of o)l=l||Gf(d.addedNodes,s),l=l&&!Gf(d.removedNodes,s);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function r4(t,e,n){const s=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const d of o)l=l||Gf(d.removedNodes,s),l=l&&!Gf(d.addedNodes,s);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const ad=new Map;let MS=0;function zk(){const t=window.devicePixelRatio;t!==MS&&(MS=t,ad.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function o4(t,e){ad.size||window.addEventListener("resize",zk),ad.set(t,e)}function l4(t){ad.delete(t),ad.size||window.removeEventListener("resize",zk)}function c4(t,e,n){const s=t.canvas,a=s&&Hv(s);if(!a)return;const o=ok((d,h)=>{const p=a.clientWidth;n(d,h),p<a.clientWidth&&n()},window),l=new ResizeObserver(d=>{const h=d[0],p=h.contentRect.width,g=h.contentRect.height;p===0&&g===0||o(p,g)});return l.observe(a),o4(t,o),l}function Ex(t,e,n){n&&n.disconnect(),e==="resize"&&l4(t)}function u4(t,e,n){const s=t.canvas,a=ok(o=>{t.ctx!==null&&n(i4(o,t))},t);return n4(s,e,a),a}class d4 extends Pk{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(t4(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[jf])return!1;const s=n[jf].initial;["height","width"].forEach(o=>{const l=s[o];bt(l)?n.removeAttribute(o):n.setAttribute(o,l)});const a=s.style||{};return Object.keys(a).forEach(o=>{n.style[o]=a[o]}),n.width=n.width,delete n[jf],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),l={attach:a4,detach:r4,resize:c4}[n]||u4;a[n]=l(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:Ex,detach:Ex,resize:Ex}[n]||s4)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return JO(e,n,s,a)}isAttached(e){const n=e&&Hv(e);return!!(n&&n.isConnected)}}function h4(t){return!Fv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?J3:d4}let Ya=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return Kl(this.x)&&Kl(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(o=>{a[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),a}};function f4(t,e){const n=t.options.ticks,s=p4(t),a=Math.min(n.maxTicksLimit||s,s),o=n.major.enabled?g4(e):[],l=o.length,d=o[0],h=o[l-1],p=[];if(l>a)return x4(e,p,o,l/a),p;const g=m4(o,e,a);if(l>0){let y,_;const j=l>1?Math.round((h-d)/(l-1)):null;for(of(e,p,g,bt(j)?0:d-j,d),y=0,_=l-1;y<_;y++)of(e,p,g,o[y],o[y+1]);return of(e,p,g,h,bt(j)?e.length:h+j),p}return of(e,p,g),p}function p4(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(s,a))}function m4(t,e,n){const s=y4(t),a=e.length/n;if(!s)return Math.max(a,1);const o=nO(s);for(let l=0,d=o.length-1;l<d;l++){const h=o[l];if(h>a)return h}return Math.max(a,1)}function g4(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function x4(t,e,n,s){let a=0,o=n[0],l;for(s=Math.ceil(s),l=0;l<t.length;l++)l===o&&(e.push(t[l]),a++,o=n[a*s])}function of(t,e,n,s,a){const o=ot(s,0),l=Math.min(ot(a,t.length),t.length);let d=0,h,p,g;for(n=Math.ceil(n),a&&(h=a-s,n=h/Math.floor(h/n)),g=o;g<0;)d++,g=Math.round(o+d*n);for(p=Math.max(o,0);p<l;p++)p===g&&(e.push(t[p]),d++,g=Math.round(o+d*n))}function y4(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const v4=t=>t==="left"?"right":t==="right"?"left":t,DS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,CS=(t,e)=>Math.min(e||t,t);function ES(t,e){const n=[],s=t.length/e,a=t.length;let o=0;for(;o<a;o+=s)n.push(t[Math.floor(o)]);return n}function b4(t,e,n){const s=t.ticks.length,a=Math.min(e,s-1),o=t._startPixel,l=t._endPixel,d=1e-6;let h=t.getPixelForTick(a),p;if(!(n&&(s===1?p=Math.max(h-o,l-h):e===0?p=(t.getPixelForTick(1)-h)/2:p=(h-t.getPixelForTick(a-1))/2,h+=a<e?p:-p,h<o-d||h>l+d)))return h}function _4(t,e){Ht(t,n=>{const s=n.gc,a=s.length/2;let o;if(a>e){for(o=0;o<a;++o)delete n.data[s[o]];s.splice(0,a)}})}function Su(t){return t.drawTicks?t.tickLength:0}function AS(t,e){if(!t.display)return 0;const n=zn(t.font,e),s=ls(t.padding);return(dn(t.text)?t.text.length:1)*n.lineHeight+s.height}function w4(t,e){return Qr(t,{scale:e,type:"scale"})}function S4(t,e,n){return Qr(t,{tick:n,index:e,type:"tick"})}function j4(t,e,n){let s=Rv(t);return(n&&e!=="right"||!n&&e==="right")&&(s=v4(s)),s}function T4(t,e,n,s){const{top:a,left:o,bottom:l,right:d,chart:h}=t,{chartArea:p,scales:g}=h;let y=0,_,j,k;const N=l-a,D=d-o;if(t.isHorizontal()){if(j=ns(s,o,d),Tt(n)){const R=Object.keys(n)[0],E=n[R];k=g[R].getPixelForValue(E)+N-e}else n==="center"?k=(p.bottom+p.top)/2+N-e:k=DS(t,n,e);_=d-o}else{if(Tt(n)){const R=Object.keys(n)[0],E=n[R];j=g[R].getPixelForValue(E)-D+e}else n==="center"?j=(p.left+p.right)/2-D+e:j=DS(t,n,e);k=ns(s,l,a),y=n==="left"?-Dn:Dn}return{titleX:j,titleY:k,maxWidth:_,rotation:y}}class Zo extends Ya{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=Vs(e,Number.POSITIVE_INFINITY),n=Vs(n,Number.NEGATIVE_INFINITY),s=Vs(s,Number.POSITIVE_INFINITY),a=Vs(a,Number.NEGATIVE_INFINITY),{min:Vs(e,s),max:Vs(n,a),minDefined:_n(e),maxDefined:_n(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:o}=this.getUserBounds(),l;if(a&&o)return{min:n,max:s};const d=this.getMatchingVisibleMetas();for(let h=0,p=d.length;h<p;++h)l=d[h].controller.getMinMax(this,e),a||(n=Math.min(n,l.min)),o||(s=Math.max(s,l.max));return n=o&&n>s?s:n,s=a&&n>s?n:s,{min:Vs(n,Vs(s,n)),max:Vs(s,Vs(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:o,ticks:l}=this.options,d=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=EO(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=d<this.ticks.length;this._convertTicksToLabels(h?ES(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=f4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,o;for(s=0,a=e.length;s<a;s++)o=e[s],o.label=Zt(n.callback,[o.value,s,e],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=CS(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,o=n.maxRotation;let l=a,d,h,p;if(!this._isVisible()||!n.display||a>=o||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const g=this._getLabelSizes(),y=g.widest.width,_=g.highest.height,j=In(this.chart.width-y,0,this.maxWidth);d=e.offset?this.maxWidth/s:j/(s-1),y+6>d&&(d=j/(s-(e.offset?.5:1)),h=this.maxHeight-Su(e.grid)-n.padding-AS(e.title,this.chart.options.font),p=Math.sqrt(y*y+_*_),l=Av(Math.min(Math.asin(In((g.highest.height+6)/d,-1,1)),Math.asin(In(h/p,-1,1))-Math.asin(In(_/p,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:o}}=this,l=this._isVisible(),d=this.isHorizontal();if(l){const h=AS(a,n.options.font);if(d?(e.width=this.maxWidth,e.height=Su(o)+h):(e.height=this.maxHeight,e.width=Su(o)+h),s.display&&this.ticks.length){const{first:p,last:g,widest:y,highest:_}=this._getLabelSizes(),j=s.padding*2,k=Ti(this.labelRotation),N=Math.cos(k),D=Math.sin(k);if(d){const R=s.mirror?0:D*y.width+N*_.height;e.height=Math.min(this.maxHeight,e.height+R+j)}else{const R=s.mirror?0:N*y.width+D*_.height;e.width=Math.min(this.maxWidth,e.width+R+j)}this._calculatePadding(p,g,D,N)}}this._handleMargins(),d?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:o,padding:l},position:d}=this.options,h=this.labelRotation!==0,p=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,j=0;h?p?(_=a*e.width,j=s*n.height):(_=s*e.height,j=a*n.width):o==="start"?j=n.width:o==="end"?_=e.width:o!=="inner"&&(_=e.width/2,j=n.width/2),this.paddingLeft=Math.max((_-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((j-y+l)*this.width/(this.width-y),0)}else{let g=n.height/2,y=e.height/2;o==="start"?(g=0,y=e.height):o==="end"&&(g=n.height,y=0),this.paddingTop=g+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)bt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=ES(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:o}=this,l=[],d=[],h=Math.floor(n/CS(n,s));let p=0,g=0,y,_,j,k,N,D,R,E,B,U,$;for(y=0;y<n;y+=h){if(k=e[y].label,N=this._resolveTickFontOptions(y),a.font=D=N.string,R=o[D]=o[D]||{data:{},gc:[]},E=N.lineHeight,B=U=0,!bt(k)&&!dn(k))B=$f(a,R.data,R.gc,B,k),U=E;else if(dn(k))for(_=0,j=k.length;_<j;++_)$=k[_],!bt($)&&!dn($)&&(B=$f(a,R.data,R.gc,B,$),U+=E);l.push(B),d.push(U),p=Math.max(B,p),g=Math.max(U,g)}_4(o,n);const I=l.indexOf(p),O=d.indexOf(g),q=J=>({width:l[J]||0,height:d[J]||0});return{first:q(0),last:q(n-1),widest:q(I),highest:q(O),widths:l,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return rO(this._alignToPixels?Mo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=S4(this.getContext(),e,s))}return this.$context||(this.$context=w4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ti(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,d=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*s>d*a?d/s:h/a:h*a<d*s?h/s:d/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:o,position:l,border:d}=a,h=o.offset,p=this.isHorizontal(),y=this.ticks.length+(h?1:0),_=Su(o),j=[],k=d.setContext(this.getContext()),N=k.display?k.width:0,D=N/2,R=function(H){return Mo(s,H,N)};let E,B,U,$,I,O,q,J,oe,ie,me,le;if(l==="top")E=R(this.bottom),O=this.bottom-_,J=E-D,ie=R(e.top)+D,le=e.bottom;else if(l==="bottom")E=R(this.top),ie=e.top,le=R(e.bottom)-D,O=E+D,J=this.top+_;else if(l==="left")E=R(this.right),I=this.right-_,q=E-D,oe=R(e.left)+D,me=e.right;else if(l==="right")E=R(this.left),oe=e.left,me=R(e.right)-D,I=E+D,q=this.left+_;else if(n==="x"){if(l==="center")E=R((e.top+e.bottom)/2+.5);else if(Tt(l)){const H=Object.keys(l)[0],X=l[H];E=R(this.chart.scales[H].getPixelForValue(X))}ie=e.top,le=e.bottom,O=E+D,J=O+_}else if(n==="y"){if(l==="center")E=R((e.left+e.right)/2);else if(Tt(l)){const H=Object.keys(l)[0],X=l[H];E=R(this.chart.scales[H].getPixelForValue(X))}I=E-D,q=I-_,oe=e.left,me=e.right}const Z=ot(a.ticks.maxTicksLimit,y),re=Math.max(1,Math.ceil(y/Z));for(B=0;B<y;B+=re){const H=this.getContext(B),X=o.setContext(H),ne=d.setContext(H),ae=X.lineWidth,xe=X.color,V=ne.dash||[],ee=ne.dashOffset,pe=X.tickWidth,F=X.tickColor,de=X.tickBorderDash||[],Se=X.tickBorderDashOffset;U=b4(this,B,h),U!==void 0&&($=Mo(s,U,ae),p?I=q=oe=me=$:O=J=ie=le=$,j.push({tx1:I,ty1:O,tx2:q,ty2:J,x1:oe,y1:ie,x2:me,y2:le,width:ae,color:xe,borderDash:V,borderDashOffset:ee,tickWidth:pe,tickColor:F,tickBorderDash:de,tickBorderDashOffset:Se}))}return this._ticksLength=y,this._borderValue=E,j}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:o}=s,l=this.isHorizontal(),d=this.ticks,{align:h,crossAlign:p,padding:g,mirror:y}=o,_=Su(s.grid),j=_+g,k=y?-g:j,N=-Ti(this.labelRotation),D=[];let R,E,B,U,$,I,O,q,J,oe,ie,me,le="middle";if(a==="top")I=this.bottom-k,O=this._getXAxisLabelAlignment();else if(a==="bottom")I=this.top+k,O=this._getXAxisLabelAlignment();else if(a==="left"){const re=this._getYAxisLabelAlignment(_);O=re.textAlign,$=re.x}else if(a==="right"){const re=this._getYAxisLabelAlignment(_);O=re.textAlign,$=re.x}else if(n==="x"){if(a==="center")I=(e.top+e.bottom)/2+j;else if(Tt(a)){const re=Object.keys(a)[0],H=a[re];I=this.chart.scales[re].getPixelForValue(H)+j}O=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")$=(e.left+e.right)/2-j;else if(Tt(a)){const re=Object.keys(a)[0],H=a[re];$=this.chart.scales[re].getPixelForValue(H)}O=this._getYAxisLabelAlignment(_).textAlign}n==="y"&&(h==="start"?le="top":h==="end"&&(le="bottom"));const Z=this._getLabelSizes();for(R=0,E=d.length;R<E;++R){B=d[R],U=B.label;const re=o.setContext(this.getContext(R));q=this.getPixelForTick(R)+o.labelOffset,J=this._resolveTickFontOptions(R),oe=J.lineHeight,ie=dn(U)?U.length:1;const H=ie/2,X=re.color,ne=re.textStrokeColor,ae=re.textStrokeWidth;let xe=O;l?($=q,O==="inner"&&(R===E-1?xe=this.options.reverse?"left":"right":R===0?xe=this.options.reverse?"right":"left":xe="center"),a==="top"?p==="near"||N!==0?me=-ie*oe+oe/2:p==="center"?me=-Z.highest.height/2-H*oe+oe:me=-Z.highest.height+oe/2:p==="near"||N!==0?me=oe/2:p==="center"?me=Z.highest.height/2-H*oe:me=Z.highest.height-ie*oe,y&&(me*=-1),N!==0&&!re.showLabelBackdrop&&($+=oe/2*Math.sin(N))):(I=q,me=(1-ie)*oe/2);let V;if(re.showLabelBackdrop){const ee=ls(re.backdropPadding),pe=Z.heights[R],F=Z.widths[R];let de=me-ee.top,Se=0-ee.left;switch(le){case"middle":de-=pe/2;break;case"bottom":de-=pe;break}switch(O){case"center":Se-=F/2;break;case"right":Se-=F;break;case"inner":R===E-1?Se-=F:R>0&&(Se-=F/2);break}V={left:Se,top:de,width:F+ee.width,height:pe+ee.height,color:re.backdropColor}}D.push({label:U,font:J,textOffset:me,options:{rotation:N,color:X,strokeColor:ne,strokeWidth:ae,textAlign:xe,textBaseline:le,translation:[$,I],backdrop:V}})}return D}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ti(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:o}}=this.options,l=this._getLabelSizes(),d=e+o,h=l.widest.width;let p,g;return n==="left"?a?(g=this.right+o,s==="near"?p="left":s==="center"?(p="center",g+=h/2):(p="right",g+=h)):(g=this.right-d,s==="near"?p="right":s==="center"?(p="center",g-=h/2):(p="left",g=this.left)):n==="right"?a?(g=this.left+o,s==="near"?p="right":s==="center"?(p="center",g-=h/2):(p="left",g-=h)):(g=this.left+d,s==="near"?p="left":s==="center"?(p="center",g+=h/2):(p="right",g=this.right)):p="right",{textAlign:p,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:o,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,o,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const d=(h,p,g)=>{!g.width||!g.color||(s.save(),s.lineWidth=g.width,s.strokeStyle=g.color,s.setLineDash(g.borderDash||[]),s.lineDashOffset=g.borderDashOffset,s.beginPath(),s.moveTo(h.x,h.y),s.lineTo(p.x,p.y),s.stroke(),s.restore())};if(n.display)for(o=0,l=a.length;o<l;++o){const h=a[o];n.drawOnChartArea&&d({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),n.drawTicks&&d({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,o=s.setContext(this.getContext()),l=s.display?o.width:0;if(!l)return;const d=a.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let p,g,y,_;this.isHorizontal()?(p=Mo(e,this.left,l)-l/2,g=Mo(e,this.right,d)+d/2,y=_=h):(y=Mo(e,this.top,l)-l/2,_=Mo(e,this.bottom,d)+d/2,p=g=h),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(p,y),n.lineTo(g,_),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&Sp(s,a);const o=this.getLabelItems(e);for(const l of o){const d=l.options,h=l.font,p=l.label,g=l.textOffset;Go(s,p,0,g,h,d)}a&&jp(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const o=zn(s.font),l=ls(s.padding),d=s.align;let h=o.lineHeight/2;n==="bottom"||n==="center"||Tt(n)?(h+=l.bottom,dn(s.text)&&(h+=o.lineHeight*(s.text.length-1))):h+=l.top;const{titleX:p,titleY:g,maxWidth:y,rotation:_}=T4(this,h,n,d);Go(e,s.text,0,0,o,{color:s.color,maxWidth:y,rotation:_,textAlign:j4(d,n,a),textBaseline:"middle",translation:[p,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=ot(e.grid&&e.grid.z,-1),a=ot(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zo.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let o,l;for(o=0,l=n.length;o<l;++o){const d=n[o];d[s]===this.id&&(!e||d.type===e)&&a.push(d)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return zn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class lf{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;M4(n)&&(s=this.register(n));const a=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,k4(e,l,s),this.override&&hn.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in hn[a]&&(delete hn[a][s],this.override&&delete qo[s])}}function k4(t,e,n){const s=td(Object.create(null),[n?hn.get(n):{},hn.get(e),t.defaults]);hn.set(e,s),t.defaultRoutes&&N4(e,t.defaultRoutes),t.descriptors&&hn.describe(e,t.descriptors)}function N4(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),o=[t].concat(s).join("."),l=e[n].split("."),d=l.pop(),h=l.join(".");hn.route(o,a,h,d)})}function M4(t){return"id"in t&&"defaults"in t}class D4{constructor(){this.controllers=new lf(Jr,"datasets",!0),this.elements=new lf(Ya,"elements"),this.plugins=new lf(Object,"plugins"),this.scales=new lf(Zo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const o=s||this._getRegistryForType(a);s||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):Ht(a,l=>{const d=s||this._getRegistryForType(l);this._exec(e,d,l)})})}_exec(e,n,s){const a=Ev(e);Zt(s["before"+a],[],s),n[e](s),Zt(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var Yi=new D4;class C4{constructor(){this._init=void 0}notify(e,n,s,a){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(o,e,n,s);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,n,s,a){a=a||{};for(const o of e){const l=o.plugin,d=l[s],h=[n,a,o.options];if(Zt(d,h,l)===!1&&a.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=ot(s.options&&s.options.plugins,{}),o=E4(s);return a===!1&&!n?[]:O4(e,o,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(o,l)=>o.filter(d=>!l.some(h=>d.plugin.id===h.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function E4(t){const e={},n=[],s=Object.keys(Yi.plugins.items);for(let o=0;o<s.length;o++)n.push(Yi.getPlugin(s[o]));const a=t.plugins||[];for(let o=0;o<a.length;o++){const l=a[o];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function A4(t,e){return!e&&t===!1?null:t===!0?{}:t}function O4(t,{plugins:e,localIds:n},s,a){const o=[],l=t.getContext();for(const d of e){const h=d.id,p=A4(s[h],a);p!==null&&o.push({plugin:d,options:R4(t.config,{plugin:d,local:n[h]},p,l)})}return o}function R4(t,{plugin:e,local:n},s,a){const o=t.pluginScopeKeys(e),l=t.getOptionScopes(s,o);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ny(t,e){const n=hn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function P4(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function L4(t,e){return t===e?"_index_":"_value_"}function OS(t){if(t==="x"||t==="y"||t==="r")return t}function z4(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function My(t,...e){if(OS(t))return t;for(const n of e){const s=n.axis||z4(n.position)||t.length>1&&OS(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function RS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function B4(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return RS(t,"x",n[0])||RS(t,"y",n[0])}return{}}function V4(t,e){const n=qo[t.type]||{scales:{}},s=e.scales||{},a=Ny(t.type,e),o=Object.create(null);return Object.keys(s).forEach(l=>{const d=s[l];if(!Tt(d))return console.error(`Invalid scale configuration for scale: ${l}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=My(l,d,B4(l,t),hn.scales[d.type]),p=L4(h,a),g=n.scales||{};o[l]=Hu(Object.create(null),[{axis:h},d,g[h],g[p]])}),t.data.datasets.forEach(l=>{const d=l.type||t.type,h=l.indexAxis||Ny(d,e),g=(qo[d]||{}).scales||{};Object.keys(g).forEach(y=>{const _=P4(y,h),j=l[_+"AxisID"]||_;o[j]=o[j]||Object.create(null),Hu(o[j],[{axis:_},s[j],g[y]])})}),Object.keys(o).forEach(l=>{const d=o[l];Hu(d,[hn.scales[d.type],hn.scale])}),o}function Bk(t){const e=t.options||(t.options={});e.plugins=ot(e.plugins,{}),e.scales=V4(t,e)}function Vk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function F4(t){return t=t||{},t.data=Vk(t.data),Bk(t),t}const PS=new Map,Fk=new Set;function cf(t,e){let n=PS.get(t);return n||(n=e(),PS.set(t,n),Fk.add(n)),n}const ju=(t,e,n)=>{const s=qr(e,n);s!==void 0&&t.add(s)};class H4{constructor(e){this._config=F4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Vk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Bk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cf(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return cf(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return cf(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return cf(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:o}=this,l=this._cachedScopes(e,s),d=l.get(n);if(d)return d;const h=new Set;n.forEach(g=>{e&&(h.add(e),g.forEach(y=>ju(h,e,y))),g.forEach(y=>ju(h,a,y)),g.forEach(y=>ju(h,qo[o]||{},y)),g.forEach(y=>ju(h,hn,y)),g.forEach(y=>ju(h,Ty,y))});const p=Array.from(h);return p.length===0&&p.push(Object.create(null)),Fk.has(n)&&l.set(n,p),p}chartOptionScopes(){const{options:e,type:n}=this;return[e,qo[n]||{},hn.datasets[n]||{},{type:n},hn,Ty]}resolveNamedOptions(e,n,s,a=[""]){const o={$shared:!0},{resolver:l,subPrefixes:d}=LS(this._resolverCache,e,a);let h=l;if(I4(l,n)){o.$shared=!1,s=Gr(s)?s():s;const p=this.createResolver(e,s,d);h=Zl(l,s,p)}for(const p of n)o[p]=h[p];return o}createResolver(e,n,s=[""],a){const{resolver:o}=LS(this._resolverCache,e,s);return Tt(n)?Zl(o,n,void 0,a):o}}function LS(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=n.join();let o=s.get(a);return o||(o={resolver:zv(e,n),subPrefixes:n.filter(d=>!d.toLowerCase().includes("hover"))},s.set(a,o)),o}const U4=t=>Tt(t)&&Object.getOwnPropertyNames(t).some(e=>Gr(t[e]));function I4(t,e){const{isScriptable:n,isIndexable:s}=fk(t);for(const a of e){const o=n(a),l=s(a),d=(l||o)&&t[a];if(o&&(Gr(d)||U4(d))||l&&dn(d))return!0}return!1}var Y4="4.5.1";const W4=["top","bottom","left","right","chartArea"];function zS(t,e){return t==="top"||t==="bottom"||W4.indexOf(t)===-1&&e==="x"}function BS(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function VS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Zt(n&&n.onComplete,[t],e)}function $4(t){const e=t.chart,n=e.options.animation;Zt(n&&n.onProgress,[t],e)}function Hk(t){return Fv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Tf={},FS=t=>{const e=Hk(t);return Object.values(Tf).filter(n=>n.canvas===e).pop()};function q4(t,e,n){const s=Object.keys(t);for(const a of s){const o=+a;if(o>=e){const l=t[a];delete t[a],(n>0||o>e)&&(t[o+n]=l)}}}function G4(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let oi=class{static defaults=hn;static instances=Tf;static overrides=qo;static registry=Yi;static version=Y4;static getChart=FS;static register(...e){Yi.add(...e),HS()}static unregister(...e){Yi.remove(...e),HS()}constructor(e,n){const s=this.config=new H4(n),a=Hk(e),o=FS(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||h4(a)),this.platform.updateConfig(s);const d=this.platform.acquireContext(a,l.aspectRatio),h=d&&d.canvas,p=h&&h.height,g=h&&h.width;if(this.id=q5(),this.ctx=d,this.canvas=h,this.width=g,this.height=p,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new C4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uO(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],Tf[this.id]=this,!d||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Ma.listen(this,"complete",VS),Ma.listen(this,"progress",$4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:o}=this;return bt(e)?n&&o?o:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Yi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rS(this.canvas,this.ctx),this}stop(){return Ma.stop(this),this}resize(e,n){Ma.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,n,o),d=s.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,cS(this,d,!0)&&(this.notifyPlugins("resize",{size:l}),Zt(s.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ht(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((l,d)=>(l[d]=!1,l),{});let o=[];n&&(o=o.concat(Object.keys(n).map(l=>{const d=n[l],h=My(l,d),p=h==="r",g=h==="x";return{options:d,dposition:p?"chartArea":g?"bottom":"left",dtype:p?"radialLinear":g?"category":"linear"}}))),Ht(o,l=>{const d=l.options,h=d.id,p=My(h,d),g=ot(d.type,l.dtype);(d.position===void 0||zS(d.position,p)!==zS(l.dposition))&&(d.position=l.dposition),a[h]=!0;let y=null;if(h in s&&s[h].type===g)y=s[h];else{const _=Yi.getScale(g);y=new _({id:h,type:g,ctx:this.ctx,chart:this}),s[y.id]=y}y.init(d,e)}),Ht(a,(l,d)=>{l||delete s[d]}),Ht(s,l=>{as.configure(this,l,l.options),as.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,o)=>a.index-o.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(BS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const o=n[s];let l=this.getDatasetMeta(s);const d=o.type||this.config.type;if(l.type&&l.type!==d&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=d,l.indexAxis=o.indexAxis||Ny(d,this.options),l.order=o.order||0,l.index=s,l.label=""+o.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const h=Yi.getController(d),{datasetElementType:p,dataElementType:g}=hn.datasets[d];Object.assign(h,{dataElementType:Yi.getElement(g),datasetElementType:p&&Yi.getElement(p)}),l.controller=new h(this,s),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let p=0,g=this.data.datasets.length;p<g;p++){const{controller:y}=this.getDatasetMeta(p),_=!a&&o.indexOf(y)===-1;y.buildOrUpdateElements(_),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),a||Ht(o,p=>{p.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(BS("z","_idx"));const{_active:d,_lastEvent:h}=this;h?this._eventHandler(h,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){Ht(this.scales,e=>{as.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Zw(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:o}of n){const l=s==="_removeElements"?-o:o;q4(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=o=>new Set(e.filter(l=>l[0]===o).map((l,d)=>d+","+l.splice(1).join(","))),a=s(0);for(let o=1;o<n;o++)if(!Zw(a,s(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;as.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ht(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Gr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ma.has(this)?this.attached&&!Ma.running(this)&&Ma.start(this):(this.draw(),VS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];(!e||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=jk(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&Sp(n,a),e.controller.draw(),a&&jp(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Ra(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const o=W3.modes[n];return typeof o=="function"?o(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(o=>o&&o._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,a);nd(n)?(o.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),l.update(o,{visible:s}),this.update(d=>d.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ma.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),rS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Tf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},a=(o,l,d)=>{o.offsetX=l,o.offsetY=d,this._eventHandler(o)};Ht(this.options.events,o=>s(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(h,p)=>{n.addEventListener(this,h,p),e[h]=p},a=(h,p)=>{e[h]&&(n.removeEventListener(this,h,p),delete e[h])},o=(h,p)=>{this.canvas&&this.resize(h,p)};let l;const d=()=>{a("attach",d),this.attached=!0,this.resize(),s("resize",o),s("detach",l)};l=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),s("attach",d)},n.isAttached(this.canvas)?d():l()}unbindEvents(){Ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let o,l,d,h;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),d=0,h=e.length;d<h;++d){l=e[d];const p=l&&this.getDatasetMeta(l.datasetIndex).controller;p&&p[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:o,index:l})=>{const d=this.getDatasetMeta(o);if(!d)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:d.data[l],index:l}});!If(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,o=(h,p)=>h.filter(g=>!p.some(y=>g.datasetIndex===y.datasetIndex&&g.index===y.index)),l=o(n,e),d=s?e:o(e,n);l.length&&this.updateHoverStyle(l,a.mode,!1),d.length&&a.mode&&this.updateHoverStyle(d,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const o=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(o||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:o}=this,l=n,d=this._getActiveElements(e,a,s,l),h=J5(e),p=G4(e,this._lastEvent,s,h);s&&(this._lastEvent=null,Zt(o.onHover,[e,d,this],this),h&&Zt(o.onClick,[e,d,this],this));const g=!If(d,a);return(g||n)&&(this._active=d,this._updateHoverStyles(d,a,n)),this._lastEvent=p,g}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}};function HS(){return Ht(oi.instances,t=>t._plugins.invalidate())}function X4(t,e,n){const{startAngle:s,x:a,y:o,outerRadius:l,innerRadius:d,options:h}=e,{borderWidth:p,borderJoinStyle:g}=h,y=Math.min(p/l,is(s-n));if(t.beginPath(),t.arc(a,o,l-p/2,s+y/2,n-y/2),d>0){const _=Math.min(p/d,is(s-n));t.arc(a,o,d+p/2,n-_/2,s+_/2,!0)}else{const _=Math.min(p/2,l*is(s-n));if(g==="round")t.arc(a,o,_,n-Ot/2,s+Ot/2,!0);else if(g==="bevel"){const j=2*_*_,k=-j*Math.cos(n+Ot/2)+a,N=-j*Math.sin(n+Ot/2)+o,D=j*Math.cos(s+Ot/2)+a,R=j*Math.sin(s+Ot/2)+o;t.lineTo(k,N),t.lineTo(D,R)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function K4(t,e,n){const{startAngle:s,pixelMargin:a,x:o,y:l,outerRadius:d,innerRadius:h}=e;let p=a/d;t.beginPath(),t.arc(o,l,d,s-p,n+p),h>a?(p=a/h,t.arc(o,l,h,n+p,s-p,!0)):t.arc(o,l,a,n+Dn,s-Dn),t.closePath(),t.clip()}function Z4(t){return Lv(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Q4(t,e,n,s){const a=Z4(t.options.borderRadius),o=(n-e)/2,l=Math.min(o,s*e/2),d=h=>{const p=(n-Math.min(o,h))*s/2;return In(h,0,Math.min(o,p))};return{outerStart:d(a.outerStart),outerEnd:d(a.outerEnd),innerStart:In(a.innerStart,0,l),innerEnd:In(a.innerEnd,0,l)}}function Al(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function Xf(t,e,n,s,a,o){const{x:l,y:d,startAngle:h,pixelMargin:p,innerRadius:g}=e,y=Math.max(e.outerRadius+s+n-p,0),_=g>0?g+s+n+p:0;let j=0;const k=a-h;if(s){const re=g>0?g-s:0,H=y>0?y-s:0,X=(re+H)/2,ne=X!==0?k*X/(X+s):k;j=(k-ne)/2}const N=Math.max(.001,k*y-n/Ot)/y,D=(k-N)/2,R=h+D+j,E=a-D-j,{outerStart:B,outerEnd:U,innerStart:$,innerEnd:I}=Q4(e,_,y,E-R),O=y-B,q=y-U,J=R+B/O,oe=E-U/q,ie=_+$,me=_+I,le=R+$/ie,Z=E-I/me;if(t.beginPath(),o){const re=(J+oe)/2;if(t.arc(l,d,y,J,re),t.arc(l,d,y,re,oe),U>0){const ae=Al(q,oe,l,d);t.arc(ae.x,ae.y,U,oe,E+Dn)}const H=Al(me,E,l,d);if(t.lineTo(H.x,H.y),I>0){const ae=Al(me,Z,l,d);t.arc(ae.x,ae.y,I,E+Dn,Z+Math.PI)}const X=(E-I/_+(R+$/_))/2;if(t.arc(l,d,_,E-I/_,X,!0),t.arc(l,d,_,X,R+$/_,!0),$>0){const ae=Al(ie,le,l,d);t.arc(ae.x,ae.y,$,le+Math.PI,R-Dn)}const ne=Al(O,R,l,d);if(t.lineTo(ne.x,ne.y),B>0){const ae=Al(O,J,l,d);t.arc(ae.x,ae.y,B,R-Dn,J)}}else{t.moveTo(l,d);const re=Math.cos(J)*y+l,H=Math.sin(J)*y+d;t.lineTo(re,H);const X=Math.cos(oe)*y+l,ne=Math.sin(oe)*y+d;t.lineTo(X,ne)}t.closePath()}function J4(t,e,n,s,a){const{fullCircles:o,startAngle:l,circumference:d}=e;let h=e.endAngle;if(o){Xf(t,e,n,s,h,a);for(let p=0;p<o;++p)t.fill();isNaN(d)||(h=l+(d%sn||sn))}return Xf(t,e,n,s,h,a),t.fill(),h}function eR(t,e,n,s,a){const{fullCircles:o,startAngle:l,circumference:d,options:h}=e,{borderWidth:p,borderJoinStyle:g,borderDash:y,borderDashOffset:_,borderRadius:j}=h,k=h.borderAlign==="inner";if(!p)return;t.setLineDash(y||[]),t.lineDashOffset=_,k?(t.lineWidth=p*2,t.lineJoin=g||"round"):(t.lineWidth=p,t.lineJoin=g||"bevel");let N=e.endAngle;if(o){Xf(t,e,n,s,N,a);for(let D=0;D<o;++D)t.stroke();isNaN(d)||(N=l+(d%sn||sn))}k&&K4(t,e,N),h.selfJoin&&N-l>=Ot&&j===0&&g!=="miter"&&X4(t,e,N),o||(Xf(t,e,n,s,N,a),t.stroke())}class tR extends Ya{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.getProps(["x","y"],s),{angle:o,distance:l}=sk(a,{x:e,y:n}),{startAngle:d,endAngle:h,innerRadius:p,outerRadius:g,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),_=(this.options.spacing+this.options.borderWidth)/2,j=ot(y,h-d),k=sd(o,d,h)&&d!==h,N=j>=sn||k,D=Aa(l,p+_,g+_);return N&&D}getCenterPoint(e){const{x:n,y:s,startAngle:a,endAngle:o,innerRadius:l,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:p}=this.options,g=(a+o)/2,y=(l+d+p+h)/2;return{x:n+Math.cos(g)*y,y:s+Math.sin(g)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,a=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>sn?Math.floor(s/sn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const d=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(d)*a,Math.sin(d)*a);const h=1-Math.sin(Math.min(Ot,s||0)),p=a*h;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,J4(e,this,p,o,l),eR(e,this,p,o,l),e.restore()}}function Uk(t,e,n=e){t.lineCap=ot(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ot(n.borderDash,e.borderDash)),t.lineDashOffset=ot(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ot(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ot(n.borderWidth,e.borderWidth),t.strokeStyle=ot(n.borderColor,e.borderColor)}function nR(t,e,n){t.lineTo(n.x,n.y)}function sR(t){return t.stepped?wO:t.tension||t.cubicInterpolationMode==="monotone"?SO:nR}function Ik(t,e,n={}){const s=t.length,{start:a=0,end:o=s-1}=n,{start:l,end:d}=e,h=Math.max(a,l),p=Math.min(o,d),g=a<l&&o<l||a>d&&o>d;return{count:s,start:h,loop:e.loop,ilen:p<h&&!g?s+p-h:p-h}}function iR(t,e,n,s){const{points:a,options:o}=e,{count:l,start:d,loop:h,ilen:p}=Ik(a,n,s),g=sR(o);let{move:y=!0,reverse:_}=s||{},j,k,N;for(j=0;j<=p;++j)k=a[(d+(_?p-j:j))%l],!k.skip&&(y?(t.moveTo(k.x,k.y),y=!1):g(t,N,k,_,o.stepped),N=k);return h&&(k=a[(d+(_?p:0))%l],g(t,N,k,_,o.stepped)),!!h}function aR(t,e,n,s){const a=e.points,{count:o,start:l,ilen:d}=Ik(a,n,s),{move:h=!0,reverse:p}=s||{};let g=0,y=0,_,j,k,N,D,R;const E=U=>(l+(p?d-U:U))%o,B=()=>{N!==D&&(t.lineTo(g,D),t.lineTo(g,N),t.lineTo(g,R))};for(h&&(j=a[E(0)],t.moveTo(j.x,j.y)),_=0;_<=d;++_){if(j=a[E(_)],j.skip)continue;const U=j.x,$=j.y,I=U|0;I===k?($<N?N=$:$>D&&(D=$),g=(y*g+U)/++y):(B(),t.lineTo(U,$),k=I,y=0,N=D=$),R=$}B()}function Dy(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?aR:iR}function rR(t){return t.stepped?t3:t.tension||t.cubicInterpolationMode==="monotone"?n3:Po}function oR(t,e,n,s){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,s)&&a.closePath()),Uk(t,e.options),t.stroke(a)}function lR(t,e,n,s){const{segments:a,options:o}=e,l=Dy(e);for(const d of a)Uk(t,o,d.style),t.beginPath(),l(t,e,d,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const cR=typeof Path2D=="function";function uR(t,e,n,s){cR&&!e.options.segment?oR(t,e,n,s):lR(t,e,n,s)}class Wa extends Ya{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;qO(this._points,s,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=l3(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,a=e[n],o=this.points,l=Sk(this,{property:n,start:a,end:a});if(!l.length)return;const d=[],h=rR(s);let p,g;for(p=0,g=l.length;p<g;++p){const{start:y,end:_}=l[p],j=o[y],k=o[_];if(j===k){d.push(j);continue}const N=Math.abs((a-j[n])/(k[n]-j[n])),D=h(j,k,N,s.stepped);D[n]=e[n],d.push(D)}return d.length===1?d[0]:d}pathSegment(e,n,s){return Dy(this)(e,this,n,s)}path(e,n,s){const a=this.segments,o=Dy(this);let l=this._loop;n=n||0,s=s||this.points.length-n;for(const d of a)l&=o(e,this,d,{start:n,end:n+s-1});return!!l}draw(e,n,s,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),uR(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function US(t,e,n,s){const a=t.options,{[n]:o}=t.getProps([n],s);return Math.abs(e-o)<a.radius+a.hitRadius}class ic extends Ya{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,n){return US(this,e,"x",n)}inYRange(e,n){return US(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!Ra(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,ky(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Yk(t,e){const{x:n,y:s,base:a,width:o,height:l}=t.getProps(["x","y","base","width","height"],e);let d,h,p,g,y;return t.horizontal?(y=l/2,d=Math.min(n,a),h=Math.max(n,a),p=s-y,g=s+y):(y=o/2,d=n-y,h=n+y,p=Math.min(s,a),g=Math.max(s,a)),{left:d,top:p,right:h,bottom:g}}function Br(t,e,n,s){return t?0:In(e,n,s)}function dR(t,e,n){const s=t.options.borderWidth,a=t.borderSkipped,o=hk(s);return{t:Br(a.top,o.top,0,n),r:Br(a.right,o.right,0,e),b:Br(a.bottom,o.bottom,0,n),l:Br(a.left,o.left,0,e)}}function hR(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,o=Io(a),l=Math.min(e,n),d=t.borderSkipped,h=s||Tt(a);return{topLeft:Br(!h||d.top||d.left,o.topLeft,0,l),topRight:Br(!h||d.top||d.right,o.topRight,0,l),bottomLeft:Br(!h||d.bottom||d.left,o.bottomLeft,0,l),bottomRight:Br(!h||d.bottom||d.right,o.bottomRight,0,l)}}function fR(t){const e=Yk(t),n=e.right-e.left,s=e.bottom-e.top,a=dR(t,n/2,s/2),o=hR(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:o},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,o.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(a.b,a.r))}}}}function Ax(t,e,n,s){const a=e===null,o=n===null,d=t&&!(a&&o)&&Yk(t,s);return d&&(a||Aa(e,d.left,d.right))&&(o||Aa(n,d.top,d.bottom))}function pR(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function mR(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ox(t,e,n={}){const s=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-s,l=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+o,h:t.h+l,radius:t.radius}}class Yv extends Ya{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:a}}=this,{inner:o,outer:l}=fR(this),d=pR(l.radius)?id:mR;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),d(e,Ox(l,n,o)),e.clip(),d(e,Ox(o,-n,l)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),d(e,Ox(o,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,s){return Ax(this,e,n,s)}inXRange(e,n){return Ax(this,e,null,n)}inYRange(e,n){return Ax(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:a,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(n+a)/2:n,y:o?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var gR=Object.freeze({__proto__:null,ArcElement:tR,BarElement:Yv,LineElement:Wa,PointElement:ic});const Cy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],IS=Cy.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Wk(t){return Cy[t%Cy.length]}function $k(t){return IS[t%IS.length]}function xR(t,e){return t.borderColor=Wk(e),t.backgroundColor=$k(e),++e}function yR(t,e){return t.backgroundColor=t.data.map(()=>Wk(e++)),e}function vR(t,e){return t.backgroundColor=t.data.map(()=>$k(e++)),e}function bR(t){let e=0;return(n,s)=>{const a=t.getDatasetMeta(s).controller;a instanceof Uv?e=yR(n,e):a instanceof Ck?e=vR(n,e):a&&(e=xR(n,e))}}function YS(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function _R(t){return t&&(t.borderColor||t.backgroundColor)}function wR(){return hn.borderColor!=="rgba(0,0,0,0.1)"||hn.backgroundColor!=="rgba(0,0,0,0.1)"}var SR={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:s},options:a}=t.config,{elements:o}=a,l=YS(s)||_R(a)||o&&YS(o)||wR();if(!n.forceOverride&&l)return;const d=bR(t);s.forEach(d)}};function jR(t,e,n,s,a){const o=a.samples||s;if(o>=n)return t.slice(e,e+n);const l=[],d=(n-2)/(o-2);let h=0;const p=e+n-1;let g=e,y,_,j,k,N;for(l[h++]=t[g],y=0;y<o-2;y++){let D=0,R=0,E;const B=Math.floor((y+1)*d)+1+e,U=Math.min(Math.floor((y+2)*d)+1,n)+e,$=U-B;for(E=B;E<U;E++)D+=t[E].x,R+=t[E].y;D/=$,R/=$;const I=Math.floor(y*d)+1+e,O=Math.min(Math.floor((y+1)*d)+1,n)+e,{x:q,y:J}=t[g];for(j=k=-1,E=I;E<O;E++)k=.5*Math.abs((q-D)*(t[E].y-J)-(q-t[E].x)*(R-J)),k>j&&(j=k,_=t[E],N=E);l[h++]=_,g=N}return l[h++]=t[p],l}function TR(t,e,n,s){let a=0,o=0,l,d,h,p,g,y,_,j,k,N;const D=[],R=e+n-1,E=t[e].x,U=t[R].x-E;for(l=e;l<e+n;++l){d=t[l],h=(d.x-E)/U*s,p=d.y;const $=h|0;if($===g)p<k?(k=p,y=l):p>N&&(N=p,_=l),a=(o*a+d.x)/++o;else{const I=l-1;if(!bt(y)&&!bt(_)){const O=Math.min(y,_),q=Math.max(y,_);O!==j&&O!==I&&D.push({...t[O],x:a}),q!==j&&q!==I&&D.push({...t[q],x:a})}l>0&&I!==j&&D.push(t[I]),D.push(d),g=$,o=0,k=N=p,y=_=j=l}}return D}function qk(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function WS(t){t.data.datasets.forEach(e=>{qk(e)})}function kR(t,e){const n=e.length;let s=0,a;const{iScale:o}=t,{min:l,max:d,minDefined:h,maxDefined:p}=o.getUserBounds();return h&&(s=In(Oa(e,o.axis,l).lo,0,n-1)),p?a=In(Oa(e,o.axis,d).hi+1,s,n)-s:a=n-s,{start:s,count:a}}var NR={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){WS(t);return}const s=t.width;t.data.datasets.forEach((a,o)=>{const{_data:l,indexAxis:d}=a,h=t.getDatasetMeta(o),p=l||a.data;if(Ou([d,t.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;const g=t.scales[h.xAxisID];if(g.type!=="linear"&&g.type!=="time"||t.options.parsing)return;let{start:y,count:_}=kR(h,p);const j=n.threshold||4*s;if(_<=j){qk(a);return}bt(l)&&(a._data=p,delete a.data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(N){this._data=N}}));let k;switch(n.algorithm){case"lttb":k=jR(p,y,_,s,n);break;case"min-max":k=TR(p,y,_,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}a._decimated=k})},destroy(t){WS(t)}};function MR(t,e,n){const s=t.segments,a=t.points,o=e.points,l=[];for(const d of s){let{start:h,end:p}=d;p=Np(h,p,a);const g=Ey(n,a[h],a[p],d.loop);if(!e.segments){l.push({source:d,target:g,start:a[h],end:a[p]});continue}const y=Sk(e,g);for(const _ of y){const j=Ey(n,o[_.start],o[_.end],_.loop),k=wk(d,a,j);for(const N of k)l.push({source:N,target:_,start:{[n]:$S(g,j,"start",Math.max)},end:{[n]:$S(g,j,"end",Math.min)}})}}return l}function Ey(t,e,n,s){if(s)return;let a=e[t],o=n[t];return t==="angle"&&(a=is(a),o=is(o)),{property:t,start:a,end:o}}function DR(t,e){const{x:n=null,y:s=null}=t||{},a=e.points,o=[];return e.segments.forEach(({start:l,end:d})=>{d=Np(l,d,a);const h=a[l],p=a[d];s!==null?(o.push({x:h.x,y:s}),o.push({x:p.x,y:s})):n!==null&&(o.push({x:n,y:h.y}),o.push({x:n,y:p.y}))}),o}function Np(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function $S(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function Gk(t,e){let n=[],s=!1;return dn(t)?(s=!0,n=t):n=DR(t,e),n.length?new Wa({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function qS(t){return t&&t.fill!==!1}function CR(t,e,n){let a=t[e].fill;const o=[e];let l;if(!n)return a;for(;a!==!1&&o.indexOf(a)===-1;){if(!_n(a))return a;if(l=t[a],!l)return!1;if(l.visible)return a;o.push(a),a=l.fill}return!1}function ER(t,e,n){const s=PR(t);if(Tt(s))return isNaN(s.value)?!1:s;let a=parseFloat(s);return _n(a)&&Math.floor(a)===a?AR(s[0],e,a,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function AR(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function OR(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Tt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function RR(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:Tt(t)?s=t.value:s=e.getBaseValue(),s}function PR(t){const e=t.options,n=e.fill;let s=ot(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function LR(t){const{scale:e,index:n,line:s}=t,a=[],o=s.segments,l=s.points,d=zR(e,n);d.push(Gk({x:null,y:e.bottom},s));for(let h=0;h<o.length;h++){const p=o[h];for(let g=p.start;g<=p.end;g++)BR(a,l[g],d)}return new Wa({points:a,options:{}})}function zR(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let a=0;a<s.length;a++){const o=s[a];if(o.index===e)break;o.hidden||n.unshift(o.dataset)}return n}function BR(t,e,n){const s=[];for(let a=0;a<n.length;a++){const o=n[a],{first:l,last:d,point:h}=VR(o,e,"x");if(!(!h||l&&d)){if(l)s.unshift(h);else if(t.push(h),!d)break}}t.push(...s)}function VR(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const a=s[n],o=t.segments,l=t.points;let d=!1,h=!1;for(let p=0;p<o.length;p++){const g=o[p],y=l[g.start][n],_=l[g.end][n];if(Aa(a,y,_)){d=a===y,h=a===_;break}}return{first:d,last:h,point:s}}class Xk{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:a,y:o,radius:l}=this;return n=n||{start:0,end:sn},e.arc(a,o,l,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:a}=this,o=e.angle;return{x:n+Math.cos(o)*a,y:s+Math.sin(o)*a,angle:o}}}function FR(t){const{chart:e,fill:n,line:s}=t;if(_n(n))return HR(e,n);if(n==="stack")return LR(t);if(n==="shape")return!0;const a=UR(t);return a instanceof Xk?a:Gk(a,s)}function HR(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function UR(t){return(t.scale||{}).getPointPositionForValue?YR(t):IR(t)}function IR(t){const{scale:e={},fill:n}=t,s=OR(n,e);if(_n(s)){const a=e.isHorizontal();return{x:a?s:null,y:a?null:s}}return null}function YR(t){const{scale:e,fill:n}=t,s=e.options,a=e.getLabels().length,o=s.reverse?e.max:e.min,l=RR(n,e,o),d=[];if(s.grid.circular){const h=e.getPointPositionForValue(0,o);return new Xk({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(l)})}for(let h=0;h<a;++h)d.push(e.getPointPositionForValue(h,l));return d}function Rx(t,e,n){const s=FR(e),{chart:a,index:o,line:l,scale:d,axis:h}=e,p=l.options,g=p.fill,y=p.backgroundColor,{above:_=y,below:j=y}=g||{},k=a.getDatasetMeta(o),N=jk(a,k);s&&l.points.length&&(Sp(t,n),WR(t,{line:l,target:s,above:_,below:j,area:n,scale:d,axis:h,clip:N}),jp(t))}function WR(t,e){const{line:n,target:s,above:a,below:o,area:l,scale:d,clip:h}=e,p=n._loop?"angle":e.axis;t.save();let g=o;o!==a&&(p==="x"?(GS(t,s,l.top),Px(t,{line:n,target:s,color:a,scale:d,property:p,clip:h}),t.restore(),t.save(),GS(t,s,l.bottom)):p==="y"&&(XS(t,s,l.left),Px(t,{line:n,target:s,color:o,scale:d,property:p,clip:h}),t.restore(),t.save(),XS(t,s,l.right),g=a)),Px(t,{line:n,target:s,color:g,scale:d,property:p,clip:h}),t.restore()}function GS(t,e,n){const{segments:s,points:a}=e;let o=!0,l=!1;t.beginPath();for(const d of s){const{start:h,end:p}=d,g=a[h],y=a[Np(h,p,a)];o?(t.moveTo(g.x,g.y),o=!1):(t.lineTo(g.x,n),t.lineTo(g.x,g.y)),l=!!e.pathSegment(t,d,{move:l}),l?t.closePath():t.lineTo(y.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function XS(t,e,n){const{segments:s,points:a}=e;let o=!0,l=!1;t.beginPath();for(const d of s){const{start:h,end:p}=d,g=a[h],y=a[Np(h,p,a)];o?(t.moveTo(g.x,g.y),o=!1):(t.lineTo(n,g.y),t.lineTo(g.x,g.y)),l=!!e.pathSegment(t,d,{move:l}),l?t.closePath():t.lineTo(n,y.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Px(t,e){const{line:n,target:s,property:a,color:o,scale:l,clip:d}=e,h=MR(n,s,a);for(const{source:p,target:g,start:y,end:_}of h){const{style:{backgroundColor:j=o}={}}=p,k=s!==!0;t.save(),t.fillStyle=j,$R(t,l,d,k&&Ey(a,y,_)),t.beginPath();const N=!!n.pathSegment(t,p);let D;if(k){N?t.closePath():KS(t,s,_,a);const R=!!s.pathSegment(t,g,{move:N,reverse:!0});D=N&&R,D||KS(t,s,y,a)}t.closePath(),t.fill(D?"evenodd":"nonzero"),t.restore()}}function $R(t,e,n,s){const a=e.chart.chartArea,{property:o,start:l,end:d}=s||{};if(o==="x"||o==="y"){let h,p,g,y;o==="x"?(h=l,p=a.top,g=d,y=a.bottom):(h=a.left,p=l,g=a.right,y=d),t.beginPath(),n&&(h=Math.max(h,n.left),g=Math.min(g,n.right),p=Math.max(p,n.top),y=Math.min(y,n.bottom)),t.rect(h,p,g-h,y-p),t.clip()}}function KS(t,e,n,s){const a=e.interpolate(n,s);a&&t.lineTo(a.x,a.y)}var Mp={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,a=[];let o,l,d,h;for(l=0;l<s;++l)o=t.getDatasetMeta(l),d=o.dataset,h=null,d&&d.options&&d instanceof Wa&&(h={visible:t.isDatasetVisible(l),index:l,fill:ER(d,l,s),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:d}),o.$filler=h,a.push(h);for(l=0;l<s;++l)h=a[l],!(!h||h.fill===!1)&&(h.fill=CR(a,l,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",a=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let l=a.length-1;l>=0;--l){const d=a[l].$filler;d&&(d.line.updateControlPoints(o,d.axis),s&&d.fill&&Rx(t.ctx,d,o))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let a=s.length-1;a>=0;--a){const o=s[a].$filler;qS(o)&&Rx(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!qS(s)||n.drawTime!=="beforeDatasetDraw"||Rx(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ZS=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},qR=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class QS extends Ya{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Zt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=zn(s.font),o=a.size,l=this._computeTitleHeight(),{boxWidth:d,itemHeight:h}=ZS(s,o);let p,g;n.font=a.string,this.isHorizontal()?(p=this.maxWidth,g=this._fitRows(l,o,d,h)+10):(g=this.maxHeight,p=this._fitCols(l,a,d,h)+10),this.width=Math.min(p,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:o,maxWidth:l,options:{labels:{padding:d}}}=this,h=this.legendHitBoxes=[],p=this.lineWidths=[0],g=a+d;let y=e;o.textAlign="left",o.textBaseline="middle";let _=-1,j=-g;return this.legendItems.forEach((k,N)=>{const D=s+n/2+o.measureText(k.text).width;(N===0||p[p.length-1]+D+2*d>l)&&(y+=g,p[p.length-(N>0?0:1)]=0,j+=g,_++),h[N]={left:0,top:j,row:_,width:D,height:a},p[p.length-1]+=D+d}),y}_fitCols(e,n,s,a){const{ctx:o,maxHeight:l,options:{labels:{padding:d}}}=this,h=this.legendHitBoxes=[],p=this.columnSizes=[],g=l-e;let y=d,_=0,j=0,k=0,N=0;return this.legendItems.forEach((D,R)=>{const{itemWidth:E,itemHeight:B}=GR(s,n,o,D,a);R>0&&j+B+2*d>g&&(y+=_+d,p.push({width:_,height:j}),k+=_+d,N++,_=j=0),h[R]={left:k,top:j,col:N,width:E,height:B},_=Math.max(_,E),j+=B+d}),y+=_,p.push({width:_,height:j}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:o}}=this,l=Yl(o,this.left,this.width);if(this.isHorizontal()){let d=0,h=ns(s,this.left+a,this.right-this.lineWidths[d]);for(const p of n)d!==p.row&&(d=p.row,h=ns(s,this.left+a,this.right-this.lineWidths[d])),p.top+=this.top+e+a,p.left=l.leftForLtr(l.x(h),p.width),h+=p.width+a}else{let d=0,h=ns(s,this.top+e+a,this.bottom-this.columnSizes[d].height);for(const p of n)p.col!==d&&(d=p.col,h=ns(s,this.top+e+a,this.bottom-this.columnSizes[d].height)),p.top=h,p.left+=this.left+a,p.left=l.leftForLtr(l.x(p.left),p.width),h+=p.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sp(e,this),this._draw(),jp(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:o,labels:l}=e,d=hn.color,h=Yl(e.rtl,this.left,this.width),p=zn(l.font),{padding:g}=l,y=p.size,_=y/2;let j;this.drawTitle(),a.textAlign=h.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=p.string;const{boxWidth:k,boxHeight:N,itemHeight:D}=ZS(l,y),R=function(I,O,q){if(isNaN(k)||k<=0||isNaN(N)||N<0)return;a.save();const J=ot(q.lineWidth,1);if(a.fillStyle=ot(q.fillStyle,d),a.lineCap=ot(q.lineCap,"butt"),a.lineDashOffset=ot(q.lineDashOffset,0),a.lineJoin=ot(q.lineJoin,"miter"),a.lineWidth=J,a.strokeStyle=ot(q.strokeStyle,d),a.setLineDash(ot(q.lineDash,[])),l.usePointStyle){const oe={radius:N*Math.SQRT2/2,pointStyle:q.pointStyle,rotation:q.rotation,borderWidth:J},ie=h.xPlus(I,k/2),me=O+_;dk(a,oe,ie,me,l.pointStyleWidth&&k)}else{const oe=O+Math.max((y-N)/2,0),ie=h.leftForLtr(I,k),me=Io(q.borderRadius);a.beginPath(),Object.values(me).some(le=>le!==0)?id(a,{x:ie,y:oe,w:k,h:N,radius:me}):a.rect(ie,oe,k,N),a.fill(),J!==0&&a.stroke()}a.restore()},E=function(I,O,q){Go(a,q.text,I,O+D/2,p,{strikethrough:q.hidden,textAlign:h.textAlign(q.textAlign)})},B=this.isHorizontal(),U=this._computeTitleHeight();B?j={x:ns(o,this.left+g,this.right-s[0]),y:this.top+g+U,line:0}:j={x:this.left+g,y:ns(o,this.top+U+g,this.bottom-n[0].height),line:0},vk(this.ctx,e.textDirection);const $=D+g;this.legendItems.forEach((I,O)=>{a.strokeStyle=I.fontColor,a.fillStyle=I.fontColor;const q=a.measureText(I.text).width,J=h.textAlign(I.textAlign||(I.textAlign=l.textAlign)),oe=k+_+q;let ie=j.x,me=j.y;h.setWidth(this.width),B?O>0&&ie+oe+g>this.right&&(me=j.y+=$,j.line++,ie=j.x=ns(o,this.left+g,this.right-s[j.line])):O>0&&me+$>this.bottom&&(ie=j.x=ie+n[j.line].width+g,j.line++,me=j.y=ns(o,this.top+U+g,this.bottom-n[j.line].height));const le=h.x(ie);if(R(le,me,I),ie=dO(J,ie+k+_,B?ie+oe:this.right,e.rtl),E(h.x(ie),me,I),B)j.x+=oe+g;else if(typeof I.text!="string"){const Z=p.lineHeight;j.y+=Kk(I,Z)+g}else j.y+=$}),bk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=zn(n.font),a=ls(n.padding);if(!n.display)return;const o=Yl(e.rtl,this.left,this.width),l=this.ctx,d=n.position,h=s.size/2,p=a.top+h;let g,y=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),g=this.top+p,y=ns(e.align,y,this.right-_);else{const k=this.columnSizes.reduce((N,D)=>Math.max(N,D.height),0);g=p+ns(e.align,this.top,this.bottom-k-e.labels.padding-this._computeTitleHeight())}const j=ns(d,y,y+_);l.textAlign=o.textAlign(Rv(d)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=s.string,Go(l,n.text,j,g,s)}_computeTitleHeight(){const e=this.options.title,n=zn(e.font),s=ls(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,o;if(Aa(e,this.left,this.right)&&Aa(n,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(a=o[s],Aa(e,a.left,a.left+a.width)&&Aa(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!ZR(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=qR(a,s);a&&!o&&Zt(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!o&&Zt(n.onHover,[e,s,this],this)}else s&&Zt(n.onClick,[e,s,this],this)}}function GR(t,e,n,s,a){const o=XR(s,t,e,n),l=KR(a,s,e.lineHeight);return{itemWidth:o,itemHeight:l}}function XR(t,e,n,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((o,l)=>o.length>l.length?o:l)),e+n.size/2+s.measureText(a).width}function KR(t,e,n){let s=t;return typeof e.text!="string"&&(s=Kk(e,n)),s}function Kk(t,e){const n=t.text?t.text.length:0;return e*n}function ZR(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var ac={id:"legend",_element:QS,start(t,e,n){const s=t.legend=new QS({ctx:t.ctx,options:n,chart:t});as.configure(t,s,n),as.addBox(t,s)},stop(t){as.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;as.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:o,useBorderRadius:l,borderRadius:d}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{const p=h.controller.getStyle(n?0:void 0),g=ls(p.borderWidth);return{text:e[h.index].label,fillStyle:p.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:p.borderColor,pointStyle:s||p.pointStyle,rotation:p.rotation,textAlign:a||p.textAlign,borderRadius:l&&(d||p.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Wv extends Ya{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=dn(s.text)?s.text.length:1;this._padding=ls(s.padding);const o=a*zn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:o,options:l}=this,d=l.align;let h=0,p,g,y;return this.isHorizontal()?(g=ns(d,s,o),y=n+e,p=o-s):(l.position==="left"?(g=s+e,y=ns(d,a,n),h=Ot*-.5):(g=o-e,y=ns(d,n,a),h=Ot*.5),p=a-n),{titleX:g,titleY:y,maxWidth:p,rotation:h}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=zn(n.font),o=s.lineHeight/2+this._padding.top,{titleX:l,titleY:d,maxWidth:h,rotation:p}=this._drawArgs(o);Go(e,n.text,0,0,s,{color:n.color,maxWidth:h,rotation:p,textAlign:Rv(n.align),textBaseline:"middle",translation:[l,d]})}}function QR(t,e){const n=new Wv({ctx:t.ctx,options:e,chart:t});as.configure(t,n,e),as.addBox(t,n),t.titleBlock=n}var Dp={id:"title",_element:Wv,start(t,e,n){QR(t,n)},stop(t){const e=t.titleBlock;as.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;as.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const uf=new WeakMap;var JR={id:"subtitle",start(t,e,n){const s=new Wv({ctx:t.ctx,options:n,chart:t});as.configure(t,s,n),as.addBox(t,s),uf.set(t,s)},stop(t){as.removeBox(t,uf.get(t)),uf.delete(t)},beforeUpdate(t,e,n){const s=uf.get(t);as.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pu={average(t){if(!t.length)return!1;let e,n,s=new Set,a=0,o=0;for(e=0,n=t.length;e<n;++e){const d=t[e].element;if(d&&d.hasValue()){const h=d.tooltipPosition();s.add(h.x),a+=h.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((d,h)=>d+h)/s.size,y:a/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,o,l,d;for(o=0,l=t.length;o<l;++o){const h=t[o].element;if(h&&h.hasValue()){const p=h.getCenterPoint(),g=jy(e,p);g<a&&(a=g,d=h)}}if(d){const h=d.tooltipPosition();n=h.x,s=h.y}return{x:n,y:s}}};function Ii(t,e){return e&&(dn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Da(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function eP(t,e){const{element:n,datasetIndex:s,index:a}=e,o=t.getDatasetMeta(s).controller,{label:l,value:d}=o.getLabelAndValue(a);return{chart:t,label:l,parsed:o.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:d,dataset:o.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function JS(t,e){const n=t.chart.ctx,{body:s,footer:a,title:o}=t,{boxWidth:l,boxHeight:d}=e,h=zn(e.bodyFont),p=zn(e.titleFont),g=zn(e.footerFont),y=o.length,_=a.length,j=s.length,k=ls(e.padding);let N=k.height,D=0,R=s.reduce((U,$)=>U+$.before.length+$.lines.length+$.after.length,0);if(R+=t.beforeBody.length+t.afterBody.length,y&&(N+=y*p.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),R){const U=e.displayColors?Math.max(d,h.lineHeight):h.lineHeight;N+=j*U+(R-j)*h.lineHeight+(R-1)*e.bodySpacing}_&&(N+=e.footerMarginTop+_*g.lineHeight+(_-1)*e.footerSpacing);let E=0;const B=function(U){D=Math.max(D,n.measureText(U).width+E)};return n.save(),n.font=p.string,Ht(t.title,B),n.font=h.string,Ht(t.beforeBody.concat(t.afterBody),B),E=e.displayColors?l+2+e.boxPadding:0,Ht(s,U=>{Ht(U.before,B),Ht(U.lines,B),Ht(U.after,B)}),E=0,n.font=g.string,Ht(t.footer,B),n.restore(),D+=k.width,{width:D,height:N}}function tP(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function nP(t,e,n,s){const{x:a,width:o}=s,l=n.caretSize+n.caretPadding;if(t==="left"&&a+o+l>e.width||t==="right"&&a-o-l<0)return!0}function sP(t,e,n,s){const{x:a,width:o}=n,{width:l,chartArea:{left:d,right:h}}=t;let p="center";return s==="center"?p=a<=(d+h)/2?"left":"right":a<=o/2?p="left":a>=l-o/2&&(p="right"),nP(p,t,e,n)&&(p="center"),p}function e2(t,e,n){const s=n.yAlign||e.yAlign||tP(t,n);return{xAlign:n.xAlign||e.xAlign||sP(t,e,n,s),yAlign:s}}function iP(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function aP(t,e,n){let{y:s,height:a}=t;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function t2(t,e,n,s){const{caretSize:a,caretPadding:o,cornerRadius:l}=t,{xAlign:d,yAlign:h}=n,p=a+o,{topLeft:g,topRight:y,bottomLeft:_,bottomRight:j}=Io(l);let k=iP(e,d);const N=aP(e,h,p);return h==="center"?d==="left"?k+=p:d==="right"&&(k-=p):d==="left"?k-=Math.max(g,_)+a:d==="right"&&(k+=Math.max(y,j)+a),{x:In(k,0,s.width-e.width),y:In(N,0,s.height-e.height)}}function df(t,e,n){const s=ls(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function n2(t){return Ii([],Da(t))}function rP(t,e,n){return Qr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function s2(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Zk={beforeTitle:ka,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:ka,beforeBody:ka,beforeLabel:ka,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return bt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ka,afterBody:ka,beforeFooter:ka,footer:ka,afterFooter:ka};function Ns(t,e,n,s){const a=t[e].call(n,s);return typeof a>"u"?Zk[e].call(n,s):a}let i2=class extends Ya{static positioners=Pu;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,o=new Tk(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=rP(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=Ns(s,"beforeTitle",this,e),o=Ns(s,"title",this,e),l=Ns(s,"afterTitle",this,e);let d=[];return d=Ii(d,Da(a)),d=Ii(d,Da(o)),d=Ii(d,Da(l)),d}getBeforeBody(e,n){return n2(Ns(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return Ht(e,o=>{const l={before:[],lines:[],after:[]},d=s2(s,o);Ii(l.before,Da(Ns(d,"beforeLabel",this,o))),Ii(l.lines,Ns(d,"label",this,o)),Ii(l.after,Da(Ns(d,"afterLabel",this,o))),a.push(l)}),a}getAfterBody(e,n){return n2(Ns(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=Ns(s,"beforeFooter",this,e),o=Ns(s,"footer",this,e),l=Ns(s,"afterFooter",this,e);let d=[];return d=Ii(d,Da(a)),d=Ii(d,Da(o)),d=Ii(d,Da(l)),d}_createItems(e){const n=this._active,s=this.chart.data,a=[],o=[],l=[];let d=[],h,p;for(h=0,p=n.length;h<p;++h)d.push(eP(this.chart,n[h]));return e.filter&&(d=d.filter((g,y,_)=>e.filter(g,y,_,s))),e.itemSort&&(d=d.sort((g,y)=>e.itemSort(g,y,s))),Ht(d,g=>{const y=s2(e.callbacks,g);a.push(Ns(y,"labelColor",this,g)),o.push(Ns(y,"labelPointStyle",this,g)),l.push(Ns(y,"labelTextColor",this,g))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=d,d}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let o,l=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const d=Pu[s.position].call(this,a,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const h=this._size=JS(this,s),p=Object.assign({},d,h),g=e2(this.chart,s,p),y=t2(s,p,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:d.x,caretY:d.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const o=this.getCaretPosition(e,s,a);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:o}=this,{caretSize:l,cornerRadius:d}=s,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:y}=Io(d),{x:_,y:j}=e,{width:k,height:N}=n;let D,R,E,B,U,$;return o==="center"?(U=j+N/2,a==="left"?(D=_,R=D-l,B=U+l,$=U-l):(D=_+k,R=D+l,B=U-l,$=U+l),E=D):(a==="left"?R=_+Math.max(h,g)+l:a==="right"?R=_+k-Math.max(p,y)-l:R=this.caretX,o==="top"?(B=j,U=B-l,D=R-l,E=R+l):(B=j+N,U=B+l,D=R+l,E=R-l),$=B),{x1:D,x2:R,x3:E,y1:B,y2:U,y3:$}}drawTitle(e,n,s){const a=this.title,o=a.length;let l,d,h;if(o){const p=Yl(s.rtl,this.x,this.width);for(e.x=df(this,s.titleAlign,s),n.textAlign=p.textAlign(s.titleAlign),n.textBaseline="middle",l=zn(s.titleFont),d=s.titleSpacing,n.fillStyle=s.titleColor,n.font=l.string,h=0;h<o;++h)n.fillText(a[h],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+d,h+1===o&&(e.y+=s.titleMarginBottom-d)}}_drawColorBox(e,n,s,a,o){const l=this.labelColors[s],d=this.labelPointStyles[s],{boxHeight:h,boxWidth:p}=o,g=zn(o.bodyFont),y=df(this,"left",o),_=a.x(y),j=h<g.lineHeight?(g.lineHeight-h)/2:0,k=n.y+j;if(o.usePointStyle){const N={radius:Math.min(p,h)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},D=a.leftForLtr(_,p)+p/2,R=k+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,ky(e,N,D,R),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,ky(e,N,D,R)}else{e.lineWidth=Tt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const N=a.leftForLtr(_,p),D=a.leftForLtr(a.xPlus(_,1),p-2),R=Io(l.borderRadius);Object.values(R).some(E=>E!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,id(e,{x:N,y:k,w:p,h,radius:R}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),id(e,{x:D,y:k+1,w:p-2,h:h-2,radius:R}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(N,k,p,h),e.strokeRect(N,k,p,h),e.fillStyle=l.backgroundColor,e.fillRect(D,k+1,p-2,h-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:o,bodyAlign:l,displayColors:d,boxHeight:h,boxWidth:p,boxPadding:g}=s,y=zn(s.bodyFont);let _=y.lineHeight,j=0;const k=Yl(s.rtl,this.x,this.width),N=function(q){n.fillText(q,k.x(e.x+j),e.y+_/2),e.y+=_+o},D=k.textAlign(l);let R,E,B,U,$,I,O;for(n.textAlign=l,n.textBaseline="middle",n.font=y.string,e.x=df(this,D,s),n.fillStyle=s.bodyColor,Ht(this.beforeBody,N),j=d&&D!=="right"?l==="center"?p/2+g:p+2+g:0,U=0,I=a.length;U<I;++U){for(R=a[U],E=this.labelTextColors[U],n.fillStyle=E,Ht(R.before,N),B=R.lines,d&&B.length&&(this._drawColorBox(n,e,U,k,s),_=Math.max(y.lineHeight,h)),$=0,O=B.length;$<O;++$)N(B[$]),_=y.lineHeight;Ht(R.after,N)}j=0,_=y.lineHeight,Ht(this.afterBody,N),e.y-=o}drawFooter(e,n,s){const a=this.footer,o=a.length;let l,d;if(o){const h=Yl(s.rtl,this.x,this.width);for(e.x=df(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=h.textAlign(s.footerAlign),n.textBaseline="middle",l=zn(s.footerFont),n.fillStyle=s.footerColor,n.font=l.string,d=0;d<o;++d)n.fillText(a[d],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:o,yAlign:l}=this,{x:d,y:h}=e,{width:p,height:g}=s,{topLeft:y,topRight:_,bottomLeft:j,bottomRight:k}=Io(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(d+y,h),l==="top"&&this.drawCaret(e,n,s,a),n.lineTo(d+p-_,h),n.quadraticCurveTo(d+p,h,d+p,h+_),l==="center"&&o==="right"&&this.drawCaret(e,n,s,a),n.lineTo(d+p,h+g-k),n.quadraticCurveTo(d+p,h+g,d+p-k,h+g),l==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(d+j,h+g),n.quadraticCurveTo(d,h+g,d,h+g-j),l==="center"&&o==="left"&&this.drawCaret(e,n,s,a),n.lineTo(d,h+y),n.quadraticCurveTo(d,h,d+y,h),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,o=s&&s.y;if(a||o){const l=Pu[e.position].call(this,this._active,this._eventPosition);if(!l)return;const d=this._size=JS(this,e),h=Object.assign({},l,this._size),p=e2(n,e,h),g=t2(e,h,p,n);(a._to!==g.x||o._to!==g.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=d.width,this.height=d.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=ls(n.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&d&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,a,n),vk(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),bk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:d,index:h})=>{const p=this.chart.getDatasetMeta(d);if(!p)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:p.data[h],index:h}}),o=!If(s,a),l=this._positionChanged(a,n);(o||l)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,s),d=this._positionChanged(l,e),h=n||!If(l,o)||d;return h&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),h}_getActiveElements(e,n,s,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:s,caretY:a,options:o}=this,l=Pu[o.position].call(this,e,n);return l!==!1&&(s!==l.x||a!==l.y)}};var rc={id:"tooltip",_element:i2,positioners:Pu,afterInit(t,e,n){n&&(t.tooltip=new i2({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Zk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},oP=Object.freeze({__proto__:null,Colors:SR,Decimation:NR,Filler:Mp,Legend:ac,SubTitle:JR,Title:Dp,Tooltip:rc});const lP=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function cP(t,e,n,s){const a=t.indexOf(e);if(a===-1)return lP(t,e,n,s);const o=t.lastIndexOf(e);return a!==o?n:a}const uP=(t,e)=>t===null?null:In(Math.round(t),0,e);function a2(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class vd extends Zo{static id="category";static defaults={ticks:{callback:a2}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:o}of n)s[a]===o&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(bt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:cP(s,e,ot(n,e),this._addedLabels),uP(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=e;l<=n;l++)a.push({value:l});return a}getLabelForValue(e){return a2.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function dP(t,e){const n=[],{bounds:a,step:o,min:l,max:d,precision:h,count:p,maxTicks:g,maxDigits:y,includeBounds:_}=t,j=o||1,k=g-1,{min:N,max:D}=e,R=!bt(l),E=!bt(d),B=!bt(p),U=(D-N)/(y+1);let $=Jw((D-N)/k/j)*j,I,O,q,J;if($<1e-14&&!R&&!E)return[{value:N},{value:D}];J=Math.ceil(D/$)-Math.floor(N/$),J>k&&($=Jw(J*$/k/j)*j),bt(h)||(I=Math.pow(10,h),$=Math.ceil($*I)/I),a==="ticks"?(O=Math.floor(N/$)*$,q=Math.ceil(D/$)*$):(O=N,q=D),R&&E&&o&&iO((d-l)/o,$/1e3)?(J=Math.round(Math.min((d-l)/$,g)),$=(d-l)/J,O=l,q=d):B?(O=R?l:O,q=E?d:q,J=p-1,$=(q-O)/J):(J=(q-O)/$,Uu(J,Math.round(J),$/1e3)?J=Math.round(J):J=Math.ceil(J));const oe=Math.max(eS($),eS(O));I=Math.pow(10,bt(h)?oe:h),O=Math.round(O*I)/I,q=Math.round(q*I)/I;let ie=0;for(R&&(_&&O!==l?(n.push({value:l}),O<l&&ie++,Uu(Math.round((O+ie*$)*I)/I,l,r2(l,U,t))&&ie++):O<l&&ie++);ie<J;++ie){const me=Math.round((O+ie*$)*I)/I;if(E&&me>d)break;n.push({value:me})}return E&&_&&q!==d?n.length&&Uu(n[n.length-1].value,d,r2(d,U,t))?n[n.length-1].value=d:n.push({value:d}):(!E||q===d)&&n.push({value:q}),n}function r2(t,e,{horizontal:n,minRotation:s}){const a=Ti(s),o=(n?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/o,l)}class Kf extends Zo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return bt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:o}=this;const l=h=>a=n?a:h,d=h=>o=s?o:h;if(e){const h=qi(a),p=qi(o);h<0&&p<0?d(0):h>0&&p>0&&l(0)}if(a===o){let h=o===0?1:Math.abs(o*.05);d(o+h),e||l(a-h)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,l=dP(a,o);return e.bounds==="ticks"&&nk(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return yd(e,this.chart.options.locale,this.options.ticks.format)}}class bd extends Kf{static id="linear";static defaults={ticks:{callback:wp.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=_n(e)?e:0,this.max=_n(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Ti(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const rd=t=>Math.floor(Lr(t)),Co=(t,e)=>Math.pow(10,rd(t)+e);function o2(t){return t/Math.pow(10,rd(t))===1}function l2(t,e,n){const s=Math.pow(10,n),a=Math.floor(t/s);return Math.ceil(e/s)-a}function hP(t,e){const n=e-t;let s=rd(n);for(;l2(t,e,s)>10;)s++;for(;l2(t,e,s)<10;)s--;return Math.min(s,rd(t))}function fP(t,{min:e,max:n}){e=Vs(t.min,e);const s=[],a=rd(e);let o=hP(e,n),l=o<0?Math.pow(10,Math.abs(o)):1;const d=Math.pow(10,o),h=a>o?Math.pow(10,a):0,p=Math.round((e-h)*l)/l,g=Math.floor((e-h)/d/10)*d*10;let y=Math.floor((p-g)/Math.pow(10,o)),_=Vs(t.min,Math.round((h+g+y*Math.pow(10,o))*l)/l);for(;_<n;)s.push({value:_,major:o2(_),significand:y}),y>=10?y=y<15?15:20:y++,y>=20&&(o++,y=2,l=o>=0?1:l),_=Math.round((h+g+y*Math.pow(10,o))*l)/l;const j=Vs(t.max,_);return s.push({value:j,major:o2(j),significand:y}),s}class pP extends Zo{static id="logarithmic";static defaults={ticks:{callback:wp.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const s=Kf.prototype.parse.apply(this,[e,n]);if(s===0){this._zero=!0;return}return _n(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=_n(e)?Math.max(0,e):null,this.max=_n(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!_n(this._userMin)&&(this.min=e===Co(this.min,0)?Co(this.min,-1):Co(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let s=this.min,a=this.max;const o=d=>s=e?s:d,l=d=>a=n?a:d;s===a&&(s<=0?(o(1),l(10)):(o(Co(s,-1)),l(Co(a,1)))),s<=0&&o(Co(a,-1)),a<=0&&l(Co(s,1)),this.min=s,this.max=a}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},s=fP(n,this);return e.bounds==="ticks"&&nk(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":yd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Lr(e),this._valueRange=Lr(this.max)-Lr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Lr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function Ay(t){const e=t.ticks;if(e.display&&t.display){const n=ls(e.backdropPadding);return ot(e.font&&e.font.size,hn.font.size)+n.height}return 0}function mP(t,e,n){return n=dn(n)?n:[n],{w:_O(t,e.string,n),h:n.length*e.lineHeight}}function c2(t,e,n,s,a){return t===s||t===a?{start:e-n/2,end:e+n/2}:t<s||t>a?{start:e-n,end:e}:{start:e,end:e+n}}function gP(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),s=[],a=[],o=t._pointLabels.length,l=t.options.pointLabels,d=l.centerPointLabels?Ot/o:0;for(let h=0;h<o;h++){const p=l.setContext(t.getPointLabelContext(h));a[h]=p.padding;const g=t.getPointPosition(h,t.drawingArea+a[h],d),y=zn(p.font),_=mP(t.ctx,y,t._pointLabels[h]);s[h]=_;const j=is(t.getIndexAngle(h)+d),k=Math.round(Av(j)),N=c2(k,g.x,_.w,0,180),D=c2(k,g.y,_.h,90,270);xP(n,e,j,N,D)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=bP(t,s,a)}function xP(t,e,n,s,a){const o=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let d=0,h=0;s.start<e.l?(d=(e.l-s.start)/o,t.l=Math.min(t.l,e.l-d)):s.end>e.r&&(d=(s.end-e.r)/o,t.r=Math.max(t.r,e.r+d)),a.start<e.t?(h=(e.t-a.start)/l,t.t=Math.min(t.t,e.t-h)):a.end>e.b&&(h=(a.end-e.b)/l,t.b=Math.max(t.b,e.b+h))}function yP(t,e,n){const s=t.drawingArea,{extra:a,additionalAngle:o,padding:l,size:d}=n,h=t.getPointPosition(e,s+a+l,o),p=Math.round(Av(is(h.angle+Dn))),g=SP(h.y,d.h,p),y=_P(p),_=wP(h.x,d.w,y);return{visible:!0,x:h.x,y:g,textAlign:y,left:_,top:g,right:_+d.w,bottom:g+d.h}}function vP(t,e){if(!e)return!0;const{left:n,top:s,right:a,bottom:o}=t;return!(Ra({x:n,y:s},e)||Ra({x:n,y:o},e)||Ra({x:a,y:s},e)||Ra({x:a,y:o},e))}function bP(t,e,n){const s=[],a=t._pointLabels.length,o=t.options,{centerPointLabels:l,display:d}=o.pointLabels,h={extra:Ay(o)/2,additionalAngle:l?Ot/a:0};let p;for(let g=0;g<a;g++){h.padding=n[g],h.size=e[g];const y=yP(t,g,h);s.push(y),d==="auto"&&(y.visible=vP(y,p),y.visible&&(p=y))}return s}function _P(t){return t===0||t===180?"center":t<180?"left":"right"}function wP(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function SP(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function jP(t,e,n){const{left:s,top:a,right:o,bottom:l}=n,{backdropColor:d}=e;if(!bt(d)){const h=Io(e.borderRadius),p=ls(e.backdropPadding);t.fillStyle=d;const g=s-p.left,y=a-p.top,_=o-s+p.width,j=l-a+p.height;Object.values(h).some(k=>k!==0)?(t.beginPath(),id(t,{x:g,y,w:_,h:j,radius:h}),t.fill()):t.fillRect(g,y,_,j)}}function TP(t,e){const{ctx:n,options:{pointLabels:s}}=t;for(let a=e-1;a>=0;a--){const o=t._pointLabelItems[a];if(!o.visible)continue;const l=s.setContext(t.getPointLabelContext(a));jP(n,l,o);const d=zn(l.font),{x:h,y:p,textAlign:g}=o;Go(n,t._pointLabels[a],h,p+d.lineHeight/2,d,{color:l.color,textAlign:g,textBaseline:"middle"})}}function Qk(t,e,n,s){const{ctx:a}=t;if(n)a.arc(t.xCenter,t.yCenter,e,0,sn);else{let o=t.getPointPosition(0,e);a.moveTo(o.x,o.y);for(let l=1;l<s;l++)o=t.getPointPosition(l,e),a.lineTo(o.x,o.y)}}function kP(t,e,n,s,a){const o=t.ctx,l=e.circular,{color:d,lineWidth:h}=e;!l&&!s||!d||!h||n<0||(o.save(),o.strokeStyle=d,o.lineWidth=h,o.setLineDash(a.dash||[]),o.lineDashOffset=a.dashOffset,o.beginPath(),Qk(t,n,l,s),o.closePath(),o.stroke(),o.restore())}function NP(t,e,n){return Qr(t,{label:n,index:e,type:"pointLabel"})}class Jk extends Kf{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:wp.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ls(Ay(this.options)/2),n=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=_n(e)&&!isNaN(e)?e:0,this.max=_n(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ay(this.options))}generateTickLabels(e){Kf.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,s)=>{const a=Zt(this.options.pointLabels.callback,[n,s],this);return a||a===0?a:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?gP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,s,a){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((s-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,s,a))}getIndexAngle(e){const n=sn/(this._pointLabels.length||1),s=this.options.startAngle||0;return is(e*n+Ti(s))}getDistanceFromCenterForValue(e){if(bt(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(bt(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const s=n[e];return NP(this.getContext(),e,s)}}getPointPosition(e,n,s=0){const a=this.getIndexAngle(e)-Dn+s;return{x:Math.cos(a)*n+this.xCenter,y:Math.sin(a)*n+this.yCenter,angle:a}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:s,right:a,bottom:o}=this._pointLabelItems[e];return{left:n,top:s,right:a,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),Qk(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:s,grid:a,border:o}=n,l=this._pointLabels.length;let d,h,p;if(n.pointLabels.display&&TP(this,l),a.display&&this.ticks.forEach((g,y)=>{if(y!==0||y===0&&this.min<0){h=this.getDistanceFromCenterForValue(g.value);const _=this.getContext(y),j=a.setContext(_),k=o.setContext(_);kP(this,j,h,l,k)}}),s.display){for(e.save(),d=l-1;d>=0;d--){const g=s.setContext(this.getPointLabelContext(d)),{color:y,lineWidth:_}=g;!_||!y||(e.lineWidth=_,e.strokeStyle=y,e.setLineDash(g.borderDash),e.lineDashOffset=g.borderDashOffset,h=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),p=this.getPointPosition(d,h),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(p.x,p.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const a=this.getIndexAngle(0);let o,l;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((d,h)=>{if(h===0&&this.min>=0&&!n.reverse)return;const p=s.setContext(this.getContext(h)),g=zn(p.font);if(o=this.getDistanceFromCenterForValue(this.ticks[h].value),p.showLabelBackdrop){e.font=g.string,l=e.measureText(d.label).width,e.fillStyle=p.backdropColor;const y=ls(p.backdropPadding);e.fillRect(-l/2-y.left,-o-g.size/2-y.top,l+y.width,g.size+y.height)}Go(e,d.label,0,-o,g,{color:p.color,strokeColor:p.textStrokeColor,strokeWidth:p.textStrokeWidth})}),e.restore()}drawTitle(){}}const Cp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ds=Object.keys(Cp);function u2(t,e){return t-e}function d2(t,e){if(bt(e))return null;const n=t._adapter,{parser:s,round:a,isoWeekday:o}=t._parseOpts;let l=e;return typeof s=="function"&&(l=s(l)),_n(l)||(l=typeof s=="string"?n.parse(l,s):n.parse(l)),l===null?null:(a&&(l=a==="week"&&(Kl(o)||o===!0)?n.startOf(l,"isoWeek",o):n.startOf(l,a)),+l)}function h2(t,e,n,s){const a=Ds.length;for(let o=Ds.indexOf(t);o<a-1;++o){const l=Cp[Ds[o]],d=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(d*l.size))<=s)return Ds[o]}return Ds[a-1]}function MP(t,e,n,s,a){for(let o=Ds.length-1;o>=Ds.indexOf(n);o--){const l=Ds[o];if(Cp[l].common&&t._adapter.diff(a,s,l)>=e-1)return l}return Ds[n?Ds.indexOf(n):0]}function DP(t){for(let e=Ds.indexOf(t)+1,n=Ds.length;e<n;++e)if(Cp[Ds[e]].common)return Ds[e]}function f2(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:a}=Ov(n,e),o=n[s]>=e?n[s]:n[a];t[o]=!0}}function CP(t,e,n,s){const a=t._adapter,o=+a.startOf(e[0].value,s),l=e[e.length-1].value;let d,h;for(d=o;d<=l;d=+a.add(d,1,s))h=n[d],h>=0&&(e[h].major=!0);return e}function p2(t,e,n){const s=[],a={},o=e.length;let l,d;for(l=0;l<o;++l)d=e[l],a[d]=l,s.push({value:d,major:!1});return o===0||!n?s:CP(t,s,a,n)}class Zf extends Zo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new Ak._date(e.adapters.date);a.init(n),Hu(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:d2(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:o,minDefined:l,maxDefined:d}=this.getUserBounds();function h(p){!l&&!isNaN(p.min)&&(a=Math.min(a,p.min)),!d&&!isNaN(p.max)&&(o=Math.max(o,p.max))}(!l||!d)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),a=_n(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),o=_n(o)&&!isNaN(o)?o:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,l=this.max,d=lO(a,o,l);return this._unit=n.unit||(s.autoSkip?h2(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):MP(this,d.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:DP(this._unit),this.initOffsets(a),e.reverse&&d.reverse(),p2(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?s=o:s=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=In(n,0,l),s=In(s,0,l),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,o=a.time,l=o.unit||h2(o.minUnit,n,s,this._getLabelCapacity(n)),d=ot(a.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,p=Kl(h)||h===!0,g={};let y=n,_,j;if(p&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,p?"day":l),e.diff(s,n,l)>1e5*d)throw new Error(n+" and "+s+" are too far apart with stepSize of "+d+" "+l);const k=a.ticks.source==="data"&&this.getDataTimestamps();for(_=y,j=0;_<s;_=+e.add(_,d,l),j++)f2(g,_,k);return(_===s||a.bounds==="ticks"||j===1)&&f2(g,_,k),Object.keys(g).sort(u2).map(N=>+N)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,o=this._unit,l=n||a[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,s,a){const o=this.options,l=o.ticks.callback;if(l)return Zt(l,[e,n,s],this);const d=o.time.displayFormats,h=this._unit,p=this._majorUnit,g=h&&d[h],y=p&&d[p],_=s[n],j=p&&y&&_&&_.major;return this._adapter.format(e,a||(j?y:g))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=Ti(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(a),l=Math.sin(a),d=this._resolveTickFontOptions(0).size;return{w:s*o+d*l,h:s*l+d*o}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,o=this._tickFormatFunction(e,0,p2(this,[e],this._majorUnit),a),l=this._getLabelSize(o),d=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(d2(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ak(e.sort(u2))}}function hf(t,e,n){let s=0,a=t.length-1,o,l,d,h;n?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=Oa(t,"pos",e)),{pos:o,time:d}=t[s],{pos:l,time:h}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=Oa(t,"time",e)),{time:o,pos:d}=t[s],{time:l,pos:h}=t[a]);const p=l-o;return p?d+(h-d)*(e-o)/p:d}class EP extends Zf{static id="timeseries";static defaults=Zf.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=hf(n,this.min),this._tableRange=hf(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],o=[];let l,d,h,p,g;for(l=0,d=e.length;l<d;++l)p=e[l],p>=n&&p<=s&&a.push(p);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(l=0,d=a.length;l<d;++l)g=a[l+1],h=a[l-1],p=a[l],Math.round((g+h)/2)!==p&&o.push({time:p,pos:l/(d-1)});return o}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(hf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return hf(this._table,s*this._tableRange+this._minPos,!0)}}var AP=Object.freeze({__proto__:null,CategoryScale:vd,LinearScale:bd,LogarithmicScale:pP,RadialLinearScale:Jk,TimeScale:Zf,TimeSeriesScale:EP});const OP=[F3,gR,oP,AP];oi.register(...OP);const Vr={labels:Array.from({length:24},(t,e)=>`${String(e).padStart(2,"0")}:00`),load:Array.from({length:24},()=>+(Math.random()*2.2+.6).toFixed(2)),pv:Array.from({length:24},(t,e)=>+(Math.max(0,Math.sin((e-6)/4))*2.4).toFixed(2)),price:Array.from({length:24},()=>+(Math.random()*3.2+.8).toFixed(2))},eN="Europe/Stockholm";function $v(t){return new Date(t)}function Qf(t,e=eN){return new Intl.DateTimeFormat("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:e}).format(t)}function _d(t,e=new Date){return Qf($v(t))===Qf(e)}function Xo(t,e=new Date){const n=new Date(e);return n.setDate(n.getDate()+1),Qf($v(t))===Qf(n)}function Lx(t){const e=$v(t);return new Intl.DateTimeFormat("sv-SE",{hour:"2-digit",minute:"2-digit",timeZone:eN}).format(e)}function RP(t,e,n=new Date){return t.filter(a=>e==="today"?_d(a.start_time,n):Xo(a.start_time,n))}const PP={maintainAspectRatio:!1,spanGaps:!1,animation:!1,plugins:{legend:{display:!1,labels:{color:"#e6e9ef",boxWidth:10,font:{size:12},filter:()=>!1}},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:"rgba(30, 30, 46, 0.95)",titleColor:"#e6e9ef",bodyColor:"#a6b0bf",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:12,displayColors:!0,caretPadding:8,yAlign:"bottom",callbacks:{title:function(t){return t[0].label},label:function(t){const e=t.dataset.label||"",n=t.parsed.y;if(n==null)return null;let s=n.toFixed(2),a="";return e.includes("SEK/kWh")?(s=n.toFixed(2),a=" SEK/kWh"):e.includes("kW")?(s=n.toFixed(1),a=" kW"):e.includes("kWh")?(s=n.toFixed(2),a=" kWh"):e.includes("%")&&(s=n.toFixed(1),a="%"),`${e}: ${s}${a}`}}}},scales:{x:{grid:{color:"rgba(255,255,255,0.06)"},ticks:{color:"#a6b0bf",maxRotation:0,autoSkip:!1,callback:function(t,e,n){const s=this?.getLabelForValue?this.getLabelForValue(t):n[e]?.label;if(typeof s!="string")return"";const a=s.split(":");if(a.length<2)return"";const[o,l]=a;return l==="00"?o:""}}},y:{position:"right",min:0,max:8,title:{display:!1,text:"SEK/kWh",color:"#a6b0bf"},grid:{color:"rgba(255,255,255,0.06)"},ticks:{color:"#a6b0bf",display:!1}},y1:{position:"left",min:0,max:9,title:{display:!1,text:"kW",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf",display:!1}},y2:{position:"left",min:0,max:9,title:{display:!1,text:"kWh",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf",display:!1},display:!1},y3:{position:"right",min:0,max:100,title:{display:!0,text:"%",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf"},display:!1},y4:{position:"left",min:0,max:1.5,title:{display:!1,text:"kW (PV)",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf",display:!1}}}},Ll=(t,e={})=>{const n=(a,o)=>{const l=`palette = ${a}`;return e[l]||o},s={labels:t.labels,datasets:[{type:"line",label:"Import Price (SEK/kWh)",data:t.price,borderColor:n(4,"#2196F3"),backgroundColor:e["palette = 4"]?`${n(4,"#2196F3")}20`:"rgba(33,150,243,0.1)",yAxisID:"y",tension:0,stepped:"after",pointRadius:0},{type:"line",label:"PV Forecast (kW)",data:t.pv,borderColor:n(2,"#4CAF50"),backgroundColor:e["palette = 2"]?`${n(2,"#4CAF50")}30`:"rgba(76,175,80,0.15)",fill:!0,yAxisID:"y4",tension:.35,pointRadius:0},{type:"bar",label:"Load (kW)",data:t.load,backgroundColor:`${n(3,"#FF9800")}80`,borderRadius:0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Charge (kW)",data:t.charge??t.labels.map(()=>null),backgroundColor:`${n(4,"#2196F3")}80`,hidden:!0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Discharge (kW)",data:t.discharge??t.labels.map(()=>null),backgroundColor:`${n(1,"#F44336")}80`,hidden:!0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Export (kWh)",data:t.export??t.labels.map(()=>null),backgroundColor:`${n(2,"#4CAF50")}80`,hidden:!0,yAxisID:"y2",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"bar",label:"Water Heating (kW)",data:t.water??t.labels.map(()=>null),backgroundColor:`${n(5,"#FF5722")}80`,hidden:!0,yAxisID:"y1",barPercentage:1,categoryPercentage:1,grouped:!1},{type:"line",label:"SoC Target (%)",data:t.socTarget??t.labels.map(()=>null),borderColor:n(13,"#9C27B0"),yAxisID:"y3",pointRadius:0,tension:0,stepped:"after",hidden:!0},{type:"line",label:"SoC Projected (%)",data:t.socProjected??t.labels.map(()=>null),borderColor:n(14,"#FFEB3B"),yAxisID:"y3",pointRadius:0,hidden:!0},{type:"line",label:"SoC Actual (%)",data:t.socActual??t.labels.map(()=>null),borderColor:n(15,"#80CBC4"),yAxisID:"y3",pointRadius:0,hidden:!0}]};return t.hasNoData&&(s.plugins={...s.plugins,tooltip:{enabled:!0,external:!0,callbacks:{title:()=>t.day==="tomorrow"?"No Price Data":"No Data",label:()=>t.day==="tomorrow"?"Schedule data not available yet. Check back later for prices.":"No schedule data available."}}}),{...s,nowIndex:t.nowIndex??null}};Ll({labels:Vr.labels,price:Vr.price,pv:Vr.pv,load:Vr.load},{});function wd({day:t="today",range:e="day",refreshToken:n=0,showDayToggle:s=!0,useHistoryForToday:a=!1,slotsOverride:o}){const[l,d]=A.useState(t),[h,p]=A.useState(e),g=A.useRef(null),y=A.useRef(null),[_,j]=A.useState({}),[k,N]=A.useState(""),[D,R]=A.useState({price:!0,pv:!0,load:!0,charge:!1,discharge:!1,export:!1,water:!1,socTarget:!1,socProjected:!1,socActual:!0}),[E,B]=A.useState(!1);A.useEffect(()=>{Me.config().then(J=>{const oe=J?.dashboard?.overlay_defaults;if(oe&&typeof oe=="string"){const ie=oe.split(",").map(Z=>Z.trim().toLowerCase()),me=ie.includes("socactual")||ie.includes("soc_actual"),le={price:!ie.includes("price_off"),pv:!ie.includes("pv_off"),load:!ie.includes("load_off"),charge:ie.includes("charge"),discharge:ie.includes("discharge"),export:ie.includes("export"),water:ie.includes("water"),socTarget:ie.includes("soctarget")||ie.includes("soc_target"),socProjected:ie.includes("socprojected")||ie.includes("soc_projected"),socActual:me?!0:D.socActual};R(le)}}).catch(J=>console.error("Failed to load overlay defaults:",J))},[]);const[U,$]=A.useState(null);A.useEffect(()=>{Me.theme().then(J=>{const oe=J.themes.find(ie=>ie.name===J.current);if(oe){const ie={};oe.palette.forEach((me,le)=>{ie[`palette = ${le}`]=me}),ie.background=oe.background,ie.foreground=oe.foreground,j(ie),N(J.current)}}).catch(J=>console.error("Failed to load theme colors:",J))},[]),A.useEffect(()=>{if(!g.current||Object.keys(_).length===0)return;const J={type:"bar",data:Ll({labels:Vr.labels,price:Vr.price,pv:Vr.pv,load:Vr.load},_),options:PP};return y.current=new oi(g.current,J),()=>{y.current&&(y.current.destroy(),y.current=null)}},[_]);const I=J=>{if(!J)return!1;const oe=J;return!(oe._destroyed||oe._plugins===void 0&&oe.$plugins===void 0)};A.useEffect(()=>{p(e)},[e]),A.useEffect(()=>{const J=y.current;if(!I(J)||Object.keys(_).length===0)return;const oe=me=>{if(!I(y.current))return;const le=LP(me,l,h,_);if(!le)return;q(le.hasNoData??!1);const Z=le.datasets;Z[0]&&(Z[0].hidden=!D.price),Z[1]&&(Z[1].hidden=!D.pv),Z[2]&&(Z[2].hidden=!D.load),Z[3]&&(Z[3].hidden=!D.charge),Z[4]&&(Z[4].hidden=!D.discharge),Z[5]&&(Z[5].hidden=!D.export),Z[6]&&(Z[6].hidden=!D.water),Z[7]&&(Z[7].hidden=!D.socTarget),Z[8]&&(Z[8].hidden=!D.socProjected),Z[9]&&(Z[9].hidden=!D.socActual);const re=le;if(l==="today"&&typeof re.nowIndex=="number"&&re.nowIndex>=0&&le.labels.length>1){const H=re.nowIndex,X=le.labels.length-1;$(H/X)}else $(null);try{if(!I(y.current))return;y.current&&(y.current.data=le,y.current.update())}catch(H){console.error("Chart update failed, skipping frame:",H)}};if(o&&o.length){oe(o);return}(a&&h==="day"&&l==="today"?Me.scheduleTodayWithHistory().then(me=>({schedule:me.slots})):Me.schedule()).then(me=>{oe(me.schedule??[])}).catch(me=>{console.error("Failed to load schedule:",me),q(!0),$(null)})},[l,D,_,h,n,o,a]);const[O,q]=A.useState(!1);return u.jsxs(Xe,{className:"p-4 md:p-6 h-[380px]",children:[u.jsxs("div",{className:"flex items-baseline justify-between pb-2",children:[u.jsx("div",{className:"text-sm text-muted",children:"Schedule Overview"}),s&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{className:`rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition ${h==="day"?"bg-accent text-canvas":"bg-surface border border-line/60 text-muted"}`,onClick:()=>p("day"),children:"24h"}),u.jsx("button",{className:`rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition ${h==="48h"?"bg-accent text-canvas":"bg-surface border border-line/60 text-muted"}`,onClick:()=>p("48h"),children:"48h"})]}),u.jsx("button",{className:"rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide border border-line/60 text-muted hover:border-accent hover:text-accent transition",onClick:()=>B(J=>!J),children:"Overlays"})]})]}),E&&u.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px]",children:[["Price","price"],["PV","pv"],["Load","load"],["Charge","charge"],["Discharge","discharge"],["Export","export"],["Water","water"],["SoC Target","socTarget"],["SoC Projected","socProjected"],["SoC Actual","socActual"]].map(([J,oe])=>u.jsx("button",{onClick:ie=>{ie.preventDefault(),R(me=>({...me,[oe]:!me[oe]}))},className:`rounded-pill px-3 py-1 border ${D[oe]?"bg-accent text-canvas border-accent":"border-line/60 text-muted hover:border-accent"}`,children:J},oe))}),u.jsxs("div",{className:"h-[310px] relative mt-1",children:[O&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-surface/90 rounded-lg",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-lg font-semibold text-accent mb-2",children:"No Price Data"}),u.jsx("div",{className:"text-sm text-muted",children:"Schedule data not available yet. Check back later for prices."})]})}),!O&&l==="today"&&U!==null&&u.jsx("div",{className:"pointer-events-none absolute inset-0 z-10",children:u.jsx("div",{className:"absolute top-2 bottom-6 border-l-2 border-accent/80",style:{left:`${U*100}%`}})}),u.jsx("canvas",{ref:g,style:{display:O?"none":"block"}})]})]})}function LP(t,e,n,s={}){const a=n==="day"?RP(t,e):t.filter(E=>_d(E.start_time)||Xo(E.start_time));if(n==="day"){if(!a.length){const V=Array.from({length:24},(pe,F)=>`${String(F).padStart(2,"0")}:00`),ee=Array(24).fill(null);return Ll({labels:V,price:ee.slice(),pv:ee.slice(),load:ee.slice(),charge:ee.slice(),discharge:ee.slice(),export:ee.slice(),water:ee.slice(),socTarget:ee.slice(),socProjected:ee.slice(),socActual:ee.slice(),hasNoData:!0,day:e},s)}const E=[...a].sort((V,ee)=>{const pe=new Date(V.start_time).getTime(),F=new Date(ee.start_time).getTime();return pe-F});let B=15;if(E.length>=2){const V=new Date(E[0].start_time).getTime(),ee=new Date(E[1].start_time).getTime(),pe=Math.max(1,Math.round((ee-V)/6e4));(pe===15||pe===30||pe===60)&&(B=pe)}const U=new Date;e==="today"||U.setDate(U.getDate()+1),U.setHours(0,0,0,0);const $=B*60*1e3,I=Math.round(1440/B),O=new Map;for(const V of E){const ee=new Date(V.start_time).getTime();O.set(ee,V)}const q=[],J=[],oe=[],ie=[],me=[],le=[],Z=[],re=[],H=[],X=[],ne=[];let ae=null;const xe=new Date;for(let V=0;V<I;V++){const ee=new Date(U.getTime()+V*$),pe=new Date(ee.getTime()+$),F=O.get(ee.getTime());if(q.push(Lx(ee.toISOString())),F){const de=F.is_executed===!0,Se=F;J.push(F.import_price_sek_kwh??null),oe.push(de&&Se.actual_pv_kwh!=null?Se.actual_pv_kwh:F.pv_forecast_kwh??null),ie.push(de&&Se.actual_load_kwh!=null?Se.actual_load_kwh:F.load_forecast_kwh??null),me.push(de&&Se.actual_charge_kw!=null?Se.actual_charge_kw:F.battery_charge_kw??F.charge_kw??null),le.push(F.battery_discharge_kw??F.discharge_kw??null),Z.push(de&&Se.actual_export_kw!=null?Se.actual_export_kw:F.export_kwh??null),re.push(F.water_heating_kw??null),H.push(F.soc_target_percent??null),X.push(F.projected_soc_percent??null),ne.push(Se.soc_actual_percent!=null?Se.soc_actual_percent:null)}else J.push(null),oe.push(null),ie.push(null),me.push(null),le.push(null),Z.push(null),re.push(null),H.push(null),X.push(null),ne.push(null);e==="today"&&xe>=ee&&xe<pe&&(ae=V)}return Ll({labels:q,price:J,pv:oe,load:ie,charge:me,discharge:le,export:Z,water:re,socTarget:H,socProjected:X,socActual:ne,nowIndex:ae},s)}if(n==="48h"){if(!a.length){console.log("[buildLiveData] No slots found for 48h range, creating fallback");const V=Array.from({length:48},(ee,pe)=>{const F=pe%24;return`${String(F).padStart(2,"0")}:00`});return{labels:V,price:Array(V.length).fill(null),pv:Array(V.length).fill(null),load:Array(V.length).fill(null),charge:Array(V.length).fill(null),discharge:Array(V.length).fill(null),export:Array(V.length).fill(null),water:Array(V.length).fill(null),socTarget:Array(V.length).fill(null),socProjected:Array(V.length).fill(null),hasNoData:!0,day:e}}const E=[...a].sort((V,ee)=>{const pe=new Date(V.start_time).getTime(),F=new Date(ee.start_time).getTime();return pe-F});let B=15;if(E.length>=2){const V=new Date(E[0].start_time).getTime(),ee=new Date(E[1].start_time).getTime(),pe=Math.max(1,Math.round((ee-V)/6e4));(pe===15||pe===30||pe===60)&&(B=pe)}const U=new Date;U.setHours(0,0,0,0);const $=B*60*1e3,I=Math.round(2880/B),O=new Map;for(const V of E){const ee=new Date(V.start_time).getTime();O.set(ee,V)}const q=[],J=[],oe=[],ie=[],me=[],le=[],Z=[],re=[],H=[],X=[],ne=[];let ae=null;const xe=new Date;for(let V=0;V<I;V++){const ee=new Date(U.getTime()+V*$),pe=new Date(ee.getTime()+$),F=O.get(ee.getTime());if(q.push(Lx(ee.toISOString())),F){const de=F.is_executed===!0,Se=F;J.push(F.import_price_sek_kwh??null),oe.push(de&&Se.actual_pv_kwh!=null?Se.actual_pv_kwh:F.pv_forecast_kwh??null),ie.push(de&&Se.actual_load_kwh!=null?Se.actual_load_kwh:F.load_forecast_kwh??null),me.push(de&&Se.actual_charge_kw!=null?Se.actual_charge_kw:F.battery_charge_kw??F.charge_kw??null),le.push(F.battery_discharge_kw??F.discharge_kw??null),Z.push(de&&Se.actual_export_kw!=null?Se.actual_export_kw:F.export_kwh??null),re.push(F.water_heating_kw??null),H.push(F.soc_target_percent??null),X.push(F.projected_soc_percent??null),ne.push(Se.soc_actual_percent!=null?Se.soc_actual_percent:null)}else J.push(null),oe.push(null),ie.push(null),me.push(null),le.push(null),Z.push(null),re.push(null),H.push(null),X.push(null),ne.push(null);xe>=ee&&xe<pe&&(ae=V)}return Ll({labels:q,price:J,pv:oe,load:ie,charge:me,discharge:le,export:Z,water:re,socTarget:H,socProjected:X,socActual:ne,nowIndex:ae},s)}const o=[...a].sort((E,B)=>{const U=new Date(E.start_time).getTime(),$=new Date(B.start_time).getTime();return U-$}),l=o.map(E=>E.import_price_sek_kwh??null),d=o.map(E=>E.pv_forecast_kwh??null),h=o.map(E=>E.load_forecast_kwh??null),p=o.map(E=>E.battery_charge_kw??E.charge_kw??null),g=o.map(E=>E.battery_discharge_kw??E.discharge_kw??null),y=o.map(E=>E.export_kwh??null),_=o.map(E=>E.water_heating_kw??null),j=o.map(E=>E.soc_target_percent??null),k=o.map(E=>E.projected_soc_percent??null),N=o.map(E=>E.soc_actual_percent??null),D=o.map(E=>Lx(E.start_time));let R=null;if(e==="today"){const E=new Date;for(let B=0;B<o.length;B++){const U=new Date(o[B].start_time||""),$=new Date(U.getTime()+1800*1e3);if(E>=U&&E<$){R=B;break}}}return Ll({labels:D,price:l,pv:d,load:h,charge:p,discharge:g,export:y,water:_,socTarget:j,socProjected:k,socActual:N,nowIndex:R},s)}const ff=[3,7,14,21,28],Tu=[30,60,120];function zP({onDataRefresh:t,onPlanSourceChange:e,onVacationModeChange:n}){const[s,a]=A.useState("idle"),[o,l]=A.useState(!1),[d,h]=A.useState(null),[p,g]=A.useState(1),[y,_]=A.useState(!1),[j,k]=A.useState(null),[N,D]=A.useState(1),[R,E]=A.useState(!1),[B,U]=A.useState(null),[$,I]=A.useState(0),[O,q]=A.useState(null),[J,oe]=A.useState(null),ie=A.useRef(null),me=A.useCallback(async()=>{try{const[ae,xe,V]=await Promise.all([Me.executor.status(),Me.waterBoost.status(),Me.config()]);if(ae.paused?(l(!0),h(ae.paused.paused_minutes||null)):(l(!1),h(null)),xe.water_boost){const pe=new Date(xe.water_boost.expires_at);E(!0),U(pe);const F=new Date,de=Math.max(0,Math.floor((pe.getTime()-F.getTime())/1e3));I(de)}else E(!1),U(null),I(0);const ee=V.water_heating?.vacation_mode;ee?.enabled?(_(!0),k(ee.end_date||null)):(_(!1),k(null))}catch(ae){console.error("Failed to fetch quick action status:",ae)}},[]);A.useEffect(()=>{me();const ae=setInterval(me,6e4);return()=>clearInterval(ae)},[me]),A.useEffect(()=>{if(ie.current&&(clearInterval(ie.current),ie.current=null),!(!R||!B))return ie.current=setInterval(()=>{const ae=new Date,xe=Math.floor((B.getTime()-ae.getTime())/1e3);xe<=0?(E(!1),U(null),I(0),ie.current&&(clearInterval(ie.current),ie.current=null)):I(xe)},1e3),()=>{ie.current&&(clearInterval(ie.current),ie.current=null)}},[R,B]);const le=async()=>{a("planning"),q(null);try{await Me.runPlanner(),a("executing"),await Me.executor.run(),a("done"),e&&e("local"),t&&setTimeout(t,500),setTimeout(()=>a("idle"),2e3)}catch(ae){q({type:"error",message:ae instanceof Error?ae.message:"Failed"}),a("idle")}},Z=async()=>{q(null),oe("pause");try{o?(await Me.executor.resume(),l(!1),h(null),q({type:"success",message:"Executor resumed"})):(await Me.executor.pause(),l(!0),q({type:"success",message:"Executor paused - idle mode"})),setTimeout(()=>q(null),3e3)}catch(ae){q({type:"error",message:ae instanceof Error?ae.message:"Failed"})}finally{oe(null)}},re=async()=>{q(null),oe("vacation");try{if(y)await Me.configSave({water_heating:{vacation_mode:{enabled:!1,end_date:null}}}),_(!1),k(null),q({type:"success",message:"Vacation mode disabled"});else{const ae=ff[p],xe=new Date;xe.setDate(xe.getDate()+ae);const V=xe.toISOString().split("T")[0];await Me.configSave({water_heating:{vacation_mode:{enabled:!0,end_date:V}}}),_(!0),k(V),q({type:"success",message:`Vacation mode active until ${V}`})}window.dispatchEvent(new Event("config-updated")),n?.(!y),setTimeout(()=>q(null),3e3)}catch(ae){q({type:"error",message:ae instanceof Error?ae.message:"Failed"})}finally{oe(null)}},H=async()=>{q(null),oe("boost");try{if(R)(await Me.waterBoost.cancel()).success&&(E(!1),U(null),I(0),q({type:"success",message:"Water boost cancelled"}));else{const ae=Tu[N],xe=await Me.waterBoost.start(ae);if(xe.success&&xe.expires_at){const V=new Date(xe.expires_at);E(!0),U(V),I(ae*60),q({type:"success",message:`Water boost started (${ae}min)`})}}setTimeout(()=>q(null),3e3)}catch(ae){q({type:"error",message:ae instanceof Error?ae.message:"Failed"})}finally{oe(null)}},X=()=>{switch(s){case"planning":return"Planning...";case"executing":return"Executing...";case"done":return"Done ";default:return"Run Planner"}},ne=ae=>{const xe=Math.floor(ae/60),V=ae%60;return`${xe}:${V.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{className:`flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary
                        ${s!=="idle"?"bg-accent text-[#100f0e] cursor-wait":"bg-accent hover:bg-accent2 text-[#100f0e]"}`,onClick:le,disabled:s!=="idle",title:"Run planner and execute",children:[u.jsx(y5,{className:`h-4 w-4 ${s!=="idle"?"animate-pulse":""}`}),u.jsx("span",{children:X()})]}),u.jsx("button",{className:`flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition
                        ${o?"bg-bad/80 text-white ring-2 ring-bad shadow-[0_0_20px_rgba(241,81,50,0.5)] animate-pulse":"bg-good hover:bg-good/80 text-white btn-glow-green"} ${J==="pause"?"opacity-60 cursor-wait":""}`,onClick:Z,disabled:J==="pause",title:o?"Resume executor":"Pause executor (idle mode)",children:o?u.jsxs(u.Fragment,{children:[u.jsx(kv,{className:"h-4 w-4"}),u.jsx("span",{children:"RESUME"}),d!==null&&u.jsxs("span",{className:"text-[9px] opacity-80",children:["(",Math.round(d),"m)"]})]}):u.jsxs(u.Fragment,{children:[u.jsx(m5,{className:"h-4 w-4"}),u.jsx("span",{children:"Pause"})]})}),u.jsxs("div",{className:`flex items-center rounded-xl px-2 py-1.5 text-[11px] font-semibold transition
                    ${y?"bg-amber-500/30 border border-amber-500/50 ring-2 ring-amber-400/50 shadow-[0_0_15px_rgba(245,158,11,0.4)]":"bg-surface2 border border-line/50"} ${J==="vacation"?"opacity-60":""}`,children:[!y&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>g(ae=>Math.max(0,ae-1)),className:"px-0.5 hover:text-accent",disabled:p===0||J==="vacation",children:u.jsx(zw,{className:"h-3 w-3"})}),u.jsxs("span",{className:"mx-0.5 min-w-[24px] text-center text-muted",children:[ff[p],"d"]}),u.jsx("button",{onClick:()=>g(ae=>Math.min(ff.length-1,ae+1)),className:"px-0.5 hover:text-accent",disabled:p===ff.length-1||J==="vacation",children:u.jsx(Bw,{className:"h-3 w-3"})})]}),u.jsxs("button",{onClick:re,disabled:J==="vacation",className:`flex-1 flex items-center justify-center gap-1 py-1 px-2 rounded-lg transition
                            ${y?"bg-amber-500/50 text-amber-100":"bg-amber-500/20 hover:bg-amber-500/30 text-amber-300/80 hover:text-amber-300"}`,children:[u.jsx(_5,{className:"h-3.5 w-3.5"}),y?u.jsx("span",{className:"truncate",children:j?` ${j.slice(5)}`:"ON"}):u.jsx("span",{children:"Vacation"})]})]}),u.jsxs("div",{className:`flex items-center rounded-xl px-2 py-1.5 text-[11px] font-semibold transition
                    ${R?"bg-red-500/30 border border-red-500/50 ring-2 ring-red-400/50 shadow-[0_0_15px_rgba(239,68,68,0.4)]":"bg-surface2 border border-line/50"} ${J==="boost"?"opacity-60":""}`,children:[!R&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>D(ae=>Math.max(0,ae-1)),className:"px-0.5 hover:text-accent",disabled:N===0||J==="boost",children:u.jsx(zw,{className:"h-3 w-3"})}),u.jsx("span",{className:"mx-0.5 min-w-[24px] text-center text-muted",children:Tu[N]===120?"2h":Tu[N]===60?"1h":"30m"}),u.jsx("button",{onClick:()=>D(ae=>Math.min(Tu.length-1,ae+1)),className:"px-0.5 hover:text-accent",disabled:N===Tu.length-1||J==="boost",children:u.jsx(Bw,{className:"h-3 w-3"})})]}),u.jsxs("button",{onClick:H,disabled:J==="boost",className:`flex-1 flex items-center justify-center gap-1 py-1 px-2 rounded-lg transition
                            ${R?"bg-red-500/50 text-red-100":"bg-red-500/20 hover:bg-red-500/30 text-red-300/80 hover:text-red-300"}`,children:[u.jsx(Tv,{className:`h-3.5 w-3.5 ${R?"animate-pulse":""}`}),R?u.jsx("span",{className:"font-mono",children:ne($)}):u.jsx("span",{children:"Boost"})]})]})]}),O&&u.jsx("div",{className:`absolute -bottom-8 left-0 right-0 text-center text-[10px] py-1 px-2 rounded-md transition-opacity animate-in fade-in slide-in-from-bottom-1 duration-300 ${O.type==="success"?"text-green-400":"text-red-400"}`,children:O.message})]})}const tN=A.createContext({});function BP(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const qv=A.createContext(null),nN=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function VP(t=!0){const e=A.useContext(qv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,o=A.useId();A.useEffect(()=>{t&&a(o)},[t]);const l=A.useCallback(()=>t&&s&&s(o),[o,s,t]);return!n&&s?[!1,l]:[!0]}const Gv=typeof window<"u",FP=Gv?A.useLayoutEffect:A.useEffect,Fs=t=>t;let sN=Fs;function Xv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Jl=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},za=t=>t*1e3,Ba=t=>t/1e3,HP={useManualTiming:!1};function UP(t){let e=new Set,n=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(p){o.has(p)&&(h.schedule(p),t()),p(l)}const h={schedule:(p,g=!1,y=!1)=>{const j=y&&s?e:n;return g&&o.add(p),j.has(p)||j.add(p),p},cancel:p=>{n.delete(p),o.delete(p)},process:p=>{if(l=p,s){a=!0;return}s=!0,[e,n]=[n,e],e.forEach(d),e.clear(),s=!1,a&&(a=!1,h.process(p))}};return h}const pf=["read","resolveKeyframes","update","preRender","render","postRender"],IP=40;function iN(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=pf.reduce((R,E)=>(R[E]=UP(o),R),{}),{read:d,resolveKeyframes:h,update:p,preRender:g,render:y,postRender:_}=l,j=()=>{const R=performance.now();n=!1,a.delta=s?1e3/60:Math.max(Math.min(R-a.timestamp,IP),1),a.timestamp=R,a.isProcessing=!0,d.process(a),h.process(a),p.process(a),g.process(a),y.process(a),_.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(j))},k=()=>{n=!0,s=!0,a.isProcessing||t(j)};return{schedule:pf.reduce((R,E)=>{const B=l[E];return R[E]=(U,$=!1,I=!1)=>(n||k(),B.schedule(U,$,I)),R},{}),cancel:R=>{for(let E=0;E<pf.length;E++)l[pf[E]].cancel(R)},state:a,steps:l}}const{schedule:an,cancel:Xr,state:Jn,steps:zx}=iN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fs,!0),aN=A.createContext({strict:!1}),m2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ec={};for(const t in m2)ec[t]={isEnabled:e=>m2[t].some(n=>!!e[n])};function YP(t){for(const e in t)ec[e]={...ec[e],...t[e]}}const WP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||WP.has(t)}let rN=t=>!Jf(t);function $P(t){t&&(rN=e=>e.startsWith("on")?!Jf(e):t(e))}try{$P(require("@emotion/is-prop-valid").default)}catch{}function qP(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(rN(a)||n===!0&&Jf(a)||!e&&!Jf(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function GP(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const Ep=A.createContext({});function od(t){return typeof t=="string"||Array.isArray(t)}function Ap(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Kv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zv=["initial",...Kv];function Op(t){return Ap(t.animate)||Zv.some(e=>od(t[e]))}function oN(t){return!!(Op(t)||t.variants)}function XP(t,e){if(Op(t)){const{initial:n,animate:s}=t;return{initial:n===!1||od(n)?n:void 0,animate:od(s)?s:void 0}}return t.inherit!==!1?e:{}}function KP(t){const{initial:e,animate:n}=XP(t,A.useContext(Ep));return A.useMemo(()=>({initial:e,animate:n}),[g2(e),g2(n)])}function g2(t){return Array.isArray(t)?t.join(" "):t}const ZP=Symbol.for("motionComponentSymbol");function zl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QP(t,e,n){return A.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):zl(n)&&(n.current=s))},[e])}const Qv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JP="framerAppearId",lN="data-"+Qv(JP),{schedule:Jv}=iN(queueMicrotask,!1),cN=A.createContext({});function eL(t,e,n,s,a){var o,l;const{visualElement:d}=A.useContext(Ep),h=A.useContext(aN),p=A.useContext(qv),g=A.useContext(nN).reducedMotion,y=A.useRef(null);s=s||h.renderer,!y.current&&s&&(y.current=s(t,{visualState:e,parent:d,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const _=y.current,j=A.useContext(cN);_&&!_.projection&&a&&(_.type==="html"||_.type==="svg")&&tL(y.current,n,a,j);const k=A.useRef(!1);A.useInsertionEffect(()=>{_&&k.current&&_.update(n,p)});const N=n[lN],D=A.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return FP(()=>{_&&(k.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),Jv.render(_.render),D.current&&_.animationState&&_.animationState.animateChanges())}),A.useEffect(()=>{_&&(!D.current&&_.animationState&&_.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)===null||R===void 0||R.call(window,N)}),D.current=!1))}),_}function tL(t,e,n,s){const{layoutId:a,layout:o,drag:l,dragConstraints:d,layoutScroll:h,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:uN(t.parent)),t.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||d&&zl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:h,layoutRoot:p})}function uN(t){if(t)return t.options.allowProjection!==!1?t.projection:uN(t.parent)}function nL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:a}){var o,l;t&&YP(t);function d(p,g){let y;const _={...A.useContext(nN),...p,layoutId:sL(p)},{isStatic:j}=_,k=KP(p),N=s(p,j);if(!j&&Gv){iL();const D=aL(_);y=D.MeasureLayout,k.visualElement=eL(a,N,_,e,D.ProjectionNode)}return u.jsxs(Ep.Provider,{value:k,children:[y&&k.visualElement?u.jsx(y,{visualElement:k.visualElement,..._}):null,n(a,p,QP(N,k.visualElement,g),N,j,k.visualElement)]})}d.displayName=`motion.${typeof a=="string"?a:`create(${(l=(o=a.displayName)!==null&&o!==void 0?o:a.name)!==null&&l!==void 0?l:""})`}`;const h=A.forwardRef(d);return h[ZP]=a,h}function sL({layoutId:t}){const e=A.useContext(tN).id;return e&&t!==void 0?e+"-"+t:t}function iL(t,e){A.useContext(aN).strict}function aL(t){const{drag:e,layout:n}=ec;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const rL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function e0(t){return typeof t!="string"||t.includes("-")?!1:!!(rL.indexOf(t)>-1||/[A-Z]/u.test(t))}function x2(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function t0(t,e,n,s){if(typeof e=="function"){const[a,o]=x2(s);e=e(n!==void 0?n:t.custom,a,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,o]=x2(s);e=e(n!==void 0?n:t.custom,a,o)}return e}const Oy=t=>Array.isArray(t),oL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lL=t=>Oy(t)?t[t.length-1]||0:t,rs=t=>!!(t&&t.getVelocity);function kf(t){const e=rs(t)?t.get():t;return oL(e)?e.toValue():e}function cL({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,a,o){const l={latestValues:uL(s,a,o,t),renderState:e()};return n&&(l.onMount=d=>n({props:s,current:d,...l}),l.onUpdate=d=>n(d)),l}const dN=t=>(e,n)=>{const s=A.useContext(Ep),a=A.useContext(qv),o=()=>cL(t,e,s,a);return n?o():BP(o)};function uL(t,e,n,s){const a={},o=s(t,{});for(const _ in o)a[_]=kf(o[_]);let{initial:l,animate:d}=t;const h=Op(t),p=oN(t);e&&p&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const y=g?d:l;if(y&&typeof y!="boolean"&&!Ap(y)){const _=Array.isArray(y)?y:[y];for(let j=0;j<_.length;j++){const k=t0(t,_[j]);if(k){const{transitionEnd:N,transition:D,...R}=k;for(const E in R){let B=R[E];if(Array.isArray(B)){const U=g?B.length-1:0;B=B[U]}B!==null&&(a[E]=B)}for(const E in N)a[E]=N[E]}}}return a}const oc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qo=new Set(oc),hN=t=>e=>typeof e=="string"&&e.startsWith(t),fN=hN("--"),dL=hN("var(--"),n0=t=>dL(t)?hL.test(t.split("/*")[0].trim()):!1,hL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pN=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ha=(t,e,n)=>n>e?e:n<t?t:n,lc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ld={...lc,transform:t=>Ha(0,1,t)},mf={...lc,default:1},Sd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ar=Sd("deg"),Gi=Sd("%"),Je=Sd("px"),fL=Sd("vh"),pL=Sd("vw"),y2={...Gi,parse:t=>Gi.parse(t)/100,transform:t=>Gi.transform(t*100)},mL={borderWidth:Je,borderTopWidth:Je,borderRightWidth:Je,borderBottomWidth:Je,borderLeftWidth:Je,borderRadius:Je,radius:Je,borderTopLeftRadius:Je,borderTopRightRadius:Je,borderBottomRightRadius:Je,borderBottomLeftRadius:Je,width:Je,maxWidth:Je,height:Je,maxHeight:Je,top:Je,right:Je,bottom:Je,left:Je,padding:Je,paddingTop:Je,paddingRight:Je,paddingBottom:Je,paddingLeft:Je,margin:Je,marginTop:Je,marginRight:Je,marginBottom:Je,marginLeft:Je,backgroundPositionX:Je,backgroundPositionY:Je},gL={rotate:Ar,rotateX:Ar,rotateY:Ar,rotateZ:Ar,scale:mf,scaleX:mf,scaleY:mf,scaleZ:mf,skew:Ar,skewX:Ar,skewY:Ar,distance:Je,translateX:Je,translateY:Je,translateZ:Je,x:Je,y:Je,z:Je,perspective:Je,transformPerspective:Je,opacity:ld,originX:y2,originY:y2,originZ:Je},v2={...lc,transform:Math.round},s0={...mL,...gL,zIndex:v2,size:Je,fillOpacity:ld,strokeOpacity:ld,numOctaves:v2},xL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yL=oc.length;function vL(t,e,n){let s="",a=!0;for(let o=0;o<yL;o++){const l=oc[o],d=t[l];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(l.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const p=pN(d,s0[l]);if(!h){a=!1;const g=xL[l]||l;s+=`${g}(${p}) `}n&&(e[l]=p)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function i0(t,e,n){const{style:s,vars:a,transformOrigin:o}=t;let l=!1,d=!1;for(const h in e){const p=e[h];if(Qo.has(h)){l=!0;continue}else if(fN(h)){a[h]=p;continue}else{const g=pN(p,s0[h]);h.startsWith("origin")?(d=!0,o[h]=g):s[h]=g}}if(e.transform||(l||n?s.transform=vL(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:h="50%",originY:p="50%",originZ:g=0}=o;s.transformOrigin=`${h} ${p} ${g}`}}const bL={offset:"stroke-dashoffset",array:"stroke-dasharray"},_L={offset:"strokeDashoffset",array:"strokeDasharray"};function wL(t,e,n=1,s=0,a=!0){t.pathLength=1;const o=a?bL:_L;t[o.offset]=Je.transform(-s);const l=Je.transform(e),d=Je.transform(n);t[o.array]=`${l} ${d}`}function b2(t,e,n){return typeof t=="string"?t:Je.transform(e+n*t)}function SL(t,e,n){const s=b2(e,t.x,t.width),a=b2(n,t.y,t.height);return`${s} ${a}`}function a0(t,{attrX:e,attrY:n,attrScale:s,originX:a,originY:o,pathLength:l,pathSpacing:d=1,pathOffset:h=0,...p},g,y){if(i0(t,p,y),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:j,dimensions:k}=t;_.transform&&(k&&(j.transform=_.transform),delete _.transform),k&&(a!==void 0||o!==void 0||j.transform)&&(j.transformOrigin=SL(k,a!==void 0?a:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),s!==void 0&&(_.scale=s),l!==void 0&&wL(_,l,d,h,!1)}const r0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),mN=()=>({...r0(),attrs:{}}),o0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function gN(t,{style:e,vars:n},s,a){Object.assign(t.style,e,a&&a.getProjectionStyles(s));for(const o in n)t.style.setProperty(o,n[o])}const xN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yN(t,e,n,s){gN(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(xN.has(a)?a:Qv(a),e.attrs[a])}const ep={};function jL(t){Object.assign(ep,t)}function vN(t,{layout:e,layoutId:n}){return Qo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ep[t]||t==="opacity")}function l0(t,e,n){var s;const{style:a}=t,o={};for(const l in a)(rs(a[l])||e.style&&rs(e.style[l])||vN(l,t)||((s=n?.getValue(l))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[l]=a[l]);return o}function bN(t,e,n){const s=l0(t,e,n);for(const a in t)if(rs(t[a])||rs(e[a])){const o=oc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[o]=t[a]}return s}function TL(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const _2=["x","y","width","height","cx","cy","r"],kL={useVisualState:dN({scrapeMotionValuesFromProps:bN,createRenderState:mN,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:a})=>{if(!n)return;let o=!!t.drag;if(!o){for(const d in a)if(Qo.has(d)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let d=0;d<_2.length;d++){const h=_2[d];t[h]!==e[h]&&(l=!0)}l&&an.read(()=>{TL(n,s),an.render(()=>{a0(s,a,o0(n.tagName),t.transformTemplate),yN(n,s)})})}})},NL={useVisualState:dN({scrapeMotionValuesFromProps:l0,createRenderState:r0})};function _N(t,e,n){for(const s in e)!rs(e[s])&&!vN(s,n)&&(t[s]=e[s])}function ML({transformTemplate:t},e){return A.useMemo(()=>{const n=r0();return i0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function DL(t,e){const n=t.style||{},s={};return _N(s,n,t),Object.assign(s,ML(t,e)),s}function CL(t,e){const n={},s=DL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function EL(t,e,n,s){const a=A.useMemo(()=>{const o=mN();return a0(o,e,o0(s),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};_N(o,t.style,t),a.style={...o,...a.style}}return a}function AL(t=!1){return(n,s,a,{latestValues:o},l)=>{const h=(e0(n)?EL:CL)(s,o,l,n),p=qP(s,typeof n=="string",t),g=n!==A.Fragment?{...p,...h,ref:a}:{},{children:y}=s,_=A.useMemo(()=>rs(y)?y.get():y,[y]);return A.createElement(n,{...g,children:_})}}function OL(t,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...e0(s)?kL:NL,preloadedFeatures:t,useRender:AL(a),createVisualElement:e,Component:s};return nL(l)}}function wN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function Rp(t,e,n){const s=t.getProps();return t0(s,e,n!==void 0?n:s.custom,t)}const RL=Xv(()=>window.ScrollTimeline!==void 0);class PL{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(a=>{if(RL()&&a.attachTimeline)return a.attachTimeline(e);if(typeof n=="function")return n(a)});return()=>{s.forEach((a,o)=>{a&&a(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class LL extends PL{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function c0(t,e){return t?t[e]||t.default||t:void 0}const Ry=2e4;function SN(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Ry;)e+=n,s=t.next(e);return e>=Ry?1/0:e}function u0(t){return typeof t=="function"}function w2(t,e){t.timeline=e,t.onfinish=null}const d0=t=>Array.isArray(t)&&typeof t[0]=="number",zL={linearEasing:void 0};function BL(t,e){const n=Xv(t);return()=>{var s;return(s=zL[e])!==null&&s!==void 0?s:n()}}const tp=BL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jN=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let o=0;o<a;o++)s+=t(Jl(0,a-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function TN(t){return!!(typeof t=="function"&&tp()||!t||typeof t=="string"&&(t in Py||tp())||d0(t)||Array.isArray(t)&&t.every(TN))}const Lu=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Py={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lu([0,.65,.55,1]),circOut:Lu([.55,0,1,.45]),backIn:Lu([.31,.01,.66,-.59]),backOut:Lu([.33,1.53,.69,.99])};function kN(t,e){if(t)return typeof t=="function"&&tp()?jN(t,e):d0(t)?Lu(t):Array.isArray(t)?t.map(n=>kN(n,e)||Py.easeOut):Py[t]}const Si={x:!1,y:!1};function NN(){return Si.x||Si.y}function VL(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const o=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function MN(t,e){const n=VL(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function S2(t){return e=>{e.pointerType==="touch"||NN()||t(e)}}function FL(t,e,n={}){const[s,a,o]=MN(t,n),l=S2(d=>{const{target:h}=d,p=e(d);if(typeof p!="function"||!h)return;const g=S2(y=>{p(y),h.removeEventListener("pointerleave",g)});h.addEventListener("pointerleave",g,a)});return s.forEach(d=>{d.addEventListener("pointerenter",l,a)}),o}const DN=(t,e)=>e?t===e?!0:DN(t,e.parentElement):!1,h0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,HL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function UL(t){return HL.has(t.tagName)||t.tabIndex!==-1}const zu=new WeakSet;function j2(t){return e=>{e.key==="Enter"&&t(e)}}function Bx(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const IL=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=j2(()=>{if(zu.has(n))return;Bx(n,"down");const a=j2(()=>{Bx(n,"up")}),o=()=>Bx(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function T2(t){return h0(t)&&!NN()}function YL(t,e,n={}){const[s,a,o]=MN(t,n),l=d=>{const h=d.currentTarget;if(!T2(d)||zu.has(h))return;zu.add(h);const p=e(d),g=(j,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),!(!T2(j)||!zu.has(h))&&(zu.delete(h),typeof p=="function"&&p(j,{success:k}))},y=j=>{g(j,n.useGlobalTarget||DN(h,j.target))},_=j=>{g(j,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",_,a)};return s.forEach(d=>{!UL(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(n.useGlobalTarget?window:d).addEventListener("pointerdown",l,a),d.addEventListener("focus",p=>IL(p,a),a)}),o}function WL(t){return t==="x"||t==="y"?Si[t]?null:(Si[t]=!0,()=>{Si[t]=!1}):Si.x||Si.y?null:(Si.x=Si.y=!0,()=>{Si.x=Si.y=!1})}const CN=new Set(["width","height","top","left","right","bottom",...oc]);let Nf;function $L(){Nf=void 0}const Xi={now:()=>(Nf===void 0&&Xi.set(Jn.isProcessing||HP.useManualTiming?Jn.timestamp:performance.now()),Nf),set:t=>{Nf=t,queueMicrotask($L)}};function f0(t,e){t.indexOf(e)===-1&&t.push(e)}function p0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class m0{constructor(){this.subscriptions=[]}add(e){return f0(this.subscriptions,e),()=>p0(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function EN(t,e){return e?t*(1e3/e):0}const k2=30,qL=t=>!isNaN(parseFloat(t));class GL{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const o=Xi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new m0);const s=this.events[e].add(n);return e==="change"?()=>{s(),an.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>k2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,k2);return EN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cd(t,e){return new GL(t,e)}function XL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,cd(n))}function KL(t,e){const n=Rp(t,e);let{transitionEnd:s={},transition:a={},...o}=n||{};o={...o,...s};for(const l in o){const d=lL(o[l]);XL(t,l,d)}}function ZL(t){return!!(rs(t)&&t.add)}function Ly(t,e){const n=t.getValue("willChange");if(ZL(n))return n.add(e)}function AN(t){return t.props[lN]}const ON=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,QL=1e-7,JL=12;function e6(t,e,n,s,a){let o,l,d=0;do l=e+(n-e)/2,o=ON(l,s,a)-t,o>0?n=l:e=l;while(Math.abs(o)>QL&&++d<JL);return l}function jd(t,e,n,s){if(t===e&&n===s)return Fs;const a=o=>e6(o,0,1,t,n);return o=>o===0||o===1?o:ON(a(o),e,s)}const RN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,PN=t=>e=>1-t(1-e),LN=jd(.33,1.53,.69,.99),g0=PN(LN),zN=RN(g0),BN=t=>(t*=2)<1?.5*g0(t):.5*(2-Math.pow(2,-10*(t-1))),x0=t=>1-Math.sin(Math.acos(t)),VN=PN(x0),FN=RN(x0),HN=t=>/^0[^.\s]+$/u.test(t);function t6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||HN(t):!0}const Wu=t=>Math.round(t*1e5)/1e5,y0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function n6(t){return t==null}const s6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,v0=(t,e)=>n=>!!(typeof n=="string"&&s6.test(n)&&n.startsWith(t)||e&&!n6(n)&&Object.prototype.hasOwnProperty.call(n,e)),UN=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,o,l,d]=s.match(y0);return{[t]:parseFloat(a),[e]:parseFloat(o),[n]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},i6=t=>Ha(0,255,t),Vx={...lc,transform:t=>Math.round(i6(t))},Fo={test:v0("rgb","red"),parse:UN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Vx.transform(t)+", "+Vx.transform(e)+", "+Vx.transform(n)+", "+Wu(ld.transform(s))+")"};function a6(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const zy={test:v0("#"),parse:a6,transform:Fo.transform},Bl={test:v0("hsl","hue"),parse:UN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Gi.transform(Wu(e))+", "+Gi.transform(Wu(n))+", "+Wu(ld.transform(s))+")"},ss={test:t=>Fo.test(t)||zy.test(t)||Bl.test(t),parse:t=>Fo.test(t)?Fo.parse(t):Bl.test(t)?Bl.parse(t):zy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fo.transform(t):Bl.transform(t)},r6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function o6(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(y0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(r6))===null||n===void 0?void 0:n.length)||0)>0}const IN="number",YN="color",l6="var",c6="var(",N2="${}",u6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ud(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let o=0;const d=e.replace(u6,h=>(ss.test(h)?(s.color.push(o),a.push(YN),n.push(ss.parse(h))):h.startsWith(c6)?(s.var.push(o),a.push(l6),n.push(h)):(s.number.push(o),a.push(IN),n.push(parseFloat(h))),++o,N2)).split(N2);return{values:n,split:d,indexes:s,types:a}}function WN(t){return ud(t).values}function $N(t){const{split:e,types:n}=ud(t),s=e.length;return a=>{let o="";for(let l=0;l<s;l++)if(o+=e[l],a[l]!==void 0){const d=n[l];d===IN?o+=Wu(a[l]):d===YN?o+=ss.transform(a[l]):o+=a[l]}return o}}const d6=t=>typeof t=="number"?0:t;function h6(t){const e=WN(t);return $N(t)(e.map(d6))}const Kr={test:o6,parse:WN,createTransformer:$N,getAnimatableNone:h6},f6=new Set(["brightness","contrast","saturate","opacity"]);function p6(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(y0)||[];if(!s)return t;const a=n.replace(s,"");let o=f6.has(e)?1:0;return s!==n&&(o*=100),e+"("+o+a+")"}const m6=/\b([a-z-]*)\(.*?\)/gu,By={...Kr,getAnimatableNone:t=>{const e=t.match(m6);return e?e.map(p6).join(" "):t}},g6={...s0,color:ss,backgroundColor:ss,outlineColor:ss,fill:ss,stroke:ss,borderColor:ss,borderTopColor:ss,borderRightColor:ss,borderBottomColor:ss,borderLeftColor:ss,filter:By,WebkitFilter:By},b0=t=>g6[t];function qN(t,e){let n=b0(t);return n!==By&&(n=Kr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const x6=new Set(["auto","none","0"]);function y6(t,e,n){let s=0,a;for(;s<t.length&&!a;){const o=t[s];typeof o=="string"&&!x6.has(o)&&ud(o).values.length&&(a=t[s]),s++}if(a&&n)for(const o of e)t[o]=qN(n,a)}const M2=t=>t===lc||t===Je,D2=(t,e)=>parseFloat(t.split(", ")[e]),C2=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return D2(a[1],e);{const o=s.match(/^matrix\((.+)\)$/u);return o?D2(o[1],t):0}},v6=new Set(["x","y","z"]),b6=oc.filter(t=>!v6.has(t));function _6(t){const e=[];return b6.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const tc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:C2(4,13),y:C2(5,14)};tc.translateX=tc.x;tc.translateY=tc.y;const Wo=new Set;let Vy=!1,Fy=!1;function GN(){if(Fy){const t=Array.from(Wo).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=_6(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([o,l])=>{var d;(d=s.getValue(o))===null||d===void 0||d.set(l)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Fy=!1,Vy=!1,Wo.forEach(t=>t.complete()),Wo.clear()}function XN(){Wo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fy=!0)})}function w6(){XN(),GN()}class _0{constructor(e,n,s,a,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wo.add(this),Vy||(Vy=!0,an.read(XN),an.resolveKeyframes(GN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=a?.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const h=s.readValue(n,d);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=d),a&&l===void 0&&a.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const KN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),S6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function j6(t){const e=S6.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function ZN(t,e,n=1){const[s,a]=j6(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const l=o.trim();return KN(l)?parseFloat(l):l}return n0(a)?ZN(a,e,n+1):a}const QN=t=>e=>e.test(t),T6={test:t=>t==="auto",parse:t=>t},JN=[lc,Je,Gi,Ar,pL,fL,T6],E2=t=>JN.find(QN(t));class eM extends _0{constructor(e,n,s,a,o){super(e,n,s,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),n0(p))){const g=ZN(p,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!CN.has(s)||e.length!==2)return;const[a,o]=e,l=E2(a),d=E2(o);if(l!==d)if(M2(l)&&M2(d))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)t6(e[a])&&s.push(a);s.length&&y6(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tc[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const o=n.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=a.length-1,d=a[l];a[l]=tc[s](n.measureViewportBox(),window.getComputedStyle(n.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,p])=>{n.getValue(h).set(p)}),this.resolveNoneKeyframes()}}const A2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Kr.test(t)||t==="0")&&!t.startsWith("url("));function k6(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function N6(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=A2(a,e),d=A2(o,e);return!l||!d?!1:k6(t)||(n==="spring"||u0(n))&&s}const M6=t=>t!==null;function Pp(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(M6),o=e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const D6=40;class tM{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Xi.now(),this.options={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:o,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>D6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&w6(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Xi.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:o,delay:l,onComplete:d,onUpdate:h,isGenerator:p}=this.options;if(!p&&!N6(e,s,a,o))if(l)this.options.duration=0;else{h&&h(Pp(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const mn=(t,e,n)=>t+(e-t)*n;function Fx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function C6({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,o=0,l=0;if(!e)a=o=l=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;a=Fx(h,d,t+1/3),o=Fx(h,d,t),l=Fx(h,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function np(t,e){return n=>n>0?e:t}const Hx=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},E6=[zy,Fo,Bl],A6=t=>E6.find(e=>e.test(t));function O2(t){const e=A6(t);if(!e)return!1;let n=e.parse(t);return e===Bl&&(n=C6(n)),n}const R2=(t,e)=>{const n=O2(t),s=O2(e);if(!n||!s)return np(t,e);const a={...n};return o=>(a.red=Hx(n.red,s.red,o),a.green=Hx(n.green,s.green,o),a.blue=Hx(n.blue,s.blue,o),a.alpha=mn(n.alpha,s.alpha,o),Fo.transform(a))},O6=(t,e)=>n=>e(t(n)),Td=(...t)=>t.reduce(O6),Hy=new Set(["none","hidden"]);function R6(t,e){return Hy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function P6(t,e){return n=>mn(t,e,n)}function w0(t){return typeof t=="number"?P6:typeof t=="string"?n0(t)?np:ss.test(t)?R2:B6:Array.isArray(t)?nM:typeof t=="object"?ss.test(t)?R2:L6:np}function nM(t,e){const n=[...t],s=n.length,a=t.map((o,l)=>w0(o)(o,e[l]));return o=>{for(let l=0;l<s;l++)n[l]=a[l](o);return n}}function L6(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=w0(t[a])(t[a],e[a]));return a=>{for(const o in s)n[o]=s[o](a);return n}}function z6(t,e){var n;const s=[],a={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],d=t.indexes[l][a[l]],h=(n=t.values[d])!==null&&n!==void 0?n:0;s[o]=h,a[l]++}return s}const B6=(t,e)=>{const n=Kr.createTransformer(e),s=ud(t),a=ud(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?Hy.has(t)&&!a.values.length||Hy.has(e)&&!s.values.length?R6(t,e):Td(nM(z6(s,a),a.values),n):np(t,e)};function sM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mn(t,e,n):w0(t)(t,e)}const V6=5;function iM(t,e,n){const s=Math.max(e-V6,0);return EN(n-t(s),e-s)}const bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ux=.001;function F6({duration:t=bn.duration,bounce:e=bn.bounce,velocity:n=bn.velocity,mass:s=bn.mass}){let a,o,l=1-e;l=Ha(bn.minDamping,bn.maxDamping,l),t=Ha(bn.minDuration,bn.maxDuration,Ba(t)),l<1?(a=p=>{const g=p*l,y=g*t,_=g-n,j=Uy(p,l),k=Math.exp(-y);return Ux-_/j*k},o=p=>{const y=p*l*t,_=y*n+n,j=Math.pow(l,2)*Math.pow(p,2)*t,k=Math.exp(-y),N=Uy(Math.pow(p,2),l);return(-a(p)+Ux>0?-1:1)*((_-j)*k)/N}):(a=p=>{const g=Math.exp(-p*t),y=(p-n)*t+1;return-Ux+g*y},o=p=>{const g=Math.exp(-p*t),y=(n-p)*(t*t);return g*y});const d=5/t,h=U6(a,o,d);if(t=za(t),isNaN(h))return{stiffness:bn.stiffness,damping:bn.damping,duration:t};{const p=Math.pow(h,2)*s;return{stiffness:p,damping:l*2*Math.sqrt(s*p),duration:t}}}const H6=12;function U6(t,e,n){let s=n;for(let a=1;a<H6;a++)s=s-t(s)/e(s);return s}function Uy(t,e){return t*Math.sqrt(1-e*e)}const I6=["duration","bounce"],Y6=["stiffness","damping","mass"];function P2(t,e){return e.some(n=>t[n]!==void 0)}function W6(t){let e={velocity:bn.velocity,stiffness:bn.stiffness,damping:bn.damping,mass:bn.mass,isResolvedFromDuration:!1,...t};if(!P2(t,Y6)&&P2(t,I6))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,o=2*Ha(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:bn.mass,stiffness:a,damping:o}}else{const n=F6(t);e={...e,...n,mass:bn.mass},e.isResolvedFromDuration=!0}return e}function aM(t=bn.visualDuration,e=bn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:p,mass:g,duration:y,velocity:_,isResolvedFromDuration:j}=W6({...n,velocity:-Ba(n.velocity||0)}),k=_||0,N=p/(2*Math.sqrt(h*g)),D=l-o,R=Ba(Math.sqrt(h/g)),E=Math.abs(D)<5;s||(s=E?bn.restSpeed.granular:bn.restSpeed.default),a||(a=E?bn.restDelta.granular:bn.restDelta.default);let B;if(N<1){const $=Uy(R,N);B=I=>{const O=Math.exp(-N*R*I);return l-O*((k+N*R*D)/$*Math.sin($*I)+D*Math.cos($*I))}}else if(N===1)B=$=>l-Math.exp(-R*$)*(D+(k+R*D)*$);else{const $=R*Math.sqrt(N*N-1);B=I=>{const O=Math.exp(-N*R*I),q=Math.min($*I,300);return l-O*((k+N*R*D)*Math.sinh(q)+$*D*Math.cosh(q))/$}}const U={calculatedDuration:j&&y||null,next:$=>{const I=B($);if(j)d.done=$>=y;else{let O=0;N<1&&(O=$===0?za(k):iM(B,$,I));const q=Math.abs(O)<=s,J=Math.abs(l-I)<=a;d.done=q&&J}return d.value=d.done?l:I,d},toString:()=>{const $=Math.min(SN(U),Ry),I=jN(O=>U.next($*O).value,$,30);return $+"ms "+I}};return U}function L2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:d,max:h,restDelta:p=.5,restSpeed:g}){const y=t[0],_={done:!1,value:y},j=q=>d!==void 0&&q<d||h!==void 0&&q>h,k=q=>d===void 0?h:h===void 0||Math.abs(d-q)<Math.abs(h-q)?d:h;let N=n*e;const D=y+N,R=l===void 0?D:l(D);R!==D&&(N=R-y);const E=q=>-N*Math.exp(-q/s),B=q=>R+E(q),U=q=>{const J=E(q),oe=B(q);_.done=Math.abs(J)<=p,_.value=_.done?R:oe};let $,I;const O=q=>{j(_.value)&&($=q,I=aM({keyframes:[_.value,k(_.value)],velocity:iM(B,q,_.value),damping:a,stiffness:o,restDelta:p,restSpeed:g}))};return O(0),{calculatedDuration:null,next:q=>{let J=!1;return!I&&$===void 0&&(J=!0,U(q),O(q)),$!==void 0&&q>=$?I.next(q-$):(!J&&U(q),_)}}}const $6=jd(.42,0,1,1),q6=jd(0,0,.58,1),rM=jd(.42,0,.58,1),G6=t=>Array.isArray(t)&&typeof t[0]!="number",X6={linear:Fs,easeIn:$6,easeInOut:rM,easeOut:q6,circIn:x0,circInOut:FN,circOut:VN,backIn:g0,backInOut:zN,backOut:LN,anticipate:BN},z2=t=>{if(d0(t)){sN(t.length===4);const[e,n,s,a]=t;return jd(e,n,s,a)}else if(typeof t=="string")return X6[t];return t};function K6(t,e,n){const s=[],a=n||sM,o=t.length-1;for(let l=0;l<o;l++){let d=a(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||Fs:e;d=Td(h,d)}s.push(d)}return s}function Z6(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const o=t.length;if(sN(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=K6(e,s,a),h=d.length,p=g=>{if(l&&g<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const _=Jl(t[y],t[y+1],g);return d[y](_)};return n?g=>p(Ha(t[0],t[o-1],g)):p}function Q6(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=Jl(0,e,s);t.push(mn(n,1,a))}}function J6(t){const e=[0];return Q6(e,t.length-1),e}function ez(t,e){return t.map(n=>n*e)}function tz(t,e){return t.map(()=>e||rM).splice(0,t.length-1)}function sp({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=G6(s)?s.map(z2):z2(s),o={done:!1,value:e[0]},l=ez(n&&n.length===e.length?n:J6(e),t),d=Z6(l,e,{ease:Array.isArray(a)?a:tz(e,a)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const nz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>an.update(e,!0),stop:()=>Xr(e),now:()=>Jn.isProcessing?Jn.timestamp:Xi.now()}},sz={decay:L2,inertia:L2,tween:sp,keyframes:sp,spring:aM},iz=t=>t/100;class S0 extends tM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:s,element:a,keyframes:o}=this.options,l=a?.KeyframeResolver||_0,d=(h,p)=>this.onKeyframesResolved(h,p);this.resolver=new l(o,d,n,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=this.options,d=u0(n)?n:sz[n]||sp;let h,p;d!==sp&&typeof e[0]!="number"&&(h=Td(iz,sM(e[0],e[1])),e=[0,100]);const g=d({...this.options,keyframes:e});o==="mirror"&&(p=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=SN(g));const{calculatedDuration:y}=g,_=y+a,j=_*(s+1)-a;return{generator:g,mirroredGenerator:p,mapPercentToKeyframes:h,calculatedDuration:y,resolvedDuration:_,totalDuration:j}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:q}=this.options;return{done:!0,value:q[q.length-1]}}const{finalKeyframe:a,generator:o,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:h,calculatedDuration:p,totalDuration:g,resolvedDuration:y}=s;if(this.startTime===null)return o.next(0);const{delay:_,repeat:j,repeatType:k,repeatDelay:N,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const R=this.currentTime-_*(this.speed>=0?1:-1),E=this.speed>=0?R<0:R>g;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let B=this.currentTime,U=o;if(j){const q=Math.min(this.currentTime,g)/y;let J=Math.floor(q),oe=q%1;!oe&&q>=1&&(oe=1),oe===1&&J--,J=Math.min(J,j+1),J%2&&(k==="reverse"?(oe=1-oe,N&&(oe-=N/y)):k==="mirror"&&(U=l)),B=Ha(0,1,oe)*y}const $=E?{done:!1,value:h[0]}:U.next(B);d&&($.value=d($.value));let{done:I}=$;!E&&p!==null&&(I=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return O&&a!==void 0&&($.value=Pp(h,this.options,a)),D&&D($.value),O&&this.finish(),$}get duration(){const{resolved:e}=this;return e?Ba(e.calculatedDuration):0}get time(){return Ba(this.currentTime)}set time(e){e=za(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ba(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=nz,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const az=new Set(["opacity","clipPath","filter","transform"]);function rz(t,e,n,{delay:s=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:d="easeInOut",times:h}={}){const p={[e]:n};h&&(p.offset=h);const g=kN(d,a);return Array.isArray(g)&&(p.easing=g),t.animate(p,{delay:s,duration:a,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const oz=Xv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ip=10,lz=2e4;function cz(t){return u0(t.type)||t.type==="spring"||!TN(t.ease)}function uz(t,e){const n=new S0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const a=[];let o=0;for(;!s.done&&o<lz;)s=n.sample(o),a.push(s.value),o+=ip;return{times:void 0,keyframes:a,duration:o-ip,ease:"linear"}}const oM={anticipate:BN,backInOut:zN,circInOut:FN};function dz(t){return t in oM}class B2 extends tM{constructor(e){super(e);const{name:n,motionValue:s,element:a,keyframes:o}=this.options;this.resolver=new eM(o,(l,d)=>this.onKeyframesResolved(l,d),n,s,a),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:a,ease:o,type:l,motionValue:d,name:h,startTime:p}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof o=="string"&&tp()&&dz(o)&&(o=oM[o]),cz(this.options)){const{onComplete:y,onUpdate:_,motionValue:j,element:k,...N}=this.options,D=uz(e,N);e=D.keyframes,e.length===1&&(e[1]=e[0]),s=D.duration,a=D.times,o=D.ease,l="keyframes"}const g=rz(d.owner.current,h,e,{...this.options,duration:s,times:a,ease:o});return g.startTime=p??this.calcStartTime(),this.pendingTimeline?(w2(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:y}=this.options;d.set(Pp(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:s,times:a,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ba(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ba(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=za(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Fs;const{animation:s}=n;w2(s,e)}return Fs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:a,type:o,ease:l,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:g,onComplete:y,element:_,...j}=this.options,k=new S0({...j,keyframes:s,duration:a,type:o,ease:l,times:d,isGenerator:!0}),N=za(this.time);p.setWithVelocity(k.sample(N-ip).value,k.sample(N).value,ip)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:a,repeatType:o,damping:l,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=n.owner.getProps();return oz()&&s&&az.has(s)&&!h&&!p&&!a&&o!=="mirror"&&l!==0&&d!=="inertia"}}const hz={type:"spring",stiffness:500,damping:25,restSpeed:10},fz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),pz={type:"keyframes",duration:.8},mz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gz=(t,{keyframes:e})=>e.length>2?pz:Qo.has(t)?t.startsWith("scale")?fz(e[1]):hz:mz;function xz({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:d,from:h,elapsed:p,...g}){return!!Object.keys(g).length}const j0=(t,e,n,s={},a,o)=>l=>{const d=c0(s,t)||{},h=d.delay||s.delay||0;let{elapsed:p=0}=s;p=p-za(h);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:_=>{e.set(_),d.onUpdate&&d.onUpdate(_)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:a};xz(d)||(g={...g,...gz(t,g)}),g.duration&&(g.duration=za(g.duration)),g.repeatDelay&&(g.repeatDelay=za(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),y&&!o&&e.get()!==void 0){const _=Pp(g.keyframes,d);if(_!==void 0)return an.update(()=>{g.onUpdate(_),g.onComplete()}),new LL([])}return!o&&B2.supports(g)?new B2(g):new S0(g)};function yz({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function lM(t,e,{delay:n=0,transitionOverride:s,type:a}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:d,...h}=e;s&&(l=s);const p=[],g=a&&t.animationState&&t.animationState.getState()[a];for(const y in h){const _=t.getValue(y,(o=t.latestValues[y])!==null&&o!==void 0?o:null),j=h[y];if(j===void 0||g&&yz(g,y))continue;const k={delay:n,...c0(l||{},y)};let N=!1;if(window.MotionHandoffAnimation){const R=AN(t);if(R){const E=window.MotionHandoffAnimation(R,y,an);E!==null&&(k.startTime=E,N=!0)}}Ly(t,y),_.start(j0(y,_,j,t.shouldReduceMotion&&CN.has(y)?{type:!1}:k,t,N));const D=_.animation;D&&p.push(D)}return d&&Promise.all(p).then(()=>{an.update(()=>{d&&KL(t,d)})}),p}function Iy(t,e,n={}){var s;const a=Rp(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(o=n.transitionOverride);const l=a?()=>Promise.all(lM(t,a,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:_}=o;return vz(t,e,g+p,y,_,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[p,g]=h==="beforeChildren"?[l,d]:[d,l];return p().then(()=>g())}else return Promise.all([l(),d(n.delay)])}function vz(t,e,n=0,s=0,a=1,o){const l=[],d=(t.variantChildren.size-1)*s,h=a===1?(p=0)=>p*s:(p=0)=>d-p*s;return Array.from(t.variantChildren).sort(bz).forEach((p,g)=>{p.notify("AnimationStart",e),l.push(Iy(p,e,{...o,delay:n+h(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function bz(t,e){return t.sortNodePosition(e)}function _z(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(o=>Iy(t,o,n));s=Promise.all(a)}else if(typeof e=="string")s=Iy(t,e,n);else{const a=typeof e=="function"?Rp(t,e,n.custom):e;s=Promise.all(lM(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const wz=Zv.length;function cM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?cM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<wz;n++){const s=Zv[n],a=t.props[s];(od(a)||a===!1)&&(e[s]=a)}return e}const Sz=[...Kv].reverse(),jz=Kv.length;function Tz(t){return e=>Promise.all(e.map(({animation:n,options:s})=>_z(t,n,s)))}function kz(t){let e=Tz(t),n=V2(),s=!0;const a=h=>(p,g)=>{var y;const _=Rp(t,g,h==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(_){const{transition:j,transitionEnd:k,...N}=_;p={...p,...N,...k}}return p};function o(h){e=h(t)}function l(h){const{props:p}=t,g=cM(t.parent)||{},y=[],_=new Set;let j={},k=1/0;for(let D=0;D<jz;D++){const R=Sz[D],E=n[R],B=p[R]!==void 0?p[R]:g[R],U=od(B),$=R===h?E.isActive:null;$===!1&&(k=D);let I=B===g[R]&&B!==p[R]&&U;if(I&&s&&t.manuallyAnimateOnMount&&(I=!1),E.protectedKeys={...j},!E.isActive&&$===null||!B&&!E.prevProp||Ap(B)||typeof B=="boolean")continue;const O=Nz(E.prevProp,B);let q=O||R===h&&E.isActive&&!I&&U||D>k&&U,J=!1;const oe=Array.isArray(B)?B:[B];let ie=oe.reduce(a(R),{});$===!1&&(ie={});const{prevResolvedValues:me={}}=E,le={...me,...ie},Z=X=>{q=!0,_.has(X)&&(J=!0,_.delete(X)),E.needsAnimating[X]=!0;const ne=t.getValue(X);ne&&(ne.liveStyle=!1)};for(const X in le){const ne=ie[X],ae=me[X];if(j.hasOwnProperty(X))continue;let xe=!1;Oy(ne)&&Oy(ae)?xe=!wN(ne,ae):xe=ne!==ae,xe?ne!=null?Z(X):_.add(X):ne!==void 0&&_.has(X)?Z(X):E.protectedKeys[X]=!0}E.prevProp=B,E.prevResolvedValues=ie,E.isActive&&(j={...j,...ie}),s&&t.blockInitialAnimation&&(q=!1),q&&(!(I&&O)||J)&&y.push(...oe.map(X=>({animation:X,options:{type:R}})))}if(_.size){const D={};_.forEach(R=>{const E=t.getBaseTarget(R),B=t.getValue(R);B&&(B.liveStyle=!0),D[R]=E??null}),y.push({animation:D})}let N=!!y.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(N=!1),s=!1,N?e(y):Promise.resolve()}function d(h,p){var g;if(n[h].isActive===p)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(_=>{var j;return(j=_.animationState)===null||j===void 0?void 0:j.setActive(h,p)}),n[h].isActive=p;const y=l(h);for(const _ in n)n[_].protectedKeys={};return y}return{animateChanges:l,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=V2(),s=!0}}}function Nz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wN(e,t):!1}function Eo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function V2(){return{animate:Eo(!0),whileInView:Eo(),whileHover:Eo(),whileTap:Eo(),whileDrag:Eo(),whileFocus:Eo(),exit:Eo()}}class eo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Mz extends eo{constructor(e){super(e),e.animationState||(e.animationState=kz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ap(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Dz=0;class Cz extends eo{constructor(){super(...arguments),this.id=Dz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Ez={animation:{Feature:Mz},exit:{Feature:Cz}};function dd(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function kd(t){return{point:{x:t.pageX,y:t.pageY}}}const Az=t=>e=>h0(e)&&t(e,kd(e));function $u(t,e,n,s){return dd(t,e,Az(n),s)}const F2=(t,e)=>Math.abs(t-e);function Oz(t,e){const n=F2(t.x,e.x),s=F2(t.y,e.y);return Math.sqrt(n**2+s**2)}class uM{constructor(e,n,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Yx(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,j=Oz(y.offset,{x:0,y:0})>=3;if(!_&&!j)return;const{point:k}=y,{timestamp:N}=Jn;this.history.push({...k,timestamp:N});const{onStart:D,onMove:R}=this.handlers;_||(D&&D(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Ix(_,this.transformPagePoint),an.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:j,onSessionEnd:k,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Yx(y.type==="pointercancel"?this.lastMoveEventInfo:Ix(_,this.transformPagePoint),this.history);this.startEvent&&j&&j(y,D),k&&k(y,D)},!h0(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.contextWindow=a||window;const l=kd(e),d=Ix(l,this.transformPagePoint),{point:h}=d,{timestamp:p}=Jn;this.history=[{...h,timestamp:p}];const{onSessionStart:g}=n;g&&g(e,Yx(d,this.history)),this.removeListeners=Td($u(this.contextWindow,"pointermove",this.handlePointerMove),$u(this.contextWindow,"pointerup",this.handlePointerUp),$u(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xr(this.updatePoint)}}function Ix(t,e){return e?{point:e(t.point)}:t}function H2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yx({point:t},e){return{point:t,delta:H2(t,dM(e)),offset:H2(t,Rz(e)),velocity:Pz(e,.1)}}function Rz(t){return t[0]}function dM(t){return t[t.length-1]}function Pz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=dM(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>za(e)));)n--;if(!s)return{x:0,y:0};const o=Ba(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const hM=1e-4,Lz=1-hM,zz=1+hM,fM=.01,Bz=0-fM,Vz=0+fM;function Hs(t){return t.max-t.min}function Fz(t,e,n){return Math.abs(t-e)<=n}function U2(t,e,n,s=.5){t.origin=s,t.originPoint=mn(e.min,e.max,t.origin),t.scale=Hs(n)/Hs(e),t.translate=mn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Lz&&t.scale<=zz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Bz&&t.translate<=Vz||isNaN(t.translate))&&(t.translate=0)}function qu(t,e,n,s){U2(t.x,e.x,n.x,s?s.originX:void 0),U2(t.y,e.y,n.y,s?s.originY:void 0)}function I2(t,e,n){t.min=n.min+e.min,t.max=t.min+Hs(e)}function Hz(t,e,n){I2(t.x,e.x,n.x),I2(t.y,e.y,n.y)}function Y2(t,e,n){t.min=e.min-n.min,t.max=t.min+Hs(e)}function Gu(t,e,n){Y2(t.x,e.x,n.x),Y2(t.y,e.y,n.y)}function Uz(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?mn(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?mn(n,t,s.max):Math.min(t,n)),t}function W2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Iz(t,{top:e,left:n,bottom:s,right:a}){return{x:W2(t.x,n,a),y:W2(t.y,e,s)}}function $2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function Yz(t,e){return{x:$2(t.x,e.x),y:$2(t.y,e.y)}}function Wz(t,e){let n=.5;const s=Hs(t),a=Hs(e);return a>s?n=Jl(e.min,e.max-s,t.min):s>a&&(n=Jl(t.min,t.max-a,e.min)),Ha(0,1,n)}function $z(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Yy=.35;function qz(t=Yy){return t===!1?t=0:t===!0&&(t=Yy),{x:q2(t,"left","right"),y:q2(t,"top","bottom")}}function q2(t,e,n){return{min:G2(t,e),max:G2(t,n)}}function G2(t,e){return typeof t=="number"?t:t[e]||0}const X2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vl=()=>({x:X2(),y:X2()}),K2=()=>({min:0,max:0}),Nn=()=>({x:K2(),y:K2()});function ii(t){return[t("x"),t("y")]}function pM({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function Gz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Xz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Wx(t){return t===void 0||t===1}function Wy({scale:t,scaleX:e,scaleY:n}){return!Wx(t)||!Wx(e)||!Wx(n)}function Lo(t){return Wy(t)||mM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function mM(t){return Z2(t.x)||Z2(t.y)}function Z2(t){return t&&t!=="0%"}function ap(t,e,n){const s=t-n,a=e*s;return n+a}function Q2(t,e,n,s,a){return a!==void 0&&(t=ap(t,a,s)),ap(t,n,s)+e}function $y(t,e=0,n=1,s,a){t.min=Q2(t.min,e,n,s,a),t.max=Q2(t.max,e,n,s,a)}function gM(t,{x:e,y:n}){$y(t.x,e.translate,e.scale,e.originPoint),$y(t.y,n.translate,n.scale,n.originPoint)}const J2=.999999999999,ej=1.0000000000001;function Kz(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let o,l;for(let d=0;d<a;d++){o=n[d],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Hl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,gM(t,l)),s&&Lo(o.latestValues)&&Hl(t,o.latestValues))}e.x<ej&&e.x>J2&&(e.x=1),e.y<ej&&e.y>J2&&(e.y=1)}function Fl(t,e){t.min=t.min+e,t.max=t.max+e}function tj(t,e,n,s,a=.5){const o=mn(t.min,t.max,a);$y(t,e,n,o,s)}function Hl(t,e){tj(t.x,e.x,e.scaleX,e.scale,e.originX),tj(t.y,e.y,e.scaleY,e.scale,e.originY)}function xM(t,e){return pM(Xz(t.getBoundingClientRect(),e))}function Zz(t,e,n){const s=xM(t,n),{scroll:a}=e;return a&&(Fl(s.x,a.offset.x),Fl(s.y,a.offset.y)),s}const yM=({current:t})=>t?t.ownerDocument.defaultView:null,Qz=new WeakMap;class Jz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kd(g).point)},o=(g,y)=>{const{drag:_,dragPropagation:j,onDragStart:k}=this.getProps();if(_&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WL(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ii(D=>{let R=this.getAxisMotionValue(D).get()||0;if(Gi.test(R)){const{projection:E}=this.visualElement;if(E&&E.layout){const B=E.layout.layoutBox[D];B&&(R=Hs(B)*(parseFloat(R)/100))}}this.originPoint[D]=R}),k&&an.postRender(()=>k(g,y)),Ly(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(g,y)=>{const{dragPropagation:_,dragDirectionLock:j,onDirectionLock:k,onDrag:N}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:D}=y;if(j&&this.currentDirection===null){this.currentDirection=e8(D),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",y.point,D),this.updateAxis("y",y.point,D),this.visualElement.render(),N&&N(g,y)},d=(g,y)=>this.stop(g,y),h=()=>ii(g=>{var y;return this.getAnimationState(g)==="paused"&&((y=this.getAxisMotionValue(g).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new uM(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:yM(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&an.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!gf(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=Uz(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&zl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=Iz(a.layoutBox,n):this.constraints=!1,this.elastic=qz(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ii(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=$z(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!zl(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=Zz(s,a.root,this.visualElement.getTransformPagePoint());let l=Yz(a.layout.layoutBox,o);if(n){const d=n(Gz(l));this.hasMutatedConstraints=!!d,d&&(l=pM(d))}return l}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},p=ii(g=>{if(!gf(g,n,this.currentDirection))return;let y=h&&h[g]||{};l&&(y={min:0,max:0});const _=a?200:1e6,j=a?40:1e7,k={type:"inertia",velocity:s?e[g]:0,bounceStiffness:_,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(p).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Ly(this.visualElement,e),s.start(j0(e,s,0,n,this.visualElement,!1))}stopAnimation(){ii(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ii(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ii(n=>{const{drag:s}=this.getProps();if(!gf(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(n);if(a&&a.layout){const{min:l,max:d}=a.layout.layoutBox[n];o.set(e[n]-mn(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!zl(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ii(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const h=d.get();a[l]=Wz({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ii(l=>{if(!gf(l,e,null))return;const d=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];d.set(mn(h,p,a[l]))})}addListeners(){if(!this.visualElement.current)return;Qz.set(this.visualElement,this);const e=this.visualElement.current,n=$u(e,"pointerdown",h=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();zl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),an.read(s);const l=dd(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(ii(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=h[g].translate,y.set(y.get()+h[g].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=Yy,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:d}}}function gf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function e8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class t8 extends eo{constructor(e){super(e),this.removeGroupControls=Fs,this.removeListeners=Fs,this.controls=new Jz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fs}unmount(){this.removeGroupControls(),this.removeListeners()}}const nj=t=>(e,n)=>{t&&an.postRender(()=>t(e,n))};class n8 extends eo{constructor(){super(...arguments),this.removePointerDownListener=Fs}onPointerDown(e){this.session=new uM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:nj(e),onStart:nj(n),onMove:s,onEnd:(o,l)=>{delete this.session,a&&an.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=$u(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ku={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Je.test(t))t=parseFloat(t);else return t;const n=sj(t,e.target.x),s=sj(t,e.target.y);return`${n}% ${s}%`}},s8={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=Kr.parse(t);if(a.length>5)return s;const o=Kr.createTransformer(t),l=typeof a[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;a[0+l]/=d,a[1+l]/=h;const p=mn(d,h,.5);return typeof a[2+l]=="number"&&(a[2+l]/=p),typeof a[3+l]=="number"&&(a[3+l]/=p),o(a)}};class i8 extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=e;jL(a8),o&&(n.group&&n.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Mf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:o}=this.props,l=s.projection;return l&&(l.isPresent=o,a||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||an.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Jv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vM(t){const[e,n]=VP(),s=A.useContext(tN);return u.jsx(i8,{...t,layoutGroup:s,switchLayoutGroup:A.useContext(cN),isPresent:e,safeToRemove:n})}const a8={borderRadius:{...ku,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ku,borderTopRightRadius:ku,borderBottomLeftRadius:ku,borderBottomRightRadius:ku,boxShadow:s8};function r8(t,e,n){const s=rs(t)?t:cd(t);return s.start(j0("",s,e,n)),s.animation}function o8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const l8=(t,e)=>t.depth-e.depth;class c8{constructor(){this.children=[],this.isDirty=!1}add(e){f0(this.children,e),this.isDirty=!0}remove(e){p0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(l8),this.isDirty=!1,this.children.forEach(e)}}function u8(t,e){const n=Xi.now(),s=({timestamp:a})=>{const o=a-n;o>=e&&(Xr(s),t(o-e))};return an.read(s,!0),()=>Xr(s)}const bM=["TopLeft","TopRight","BottomLeft","BottomRight"],d8=bM.length,ij=t=>typeof t=="string"?parseFloat(t):t,aj=t=>typeof t=="number"||Je.test(t);function h8(t,e,n,s,a,o){a?(t.opacity=mn(0,n.opacity!==void 0?n.opacity:1,f8(s)),t.opacityExit=mn(e.opacity!==void 0?e.opacity:1,0,p8(s))):o&&(t.opacity=mn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let l=0;l<d8;l++){const d=`border${bM[l]}Radius`;let h=rj(e,d),p=rj(n,d);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||aj(h)===aj(p)?(t[d]=Math.max(mn(ij(h),ij(p),s),0),(Gi.test(p)||Gi.test(h))&&(t[d]+="%")):t[d]=p}(e.rotate||n.rotate)&&(t.rotate=mn(e.rotate||0,n.rotate||0,s))}function rj(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const f8=_M(0,.5,VN),p8=_M(.5,.95,Fs);function _M(t,e,n){return s=>s<t?0:s>e?1:n(Jl(t,e,s))}function oj(t,e){t.min=e.min,t.max=e.max}function ni(t,e){oj(t.x,e.x),oj(t.y,e.y)}function lj(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function cj(t,e,n,s,a){return t-=e,t=ap(t,1/n,s),a!==void 0&&(t=ap(t,1/a,s)),t}function m8(t,e=0,n=1,s=.5,a,o=t,l=t){if(Gi.test(e)&&(e=parseFloat(e),e=mn(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=mn(o.min,o.max,s);t===o&&(d-=e),t.min=cj(t.min,e,n,d,a),t.max=cj(t.max,e,n,d,a)}function uj(t,e,[n,s,a],o,l){m8(t,e[n],e[s],e[a],e.scale,o,l)}const g8=["x","scaleX","originX"],x8=["y","scaleY","originY"];function dj(t,e,n,s){uj(t.x,e,g8,n?n.x:void 0,s?s.x:void 0),uj(t.y,e,x8,n?n.y:void 0,s?s.y:void 0)}function hj(t){return t.translate===0&&t.scale===1}function wM(t){return hj(t.x)&&hj(t.y)}function fj(t,e){return t.min===e.min&&t.max===e.max}function y8(t,e){return fj(t.x,e.x)&&fj(t.y,e.y)}function pj(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function SM(t,e){return pj(t.x,e.x)&&pj(t.y,e.y)}function mj(t){return Hs(t.x)/Hs(t.y)}function gj(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class v8{constructor(){this.members=[]}add(e){f0(this.members,e),e.scheduleRender()}remove(e){if(p0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function b8(t,e,n){let s="";const a=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((a||o||l)&&(s=`translate3d(${a}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:_,skewX:j,skewY:k}=n;p&&(s=`perspective(${p}px) ${s}`),g&&(s+=`rotate(${g}deg) `),y&&(s+=`rotateX(${y}deg) `),_&&(s+=`rotateY(${_}deg) `),j&&(s+=`skewX(${j}deg) `),k&&(s+=`skewY(${k}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(s+=`scale(${d}, ${h})`),s||"none"}const zo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bu=typeof window<"u"&&window.MotionDebug!==void 0,$x=["","X","Y","Z"],_8={visibility:"hidden"},xj=1e3;let w8=0;function qx(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function jM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=AN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",an,!(a||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&jM(s)}function TM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},d=e?.()){this.id=w8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bu&&(zo.totalNodes=zo.resolvedTargetDeltas=zo.recalculatedProjection=0),this.nodes.forEach(T8),this.nodes.forEach(C8),this.nodes.forEach(E8),this.nodes.forEach(k8),Bu&&window.MotionDebug.record(zo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new c8)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new m0),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const h=this.eventHandlers.get(l);h&&h.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=o8(l),this.instance=l;const{layoutId:h,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(p||h)&&(this.isLayoutDirty=!0),t){let y;const _=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=u8(_,250),Mf.hasAnimatedSinceResize&&(Mf.hasAnimatedSinceResize=!1,this.nodes.forEach(vj))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:_,hasRelativeTargetChanged:j,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||g.getDefaultTransition()||L8,{onLayoutAnimationStart:D,onLayoutAnimationComplete:R}=g.getProps(),E=!this.targetLayout||!SM(this.targetLayout,k)||j,B=!_&&j;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||B||_&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,B);const U={...c0(N,"layout"),onPlay:D,onComplete:R};(g.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U)}else _||vj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A8),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yj);return}this.isUpdating||this.nodes.forEach(M8),this.isUpdating=!1,this.nodes.forEach(D8),this.nodes.forEach(S8),this.nodes.forEach(j8),this.clearAllSnapshots();const d=Xi.now();Jn.delta=Ha(0,1e3/60,d-Jn.timestamp),Jn.timestamp=d,Jn.isProcessing=!0,zx.update.process(Jn),zx.preRender.process(Jn),zx.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(N8),this.sharedNodes.forEach(O8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,an.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){an.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!wM(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&(d||Lo(this.latestValues)||g)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return l&&(h=this.removeTransform(h)),z8(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:d}=this.options;if(!d)return Nn();const h=d.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(B8))){const{scroll:g}=this.root;g&&(Fl(h.x,g.offset.x),Fl(h.y,g.offset.y))}return h}removeElementScroll(l){var d;const h=Nn();if(ni(h,l),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return h;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:y,options:_}=g;g!==this.root&&y&&_.layoutScroll&&(y.wasRoot&&ni(h,l),Fl(h.x,y.offset.x),Fl(h.y,y.offset.y))}return h}applyTransform(l,d=!1){const h=Nn();ni(h,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Hl(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Lo(g.latestValues)&&Hl(h,g.latestValues)}return Lo(this.latestValues)&&Hl(h,this.latestValues),h}removeTransform(l){const d=Nn();ni(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!Lo(p.latestValues))continue;Wy(p.latestValues)&&p.updateSnapshot();const g=Nn(),y=p.measurePageBox();ni(g,y),dj(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Lo(this.latestValues)&&dj(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var d;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==h;if(!(l||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:_}=this.options;if(!(!this.layout||!(y||_))){if(this.resolvedRelativeTargetAt=Jn.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nn(),this.relativeTargetOrigin=Nn(),Gu(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Nn(),this.targetWithTransforms=Nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ni(this.target,this.layout.layoutBox),gM(this.target,this.targetDelta)):ni(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nn(),this.relativeTargetOrigin=Nn(),Gu(this.relativeTargetOrigin,this.target,j.target),ni(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bu&&zo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Wy(this.parent.latestValues)||mM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const d=this.getLead(),h=!!this.resumingFrom||this!==d;let p=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(p=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(p=!1),p)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;ni(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,j=this.treeScale.y;Kz(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Nn());const{target:k}=d;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lj(this.prevProjectionDelta.x,this.projectionDelta.x),lj(this.prevProjectionDelta.y,this.projectionDelta.y)),qu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==j||!gj(this.projectionDelta.x,this.prevProjectionDelta.x)||!gj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),Bu&&zo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vl(),this.projectionDelta=Vl(),this.projectionDeltaWithTransform=Vl()}setAnimationOrigin(l,d=!1){const h=this.snapshot,p=h?h.latestValues:{},g={...this.latestValues},y=Vl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const _=Nn(),j=h?h.source:void 0,k=this.layout?this.layout.source:void 0,N=j!==k,D=this.getStack(),R=!D||D.members.length<=1,E=!!(N&&!R&&this.options.crossfade===!0&&!this.path.some(P8));this.animationProgress=0;let B;this.mixTargetDelta=U=>{const $=U/1e3;bj(y.x,l.x,$),bj(y.y,l.y,$),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R8(this.relativeTarget,this.relativeTargetOrigin,_,$),B&&y8(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Nn()),ni(B,this.relativeTarget)),N&&(this.animationValues=g,h8(g,p,this.latestValues,$,E,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=an.update(()=>{Mf.hasAnimatedSinceResize=!0,this.currentAnimation=r8(0,xj,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:h,layout:p,latestValues:g}=l;if(!(!d||!h||!p)){if(this!==l&&this.layout&&p&&kM(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Nn();const y=Hs(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const _=Hs(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+_}ni(d,h),Hl(d,g),qu(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new v8),this.sharedNodes.get(l).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:d}=this.options;return d?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:d}=this.options;return d?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const p={};h.z&&qx("z",l,p,this.animationValues);for(let g=0;g<$x.length;g++)qx(`rotate${$x[g]}`,l,p,this.animationValues),qx(`skew${$x[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}getProjectionStyles(l){var d,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _8;const p={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=kf(l?.pointerEvents)||"",p.transform=g?g(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=kf(l?.pointerEvents)||""),this.hasProjected&&!Lo(this.latestValues)&&(N.transform=g?g({},""):"none",this.hasProjected=!1),N}const _=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=b8(this.projectionDeltaWithTransform,this.treeScale,_),g&&(p.transform=g(_,p.transform));const{x:j,y:k}=this.projectionDelta;p.transformOrigin=`${j.origin*100}% ${k.origin*100}% 0`,y.animationValues?p.opacity=y===this?(h=(d=_.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:p.opacity=y===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const N in ep){if(_[N]===void 0)continue;const{correct:D,applyTo:R}=ep[N],E=p.transform==="none"?_[N]:D(_[N],y);if(R){const B=R.length;for(let U=0;U<B;U++)p[R[U]]=E}else p[N]=E}return this.options.layoutId&&(p.pointerEvents=y===this?kf(l?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(yj),this.root.sharedNodes.clear()}}}function S8(t){t.updateLayout()}function j8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?ii(y=>{const _=l?n.measuredBox[y]:n.layoutBox[y],j=Hs(_);_.min=s[y].min,_.max=_.min+j}):kM(o,n.layoutBox,s)&&ii(y=>{const _=l?n.measuredBox[y]:n.layoutBox[y],j=Hs(s[y]);_.max=_.min+j,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+j)});const d=Vl();qu(d,s,n.layoutBox);const h=Vl();l?qu(h,t.applyTransform(a,!0),n.measuredBox):qu(h,s,n.layoutBox);const p=!wM(d);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:_,layout:j}=y;if(_&&j){const k=Nn();Gu(k,n.layoutBox,_.layoutBox);const N=Nn();Gu(N,s,j.layoutBox),SM(k,N)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=k,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:h,layoutDelta:d,hasLayoutChanged:p,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function T8(t){Bu&&zo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function k8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function N8(t){t.clearSnapshot()}function yj(t){t.clearMeasurements()}function M8(t){t.isLayoutDirty=!1}function D8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function vj(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function C8(t){t.resolveTargetDelta()}function E8(t){t.calcProjection()}function A8(t){t.resetSkewAndRotation()}function O8(t){t.removeLeadSnapshot()}function bj(t,e,n){t.translate=mn(e.translate,0,n),t.scale=mn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _j(t,e,n,s){t.min=mn(e.min,n.min,s),t.max=mn(e.max,n.max,s)}function R8(t,e,n,s){_j(t.x,e.x,n.x,s),_j(t.y,e.y,n.y,s)}function P8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const L8={duration:.45,ease:[.4,0,.1,1]},wj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Sj=wj("applewebkit/")&&!wj("chrome/")?Math.round:Fs;function jj(t){t.min=Sj(t.min),t.max=Sj(t.max)}function z8(t){jj(t.x),jj(t.y)}function kM(t,e,n){return t==="position"||t==="preserve-aspect"&&!Fz(mj(e),mj(n),.2)}function B8(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const V8=TM({attachResizeListener:(t,e)=>dd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gx={current:void 0},NM=TM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gx.current){const t=new V8({});t.mount(window),t.setOptions({layoutScroll:!0}),Gx.current=t}return Gx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),F8={pan:{Feature:n8},drag:{Feature:t8,ProjectionNode:NM,MeasureLayout:vM}};function Tj(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,o=s[a];o&&an.postRender(()=>o(e,kd(e)))}class H8 extends eo{mount(){const{current:e}=this.node;e&&(this.unmount=FL(e,n=>(Tj(this.node,n,"Start"),s=>Tj(this.node,s,"End"))))}unmount(){}}class U8 extends eo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Td(dd(this.node.current,"focus",()=>this.onFocus()),dd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kj(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),o=s[a];o&&an.postRender(()=>o(e,kd(e)))}class I8 extends eo{mount(){const{current:e}=this.node;e&&(this.unmount=YL(e,n=>(kj(this.node,n,"Start"),(s,{success:a})=>kj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qy=new WeakMap,Xx=new WeakMap,Y8=t=>{const e=qy.get(t.target);e&&e(t)},W8=t=>{t.forEach(Y8)};function $8({root:t,...e}){const n=t||document;Xx.has(n)||Xx.set(n,{});const s=Xx.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(W8,{root:t,...e})),s[a]}function q8(t,e,n){const s=$8(e);return qy.set(t,n),s.observe(t),()=>{qy.delete(t),s.unobserve(t)}}const G8={some:0,all:1};class X8 extends eo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:G8[a]},d=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),_=p?g:y;_&&_(h)};return q8(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(K8(e,n))&&this.startObserver()}unmount(){}}function K8({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Z8={inView:{Feature:X8},tap:{Feature:I8},focus:{Feature:U8},hover:{Feature:H8}},Q8={layout:{ProjectionNode:NM,MeasureLayout:vM}},Gy={current:null},MM={current:!1};function J8(){if(MM.current=!0,!!Gv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gy.current=t.matches;t.addListener(e),e()}else Gy.current=!1}const eB=[...JN,ss,Kr],tB=t=>eB.find(QN(t)),Nj=new WeakMap;function nB(t,e,n){for(const s in e){const a=e[s],o=n[s];if(rs(a))t.addValue(s,a);else if(rs(o))t.addValue(s,cd(a,{owner:t}));else if(o!==a)if(t.hasValue(s)){const l=t.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(s);t.addValue(s,cd(l!==void 0?l:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Mj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sB{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:o,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const j=Xi.now();this.renderScheduledAt<j&&(this.renderScheduledAt=j,an.render(this.render,!1,!0))};const{latestValues:h,renderState:p,onUpdate:g}=l;this.onUpdate=g,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=Op(n),this.isVariantNode=oN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const j in _){const k=_[j];h[j]!==void 0&&rs(k)&&k.set(h[j],!1)}}mount(e){this.current=e,Nj.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),MM.current||J8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Nj.delete(this.current),this.projection&&this.projection.unmount(),Xr(this.notifyUpdate),Xr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Qo.has(e),a=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&an.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ec){const n=ec[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Mj.length;s++){const a=Mj[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=e[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=nB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=cd(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(KN(a)||HN(a))?a=parseFloat(a):!tB(a)&&Kr.test(n)&&(a=qN(e,n)),this.setBaseTarget(e,rs(a)?a.get():a)),rs(a)?a.get():a}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const l=t0(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(a=l[e])}if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!rs(o)?o:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new m0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DM extends sB{constructor(){super(...arguments),this.KeyframeResolver=eM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;rs(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function iB(t){return window.getComputedStyle(t)}class aB extends DM{constructor(){super(...arguments),this.type="html",this.renderInstance=gN}readValueFromInstance(e,n){if(Qo.has(n)){const s=b0(n);return s&&s.default||0}else{const s=iB(e),a=(fN(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return xM(e,n)}build(e,n,s){i0(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return l0(e,n,s)}}class rB extends DM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qo.has(n)){const s=b0(n);return s&&s.default||0}return n=xN.has(n)?n:Qv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return bN(e,n,s)}build(e,n,s){a0(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,a){yN(e,n,s,a)}mount(e){this.isSVGTag=o0(e.tagName),super.mount(e)}}const oB=(t,e)=>e0(t)?new rB(e):new aB(e,{allowProjection:t!==A.Fragment}),lB=OL({...Ez,...Z8,...F8,...Q8},oB),Dr=GP(lB);function cB(){const[t,e]=A.useState(null),[n,s]=A.useState(!1),[a,o]=A.useState(!1),[l,d]=A.useState(null),[h,p]=A.useState(!0),[g,y]=A.useState(null),_=async()=>{if(l){s(!0),o(!1);try{const D=await Me.getAdvice();D.status==="disabled"?(d(!1),e(null)):e(D.advice??null)}catch(D){console.error(D),o(!0)}finally{s(!1)}}},j=async()=>{s(!0),o(!1);try{const D=await Me.analystRun();y(D)}catch(D){console.error("Failed to fetch analyst summary:",D),o(!0)}finally{s(!1)}};A.useEffect(()=>{Me.config().then(D=>{const R=D.advisor||{},E=R.enable_llm!==!1,B=R.auto_fetch!==!1;d(E),p(B),E&&B&&_(),E||j()}).catch(D=>{console.error("Failed to load advisor config:",D),d(!1)})},[]);const k=!!l&&!n,N=async()=>{const D=!h;p(D);try{await Me.configSave({advisor:{auto_fetch:D}}),D&&l&&!t&&_()}catch(R){console.error("Failed to update advisor auto_fetch setting:",R)}};return u.jsxs(Xe,{className:"h-full p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted",children:[u.jsx(GT,{className:"h-4 w-4 text-accent"}),u.jsx("span",{children:"Aurora Advisor"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[l&&u.jsx("button",{onClick:N,className:`rounded-pill px-2 py-1 text-[10px] font-medium transition ${h?"bg-accent text-canvas border border-accent":"bg-surface border border-line/60 text-muted hover:border-accent hover:text-accent"}`,title:h?"Disable auto-fetch (advisor runs only on manual request)":"Enable auto-fetch when the plan changes",children:""}),l!==null&&u.jsx("button",{onClick:_,disabled:!k,className:"text-[10px] text-muted hover:text-text transition-colors p-1 disabled:opacity-40",title:l?"Fetch latest advice":"Enable LLM advice in Settings",children:u.jsx($T,{className:`h-4 w-4 ${n?"animate-spin":""}`})})]})]}),u.jsxs("div",{className:"text-[11px] text-text leading-relaxed",children:[l===!1&&u.jsxs(u.Fragment,{children:[n&&u.jsx("span",{className:"animate-pulse",children:"Analyzing schedule (offline)"}),!n&&a&&u.jsx("span",{className:"text-red-400",children:"Unable to analyze schedule. Check backend logs for details."}),!n&&!a&&g&&g.recommendations&&u.jsx("div",{className:"space-y-2",children:Object.entries(g.recommendations).slice(0,3).map(([D,R])=>{const E=R??{},B=E.label||D,U=E.best_grid_window||{},$=E.best_solar_window||{},I=J=>J&&J.length>=16?J.slice(11,16):"",O=U.start&&U.end?`${I(U.start)}${I(U.end)} (${U.avg_price?.toFixed?.(2)??""} SEK/kWh)`:null,q=$.start&&$.end?`${I($.start)}${I($.end)} (${$.avg_pv_surplus?.toFixed?.(2)??""} kW surplus)`:null;return u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("div",{className:"font-medium",children:B}),u.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-muted",children:[O&&u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsx($i,{className:"h-3 w-3 text-accent"}),u.jsxs("span",{children:["Grid: ",O]})]}),q&&u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsx(XT,{className:"h-3 w-3 text-accent"}),u.jsxs("span",{children:["Solar: ",q]})]})]})]},D)})}),!n&&!a&&(!g||!g.recommendations)&&u.jsx("span",{className:"text-muted",children:"No appliance recommendations available. Configure appliances in Settings to see suggested run windows."})]}),l===!0&&u.jsxs(u.Fragment,{children:[n&&u.jsx("span",{className:"animate-pulse",children:"Analyzing schedule..."}),!n&&a&&u.jsx("span",{className:"text-red-400",children:"Unable to fetch advice. Check AI settings or try again."}),!n&&!a&&!t&&!h&&u.jsx("span",{className:"text-muted",children:"Click the refresh icon to analyze your current schedule."}),!n&&!a&&t&&u.jsx("span",{children:t})]}),l===null&&!n&&!a&&u.jsx("span",{className:"text-muted",children:"Loading advisor settings"})]})]})}const Dj=({value:t,total:e,colorClass:n})=>{const s=e>0?Math.min(100,t/e*100):0;return u.jsx("div",{className:"h-1.5 w-full bg-surface2 rounded-full overflow-hidden flex",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${n}`,style:{width:`${s}%`}})})};function uB({netCost:t,importKwh:e,exportKwh:n}){const s=(t??0)<=0;return u.jsxs(Xe,{className:"p-4 flex flex-col justify-between h-full relative overflow-hidden group",children:[u.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${s?"bg-emerald-500":"bg-red-500"}`}),u.jsxs("div",{className:"flex items-center gap-2 mb-3 relative z-10",children:[u.jsx("div",{className:`p-1.5 rounded-lg ${s?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:u.jsx(YT,{className:"h-4 w-4"})}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Grid & Financial"})]}),u.jsxs("div",{className:"mb-4 relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-0.5",children:"Net Daily Cost"}),u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:`text-2xl font-bold ${s?"text-emerald-400":"text-red-400"}`,children:t!=null?Math.abs(t).toFixed(2):""}),u.jsx("span",{className:"text-xs text-muted",children:"kr"}),t!==null&&u.jsx("span",{className:`text-[10px] ml-2 px-1.5 py-0.5 rounded ${s?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:t>0?"COST":"EARNING"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-auto relative z-10",children:[u.jsxs("div",{className:"p-2 rounded-lg bg-surface2/40 border border-line/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-red-300 mb-1",children:[u.jsx(wv,{className:"h-3 w-3"}),u.jsx("span",{className:"text-[10px]",children:"Import"})]}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[e?.toFixed(1)??""," ",u.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]}),u.jsxs("div",{className:"p-2 rounded-lg bg-surface2/40 border border-line/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-300 mb-1",children:[u.jsx(Sv,{className:"h-3 w-3"}),u.jsx("span",{className:"text-[10px]",children:"Export"})]}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[n?.toFixed(1)??""," ",u.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]})]})]})}function dB({pvActual:t,pvForecast:e,loadActual:n,loadAvg:s,waterKwh:a}){return u.jsxs(Xe,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-amber-500/[0.01]"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[u.jsx("div",{className:"p-1.5 rounded-lg bg-amber-500/10 text-amber-400",children:u.jsx($i,{className:"h-4 w-4"})}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Energy Resources"})]}),u.jsxs("div",{className:"space-y-4 relative z-10",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-amber-300",children:[u.jsx(Nv,{className:"h-3 w-3"}),u.jsx("span",{children:"Solar Production"})]}),u.jsxs("div",{className:"text-[10px] text-muted",children:[u.jsx("span",{className:"text-text font-medium",children:t?.toFixed(1)??""}),u.jsx("span",{className:"mx-1",children:"/"}),e?.toFixed(1)??""," kWh"]})]}),u.jsx(Dj,{value:t??0,total:e??1,colorClass:"bg-amber-400"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-purple-300",children:[u.jsx(Ju,{className:"h-3 w-3"}),u.jsx("span",{children:"House Load"})]}),u.jsxs("div",{className:"text-[10px] text-muted",children:[u.jsx("span",{className:"text-text font-medium",children:n?.toFixed(1)??""}),u.jsx("span",{className:"mx-1",children:"/"}),s?.toFixed(1)??""," kWh"]})]}),u.jsx(Dj,{value:n??0,total:s??1,colorClass:"bg-purple-400"})]}),u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-line/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-sky-300",children:[u.jsx(WT,{className:"h-3 w-3"}),u.jsx("span",{children:"Water Heating"})]}),u.jsxs("div",{className:"text-sm font-medium text-text",children:[a?.toFixed(1)??""," ",u.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]})]})]})}function hB({soc:t,socTarget:e,sIndex:n,cycles:s,riskLabel:a}){return u.jsxs(Xe,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-blue-500/[0.01]"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[u.jsx("div",{className:"p-1.5 rounded-lg bg-blue-500/10 text-blue-400",children:u.jsx(Uf,{className:"h-4 w-4"})}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Battery & Strategy"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[u.jsxs("div",{className:"col-span-2 flex items-center gap-3 p-3 rounded-xl bg-surface2/30 border border-line/30",children:[u.jsx(UT,{className:`h-8 w-8 ${(t??0)>50?"text-emerald-400":(t??0)>20?"text-amber-400":"text-red-400"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-text",children:[t?.toFixed(0)??"","%"]}),u.jsx("div",{className:"text-[10px] text-muted",children:e!=null?`Targeting ${e.toFixed(0)}%`:"Current SoC"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-1",children:"S-Index"}),u.jsx("div",{className:"text-lg font-semibold text-text",children:n?`x${n.toFixed(2)}`:""}),u.jsx("div",{className:"text-[10px] text-blue-300/80",children:"Strategy Factor"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-1",children:"Cycles"}),u.jsx("div",{className:"text-lg font-semibold text-text",children:s?.toFixed(1)??""}),u.jsx("div",{className:"text-[10px] text-muted",children:a||"Daily usage"})]})]})]})}function fB({comfortLevel:t,setComfortLevel:e,riskAppetite:n,setRiskAppetite:s,vacationMode:a,onWaterBoost:o,onBatteryTopUp:l}){return u.jsxs(Xe,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[u.jsx("div",{className:"absolute left-[19px] top-6 bottom-6 w-[1px] bg-line/30 z-0"}),u.jsxs("div",{className:"space-y-3 relative z-10",children:[u.jsxs("div",{className:"bg-surface2/30 rounded-xl p-3 border border-line/50 relative overflow-hidden group",children:[u.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-blue-500/50 to-purple-500/50"}),u.jsxs("div",{className:"flex justify-between items-baseline mb-2 pl-3",children:[u.jsxs("div",{className:"text-[10px] text-muted uppercase tracking-wider flex items-center gap-2",children:[u.jsx("span",{children:"Market Strategy"}),u.jsx("div",{className:`h-1.5 w-1.5 rounded-full transition-colors ${n>3?"bg-purple-400 shadow-[0_0_5px_rgba(192,132,252,0.8)]":n<2?"bg-emerald-400":"bg-blue-400"}`})]}),u.jsx("div",{className:"text-xs font-medium text-text",children:{1:"Safety",2:"Conservative",3:"Neutral",4:"Aggressive",5:"Gambler"}[n]||"Unknown"})]}),u.jsx("div",{className:"flex gap-1 h-8 pl-3",children:[1,2,3,4,5].map(d=>{const h={1:"bg-emerald-500/20 text-emerald-300 border-emerald-500/40 shadow-[0_0_10px_rgba(16,185,129,0.2)]",2:"bg-teal-500/20 text-teal-300 border-teal-500/40 shadow-[0_0_10px_rgba(20,184,166,0.2)]",3:"bg-blue-500/20 text-blue-300 border-blue-500/40 shadow-[0_0_10px_rgba(59,130,246,0.2)]",4:"bg-amber-500/20 text-amber-300 border-amber-500/40 shadow-[0_0_10px_rgba(245,158,11,0.2)]",5:"bg-purple-500/20 text-purple-300 border-purple-500/40 shadow-[0_0_10px_rgba(168,85,247,0.2)]"},p=n===d;return u.jsx("button",{onClick:()=>s(d),className:`flex-1 rounded transition-all duration-300 border text-xs font-medium ${p?`${h[d]} ring-1 ring-inset ring-white/5`:"bg-surface2/50 text-muted hover:bg-surface2 hover:text-text border-transparent hover:border-line/50"}`,children:d},d)})})]}),u.jsxs("div",{className:"bg-surface2/30 rounded-xl p-3 border border-line/50 relative overflow-hidden",children:[u.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-amber-500/50 to-red-500/50"}),u.jsxs("div",{className:"flex justify-between items-center mb-2 pl-3",children:[u.jsxs("div",{className:"text-[10px] text-muted uppercase tracking-wider flex items-center gap-2",children:[u.jsx("span",{children:"Water Comfort"}),a&&u.jsx("span",{className:"text-[9px] text-amber-300 bg-amber-500/20 px-1.5 rounded animate-pulse",children:"Vacation"})]}),u.jsx("div",{className:"text-xs font-medium text-text",children:{1:"Economy",2:"Balanced",3:"Neutral",4:"Priority",5:"Maximum"}[t]||"Unknown"})]}),u.jsx("div",{className:"flex gap-1 h-8 pl-3",children:[1,2,3,4,5].map(d=>{const h={1:"bg-emerald-500/20 text-emerald-300 border-emerald-500/40 shadow-[0_0_10px_rgba(16,185,129,0.2)]",2:"bg-teal-500/20 text-teal-300 border-teal-500/40 shadow-[0_0_10px_rgba(20,184,166,0.2)]",3:"bg-blue-500/20 text-blue-300 border-blue-500/40 shadow-[0_0_10px_rgba(59,130,246,0.2)]",4:"bg-amber-500/20 text-amber-300 border-amber-500/40 shadow-[0_0_10px_rgba(245,158,11,0.2)]",5:"bg-red-500/20 text-red-300 border-red-500/40 shadow-[0_0_10px_rgba(239,68,68,0.2)]"},p=t===d;return u.jsx("button",{onClick:()=>e(d),className:`flex-1 rounded transition-all duration-300 border text-xs font-medium ${p?`${h[d]} ring-1 ring-inset ring-white/5`:"bg-surface2/50 text-muted hover:bg-surface2 hover:text-text border-transparent hover:border-line/50"}`,children:d},d)})})]}),u.jsxs("div",{className:"bg-surface2/30 rounded-xl p-2 border border-line/50 flex gap-2 relative",children:[u.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-line/50"}),u.jsxs("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-surface hover:bg-surface2 border border-line/30 transition-all group ml-3",children:[u.jsx("div",{className:"p-1 rounded-full bg-orange-500/10 text-orange-400 group-hover:bg-orange-500/20 transition-colors",children:u.jsx(Tv,{className:"h-3.5 w-3.5"})}),u.jsx("span",{className:"text-[10px] font-medium text-text",children:"Boost Water (1h)"})]}),u.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-surface hover:bg-surface2 border border-line/30 transition-all group",children:[u.jsx("div",{className:"p-1 rounded-full bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20 transition-colors",children:u.jsx(xy,{className:"h-3.5 w-3.5"})}),u.jsx("span",{className:"text-[10px] font-medium text-text",children:"Top Up 50%"})]})]})]})]})}const Zi=Object.create(null);Zi.open="0";Zi.close="1";Zi.ping="2";Zi.pong="3";Zi.message="4";Zi.upgrade="5";Zi.noop="6";const Df=Object.create(null);Object.keys(Zi).forEach(t=>{Df[Zi[t]]=t});const Xy={type:"error",data:"parser error"},CM=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",EM=typeof ArrayBuffer=="function",AM=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,T0=({type:t,data:e},n,s)=>CM&&e instanceof Blob?n?s(e):Cj(e,s):EM&&(e instanceof ArrayBuffer||AM(e))?n?s(e):Cj(new Blob([e]),s):s(Zi[t]+(e||"")),Cj=(t,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(t)};function Ej(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Kx;function pB(t,e){if(CM&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ej).then(e);if(EM&&(t.data instanceof ArrayBuffer||AM(t.data)))return e(Ej(t.data));T0(t,!1,n=>{Kx||(Kx=new TextEncoder),e(Kx.encode(n))})}const Aj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Aj.length;t++)Vu[Aj.charCodeAt(t)]=t;const mB=t=>{let e=t.length*.75,n=t.length,s,a=0,o,l,d,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const p=new ArrayBuffer(e),g=new Uint8Array(p);for(s=0;s<n;s+=4)o=Vu[t.charCodeAt(s)],l=Vu[t.charCodeAt(s+1)],d=Vu[t.charCodeAt(s+2)],h=Vu[t.charCodeAt(s+3)],g[a++]=o<<2|l>>4,g[a++]=(l&15)<<4|d>>2,g[a++]=(d&3)<<6|h&63;return p},gB=typeof ArrayBuffer=="function",k0=(t,e)=>{if(typeof t!="string")return{type:"message",data:OM(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:xB(t.substring(1),e)}:Df[n]?t.length>1?{type:Df[n],data:t.substring(1)}:{type:Df[n]}:Xy},xB=(t,e)=>{if(gB){const n=mB(t);return OM(n,e)}else return{base64:!0,data:t}},OM=(t,e)=>e==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,RM="",yB=(t,e)=>{const n=t.length,s=new Array(n);let a=0;t.forEach((o,l)=>{T0(o,!1,d=>{s[l]=d,++a===n&&e(s.join(RM))})})},vB=(t,e)=>{const n=t.split(RM),s=[];for(let a=0;a<n.length;a++){const o=k0(n[a],e);if(s.push(o),o.type==="error")break}return s};function bB(){return new TransformStream({transform(t,e){pB(t,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(n)})}})}let Zx;function xf(t){return t.reduce((e,n)=>e+n.length,0)}function yf(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let s=0;for(let a=0;a<e;a++)n[a]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function _B(t,e){Zx||(Zx=new TextDecoder);const n=[];let s=0,a=-1,o=!1;return new TransformStream({transform(l,d){for(n.push(l);;){if(s===0){if(xf(n)<1)break;const h=yf(n,1);o=(h[0]&128)===128,a=h[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(xf(n)<2)break;const h=yf(n,2);a=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),s=3}else if(s===2){if(xf(n)<8)break;const h=yf(n,8),p=new DataView(h.buffer,h.byteOffset,h.length),g=p.getUint32(0);if(g>Math.pow(2,21)-1){d.enqueue(Xy);break}a=g*Math.pow(2,32)+p.getUint32(4),s=3}else{if(xf(n)<a)break;const h=yf(n,a);d.enqueue(k0(o?h:Zx.decode(h),e)),s=0}if(a===0||a>t){d.enqueue(Xy);break}}}})}const PM=4;function Rn(t){if(t)return wB(t)}function wB(t){for(var e in Rn.prototype)t[e]=Rn.prototype[e];return t}Rn.prototype.on=Rn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Rn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Rn.prototype.off=Rn.prototype.removeListener=Rn.prototype.removeAllListeners=Rn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===e||s.fn===e){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Rn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,e)}return this};Rn.prototype.emitReserved=Rn.prototype.emit;Rn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Rn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Lp=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),ai=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),SB="arraybuffer";function LM(t,...e){return e.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const jB=ai.setTimeout,TB=ai.clearTimeout;function zp(t,e){e.useNativeTimers?(t.setTimeoutFn=jB.bind(ai),t.clearTimeoutFn=TB.bind(ai)):(t.setTimeoutFn=ai.setTimeout.bind(ai),t.clearTimeoutFn=ai.clearTimeout.bind(ai))}const kB=1.33;function NB(t){return typeof t=="string"?MB(t):Math.ceil((t.byteLength||t.size)*kB)}function MB(t){let e=0,n=0;for(let s=0,a=t.length;s<a;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function zM(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function DB(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function CB(t){let e={},n=t.split("&");for(let s=0,a=n.length;s<a;s++){let o=n[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class EB extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class N0 extends Rn{constructor(e){super(),this.writable=!1,zp(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new EB(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=k0(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=DB(e);return n.length?"?"+n:""}}class AB extends N0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};vB(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,yB(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=zM()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let BM=!1;try{BM=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const OB=BM;function RB(){}class PB extends AB{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}class Ki extends Rn{constructor(e,n,s){super(),this.createRequest=e,zp(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=LM(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ki.requestsCount++,Ki.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=RB,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ki.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ki.requestsCount=0;Ki.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Oj);else if(typeof addEventListener=="function"){const t="onpagehide"in ai?"pagehide":"unload";addEventListener(t,Oj,!1)}}function Oj(){for(let t in Ki.requests)Ki.requests.hasOwnProperty(t)&&Ki.requests[t].abort()}const LB=(function(){const t=VM({xdomain:!1});return t&&t.responseType!==null})();class zB extends PB{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=LB&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ki(VM,this.uri(),e)}}function VM(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||OB))return new XMLHttpRequest}catch{}if(!e)try{return new ai[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const FM=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class BB extends N0{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=FM?{}:LM(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],a=n===e.length-1;T0(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}a&&Lp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=zM()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Qx=ai.WebSocket||ai.MozWebSocket;class VB extends BB{createSocket(e,n,s){return FM?new Qx(e,n,s):n?new Qx(e,n):new Qx(e)}doWrite(e,n){this.ws.send(n)}}class FB extends N0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=_B(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),a=bB();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const o=()=>{s.read().then(({done:d,value:h})=>{d||(this.onPacket(h),o())}).catch(d=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],a=n===e.length-1;this._writer.write(s).then(()=>{a&&Lp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const HB={websocket:VB,webtransport:FB,polling:zB},UB=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,IB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ky(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let a=UB.exec(t||""),o={},l=14;for(;l--;)o[IB[l]]=a[l]||"";return n!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=YB(o,o.path),o.queryKey=WB(o,o.query),o}function YB(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function WB(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,o){a&&(n[a]=o)}),n}const Zy=typeof addEventListener=="function"&&typeof removeEventListener=="function",Cf=[];Zy&&addEventListener("offline",()=>{Cf.forEach(t=>t())},!1);class Wr extends Rn{constructor(e,n){if(super(),this.binaryType=SB,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=Ky(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Ky(n.host).host);zp(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=CB(this.opts.query)),Zy&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=PM,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Wr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Wr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=NB(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Lp(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:n,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Wr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Zy&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Cf.indexOf(this._offlineEventListener);s!==-1&&Cf.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Wr.protocol=PM;class $B extends Wr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;Wr.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",y=>{if(!s)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Wr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(g(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=n.name,this.emitReserved("upgradeError",_)}}))};function o(){s||(s=!0,g(),n.close(),n=null)}const l=y=>{const _=new Error("probe error: "+y);_.transport=n.name,o(),this.emitReserved("upgradeError",_)};function d(){l("transport closed")}function h(){l("socket closed")}function p(y){n&&y.name!==n.name&&o()}const g=()=>{n.removeListener("open",a),n.removeListener("error",l),n.removeListener("close",d),this.off("close",h),this.off("upgrading",p)};n.once("open",a),n.once("error",l),n.once("close",d),this.once("close",h),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let qB=class extends $B{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>HB[a]).filter(a=>!!a)),super(e,s)}};function GB(t,e="",n){let s=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),s=Ky(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}const XB=typeof ArrayBuffer=="function",KB=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,HM=Object.prototype.toString,ZB=typeof Blob=="function"||typeof Blob<"u"&&HM.call(Blob)==="[object BlobConstructor]",QB=typeof File=="function"||typeof File<"u"&&HM.call(File)==="[object FileConstructor]";function M0(t){return XB&&(t instanceof ArrayBuffer||KB(t))||ZB&&t instanceof Blob||QB&&t instanceof File}function Ef(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(Ef(t[n]))return!0;return!1}if(M0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ef(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ef(t[n]))return!0;return!1}function JB(t){const e=[],n=t.data,s=t;return s.data=Qy(n,e),s.attachments=e.length,{packet:s,buffers:e}}function Qy(t,e){if(!t)return t;if(M0(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=Qy(t[s],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=Qy(t[s],e));return n}return t}function eV(t,e){return t.data=Jy(t.data,e),delete t.attachments,t}function Jy(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Jy(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Jy(t[n],e));return t}const UM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tV=5;var pt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pt||(pt={}));class nV{constructor(e){this.replacer=e}encode(e){return(e.type===pt.EVENT||e.type===pt.ACK)&&Ef(e)?this.encodeAsBinary({type:e.type===pt.EVENT?pt.BINARY_EVENT:pt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===pt.BINARY_EVENT||e.type===pt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=JB(e),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}class D0 extends Rn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===pt.BINARY_EVENT;s||n.type===pt.BINARY_ACK?(n.type=s?pt.EVENT:pt.ACK,this.reconstructor=new sV(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(M0(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(pt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===pt.BINARY_EVENT||s.type===pt.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const l=e.substring(o,n);if(l!=Number(l)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(o,n)}else s.nsp="/";const a=e.charAt(n+1);if(a!==""&&Number(a)==a){const o=n+1;for(;++n;){const l=e.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===e.length)break}s.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(D0.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case pt.CONNECT:return rp(n);case pt.DISCONNECT:return n===void 0;case pt.CONNECT_ERROR:return typeof n=="string"||rp(n);case pt.EVENT:case pt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&UM.indexOf(n[0])===-1);case pt.ACK:case pt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class sV{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=eV(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function iV(t){return typeof t=="string"}const aV=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function rV(t){return t===void 0||aV(t)}function rp(t){return Object.prototype.toString.call(t)==="[object Object]"}function oV(t,e){switch(t){case pt.CONNECT:return e===void 0||rp(e);case pt.DISCONNECT:return e===void 0;case pt.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&UM.indexOf(e[0])===-1);case pt.ACK:return Array.isArray(e);case pt.CONNECT_ERROR:return typeof e=="string"||rp(e);default:return!1}}function lV(t){return iV(t.nsp)&&rV(t.id)&&oV(t.type,t.data)}const cV=Object.freeze(Object.defineProperty({__proto__:null,Decoder:D0,Encoder:nV,get PacketType(){return pt},isPacketValid:lV,protocol:tV},Symbol.toStringTag,{value:"Module"}));function ji(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const uV=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class IM extends Rn{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ji(e,"open",this.onopen.bind(this)),ji(e,"packet",this.onpacket.bind(this)),ji(e,"error",this.onerror.bind(this)),ji(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,a,o;if(uV.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:pt.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const g=this.ids++,y=n.pop();this._registerAckCallback(g,y),l.id=g}const d=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,h=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!d||(h?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===e&&this.sendBuffer.splice(d,1);n.call(this,new Error("operation has timed out"))},a),l=(...d)=>{this.io.clearTimeoutFn(o),n.apply(this,d)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...n){return new Promise((s,a)=>{const o=(l,d)=>l?a(l):s(d);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...o)=>(this._queue[0],a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:pt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case pt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pt.EVENT:case pt.BINARY_EVENT:this.onevent(e);break;case pt.ACK:case pt.BINARY_ACK:this.onack(e);break;case pt.DISCONNECT:this.ondisconnect();break;case pt.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:pt.ACK,id:e,data:a}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function cc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}cc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};cc.prototype.reset=function(){this.attempts=0};cc.prototype.setMin=function(t){this.ms=t};cc.prototype.setMax=function(t){this.max=t};cc.prototype.setJitter=function(t){this.jitter=t};class ev extends Rn{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,zp(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new cc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const a=n.parser||cV;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new qB(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=ji(n,"open",function(){s.onopen(),e&&e()}),o=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),e?e(d):this.maybeReconnectOnOpen()},l=ji(n,"error",o);if(this._timeout!==!1){const d=this._timeout,h=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),n.close()},d);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(a),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ji(e,"ping",this.onping.bind(this)),ji(e,"data",this.ondata.bind(this)),ji(e,"error",this.onerror.bind(this)),ji(e,"close",this.onclose.bind(this)),ji(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Lp(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new IM(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Nu={};function Af(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=GB(t,e.path||"/socket.io"),s=n.source,a=n.id,o=n.path,l=Nu[a]&&o in Nu[a].nsps,d=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let h;return d?h=new ev(s,e):(Nu[a]||(Nu[a]=new ev(s,e)),h=Nu[a]),n.query&&!e.query&&(e.query=n.queryKey),h.socket(n.path,e)}Object.assign(Af,{Manager:ev,Socket:IM,io:Af,connect:Af});let Ol=null;const dV=()=>(Ol||(Ol=Af({path:"/socket.io",autoConnect:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),Ol.on("connect",()=>{console.log(" Connected to Darkstar WebSocket")}),Ol.on("disconnect",t=>{console.warn(" Disconnected from Darkstar WebSocket:",t)}),Ol.on("connect_error",t=>{console.error(" WebSocket connection error:",t)})),Ol),Ul=(t,e)=>{A.useEffect(()=>{const n=dV();return n.on(t,e),()=>{n.off(t,e)}},[t,e])};function Rj(t){if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${e}-${n}-${s} ${a}:${o}`}function hV(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState(null),[l,d]=A.useState(null),[h,p]=A.useState(null),[g,y]=A.useState("local"),[_,j]=A.useState(null),[k,N]=A.useState(null),[D,R]=A.useState(null),[E,B]=A.useState(null),[U,$]=A.useState(null),[I,O]=A.useState(3),[q,J]=A.useState(!1),[oe,ie]=A.useState(!1),[me,le]=A.useState(null),[Z,re]=A.useState(3),[H,X]=A.useState(null),[ne,ae]=A.useState(null),[xe,V]=A.useState(null),[ee,pe]=A.useState(!1),[F,de]=A.useState(null),[Se,Ie]=A.useState(!1),[tt,Te]=A.useState(null),[ft,xt]=A.useState(0),[_t,Bt]=A.useState(null),[Dt,st]=A.useState(null),[ln,Yn]=A.useState(!1),[Sn,cs]=A.useState(null),[Wn,ze]=A.useState(null),[wt,fn]=A.useState(null),[Ut,Cs]=A.useState(null),[lt,Vn]=A.useState(null),[gn,ui]=A.useState(null);Ul("live_metrics",Pe=>{Pe.soc!==void 0&&e(Pe.soc)}),Ul("plan_updated",()=>{console.log(" Plan updated! Refreshing data..."),Fn()}),Ul("executor_status",Pe=>{Vn({shadow_mode:Pe.shadow_mode??!1,paused:Pe.paused??null})}),Ul("ha_entity_change",Pe=>{if(Pe.entity_id===me){const gt=Pe.state==="on";ie(gt)}}),A.useEffect(()=>{const Pe=async()=>{try{const gt=await Me.config();if(gt.ok){const ye=(await gt.json()).water_heating?.vacation_mode;J(ye?.enabled||!1)}}catch(gt){console.log("Failed to reload vacation mode:",gt)}};return window.addEventListener("config-updated",Pe),()=>window.removeEventListener("config-updated",Pe)},[]);const Is=A.useCallback(Pe=>{y(Pe)},[]),Ci=A.useCallback(Pe=>{if(pe(!0),de(null),!Pe||Pe.length===0){V([]),pe(!1);return}Me.scheduleTodayWithHistory().then(gt=>{const fe=gt.slots??[],ye=new Map;fe.forEach(Oe=>{Oe.start_time&&ye.set(String(Oe.start_time),Oe)});const Ce=Pe.map(Oe=>{const je=Oe.start_time,Le=je?ye.get(String(je)):void 0;if(!Le)return Oe;const it=Le,We={...Oe};return it.soc_actual_percent!=null&&(We.soc_actual_percent=it.soc_actual_percent),it.is_executed===!0&&(We.is_executed=!0),We});V(Ce)}).catch(gt=>{console.error("Failed to merge history into server schedule:",gt),V(Pe??[]),de("Failed to merge execution history; showing DB plan only.")}).finally(()=>{pe(!1)})},[]),Fn=A.useCallback(async()=>{Ie(!0);let Pe=!1;try{const[gt,fe,ye,Ce,Oe,je,Le,it,We,Re,Yt]=await Promise.allSettled([Me.status(),Me.horizon(),Me.config(),Me.haAverage(),Me.schedule(),Me.haWaterToday(),Me.learningStatus(),Me.schedulerStatus(),Me.scheduleTodayWithHistory(),Me.executor.status(),Me.energyToday()]);if(gt.status==="fulfilled"){const He=gt.value;e(_x.socValue(He)??null);const jn=He.local??{},Ct=He.db&&"planned_at"in He.db?He.db:null,hs=jn?.planned_at||jn?.planner_version?{plannedAt:jn.planned_at,version:jn.planner_version,sIndex:jn.s_index}:null,vs=Ct?.planned_at||Ct?.planner_version?{plannedAt:Ct.planned_at,version:Ct.planner_version,sIndex:Ct.s_index}:null;o(hs),d(vs),p(hs||vs||null)}else Pe=!0,console.error("Failed to load status for Dashboard:",gt.reason);if(fe.status==="fulfilled"){const He=fe.value;s({pvDays:_x.pvDays(He)??void 0,weatherDays:_x.wxDays(He)??void 0})}else Pe=!0,console.error("Failed to load horizon for Dashboard:",fe.reason);if(ye.status==="fulfilled"){const He=ye.value;He.system?.battery?.capacity_kwh&&j(He.system.battery.capacity_kwh);const jn=He.arbitrage||{};if(ae({enabled:jn.enable_export,mode:jn.enable_peak_only_export?"peak_only":"passive"}),He.automation){const Ct=He.automation;st({enable_scheduler:Ct.enable_scheduler,write_to_mariadb:Ct.write_to_mariadb,external_executor_mode:Ct.external_executor_mode,every_minutes:Ct.schedule?.every_minutes??null})}else st(null);He.water_heating&&(typeof He.water_heating.comfort_level=="number"&&O(He.water_heating.comfort_level),typeof He.water_heating.vacation_mode?.enabled=="boolean"&&J(He.water_heating.vacation_mode.enabled)),He.input_sensors?.vacation_mode&&(le(He.input_sensors.vacation_mode),Me.haEntityState(He.input_sensors.vacation_mode).then(Ct=>{const hs=Ct.state==="on";ie(hs)}).catch(()=>{ie(!1)}))}else Pe=!0,console.error("Failed to load config for Dashboard:",ye.reason);if(Ce.status==="fulfilled"){const He=Ce.value;R({kw:He.average_load_kw,dailyKwh:He.daily_kwh})}else Pe=!0,console.error("Failed to load HA average for Dashboard:",Ce.reason);if(Oe.status==="fulfilled"){const He=Oe.value,jn=He.schedule??[];ze(jn);const Ct=new Date().toISOString().split("T")[0],vs=(He.schedule?.filter(fs=>fs.start_time?.startsWith(Ct))||[]).reduce((fs,Jt)=>fs+(Jt.pv_forecast_kwh||0),0);N(vs),He.meta?.last_error?Cs({message:He.meta.last_error,at:He.meta.last_error_at||""}):Cs(null);const fi=new Date,Pi=jn.find(fs=>{const Jt=new Date(fs.start_time||""),to=new Date(Jt.getTime()+1800*1e3);return fi>=Jt&&fi<to});Pi?.soc_target_percent!==void 0&&B(Pi.soc_target_percent)}else Pe=!0,console.error("Failed to load schedule for Dashboard:",Oe.reason);if(je.status==="fulfilled"){const He=je.value;$({kwh:He.water_kwh_today,source:He.source})}else Pe=!0,console.error("Failed to load water data for Dashboard:",je.reason);if(Le.status==="fulfilled"){const He=Le.value,jn=He.metrics?.total_slots&&He.metrics.total_slots>0,Ct=He.metrics?.completed_learning_runs&&He.metrics.completed_learning_runs>0;X({enabled:He.enabled,status:jn?Ct?"learning":"ready":"gathering",samples:He.metrics?.total_slots})}else Pe=!0,console.error("Failed to load learning status for Dashboard:",Le.reason);if(it.status==="fulfilled"){const He=it.value;cs({last_run_at:He.last_run_at??null,last_run_status:He.last_run_status??null,next_run_at:He.next_run_at??null})}else console.error("Failed to load scheduler status for Dashboard:",it.reason);if(We.status==="fulfilled"){const jn=We.value.slots??[];fn(jn)}else console.error("Failed to load schedule history for Dashboard:",We.reason);let ys=0;if(We.status==="fulfilled"&&We.value.slots){const He=new Date;He.setHours(0,0,0,0),We.value.slots.filter(Ct=>new Date(Ct.start_time)>=He).forEach(Ct=>{ys+=Ct.pv_forecast_kwh??0})}if(Re.status==="fulfilled"){const He=Re.value;Vn({shadow_mode:He.shadow_mode??!1,paused:He.paused??null})}else console.error("Failed to load executor status for Dashboard:",Re.reason);if(Yt.status==="fulfilled"){const He=Yt.value;ui({gridImport:He.grid_import_kwh,gridExport:He.grid_export_kwh,batteryCycles:He.battery_cycles,pvProduction:He.pv_production_kwh,pvForecast:Math.round(ys*10)/10,loadConsumption:He.load_consumption_kwh,netCost:He.net_cost_kr})}else console.error("Failed to load energy today for Dashboard:",Yt.reason);Te(new Date)}catch(gt){console.error("Error fetching dashboard data:",gt),Pe=!0}finally{Ie(!1),Bt(Pe?"Some dashboard data failed to load.":null),xt(gt=>gt+1)}},[]);A.useEffect(()=>{let Pe=null;g==="server"?Pe=l:Pe=a,p(Pe)},[g,a,l]),A.useEffect(()=>{Fn()},[Fn]);const ms=async()=>{if(ln)return;const gt=!(Dt?.enable_scheduler??!1);Yn(!0);try{await Me.configSave({automation:{enable_scheduler:gt}}),st(fe=>({enable_scheduler:gt,write_to_mariadb:fe?.write_to_mariadb,external_executor_mode:fe?.external_executor_mode,every_minutes:fe?.every_minutes??null}))}catch(fe){console.error("Failed to toggle planner automation:",fe)}finally{Yn(!1)}},[It,xn]=A.useState(!1),[Qt,us]=A.useState(null),Ei=async()=>{xn(!0),us(null);try{const Pe=await Me.loadServerPlan();Ci(Pe.schedule??[]),Is("server"),us({type:"success",message:"Plan loaded from DB"})}catch(Pe){us({type:"error",message:Pe instanceof Error?Pe.message:"Load failed"})}finally{xn(!1),setTimeout(()=>us(null),3e3)}},di=async()=>{xn(!0),us(null);try{await Me.pushToDb(),us({type:"success",message:"Plan pushed to DB"}),Fn()}catch(Pe){us({type:"error",message:Pe instanceof Error?Pe.message:"Push failed"})}finally{xn(!1),setTimeout(()=>us(null),3e3)}};let Pn;if(g==="server"&&xe&&xe.length>0)Pn=xe;else if(g==="local"&&Wn&&Wn.length>0){const Pe=Wn.filter(gt=>_d(gt.start_time)||Xo(gt.start_time));if(wt&&wt.length>0){const gt=Pe.filter(fe=>Xo(fe.start_time));Pn=[...wt,...gt]}else Pn=Pe}const Es=new Date;let As=g==="server"?"Server Plan":"Local Plan";h?.plannedAt&&(As=`Generated ${new Date(h.plannedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`);let ds="";if(Pn){const Pe=Pn.find(gt=>{const fe=new Date(gt.start_time),ye=new Date(fe.getTime()+1800*1e3);return Es>=fe&&Es<ye});if(Pe){const gt=new Date(new Date(Pe.start_time).getTime()+18e5),fe=Math.max(0,Math.floor((gt.getTime()-Es.getTime())/6e4));let ye="Idle";(Pe.charge_kw||0)>.1?ye=`Charge ${Pe.charge_kw?.toFixed(1)}kW`:(Pe.discharge_kw||0)>.1?ye=`Discharge ${Pe.discharge_kw?.toFixed(1)}kW`:(Pe.export_kw||0)>.1?ye=`Export ${Pe.export_kw?.toFixed(1)}kW`:(Pe.water_kw||0)>.1&&(ye="Heat Water"),ds=`  Next: ${ye} (${fe}m)`}}const Ys=`${As}${ds}`;t!==null&&`${t.toFixed(1)}`,n?.pvDays,n?.weatherDays;const gs=Sn?.last_run_at||a?.plannedAt||l?.plannedAt,Ai=gs?new Date(gs):null,Oi=Dt?.every_minutes&&Dt.every_minutes>0?Dt.every_minutes:null;let hi=null;Sn?.next_run_at?hi=new Date(Sn.next_run_at):Dt?.enable_scheduler&&Ai&&Oi&&(hi=new Date(Ai.getTime()+Oi*60*1e3));const xs=h?.sIndex?.effective_load_margin,Ri=h?.sIndex?.target_soc?.target_percent;return xs&&`${xs.toFixed(2)}`,Ri&&`${Ri.toFixed(0)}`,u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-6 sm:px-6 lg:pt-10 space-y-6",children:[Ut&&u.jsx(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-error p-4",children:u.jsxs("div",{className:"flex items-start justify-between gap-4 w-full",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 font-semibold text-sm mb-1",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Planner Error"})]}),u.jsx("div",{className:"opacity-80 text-xs",children:Ut.message}),Ut.at&&u.jsx("div",{className:"opacity-60 text-[10px] mt-1",children:new Date(Ut.at).toLocaleString()})]}),u.jsx("button",{onClick:()=>Cs(null),className:"opacity-60 hover:opacity-100 text-xs px-2 py-1",title:"Dismiss",children:""})]})}),lt?.shadow_mode&&u.jsxs(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-purple px-4 py-3",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"font-medium",children:"Shadow Mode Active"}),u.jsx("span",{className:"opacity-70 text-xs ml-2",children:" Actions logged but not executed on Home Assistant"})]}),lt?.paused&&u.jsxs(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-warning px-4 py-3",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"font-medium",children:"Executor Paused (Idle Mode)"}),lt.paused.paused_minutes!==void 0&&u.jsxs("span",{className:"opacity-70 text-xs ml-2",children:[" Paused for ",lt.paused.paused_minutes," minutes"]})]}),(q||oe)&&u.jsxs(Dr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-warning px-4 py-3",children:[u.jsx("span",{children:""}),u.jsx("span",{className:"font-medium",children:"Vacation Mode Active"}),u.jsx("span",{className:"opacity-70 text-xs ml-2",children:" Water heating is disabled"})]}),u.jsx(Dr.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:u.jsx(wd,{useHistoryForToday:g==="local",refreshToken:ft,slotsOverride:Pn,range:"48h",showDayToggle:!0})}),u.jsxs("div",{className:"grid gap-6 lg:grid-cols-3 items-stretch",children:[u.jsxs(Dr.div,{className:"h-full flex flex-col gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:[u.jsxs(Xe,{className:"p-3 flex items-center justify-between shrink-0",children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:Ys}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"text-[10px] text-muted",children:tt&&`Synced ${tt.toLocaleTimeString()}`}),_t&&u.jsx("div",{className:"text-[10px] text-amber-400",children:_t}),u.jsx("button",{onClick:()=>Fn(),disabled:Se,className:`rounded-pill px-2 py-1 text-[10px] font-medium transition ${Se?"bg-surface border border-line/60 text-muted cursor-not-allowed":"bg-surface border border-line/60 text-muted hover:border-accent hover:text-accent"}`,title:"Manual sync",children:u.jsx("span",{className:Se?"inline-block animate-spin":"",children:Se?"":""})})]})]}),u.jsx("div",{className:"flex-1 min-h-0",children:u.jsx(cB,{})})]}),u.jsx(Dr.div,{className:"h-full",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:u.jsx(fB,{comfortLevel:I,setComfortLevel:async Pe=>{O(Pe),await Me.configSave({water_heating:{comfort_level:Pe}})},riskAppetite:Z,setRiskAppetite:async Pe=>{re(Pe),await Me.configSave({s_index:{risk_appetite:Pe}})},vacationMode:q,onWaterBoost:async()=>{try{await Me.waterBoost.start(60),Fn()}catch(Pe){console.error("Boost failed",Pe)}},onBatteryTopUp:async()=>{try{await Me.executor.quickAction.set("force_charge",60),Fn()}catch(Pe){console.error("Top Up failed",Pe)}}})}),u.jsx(Dr.div,{className:"h-full",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"flex h-full flex-col gap-6",children:[u.jsx(Xe,{className:"flex-1 p-4 md:p-5",children:u.jsx(zP,{onDataRefresh:Fn,onPlanSourceChange:Is,onServerScheduleLoaded:Ci,onVacationModeChange:Pe=>J(Pe)})}),u.jsxs(Xe,{className:"flex-1 p-4 md:p-5",children:[u.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[u.jsx("div",{className:"text-sm text-muted",children:"Planner Automation"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-muted",children:[u.jsx("span",{className:`inline-flex h-2.5 w-2.5 rounded-full ${Dt?.enable_scheduler?"bg-emerald-400 shadow-[0_0_0_2px_rgba(16,185,129,0.4)]":"bg-line"}`}),u.jsx("span",{children:Dt?.enable_scheduler?"Active":"Disabled"})]}),u.jsx("button",{type:"button",onClick:ms,disabled:ln,className:"rounded-pill px-3 py-1 text-[10px] font-semibold border border-line/60 text-muted hover:border-accent hover:text-accent disabled:opacity-50 transition",children:Dt?.enable_scheduler?"Disable":"Enable"})]})]}),u.jsx("div",{className:"text-[11px] text-muted",children:Dt?.enable_scheduler?"Planner will auto-run on the configured schedule.":"Auto-planner is off. Use Quick Actions to run manually."}),u.jsxs("div",{className:"mt-2 space-y-1 text-[10px] text-muted",children:[u.jsxs("div",{children:["Last plan run: ",Rj(Ai)]}),u.jsxs("div",{children:["Next expected run:"," ",Dt?.enable_scheduler?Rj(hi):""]}),u.jsxs("div",{children:["DB sync: ",Dt?.write_to_mariadb?"enabled":"disabled"]})]})]}),Dt?.external_executor_mode&&u.jsxs(Xe,{className:"flex-1 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[u.jsx("div",{className:"text-sm text-muted",children:"DB Sync"}),u.jsx("div",{className:`text-[10px] ${Qt?.type==="success"?"text-green-400":"text-red-400"}`,children:Qt?.message})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[u.jsxs("button",{type:"button",onClick:Ei,disabled:It,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-[11px] font-semibold bg-surface2 border border-line/60 text-muted hover:border-accent hover:text-accent transition disabled:opacity-50",title:"Pull plan from MariaDB current_schedule table",children:[u.jsx(wv,{className:"h-4 w-4"}),u.jsx("span",{children:"Load from DB"})]}),u.jsxs("button",{type:"button",onClick:di,disabled:It,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-[11px] font-semibold bg-surface2 border border-line/60 text-muted hover:border-accent hover:text-accent transition disabled:opacity-50",title:"Push local schedule.json to MariaDB",children:[u.jsx(Sv,{className:"h-4 w-4"}),u.jsx("span",{children:"Push to DB"})]})]})]})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[u.jsx(uB,{netCost:gn?.netCost??null,importKwh:gn?.gridImport??null,exportKwh:gn?.gridExport??null}),u.jsx(dB,{pvActual:gn?.pvProduction??null,pvForecast:gn?.pvForecast??null,loadActual:gn?.loadConsumption??null,loadAvg:D?.dailyKwh??null,waterKwh:U?.kwh??null}),u.jsx(hB,{soc:t,socTarget:E,sIndex:h?.sIndex?.effective_load_margin??null,cycles:gn?.batteryCycles??null,riskLabel:{1:"Safety",2:"Conservative",3:"Neutral",4:"Aggressive",5:"Gambler"}[Z]})]})]})}var Of={exports:{}},fV=Of.exports,Pj;function pV(){return Pj||(Pj=1,(function(t,e){(function(n,s){t.exports=s()})(fV,(function(){var n=1e3,s=6e4,a=36e5,o="millisecond",l="second",d="minute",h="hour",p="day",g="week",y="month",_="quarter",j="year",k="date",N="Invalid Date",D=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Z){var re=["th","st","nd","rd"],H=Z%100;return"["+Z+(re[(H-20)%10]||re[H]||re[0])+"]"}},B=function(Z,re,H){var X=String(Z);return!X||X.length>=re?Z:""+Array(re+1-X.length).join(H)+Z},U={s:B,z:function(Z){var re=-Z.utcOffset(),H=Math.abs(re),X=Math.floor(H/60),ne=H%60;return(re<=0?"+":"-")+B(X,2,"0")+":"+B(ne,2,"0")},m:function Z(re,H){if(re.date()<H.date())return-Z(H,re);var X=12*(H.year()-re.year())+(H.month()-re.month()),ne=re.clone().add(X,y),ae=H-ne<0,xe=re.clone().add(X+(ae?-1:1),y);return+(-(X+(H-ne)/(ae?ne-xe:xe-ne))||0)},a:function(Z){return Z<0?Math.ceil(Z)||0:Math.floor(Z)},p:function(Z){return{M:y,y:j,w:g,d:p,D:k,h,m:d,s:l,ms:o,Q:_}[Z]||String(Z||"").toLowerCase().replace(/s$/,"")},u:function(Z){return Z===void 0}},$="en",I={};I[$]=E;var O="$isDayjsObject",q=function(Z){return Z instanceof me||!(!Z||!Z[O])},J=function Z(re,H,X){var ne;if(!re)return $;if(typeof re=="string"){var ae=re.toLowerCase();I[ae]&&(ne=ae),H&&(I[ae]=H,ne=ae);var xe=re.split("-");if(!ne&&xe.length>1)return Z(xe[0])}else{var V=re.name;I[V]=re,ne=V}return!X&&ne&&($=ne),ne||!X&&$},oe=function(Z,re){if(q(Z))return Z.clone();var H=typeof re=="object"?re:{};return H.date=Z,H.args=arguments,new me(H)},ie=U;ie.l=J,ie.i=q,ie.w=function(Z,re){return oe(Z,{locale:re.$L,utc:re.$u,x:re.$x,$offset:re.$offset})};var me=(function(){function Z(H){this.$L=J(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[O]=!0}var re=Z.prototype;return re.parse=function(H){this.$d=(function(X){var ne=X.date,ae=X.utc;if(ne===null)return new Date(NaN);if(ie.u(ne))return new Date;if(ne instanceof Date)return new Date(ne);if(typeof ne=="string"&&!/Z$/i.test(ne)){var xe=ne.match(D);if(xe){var V=xe[2]-1||0,ee=(xe[7]||"0").substring(0,3);return ae?new Date(Date.UTC(xe[1],V,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,ee)):new Date(xe[1],V,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,ee)}}return new Date(ne)})(H),this.init()},re.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},re.$utils=function(){return ie},re.isValid=function(){return this.$d.toString()!==N},re.isSame=function(H,X){var ne=oe(H);return this.startOf(X)<=ne&&ne<=this.endOf(X)},re.isAfter=function(H,X){return oe(H)<this.startOf(X)},re.isBefore=function(H,X){return this.endOf(X)<oe(H)},re.$g=function(H,X,ne){return ie.u(H)?this[X]:this.set(ne,H)},re.unix=function(){return Math.floor(this.valueOf()/1e3)},re.valueOf=function(){return this.$d.getTime()},re.startOf=function(H,X){var ne=this,ae=!!ie.u(X)||X,xe=ie.p(H),V=function(Te,ft){var xt=ie.w(ne.$u?Date.UTC(ne.$y,ft,Te):new Date(ne.$y,ft,Te),ne);return ae?xt:xt.endOf(p)},ee=function(Te,ft){return ie.w(ne.toDate()[Te].apply(ne.toDate("s"),(ae?[0,0,0,0]:[23,59,59,999]).slice(ft)),ne)},pe=this.$W,F=this.$M,de=this.$D,Se="set"+(this.$u?"UTC":"");switch(xe){case j:return ae?V(1,0):V(31,11);case y:return ae?V(1,F):V(0,F+1);case g:var Ie=this.$locale().weekStart||0,tt=(pe<Ie?pe+7:pe)-Ie;return V(ae?de-tt:de+(6-tt),F);case p:case k:return ee(Se+"Hours",0);case h:return ee(Se+"Minutes",1);case d:return ee(Se+"Seconds",2);case l:return ee(Se+"Milliseconds",3);default:return this.clone()}},re.endOf=function(H){return this.startOf(H,!1)},re.$set=function(H,X){var ne,ae=ie.p(H),xe="set"+(this.$u?"UTC":""),V=(ne={},ne[p]=xe+"Date",ne[k]=xe+"Date",ne[y]=xe+"Month",ne[j]=xe+"FullYear",ne[h]=xe+"Hours",ne[d]=xe+"Minutes",ne[l]=xe+"Seconds",ne[o]=xe+"Milliseconds",ne)[ae],ee=ae===p?this.$D+(X-this.$W):X;if(ae===y||ae===j){var pe=this.clone().set(k,1);pe.$d[V](ee),pe.init(),this.$d=pe.set(k,Math.min(this.$D,pe.daysInMonth())).$d}else V&&this.$d[V](ee);return this.init(),this},re.set=function(H,X){return this.clone().$set(H,X)},re.get=function(H){return this[ie.p(H)]()},re.add=function(H,X){var ne,ae=this;H=Number(H);var xe=ie.p(X),V=function(F){var de=oe(ae);return ie.w(de.date(de.date()+Math.round(F*H)),ae)};if(xe===y)return this.set(y,this.$M+H);if(xe===j)return this.set(j,this.$y+H);if(xe===p)return V(1);if(xe===g)return V(7);var ee=(ne={},ne[d]=s,ne[h]=a,ne[l]=n,ne)[xe]||1,pe=this.$d.getTime()+H*ee;return ie.w(pe,this)},re.subtract=function(H,X){return this.add(-1*H,X)},re.format=function(H){var X=this,ne=this.$locale();if(!this.isValid())return ne.invalidDate||N;var ae=H||"YYYY-MM-DDTHH:mm:ssZ",xe=ie.z(this),V=this.$H,ee=this.$m,pe=this.$M,F=ne.weekdays,de=ne.months,Se=ne.meridiem,Ie=function(ft,xt,_t,Bt){return ft&&(ft[xt]||ft(X,ae))||_t[xt].slice(0,Bt)},tt=function(ft){return ie.s(V%12||12,ft,"0")},Te=Se||function(ft,xt,_t){var Bt=ft<12?"AM":"PM";return _t?Bt.toLowerCase():Bt};return ae.replace(R,(function(ft,xt){return xt||(function(_t){switch(_t){case"YY":return String(X.$y).slice(-2);case"YYYY":return ie.s(X.$y,4,"0");case"M":return pe+1;case"MM":return ie.s(pe+1,2,"0");case"MMM":return Ie(ne.monthsShort,pe,de,3);case"MMMM":return Ie(de,pe);case"D":return X.$D;case"DD":return ie.s(X.$D,2,"0");case"d":return String(X.$W);case"dd":return Ie(ne.weekdaysMin,X.$W,F,2);case"ddd":return Ie(ne.weekdaysShort,X.$W,F,3);case"dddd":return F[X.$W];case"H":return String(V);case"HH":return ie.s(V,2,"0");case"h":return tt(1);case"hh":return tt(2);case"a":return Te(V,ee,!0);case"A":return Te(V,ee,!1);case"m":return String(ee);case"mm":return ie.s(ee,2,"0");case"s":return String(X.$s);case"ss":return ie.s(X.$s,2,"0");case"SSS":return ie.s(X.$ms,3,"0");case"Z":return xe}return null})(ft)||xe.replace(":","")}))},re.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},re.diff=function(H,X,ne){var ae,xe=this,V=ie.p(X),ee=oe(H),pe=(ee.utcOffset()-this.utcOffset())*s,F=this-ee,de=function(){return ie.m(xe,ee)};switch(V){case j:ae=de()/12;break;case y:ae=de();break;case _:ae=de()/3;break;case g:ae=(F-pe)/6048e5;break;case p:ae=(F-pe)/864e5;break;case h:ae=F/a;break;case d:ae=F/s;break;case l:ae=F/n;break;default:ae=F}return ne?ae:ie.a(ae)},re.daysInMonth=function(){return this.endOf(y).$D},re.$locale=function(){return I[this.$L]},re.locale=function(H,X){if(!H)return this.$L;var ne=this.clone(),ae=J(H,X,!0);return ae&&(ne.$L=ae),ne},re.clone=function(){return ie.w(this.$d,this)},re.toDate=function(){return new Date(this.valueOf())},re.toJSON=function(){return this.isValid()?this.toISOString():null},re.toISOString=function(){return this.$d.toISOString()},re.toString=function(){return this.$d.toUTCString()},Z})(),le=me.prototype;return oe.prototype=le,[["$ms",o],["$s",l],["$m",d],["$H",h],["$W",p],["$M",y],["$y",j],["$D",k]].forEach((function(Z){le[Z[1]]=function(re){return this.$g(re,Z[0],Z[1])}})),oe.extend=function(Z,re){return Z.$i||(Z(re,me,oe),Z.$i=!0),oe},oe.locale=J,oe.isDayjs=q,oe.unix=function(Z){return oe(1e3*Z)},oe.en=I[$],oe.Ls=I,oe.p={},oe}))})(Of)),Of.exports}var mV=pV();const Qi=vv(mV);function Lj(t){let e=0,n=0,s=!0;for(;t;)!t.offsetParent&&t.tagName==="BODY"&&t.scrollLeft===0&&t.scrollTop===0&&(t=document.scrollingElement||t),e+=t.offsetLeft-(s?0:t.scrollLeft)+t.clientLeft,n+=t.offsetTop-(s?0:t.scrollTop)+t.clientTop,t=t.offsetParent,s=!1;return{x:e,y:n}}function op(t){if(t===document.body)return{scrollLeft:0,scrollTop:0};{const e=op(t.parentNode);return{scrollLeft:t.scrollLeft+e.scrollLeft,scrollTop:t.scrollTop+e.scrollTop}}}function lp(t){if(t===document.body||!t.offsetParent)return{offsetLeft:0,offsetTop:0};{const e=lp(t.offsetParent);return{offsetLeft:t.offsetLeft+e.offsetLeft,offsetTop:t.offsetTop+e.offsetTop}}}var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cp={exports:{}};cp.exports;(function(t,e){(function(n,s){t.exports=s()})(Ho,function(){function n(x,m){var w=Object.keys(x);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(x);m&&(S=S.filter(function(T){return Object.getOwnPropertyDescriptor(x,T).enumerable})),w.push.apply(w,S)}return w}function s(x){for(var m=1;m<arguments.length;m++){var w=arguments[m]!=null?arguments[m]:{};m%2?n(Object(w),!0).forEach(function(S){h(x,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(w)):n(Object(w)).forEach(function(S){Object.defineProperty(x,S,Object.getOwnPropertyDescriptor(w,S))})}return x}function a(x){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},a(x)}function o(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function l(x,m){for(var w=0;w<m.length;w++){var S=m[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,N(S.key),S)}}function d(x,m,w){return m&&l(x.prototype,m),Object.defineProperty(x,"prototype",{writable:!1}),x}function h(x,m,w){return(m=N(m))in x?Object.defineProperty(x,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):x[m]=w,x}function p(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),m&&y(x,m)}function g(x){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},g(x)}function y(x,m){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,S){return w.__proto__=S,w},y(x,m)}function _(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function j(x){var m=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}})();return function(){var w,S=g(x);if(m){var T=g(this).constructor;w=Reflect.construct(S,arguments,T)}else w=S.apply(this,arguments);return(function(C,P){if(P&&(typeof P=="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(C)})(this,w)}}function k(){return k=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(x,m,w){var S=(function(C,P){for(;!Object.prototype.hasOwnProperty.call(C,P)&&(C=g(C))!==null;);return C})(x,m);if(S){var T=Object.getOwnPropertyDescriptor(S,m);return T.get?T.get.call(arguments.length<3?x:w):T.value}},k.apply(this,arguments)}function N(x){var m=(function(w,S){if(typeof w!="object"||w===null)return w;var T=w[Symbol.toPrimitive];if(T!==void 0){var C=T.call(w,S);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)})(x,"string");return typeof m=="symbol"?m:m+""}var D=function(x){return!(!x||!x.Window)&&x instanceof x.Window},R=void 0,E=void 0;function B(x){R=x;var m=x.document.createTextNode("");m.ownerDocument!==x.document&&typeof x.wrap=="function"&&x.wrap(m)===m&&(x=x.wrap(x)),E=x}function U(x){return D(x)?x:(x.ownerDocument||x).defaultView||E.window}typeof window<"u"&&window&&B(window);var $=function(x){return!!x&&a(x)==="object"},I=function(x){return typeof x=="function"},O={window:function(x){return x===E||D(x)},docFrag:function(x){return $(x)&&x.nodeType===11},object:$,func:I,number:function(x){return typeof x=="number"},bool:function(x){return typeof x=="boolean"},string:function(x){return typeof x=="string"},element:function(x){if(!x||a(x)!=="object")return!1;var m=U(x)||E;return/object|function/.test(typeof Element>"u"?"undefined":a(Element))?x instanceof Element||x instanceof m.Element:x.nodeType===1&&typeof x.nodeName=="string"},plainObject:function(x){return $(x)&&!!x.constructor&&/function Object\b/.test(x.constructor.toString())},array:function(x){return $(x)&&x.length!==void 0&&I(x.splice)}};function q(x){var m=x.interaction;if(m.prepared.name==="drag"){var w=m.prepared.axis;w==="x"?(m.coords.cur.page.y=m.coords.start.page.y,m.coords.cur.client.y=m.coords.start.client.y,m.coords.velocity.client.y=0,m.coords.velocity.page.y=0):w==="y"&&(m.coords.cur.page.x=m.coords.start.page.x,m.coords.cur.client.x=m.coords.start.client.x,m.coords.velocity.client.x=0,m.coords.velocity.page.x=0)}}function J(x){var m=x.iEvent,w=x.interaction;if(w.prepared.name==="drag"){var S=w.prepared.axis;if(S==="x"||S==="y"){var T=S==="x"?"y":"x";m.page[T]=w.coords.start.page[T],m.client[T]=w.coords.start.client[T],m.delta[T]=0}}}var oe={id:"actions/drag",install:function(x){var m=x.actions,w=x.Interactable,S=x.defaults;w.prototype.draggable=oe.draggable,m.map.drag=oe,m.methodDict.drag="draggable",S.actions.drag=oe.defaults},listeners:{"interactions:before-action-move":q,"interactions:action-resume":q,"interactions:action-move":J,"auto-start:check":function(x){var m=x.interaction,w=x.interactable,S=x.buttons,T=w.options.drag;if(T&&T.enabled&&(!m.pointerIsDown||!/mouse|pointer/.test(m.pointerType)||S&w.options.drag.mouseButtons))return x.action={name:"drag",axis:T.lockAxis==="start"?T.startAxis:T.lockAxis},!1}},draggable:function(x){return O.object(x)?(this.options.drag.enabled=x.enabled!==!1,this.setPerAction("drag",x),this.setOnEvents("drag",x),/^(xy|x|y|start)$/.test(x.lockAxis)&&(this.options.drag.lockAxis=x.lockAxis),/^(xy|x|y)$/.test(x.startAxis)&&(this.options.drag.startAxis=x.startAxis),this):O.bool(x)?(this.options.drag.enabled=x,this):this.options.drag},beforeMove:q,move:J,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(x){return x.search("drag")===0}},ie=oe,me={init:function(x){var m=x;me.document=m.document,me.DocumentFragment=m.DocumentFragment||le,me.SVGElement=m.SVGElement||le,me.SVGSVGElement=m.SVGSVGElement||le,me.SVGElementInstance=m.SVGElementInstance||le,me.Element=m.Element||le,me.HTMLElement=m.HTMLElement||me.Element,me.Event=m.Event,me.Touch=m.Touch||le,me.PointerEvent=m.PointerEvent||m.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function le(){}var Z=me,re={init:function(x){var m=Z.Element,w=x.navigator||{};re.supportsTouch="ontouchstart"in x||O.func(x.DocumentTouch)&&Z.document instanceof x.DocumentTouch,re.supportsPointerEvent=w.pointerEnabled!==!1&&!!Z.PointerEvent,re.isIOS=/iP(hone|od|ad)/.test(w.platform),re.isIOS7=/iP(hone|od|ad)/.test(w.platform)&&/OS 7[^\d]/.test(w.appVersion),re.isIe9=/MSIE 9/.test(w.userAgent),re.isOperaMobile=w.appName==="Opera"&&re.supportsTouch&&/Presto/.test(w.userAgent),re.prefixedMatchesSelector="matches"in m.prototype?"matches":"webkitMatchesSelector"in m.prototype?"webkitMatchesSelector":"mozMatchesSelector"in m.prototype?"mozMatchesSelector":"oMatchesSelector"in m.prototype?"oMatchesSelector":"msMatchesSelector",re.pEventTypes=re.supportsPointerEvent?Z.PointerEvent===x.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,re.wheelEvent=Z.document&&"onmousewheel"in Z.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},H=re;function X(x,m){if(x.contains)return x.contains(m);for(;m;){if(m===x)return!0;m=m.parentNode}return!1}function ne(x,m){for(;O.element(x);){if(xe(x,m))return x;x=ae(x)}return null}function ae(x){var m=x.parentNode;if(O.docFrag(m)){for(;(m=m.host)&&O.docFrag(m););return m}return m}function xe(x,m){return E!==R&&(m=m.replace(/\/deep\//g," ")),x[H.prefixedMatchesSelector](m)}var V=function(x){return x.parentNode||x.host};function ee(x,m){for(var w,S=[],T=x;(w=V(T))&&T!==m&&w!==T.ownerDocument;)S.unshift(T),T=w;return S}function pe(x,m,w){for(;O.element(x);){if(xe(x,m))return!0;if((x=ae(x))===w)return xe(x,m)}return!1}function F(x){return x.correspondingUseElement||x}function de(x){var m=x instanceof Z.SVGElement?x.getBoundingClientRect():x.getClientRects()[0];return m&&{left:m.left,right:m.right,top:m.top,bottom:m.bottom,width:m.width||m.right-m.left,height:m.height||m.bottom-m.top}}function Se(x){var m,w=de(x);if(!H.isIOS7&&w){var S={x:(m=(m=U(x))||E).scrollX||m.document.documentElement.scrollLeft,y:m.scrollY||m.document.documentElement.scrollTop};w.left+=S.x,w.right+=S.x,w.top+=S.y,w.bottom+=S.y}return w}function Ie(x){for(var m=[];x;)m.push(x),x=ae(x);return m}function tt(x){return!!O.string(x)&&(Z.document.querySelector(x),!0)}function Te(x,m){for(var w in m)x[w]=m[w];return x}function ft(x,m,w){return x==="parent"?ae(w):x==="self"?m.getRect(w):ne(w,x)}function xt(x,m,w,S){var T=x;return O.string(T)?T=ft(T,m,w):O.func(T)&&(T=T.apply(void 0,S)),O.element(T)&&(T=Se(T)),T}function _t(x){return x&&{x:"x"in x?x.x:x.left,y:"y"in x?x.y:x.top}}function Bt(x){return!x||"x"in x&&"y"in x||((x=Te({},x)).x=x.left||0,x.y=x.top||0,x.width=x.width||(x.right||0)-x.x,x.height=x.height||(x.bottom||0)-x.y),x}function Dt(x,m,w){x.left&&(m.left+=w.x),x.right&&(m.right+=w.x),x.top&&(m.top+=w.y),x.bottom&&(m.bottom+=w.y),m.width=m.right-m.left,m.height=m.bottom-m.top}function st(x,m,w){var S=w&&x.options[w];return _t(xt(S&&S.origin||x.options.origin,x,m,[x&&m]))||{x:0,y:0}}function ln(x,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(Y){return!0},S=arguments.length>3?arguments[3]:void 0;if(S=S||{},O.string(x)&&x.search(" ")!==-1&&(x=Yn(x)),O.array(x))return x.forEach(function(Y){return ln(Y,m,w,S)}),S;if(O.object(x)&&(m=x,x=""),O.func(m)&&w(x))S[x]=S[x]||[],S[x].push(m);else if(O.array(m))for(var T=0,C=m;T<C.length;T++){var P=C[T];ln(x,P,w,S)}else if(O.object(m))for(var z in m)ln(Yn(z).map(function(Y){return"".concat(x).concat(Y)}),m[z],w,S);return S}function Yn(x){return x.trim().split(/ +/)}var Sn=function(x,m){return Math.sqrt(x*x+m*m)},cs=["webkit","moz"];function Wn(x,m){x.__set||(x.__set={});var w=function(T){if(cs.some(function(C){return T.indexOf(C)===0}))return 1;typeof x[T]!="function"&&T!=="__set"&&Object.defineProperty(x,T,{get:function(){return T in x.__set?x.__set[T]:x.__set[T]=m[T]},set:function(C){x.__set[T]=C},configurable:!0})};for(var S in m)w(S);return x}function ze(x,m){x.page=x.page||{},x.page.x=m.page.x,x.page.y=m.page.y,x.client=x.client||{},x.client.x=m.client.x,x.client.y=m.client.y,x.timeStamp=m.timeStamp}function wt(x){x.page.x=0,x.page.y=0,x.client.x=0,x.client.y=0}function fn(x){return x instanceof Z.Event||x instanceof Z.Touch}function Ut(x,m,w){return x=x||"page",(w=w||{}).x=m[x+"X"],w.y=m[x+"Y"],w}function Cs(x,m){return m=m||{x:0,y:0},H.isOperaMobile&&fn(x)?(Ut("screen",x,m),m.x+=window.scrollX,m.y+=window.scrollY):Ut("page",x,m),m}function lt(x){return O.number(x.pointerId)?x.pointerId:x.identifier}function Vn(x,m,w){var S=m.length>1?ui(m):m[0];Cs(S,x.page),(function(T,C){C=C||{},H.isOperaMobile&&fn(T)?Ut("screen",T,C):Ut("client",T,C)})(S,x.client),x.timeStamp=w}function gn(x){var m=[];return O.array(x)?(m[0]=x[0],m[1]=x[1]):x.type==="touchend"?x.touches.length===1?(m[0]=x.touches[0],m[1]=x.changedTouches[0]):x.touches.length===0&&(m[0]=x.changedTouches[0],m[1]=x.changedTouches[1]):(m[0]=x.touches[0],m[1]=x.touches[1]),m}function ui(x){for(var m={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},w=0;w<x.length;w++){var S=x[w];for(var T in m)m[T]+=S[T]}for(var C in m)m[C]/=x.length;return m}function Is(x){if(!x.length)return null;var m=gn(x),w=Math.min(m[0].pageX,m[1].pageX),S=Math.min(m[0].pageY,m[1].pageY),T=Math.max(m[0].pageX,m[1].pageX),C=Math.max(m[0].pageY,m[1].pageY);return{x:w,y:S,left:w,top:S,right:T,bottom:C,width:T-w,height:C-S}}function Ci(x,m){var w=m+"X",S=m+"Y",T=gn(x),C=T[0][w]-T[1][w],P=T[0][S]-T[1][S];return Sn(C,P)}function Fn(x,m){var w=m+"X",S=m+"Y",T=gn(x),C=T[1][w]-T[0][w],P=T[1][S]-T[0][S];return 180*Math.atan2(P,C)/Math.PI}function ms(x){return O.string(x.pointerType)?x.pointerType:O.number(x.pointerType)?[void 0,void 0,"touch","pen","mouse"][x.pointerType]:/touch/.test(x.type||"")||x instanceof Z.Touch?"touch":"mouse"}function It(x){var m=O.func(x.composedPath)?x.composedPath():x.path;return[F(m?m[0]:x.target),F(x.currentTarget)]}var xn=(function(){function x(m){o(this,x),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=m}return d(x,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),x})();Object.defineProperty(xn.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Qt=function(x,m){for(var w=0;w<m.length;w++){var S=m[w];x.push(S)}return x},us=function(x){return Qt([],x)},Ei=function(x,m){for(var w=0;w<x.length;w++)if(m(x[w],w,x))return w;return-1},di=function(x,m){return x[Ei(x,m)]},Pn=(function(x){p(w,x);var m=j(w);function w(S,T,C){var P;o(this,w),(P=m.call(this,T._interaction)).dropzone=void 0,P.dragEvent=void 0,P.relatedTarget=void 0,P.draggable=void 0,P.propagationStopped=!1,P.immediatePropagationStopped=!1;var z=C==="dragleave"?S.prev:S.cur,Y=z.element,K=z.dropzone;return P.type=C,P.target=Y,P.currentTarget=Y,P.dropzone=K,P.dragEvent=T,P.relatedTarget=T.target,P.draggable=T.interactable,P.timeStamp=T.timeStamp,P}return d(w,[{key:"reject",value:function(){var S=this,T=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&T.cur.dropzone===this.dropzone&&T.cur.element===this.target)if(T.prev.dropzone=this.dropzone,T.prev.element=this.target,T.rejected=!0,T.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var C=T.activeDrops,P=Ei(C,function(Y){var K=Y.dropzone,W=Y.element;return K===S.dropzone&&W===S.target});T.activeDrops.splice(P,1);var z=new w(T,this.dragEvent,"dropdeactivate");z.dropzone=this.dropzone,z.target=this.target,this.dropzone.fire(z)}else this.dropzone.fire(new w(T,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),w})(xn);function Es(x,m){for(var w=0,S=x.slice();w<S.length;w++){var T=S[w],C=T.dropzone,P=T.element;m.dropzone=C,m.target=P,C.fire(m),m.propagationStopped=m.immediatePropagationStopped=!1}}function As(x,m){for(var w=(function(C,P){for(var z=[],Y=0,K=C.interactables.list;Y<K.length;Y++){var W=K[Y];if(W.options.drop.enabled){var te=W.options.drop.accept;if(!(O.element(te)&&te!==P||O.string(te)&&!xe(P,te)||O.func(te)&&!te({dropzone:W,draggableElement:P})))for(var ve=0,Ne=W.getAllElements();ve<Ne.length;ve++){var ke=Ne[ve];ke!==P&&z.push({dropzone:W,element:ke,rect:W.getRect(ke)})}}}return z})(x,m),S=0;S<w.length;S++){var T=w[S];T.rect=T.dropzone.getRect(T.element)}return w}function ds(x,m,w){for(var S=x.dropState,T=x.interactable,C=x.element,P=[],z=0,Y=S.activeDrops;z<Y.length;z++){var K=Y[z],W=K.dropzone,te=K.element,ve=K.rect,Ne=W.dropCheck(m,w,T,C,te,ve);P.push(Ne?te:null)}var ke=(function(De){for(var Ve,Be,Ye,nt=[],ct=0;ct<De.length;ct++){var Ke=De[ct],at=De[Ve];if(Ke&&ct!==Ve)if(at){var pn=V(Ke),Lt=V(at);if(pn!==Ke.ownerDocument)if(Lt!==Ke.ownerDocument)if(pn!==Lt){nt=nt.length?nt:ee(at);var qn=void 0;if(at instanceof Z.HTMLElement&&Ke instanceof Z.SVGElement&&!(Ke instanceof Z.SVGSVGElement)){if(Ke===Lt)continue;qn=Ke.ownerSVGElement}else qn=Ke;for(var _s=ee(qn,at.ownerDocument),Gn=0;_s[Gn]&&_s[Gn]===nt[Gn];)Gn++;var fo=[_s[Gn-1],_s[Gn],nt[Gn]];if(fo[0])for(var rr=fo[0].lastChild;rr;){if(rr===fo[1]){Ve=ct,nt=_s;break}if(rr===fo[2])break;rr=rr.previousSibling}}else Ye=at,(parseInt(U(Be=Ke).getComputedStyle(Be).zIndex,10)||0)>=(parseInt(U(Ye).getComputedStyle(Ye).zIndex,10)||0)&&(Ve=ct);else Ve=ct}else Ve=ct}return Ve})(P);return S.activeDrops[ke]||null}function Ys(x,m,w){var S=x.dropState,T={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return w.type==="dragstart"&&(T.activate=new Pn(S,w,"dropactivate"),T.activate.target=null,T.activate.dropzone=null),w.type==="dragend"&&(T.deactivate=new Pn(S,w,"dropdeactivate"),T.deactivate.target=null,T.deactivate.dropzone=null),S.rejected||(S.cur.element!==S.prev.element&&(S.prev.dropzone&&(T.leave=new Pn(S,w,"dragleave"),w.dragLeave=T.leave.target=S.prev.element,w.prevDropzone=T.leave.dropzone=S.prev.dropzone),S.cur.dropzone&&(T.enter=new Pn(S,w,"dragenter"),w.dragEnter=S.cur.element,w.dropzone=S.cur.dropzone)),w.type==="dragend"&&S.cur.dropzone&&(T.drop=new Pn(S,w,"drop"),w.dropzone=S.cur.dropzone,w.relatedTarget=S.cur.element),w.type==="dragmove"&&S.cur.dropzone&&(T.move=new Pn(S,w,"dropmove"),w.dropzone=S.cur.dropzone)),T}function gs(x,m){var w=x.dropState,S=w.activeDrops,T=w.cur,C=w.prev;m.leave&&C.dropzone.fire(m.leave),m.enter&&T.dropzone.fire(m.enter),m.move&&T.dropzone.fire(m.move),m.drop&&T.dropzone.fire(m.drop),m.deactivate&&Es(S,m.deactivate),w.prev.dropzone=T.dropzone,w.prev.element=T.element}function Ai(x,m){var w=x.interaction,S=x.iEvent,T=x.event;if(S.type==="dragmove"||S.type==="dragend"){var C=w.dropState;m.dynamicDrop&&(C.activeDrops=As(m,w.element));var P=S,z=ds(w,P,T);C.rejected=C.rejected&&!!z&&z.dropzone===C.cur.dropzone&&z.element===C.cur.element,C.cur.dropzone=z&&z.dropzone,C.cur.element=z&&z.element,C.events=Ys(w,0,P)}}var Oi={id:"actions/drop",install:function(x){var m=x.actions,w=x.interactStatic,S=x.Interactable,T=x.defaults;x.usePlugin(ie),S.prototype.dropzone=function(C){return(function(P,z){if(O.object(z)){if(P.options.drop.enabled=z.enabled!==!1,z.listeners){var Y=ln(z.listeners),K=Object.keys(Y).reduce(function(te,ve){return te[/^(enter|leave)/.test(ve)?"drag".concat(ve):/^(activate|deactivate|move)/.test(ve)?"drop".concat(ve):ve]=Y[ve],te},{}),W=P.options.drop.listeners;W&&P.off(W),P.on(K),P.options.drop.listeners=K}return O.func(z.ondrop)&&P.on("drop",z.ondrop),O.func(z.ondropactivate)&&P.on("dropactivate",z.ondropactivate),O.func(z.ondropdeactivate)&&P.on("dropdeactivate",z.ondropdeactivate),O.func(z.ondragenter)&&P.on("dragenter",z.ondragenter),O.func(z.ondragleave)&&P.on("dragleave",z.ondragleave),O.func(z.ondropmove)&&P.on("dropmove",z.ondropmove),/^(pointer|center)$/.test(z.overlap)?P.options.drop.overlap=z.overlap:O.number(z.overlap)&&(P.options.drop.overlap=Math.max(Math.min(1,z.overlap),0)),"accept"in z&&(P.options.drop.accept=z.accept),"checker"in z&&(P.options.drop.checker=z.checker),P}return O.bool(z)?(P.options.drop.enabled=z,P):P.options.drop})(this,C)},S.prototype.dropCheck=function(C,P,z,Y,K,W){return(function(te,ve,Ne,ke,De,Ve,Be){var Ye=!1;if(!(Be=Be||te.getRect(Ve)))return!!te.options.drop.checker&&te.options.drop.checker(ve,Ne,Ye,te,Ve,ke,De);var nt=te.options.drop.overlap;if(nt==="pointer"){var ct=st(ke,De,"drag"),Ke=Cs(ve);Ke.x+=ct.x,Ke.y+=ct.y;var at=Ke.x>Be.left&&Ke.x<Be.right,pn=Ke.y>Be.top&&Ke.y<Be.bottom;Ye=at&&pn}var Lt=ke.getRect(De);if(Lt&&nt==="center"){var qn=Lt.left+Lt.width/2,_s=Lt.top+Lt.height/2;Ye=qn>=Be.left&&qn<=Be.right&&_s>=Be.top&&_s<=Be.bottom}return Lt&&O.number(nt)&&(Ye=Math.max(0,Math.min(Be.right,Lt.right)-Math.max(Be.left,Lt.left))*Math.max(0,Math.min(Be.bottom,Lt.bottom)-Math.max(Be.top,Lt.top))/(Lt.width*Lt.height)>=nt),te.options.drop.checker&&(Ye=te.options.drop.checker(ve,Ne,Ye,te,Ve,ke,De)),Ye})(this,C,P,z,Y,K,W)},w.dynamicDrop=function(C){return O.bool(C)?(x.dynamicDrop=C,w):x.dynamicDrop},Te(m.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),m.methodDict.drop="dropzone",x.dynamicDrop=!1,T.actions.drop=Oi.defaults},listeners:{"interactions:before-action-start":function(x){var m=x.interaction;m.prepared.name==="drag"&&(m.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(x,m){var w=x.interaction,S=(x.event,x.iEvent);if(w.prepared.name==="drag"){var T=w.dropState;T.activeDrops=[],T.events={},T.activeDrops=As(m,w.element),T.events=Ys(w,0,S),T.events.activate&&(Es(T.activeDrops,T.events.activate),m.fire("actions/drop:start",{interaction:w,dragEvent:S}))}},"interactions:action-move":Ai,"interactions:after-action-move":function(x,m){var w=x.interaction,S=x.iEvent;if(w.prepared.name==="drag"){var T=w.dropState;gs(w,T.events),m.fire("actions/drop:move",{interaction:w,dragEvent:S}),T.events={}}},"interactions:action-end":function(x,m){if(x.interaction.prepared.name==="drag"){var w=x.interaction,S=x.iEvent;Ai(x,m),gs(w,w.dropState.events),m.fire("actions/drop:end",{interaction:w,dragEvent:S})}},"interactions:stop":function(x){var m=x.interaction;if(m.prepared.name==="drag"){var w=m.dropState;w&&(w.activeDrops=null,w.events=null,w.cur.dropzone=null,w.cur.element=null,w.prev.dropzone=null,w.prev.element=null,w.rejected=!1)}}},getActiveDrops:As,getDrop:ds,getDropEvents:Ys,fireDropEvents:gs,filterEventType:function(x){return x.search("drag")===0||x.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},hi=Oi;function xs(x){var m=x.interaction,w=x.iEvent,S=x.phase;if(m.prepared.name==="gesture"){var T=m.pointers.map(function(K){return K.pointer}),C=S==="start",P=S==="end",z=m.interactable.options.deltaSource;if(w.touches=[T[0],T[1]],C)w.distance=Ci(T,z),w.box=Is(T),w.scale=1,w.ds=0,w.angle=Fn(T,z),w.da=0,m.gesture.startDistance=w.distance,m.gesture.startAngle=w.angle;else if(P||m.pointers.length<2){var Y=m.prevEvent;w.distance=Y.distance,w.box=Y.box,w.scale=Y.scale,w.ds=0,w.angle=Y.angle,w.da=0}else w.distance=Ci(T,z),w.box=Is(T),w.scale=w.distance/m.gesture.startDistance,w.angle=Fn(T,z),w.ds=w.scale-m.gesture.scale,w.da=w.angle-m.gesture.angle;m.gesture.distance=w.distance,m.gesture.angle=w.angle,O.number(w.scale)&&w.scale!==1/0&&!isNaN(w.scale)&&(m.gesture.scale=w.scale)}}var Ri={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(x){var m=x.actions,w=x.Interactable,S=x.defaults;w.prototype.gesturable=function(T){return O.object(T)?(this.options.gesture.enabled=T.enabled!==!1,this.setPerAction("gesture",T),this.setOnEvents("gesture",T),this):O.bool(T)?(this.options.gesture.enabled=T,this):this.options.gesture},m.map.gesture=Ri,m.methodDict.gesture="gesturable",S.actions.gesture=Ri.defaults},listeners:{"interactions:action-start":xs,"interactions:action-move":xs,"interactions:action-end":xs,"interactions:new":function(x){x.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(x){if(!(x.interaction.pointers.length<2)){var m=x.interactable.options.gesture;if(m&&m.enabled)return x.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(x){return x.search("gesture")===0}},Pe=Ri;function gt(x,m,w,S,T,C,P){if(!m)return!1;if(m===!0){var z=O.number(C.width)?C.width:C.right-C.left,Y=O.number(C.height)?C.height:C.bottom-C.top;if(P=Math.min(P,Math.abs((x==="left"||x==="right"?z:Y)/2)),z<0&&(x==="left"?x="right":x==="right"&&(x="left")),Y<0&&(x==="top"?x="bottom":x==="bottom"&&(x="top")),x==="left"){var K=z>=0?C.left:C.right;return w.x<K+P}if(x==="top"){var W=Y>=0?C.top:C.bottom;return w.y<W+P}if(x==="right")return w.x>(z>=0?C.right:C.left)-P;if(x==="bottom")return w.y>(Y>=0?C.bottom:C.top)-P}return!!O.element(S)&&(O.element(m)?m===S:pe(S,m,T))}function fe(x){var m=x.iEvent,w=x.interaction;if(w.prepared.name==="resize"&&w.resizeAxes){var S=m;w.interactable.options.resize.square?(w.resizeAxes==="y"?S.delta.x=S.delta.y:S.delta.y=S.delta.x,S.axes="xy"):(S.axes=w.resizeAxes,w.resizeAxes==="x"?S.delta.y=0:w.resizeAxes==="y"&&(S.delta.x=0))}}var ye,Ce,Oe={id:"actions/resize",before:["actions/drag"],install:function(x){var m=x.actions,w=x.browser,S=x.Interactable,T=x.defaults;Oe.cursors=(function(C){return C.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}})(w),Oe.defaultMargin=w.supportsTouch||w.supportsPointerEvent?20:10,S.prototype.resizable=function(C){return(function(P,z,Y){return O.object(z)?(P.options.resize.enabled=z.enabled!==!1,P.setPerAction("resize",z),P.setOnEvents("resize",z),O.string(z.axis)&&/^x$|^y$|^xy$/.test(z.axis)?P.options.resize.axis=z.axis:z.axis===null&&(P.options.resize.axis=Y.defaults.actions.resize.axis),O.bool(z.preserveAspectRatio)?P.options.resize.preserveAspectRatio=z.preserveAspectRatio:O.bool(z.square)&&(P.options.resize.square=z.square),P):O.bool(z)?(P.options.resize.enabled=z,P):P.options.resize})(this,C,x)},m.map.resize=Oe,m.methodDict.resize="resizable",T.actions.resize=Oe.defaults},listeners:{"interactions:new":function(x){x.interaction.resizeAxes="xy"},"interactions:action-start":function(x){(function(m){var w=m.iEvent,S=m.interaction;if(S.prepared.name==="resize"&&S.prepared.edges){var T=w,C=S.rect;S._rects={start:Te({},C),corrected:Te({},C),previous:Te({},C),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},T.edges=S.prepared.edges,T.rect=S._rects.corrected,T.deltaRect=S._rects.delta}})(x),fe(x)},"interactions:action-move":function(x){(function(m){var w=m.iEvent,S=m.interaction;if(S.prepared.name==="resize"&&S.prepared.edges){var T=w,C=S.interactable.options.resize.invert,P=C==="reposition"||C==="negate",z=S.rect,Y=S._rects,K=Y.start,W=Y.corrected,te=Y.delta,ve=Y.previous;if(Te(ve,W),P){if(Te(W,z),C==="reposition"){if(W.top>W.bottom){var Ne=W.top;W.top=W.bottom,W.bottom=Ne}if(W.left>W.right){var ke=W.left;W.left=W.right,W.right=ke}}}else W.top=Math.min(z.top,K.bottom),W.bottom=Math.max(z.bottom,K.top),W.left=Math.min(z.left,K.right),W.right=Math.max(z.right,K.left);for(var De in W.width=W.right-W.left,W.height=W.bottom-W.top,W)te[De]=W[De]-ve[De];T.edges=S.prepared.edges,T.rect=W,T.deltaRect=te}})(x),fe(x)},"interactions:action-end":function(x){var m=x.iEvent,w=x.interaction;if(w.prepared.name==="resize"&&w.prepared.edges){var S=m;S.edges=w.prepared.edges,S.rect=w._rects.corrected,S.deltaRect=w._rects.delta}},"auto-start:check":function(x){var m=x.interaction,w=x.interactable,S=x.element,T=x.rect,C=x.buttons;if(T){var P=Te({},m.coords.cur.page),z=w.options.resize;if(z&&z.enabled&&(!m.pointerIsDown||!/mouse|pointer/.test(m.pointerType)||C&z.mouseButtons)){if(O.object(z.edges)){var Y={left:!1,right:!1,top:!1,bottom:!1};for(var K in Y)Y[K]=gt(K,z.edges[K],P,m._latestPointer.eventTarget,S,T,z.margin||Oe.defaultMargin);Y.left=Y.left&&!Y.right,Y.top=Y.top&&!Y.bottom,(Y.left||Y.right||Y.top||Y.bottom)&&(x.action={name:"resize",edges:Y})}else{var W=z.axis!=="y"&&P.x>T.right-Oe.defaultMargin,te=z.axis!=="x"&&P.y>T.bottom-Oe.defaultMargin;(W||te)&&(x.action={name:"resize",axes:(W?"x":"")+(te?"y":"")})}return!x.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(x){var m=x.edges,w=x.axis,S=x.name,T=Oe.cursors,C=null;if(w)C=T[S+w];else if(m){for(var P="",z=0,Y=["top","bottom","left","right"];z<Y.length;z++){var K=Y[z];m[K]&&(P+=K)}C=T[P]}return C},filterEventType:function(x){return x.search("resize")===0},defaultMargin:null},je=Oe,Le={id:"actions",install:function(x){x.usePlugin(Pe),x.usePlugin(je),x.usePlugin(ie),x.usePlugin(hi)}},it=0,We={request:function(x){return ye(x)},cancel:function(x){return Ce(x)},init:function(x){if(ye=x.requestAnimationFrame,Ce=x.cancelAnimationFrame,!ye)for(var m=["ms","moz","webkit","o"],w=0;w<m.length;w++){var S=m[w];ye=x["".concat(S,"RequestAnimationFrame")],Ce=x["".concat(S,"CancelAnimationFrame")]||x["".concat(S,"CancelRequestAnimationFrame")]}ye=ye&&ye.bind(x),Ce=Ce&&Ce.bind(x),ye||(ye=function(T){var C=Date.now(),P=Math.max(0,16-(C-it)),z=x.setTimeout(function(){T(C+P)},P);return it=C+P,z},Ce=function(T){return clearTimeout(T)})}},Re={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(x){Re.isScrolling=!0,We.cancel(Re.i),x.autoScroll=Re,Re.interaction=x,Re.prevTime=Re.now(),Re.i=We.request(Re.scroll)},stop:function(){Re.isScrolling=!1,Re.interaction&&(Re.interaction.autoScroll=null),We.cancel(Re.i)},scroll:function(){var x=Re.interaction,m=x.interactable,w=x.element,S=x.prepared.name,T=m.options[S].autoScroll,C=Yt(T.container,m,w),P=Re.now(),z=(P-Re.prevTime)/1e3,Y=T.speed*z;if(Y>=1){var K={x:Re.x*Y,y:Re.y*Y};if(K.x||K.y){var W=ys(C);O.window(C)?C.scrollBy(K.x,K.y):C&&(C.scrollLeft+=K.x,C.scrollTop+=K.y);var te=ys(C),ve={x:te.x-W.x,y:te.y-W.y};(ve.x||ve.y)&&m.fire({type:"autoscroll",target:w,interactable:m,delta:ve,interaction:x,container:C})}Re.prevTime=P}Re.isScrolling&&(We.cancel(Re.i),Re.i=We.request(Re.scroll))},check:function(x,m){var w;return(w=x.options[m].autoScroll)==null?void 0:w.enabled},onInteractionMove:function(x){var m=x.interaction,w=x.pointer;if(m.interacting()&&Re.check(m.interactable,m.prepared.name))if(m.simulation)Re.x=Re.y=0;else{var S,T,C,P,z=m.interactable,Y=m.element,K=m.prepared.name,W=z.options[K].autoScroll,te=Yt(W.container,z,Y);if(O.window(te))P=w.clientX<Re.margin,S=w.clientY<Re.margin,T=w.clientX>te.innerWidth-Re.margin,C=w.clientY>te.innerHeight-Re.margin;else{var ve=de(te);P=w.clientX<ve.left+Re.margin,S=w.clientY<ve.top+Re.margin,T=w.clientX>ve.right-Re.margin,C=w.clientY>ve.bottom-Re.margin}Re.x=T?1:P?-1:0,Re.y=C?1:S?-1:0,Re.isScrolling||(Re.margin=W.margin,Re.speed=W.speed,Re.start(m))}}};function Yt(x,m,w){return(O.string(x)?ft(x,m,w):x)||U(w)}function ys(x){return O.window(x)&&(x=window.document.body),{x:x.scrollLeft,y:x.scrollTop}}var He={id:"auto-scroll",install:function(x){var m=x.defaults,w=x.actions;x.autoScroll=Re,Re.now=function(){return x.now()},w.phaselessTypes.autoscroll=!0,m.perAction.autoScroll=Re.defaults},listeners:{"interactions:new":function(x){x.interaction.autoScroll=null},"interactions:destroy":function(x){x.interaction.autoScroll=null,Re.stop(),Re.interaction&&(Re.interaction=null)},"interactions:stop":Re.stop,"interactions:action-move":function(x){return Re.onInteractionMove(x)}}},jn=He;function Ct(x,m){var w=!1;return function(){return w||(E.console.warn(m),w=!0),x.apply(this,arguments)}}function hs(x,m){return x.name=m.name,x.axis=m.axis,x.edges=m.edges,x}function vs(x){return O.bool(x)?(this.options.styleCursor=x,this):x===null?(delete this.options.styleCursor,this):this.options.styleCursor}function fi(x){return O.func(x)?(this.options.actionChecker=x,this):x===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Pi={id:"auto-start/interactableMethods",install:function(x){var m=x.Interactable;m.prototype.getAction=function(w,S,T,C){var P=(function(z,Y,K,W,te){var ve=z.getRect(W),Ne=Y.buttons||{0:1,1:4,3:8,4:16}[Y.button],ke={action:null,interactable:z,interaction:K,element:W,rect:ve,buttons:Ne};return te.fire("auto-start:check",ke),ke.action})(this,S,T,C,x);return this.options.actionChecker?this.options.actionChecker(w,S,P,this,C,T):P},m.prototype.ignoreFrom=Ct(function(w){return this._backCompatOption("ignoreFrom",w)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),m.prototype.allowFrom=Ct(function(w){return this._backCompatOption("allowFrom",w)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),m.prototype.actionChecker=fi,m.prototype.styleCursor=vs}};function fs(x,m,w,S,T){return m.testIgnoreAllow(m.options[x.name],w,S)&&m.options[x.name].enabled&&Ws(m,w,x,T)?x:null}function Jt(x,m,w,S,T,C,P){for(var z=0,Y=S.length;z<Y;z++){var K=S[z],W=T[z],te=K.getAction(m,w,x,W);if(te){var ve=fs(te,K,W,C,P);if(ve)return{action:ve,interactable:K,element:W}}}return{action:null,interactable:null,element:null}}function to(x,m,w,S,T){var C=[],P=[],z=S;function Y(W){C.push(W),P.push(z)}for(;O.element(z);){C=[],P=[],T.interactables.forEachMatch(z,Y);var K=Jt(x,m,w,C,P,S,T);if(K.action&&!K.interactable.options[K.action.name].manualStart)return K;z=ae(z)}return{action:null,interactable:null,element:null}}function vc(x,m,w){var S=m.action,T=m.interactable,C=m.element;S=S||{name:null},x.interactable=T,x.element=C,hs(x.prepared,S),x.rect=T&&S.name?T.getRect(C):null,_c(x,w),w.fire("autoStart:prepared",{interaction:x})}function Ws(x,m,w,S){var T=x.options,C=T[w.name].max,P=T[w.name].maxPerElement,z=S.autoStart.maxInteractions,Y=0,K=0,W=0;if(!(C&&P&&z))return!1;for(var te=0,ve=S.interactions.list;te<ve.length;te++){var Ne=ve[te],ke=Ne.prepared.name;if(Ne.interacting()&&(++Y>=z||Ne.interactable===x&&((K+=ke===w.name?1:0)>=C||Ne.element===m&&(W++,ke===w.name&&W>=P))))return!1}return z>0}function na(x,m){return O.number(x)?(m.autoStart.maxInteractions=x,this):m.autoStart.maxInteractions}function bc(x,m,w){var S=w.autoStart.cursorElement;S&&S!==x&&(S.style.cursor=""),x.ownerDocument.documentElement.style.cursor=m,x.style.cursor=m,w.autoStart.cursorElement=m?x:null}function _c(x,m){var w=x.interactable,S=x.element,T=x.prepared;if(x.pointerType==="mouse"&&w&&w.options.styleCursor){var C="";if(T.name){var P=w.options[T.name].cursorChecker;C=O.func(P)?P(T,w,S,x._interacting):m.actions.map[T.name].getCursor(T)}bc(x.element,C||"",m)}else m.autoStart.cursorElement&&bc(m.autoStart.cursorElement,"",m)}var Ad={id:"auto-start/base",before:["actions"],install:function(x){var m=x.interactStatic,w=x.defaults;x.usePlugin(Pi),w.base.actionChecker=null,w.base.styleCursor=!0,Te(w.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),m.maxInteractions=function(S){return na(S,x)},x.autoStart={maxInteractions:1/0,withinInteractionLimit:Ws,cursorElement:null}},listeners:{"interactions:down":function(x,m){var w=x.interaction,S=x.pointer,T=x.event,C=x.eventTarget;w.interacting()||vc(w,to(w,S,T,C,m),m)},"interactions:move":function(x,m){(function(w,S){var T=w.interaction,C=w.pointer,P=w.event,z=w.eventTarget;T.pointerType!=="mouse"||T.pointerIsDown||T.interacting()||vc(T,to(T,C,P,z,S),S)})(x,m),(function(w,S){var T=w.interaction;if(T.pointerIsDown&&!T.interacting()&&T.pointerWasMoved&&T.prepared.name){S.fire("autoStart:before-start",w);var C=T.interactable,P=T.prepared.name;P&&C&&(C.options[P].manualStart||!Ws(C,T.element,T.prepared,S)?T.stop():(T.start(T.prepared,C,T.element),_c(T,S)))}})(x,m)},"interactions:stop":function(x,m){var w=x.interaction,S=w.interactable;S&&S.options.styleCursor&&bc(w.element,"",m)}},maxInteractions:na,withinInteractionLimit:Ws,validateAction:fs},wc=Ad,el={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(x,m){var w=x.interaction,S=x.eventTarget,T=x.dx,C=x.dy;if(w.prepared.name==="drag"){var P=Math.abs(T),z=Math.abs(C),Y=w.interactable.options.drag,K=Y.startAxis,W=P>z?"x":P<z?"y":"xy";if(w.prepared.axis=Y.lockAxis==="start"?W[0]:Y.lockAxis,W!=="xy"&&K!=="xy"&&K!==W){w.prepared.name=null;for(var te=S,ve=function(ke){if(ke!==w.interactable){var De=w.interactable.options.drag;if(!De.manualStart&&ke.testIgnoreAllow(De,te,S)){var Ve=ke.getAction(w.downPointer,w.downEvent,w,te);if(Ve&&Ve.name==="drag"&&(function(Be,Ye){if(!Ye)return!1;var nt=Ye.options.drag.startAxis;return Be==="xy"||nt==="xy"||nt===Be})(W,ke)&&wc.validateAction(Ve,ke,te,S,m))return ke}}};O.element(te);){var Ne=m.interactables.forEachMatch(te,ve);if(Ne){w.prepared.name="drag",w.interactable=Ne,w.element=te;break}te=ae(te)}}}}}};function Xa(x){var m=x.prepared&&x.prepared.name;if(!m)return null;var w=x.interactable.options;return w[m].hold||w[m].delay}var pi={id:"auto-start/hold",install:function(x){var m=x.defaults;x.usePlugin(wc),m.perAction.hold=0,m.perAction.delay=0},listeners:{"interactions:new":function(x){x.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(x){var m=x.interaction,w=Xa(m);w>0&&(m.autoStartHoldTimer=setTimeout(function(){m.start(m.prepared,m.interactable,m.element)},w))},"interactions:move":function(x){var m=x.interaction,w=x.duplicate;m.autoStartHoldTimer&&m.pointerWasMoved&&!w&&(clearTimeout(m.autoStartHoldTimer),m.autoStartHoldTimer=null)},"autoStart:before-start":function(x){var m=x.interaction;Xa(m)>0&&(m.prepared.name=null)}},getHoldDuration:Xa},bs=pi,Od={id:"auto-start",install:function(x){x.usePlugin(wc),x.usePlugin(bs),x.usePlugin(el)}},sm=function(x){return/^(always|never|auto)$/.test(x)?(this.options.preventDefault=x,this):O.bool(x)?(this.options.preventDefault=x?"always":"never",this):this.options.preventDefault};function Sc(x){var m=x.interaction,w=x.event;m.interactable&&m.interactable.checkAndPreventDefault(w)}var jc={id:"core/interactablePreventDefault",install:function(x){var m=x.Interactable;m.prototype.preventDefault=sm,m.prototype.checkAndPreventDefault=function(w){return(function(S,T,C){var P=S.options.preventDefault;if(P!=="never")if(P!=="always"){if(T.events.supportsPassive&&/^touch(start|move)$/.test(C.type)){var z=U(C.target).document,Y=T.getDocOptions(z);if(!Y||!Y.events||Y.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(C.type)||O.element(C.target)&&xe(C.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||C.preventDefault()}else C.preventDefault()})(this,x,w)},x.interactions.docEvents.push({type:"dragstart",listener:function(w){for(var S=0,T=x.interactions.list;S<T.length;S++){var C=T[S];if(C.element&&(C.element===w.target||X(C.element,w.target)))return void C.interactable.checkAndPreventDefault(w)}}})},listeners:["down","move","up","cancel"].reduce(function(x,m){return x["interactions:".concat(m)]=Sc,x},{})};function sa(x,m){if(m.phaselessTypes[x])return!0;for(var w in m.map)if(x.indexOf(w)===0&&x.substr(w.length)in m.phases)return!0;return!1}function Ka(x){var m={};for(var w in x){var S=x[w];O.plainObject(S)?m[w]=Ka(S):O.array(S)?m[w]=us(S):m[w]=S}return m}var es=(function(){function x(m){o(this,x),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=m,this.result=Za(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return d(x,[{key:"start",value:function(m,w){var S,T,C=m.phase,P=this.interaction,z=(function(K){var W=K.interactable.options[K.prepared.name],te=W.modifiers;return te&&te.length?te:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ve){var Ne=W[ve];return Ne&&Ne.enabled&&{options:Ne,methods:Ne._methods}}).filter(function(ve){return!!ve})})(P);this.prepareStates(z),this.startEdges=Te({},P.edges),this.edges=Te({},this.startEdges),this.startOffset=(S=P.rect,T=w,S?{left:T.x-S.left,top:T.y-S.top,right:S.right-T.x,bottom:S.bottom-T.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var Y=this.fillArg({phase:C,pageCoords:w,preEnd:!1});return this.result=Za(),this.startAll(Y),this.result=this.setAll(Y)}},{key:"fillArg",value:function(m){var w=this.interaction;return m.interaction=w,m.interactable=w.interactable,m.element=w.element,m.rect||(m.rect=w.rect),m.edges||(m.edges=this.startEdges),m.startOffset=this.startOffset,m}},{key:"startAll",value:function(m){for(var w=0,S=this.states;w<S.length;w++){var T=S[w];T.methods.start&&(m.state=T,T.methods.start(m))}}},{key:"setAll",value:function(m){var w=m.phase,S=m.preEnd,T=m.skipModifiers,C=m.rect,P=m.edges;m.coords=Te({},m.pageCoords),m.rect=Te({},C),m.edges=Te({},P);for(var z=T?this.states.slice(T):this.states,Y=Za(m.coords,m.rect),K=0;K<z.length;K++){var W,te=z[K],ve=te.options,Ne=Te({},m.coords),ke=null;(W=te.methods)!=null&&W.set&&this.shouldDo(ve,S,w)&&(m.state=te,ke=te.methods.set(m),Dt(m.edges,m.rect,{x:m.coords.x-Ne.x,y:m.coords.y-Ne.y})),Y.eventProps.push(ke)}Te(this.edges,m.edges),Y.delta.x=m.coords.x-m.pageCoords.x,Y.delta.y=m.coords.y-m.pageCoords.y,Y.rectDelta.left=m.rect.left-C.left,Y.rectDelta.right=m.rect.right-C.right,Y.rectDelta.top=m.rect.top-C.top,Y.rectDelta.bottom=m.rect.bottom-C.bottom;var De=this.result.coords,Ve=this.result.rect;if(De&&Ve){var Be=Y.rect.left!==Ve.left||Y.rect.right!==Ve.right||Y.rect.top!==Ve.top||Y.rect.bottom!==Ve.bottom;Y.changed=Be||De.x!==Y.coords.x||De.y!==Y.coords.y}return Y}},{key:"applyToInteraction",value:function(m){var w=this.interaction,S=m.phase,T=w.coords.cur,C=w.coords.start,P=this.result,z=this.startDelta,Y=P.delta;S==="start"&&Te(this.startDelta,P.delta);for(var K=0,W=[[C,z],[T,Y]];K<W.length;K++){var te=W[K],ve=te[0],Ne=te[1];ve.page.x+=Ne.x,ve.page.y+=Ne.y,ve.client.x+=Ne.x,ve.client.y+=Ne.y}var ke=this.result.rectDelta,De=m.rect||w.rect;De.left+=ke.left,De.right+=ke.right,De.top+=ke.top,De.bottom+=ke.bottom,De.width=De.right-De.left,De.height=De.bottom-De.top}},{key:"setAndApply",value:function(m){var w=this.interaction,S=m.phase,T=m.preEnd,C=m.skipModifiers,P=this.setAll(this.fillArg({preEnd:T,phase:S,pageCoords:m.modifiedCoords||w.coords.cur.page}));if(this.result=P,!P.changed&&(!C||C<this.states.length)&&w.interacting())return!1;if(m.modifiedCoords){var z=w.coords.cur.page,Y={x:m.modifiedCoords.x-z.x,y:m.modifiedCoords.y-z.y};P.coords.x+=Y.x,P.coords.y+=Y.y,P.delta.x+=Y.x,P.delta.y+=Y.y}this.applyToInteraction(m)}},{key:"beforeEnd",value:function(m){var w=m.interaction,S=m.event,T=this.states;if(T&&T.length){for(var C=!1,P=0;P<T.length;P++){var z=T[P];m.state=z;var Y=z.options,K=z.methods,W=K.beforeEnd&&K.beforeEnd(m);if(W)return this.endResult=W,!1;C=C||!C&&this.shouldDo(Y,!0,m.phase,!0)}C&&w.move({event:S,preEnd:!0})}}},{key:"stop",value:function(m){var w=m.interaction;if(this.states&&this.states.length){var S=Te({states:this.states,interactable:w.interactable,element:w.element,rect:null},m);this.fillArg(S);for(var T=0,C=this.states;T<C.length;T++){var P=C[T];S.state=P,P.methods.stop&&P.methods.stop(S)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(m){this.states=[];for(var w=0;w<m.length;w++){var S=m[w],T=S.options,C=S.methods,P=S.name;this.states.push({options:T,methods:C,index:w,name:P})}return this.states}},{key:"restoreInteractionCoords",value:function(m){var w=m.interaction,S=w.coords,T=w.rect,C=w.modification;if(C.result){for(var P=C.startDelta,z=C.result,Y=z.delta,K=z.rectDelta,W=0,te=[[S.start,P],[S.cur,Y]];W<te.length;W++){var ve=te[W],Ne=ve[0],ke=ve[1];Ne.page.x-=ke.x,Ne.page.y-=ke.y,Ne.client.x-=ke.x,Ne.client.y-=ke.y}T.left-=K.left,T.right-=K.right,T.top-=K.top,T.bottom-=K.bottom}}},{key:"shouldDo",value:function(m,w,S,T){return!(!m||m.enabled===!1||T&&!m.endOnly||m.endOnly&&!w||S==="start"&&!m.setStart)}},{key:"copyFrom",value:function(m){this.startOffset=m.startOffset,this.startDelta=m.startDelta,this.startEdges=m.startEdges,this.edges=m.edges,this.states=m.states.map(function(w){return Ka(w)}),this.result=Za(Te({},m.result.coords),Te({},m.result.rect))}},{key:"destroy",value:function(){for(var m in this)this[m]=null}}]),x})();function Za(x,m){return{rect:m,coords:x,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function mi(x,m){var w=x.defaults,S={start:x.start,set:x.set,beforeEnd:x.beforeEnd,stop:x.stop},T=function(C){var P=C||{};for(var z in P.enabled=P.enabled!==!1,w)z in P||(P[z]=w[z]);var Y={options:P,methods:S,name:m,enable:function(){return P.enabled=!0,Y},disable:function(){return P.enabled=!1,Y}};return Y};return m&&typeof m=="string"&&(T._defaults=w,T._methods=S),T}function ia(x){var m=x.iEvent,w=x.interaction.modification.result;w&&(m.modifiers=w.eventProps)}var Qa={id:"modifiers/base",before:["actions"],install:function(x){x.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(x){var m=x.interaction;m.modification=new es(m)},"interactions:before-action-start":function(x){var m=x.interaction,w=x.interaction.modification;w.start(x,m.coords.start.page),m.edges=w.edges,w.applyToInteraction(x)},"interactions:before-action-move":function(x){var m=x.interaction,w=m.modification,S=w.setAndApply(x);return m.edges=w.edges,S},"interactions:before-action-end":function(x){var m=x.interaction,w=m.modification,S=w.beforeEnd(x);return m.edges=w.startEdges,S},"interactions:action-start":ia,"interactions:action-move":ia,"interactions:action-end":ia,"interactions:after-action-start":function(x){return x.interaction.modification.restoreInteractionCoords(x)},"interactions:after-action-move":function(x){return x.interaction.modification.restoreInteractionCoords(x)},"interactions:stop":function(x){return x.interaction.modification.stop(x)}}},Tc=Qa,kc={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Li=(function(x){p(w,x);var m=j(w);function w(S,T,C,P,z,Y,K){var W;o(this,w),(W=m.call(this,S)).relatedTarget=null,W.screenX=void 0,W.screenY=void 0,W.button=void 0,W.buttons=void 0,W.ctrlKey=void 0,W.shiftKey=void 0,W.altKey=void 0,W.metaKey=void 0,W.page=void 0,W.client=void 0,W.delta=void 0,W.rect=void 0,W.x0=void 0,W.y0=void 0,W.t0=void 0,W.dt=void 0,W.duration=void 0,W.clientX0=void 0,W.clientY0=void 0,W.velocity=void 0,W.speed=void 0,W.swipe=void 0,W.axes=void 0,W.preEnd=void 0,z=z||S.element;var te=S.interactable,ve=(te&&te.options||kc).deltaSource,Ne=st(te,z,C),ke=P==="start",De=P==="end",Ve=ke?_(W):S.prevEvent,Be=ke?S.coords.start:De?{page:Ve.page,client:Ve.client,timeStamp:S.coords.cur.timeStamp}:S.coords.cur;return W.page=Te({},Be.page),W.client=Te({},Be.client),W.rect=Te({},S.rect),W.timeStamp=Be.timeStamp,De||(W.page.x-=Ne.x,W.page.y-=Ne.y,W.client.x-=Ne.x,W.client.y-=Ne.y),W.ctrlKey=T.ctrlKey,W.altKey=T.altKey,W.shiftKey=T.shiftKey,W.metaKey=T.metaKey,W.button=T.button,W.buttons=T.buttons,W.target=z,W.currentTarget=z,W.preEnd=Y,W.type=K||C+(P||""),W.interactable=te,W.t0=ke?S.pointers[S.pointers.length-1].downTime:Ve.t0,W.x0=S.coords.start.page.x-Ne.x,W.y0=S.coords.start.page.y-Ne.y,W.clientX0=S.coords.start.client.x-Ne.x,W.clientY0=S.coords.start.client.y-Ne.y,W.delta=ke||De?{x:0,y:0}:{x:W[ve].x-Ve[ve].x,y:W[ve].y-Ve[ve].y},W.dt=S.coords.delta.timeStamp,W.duration=W.timeStamp-W.t0,W.velocity=Te({},S.coords.velocity[ve]),W.speed=Sn(W.velocity.x,W.velocity.y),W.swipe=De||P==="inertiastart"?W.getSwipe():null,W}return d(w,[{key:"getSwipe",value:function(){var S=this._interaction;if(S.prevEvent.speed<600||this.timeStamp-S.prevEvent.timeStamp>150)return null;var T=180*Math.atan2(S.prevEvent.velocityY,S.prevEvent.velocityX)/Math.PI;T<0&&(T+=360);var C=112.5<=T&&T<247.5,P=202.5<=T&&T<337.5;return{up:P,down:!P&&22.5<=T&&T<157.5,left:C,right:!C&&(292.5<=T||T<67.5),angle:T,speed:S.prevEvent.speed,velocity:{x:S.prevEvent.velocityX,y:S.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),w})(xn);Object.defineProperties(Li.prototype,{pageX:{get:function(){return this.page.x},set:function(x){this.page.x=x}},pageY:{get:function(){return this.page.y},set:function(x){this.page.y=x}},clientX:{get:function(){return this.client.x},set:function(x){this.client.x=x}},clientY:{get:function(){return this.client.y},set:function(x){this.client.y=x}},dx:{get:function(){return this.delta.x},set:function(x){this.delta.x=x}},dy:{get:function(){return this.delta.y},set:function(x){this.delta.y=x}},velocityX:{get:function(){return this.velocity.x},set:function(x){this.velocity.x=x}},velocityY:{get:function(){return this.velocity.y},set:function(x){this.velocity.y=x}}});var im=d(function x(m,w,S,T,C){o(this,x),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=m,this.pointer=w,this.event=S,this.downTime=T,this.downTarget=C}),Rd=(function(x){return x.interactable="",x.element="",x.prepared="",x.pointerIsDown="",x.pointerWasMoved="",x._proxy="",x})({}),Nc=(function(x){return x.start="",x.move="",x.end="",x.stop="",x.interacting="",x})({}),Mc=0,am=(function(){function x(m){var w=this,S=m.pointerType,T=m.scopeFire;o(this,x),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Ct(function(W){this.move(W)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Mc++,this._scopeFire=T,this.pointerType=S;var C=this;this._proxy={};var P=function(W){Object.defineProperty(w._proxy,W,{get:function(){return C[W]}})};for(var z in Rd)P(z);var Y=function(W){Object.defineProperty(w._proxy,W,{value:function(){return C[W].apply(C,arguments)}})};for(var K in Nc)Y(K);this._scopeFire("interactions:new",{interaction:this})}return d(x,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(m,w,S){var T=this.updatePointer(m,w,S,!0),C=this.pointers[T];this._scopeFire("interactions:down",{pointer:m,event:w,eventTarget:S,pointerIndex:T,pointerInfo:C,type:"down",interaction:this})}},{key:"start",value:function(m,w,S){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(m.name==="gesture"?2:1)||!w.options[m.name].enabled)&&(hs(this.prepared,m),this.interactable=w,this.element=S,this.rect=w.getRect(S),this.edges=this.prepared.edges?Te({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(m,w,S){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(m,w,S,!1);var T,C,P=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(T=this.coords.cur.client.x-this.coords.start.client.x,C=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Sn(T,C)>this.pointerMoveTolerance);var z,Y,K,W=this.getPointerIndex(m),te={pointer:m,pointerIndex:W,pointerInfo:this.pointers[W],event:w,type:"move",eventTarget:S,dx:T,dy:C,duplicate:P,interaction:this};P||(z=this.coords.velocity,Y=this.coords.delta,K=Math.max(Y.timeStamp/1e3,.001),z.page.x=Y.page.x/K,z.page.y=Y.page.y/K,z.client.x=Y.client.x/K,z.client.y=Y.client.y/K,z.timeStamp=K),this._scopeFire("interactions:move",te),P||this.simulation||(this.interacting()&&(te.type=null,this.move(te)),this.pointerWasMoved&&ze(this.coords.prev,this.coords.cur))}},{key:"move",value:function(m){m&&m.event||wt(this.coords.delta),(m=Te({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},m||{})).phase="move",this._doPhase(m)}},{key:"pointerUp",value:function(m,w,S,T){var C=this.getPointerIndex(m);C===-1&&(C=this.updatePointer(m,w,S,!1));var P=/cancel$/i.test(w.type)?"cancel":"up";this._scopeFire("interactions:".concat(P),{pointer:m,pointerIndex:C,pointerInfo:this.pointers[C],event:w,eventTarget:S,type:P,curEventTarget:T,interaction:this}),this.simulation||this.end(w),this.removePointer(m,w)}},{key:"documentBlur",value:function(m){this.end(m),this._scopeFire("interactions:blur",{event:m,type:"blur",interaction:this})}},{key:"end",value:function(m){var w;this._ending=!0,m=m||this._latestPointer.event,this.interacting()&&(w=this._doPhase({event:m,interaction:this,phase:"end"})),this._ending=!1,w===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(m){var w=lt(m);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ei(this.pointers,function(S){return S.id===w})}},{key:"getPointerInfo",value:function(m){return this.pointers[this.getPointerIndex(m)]}},{key:"updatePointer",value:function(m,w,S,T){var C,P,z,Y=lt(m),K=this.getPointerIndex(m),W=this.pointers[K];return T=T!==!1&&(T||/(down|start)$/i.test(w.type)),W?W.pointer=m:(W=new im(Y,m,w,null,null),K=this.pointers.length,this.pointers.push(W)),Vn(this.coords.cur,this.pointers.map(function(te){return te.pointer}),this._now()),C=this.coords.delta,P=this.coords.prev,z=this.coords.cur,C.page.x=z.page.x-P.page.x,C.page.y=z.page.y-P.page.y,C.client.x=z.client.x-P.client.x,C.client.y=z.client.y-P.client.y,C.timeStamp=z.timeStamp-P.timeStamp,T&&(this.pointerIsDown=!0,W.downTime=this.coords.cur.timeStamp,W.downTarget=S,Wn(this.downPointer,m),this.interacting()||(ze(this.coords.start,this.coords.cur),ze(this.coords.prev,this.coords.cur),this.downEvent=w,this.pointerWasMoved=!1)),this._updateLatestPointer(m,w,S),this._scopeFire("interactions:update-pointer",{pointer:m,event:w,eventTarget:S,down:T,pointerInfo:W,pointerIndex:K,interaction:this}),K}},{key:"removePointer",value:function(m,w){var S=this.getPointerIndex(m);if(S!==-1){var T=this.pointers[S];this._scopeFire("interactions:remove-pointer",{pointer:m,event:w,eventTarget:null,pointerIndex:S,pointerInfo:T,interaction:this}),this.pointers.splice(S,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(m,w,S){this._latestPointer.pointer=m,this._latestPointer.event=w,this._latestPointer.eventTarget=S}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(m,w,S,T){return new Li(this,m,this.prepared.name,w,this.element,S,T)}},{key:"_fireEvent",value:function(m){var w;(w=this.interactable)==null||w.fire(m),(!this.prevEvent||m.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=m)}},{key:"_doPhase",value:function(m){var w=m.event,S=m.phase,T=m.preEnd,C=m.type,P=this.rect;if(P&&S==="move"&&(Dt(this.edges,P,this.coords.delta[this.interactable.options.deltaSource]),P.width=P.right-P.left,P.height=P.bottom-P.top),this._scopeFire("interactions:before-action-".concat(S),m)===!1)return!1;var z=m.iEvent=this._createPreparedEvent(w,S,T,C);return this._scopeFire("interactions:action-".concat(S),m),S==="start"&&(this.prevEvent=z),this._fireEvent(z),this._scopeFire("interactions:after-action-".concat(S),m),!0}},{key:"_now",value:function(){return Date.now()}}]),x})();function Pd(x){no(x.interaction)}function no(x){if(!(function(w){return!(!w.offset.pending.x&&!w.offset.pending.y)})(x))return!1;var m=x.offset.pending;return so(x.coords.cur,m),so(x.coords.delta,m),Dt(x.edges,x.rect,m),m.x=0,m.y=0,!0}function gi(x){var m=x.x,w=x.y;this.offset.pending.x+=m,this.offset.pending.y+=w,this.offset.total.x+=m,this.offset.total.y+=w}function so(x,m){var w=x.page,S=x.client,T=m.x,C=m.y;w.x+=T,w.y+=C,S.x+=T,S.y+=C}Nc.offsetBy="";var Dc={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(x){x.Interaction.prototype.offsetBy=gi},listeners:{"interactions:new":function(x){x.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(x){return(function(m){m.pointerIsDown&&(so(m.coords.cur,m.offset.total),m.offset.pending.x=0,m.offset.pending.y=0)})(x.interaction)},"interactions:before-action-start":Pd,"interactions:before-action-move":Pd,"interactions:before-action-end":function(x){var m=x.interaction;if(no(m))return m.move({offset:!0}),m.end(),!1},"interactions:stop":function(x){var m=x.interaction;m.offset.total.x=0,m.offset.total.y=0,m.offset.pending.x=0,m.offset.pending.y=0}}},aa=Dc,Ja=(function(){function x(m){o(this,x),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=m}return d(x,[{key:"start",value:function(m){var w=this.interaction,S=io(w);if(!S||!S.enabled)return!1;var T=w.coords.velocity.client,C=Sn(T.x,T.y),P=this.modification||(this.modification=new es(w));if(P.copyFrom(w.modification),this.t0=w._now(),this.allowResume=S.allowResume,this.v0=C,this.currentOffset={x:0,y:0},this.startCoords=w.coords.cur.page,this.modifierArg=P.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-w.coords.cur.timeStamp<50&&C>S.minSpeed&&C>S.endSpeed)this.startInertia();else{if(P.result=P.setAll(this.modifierArg),!P.result.changed)return!1;this.startSmoothEnd()}return w.modification.result.rect=null,w.offsetBy(this.targetOffset),w._doPhase({interaction:w,event:m,phase:"inertiastart"}),w.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),w.modification.result.rect=null,this.active=!0,w.simulation=this,!0}},{key:"startInertia",value:function(){var m=this,w=this.interaction.coords.velocity.client,S=io(this.interaction),T=S.resistance,C=-Math.log(S.endSpeed/this.v0)/T;this.targetOffset={x:(w.x-C)/T,y:(w.y-C)/T},this.te=C,this.lambda_v0=T/this.v0,this.one_ve_v0=1-S.endSpeed/this.v0;var P=this.modification,z=this.modifierArg;z.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},P.result=P.setAll(z),P.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+P.result.delta.x,y:this.targetOffset.y+P.result.delta.y}),this.onNextFrame(function(){return m.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var m=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return m.smoothEndTick()})}},{key:"onNextFrame",value:function(m){var w=this;this.timeout=We.request(function(){w.active&&m()})}},{key:"inertiaTick",value:function(){var m,w,S,T,C,P,z,Y=this,K=this.interaction,W=io(K).resistance,te=(K._now()-this.t0)/1e3;if(te<this.te){var ve,Ne=1-(Math.exp(-W*te)-this.lambda_v0)/this.one_ve_v0;this.isModified?(m=0,w=0,S=this.targetOffset.x,T=this.targetOffset.y,C=this.modifiedOffset.x,P=this.modifiedOffset.y,ve={x:Ec(z=Ne,m,S,C),y:Ec(z,w,T,P)}):ve={x:this.targetOffset.x*Ne,y:this.targetOffset.y*Ne};var ke={x:ve.x-this.currentOffset.x,y:ve.y-this.currentOffset.y};this.currentOffset.x+=ke.x,this.currentOffset.y+=ke.y,K.offsetBy(ke),K.move(),this.onNextFrame(function(){return Y.inertiaTick()})}else K.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var m=this,w=this.interaction,S=w._now()-this.t0,T=io(w).smoothEndDuration;if(S<T){var C={x:er(S,0,this.targetOffset.x,T),y:er(S,0,this.targetOffset.y,T)},P={x:C.x-this.currentOffset.x,y:C.y-this.currentOffset.y};this.currentOffset.x+=P.x,this.currentOffset.y+=P.y,w.offsetBy(P),w.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return m.smoothEndTick()})}else w.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(m){var w=m.pointer,S=m.event,T=m.eventTarget,C=this.interaction;C.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),C.updatePointer(w,S,T,!0),C._doPhase({interaction:C,event:S,phase:"resume"}),ze(C.coords.prev,C.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,We.cancel(this.timeout)}}]),x})();function io(x){var m=x.interactable,w=x.prepared;return m&&m.options&&w.name&&m.options[w.name].inertia}var Cc={id:"inertia",before:["modifiers","actions"],install:function(x){var m=x.defaults;x.usePlugin(aa),x.usePlugin(Tc),x.actions.phases.inertiastart=!0,x.actions.phases.resume=!0,m.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(x){var m=x.interaction;m.inertia=new Ja(m)},"interactions:before-action-end":function(x){var m=x.interaction,w=x.event;return(!m._interacting||m.simulation||!m.inertia.start(w))&&null},"interactions:down":function(x){var m=x.interaction,w=x.eventTarget,S=m.inertia;if(S.active)for(var T=w;O.element(T);){if(T===m.element){S.resume(x);break}T=ae(T)}},"interactions:stop":function(x){var m=x.interaction.inertia;m.active&&m.stop()},"interactions:before-action-resume":function(x){var m=x.interaction.modification;m.stop(x),m.start(x,x.interaction.coords.cur.page),m.applyToInteraction(x)},"interactions:before-action-inertiastart":function(x){return x.interaction.modification.setAndApply(x)},"interactions:action-resume":ia,"interactions:action-inertiastart":ia,"interactions:after-action-inertiastart":function(x){return x.interaction.modification.restoreInteractionCoords(x)},"interactions:after-action-resume":function(x){return x.interaction.modification.restoreInteractionCoords(x)}}};function Ec(x,m,w,S){var T=1-x;return T*T*m+2*T*x*w+x*x*S}function er(x,m,w,S){return-w*(x/=S)*(x-2)+m}var xi=Cc;function tl(x,m){for(var w=0;w<m.length;w++){var S=m[w];if(x.immediatePropagationStopped)break;S(x)}}var tr=(function(){function x(m){o(this,x),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Te({},m||{})}return d(x,[{key:"fire",value:function(m){var w,S=this.global;(w=this.types[m.type])&&tl(m,w),!m.propagationStopped&&S&&(w=S[m.type])&&tl(m,w)}},{key:"on",value:function(m,w){var S=ln(m,w);for(m in S)this.types[m]=Qt(this.types[m]||[],S[m])}},{key:"off",value:function(m,w){var S=ln(m,w);for(m in S){var T=this.types[m];if(T&&T.length)for(var C=0,P=S[m];C<P.length;C++){var z=P[C],Y=T.indexOf(z);Y!==-1&&T.splice(Y,1)}}}},{key:"getRect",value:function(m){return null}}]),x})(),zi=(function(){function x(m){o(this,x),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=m,Wn(this,m)}return d(x,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),x})();function ra(x){return O.object(x)?{capture:!!x.capture,passive:!!x.passive}:{capture:!!x,passive:!1}}function oa(x,m){return x===m||(typeof x=="boolean"?!!m.capture===x&&!m.passive:!!x.capture==!!m.capture&&!!x.passive==!!m.passive)}var Ld={id:"events",install:function(x){var m,w=[],S={},T=[],C={add:P,remove:z,addDelegate:function(W,te,ve,Ne,ke){var De=ra(ke);if(!S[ve]){S[ve]=[];for(var Ve=0;Ve<T.length;Ve++){var Be=T[Ve];P(Be,ve,Y),P(Be,ve,K,!0)}}var Ye=S[ve],nt=di(Ye,function(ct){return ct.selector===W&&ct.context===te});nt||(nt={selector:W,context:te,listeners:[]},Ye.push(nt)),nt.listeners.push({func:Ne,options:De})},removeDelegate:function(W,te,ve,Ne,ke){var De,Ve=ra(ke),Be=S[ve],Ye=!1;if(Be)for(De=Be.length-1;De>=0;De--){var nt=Be[De];if(nt.selector===W&&nt.context===te){for(var ct=nt.listeners,Ke=ct.length-1;Ke>=0;Ke--){var at=ct[Ke];if(at.func===Ne&&oa(at.options,Ve)){ct.splice(Ke,1),ct.length||(Be.splice(De,1),z(te,ve,Y),z(te,ve,K,!0)),Ye=!0;break}}if(Ye)break}}},delegateListener:Y,delegateUseCapture:K,delegatedEvents:S,documents:T,targets:w,supportsOptions:!1,supportsPassive:!1};function P(W,te,ve,Ne){if(W.addEventListener){var ke=ra(Ne),De=di(w,function(Ve){return Ve.eventTarget===W});De||(De={eventTarget:W,events:{}},w.push(De)),De.events[te]||(De.events[te]=[]),di(De.events[te],function(Ve){return Ve.func===ve&&oa(Ve.options,ke)})||(W.addEventListener(te,ve,C.supportsOptions?ke:ke.capture),De.events[te].push({func:ve,options:ke}))}}function z(W,te,ve,Ne){if(W.addEventListener&&W.removeEventListener){var ke=Ei(w,function(pn){return pn.eventTarget===W}),De=w[ke];if(De&&De.events)if(te!=="all"){var Ve=!1,Be=De.events[te];if(Be){if(ve==="all"){for(var Ye=Be.length-1;Ye>=0;Ye--){var nt=Be[Ye];z(W,te,nt.func,nt.options)}return}for(var ct=ra(Ne),Ke=0;Ke<Be.length;Ke++){var at=Be[Ke];if(at.func===ve&&oa(at.options,ct)){W.removeEventListener(te,ve,C.supportsOptions?ct:ct.capture),Be.splice(Ke,1),Be.length===0&&(delete De.events[te],Ve=!0);break}}}Ve&&!Object.keys(De.events).length&&w.splice(ke,1)}else for(te in De.events)De.events.hasOwnProperty(te)&&z(W,te,"all")}}function Y(W,te){for(var ve=ra(te),Ne=new zi(W),ke=S[W.type],De=It(W)[0],Ve=De;O.element(Ve);){for(var Be=0;Be<ke.length;Be++){var Ye=ke[Be],nt=Ye.selector,ct=Ye.context;if(xe(Ve,nt)&&X(ct,De)&&X(ct,Ve)){var Ke=Ye.listeners;Ne.currentTarget=Ve;for(var at=0;at<Ke.length;at++){var pn=Ke[at];oa(pn.options,ve)&&pn.func(Ne)}}}Ve=ae(Ve)}}function K(W){return Y(W,!0)}return(m=x.document)==null||m.createElement("div").addEventListener("test",null,{get capture(){return C.supportsOptions=!0},get passive(){return C.supportsPassive=!0}}),x.events=C,C}},nr={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(x){for(var m=0,w=nr.methodOrder;m<w.length;m++){var S=w[m],T=nr[S](x);if(T)return T}return null},simulationResume:function(x){var m=x.pointerType,w=x.eventType,S=x.eventTarget,T=x.scope;if(!/down|start/i.test(w))return null;for(var C=0,P=T.interactions.list;C<P.length;C++){var z=P[C],Y=S;if(z.simulation&&z.simulation.allowResume&&z.pointerType===m)for(;Y;){if(Y===z.element)return z;Y=ae(Y)}}return null},mouseOrPen:function(x){var m,w=x.pointerId,S=x.pointerType,T=x.eventType,C=x.scope;if(S!=="mouse"&&S!=="pen")return null;for(var P=0,z=C.interactions.list;P<z.length;P++){var Y=z[P];if(Y.pointerType===S){if(Y.simulation&&!ao(Y,w))continue;if(Y.interacting())return Y;m||(m=Y)}}if(m)return m;for(var K=0,W=C.interactions.list;K<W.length;K++){var te=W[K];if(!(te.pointerType!==S||/down/i.test(T)&&te.simulation))return te}return null},hasPointer:function(x){for(var m=x.pointerId,w=0,S=x.scope.interactions.list;w<S.length;w++){var T=S[w];if(ao(T,m))return T}return null},idle:function(x){for(var m=x.pointerType,w=0,S=x.scope.interactions.list;w<S.length;w++){var T=S[w];if(T.pointers.length===1){var C=T.interactable;if(C&&(!C.options.gesture||!C.options.gesture.enabled))continue}else if(T.pointers.length>=2)continue;if(!T.interacting()&&m===T.pointerType)return T}return null}};function ao(x,m){return x.pointers.some(function(w){return w.id===m})}var zd=nr,Hn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Bi(x,m){return function(w){var S=m.interactions.list,T=ms(w),C=It(w),P=C[0],z=C[1],Y=[];if(/^touch/.test(w.type)){m.prevTouchTime=m.now();for(var K=0,W=w.changedTouches;K<W.length;K++){var te=W[K],ve={pointer:te,pointerId:lt(te),pointerType:T,eventType:w.type,eventTarget:P,curEventTarget:z,scope:m},Ne=ro(ve);Y.push([ve.pointer,ve.eventTarget,ve.curEventTarget,Ne])}}else{var ke=!1;if(!H.supportsPointerEvent&&/mouse/.test(w.type)){for(var De=0;De<S.length&&!ke;De++)ke=S[De].pointerType!=="mouse"&&S[De].pointerIsDown;ke=ke||m.now()-m.prevTouchTime<500||w.timeStamp===0}if(!ke){var Ve={pointer:w,pointerId:lt(w),pointerType:T,eventType:w.type,curEventTarget:z,eventTarget:P,scope:m},Be=ro(Ve);Y.push([Ve.pointer,Ve.eventTarget,Ve.curEventTarget,Be])}}for(var Ye=0;Ye<Y.length;Ye++){var nt=Y[Ye],ct=nt[0],Ke=nt[1],at=nt[2];nt[3][x](ct,w,Ke,at)}}}function ro(x){var m=x.pointerType,w=x.scope,S={interaction:zd.search(x),searchDetails:x};return w.fire("interactions:find",S),S.interaction||w.interactions.new({pointerType:m})}function la(x,m){var w=x.doc,S=x.scope,T=x.options,C=S.interactions.docEvents,P=S.events,z=P[m];for(var Y in S.browser.isIOS&&!T.events&&(T.events={passive:!1}),P.delegatedEvents)z(w,Y,P.delegateListener),z(w,Y,P.delegateUseCapture,!0);for(var K=T&&T.events,W=0;W<C.length;W++){var te=C[W];z(w,te.type,te.listener,K)}}var rm={id:"core/interactions",install:function(x){for(var m={},w=0;w<Hn.length;w++){var S=Hn[w];m[S]=Bi(S,x)}var T,C=H.pEventTypes;function P(){for(var z=0,Y=x.interactions.list;z<Y.length;z++){var K=Y[z];if(K.pointerIsDown&&K.pointerType==="touch"&&!K._interacting)for(var W=function(){var Ne=ve[te];x.documents.some(function(ke){return X(ke.doc,Ne.downTarget)})||K.removePointer(Ne.pointer,Ne.event)},te=0,ve=K.pointers;te<ve.length;te++)W()}}(T=Z.PointerEvent?[{type:C.down,listener:P},{type:C.down,listener:m.pointerDown},{type:C.move,listener:m.pointerMove},{type:C.up,listener:m.pointerUp},{type:C.cancel,listener:m.pointerUp}]:[{type:"mousedown",listener:m.pointerDown},{type:"mousemove",listener:m.pointerMove},{type:"mouseup",listener:m.pointerUp},{type:"touchstart",listener:P},{type:"touchstart",listener:m.pointerDown},{type:"touchmove",listener:m.pointerMove},{type:"touchend",listener:m.pointerUp},{type:"touchcancel",listener:m.pointerUp}]).push({type:"blur",listener:function(z){for(var Y=0,K=x.interactions.list;Y<K.length;Y++)K[Y].documentBlur(z)}}),x.prevTouchTime=0,x.Interaction=(function(z){p(K,z);var Y=j(K);function K(){return o(this,K),Y.apply(this,arguments)}return d(K,[{key:"pointerMoveTolerance",get:function(){return x.interactions.pointerMoveTolerance},set:function(W){x.interactions.pointerMoveTolerance=W}},{key:"_now",value:function(){return x.now()}}]),K})(am),x.interactions={list:[],new:function(z){z.scopeFire=function(K,W){return x.fire(K,W)};var Y=new x.Interaction(z);return x.interactions.list.push(Y),Y},listeners:m,docEvents:T,pointerMoveTolerance:1},x.usePlugin(jc)},listeners:{"scope:add-document":function(x){return la(x,"add")},"scope:remove-document":function(x){return la(x,"remove")},"interactable:unset":function(x,m){for(var w=x.interactable,S=m.interactions.list.length-1;S>=0;S--){var T=m.interactions.list[S];T.interactable===w&&(T.stop(),m.fire("interactions:destroy",{interaction:T}),T.destroy(),m.interactions.list.length>2&&m.interactions.list.splice(S,1))}}},onDocSignal:la,doOnInteractions:Bi,methodNames:Hn},Ac=rm,$s=(function(x){return x[x.On=0]="On",x[x.Off=1]="Off",x})($s||{}),oo=(function(){function x(m,w,S,T){o(this,x),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new tr,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=w.actions,this.target=m,this._context=w.context||S,this._win=U(tt(m)?this._context:m),this._doc=this._win.document,this._scopeEvents=T,this.set(w)}return d(x,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(m,w){return O.func(w.onstart)&&this.on("".concat(m,"start"),w.onstart),O.func(w.onmove)&&this.on("".concat(m,"move"),w.onmove),O.func(w.onend)&&this.on("".concat(m,"end"),w.onend),O.func(w.oninertiastart)&&this.on("".concat(m,"inertiastart"),w.oninertiastart),this}},{key:"updatePerActionListeners",value:function(m,w,S){var T,C=this,P=(T=this._actions.map[m])==null?void 0:T.filterEventType,z=function(Y){return(P==null||P(Y))&&sa(Y,C._actions)};(O.array(w)||O.object(w))&&this._onOff($s.Off,m,w,void 0,z),(O.array(S)||O.object(S))&&this._onOff($s.On,m,S,void 0,z)}},{key:"setPerAction",value:function(m,w){var S=this._defaults;for(var T in w){var C=T,P=this.options[m],z=w[C];C==="listeners"&&this.updatePerActionListeners(m,P.listeners,z),O.array(z)?P[C]=us(z):O.plainObject(z)?(P[C]=Te(P[C]||{},Ka(z)),O.object(S.perAction[C])&&"enabled"in S.perAction[C]&&(P[C].enabled=z.enabled!==!1)):O.bool(z)&&O.object(S.perAction[C])?P[C].enabled=z:P[C]=z}}},{key:"getRect",value:function(m){return m=m||(O.element(this.target)?this.target:null),O.string(this.target)&&(m=m||this._context.querySelector(this.target)),Se(m)}},{key:"rectChecker",value:function(m){var w=this;return O.func(m)?(this.getRect=function(S){var T=Te({},m.apply(w,S));return"width"in T||(T.width=T.right-T.left,T.height=T.bottom-T.top),T},this):m===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(m,w){if(tt(w)||O.object(w)){for(var S in this.options[m]=w,this._actions.map)this.options[S][m]=w;return this}return this.options[m]}},{key:"origin",value:function(m){return this._backCompatOption("origin",m)}},{key:"deltaSource",value:function(m){return m==="page"||m==="client"?(this.options.deltaSource=m,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var m=this.target;return O.string(m)?Array.from(this._context.querySelectorAll(m)):O.func(m)&&m.getAllElements?m.getAllElements():O.element(m)?[m]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(m){return this._context===m.ownerDocument||X(this._context,m)}},{key:"testIgnoreAllow",value:function(m,w,S){return!this.testIgnore(m.ignoreFrom,w,S)&&this.testAllow(m.allowFrom,w,S)}},{key:"testAllow",value:function(m,w,S){return!m||!!O.element(S)&&(O.string(m)?pe(S,m,w):!!O.element(m)&&X(m,S))}},{key:"testIgnore",value:function(m,w,S){return!(!m||!O.element(S))&&(O.string(m)?pe(S,m,w):!!O.element(m)&&X(m,S))}},{key:"fire",value:function(m){return this.events.fire(m),this}},{key:"_onOff",value:function(m,w,S,T,C){O.object(w)&&!O.array(w)&&(T=S,S=null);var P=ln(w,S,C);for(var z in P){z==="wheel"&&(z=H.wheelEvent);for(var Y=0,K=P[z];Y<K.length;Y++){var W=K[Y];sa(z,this._actions)?this.events[m===$s.On?"on":"off"](z,W):O.string(this.target)?this._scopeEvents[m===$s.On?"addDelegate":"removeDelegate"](this.target,this._context,z,W,T):this._scopeEvents[m===$s.On?"add":"remove"](this.target,z,W,T)}}return this}},{key:"on",value:function(m,w,S){return this._onOff($s.On,m,w,S)}},{key:"off",value:function(m,w,S){return this._onOff($s.Off,m,w,S)}},{key:"set",value:function(m){var w=this._defaults;for(var S in O.object(m)||(m={}),this.options=Ka(w.base),this._actions.methodDict){var T=S,C=this._actions.methodDict[T];this.options[T]={},this.setPerAction(T,Te(Te({},w.perAction),w.actions[T])),this[C](m[T])}for(var P in m)P!=="getRect"?O.func(this[P])&&this[P](m[P]):this.rectChecker(m.getRect);return this}},{key:"unset",value:function(){if(O.string(this.target))for(var m in this._scopeEvents.delegatedEvents)for(var w=this._scopeEvents.delegatedEvents[m],S=w.length-1;S>=0;S--){var T=w[S],C=T.selector,P=T.context,z=T.listeners;C===this.target&&P===this._context&&w.splice(S,1);for(var Y=z.length-1;Y>=0;Y--)this._scopeEvents.removeDelegate(this.target,this._context,m,z[Y][0],z[Y][1])}else this._scopeEvents.remove(this.target,"all")}}]),x})(),nl=(function(){function x(m){var w=this;o(this,x),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=m,m.addListeners({"interactable:unset":function(S){var T=S.interactable,C=T.target,P=O.string(C)?w.selectorMap[C]:C[w.scope.id],z=Ei(P,function(Y){return Y===T});P.splice(z,1)}})}return d(x,[{key:"new",value:function(m,w){w=Te(w||{},{actions:this.scope.actions});var S=new this.scope.Interactable(m,w,this.scope.document,this.scope.events);return this.scope.addDocument(S._doc),this.list.push(S),O.string(m)?(this.selectorMap[m]||(this.selectorMap[m]=[]),this.selectorMap[m].push(S)):(S.target[this.scope.id]||Object.defineProperty(m,this.scope.id,{value:[],configurable:!0}),m[this.scope.id].push(S)),this.scope.fire("interactable:new",{target:m,options:w,interactable:S,win:this.scope._win}),S}},{key:"getExisting",value:function(m,w){var S=w&&w.context||this.scope.document,T=O.string(m),C=T?this.selectorMap[m]:m[this.scope.id];if(C)return di(C,function(P){return P._context===S&&(T||P.inContext(m))})}},{key:"forEachMatch",value:function(m,w){for(var S=0,T=this.list;S<T.length;S++){var C=T[S],P=void 0;if((O.string(C.target)?O.element(m)&&xe(m,C.target):m===C.target)&&C.inContext(m)&&(P=w(C)),P!==void 0)return P}}}]),x})(),Bd=(function(){function x(){var m=this;o(this,x),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=H,this.defaults=Ka(kc),this.Eventable=tr,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(function(S){var T=function C(P,z){var Y=S.interactables.getExisting(P,z);return Y||((Y=S.interactables.new(P,z)).events.global=C.globalEvents),Y};return T.getPointerAverage=ui,T.getTouchBBox=Is,T.getTouchDistance=Ci,T.getTouchAngle=Fn,T.getElementRect=Se,T.getElementClientRect=de,T.matchesSelector=xe,T.closest=ne,T.globalEvents={},T.version="1.10.27",T.scope=S,T.use=function(C,P){return this.scope.usePlugin(C,P),this},T.isSet=function(C,P){return!!this.scope.interactables.get(C,P&&P.context)},T.on=Ct(function(C,P,z){if(O.string(C)&&C.search(" ")!==-1&&(C=C.trim().split(/ +/)),O.array(C)){for(var Y=0,K=C;Y<K.length;Y++){var W=K[Y];this.on(W,P,z)}return this}if(O.object(C)){for(var te in C)this.on(te,C[te],P);return this}return sa(C,this.scope.actions)?this.globalEvents[C]?this.globalEvents[C].push(P):this.globalEvents[C]=[P]:this.scope.events.add(this.scope.document,C,P,{options:z}),this},"The interact.on() method is being deprecated"),T.off=Ct(function(C,P,z){if(O.string(C)&&C.search(" ")!==-1&&(C=C.trim().split(/ +/)),O.array(C)){for(var Y=0,K=C;Y<K.length;Y++){var W=K[Y];this.off(W,P,z)}return this}if(O.object(C)){for(var te in C)this.off(te,C[te],P);return this}var ve;return sa(C,this.scope.actions)?C in this.globalEvents&&(ve=this.globalEvents[C].indexOf(P))!==-1&&this.globalEvents[C].splice(ve,1):this.scope.events.remove(this.scope.document,C,P,z),this},"The interact.off() method is being deprecated"),T.debug=function(){return this.scope},T.supportsTouch=function(){return H.supportsTouch},T.supportsPointerEvent=function(){return H.supportsPointerEvent},T.stop=function(){for(var C=0,P=this.scope.interactions.list;C<P.length;C++)P[C].stop();return this},T.pointerMoveTolerance=function(C){return O.number(C)?(this.scope.interactions.pointerMoveTolerance=C,this):this.scope.interactions.pointerMoveTolerance},T.addDocument=function(C,P){this.scope.addDocument(C,P)},T.removeDocument=function(C){this.scope.removeDocument(C)},T})(this),this.InteractEvent=Li,this.Interactable=void 0,this.interactables=new nl(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(S){return m.removeDocument(S.target)};var w=this;this.Interactable=(function(S){p(C,S);var T=j(C);function C(){return o(this,C),T.apply(this,arguments)}return d(C,[{key:"_defaults",get:function(){return w.defaults}},{key:"set",value:function(P){return k(g(C.prototype),"set",this).call(this,P),w.fire("interactable:set",{options:P,interactable:this}),this}},{key:"unset",value:function(){k(g(C.prototype),"unset",this).call(this);var P=w.interactables.list.indexOf(this);P<0||(w.interactables.list.splice(P,1),w.fire("interactable:unset",{interactable:this}))}}]),C})(oo)}return d(x,[{key:"addListeners",value:function(m,w){this.listenerMaps.push({id:w,map:m})}},{key:"fire",value:function(m,w){for(var S=0,T=this.listenerMaps;S<T.length;S++){var C=T[S].map[m];if(C&&C(w,this,m)===!1)return!1}}},{key:"init",value:function(m){return this.isInitialized?this:(function(w,S){return w.isInitialized=!0,O.window(S)&&B(S),Z.init(S),H.init(S),We.init(S),w.window=S,w.document=S.document,w.usePlugin(Ac),w.usePlugin(Ld),w})(this,m)}},{key:"pluginIsInstalled",value:function(m){var w=m.id;return w?!!this._plugins.map[w]:this._plugins.list.indexOf(m)!==-1}},{key:"usePlugin",value:function(m,w){if(!this.isInitialized)return this;if(this.pluginIsInstalled(m))return this;if(m.id&&(this._plugins.map[m.id]=m),this._plugins.list.push(m),m.install&&m.install(this,w),m.listeners&&m.before){for(var S=0,T=this.listenerMaps.length,C=m.before.reduce(function(z,Y){return z[Y]=!0,z[Vd(Y)]=!0,z},{});S<T;S++){var P=this.listenerMaps[S].id;if(P&&(C[P]||C[Vd(P)]))break}this.listenerMaps.splice(S,0,{id:m.id,map:m.listeners})}else m.listeners&&this.listenerMaps.push({id:m.id,map:m.listeners});return this}},{key:"addDocument",value:function(m,w){if(this.getDocIndex(m)!==-1)return!1;var S=U(m);w=w?Te({},w):{},this.documents.push({doc:m,options:w}),this.events.documents.push(m),m!==this.document&&this.events.add(S,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:m,window:S,scope:this,options:w})}},{key:"removeDocument",value:function(m){var w=this.getDocIndex(m),S=U(m),T=this.documents[w].options;this.events.remove(S,"unload",this.onWindowUnload),this.documents.splice(w,1),this.events.documents.splice(w,1),this.fire("scope:remove-document",{doc:m,window:S,scope:this,options:T})}},{key:"getDocIndex",value:function(m){for(var w=0;w<this.documents.length;w++)if(this.documents[w].doc===m)return w;return-1}},{key:"getDocOptions",value:function(m){var w=this.getDocIndex(m);return w===-1?null:this.documents[w].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),x})();function Vd(x){return x&&x.replace(/\/.*$/,"")}var Fd=new Bd,$n=Fd.interactStatic,Oc=typeof globalThis<"u"?globalThis:window;Fd.init(Oc);var om=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(x){var m=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(S){var T=S[0],C=S[1];return T in x||C in x}),w=function(S,T){for(var C=x.range,P=x.limits,z=P===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:P,Y=x.offset,K=Y===void 0?{x:0,y:0}:Y,W={range:C,grid:x,x:null,y:null},te=0;te<m.length;te++){var ve=m[te],Ne=ve[0],ke=ve[1],De=Math.round((S-K.x)/x[Ne]),Ve=Math.round((T-K.y)/x[ke]);W[Ne]=Math.max(z.left,Math.min(z.right,De*x[Ne]+K.x)),W[ke]=Math.max(z.top,Math.min(z.bottom,Ve*x[ke]+K.y))}return W};return w.grid=x,w.coordFields=m,w}}),lm={id:"snappers",install:function(x){var m=x.interactStatic;m.snappers=Te(m.snappers||{},om),m.createSnapGrid=m.snappers.grid}},cm=lm,um={start:function(x){var m=x.state,w=x.rect,S=x.edges,T=x.pageCoords,C=m.options,P=C.ratio,z=C.enabled,Y=m.options,K=Y.equalDelta,W=Y.modifiers;P==="preserve"&&(P=w.width/w.height),m.startCoords=Te({},T),m.startRect=Te({},w),m.ratio=P,m.equalDelta=K;var te=m.linkedEdges={top:S.top||S.left&&!S.bottom,left:S.left||S.top&&!S.right,bottom:S.bottom||S.right&&!S.top,right:S.right||S.bottom&&!S.left};if(m.xIsPrimaryAxis=!(!S.left&&!S.right),m.equalDelta){var ve=(te.left?1:-1)*(te.top?1:-1);m.edgeSign={x:ve,y:ve}}else m.edgeSign={x:te.left?-1:1,y:te.top?-1:1};if(z!==!1&&Te(S,te),W!=null&&W.length){var Ne=new es(x.interaction);Ne.copyFrom(x.interaction.modification),Ne.prepareStates(W),m.subModification=Ne,Ne.startAll(s({},x))}},set:function(x){var m=x.state,w=x.rect,S=x.coords,T=m.linkedEdges,C=Te({},S),P=m.equalDelta?dm:Hd;if(Te(x.edges,T),P(m,m.xIsPrimaryAxis,S,w),!m.subModification)return null;var z=Te({},w);Dt(T,z,{x:S.x-C.x,y:S.y-C.y});var Y=m.subModification.setAll(s(s({},x),{},{rect:z,edges:T,pageCoords:S,prevCoords:S,prevRect:z})),K=Y.delta;return Y.changed&&(P(m,Math.abs(K.x)>Math.abs(K.y),Y.coords,Y.rect),Te(S,Y.coords)),Y.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function dm(x,m,w){var S=x.startCoords,T=x.edgeSign;m?w.y=S.y+(w.x-S.x)*T.y:w.x=S.x+(w.y-S.y)*T.x}function Hd(x,m,w,S){var T=x.startRect,C=x.startCoords,P=x.ratio,z=x.edgeSign;if(m){var Y=S.width/P;w.y=C.y+(Y-T.height)*z.y}else{var K=S.height*P;w.x=C.x+(K-T.width)*z.x}}var hm=mi(um,"aspectRatio"),Ud=function(){};Ud._defaults={};var sl=Ud;function ca(x,m,w){return O.func(x)?xt(x,m.interactable,m.element,[w.x,w.y,m]):xt(x,m.interactable,m.element)}var sr={start:function(x){var m=x.rect,w=x.startOffset,S=x.state,T=x.interaction,C=x.pageCoords,P=S.options,z=P.elementRect,Y=Te({left:0,top:0,right:0,bottom:0},P.offset||{});if(m&&z){var K=ca(P.restriction,T,C);if(K){var W=K.right-K.left-m.width,te=K.bottom-K.top-m.height;W<0&&(Y.left+=W,Y.right+=W),te<0&&(Y.top+=te,Y.bottom+=te)}Y.left+=w.left-m.width*z.left,Y.top+=w.top-m.height*z.top,Y.right+=w.right-m.width*(1-z.right),Y.bottom+=w.bottom-m.height*(1-z.bottom)}S.offset=Y},set:function(x){var m=x.coords,w=x.interaction,S=x.state,T=S.options,C=S.offset,P=ca(T.restriction,w,m);if(P){var z=(function(Y){return!Y||"left"in Y&&"top"in Y||((Y=Te({},Y)).left=Y.x||0,Y.top=Y.y||0,Y.right=Y.right||Y.left+Y.width,Y.bottom=Y.bottom||Y.top+Y.height),Y})(P);m.x=Math.max(Math.min(z.right-C.right,m.x),z.left+C.left),m.y=Math.max(Math.min(z.bottom-C.bottom,m.y),z.top+C.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},fm=mi(sr,"restrict"),Id={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Yd={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Rc(x,m){for(var w=0,S=["top","left","bottom","right"];w<S.length;w++){var T=S[w];T in x||(x[T]=m[T])}return x}var lo={noInner:Id,noOuter:Yd,start:function(x){var m,w=x.interaction,S=x.startOffset,T=x.state,C=T.options;C&&(m=_t(ca(C.offset,w,w.coords.start.page))),m=m||{x:0,y:0},T.offset={top:m.y+S.top,left:m.x+S.left,bottom:m.y-S.bottom,right:m.x-S.right}},set:function(x){var m=x.coords,w=x.edges,S=x.interaction,T=x.state,C=T.offset,P=T.options;if(w){var z=Te({},m),Y=ca(P.inner,S,z)||{},K=ca(P.outer,S,z)||{};Rc(Y,Id),Rc(K,Yd),w.top?m.y=Math.min(Math.max(K.top+C.top,z.y),Y.top+C.top):w.bottom&&(m.y=Math.max(Math.min(K.bottom+C.bottom,z.y),Y.bottom+C.bottom)),w.left?m.x=Math.min(Math.max(K.left+C.left,z.x),Y.left+C.left):w.right&&(m.x=Math.max(Math.min(K.right+C.right,z.x),Y.right+C.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},pm=mi(lo,"restrictEdges"),mm=Te({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(x){}},sr.defaults),gm=mi({start:sr.start,set:sr.set,defaults:mm},"restrictRect"),xm={width:-1/0,height:-1/0},ym={width:1/0,height:1/0},vm=mi({start:function(x){return lo.start(x)},set:function(x){var m=x.interaction,w=x.state,S=x.rect,T=x.edges,C=w.options;if(T){var P=Bt(ca(C.min,m,x.coords))||xm,z=Bt(ca(C.max,m,x.coords))||ym;w.options={endOnly:C.endOnly,inner:Te({},lo.noInner),outer:Te({},lo.noOuter)},T.top?(w.options.inner.top=S.bottom-P.height,w.options.outer.top=S.bottom-z.height):T.bottom&&(w.options.inner.bottom=S.top+P.height,w.options.outer.bottom=S.top+z.height),T.left?(w.options.inner.left=S.right-P.width,w.options.outer.left=S.right-z.width):T.right&&(w.options.inner.right=S.left+P.width,w.options.outer.right=S.left+z.width),lo.set(x),w.options=C}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Pc={start:function(x){var m,w=x.interaction,S=x.interactable,T=x.element,C=x.rect,P=x.state,z=x.startOffset,Y=P.options,K=Y.offsetWithOrigin?(function(ve){var Ne=ve.interaction.element,ke=_t(xt(ve.state.options.origin,null,null,[Ne])),De=ke||st(ve.interactable,Ne,ve.interaction.prepared.name);return De})(x):{x:0,y:0};if(Y.offset==="startCoords")m={x:w.coords.start.page.x,y:w.coords.start.page.y};else{var W=xt(Y.offset,S,T,[w]);(m=_t(W)||{x:0,y:0}).x+=K.x,m.y+=K.y}var te=Y.relativePoints;P.offsets=C&&te&&te.length?te.map(function(ve,Ne){return{index:Ne,relativePoint:ve,x:z.left-C.width*ve.x+m.x,y:z.top-C.height*ve.y+m.y}}):[{index:0,relativePoint:null,x:m.x,y:m.y}]},set:function(x){var m=x.interaction,w=x.coords,S=x.state,T=S.options,C=S.offsets,P=st(m.interactable,m.element,m.prepared.name),z=Te({},w),Y=[];T.offsetWithOrigin||(z.x-=P.x,z.y-=P.y);for(var K=0,W=C;K<W.length;K++)for(var te=W[K],ve=z.x-te.x,Ne=z.y-te.y,ke=0,De=T.targets.length;ke<De;ke++){var Ve=T.targets[ke],Be=void 0;(Be=O.func(Ve)?Ve(ve,Ne,m._proxy,te,ke):Ve)&&Y.push({x:(O.number(Be.x)?Be.x:ve)+te.x,y:(O.number(Be.y)?Be.y:Ne)+te.y,range:O.number(Be.range)?Be.range:T.range,source:Ve,index:ke,offset:te})}for(var Ye={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},nt=0;nt<Y.length;nt++){var ct=Y[nt],Ke=ct.range,at=ct.x-z.x,pn=ct.y-z.y,Lt=Sn(at,pn),qn=Lt<=Ke;Ke===1/0&&Ye.inRange&&Ye.range!==1/0&&(qn=!1),Ye.target&&!(qn?Ye.inRange&&Ke!==1/0?Lt/Ke<Ye.distance/Ye.range:Ke===1/0&&Ye.range!==1/0||Lt<Ye.distance:!Ye.inRange&&Lt<Ye.distance)||(Ye.target=ct,Ye.distance=Lt,Ye.range=Ke,Ye.inRange=qn,Ye.delta.x=at,Ye.delta.y=pn)}return Ye.inRange&&(w.x=Ye.target.x,w.y=Ye.target.y),S.closest=Ye,Ye},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},bm=mi(Pc,"snap"),ir={start:function(x){var m=x.state,w=x.edges,S=m.options;if(!w)return null;x.state={options:{targets:null,relativePoints:[{x:w.left?0:1,y:w.top?0:1}],offset:S.offset||"self",origin:{x:0,y:0},range:S.range}},m.targetFields=m.targetFields||[["width","height"],["x","y"]],Pc.start(x),m.offsets=x.state.offsets,x.state=m},set:function(x){var m=x.interaction,w=x.state,S=x.coords,T=w.options,C=w.offsets,P={x:S.x-C[0].x,y:S.y-C[0].y};w.options=Te({},T),w.options.targets=[];for(var z=0,Y=T.targets||[];z<Y.length;z++){var K=Y[z],W=void 0;if(W=O.func(K)?K(P.x,P.y,m):K){for(var te=0,ve=w.targetFields;te<ve.length;te++){var Ne=ve[te],ke=Ne[0],De=Ne[1];if(ke in W||De in W){W.x=W[ke],W.y=W[De];break}}w.options.targets.push(W)}}var Ve=Pc.set(x);return w.options=T,Ve},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},co=mi(ir,"snapSize"),Lc={aspectRatio:hm,restrictEdges:pm,restrict:fm,restrictRect:gm,restrictSize:vm,snapEdges:mi({start:function(x){var m=x.edges;return m?(x.state.targetFields=x.state.targetFields||[[m.left?"left":"right",m.top?"top":"bottom"]],ir.start(x)):null},set:ir.set,defaults:Te(Ka(ir.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:bm,snapSize:co,spring:sl,avoid:sl,transform:sl,rubberband:sl},Wd={id:"modifiers",install:function(x){var m=x.interactStatic;for(var w in x.usePlugin(Tc),x.usePlugin(cm),m.modifiers=Lc,Lc){var S=Lc[w],T=S._defaults,C=S._methods;T._methods=C,x.defaults.perAction[w]=T}}},$d=Wd,zc=(function(x){p(w,x);var m=j(w);function w(S,T,C,P,z,Y){var K;if(o(this,w),Wn(_(K=m.call(this,z)),C),C!==T&&Wn(_(K),T),K.timeStamp=Y,K.originalEvent=C,K.type=S,K.pointerId=lt(T),K.pointerType=ms(T),K.target=P,K.currentTarget=null,S==="tap"){var W=z.getPointerIndex(T);K.dt=K.timeStamp-z.pointers[W].downTime;var te=K.timeStamp-z.tapTime;K.double=!!z.prevTap&&z.prevTap.type!=="doubletap"&&z.prevTap.target===K.target&&te<500}else S==="doubletap"&&(K.dt=T.timeStamp-z.tapTime,K.double=!0);return K}return d(w,[{key:"_subtractOrigin",value:function(S){var T=S.x,C=S.y;return this.pageX-=T,this.pageY-=C,this.clientX-=T,this.clientY-=C,this}},{key:"_addOrigin",value:function(S){var T=S.x,C=S.y;return this.pageX+=T,this.pageY+=C,this.clientX+=T,this.clientY+=C,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),w})(xn),ar={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(x){x.pointerEvents=ar,x.defaults.actions.pointerEvents=ar.defaults,Te(x.actions.phaselessTypes,ar.types)},listeners:{"interactions:new":function(x){var m=x.interaction;m.prevTap=null,m.tapTime=0},"interactions:update-pointer":function(x){var m=x.down,w=x.pointerInfo;!m&&w.hold||(w.hold={duration:1/0,timeout:null})},"interactions:move":function(x,m){var w=x.interaction,S=x.pointer,T=x.event,C=x.eventTarget;x.duplicate||w.pointerIsDown&&!w.pointerWasMoved||(w.pointerIsDown&&Bc(x),yi({interaction:w,pointer:S,event:T,eventTarget:C,type:"move"},m))},"interactions:down":function(x,m){(function(w,S){for(var T=w.interaction,C=w.pointer,P=w.event,z=w.eventTarget,Y=w.pointerIndex,K=T.pointers[Y].hold,W=Ie(z),te={interaction:T,pointer:C,event:P,eventTarget:z,type:"hold",targets:[],path:W,node:null},ve=0;ve<W.length;ve++){var Ne=W[ve];te.node=Ne,S.fire("pointerEvents:collect-targets",te)}if(te.targets.length){for(var ke=1/0,De=0,Ve=te.targets;De<Ve.length;De++){var Be=Ve[De].eventable.options.holdDuration;Be<ke&&(ke=Be)}K.duration=ke,K.timeout=setTimeout(function(){yi({interaction:T,eventTarget:z,pointer:C,event:P,type:"hold"},S)},ke)}})(x,m),yi(x,m)},"interactions:up":function(x,m){Bc(x),yi(x,m),(function(w,S){var T=w.interaction,C=w.pointer,P=w.event,z=w.eventTarget;T.pointerWasMoved||yi({interaction:T,eventTarget:z,pointer:C,event:P,type:"tap"},S)})(x,m)},"interactions:cancel":function(x,m){Bc(x),yi(x,m)}},PointerEvent:zc,fire:yi,collectEventTargets:ua,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function yi(x,m){var w=x.interaction,S=x.pointer,T=x.event,C=x.eventTarget,P=x.type,z=x.targets,Y=z===void 0?ua(x,m):z,K=new zc(P,S,T,C,w,m.now());m.fire("pointerEvents:new",{pointerEvent:K});for(var W={interaction:w,pointer:S,event:T,eventTarget:C,targets:Y,type:P,pointerEvent:K},te=0;te<Y.length;te++){var ve=Y[te];for(var Ne in ve.props||{})K[Ne]=ve.props[Ne];var ke=st(ve.eventable,ve.node);if(K._subtractOrigin(ke),K.eventable=ve.eventable,K.currentTarget=ve.node,ve.eventable.fire(K),K._addOrigin(ke),K.immediatePropagationStopped||K.propagationStopped&&te+1<Y.length&&Y[te+1].node!==K.currentTarget)break}if(m.fire("pointerEvents:fired",W),P==="tap"){var De=K.double?yi({interaction:w,pointer:S,event:T,eventTarget:C,type:"doubletap"},m):K;w.prevTap=De,w.tapTime=De.timeStamp}return K}function ua(x,m){var w=x.interaction,S=x.pointer,T=x.event,C=x.eventTarget,P=x.type,z=w.getPointerIndex(S),Y=w.pointers[z];if(P==="tap"&&(w.pointerWasMoved||!Y||Y.downTarget!==C))return[];for(var K=Ie(C),W={interaction:w,pointer:S,event:T,eventTarget:C,type:P,path:K,targets:[],node:null},te=0;te<K.length;te++){var ve=K[te];W.node=ve,m.fire("pointerEvents:collect-targets",W)}return P==="hold"&&(W.targets=W.targets.filter(function(Ne){var ke,De;return Ne.eventable.options.holdDuration===((ke=w.pointers[z])==null||(De=ke.hold)==null?void 0:De.duration)})),W.targets}function Bc(x){var m=x.interaction,w=x.pointerIndex,S=m.pointers[w].hold;S&&S.timeout&&(clearTimeout(S.timeout),S.timeout=null)}var _m=Object.freeze({__proto__:null,default:ar});function wm(x){var m=x.interaction;m.holdIntervalHandle&&(clearInterval(m.holdIntervalHandle),m.holdIntervalHandle=null)}var qd={id:"pointer-events/holdRepeat",install:function(x){x.usePlugin(ar);var m=x.pointerEvents;m.defaults.holdRepeatInterval=0,m.types.holdrepeat=x.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(x,m){return x["pointerEvents:".concat(m)]=wm,x},{"pointerEvents:new":function(x){var m=x.pointerEvent;m.type==="hold"&&(m.count=(m.count||0)+1)},"pointerEvents:fired":function(x,m){var w=x.interaction,S=x.pointerEvent,T=x.eventTarget,C=x.targets;if(S.type==="hold"&&C.length){var P=C[0].eventable.options.holdRepeatInterval;P<=0||(w.holdIntervalHandle=setTimeout(function(){m.pointerEvents.fire({interaction:w,eventTarget:T,type:"hold",pointer:S,event:S},m)},P))}}})},Gd=qd,uo={id:"pointer-events/interactableTargets",install:function(x){var m=x.Interactable;m.prototype.pointerEvents=function(S){return Te(this.events.options,S),this};var w=m.prototype._backCompatOption;m.prototype._backCompatOption=function(S,T){var C=w.call(this,S,T);return C===this&&(this.events.options[S]=T),C}},listeners:{"pointerEvents:collect-targets":function(x,m){var w=x.targets,S=x.node,T=x.type,C=x.eventTarget;m.interactables.forEachMatch(S,function(P){var z=P.events,Y=z.options;z.types[T]&&z.types[T].length&&P.testIgnoreAllow(Y,S,C)&&w.push({node:S,eventable:z,props:{interactable:P}})})},"interactable:new":function(x){var m=x.interactable;m.events.getRect=function(w){return m.getRect(w)}},"interactable:set":function(x,m){var w=x.interactable,S=x.options;Te(w.events.options,m.pointerEvents.defaults),Te(w.events.options,S.pointerEvents||{})}}},ho=uo,Sm={id:"pointer-events",install:function(x){x.usePlugin(_m),x.usePlugin(Gd),x.usePlugin(ho)}},il=Sm,Xd={id:"reflow",install:function(x){var m=x.Interactable;x.actions.phases.reflow=!0,m.prototype.reflow=function(w){return(function(S,T,C){for(var P=S.getAllElements(),z=C.window.Promise,Y=z?[]:null,K=function(){var te=P[W],ve=S.getRect(te);if(!ve)return 1;var Ne,ke=di(C.interactions.list,function(Be){return Be.interacting()&&Be.interactable===S&&Be.element===te&&Be.prepared.name===T.name});if(ke)ke.move(),Y&&(Ne=ke._reflowPromise||new z(function(Be){ke._reflowResolve=Be}));else{var De=Bt(ve),Ve=(function(Be){return{coords:Be,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}})({page:{x:De.x,y:De.y},client:{x:De.x,y:De.y},timeStamp:C.now()});Ne=(function(Be,Ye,nt,ct,Ke){var at=Be.interactions.new({pointerType:"reflow"}),pn={interaction:at,event:Ke,pointer:Ke,eventTarget:nt,phase:"reflow"};at.interactable=Ye,at.element=nt,at.prevEvent=Ke,at.updatePointer(Ke,Ke,nt,!0),wt(at.coords.delta),hs(at.prepared,ct),at._doPhase(pn);var Lt=Be.window,qn=Lt.Promise,_s=qn?new qn(function(Gn){at._reflowResolve=Gn}):void 0;return at._reflowPromise=_s,at.start(ct,Ye,nt),at._interacting?(at.move(pn),at.end(Ke)):(at.stop(),at._reflowResolve()),at.removePointer(Ke,Ke),_s})(C,S,te,T,Ve)}Y&&Y.push(Ne)},W=0;W<P.length&&!K();W++);return Y&&z.all(Y).then(function(){return S})})(this,w,x)}},listeners:{"interactions:stop":function(x,m){var w=x.interaction;w.pointerType==="reflow"&&(w._reflowResolve&&w._reflowResolve(),(function(S,T){S.splice(S.indexOf(T),1)})(m.interactions.list,w))}}},Kd=Xd;if($n.use(jc),$n.use(aa),$n.use(il),$n.use(xi),$n.use($d),$n.use(Od),$n.use(Le),$n.use(jn),$n.use(Kd),$n.default=$n,a(t)==="object"&&t)try{t.exports=$n}catch{}return $n.default=$n,$n})})(cp,cp.exports);var gV=cp.exports;const Jx=Nd(gV);var YM={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(Ho,function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(o,l,d){var h=l.prototype;d.utc=function(N){var D={date:N,utc:!0,args:arguments};return new l(D)},h.utc=function(N){var D=d(this.toDate(),{locale:this.$L,utc:!0});return N?D.add(this.utcOffset(),n):D},h.local=function(){return d(this.toDate(),{locale:this.$L,utc:!1})};var p=h.parse;h.parse=function(N){N.utc&&(this.$u=!0),this.$utils().u(N.$offset)||(this.$offset=N.$offset),p.call(this,N)};var g=h.init;h.init=function(){if(this.$u){var N=this.$d;this.$y=N.getUTCFullYear(),this.$M=N.getUTCMonth(),this.$D=N.getUTCDate(),this.$W=N.getUTCDay(),this.$H=N.getUTCHours(),this.$m=N.getUTCMinutes(),this.$s=N.getUTCSeconds(),this.$ms=N.getUTCMilliseconds()}else g.call(this)};var y=h.utcOffset;h.utcOffset=function(N,D){var R=this.$utils().u;if(R(N))return this.$u?0:R(this.$offset)?y.call(this):this.$offset;if(typeof N=="string"&&(N=(function($){$===void 0&&($="");var I=$.match(s);if(!I)return null;var O=(""+I[0]).match(a)||["-",0,0],q=O[0],J=60*+O[1]+ +O[2];return J===0?0:q==="+"?J:-J})(N),N===null))return this;var E=Math.abs(N)<=16?60*N:N;if(E===0)return this.utc(D);var B=this.clone();if(D)return B.$offset=E,B.$u=!1,B;var U=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(B=this.local().add(E+U,n)).$offset=E,B.$x.$localOffset=U,B};var _=h.format;h.format=function(N){var D=N||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return _.call(this,D)},h.valueOf=function(){var N=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*N},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var j=h.toDate;h.toDate=function(N){return N==="s"&&this.$offset?d(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():j.call(this)};var k=h.diff;h.diff=function(N,D,R){if(N&&this.$u===N.$u)return k.call(this,N,D,R);var E=this.local(),B=d(N).local();return k.call(E,B,D,R)}}})})(YM);var xV=YM.exports;const yV=Nd(xV);function vV(){this.__data__=[],this.size=0}var bV=vV;function _V(t,e){return t===e||t!==t&&e!==e}var WM=_V,wV=WM;function SV(t,e){for(var n=t.length;n--;)if(wV(t[n][0],e))return n;return-1}var Bp=SV,jV=Bp,TV=Array.prototype,kV=TV.splice;function NV(t){var e=this.__data__,n=jV(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():kV.call(e,n,1),--this.size,!0}var MV=NV,DV=Bp;function CV(t){var e=this.__data__,n=DV(e,t);return n<0?void 0:e[n][1]}var EV=CV,AV=Bp;function OV(t){return AV(this.__data__,t)>-1}var RV=OV,PV=Bp;function LV(t,e){var n=this.__data__,s=PV(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}var zV=LV,BV=bV,VV=MV,FV=EV,HV=RV,UV=zV;function uc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}uc.prototype.clear=BV;uc.prototype.delete=VV;uc.prototype.get=FV;uc.prototype.has=HV;uc.prototype.set=UV;var Vp=uc,IV=Vp;function YV(){this.__data__=new IV,this.size=0}var WV=YV;function $V(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var qV=$V;function GV(t){return this.__data__.get(t)}var XV=GV;function KV(t){return this.__data__.has(t)}var ZV=KV,QV=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,$M=QV,JV=$M,eF=typeof self=="object"&&self&&self.Object===Object&&self,tF=JV||eF||Function("return this")(),$a=tF,nF=$a,sF=nF.Symbol,C0=sF,zj=C0,qM=Object.prototype,iF=qM.hasOwnProperty,aF=qM.toString,Mu=zj?zj.toStringTag:void 0;function rF(t){var e=iF.call(t,Mu),n=t[Mu];try{t[Mu]=void 0;var s=!0}catch{}var a=aF.call(t);return s&&(e?t[Mu]=n:delete t[Mu]),a}var oF=rF,lF=Object.prototype,cF=lF.toString;function uF(t){return cF.call(t)}var dF=uF,Bj=C0,hF=oF,fF=dF,pF="[object Null]",mF="[object Undefined]",Vj=Bj?Bj.toStringTag:void 0;function gF(t){return t==null?t===void 0?mF:pF:Vj&&Vj in Object(t)?hF(t):fF(t)}var Fp=gF;function xF(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var GM=xF,yF=Fp,vF=GM,bF="[object AsyncFunction]",_F="[object Function]",wF="[object GeneratorFunction]",SF="[object Proxy]";function jF(t){if(!vF(t))return!1;var e=yF(t);return e==_F||e==wF||e==bF||e==SF}var XM=jF,TF=$a,kF=TF["__core-js_shared__"],NF=kF,ey=NF,Fj=(function(){var t=/[^.]+$/.exec(ey&&ey.keys&&ey.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function MF(t){return!!Fj&&Fj in t}var DF=MF,CF=Function.prototype,EF=CF.toString;function AF(t){if(t!=null){try{return EF.call(t)}catch{}try{return t+""}catch{}}return""}var KM=AF,OF=XM,RF=DF,PF=GM,LF=KM,zF=/[\\^$.*+?()[\]{}|]/g,BF=/^\[object .+?Constructor\]$/,VF=Function.prototype,FF=Object.prototype,HF=VF.toString,UF=FF.hasOwnProperty,IF=RegExp("^"+HF.call(UF).replace(zF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YF(t){if(!PF(t)||RF(t))return!1;var e=OF(t)?IF:BF;return e.test(LF(t))}var WF=YF;function $F(t,e){return t?.[e]}var qF=$F,GF=WF,XF=qF;function KF(t,e){var n=XF(t,e);return GF(n)?n:void 0}var dc=KF,ZF=dc,QF=$a,JF=ZF(QF,"Map"),E0=JF,e9=dc,t9=e9(Object,"create"),Hp=t9,Hj=Hp;function n9(){this.__data__=Hj?Hj(null):{},this.size=0}var s9=n9;function i9(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var a9=i9,r9=Hp,o9="__lodash_hash_undefined__",l9=Object.prototype,c9=l9.hasOwnProperty;function u9(t){var e=this.__data__;if(r9){var n=e[t];return n===o9?void 0:n}return c9.call(e,t)?e[t]:void 0}var d9=u9,h9=Hp,f9=Object.prototype,p9=f9.hasOwnProperty;function m9(t){var e=this.__data__;return h9?e[t]!==void 0:p9.call(e,t)}var g9=m9,x9=Hp,y9="__lodash_hash_undefined__";function v9(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=x9&&e===void 0?y9:e,this}var b9=v9,_9=s9,w9=a9,S9=d9,j9=g9,T9=b9;function hc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}hc.prototype.clear=_9;hc.prototype.delete=w9;hc.prototype.get=S9;hc.prototype.has=j9;hc.prototype.set=T9;var k9=hc,Uj=k9,N9=Vp,M9=E0;function D9(){this.size=0,this.__data__={hash:new Uj,map:new(M9||N9),string:new Uj}}var C9=D9;function E9(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var A9=E9,O9=A9;function R9(t,e){var n=t.__data__;return O9(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Up=R9,P9=Up;function L9(t){var e=P9(this,t).delete(t);return this.size-=e?1:0,e}var z9=L9,B9=Up;function V9(t){return B9(this,t).get(t)}var F9=V9,H9=Up;function U9(t){return H9(this,t).has(t)}var I9=U9,Y9=Up;function W9(t,e){var n=Y9(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}var $9=W9,q9=C9,G9=z9,X9=F9,K9=I9,Z9=$9;function fc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}fc.prototype.clear=q9;fc.prototype.delete=G9;fc.prototype.get=X9;fc.prototype.has=K9;fc.prototype.set=Z9;var ZM=fc,Q9=Vp,J9=E0,eH=ZM,tH=200;function nH(t,e){var n=this.__data__;if(n instanceof Q9){var s=n.__data__;if(!J9||s.length<tH-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new eH(s)}return n.set(t,e),this.size=n.size,this}var sH=nH,iH=Vp,aH=WV,rH=qV,oH=XV,lH=ZV,cH=sH;function pc(t){var e=this.__data__=new iH(t);this.size=e.size}pc.prototype.clear=aH;pc.prototype.delete=rH;pc.prototype.get=oH;pc.prototype.has=lH;pc.prototype.set=cH;var uH=pc,dH="__lodash_hash_undefined__";function hH(t){return this.__data__.set(t,dH),this}var fH=hH;function pH(t){return this.__data__.has(t)}var mH=pH,gH=ZM,xH=fH,yH=mH;function up(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new gH;++e<n;)this.add(t[e])}up.prototype.add=up.prototype.push=xH;up.prototype.has=yH;var vH=up;function bH(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}var _H=bH;function wH(t,e){return t.has(e)}var SH=wH,jH=vH,TH=_H,kH=SH,NH=1,MH=2;function DH(t,e,n,s,a,o){var l=n&NH,d=t.length,h=e.length;if(d!=h&&!(l&&h>d))return!1;var p=o.get(t),g=o.get(e);if(p&&g)return p==e&&g==t;var y=-1,_=!0,j=n&MH?new jH:void 0;for(o.set(t,e),o.set(e,t);++y<d;){var k=t[y],N=e[y];if(s)var D=l?s(N,k,y,e,t,o):s(k,N,y,t,e,o);if(D!==void 0){if(D)continue;_=!1;break}if(j){if(!TH(e,function(R,E){if(!kH(j,E)&&(k===R||a(k,R,n,s,o)))return j.push(E)})){_=!1;break}}else if(!(k===N||a(k,N,n,s,o))){_=!1;break}}return o.delete(t),o.delete(e),_}var QM=DH,CH=$a,EH=CH.Uint8Array,AH=EH;function OH(t){var e=-1,n=Array(t.size);return t.forEach(function(s,a){n[++e]=[a,s]}),n}var RH=OH;function PH(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var LH=PH,Ij=C0,Yj=AH,zH=WM,BH=QM,VH=RH,FH=LH,HH=1,UH=2,IH="[object Boolean]",YH="[object Date]",WH="[object Error]",$H="[object Map]",qH="[object Number]",GH="[object RegExp]",XH="[object Set]",KH="[object String]",ZH="[object Symbol]",QH="[object ArrayBuffer]",JH="[object DataView]",Wj=Ij?Ij.prototype:void 0,ty=Wj?Wj.valueOf:void 0;function e7(t,e,n,s,a,o,l){switch(n){case JH:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case QH:return!(t.byteLength!=e.byteLength||!o(new Yj(t),new Yj(e)));case IH:case YH:case qH:return zH(+t,+e);case WH:return t.name==e.name&&t.message==e.message;case GH:case KH:return t==e+"";case $H:var d=VH;case XH:var h=s&HH;if(d||(d=FH),t.size!=e.size&&!h)return!1;var p=l.get(t);if(p)return p==e;s|=UH,l.set(t,e);var g=BH(d(t),d(e),s,a,o,l);return l.delete(t),g;case ZH:if(ty)return ty.call(t)==ty.call(e)}return!1}var t7=e7;function n7(t,e){for(var n=-1,s=e.length,a=t.length;++n<s;)t[a+n]=e[n];return t}var s7=n7,i7=Array.isArray,A0=i7,a7=s7,r7=A0;function o7(t,e,n){var s=e(t);return r7(t)?s:a7(s,n(t))}var l7=o7;function c7(t,e){for(var n=-1,s=t==null?0:t.length,a=0,o=[];++n<s;){var l=t[n];e(l,n,t)&&(o[a++]=l)}return o}var u7=c7;function d7(){return[]}var h7=d7,f7=u7,p7=h7,m7=Object.prototype,g7=m7.propertyIsEnumerable,$j=Object.getOwnPropertySymbols,x7=$j?function(t){return t==null?[]:(t=Object(t),f7($j(t),function(e){return g7.call(t,e)}))}:p7,y7=x7;function v7(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var b7=v7;function _7(t){return t!=null&&typeof t=="object"}var Ip=_7,w7=Fp,S7=Ip,j7="[object Arguments]";function T7(t){return S7(t)&&w7(t)==j7}var k7=T7,qj=k7,N7=Ip,JM=Object.prototype,M7=JM.hasOwnProperty,D7=JM.propertyIsEnumerable,C7=qj((function(){return arguments})())?qj:function(t){return N7(t)&&M7.call(t,"callee")&&!D7.call(t,"callee")},E7=C7,dp={exports:{}};function A7(){return!1}var O7=A7;dp.exports;(function(t,e){var n=$a,s=O7,a=e&&!e.nodeType&&e,o=a&&!0&&t&&!t.nodeType&&t,l=o&&o.exports===a,d=l?n.Buffer:void 0,h=d?d.isBuffer:void 0,p=h||s;t.exports=p})(dp,dp.exports);var eD=dp.exports,R7=9007199254740991,P7=/^(?:0|[1-9]\d*)$/;function L7(t,e){var n=typeof t;return e=e??R7,!!e&&(n=="number"||n!="symbol"&&P7.test(t))&&t>-1&&t%1==0&&t<e}var z7=L7,B7=9007199254740991;function V7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=B7}var tD=V7,F7=Fp,H7=tD,U7=Ip,I7="[object Arguments]",Y7="[object Array]",W7="[object Boolean]",$7="[object Date]",q7="[object Error]",G7="[object Function]",X7="[object Map]",K7="[object Number]",Z7="[object Object]",Q7="[object RegExp]",J7="[object Set]",eU="[object String]",tU="[object WeakMap]",nU="[object ArrayBuffer]",sU="[object DataView]",iU="[object Float32Array]",aU="[object Float64Array]",rU="[object Int8Array]",oU="[object Int16Array]",lU="[object Int32Array]",cU="[object Uint8Array]",uU="[object Uint8ClampedArray]",dU="[object Uint16Array]",hU="[object Uint32Array]",nn={};nn[iU]=nn[aU]=nn[rU]=nn[oU]=nn[lU]=nn[cU]=nn[uU]=nn[dU]=nn[hU]=!0;nn[I7]=nn[Y7]=nn[nU]=nn[W7]=nn[sU]=nn[$7]=nn[q7]=nn[G7]=nn[X7]=nn[K7]=nn[Z7]=nn[Q7]=nn[J7]=nn[eU]=nn[tU]=!1;function fU(t){return U7(t)&&H7(t.length)&&!!nn[F7(t)]}var pU=fU;function mU(t){return function(e){return t(e)}}var gU=mU,hp={exports:{}};hp.exports;(function(t,e){var n=$M,s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o&&n.process,d=(function(){try{var h=a&&a.require&&a.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}})();t.exports=d})(hp,hp.exports);var xU=hp.exports,yU=pU,vU=gU,Gj=xU,Xj=Gj&&Gj.isTypedArray,bU=Xj?vU(Xj):yU,nD=bU,_U=b7,wU=E7,SU=A0,jU=eD,TU=z7,kU=nD,NU=Object.prototype,MU=NU.hasOwnProperty;function DU(t,e){var n=SU(t),s=!n&&wU(t),a=!n&&!s&&jU(t),o=!n&&!s&&!a&&kU(t),l=n||s||a||o,d=l?_U(t.length,String):[],h=d.length;for(var p in t)(e||MU.call(t,p))&&!(l&&(p=="length"||a&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||TU(p,h)))&&d.push(p);return d}var CU=DU,EU=Object.prototype;function AU(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||EU;return t===n}var OU=AU;function RU(t,e){return function(n){return t(e(n))}}var PU=RU,LU=PU,zU=LU(Object.keys,Object),BU=zU,VU=OU,FU=BU,HU=Object.prototype,UU=HU.hasOwnProperty;function IU(t){if(!VU(t))return FU(t);var e=[];for(var n in Object(t))UU.call(t,n)&&n!="constructor"&&e.push(n);return e}var YU=IU,WU=XM,$U=tD;function qU(t){return t!=null&&$U(t.length)&&!WU(t)}var GU=qU,XU=CU,KU=YU,ZU=GU;function QU(t){return ZU(t)?XU(t):KU(t)}var JU=QU,eI=l7,tI=y7,nI=JU;function sI(t){return eI(t,nI,tI)}var iI=sI,Kj=iI,aI=1,rI=Object.prototype,oI=rI.hasOwnProperty;function lI(t,e,n,s,a,o){var l=n&aI,d=Kj(t),h=d.length,p=Kj(e),g=p.length;if(h!=g&&!l)return!1;for(var y=h;y--;){var _=d[y];if(!(l?_ in e:oI.call(e,_)))return!1}var j=o.get(t),k=o.get(e);if(j&&k)return j==e&&k==t;var N=!0;o.set(t,e),o.set(e,t);for(var D=l;++y<h;){_=d[y];var R=t[_],E=e[_];if(s)var B=l?s(E,R,_,e,t,o):s(R,E,_,t,e,o);if(!(B===void 0?R===E||a(R,E,n,s,o):B)){N=!1;break}D||(D=_=="constructor")}if(N&&!D){var U=t.constructor,$=e.constructor;U!=$&&"constructor"in t&&"constructor"in e&&!(typeof U=="function"&&U instanceof U&&typeof $=="function"&&$ instanceof $)&&(N=!1)}return o.delete(t),o.delete(e),N}var cI=lI,uI=dc,dI=$a,hI=uI(dI,"DataView"),fI=hI,pI=dc,mI=$a,gI=pI(mI,"Promise"),xI=gI,yI=dc,vI=$a,bI=yI(vI,"Set"),_I=bI,wI=dc,SI=$a,jI=wI(SI,"WeakMap"),TI=jI,tv=fI,nv=E0,sv=xI,iv=_I,av=TI,sD=Fp,mc=KM,Zj="[object Map]",kI="[object Object]",Qj="[object Promise]",Jj="[object Set]",eT="[object WeakMap]",tT="[object DataView]",NI=mc(tv),MI=mc(nv),DI=mc(sv),CI=mc(iv),EI=mc(av),Bo=sD;(tv&&Bo(new tv(new ArrayBuffer(1)))!=tT||nv&&Bo(new nv)!=Zj||sv&&Bo(sv.resolve())!=Qj||iv&&Bo(new iv)!=Jj||av&&Bo(new av)!=eT)&&(Bo=function(t){var e=sD(t),n=e==kI?t.constructor:void 0,s=n?mc(n):"";if(s)switch(s){case NI:return tT;case MI:return Zj;case DI:return Qj;case CI:return Jj;case EI:return eT}return e});var AI=Bo,ny=uH,OI=QM,RI=t7,PI=cI,nT=AI,sT=A0,iT=eD,LI=nD,zI=1,aT="[object Arguments]",rT="[object Array]",vf="[object Object]",BI=Object.prototype,oT=BI.hasOwnProperty;function VI(t,e,n,s,a,o){var l=sT(t),d=sT(e),h=l?rT:nT(t),p=d?rT:nT(e);h=h==aT?vf:h,p=p==aT?vf:p;var g=h==vf,y=p==vf,_=h==p;if(_&&iT(t)){if(!iT(e))return!1;l=!0,g=!1}if(_&&!g)return o||(o=new ny),l||LI(t)?OI(t,e,n,s,a,o):RI(t,e,h,n,s,a,o);if(!(n&zI)){var j=g&&oT.call(t,"__wrapped__"),k=y&&oT.call(e,"__wrapped__");if(j||k){var N=j?t.value():t,D=k?e.value():e;return o||(o=new ny),a(N,D,n,s,o)}}return _?(o||(o=new ny),PI(t,e,n,s,a,o)):!1}var FI=VI,HI=FI,lT=Ip;function iD(t,e,n,s,a){return t===e?!0:t==null||e==null||!lT(t)&&!lT(e)?t!==t&&e!==e:HI(t,e,n,s,iD,a)}var UI=iD,II=UI;function YI(t,e){return II(t,e)}var WI=YI;const rv=Nd(WI);function mt(t,e){return typeof t.get=="function"?t.get(e):t[e]}function cT(t){return typeof t.count=="function"?t.count():t.length}function Xu(t,e){return cT(t)===cT(e)&&t.every((n,s)=>n===mt(e,s.toString()))}function $I(t,e){const n={};return t.forEach(s=>{n[s[e]]=s}),n}function Rf(){}function Vo(...t){return(e,...n)=>{e.preventDefault(),t.forEach(s=>s&&s(e,...n))}}function aD({item:t,itemContext:e,getItemProps:n,getResizeProps:s}){const{left:a,right:o}=s(),{key:l,ref:d,...h}=n(t.itemProps??{}),{useResizeHandle:p}=e;return A.createElement("div",{...h,ref:d,key:`${l}-outer`},p?A.createElement("div",{...a,key:`${l}-lr`}):null,u.jsx("div",{className:"rct-item-content",style:{maxHeight:`${e.dimensions.height}`},children:e.title},`${l}-content`),p?A.createElement("div",{...o,key:`${l}-rr`}):null)}function ov(t,e,n){return(e-t)/n}function lv(t,e,n,s){const a=n/(e-t);return(s-t)*a}function rD(t,e,n,s){return(e-t)/n*s+t}function oD(t,e,n,s,a){let o=Qi(t).startOf(n);if(s[n]&&s[n]>1){const l=o.get(n);o=o.set(n,l-l%s[n])}for(;o.valueOf()<e;){let l=Qi(o).add(s[n]||1,n).startOf(n);l.valueOf()<=o.valueOf()&&(l=l.add(s[n]||1,n)),a(o,l),o=l}}const uT=17;function sy(t,e,n){const s={second:1e3,minute:60,hour:60,day:24,month:30,year:12};let a="year",o=t;return Object.keys(s).some(l=>{const d=l;o=o/s[d];const h=o/n[d],p=n[d]&&n[d]>1?3*uT:uT,g=e/p;if(h<g)return a=l,!0}),a}const dT={second:"minute",minute:"hour",hour:"day",day:"month",month:"year",year:"year"};function lD(t){if(!dT[t])throw new Error(`unit ${t} is not acceptable`);return dT[t]}function qI({itemTimeStart:t,itemTimeEnd:e,dragTime:n,isDragging:s,isResizing:a,resizingEdge:o,resizeTime:l}){const d=e-t;return[s&&n?n:a&&o==="left"&&l?l:t,s&&n?n+d:a&&o==="right"&&l?l:e]}function GI({itemTimeStart:t,itemTimeEnd:e,canvasTimeStart:n,canvasTimeEnd:s,canvasWidth:a}){const o=e-t,l=Math.max(t,n),d=Math.min(e,s),h=lv(n,s,a,l),p=lv(n,s,a,d)-h;return{left:h,width:Math.max(p,3),collisionLeft:t,collisionWidth:o}}function cD(t,e){const{groupIdKey:n}=e,s={};for(let a=0;a<t.length;a++)s[mt(t[a],n)]={index:a,group:t[a]};return s}function XI(t,e){var n,s;const a={},o=Object.keys(e);for(let l=0;l<o.length;l++){const d=e[o[l]];a[l]={index:d.index,group:d.group,items:[]}}for(let l=0;l<t.length;l++)if(t[l].dimensions!==void 0&&((n=t[l].dimensions)==null?void 0:n.order)!==void 0){const d=a[((s=t[l].dimensions)==null?void 0:s.order.index)??0];d&&d.items.push(t[l])}return a}function uD(t,e,n,s){const{itemTimeStartKey:a,itemTimeEndKey:o}=s;return t.filter(l=>{const d=Qi(mt(l,a)).valueOf()<=n,h=Qi(mt(l,o)).valueOf()>=e;return d&&h})}const KI=.001;function ZI(t,e,n,s=KI){return t.collisionLeft+s<e.collisionLeft+e.collisionWidth&&t.collisionLeft+t.collisionWidth-s>e.collisionLeft&&t.top-n+s<e.top+e.height&&t.top+t.height+n-s>e.top}function QI(t,e,n,s,a,o,l){let d=s;const h=l??(t-e.dimensions.height)/2;if(e.dimensions.stack&&e.dimensions.top===null){e.dimensions.top=a+h,d=Math.max(d,t,e.dimensions.height+h*2);do{var p=null;for(let g=o-1,y=0;g>=y;g--){const _=n[g];if(_.dimensions.top!==null&&_.dimensions.stack&&ZI(e.dimensions,_.dimensions,h)){p=_;break}}p!=null&&(e.dimensions.top=p.dimensions.top+p.dimensions.height+h*(l!==void 0?1:2),d=Math.max(d,e.dimensions.top+e.dimensions.height+h-a))}while(p)}return{groupHeight:d,verticalMargin:h,itemTop:e.dimensions.top}}function JI(t,e,n,s,a){var o,l;const d=a??(t-(((o=e.dimensions)==null?void 0:o.height)??1))/2;return e.dimensions&&e.dimensions.top===null&&(e.dimensions.top=s+d,n=Math.max(n,t,e.dimensions.height+d)),{groupHeight:n,verticalMargin:0,itemTop:((l=e.dimensions)==null?void 0:l.top)??0}}function hT(t=[]){return t.reduce((e,n)=>e+n,0)}function eY(t,e,n,s,a){const o=[],l=[],d=XI(t,e);for(const h in d){const p=d[h],{items:g,group:y}=p,_=hT(o),j=y.stackItems!==void 0?y.stackItems:s,{groupHeight:k}=tY(g,j,n,_,a);l.push(_),y.height?o.push(y.height):o.push(Math.max(k,n))}return{height:hT(o),groupHeights:o,groupTops:l}}function tY(t,e,n,s,a){let o=0,l=0;for(let d=0;d<t.length;d++){const h=e?QI(n,t[d],t,o,s,d,a):JI(n,t[d],o,s,a);o=h.groupHeight,l=h.verticalMargin}return{groupHeight:o,verticalMargin:l}}function Fu(t,e,n,s,a,o,l,d,h,p,g,y,_,j,k,N){const D=uD(t,s,a,o).map(I=>sY({item:I,keys:o,draggingItem:p,resizingItem:g,dragTime:y,resizingEdge:_,resizeTime:j,groups:e,newGroupOrder:k}));if(e.length===0)return{dimensionItems:[],height:0,groupHeights:[],groupTops:[]};const R=cD(e,o),E=D.map(I=>nY({item:I,keys:o,canvasTimeStart:s,canvasTimeEnd:a,canvasWidth:n,groupOrders:R,lineHeight:l,itemHeightRatio:d,itemVerticalGap:N})).filter(I=>!!I),{height:B,groupHeights:U,groupTops:$}=eY(E,R,l,h,N);return{dimensionItems:E,height:B,groupHeights:U,groupTops:$}}function Or(t,e){return t*e}function nY({item:t,keys:e,canvasTimeStart:n,canvasTimeEnd:s,canvasWidth:a,groupOrders:o,lineHeight:l,itemHeightRatio:d,itemVerticalGap:h}){const p=mt(t,e.itemIdKey),g=GI({itemTimeStart:mt(t,e.itemTimeStartKey),itemTimeEnd:mt(t,e.itemTimeEndKey),canvasTimeStart:n,canvasTimeEnd:s,canvasWidth:a});if(g)return g.top=null,g.order=o[mt(t,e.itemGroupKey)],g.stack=!t.isOverlay,g.height=(t.height||l)*(typeof h>"u"?d:1),{id:p,dimensions:g}}function sY({item:t,keys:e,draggingItem:n,resizingItem:s,dragTime:a,resizingEdge:o,resizeTime:l,groups:d,newGroupOrder:h}){if(!s&&!n)return t;const p=mt(t,e.itemIdKey),g=p===n,y=p===s,[_,j]=qI({itemTimeStart:mt(t,e.itemTimeStartKey),itemTimeEnd:mt(t,e.itemTimeEndKey),isDragging:g,isResizing:y,dragTime:a,resizingEdge:o,resizeTime:l});return{...t,[e.itemTimeStartKey]:_,[e.itemTimeEndKey]:j,[e.itemGroupKey]:g?mt(d[h],e.groupIdKey):mt(t,e.itemGroupKey)}}function dD(t,e,n){const s=e-t,a=t-s*(n-1)/2,o=a+s*n;return[a,o]}function fT(t,e,n,s,a,o,l){const d=o.buffer,h=l.canvasTimeStart,p=l.canvasTimeEnd,g=l.visibleTimeEnd-l.visibleTimeStart,y=e-t,_={...l,visibleTimeStart:t,visibleTimeEnd:e},j=g*(d-1)*.25;if(y!==g||t<=h+j||e>=p-j||n){const[k,N]=dD(t,e,d);_.canvasTimeStart=k,_.canvasTimeEnd=N;const D={...l,..._},R=Or(D.width,o.buffer);Object.assign(_,Fu(s,a,R,D.canvasTimeStart,D.canvasTimeEnd,o.keys,o.lineHeight,o.itemHeightRatio,o.stackItems,D.draggingItem,D.resizingItem,D.dragTime,D.resizingEdge,D.resizeTime,D.newGroupOrder,o.itemVerticalGap))}return _}const iY={fontSize:12,color:"white",cursor:"pointer",background:"#2196f3",borderTopWidth:"1px",borderBottomWidth:"1px",borderLeftWidth:"1px",borderRightWidth:"1px",borderStyle:"solid",borderColor:"#1a6fb3",zIndex:80},aY={background:"#ffc107",borderTopWidth:"1px",borderLeftWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px",borderStyle:"solid",borderColor:"#ff9800",zIndex:82},rY={willChange:"left, top, width",cursor:"move"},oY={borderLeftWidth:3},lY={cursor:"w-resize"},cY={borderRightWidth:"3px"},uY={cursor:"e-resize"},dY={position:"absolute",width:24,maxWidth:"20%",minWidth:2,height:"100%",top:0,left:0,cursor:"pointer",zIndex:88},hY={position:"absolute",width:24,maxWidth:"20%",minWidth:2,height:"100%",top:0,right:0,cursor:"pointer",zIndex:88},fY={getTimelineState:()=>(console.warn('"getTimelineState" default func is being used'),{}),getLeftOffsetFromDate:()=>(console.warn('"getLeftOffsetFromDate" default func is being used'),0),getDateFromLeftOffsetPosition:()=>(console.warn('"getDateFromLeftOffsetPosition" default func is being used'),0),showPeriod:()=>{console.warn('"showPeriod" default func is being used')}},O0=Kt.createContext(fY),{Consumer:pY,Provider:mY}=O0;class gY extends Kt.Component{constructor(e){super(e),Object.defineProperty(this,"getTimelineState",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{visibleTimeStart:n,visibleTimeEnd:s,canvasTimeStart:a,canvasTimeEnd:o,canvasWidth:l,timelineUnit:d,timelineWidth:h}=this.props;return{visibleTimeStart:n,visibleTimeEnd:s,canvasTimeStart:a,canvasTimeEnd:o,canvasWidth:l,timelineUnit:d,timelineWidth:h}}}),Object.defineProperty(this,"getLeftOffsetFromDate",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const{canvasTimeStart:s,canvasTimeEnd:a,canvasWidth:o}=this.props;return lv(s,a,o,n)}}),Object.defineProperty(this,"getDateFromLeftOffsetPosition",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const{canvasTimeStart:s,canvasTimeEnd:a,canvasWidth:o}=this.props;return rD(s,a,o,n)}}),this.state={timelineContext:{getTimelineState:this.getTimelineState,getLeftOffsetFromDate:this.getLeftOffsetFromDate,getDateFromLeftOffsetPosition:this.getDateFromLeftOffsetPosition,showPeriod:this.props.showPeriod}}}render(){return u.jsx(mY,{value:this.state.timelineContext,children:this.props.children})}}const Yp=pY,xY=()=>A.useContext(O0);Qi.extend(yV);class R0 extends A.Component{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{interactMounted:!1,dragging:!1,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null,resizing:!1,resizeEdge:null,resizeStart:null,resizeTime:null}}),Object.defineProperty(this,"itemId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"itemTitle",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"itemDivTitle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"itemTimeStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"itemTimeEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"itemRef",{enumerable:!0,configurable:!0,writable:!0,value:A.createRef()}),Object.defineProperty(this,"dragLeft",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dragRight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startedClicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedTouching",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"dragInProgress",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"fireInteractEvent",{enumerable:!0,configurable:!0,writable:!0,value:n=>{var s;if(this.itemRef&&this.itemRef.current){const a=new CustomEvent("itemInteraction",{bubbles:!0,detail:{itemInteraction:n}});(s=this.itemRef.current)==null||s.dispatchEvent(a)}}}),Object.defineProperty(this,"onMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.state.interactMounted||(n.preventDefault(),this.startedClicking=!0)}}),Object.defineProperty(this,"onMouseUp",{enumerable:!0,configurable:!0,writable:!0,value:n=>{!this.state.interactMounted&&this.startedClicking&&(this.startedClicking=!1,this.actualClick(n,"click"))}}),Object.defineProperty(this,"onTouchStart",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.state.interactMounted||(n.preventDefault(),this.startedTouching=!0)}}),Object.defineProperty(this,"onTouchEnd",{enumerable:!0,configurable:!0,writable:!0,value:n=>{!this.state.interactMounted&&this.startedTouching&&(this.startedTouching=!1,this.actualClick(n,"touch"))}}),Object.defineProperty(this,"handleDoubleClick",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.stopPropagation(),this.props.onItemDoubleClick&&this.props.onItemDoubleClick(this.itemId,n)}}),Object.defineProperty(this,"handleContextMenu",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.props.onContextMenu&&(n.preventDefault(),n.stopPropagation(),this.props.onContextMenu(this.itemId,n))}}),Object.defineProperty(this,"getDragLeftRef",{enumerable:!0,configurable:!0,writable:!0,value:n=>this.dragLeft=n}),Object.defineProperty(this,"getDragRightRef",{enumerable:!0,configurable:!0,writable:!0,value:n=>this.dragRight=n}),Object.defineProperty(this,"getItemProps",{enumerable:!0,configurable:!0,writable:!0,value:(n={})=>{const s="rct-item"+(this.props.item.className?` ${this.props.item.className}`:"");return{key:this.itemId,ref:this.itemRef,title:this.itemDivTitle,className:s+` ${n.className?n.className:""}`,onMouseDown:Vo(this.onMouseDown,n.onMouseDown),onMouseUp:Vo(this.onMouseUp,n.onMouseUp),onTouchStart:Vo(this.onTouchStart,n.onTouchStart),onTouchEnd:Vo(this.onTouchEnd,n.onTouchEnd),onDoubleClick:Vo(this.handleDoubleClick,n.onDoubleClick),onContextMenu:Vo(this.handleContextMenu,n.onContextMenu),style:Object.assign({},this.getItemStyle(n))}}}),Object.defineProperty(this,"getResizeProps",{enumerable:!0,configurable:!0,writable:!0,value:(n={})=>{let s="rct-item-handler rct-item-handler-left rct-item-handler-resize-left";n.leftClassName&&(s+=` ${n.leftClassName}`);let a="rct-item-handler rct-item-handler-right rct-item-handler-resize-right";return n.rightClassName&&(a+=` ${n.rightClassName}`),{left:{ref:this.getDragLeftRef,className:s,style:Object.assign({},dY,n.leftStyle)},right:{ref:this.getDragRightRef,className:a,style:Object.assign({},hY,n.rightStyle)}}}}),this.cacheDataFromProps(e)}shouldComponentUpdate(e,n){return!rv(this.props,e)||!rv(this.state,n)}cacheDataFromProps(e){this.itemId=mt(e.item,e.keys.itemIdKey),this.itemTitle=mt(e.item,e.keys.itemTitleKey),this.itemDivTitle=e.keys.itemDivTitleKey?mt(e.item,e.keys.itemDivTitleKey):this.itemTitle,this.itemTimeStart=mt(e.item,e.keys.itemTimeStartKey),this.itemTimeEnd=mt(e.item,e.keys.itemTimeEndKey)}getTimeRatio(){const{canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s}=this.props;return ov(e,n,s)}dragTimeSnap(e,n){const{dragSnap:s}=this.props;if(s){const a=n?Qi().utcOffset()*60*1e3:0;return Math.round(e/s)*s-a%s}else return e}resizeTimeSnap(e){const{dragSnap:n}=this.props;if(n){const s=this.itemTimeEnd%n;return Math.round((e-s)/n)*n+s}else return e}dragTime(e){const n=Qi(this.itemTimeStart);return this.state.dragging?this.dragTimeSnap(this.timeFor(e)+this.state.dragStart.offset,!0):n.valueOf()}timeFor(e){const n=ov(this.props.canvasTimeStart,this.props.canvasTimeEnd,this.props.canvasWidth),s=lp(this.props.scrollRef).offsetLeft,a=op(this.props.scrollRef);return(e.pageX-s+a.scrollLeft)*n+this.props.canvasTimeStart}dragGroupDelta(e){const{groupTops:n,order:s}=this.props;if(this.state.dragging){if(!this.props.canChangeGroup)return 0;let a=0;const o=lp(this.props.scrollRef).offsetTop,l=op(this.props.scrollRef);for(const d of Object.keys(n)){const h=n[d];if(e.pageY-o+l.scrollTop>h)a=parseInt(d,10)-s.index;else break}return this.props.order.index+a<0?0-this.props.order.index:a}else return 0}resizeTimeDelta(e,n){const s=this.itemTimeEnd-this.itemTimeStart,a=this.dragTimeSnap((e.pageX-this.state.resizeStart)*this.getTimeRatio());return s+(n==="left"?-a:a)<(this.props.dragSnap||1e3)?n==="left"?s-(this.props.dragSnap||1e3):(this.props.dragSnap||1e3)-s:a}mountInteract(){const e=this.props.useResizeHandle?".rct-item-handler-resize-left":!0,n=this.props.useResizeHandle?".rct-item-handler-resize-right":!0;Jx(this.itemRef.current).resizable({edges:{left:this.canResizeLeft()&&e,right:this.canResizeRight()&&n,top:!1,bottom:!1},enabled:this.props.selected&&(this.canResizeLeft()||this.canResizeRight())}).draggable({enabled:this.props.selected&&this.canMove()}).styleCursor(!1).on("dragstart",s=>{if(this.props.selected){this.dragInProgress=!0,this.fireInteractEvent(!0);const a=this.timeFor(s);this.setState({dragging:!0,dragStart:{x:s.pageX,y:s.pageY,offset:this.itemTimeStart-a},preDragPosition:{x:s.target.offsetLeft,y:s.target.offsetTop},dragTime:this.itemTimeStart,dragGroupDelta:0})}else return!1}).on("dragmove",s=>{this.state.dragging&&this.setState(a=>{if(!this.dragInProgress)return{...a};let o=this.dragTime(s);const l=this.dragGroupDelta(s);return this.props.moveResizeValidator&&(o=this.props.moveResizeValidator("move",this.props.item,o)),this.props.onDrag&&this.props.onDrag(this.itemId,o,this.props.order.index+l),{dragTime:o,dragGroupDelta:l}})}).on("dragend",s=>{if(this.state.dragging){if(this.props.onDrop){this.dragInProgress=!1,this.fireInteractEvent(!1);let a=this.dragTime(s);this.props.moveResizeValidator&&(a=this.props.moveResizeValidator("move",this.props.item,a)),this.props.onDrop(this.itemId,a,this.props.order.index+this.dragGroupDelta(s))}this.setState({dragging:!1,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null})}}).on("resizestart",s=>{if(this.props.selected)this.fireInteractEvent(!0),this.setState({resizing:!0,resizeEdge:null,resizeStart:s.pageX,resizeTime:0});else return!1}).on("resizemove",s=>{if(this.state.resizing){let a=this.state.resizeEdge;a||(a=s.deltaRect.left!==0?"left":"right",this.setState({resizeEdge:a}));let o=this.resizeTimeSnap(this.timeFor(s));this.props.moveResizeValidator&&(o=this.props.moveResizeValidator("resize",this.props.item,o,a)),this.props.onResizing&&this.props.onResizing(this.itemId,o,a),this.setState({resizeTime:o})}}).on("resizeend",s=>{if(this.state.resizing){this.fireInteractEvent(!1);const{resizeEdge:a}=this.state;let o=this.resizeTimeSnap(this.timeFor(s));this.props.moveResizeValidator&&(o=this.props.moveResizeValidator("resize",this.props.item,o,a)),this.props.onResized&&this.props.onResized(this.itemId,o,a,this.resizeTimeDelta(s,a)),this.setState({resizing:!1,resizeStart:null,resizeEdge:null,resizeTime:null})}}).on("tap",s=>{this.actualClick(s,s.pointerType==="mouse"?"click":"touch")}),this.setState({interactMounted:!0})}canResizeLeft(e=this.props){var n;return!e.canResizeLeft||e.minResizeWidth===void 0?!1:parseInt((n=e.dimensions.width)==null?void 0:n.toString(),10)>=e.minResizeWidth}canResizeRight(e=this.props){var n;return!e.canResizeRight||e.minResizeWidth===void 0?!1:parseInt((n=e.dimensions.width)==null?void 0:n.toString(),10)>=e.minResizeWidth}canMove(e=this.props){return!!e.canMove}componentDidUpdate(e){this.cacheDataFromProps(this.props);let{interactMounted:n}=this.state;const s=e.selected&&this.canMove(e),a=e.selected&&this.canResizeLeft(e),o=e.selected&&this.canResizeRight(e),l=this.props.selected&&this.canMove(this.props),d=this.props.selected&&this.canResizeLeft(this.props),h=this.props.selected&&this.canResizeRight(this.props);if(this.itemRef&&this.itemRef.current){if(this.props.selected&&!n&&(this.mountInteract(),n=!0),n&&(a!==d||o!==h)){const p=this.props.useResizeHandle?this.dragLeft:!0,g=this.props.useResizeHandle?this.dragRight:!0;Jx(this.itemRef.current).resizable({enabled:d||h,edges:{top:!1,bottom:!1,left:d&&p,right:h&&g}})}n&&s!==l&&Jx(this.itemRef.current).draggable({enabled:l})}else n=!1;n!==this.state.interactMounted&&this.setState({interactMounted:n})}actualClick(e,n){this.props.canSelect&&this.props.onSelect&&this.props.onSelect(this.itemId,n,e)}getItemStyle(e){const n=this.props.dimensions,s={position:"absolute",boxSizing:"border-box",left:`${n.left}px`,top:`${n.top}px`,width:`${n.width}px`,height:`${n.height}px`,lineHeight:`${n.height}px`};return Object.assign({},iY,this.props.selected?aY:{},this.props.selected&&this.canMove(this.props)?rY:{},this.props.selected&&this.canResizeLeft(this.props)?oY:{},this.props.selected&&this.canResizeLeft(this.props)&&this.state.dragging?lY:{},this.props.selected&&this.canResizeRight(this.props)?cY:{},this.props.selected&&this.canResizeRight(this.props)&&this.state.dragging?uY:{},e.style,s)}render(){if(typeof this.props.order>"u"||this.props.order===null)return null;const e=this.context,n={dimensions:this.props.dimensions,useResizeHandle:!!this.props.useResizeHandle,title:this.itemTitle,canMove:this.canMove(this.props),canResizeLeft:this.canResizeLeft(this.props),canResizeRight:this.canResizeRight(this.props),selected:this.props.selected,dragging:this.state.dragging,dragStart:this.state.dragStart,dragTime:this.state.dragTime,dragGroupDelta:this.state.dragGroupDelta,resizing:this.state.resizing,resizeEdge:this.state.resizeEdge,resizeStart:this.state.resizeStart,resizeTime:this.state.resizeTime};return this.props.itemRenderer?this.props.itemRenderer({item:this.props.item,timelineContext:e,itemContext:n,getItemProps:this.getItemProps,getResizeProps:this.getResizeProps}):aD({item:this.props.item,itemContext:n,getItemProps:this.getItemProps,getResizeProps:this.getResizeProps})}}Object.defineProperty(R0,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{selected:!1,itemRenderer:aD}});Object.defineProperty(R0,"contextType",{enumerable:!0,configurable:!0,writable:!0,value:O0});function yY(t,e){const n=mt(t,"canResize")!==void 0?mt(t,"canResize"):e;return n==="left"||n==="both"}function vY(t,e){const n=mt(t,"canResize")!==void 0?mt(t,"canResize"):e;return n==="right"||n==="both"||n===!0}class bY extends A.Component{shouldComponentUpdate(e){return!(Xu(e.groups,this.props.groups)&&Xu(e.items,this.props.items)&&Xu(e.dimensionItems,this.props.dimensionItems)&&e.keys===this.props.keys&&e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.selectedItem===this.props.selectedItem&&e.selected===this.props.selected&&e.dragSnap===this.props.dragSnap&&e.minResizeWidth===this.props.minResizeWidth&&e.canChangeGroup===this.props.canChangeGroup&&e.canMove===this.props.canMove&&e.canResize===this.props.canResize&&e.canSelect===this.props.canSelect)}isSelected(e,n){if(this.props.selected){const s=mt(e,n);return this.props.selected.includes(s)}else return this.props.selectedItem===mt(e,n)}getVisibleItems(e,n){const{keys:s,items:a}=this.props;return uD(a,e,n,s)}render(){const{canvasTimeStart:e,canvasTimeEnd:n,dimensionItems:s,keys:a,groups:o}=this.props,{itemIdKey:l,itemGroupKey:d}=a,h=cD(o,a),p=this.getVisibleItems(e,n),g=$I(s,"id");return u.jsx("div",{className:"rct-items",children:p.filter(y=>g[mt(y,l)]).map(y=>u.jsx(R0,{itemProps:y.itemProps,item:y,keys:this.props.keys,order:h[mt(y,d)],dimensions:g[mt(y,l)].dimensions,selected:this.isSelected(y,l),canChangeGroup:mt(y,"canChangeGroup")!==void 0?mt(y,"canChangeGroup"):this.props.canChangeGroup,canMove:mt(y,"canMove")!==void 0?mt(y,"canMove"):this.props.canMove,canResizeLeft:yY(y,this.props.canResize),canResizeRight:vY(y,this.props.canResize),canSelect:mt(y,"canSelect")!==void 0?mt(y,"canSelect"):this.props.canSelect,useResizeHandle:this.props.useResizeHandle,groupTops:this.props.groupTops,canvasTimeStart:this.props.canvasTimeStart,canvasTimeEnd:this.props.canvasTimeEnd,canvasWidth:this.props.canvasWidth,dragSnap:this.props.dragSnap,minResizeWidth:this.props.minResizeWidth,onResizing:this.props.itemResizing,onResized:this.props.itemResized,moveResizeValidator:this.props.moveResizeValidator,onDrag:this.props.itemDrag,onDrop:this.props.itemDrop,onItemDoubleClick:this.props.onItemDoubleClick,onContextMenu:this.props.onItemContextMenu,onSelect:this.props.itemSelect,itemRenderer:this.props.itemRenderer,scrollRef:this.props.scrollRef},mt(y,l)))})}}class pT extends A.Component{shouldComponentUpdate(e){return!(e.keys===this.props.keys&&e.width===this.props.width&&e.height===this.props.height&&Xu(e.groups,this.props.groups)&&Xu(e.groupHeights,this.props.groupHeights))}renderGroupContent(e,n=!1,s,a){return this.props.groupRenderer?Kt.createElement(this.props.groupRenderer,{group:e,isRightSidebar:n}):mt(e,n?a:s)}render(){const{width:e,groupHeights:n,height:s,isRightSidebar:a}=this.props,{groupIdKey:o,groupTitleKey:l,groupRightTitleKey:d}=this.props.keys,h={width:`${e}px`,height:`${s}px`},p={width:`${e}px`},g=this.props.groups.map((y,_)=>{const j={height:`${n[_]}px`,lineHeight:`${n[_]}px`};return u.jsx("div",{className:"rct-sidebar-row rct-sidebar-row-"+(_%2===0?"even":"odd"),style:j,children:this.renderGroupContent(y,a,l,d)},mt(y,o))});return u.jsx("div",{className:"rct-sidebar"+(a?" rct-sidebar-right":""),style:h,children:u.jsx("div",{style:p,children:g})})}}class _Y extends A.Component{shouldComponentUpdate(e){return!(e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.lineCount===this.props.lineCount&&e.minUnit===this.props.minUnit&&e.timeSteps===this.props.timeSteps&&e.height===this.props.height&&e.verticalLineClassNamesForTime===this.props.verticalLineClassNamesForTime)}render(){const{canvasTimeStart:e,canvasTimeEnd:n,minUnit:s,timeSteps:a,height:o,verticalLineClassNamesForTime:l,getLeftOffsetFromDate:d}=this.props,h=[];return oD(e,n,s,a,(p,g)=>{const y=p.get(s==="day"?"date":s)===(s==="day"?1:0);let _=[];l&&(_=l(p.unix()*1e3,g.unix()*1e3-1));const j="rct-vl"+(y?" rct-vl-first":"")+(s==="day"||s==="hour"||s==="minute"?` rct-day-${p.day()} `:" ")+_.join(" "),k=d(p.valueOf()),N=d(g.valueOf());h.push(u.jsx("div",{className:j,style:{pointerEvents:"none",top:"0px",left:`${k}px`,width:`${N-k}px`,height:`${o}px`}},`line-${p.valueOf()}`))}),u.jsx("div",{className:"rct-vertical-lines",children:h})}}const wY=({...t})=>u.jsx(Yp,{children:({getLeftOffsetFromDate:e})=>u.jsx(_Y,{getLeftOffsetFromDate:e,...t})});class SY extends A.Component{constructor(){super(...arguments),Object.defineProperty(this,"handleMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.originClickX=e.clientX}}),Object.defineProperty(this,"handleMouseUp",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.props.clickTolerance!==void 0&&Math.abs(this.originClickX-e.clientX)>this.props.clickTolerance&&(this.cancelClick=!0)}}),Object.defineProperty(this,"handleClick",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.cancelClick||this.props.onClick(e),this.cancelClick=!1,this.originClickX=null}}),Object.defineProperty(this,"originClickX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cancelClick",{enumerable:!0,configurable:!0,writable:!0,value:!1})}render(){const e=Kt.Children.only(this.props.children);return Kt.cloneElement(e,{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick})}}class jY extends A.Component{render(){const{onContextMenu:e,onDoubleClick:n,isEvenRow:s,style:a,onClick:o,clickTolerance:l,horizontalLineClassNamesForGroup:d,group:h}=this.props;let p=[];return d&&(p=d(h)),u.jsx(SY,{clickTolerance:l,onClick:o,children:u.jsx("div",{onContextMenu:e,onDoubleClick:n,className:(s?"rct-hl-even ":"rct-hl-odd ")+(p?p.join(" "):""),style:a})})}}class TY extends A.Component{shouldComponentUpdate(e){return!(e.canvasWidth===this.props.canvasWidth&&e.lineCount===this.props.lineCount&&e.groupHeights===this.props.groupHeights&&e.groups===this.props.groups)}render(){const{canvasWidth:e,lineCount:n,groupHeights:s,onRowClick:a,onRowDoubleClick:o,clickTolerance:l,groups:d,horizontalLineClassNamesForGroup:h,onRowContextClick:p}=this.props,g=[];for(let y=0;y<n;y++)g.push(u.jsx(jY,{clickTolerance:l,onContextMenu:_=>p(_,y),onClick:_=>a(_,y),onDoubleClick:_=>o(_,y),isEvenRow:y%2===0,group:d[y],horizontalLineClassNamesForGroup:h,style:{width:`${e}px`,height:`${s[y]}px`}},`horizontal-line-${y}`));return u.jsx("div",{className:"rct-horizontal-lines",children:g})}}class kY extends A.Component{constructor(e){super(e),Object.defineProperty(this,"scrollComponentRef",{enumerable:!0,configurable:!0,writable:!0,value:A.createRef()}),Object.defineProperty(this,"dragLastPosition",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastTouchDistance",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"singleTouchStart",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastSingleTouch",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isItemInteraction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"handlePointerStart",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="touch"?this.handleTouchStart(n):n.pointerType==="mouse"&&this.handleMouseDown(n)}}),Object.defineProperty(this,"handlePointerMove",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="touch"?this.handleTouchMove(n):n.pointerType==="mouse"&&this.handleMouseMove(n)}}),Object.defineProperty(this,"handlePointerEnd",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="touch"?this.handleTouchEnd():n.pointerType==="mouse"&&this.handleMouseUp()}}),Object.defineProperty(this,"handleScroll",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const n=this.scrollComponentRef.current.scrollLeft;this.props.onScroll(n)}}),Object.defineProperty(this,"handleWheel",{enumerable:!0,configurable:!0,writable:!0,value:n=>{if(n.ctrlKey||n.metaKey||n.altKey){n.preventDefault();const s=Lj(n.currentTarget),a=n.clientX-s.x,o=n.ctrlKey?10:n.metaKey?3:1;this.props.onWheelZoom(o,a,n.deltaY)}else n.shiftKey&&(n.preventDefault(),this.props.onScroll(this.scrollComponentRef.current.scrollLeft+(n.deltaY||n.deltaX)))}}),Object.defineProperty(this,"handleMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.button===0&&(this.dragLastPosition=n.pageX,this.setState({isDragging:!0}))}}),Object.defineProperty(this,"handleMouseMove",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.state.isDragging&&!this.isItemInteraction&&(this.props.onScroll(this.scrollComponentRef.current.scrollLeft+this.dragLastPosition-n.pageX),this.dragLastPosition=n.pageX)}}),Object.defineProperty(this,"handleMouseUp",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.dragLastPosition=null,this.setState({isDragging:!1})}}),Object.defineProperty(this,"handlePointerLeave",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.pointerType==="mouse"&&(this.dragLastPosition=null,this.setState({isDragging:!1}))}}),Object.defineProperty(this,"handleTouchStart",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.isPrimary?(n.preventDefault(),this.lastTouchDistance=null,this.singleTouchStart={x:n.clientX,y:n.clientY,screenY:window.scrollY},this.lastSingleTouch={x:n.clientX,y:n.clientY,screenY:window.scrollY}):(n.preventDefault(),this.lastTouchDistance=Math.abs(n.clientX-this.singleTouchStart.x),this.singleTouchStart=null,this.lastSingleTouch=null)}}),Object.defineProperty(this,"handleTouchMove",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const{width:s,onZoom:a}=this.props;if(this.isItemInteraction){n.preventDefault();return}if(this.lastTouchDistance&&!n.isPrimary){n.preventDefault();const o=Math.abs(n.clientX-this.singleTouchStart.x),l=Lj(n.currentTarget),d=(n.clientX+this.singleTouchStart.x)/2-l.x;o!==0&&this.lastTouchDistance!==0&&(a(this.lastTouchDistance/o,d/s),this.lastTouchDistance=o)}else if(this.lastSingleTouch&&n.isPrimary){n.preventDefault();const o=n.clientX,l=n.clientY,d=o-this.lastSingleTouch.x,h=o-this.singleTouchStart.x,p=l-this.singleTouchStart.y;this.lastSingleTouch={x:o,y:l,screenY:window.pageYOffset};const g=Math.abs(h)*3>Math.abs(p),y=Math.abs(p)*3>Math.abs(h);d!==0&&g&&this.props.onScroll(this.scrollComponentRef.current.scrollLeft-d),y&&window.scrollTo(window.scrollX,this.singleTouchStart.screenY-p)}}}),Object.defineProperty(this,"handleTouchEnd",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.lastTouchDistance&&(this.lastTouchDistance=null),this.lastSingleTouch&&(this.lastSingleTouch=null,this.singleTouchStart=null)}}),Object.defineProperty(this,"handleItemInteract",{enumerable:!0,configurable:!0,writable:!0,value:n=>{this.isItemInteraction=n.detail.itemInteraction}}),this.state={isDragging:!1}}componentDidMount(){this.scrollComponentRef.current&&(this.props.scrollRef(this.scrollComponentRef.current),this.scrollComponentRef.current.addEventListener("wheel",this.handleWheel,{passive:!1}),this.scrollComponentRef.current.addEventListener("itemInteraction",this.handleItemInteract),this.scrollComponentRef.current.addEventListener("pointerdown",this.handlePointerStart,{passive:!1}),this.scrollComponentRef.current.addEventListener("pointermove",this.handlePointerMove,{passive:!1}),this.scrollComponentRef.current.addEventListener("pointerup",this.handlePointerEnd),this.scrollComponentRef.current.addEventListener("pointerleave",this.handlePointerLeave))}componentWillUnmount(){this.scrollComponentRef.current&&(this.scrollComponentRef.current.removeEventListener("wheel",this.handleWheel),this.scrollComponentRef.current.removeEventListener("itemInteraction",this.handleItemInteract),this.scrollComponentRef.current.removeEventListener("pointerdown",this.handlePointerStart),this.scrollComponentRef.current.removeEventListener("pointermove",this.handlePointerMove),this.scrollComponentRef.current.removeEventListener("pointerup",this.handlePointerEnd),this.scrollComponentRef.current.removeEventListener("pointerleave",this.handlePointerLeave))}render(){const{width:e,height:n,children:s}=this.props,{isDragging:a}=this.state,o={width:`${e}px`,height:`${n+20}px`,cursor:a?"move":"default",position:"relative"};return u.jsx("div",{ref:this.scrollComponentRef,"data-testid":"scroll-element",className:"rct-scroll",style:o,onScroll:this.handleScroll,children:s})}}const NY={subscribeToMouseOver:()=>(console.warn('"subscribeToMouseOver" default func is being used'),()=>{})},{Consumer:MY,Provider:DY}=Kt.createContext(NY),CY=DY,EY=MY,AY={markers:[],subscribeMarker:()=>(console.warn("default subscribe marker used"),{unsubscribe:Rf,getMarker:Rf}),updateMarker:()=>(console.warn("default subscribe marker used"),Rf)},{Consumer:OY,Provider:RY}=Kt.createContext(AY);let mT=0;const PY=()=>(mT+=1,mT+1);class LY extends Kt.Component{constructor(e){super(e),Object.defineProperty(this,"handleSubscribeToMarker",{enumerable:!0,configurable:!0,writable:!0,value:n=>(n={...n,id:PY()},this.setState(s=>({markers:[...s.markers,n]})),{unsubscribe:()=>{this.setState(s=>({markers:s.markers.filter(a=>a.id!==n.id)}))},getMarker:()=>n})}),Object.defineProperty(this,"handleUpdateMarker",{enumerable:!0,configurable:!0,writable:!0,value:n=>{const s=this.state.markers.findIndex(a=>a.id===n.id);s<0||this.setState(a=>({markers:[...a.markers.slice(0,s),n,...a.markers.slice(s+1)]}))}}),this.state={markers:[],subscribeMarker:this.handleSubscribeToMarker,updateMarker:this.handleUpdateMarker}}render(){return u.jsx(RY,{value:this.state,children:this.props.children})}}const hD=OY;var Wl;(function(t){t.Today="Today",t.Custom="Custom",t.Cursor="Cursor"})(Wl||(Wl={}));const zY={position:"absolute",top:0,bottom:0,width:"2px",backgroundColor:"black",pointerEvents:"none"},P0=t=>({...zY,left:t}),L0=t=>function({styles:e}){return u.jsx("div",{style:e,"data-testid":t})},BY=L0("default-today-line");let fD=class extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{date:Date.now()}}),Object.defineProperty(this,"intervalToken",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}componentDidMount(){this.intervalToken=this.createIntervalUpdater(this.props.interval)}componentDidUpdate(t){t.interval!==this.props.interval&&(clearInterval(this.intervalToken),this.intervalToken=this.createIntervalUpdater(this.props.interval))}createIntervalUpdater(t){return setInterval(()=>{this.setState({date:Date.now()})},t)}componentWillUnmount(){clearInterval(this.intervalToken)}render(){const{date:t}=this.state,e=this.props.getLeftOffsetFromDate(t),n=P0(e);return this.props.renderer({styles:n,date:t})}};Object.defineProperty(fD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{renderer:BY}});const VY=L0("default-customer-marker-id");let pD=class extends Kt.Component{render(){const{date:t}=this.props,e=this.props.getLeftOffsetFromDate(t),n=P0(e);return this.props.renderer({styles:n,date:t})}};Object.defineProperty(pD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{renderer:VY}});const FY=L0("default-cursor-marker");let mD=class extends Kt.Component{constructor(t){super(t),Object.defineProperty(this,"handleCanvasMouseOver",{enumerable:!0,configurable:!0,writable:!0,value:({leftOffset:e,date:n,isCursorOverCanvas:s})=>{this.setState({leftOffset:e,date:n,isShowingCursor:s})}}),Object.defineProperty(this,"unsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state={leftOffset:0,date:0,isShowingCursor:!1}}componentDidMount(){this.unsubscribe=this.props.subscribeToCanvasMouseOver(this.handleCanvasMouseOver)}componentWillUnmount(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}render(){const{isShowingCursor:t,leftOffset:e,date:n}=this.state;if(!t)return null;const s=P0(e);return this.props.renderer?this.props.renderer({styles:s,date:n}):null}};Object.defineProperty(mD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{renderer:FY}});const gD=t=>u.jsx(EY,{children:({subscribeToMouseOver:e})=>u.jsx(mD,{subscribeToCanvasMouseOver:e,...t})});gD.displayName="CursorMarkerWrapper";const HY=()=>u.jsx(Yp,{children:({getLeftOffsetFromDate:t,getTimelineState:e})=>u.jsx(hD,{children:({markers:n})=>{const s=e();return n.map(a=>{switch(a.type){case Wl.Today:return new Date().valueOf()>=s.canvasTimeStart&&new Date().valueOf()<=s.canvasTimeEnd?u.jsx(fD,{getLeftOffsetFromDate:t,renderer:a.renderer,interval:a.interval},a.id):null;case Wl.Custom:return a.date>=s.canvasTimeStart&&a.date<=s.canvasTimeEnd?u.jsx(pD,{renderer:a.renderer,date:a.date,getLeftOffsetFromDate:t},a.id):null;case Wl.Cursor:return u.jsx(gD,{renderer:a.renderer,getLeftOffsetFromDate:t},a.id);default:return null}})}})}),UY={position:"absolute",left:0,right:0,top:0,bottom:0};class IY extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"handleMouseMove",{enumerable:!0,configurable:!0,writable:!0,value:e=>{var n;if(this.subscription!==null){const{pageX:s}=e,{left:a}=((n=this.containerEl.current)==null?void 0:n.getBoundingClientRect())??{left:0},o=s-a,l=this.props.getDateFromLeftOffsetPosition(o);this.subscription({leftOffset:o,date:l,isCursorOverCanvas:!0})}}}),Object.defineProperty(this,"handleMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.subscription!==null&&this.subscription({leftOffset:0,date:0,isCursorOverCanvas:!1})}}),Object.defineProperty(this,"handleMouseMoveSubscribe",{enumerable:!0,configurable:!0,writable:!0,value:e=>(this.subscription=e,()=>{this.subscription=null})}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{subscribeToMouseOver:this.handleMouseMoveSubscribe}}),Object.defineProperty(this,"containerEl",{enumerable:!0,configurable:!0,writable:!0,value:Kt.createRef()}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:null})}render(){return u.jsx(CY,{value:this.state,children:u.jsxs("div",{style:UY,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,ref:this.containerEl,children:[u.jsx(HY,{}),this.props.children]})})}}const YY=t=>u.jsx(Yp,{children:({getDateFromLeftOffsetPosition:e})=>u.jsx(IY,{getDateFromLeftOffsetPosition:e,...t})});function WY(t){t._resizeEventListener=()=>t.resize(),window.addEventListener("resize",t._resizeEventListener)}function $Y(t){window.removeEventListener("resize",t._resizeEventListener)}const gT={addListener:WY,removeListener:$Y},qY={groupIdKey:"id",groupTitleKey:"title",groupRightTitleKey:"rightTitle",groupLabelKey:"title",itemIdKey:"id",itemTitleKey:"title",itemDivTitleKey:"title",itemGroupKey:"group",itemTimeStartKey:"start_time",itemTimeEndKey:"end_time"},GY={second:1,minute:1,hour:1,day:1,month:1,year:1},XY={year:{long:"YYYY",mediumLong:"YYYY",medium:"YYYY",short:"YY"},month:{long:"MMMM YYYY",mediumLong:"MMMM",medium:"MMMM",short:"MM/YY"},week:{long:"w",mediumLong:"w",medium:"w",short:"w"},day:{long:"dddd, LL",mediumLong:"dddd, LL",medium:"dd D",short:"D"},hour:{long:"dddd, LL, HH:00",mediumLong:"L, HH:00",medium:"HH:00",short:"HH"},minute:{long:"HH:mm",mediumLong:"HH:mm",medium:"HH:mm",short:"mm"},second:{long:"mm:ss",mediumLong:"mm:ss",medium:"mm:ss",short:"ss"}},KY={registerScroll:()=>(console.warn("default registerScroll header used"),Rf),rightSidebarWidth:0,leftSidebarWidth:150,timeSteps:{}},xD=Kt.createContext(KY);class ZY extends Kt.Component{render(){const e={rightSidebarWidth:this.props.rightSidebarWidth,leftSidebarWidth:this.props.leftSidebarWidth,timeSteps:this.props.timeSteps,registerScroll:this.props.registerScroll};return u.jsx(xD.Provider,{value:e,children:this.props.children})}}const QY=xD,z0=()=>A.useContext(QY);var yD={exports:{}};(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var d=arguments[l];d&&(o=a(o,s(d)))}return o}function s(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var d in o)e.call(o,d)&&o[d]&&(l=a(l,d));return l}function a(o,l){return l?o?o+" "+l:o+l:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(yD);var JY=yD.exports;const xT=Nd(JY),eW="left",vD="right";class tW extends A.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"getRootProps",{enumerable:!0,configurable:!0,writable:!0,value:(e={})=>{const{style:n}=e,s=this.props.variant===vD?this.props.rightSidebarWidth:this.props.leftSidebarWidth;return{style:{color:n?.color??"#fff",...n,width:s}}}}),Object.defineProperty(this,"getStateAndHelpers",{enumerable:!0,configurable:!0,writable:!0,value:()=>({getRootProps:this.getRootProps,data:this.props.headerData})})}render(){const e=this.getStateAndHelpers();return this.props.children(e)}}const nW=({getRootProps:t})=>u.jsx("div",{"data-testid":"sidebarHeader",...t()}),Pf=t=>{const{children:e,variant:n=eW,headerData:s}=t,{leftSidebarWidth:a,rightSidebarWidth:o}=z0();return u.jsx(tW,{leftSidebarWidth:a,rightSidebarWidth:o,variant:n,headerData:s,children:e||nW})};Pf.secretKey="SidebarHeader";class sW extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"getRootStyle",{enumerable:!0,configurable:!0,writable:!0,value:()=>({...this.props.style,display:"flex",width:"100%"})}),Object.defineProperty(this,"getCalendarHeaderStyle",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{leftSidebarWidth:e,rightSidebarWidth:n,calendarHeaderStyle:s}=this.props;return{...s,overflow:"hidden",width:`calc(100% - ${e+n}px)`}}}),Object.defineProperty(this,"isSidebarHeader",{enumerable:!0,configurable:!0,writable:!0,value:e=>e.type===void 0?!1:e.type.secretKey===Pf.secretKey})}render(){let e,n;const s=[],a=Array.isArray(this.props.children)?this.props.children.filter(o=>o):[this.props.children];return Kt.Children.map(a,o=>{var l;this.isSidebarHeader(o)?((l=o?.props)==null?void 0:l.variant)===vD?e=o:n=o:s.push(o)}),n||(n=u.jsx(Pf,{})),!e&&this.props.rightSidebarWidth&&(e=u.jsx(Pf,{variant:"right"})),u.jsxs("div",{"data-testid":"headerRootDiv",style:this.getRootStyle(),className:xT("rct-header-root",this.props.className),children:[n,u.jsx("div",{ref:this.props.registerScroll,style:this.getCalendarHeaderStyle(),className:xT("rct-calendar-header",this.props.calendarHeaderClassName),"data-testid":"headerContainer",children:s}),e]})}}const cv=({children:t,style:e,className:n,calendarHeaderStyle:s,calendarHeaderClassName:a})=>{const{leftSidebarWidth:o,rightSidebarWidth:l,registerScroll:d}=z0();return u.jsx(sW,{leftSidebarWidth:o,rightSidebarWidth:l,registerScroll:d,style:e,className:n,calendarHeaderStyle:s,calendarHeaderClassName:a,children:t})};cv.secretKey="TimelineHeaders";class bD extends Kt.Component{constructor(e){super(e),Object.defineProperty(this,"getHeaderIntervals",{enumerable:!0,configurable:!0,writable:!0,value:({canvasTimeStart:h,canvasTimeEnd:p,unit:g,timeSteps:y,getLeftOffsetFromDate:_})=>{const j=[];return oD(h,p,g,y,(k,N)=>{const D=_(k.valueOf()),R=_(N.valueOf())-D;j.push({startTime:k,endTime:N,labelWidth:R,left:D})}),j}}),Object.defineProperty(this,"getRootProps",{enumerable:!0,configurable:!0,writable:!0,value:(h={})=>{const{style:p}=h;return{style:Object.assign({},p||{},{position:"relative",width:this.props.canvasWidth,height:this.props.height})}}}),Object.defineProperty(this,"getIntervalProps",{enumerable:!0,configurable:!0,writable:!0,value:(h={})=>{const{interval:p,style:g}=h;if(!p)throw new Error("you should provide interval to the prop getter");const{startTime:y,labelWidth:_,left:j}=p;return{style:{...g,left:j,width:_,position:"absolute"},key:`label-${y.valueOf()}`}}}),Object.defineProperty(this,"getStateAndHelpers",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{unit:h,showPeriod:p,headerData:g}=this.props;return{headerContext:{unit:h,intervals:this.state.intervals},getRootProps:this.getRootProps,getIntervalProps:this.getIntervalProps,showPeriod:p,data:g}}});const{canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l}=e,d=this.getHeaderIntervals({canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l});this.state={intervals:d}}componentDidUpdate(e){if(!rv(e,this.props)){const{canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l}=this.props,d=this.getHeaderIntervals({canvasTimeStart:n,canvasTimeEnd:s,unit:a,timeSteps:o,getLeftOffsetFromDate:l});this.setState({intervals:d})}}render(){const e=this.getStateAndHelpers();return this.props.children(e)}}Object.defineProperty(bD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{height:30}});function iW({children:t,unit:e,headerData:n,height:s}){const{getTimelineState:a,showPeriod:o,getLeftOffsetFromDate:l}=xY(),d=a(),{timeSteps:h}=z0();return u.jsx(bD,{children:t,timeSteps:h,showPeriod:o,unit:e||d.timelineUnit,...d,headerData:n,getLeftOffsetFromDate:l,height:s})}var yT=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function aW(t,e){return!!(t===e||yT(t)&&yT(e))}function rW(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!aW(t[n],e[n]))return!1;return!0}function vT(t,e){e===void 0&&(e=rW);var n=null;function s(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var l=t.apply(this,a);return n={lastResult:l,lastArgs:a,lastThis:this},l}return s.clear=function(){n=null},s}class oW extends Kt.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"onIntervalClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{primaryHeader:e,interval:n,unit:s,showPeriod:a}=this.props;if(e){const o=lD(s),l=n.startTime.clone().startOf(o),d=n.startTime.clone().endOf(o);a(l,d)}else a(n.startTime,n.endTime)}}),Object.defineProperty(this,"getIntervalProps",{enumerable:!0,configurable:!0,writable:!0,value:(e={})=>({...this.props.getIntervalProps({interval:this.props.interval,...e}),onClick:Vo(this.onIntervalClick,e.onClick)})})}render(){const{intervalText:e,interval:n,intervalRenderer:s,headerData:a}=this.props,o=s;if(o)return o({getIntervalProps:this.getIntervalProps,intervalContext:{interval:n,intervalText:e},data:a});const{key:l,...d}=this.getIntervalProps();return A.createElement("div",{"data-testid":"dateHeaderInterval",...d,key:l,className:`rct-dateHeader ${this.props.primaryHeader?"rct-dateHeader-primary":""}`},u.jsx("span",{children:e}))}}function lW({headerContext:{intervals:t,unit:e},getRootProps:n,getIntervalProps:s,showPeriod:a,data:{style:o,intervalRenderer:l,className:d,getLabelFormat:h,unitProp:p,headerData:g}}){return u.jsx("div",{"data-testid":"dateHeader",className:d,...n({style:o}),children:t.map(y=>{const _=h([y.startTime,y.endTime],e,y.labelWidth);return u.jsx(oW,{unit:e,interval:y,showPeriod:a,intervalText:_,primaryHeader:p==="primaryHeader",getIntervalProps:s,intervalRenderer:l,headerData:g},`label-${y.startTime.valueOf()}`)})})}class cW extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"getHeaderUnit",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.props.unit==="primaryHeader"?lD(this.props.timelineUnit):this.props.unit?this.props.unit:this.props.timelineUnit}),Object.defineProperty(this,"getRootStyle",{enumerable:!0,configurable:!0,writable:!0,value:vT(e=>({height:30,...e}))}),Object.defineProperty(this,"getLabelFormat",{enumerable:!0,configurable:!0,writable:!0,value:(e,n,s)=>{const{labelFormat:a}=this.props;if(typeof a=="string")return e[0].format(a);if(typeof a=="function")return a(e,n,s);throw new Error("labelFormat should be function or string")}}),Object.defineProperty(this,"getHeaderData",{enumerable:!0,configurable:!0,writable:!0,value:vT((e,n,s,a,o,l)=>({intervalRenderer:e,style:n,className:s,getLabelFormat:a,unitProp:o,headerData:l}))})}render(){const e=this.getHeaderUnit(),{height:n}=this.props;return u.jsx(iW,{children:lW,unit:e,height:n,headerData:this.getHeaderData(this.props.intervalRenderer,this.getRootStyle(this.props.style),this.props.className,this.getLabelFormat,this.props.unit,this.props.headerData)})}}function bT({labelFormat:t,unit:e,style:n,className:s,intervalRenderer:a,headerData:o,height:l}){return u.jsx(Yp,{children:({getTimelineState:d})=>{const h=d();return u.jsx(cW,{timelineUnit:h.timelineUnit,unit:e,labelFormat:t||uW,style:n,className:s,intervalRenderer:a,headerData:o,height:l})}})}const uW=([t],e,n=150,s=XY)=>{let a;return n>=150?a=s[e].long:n>=100?a=s[e].mediumLong:n>=50?a=s[e].medium:a=s[e].short,t.format(a)};var _D={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(Ho,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(s,a,o){var l=a.prototype,d=l.format;o.en.formats=n,l.format=function(h){h===void 0&&(h="YYYY-MM-DDTHH:mm:ssZ");var p=this.$locale().formats,g=(function(y,_){return y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,k,N){var D=N&&N.toUpperCase();return k||_[N]||n[N]||_[D].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(R,E,B){return E||B.slice(1)})})})(h,p===void 0?{}:p);return d.call(this,g)}}})})(_D);var dW=_D.exports;const hW=Nd(dW);Qi.extend(hW);class B0 extends A.Component{constructor(e){super(e),Object.defineProperty(this,"getTimelineContext",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{width:_,visibleTimeStart:j,visibleTimeEnd:k,canvasTimeStart:N,canvasTimeEnd:D}=this.state,R=k-j,E=Or(_,this.props.buffer),B=sy(R,_,this.props.timeSteps);return{canvasWidth:E,timelineUnit:B,timelineWidth:_,visibleTimeStart:j,visibleTimeEnd:k,canvasTimeStart:N,canvasTimeEnd:D}}}),Object.defineProperty(this,"getTimelineUnit",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{width:_,visibleTimeStart:j,visibleTimeEnd:k}=this.state,{timeSteps:N}=this.props,D=k-j;return sy(D,_,N)}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scrollComponent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"scrollHeaderRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resize",{enumerable:!0,configurable:!0,writable:!0,value:(_=this.props)=>{var j;const{width:k}=((j=this.container.current)==null?void 0:j.getBoundingClientRect())??{width:0},N=k-_.sidebarWidth-_.rightSidebarWidth,D=Or(N,_.buffer),{dimensionItems:R,height:E,groupHeights:B,groupTops:U}=Fu(_.items,_.groups,D,this.state.canvasTimeStart,this.state.canvasTimeEnd,_.keys,_.lineHeight,_.itemHeightRatio,_.stackItems,this.state.draggingItem,this.state.resizingItem,this.state.dragTime,this.state.resizingEdge,this.state.resizeTime,this.state.newGroupOrder,_.itemVerticalGap);this.setState({width:N,dimensionItems:R,height:E,groupHeights:B,groupTops:U});const $=N*((_.buffer-1)/2);this.scrollComponent&&(this.scrollComponent.scrollLeft=$),this.scrollHeaderRef&&(this.scrollHeaderRef.scrollLeft=$)}}),Object.defineProperty(this,"onScroll",{enumerable:!0,configurable:!0,writable:!0,value:_=>{var j,k;const N=this.state.width,D=this.state.canvasTimeStart,R=this.state.visibleTimeEnd-this.state.visibleTimeStart,E=D+R*_/N;(this.state.visibleTimeStart!==E||this.state.visibleTimeEnd!==E+R)&&((k=(j=this.props).onTimeChange)==null||k.call(j,E,E+R,this.updateScrollCanvas,this.getTimelineUnit()))}}),Object.defineProperty(this,"updateScrollCanvas",{enumerable:!0,configurable:!0,writable:!0,value:(_,j,k=!1,N=this.props.items,D=this.props.groups)=>{this.setState(fT(_,j,k,N,D,this.props,this.state))}}),Object.defineProperty(this,"handleWheelZoom",{enumerable:!0,configurable:!0,writable:!0,value:(_,j,k)=>{this.changeZoom(1+_*k/500,j/this.state.width)}}),Object.defineProperty(this,"changeZoom",{enumerable:!0,configurable:!0,writable:!0,value:(_,j=.5)=>{const{minZoom:k,maxZoom:N}=this.props,D=this.state.visibleTimeEnd-this.state.visibleTimeStart,R=Math.min(Math.max(Math.round(D*_),k),N),E=Math.round(this.state.visibleTimeStart+(D-R)*j);this.props.onTimeChange&&this.props.onTimeChange(E,E+R,this.updateScrollCanvas,this.getTimelineUnit())}}),Object.defineProperty(this,"showPeriod",{enumerable:!0,configurable:!0,writable:!0,value:(_,j)=>{var k,N;const D=_.valueOf(),R=j.valueOf()-D;R<this.props.minZoom||(N=(k=this.props).onTimeChange)==null||N.call(k,D,D+R,this.updateScrollCanvas,this.getTimelineUnit())}}),Object.defineProperty(this,"selectItem",{enumerable:!0,configurable:!0,writable:!0,value:(_,j,k)=>{if(this.isItemSelected(_)||this.props.itemTouchSendsClick&&j==="touch"){if(_&&this.props.onItemClick){const N=this.timeFromItemEvent(k);this.props.onItemClick(_,k,N)}}else if(this.setState({selectedItem:_}),_&&this.props.onItemSelect){const N=this.timeFromItemEvent(k);this.props.onItemSelect(_,k,N)}else _===null&&this.props.onItemDeselect&&this.props.onItemDeselect(k)}}),Object.defineProperty(this,"doubleClickItem",{enumerable:!0,configurable:!0,writable:!0,value:(_,j)=>{if(this.props.onItemDoubleClick){const k=this.timeFromItemEvent(j);this.props.onItemDoubleClick(_,j,k)}}}),Object.defineProperty(this,"contextMenuClickItem",{enumerable:!0,configurable:!0,writable:!0,value:(_,j)=>{if(this.props.onItemContextMenu){const k=this.timeFromItemEvent(j);this.props.onItemContextMenu(_,j,k)}}}),Object.defineProperty(this,"getTimeFromRowClickEvent",{enumerable:!0,configurable:!0,writable:!0,value:_=>{const{dragSnap:j,buffer:k}=this.props,{width:N,canvasTimeStart:D,canvasTimeEnd:R}=this.state,{offsetX:E}=_.nativeEvent;let B=rD(D,R,Or(N,k),E);return B=Math.floor(B/j)*j,B}}),Object.defineProperty(this,"timeFromItemEvent",{enumerable:!0,configurable:!0,writable:!0,value:_=>{const{width:j,visibleTimeStart:k,visibleTimeEnd:N}=this.state,D=this.props.dragSnap,R=this.scrollComponent,{left:E}=R.getBoundingClientRect(),B=(_.clientX-E)/j,U=N-k,$=B*U;let I=Math.round(k+$);return I=Math.floor(I/D)*D,I}}),Object.defineProperty(this,"dragItem",{enumerable:!0,configurable:!0,writable:!0,value:(_,j,k)=>{const N=this.props.groups[k],D=this.props.keys;this.setState({draggingItem:_,dragTime:j,newGroupOrder:k,dragGroupTitle:N?mt(N,D.groupLabelKey):""}),this.updatingItem({eventType:"move",itemId:_,time:j,newGroupOrder:k})}}),Object.defineProperty(this,"dropItem",{enumerable:!0,configurable:!0,writable:!0,value:(_,j,k)=>{this.setState({draggingItem:null,dragTime:null,dragGroupTitle:null}),this.props.onItemMove&&this.props.onItemMove(_,j,k)}}),Object.defineProperty(this,"resizingItem",{enumerable:!0,configurable:!0,writable:!0,value:(_,j,k)=>{this.setState({resizingItem:_,resizingEdge:k,resizeTime:j}),this.updatingItem({eventType:"resize",itemId:_,time:j,edge:k||void 0})}}),Object.defineProperty(this,"resizedItem",{enumerable:!0,configurable:!0,writable:!0,value:(_,j,k,N)=>{this.setState({resizingItem:null,resizingEdge:null,resizeTime:null}),this.props.onItemResize&&N!==0&&this.props.onItemResize(_,j,k)}}),Object.defineProperty(this,"updatingItem",{enumerable:!0,configurable:!0,writable:!0,value:({eventType:_,itemId:j,time:k,edge:N,newGroupOrder:D})=>{this.props.onItemDrag&&(_==="move"?this.props.onItemDrag({eventType:_,itemId:j,time:k,newGroupOrder:D}):this.props.onItemDrag({eventType:_,itemId:j,time:k,edge:N}))}}),Object.defineProperty(this,"handleRowClick",{enumerable:!0,configurable:!0,writable:!0,value:(_,j)=>{if(this.hasSelectedItem()&&this.selectItem(null,"click",_),this.props.onCanvasClick==null)return;const k=this.getTimeFromRowClickEvent(_),N=mt(this.props.groups[j],this.props.keys.groupIdKey);this.props.onCanvasClick(N,k,_)}}),Object.defineProperty(this,"handleRowDoubleClick",{enumerable:!0,configurable:!0,writable:!0,value:(_,j)=>{if(this.props.onCanvasDoubleClick==null)return;const k=this.getTimeFromRowClickEvent(_),N=mt(this.props.groups[j],this.props.keys.groupIdKey);this.props.onCanvasDoubleClick(N,k,_)}}),Object.defineProperty(this,"handleScrollContextMenu",{enumerable:!0,configurable:!0,writable:!0,value:(_,j)=>{if(this.props.onCanvasContextMenu==null)return;const k=this.getTimeFromRowClickEvent(_),N=mt(this.props.groups[j],this.props.keys.groupIdKey);this.props.onCanvasContextMenu&&(_.preventDefault(),this.props.onCanvasContextMenu(N,k,_))}}),Object.defineProperty(this,"handleHeaderRef",{enumerable:!0,configurable:!0,writable:!0,value:_=>{this.scrollHeaderRef=_,this.props.headerRef&&this.props.headerRef(_)}}),Object.defineProperty(this,"isTimelineHeader",{enumerable:!0,configurable:!0,writable:!0,value:_=>_.type===void 0?!1:_.type.secretKey===cv.secretKey}),Object.defineProperty(this,"renderHeaders",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.props.children){let _;if(Kt.Children.map(this.props.children,j=>{this.isTimelineHeader(j)&&(_=j)}),_)return _}return u.jsxs(cv,{children:[u.jsx(bT,{unit:"primaryHeader"}),u.jsx(bT,{})]})}}),Object.defineProperty(this,"getScrollElementRef",{enumerable:!0,configurable:!0,writable:!0,value:_=>{this.props.scrollRef&&this.props.scrollRef(_),this.scrollComponent=_}}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:Kt.createRef()}),Object.defineProperty(this,"getBoundingClientRect",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.scrollComponent.getBoundingClientRect()}),Object.defineProperty(this,"calculateDropCoordinatesToTimeAndGroup",{enumerable:!0,configurable:!0,writable:!0,value:(_,j)=>{const k=Or(this.state.width,this.props.buffer),N=ov(this.state.canvasTimeStart,this.state.canvasTimeEnd,k),D=lp(this.scrollComponent).offsetLeft,R=op(this.scrollComponent),E=(_-D+R.scrollLeft)*N+this.state.canvasTimeStart;let B=0;for(const $ of this.state.groupTops)if(j>Number($))B=this.state.groupTops.indexOf($);else break;if(!this.props.dragSnap)return{time:E,groupIndex:B};const U=Qi().utcOffset()*60*1e3;return{time:Math.round(E/this.props.dragSnap)*this.props.dragSnap-U%this.props.dragSnap,groupIndex:B}}}),this.getSelected=this.getSelected.bind(this),this.hasSelectedItem=this.hasSelectedItem.bind(this),this.isItemSelected=this.isItemSelected.bind(this);let n=null,s=null;if(this.props.defaultTimeStart&&this.props.defaultTimeEnd)n=this.props.defaultTimeStart,s=this.props.defaultTimeEnd;else if(this.props.visibleTimeStart&&this.props.visibleTimeEnd)n=this.props.visibleTimeStart,s=this.props.visibleTimeEnd;else throw new Error('You must provide either "defaultTimeStart" and "defaultTimeEnd" or "visibleTimeStart" and "visibleTimeEnd" to initialize the Timeline');const[a,o]=dD(n,s,e.buffer),l={width:1e3,visibleTimeStart:n,visibleTimeEnd:s,canvasTimeStart:a,canvasTimeEnd:o,selectedItem:null,dragTime:null,dragGroupTitle:null,resizeTime:null,resizingItem:null,resizingEdge:null,newGroupOrder:0},d=Or(l.width,e.buffer),{dimensionItems:h,height:p,groupHeights:g,groupTops:y}=Fu(e.items,e.groups,d,l.canvasTimeStart,l.canvasTimeEnd,e.keys,e.lineHeight,e.itemHeightRatio,e.stackItems,l.draggingItem,l.resizingItem,l.dragTime,l.resizingEdge,l.resizeTime,l.newGroupOrder,e.itemVerticalGap);l.dimensionItems=h,l.height=p,l.groupHeights=g,l.groupTops=y,this.state=l}componentDidMount(){this.resize(this.props),this.props.resizeDetector&&this.props.resizeDetector.addListener&&this.props.resizeDetector.addListener(this),gT.addListener(this)}componentWillUnmount(){this.props.resizeDetector&&this.props.resizeDetector.addListener&&this.props.resizeDetector.removeListener(this),gT.removeListener(this)}static getDerivedStateFromProps(e,n){const{visibleTimeStart:s,visibleTimeEnd:a,items:o,groups:l}=e,d={items:o,groups:l},h=o!==n.items||l!==n.groups;if(s&&a)Object.assign(d,fT(s,a,h,o,l,e,n));else if(h){const p=Or(n.width,e.buffer);Object.assign(d,Fu(o,l,p,n.canvasTimeStart,n.canvasTimeEnd,e.keys,e.lineHeight,e.itemHeightRatio,e.stackItems,n.draggingItem,n.resizingItem,n.dragTime,n.resizingEdge,n.resizeTime,n.newGroupOrder,e.itemVerticalGap))}return d}componentDidUpdate(e,n){const s=this.state.visibleTimeEnd-this.state.visibleTimeStart,a=n.visibleTimeEnd-n.visibleTimeStart;this.props.onZoom&&s!==a&&this.props.onZoom(this.getTimelineContext(),this.getTimelineUnit()),this.props.onBoundsChange&&this.state.canvasTimeStart!==n.canvasTimeStart&&this.props.onBoundsChange(this.state.canvasTimeStart,this.state.canvasTimeStart+s*3);const o=Math.round(this.state.width*(this.state.visibleTimeStart-this.state.canvasTimeStart)/s);(Math.round(n.width*(n.visibleTimeStart-n.canvasTimeStart)/a)!==o||this.scrollComponent.scrollLeft!==o)&&(this.scrollComponent.scrollLeft=o,this.scrollHeaderRef.scrollLeft=o)}columns(e,n,s,a,o,l){var d;return u.jsx(wY,{canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,lineCount:((d=this.props.groups)==null?void 0:d.length)||0,minUnit:a,timeSteps:o,height:l,verticalLineClassNamesForTime:this.props.verticalLineClassNamesForTime})}rows(e,n,s){var a;return u.jsx(TY,{groups:s,canvasWidth:e,lineCount:((a=this.props.groups)==null?void 0:a.length)||0,groupHeights:n,clickTolerance:this.props.clickTolerance,onRowClick:this.handleRowClick,onRowDoubleClick:this.handleRowDoubleClick,horizontalLineClassNamesForGroup:this.props.horizontalLineClassNamesForGroup,onRowContextClick:this.handleScrollContextMenu})}items({canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,dimensionItems:a,groupTops:o}){return u.jsx(bY,{canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,dimensionItems:a,groupTops:o,items:this.props.items,groups:this.props.groups,keys:this.props.keys,selectedItem:this.state.selectedItem||void 0,dragSnap:this.props.dragSnap,minResizeWidth:this.props.minResizeWidth,canChangeGroup:this.props.canChangeGroup,canMove:this.props.canMove,canResize:this.props.canResize,useResizeHandle:this.props.useResizeHandle,canSelect:this.props.canSelect,moveResizeValidator:this.props.moveResizeValidator,itemSelect:this.selectItem,itemDrag:this.dragItem,itemDrop:this.dropItem,onItemDoubleClick:this.doubleClickItem,onItemContextMenu:this.props.onItemContextMenu?this.contextMenuClickItem:void 0,itemResizing:this.resizingItem,itemResized:this.resizedItem,itemRenderer:this.props.itemRenderer,selected:this.props.selected,scrollRef:this.scrollComponent})}sidebar(e,n){const{sidebarWidth:s}=this.props;return s&&u.jsx(pT,{groups:this.props.groups,groupRenderer:this.props.groupRenderer,keys:this.props.keys,width:s,groupHeights:n,height:e})}rightSidebar(e,n){const{rightSidebarWidth:s}=this.props;return s&&u.jsx(pT,{groups:this.props.groups,keys:this.props.keys,groupRenderer:this.props.groupRenderer,isRightSidebar:!0,width:s,groupHeights:n,height:e})}childrenWithProps(e,n,s,a,o,l,d,h,p,g,y){if(!this.props.children)return null;const _=Array.isArray(this.props.children)?this.props.children.filter(k=>k):[this.props.children],j={canvasTimeStart:e,canvasTimeEnd:n,canvasWidth:s,visibleTimeStart:h,visibleTimeEnd:p,dimensionItems:a,items:this.props.items,groups:this.props.groups,keys:this.props.keys,groupHeights:o,groupTops:l,selected:this.getSelected(),height:d,minUnit:g,timeSteps:y};return Kt.Children.map(_,k=>this.isTimelineHeader(k)?null:Kt.cloneElement(k,j))}getSelected(){return this.state.selectedItem&&!this.props.selected?[this.state.selectedItem]:this.props.selected||[]}hasSelectedItem(){return Array.isArray(this.props.selected)?this.props.selected.length>0:!!this.state.selectedItem}isItemSelected(e){return this.getSelected().some(n=>n===e)}render(){const{items:e,groups:n,sidebarWidth:s,rightSidebarWidth:a,timeSteps:o,traditionalZoom:l,buffer:d}=this.props,{draggingItem:h,resizingItem:p,width:g,visibleTimeStart:y,visibleTimeEnd:_,canvasTimeStart:j,canvasTimeEnd:k}=this.state;let{dimensionItems:N,height:D,groupHeights:R,groupTops:E}=this.state;const B=_-y,U=Or(g,d),$=sy(B,g,o);if(h||p){const O=Fu(e,n,U,this.state.canvasTimeStart,this.state.canvasTimeEnd,this.props.keys,this.props.lineHeight,this.props.itemHeightRatio,this.props.stackItems,this.state.draggingItem,this.state.resizingItem,this.state.dragTime,this.state.resizingEdge,this.state.resizeTime,this.state.newGroupOrder,this.props.itemVerticalGap);N=O.dimensionItems,D=O.height,R=O.groupHeights,E=O.groupTops}const I={height:`${D}px`};return u.jsx(gY,{visibleTimeStart:y,visibleTimeEnd:_,canvasTimeStart:j,canvasTimeEnd:k,canvasWidth:U,showPeriod:this.showPeriod,timelineUnit:$,timelineWidth:this.state.width,children:u.jsx(LY,{children:u.jsx(ZY,{registerScroll:this.handleHeaderRef,timeSteps:o,leftSidebarWidth:this.props.sidebarWidth,rightSidebarWidth:this.props.rightSidebarWidth,children:u.jsxs("div",{style:this.props.style,ref:this.container,className:`react-calendar-timeline ${this.props.className}`,children:[this.renderHeaders(),u.jsxs("div",{style:I,className:"rct-outer",children:[s>0?this.sidebar(D,R):null,u.jsx(kY,{scrollRef:this.getScrollElementRef,width:g,height:D,onZoom:this.changeZoom,onWheelZoom:this.handleWheelZoom,traditionalZoom:!!l,onScroll:this.onScroll,children:u.jsxs(YY,{children:[this.columns(j,k,U,$,o,D),this.rows(U,R,n),this.items({canvasTimeStart:j,canvasTimeEnd:k,canvasWidth:U,dimensionItems:N,groupTops:E}),this.childrenWithProps(j,k,U,N,R,E,D,y,_,$,o)]})}),a>0?this.rightSidebar(D,R):null]})]})})})})}}Object.defineProperty(B0,"setDayjsLocale",{enumerable:!0,configurable:!0,writable:!0,value:Qi.locale});Object.defineProperty(B0,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{sidebarWidth:150,rightSidebarWidth:0,dragSnap:1e3*60*15,minResizeWidth:20,lineHeight:30,itemHeightRatio:.65,buffer:3,minZoom:3600*1e3,maxZoom:5*365.24*86400*1e3,clickTolerance:3,canChangeGroup:!0,canMove:!0,canResize:"right",useResizeHandle:!1,canSelect:!0,stackItems:!1,traditionalZoom:!1,horizontalLineClassNamesForGroup:null,onItemMove:null,onItemResize:null,onItemClick:null,onItemSelect:null,onItemDeselect:null,onItemDrag:null,onCanvasClick:null,onItemDoubleClick:null,onItemContextMenu:null,onZoom:null,verticalLineClassNamesForTime:null,moveResizeValidator:null,dayBackground:null,defaultTimeStart:null,defaultTimeEnd:null,itemTouchSendsClick:!1,style:{},className:"",keys:qY,timeSteps:GY,headerRef:()=>{},scrollRef:()=>{},visibleTimeStart:null,visibleTimeEnd:null,onTimeChange:function(t,e,n){n(t,e)},onBoundsChange:null,children:null,selected:null}});const fW=t=>t.children||null;class wD extends Kt.Component{constructor(){super(...arguments),Object.defineProperty(this,"unsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"getMarker",{enumerable:!0,configurable:!0,writable:!0,value:null})}componentDidMount(){const{unsubscribe:e,getMarker:n}=this.props.subscribeMarker({type:Wl.Today,renderer:this.props.children,interval:this.props.interval});this.unsubscribe=e,this.getMarker=n}componentWillUnmount(){this.unsubscribe!=null&&(this.unsubscribe(),this.unsubscribe=null)}componentDidUpdate(e){if(e.interval!==this.props.interval&&this.getMarker){const n=this.getMarker();this.props.updateMarker({...n,interval:this.props.interval})}}render(){return null}}Object.defineProperty(wD,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{interval:1e3*10}});const SD=t=>u.jsx(hD,{children:({subscribeMarker:e,updateMarker:n})=>u.jsx(wD,{subscribeMarker:e,updateMarker:n,...t})});SD.displayName="TodayMarkerWrapper";function pW({lanes:t,blocks:e,selectedBlockId:n,onBlockMove:s,onBlockResize:a,onBlockSelect:o,onAddBlock:l}){const d=A.useRef(null),h=t.map(E=>({id:E.id,title:E.label})),p=e.map(E=>({id:E.id,group:E.lane,title:"",start_time:E.start,end_time:E.end,canMove:!E.isHistorical,canResize:E.isHistorical?!1:"both",canChangeGroup:!E.isHistorical,className:`ds-timeline-item ds-timeline-${E.lane}${E.isHistorical?" ds-timeline-item-historical":""}${n===E.id?" ds-timeline-item-selected":""}`})),g=new Date,y=new Date(g);y.setHours(0,0,0,0);const _=new Date(y.getTime()+2880*60*1e3),[j,k]=A.useState(y.getTime()),[N,D]=A.useState(_.getTime()),R=E=>{E.preventDefault();const B=y.getTime(),U=_.getTime(),$=U-B,I=N-j,O=E.deltaY<0?"in":"out",q=.15;let J=O==="in"?I*(1-q):I*(1+q);const oe=$*.05;J<oe&&(J=oe),J>$&&(J=$);let ie=.5;const me=d.current;if(me){const H=me.getBoundingClientRect();if(H.width>0){const X=E.clientX-H.left;ie=Math.min(1,Math.max(0,X/H.width))}}let Z=j+I*ie-J*ie,re=Z+J;Z<B&&(Z=B,re=Z+J),re>U&&(re=U,Z=re-J),k(Z),D(re)};return u.jsx("div",{className:"relative",children:u.jsx("div",{ref:d,onWheel:R,className:"relative",children:u.jsx(B0,{groups:h,items:p,visibleTimeStart:j,visibleTimeEnd:N,defaultTimeStart:y,defaultTimeEnd:_,lineHeight:64,sidebarWidth:96,canMove:!0,canResize:"both",canChangeGroup:!0,groupRenderer:({group:E})=>{const B=t.find($=>$.id===E.id);if(!B)return null;const U=B.id==="battery"?"+ chg":B.id==="water"?"+ wtr":B.id==="export"?"+ exp":"+ hld";return u.jsx("div",{className:"flex h-full items-center justify-center",children:u.jsx("button",{type:"button",className:"flex h-12 w-12 items-center justify-center rounded-2xl border-none text-[11px] font-semibold shadow-float hover:brightness-110",onClick:()=>l&&l(B.id),title:`Add ${B.label.toLowerCase()} action`,style:{backgroundColor:B.color,color:"#0f1216"},children:U})})},onTimeChange:(E,B,U)=>{const $=y.getTime(),I=_.getTime(),O=B-E,q=I-$;let J=E,oe=B;if(O>q&&(J=$,oe=I),J<$){const ie=$-J;J=$,oe+=ie}if(oe>I){const ie=oe-I;oe=I,J-=ie}k(J),D(oe),U(J,oe)},onItemMove:(E,B,U)=>{const $=String(E),I=e.find(J=>J.id===$);if(!I||I.isHistorical||!s)return;const O=new Date(B),q=h[U]?.id;s({id:$,start:O,lane:q})},onItemResize:(E,B,U)=>{const $=String(E),I=new Date(B),O=e.find(oe=>oe.id===$);if(!O||O.isHistorical||!a)return;let q=O.start,J=O.end;U==="left"?q=I:J=I,a({id:$,start:q,end:J})},onItemSelect:E=>{o&&o(String(E))},onItemDeselect:()=>{o&&o(null)},children:u.jsx(fW,{children:u.jsx(SD,{children:({styles:E})=>u.jsx("div",{style:E,className:"ds-timeline-now-marker"})})})})})})}const mW=[{id:"battery",label:"Battery",color:"#AAB6C4"},{id:"water",label:"Water",color:"#FF7A7A"},{id:"export",label:"Export",color:"#9BF6A3"},{id:"hold",label:"Hold",color:"#FFD966"}];function iy(t,e){const n=t.filter(d=>_d(d.start_time)||Xo(d.start_time));if(!n.length)return[];const s=[...n].sort((d,h)=>new Date(d.start_time).getTime()-new Date(h.start_time).getTime()),a=[],o={};let l=0;for(const d of s){const h=new Date(d.start_time),p=d.end_time?new Date(d.end_time):new Date(h.getTime()+1800*1e3),g=d.is_historical===!0,y=[],_=d.charge_kw??0,j=d.battery_discharge_kw??d.discharge_kw??0,k=d.water_heating_kw??0,N=d.export_kwh??0,D=(_||0)<=0&&(j||0)<=0&&(k||0)<=0&&(N||0)<=0;let R=!1;if(e){const E=typeof d.projected_soc_percent=="number"?d.projected_soc_percent:typeof d.soc_target_percent=="number"?d.soc_target_percent:null;D&&typeof E=="number"&&(E<=e.minSocPercent+.01||E>=e.maxSocPercent-.01)&&(R=!0)}_>0&&y.push("battery"),k>0&&y.push("water"),N>0&&y.push("export"),y.length||!R&&D&&y.push("hold");for(const E of y){const B=o[E];if(B&&h.getTime()<=B.end.getTime())p.getTime()>B.end.getTime()&&(B.end=p);else{const U={id:`auto-${l++}-${E}`,lane:E,start:h,end:p,source:"schedule",isHistorical:g};a.push(U),o[E]=U}}}return a}function gW(){const[t,e]=A.useState(null),[n,s]=A.useState([]),[a,o]=A.useState(null),[l,d]=A.useState(null),[h,p]=A.useState(!1),[g,y]=A.useState(!1),[_,j]=A.useState(0),[k,N]=A.useState(null),[D,R]=A.useState(null),[E,B]=A.useState(null);A.useEffect(()=>{let me=!1;return p(!0),d(null),Promise.allSettled([Me.schedule(),Me.scheduleTodayWithHistory(),Me.config()]).then(([le,Z,re])=>{if(!me){if(le.status==="fulfilled"){const H=le.value.schedule??[];e(H),s(iy(H,E)),o(null)}else console.error("Failed to load schedule for Planning:",le.reason),d("Failed to load schedule");if(Z.status==="fulfilled"){const H=Z.value.slots??[];N(H)}else console.error("Failed to load execution history for Planning:",Z.reason);if(re.status==="fulfilled"){const X=re.value.battery||{},ne=Number(X.min_soc_percent??0),ae=Number(X.max_soc_percent??100),xe=Number(X.max_charge_power_kw??0),V=Number(X.max_discharge_power_kw??0);B({minSocPercent:Number.isFinite(ne)?ne:0,maxSocPercent:Number.isFinite(ae)?ae:100,maxChargeKw:Number.isFinite(xe)?xe:0,maxDischargeKw:Number.isFinite(V)?V:0})}else console.error("Failed to load config for Planning constraints:",re.reason)}}).finally(()=>{me||p(!1)}),()=>{me=!0}},[]),A.useEffect(()=>{if(!t){R(null);return}const me=t.filter(le=>_d(le.start_time)||Xo(le.start_time));if(k&&k.length){const le=me.filter(Z=>Xo(Z.start_time));R([...k,...le])}else R(me)},[t,k,E]);const U=A.useMemo(()=>n,[n]),$=({id:me,start:le,lane:Z})=>{s(re=>re.map(H=>{if(H.id!==me)return H;const X=H.end.getTime()-H.start.getTime(),ne=new Date(le.getTime()+X);return{...H,start:le,end:ne,lane:Z}}))},I=({id:me,start:le,end:Z})=>{s(re=>re.map(H=>H.id===me?{...H,start:le,end:Z}:H))},O=me=>{o(me)},q=()=>{a&&(s(me=>me.filter(le=>le.id!==a)),o(null))},J=(me,le)=>{if(!le)return{ok:!0};const Z=[];for(const ne of me){const ae=ne.start_time,xe=typeof ne.projected_soc_percent=="number"?ne.projected_soc_percent:typeof ne.soc_target_percent=="number"?ne.soc_target_percent:null;typeof xe=="number"&&(xe<le.minSocPercent-.01?Z.push(`${ae}: SoC ${xe.toFixed(1)}% below min ${le.minSocPercent}%`):xe>le.maxSocPercent+.01&&Z.push(`${ae}: SoC ${xe.toFixed(1)}% above max ${le.maxSocPercent}%`));const V=Math.max(ne.battery_charge_kw??ne.charge_kw??0,0),ee=Math.max(ne.battery_discharge_kw??ne.discharge_kw??0,0);le.maxChargeKw>0&&V>le.maxChargeKw+1e-6&&Z.push(`${ae}: charge ${V.toFixed(2)} kW exceeds max ${le.maxChargeKw} kW`),le.maxDischargeKw>0&&ee>le.maxDischargeKw+1e-6&&Z.push(`${ae}: discharge ${ee.toFixed(2)} kW exceeds max ${le.maxDischargeKw} kW`)}if(!Z.length)return{ok:!0};const re=Z[0],H=Z.length-1,X=H>0?` (and ${H} more slots)`:"";return{ok:!1,message:`Manual plan violates device/SoC limits: ${re}${X}`}},oe=()=>{if(!n.length||g)return;y(!0),d(null);const me={battery:"Charge",water:"Water Heating",export:"Export",hold:"Hold"},le=n.map(Z=>({id:Z.id,group:Z.lane,title:null,action:me[Z.lane],start:Z.start.toISOString(),end:Z.end.toISOString()}));Me.simulate(le).then(Z=>{const re=Z.schedule??[],H=J(re,E);if(!H.ok){console.error("Manual plan validation failed:",H.message),d(H.message);return}d(null),e(re),s(iy(re,E)),o(null),j(X=>X+1)}).catch(Z=>{console.error("Failed to apply manual changes:",Z),d("Failed to apply manual changes")}).finally(()=>{y(!1)})},ie=me=>{const le=new Date,Z=new Date(le);Z.setMinutes(Z.getMinutes()<30?0:30,0,0);const re=new Date(Z.getTime()+3600*1e3),H=`manual-${Date.now()}-${me}`;s(X=>[...X,{id:H,lane:me,start:Z,end:re,source:"schedule"}])};return u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12",children:[u.jsxs(Xe,{className:"p-4 md:p-6 mb-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between pb-4",children:[u.jsx("div",{className:"text-sm text-muted",children:"Planning Timeline"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[h&&"Loading schedule",!h&&l&&l]})]}),u.jsx("div",{className:"rounded-xl2 border border-line/60 bg-surface2 overflow-hidden",children:u.jsx(pW,{lanes:mW,blocks:U,selectedBlockId:a,onBlockMove:$,onBlockResize:I,onBlockSelect:O,onAddBlock:ie})}),u.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[u.jsx("button",{className:"rounded-pill bg-accent text-canvas px-5 py-2.5 font-semibold disabled:opacity-40",disabled:h||g||n.length===0,onClick:oe,children:"Apply manual changes"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"rounded-pill border border-line/70 px-4 py-2.5 text-text hover:border-accent disabled:opacity-40",disabled:!a,onClick:q,children:"Delete block"}),u.jsx("button",{className:"rounded-pill border border-line/70 px-4 py-2.5 text-text hover:border-accent disabled:opacity-40",disabled:h||!t,onClick:()=>{t&&(s(iy(t)),o(null))},children:"Reset plan"})]})]})]}),D&&D.length>0&&u.jsx(wd,{day:"today",range:"48h",showDayToggle:!1,refreshToken:_,slotsOverride:D})]})}function Fr({label:t,value:e,hint:n}){return u.jsxs("div",{className:"rounded-xl2 bg-surface2 border border-line/60 px-4 py-3",children:[u.jsx("div",{className:"text-[11px] text-muted tracking-wide",children:t}),u.jsx("div",{className:"text-lg leading-tight",children:e}),n&&u.jsx("div",{className:"text-[11px] text-muted mt-1",children:n})]})}function xW(t){if(!t||t<=0)return"";const e=["B","KB","MB","GB"];let n=t,s=0;for(;n>=1024&&s<e.length-1;)n/=1024,s+=1;return`${n.toFixed(1)} ${e[s]}`}function ay(t){if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toLocaleString(void 0,{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function yW(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState(!0),[l,d]=A.useState(null),[h,p]=A.useState(null),[g,y]=A.useState(null),[_,j]=A.useState(!1),[k,N]=A.useState(null),[D,R]=A.useState(!1),[E,B]=A.useState(null),[U,$]=A.useState(null),I=A.useRef(null),O=A.useRef(null);A.useEffect(()=>{let F=!1;return o(!0),d(null),Promise.allSettled([Me.learningStatus(),Me.config(),Me.learningHistory(),Me.debug(),Me.learningDailyMetrics()]).then(Se=>{if(F)return;const[Ie,tt,Te,ft,xt]=Se;if(Ie.status==="fulfilled"?e(Ie.value):(console.error("Failed to load learning status:",Ie.reason),d("Failed to load learning status")),tt.status==="fulfilled"?s(tt.value):(console.error("Failed to load config for learning tab:",tt.reason),l||d("Failed to load config")),Te.status==="fulfilled"?p(Te.value):console.error("Failed to load learning history:",Te.reason),ft.status==="fulfilled"&&ft.value&&typeof ft.value=="object"){const _t=ft.value.s_index;_t&&typeof _t=="object"&&y({mode:_t.mode,base_factor:_t.base_factor,factor:_t.factor,max_factor:_t.max_factor})}xt.status==="fulfilled"?$(xt.value):console.error("Failed to load daily learning metrics:",xt.reason),o(!1)}),()=>{F=!0}},[]);const q=t?.metrics,J=q?.completed_learning_runs??q?.total_learning_runs??0,oe=q?.failed_learning_runs??0,ie=q?.days_with_data??0,me=xW(q?.db_size_bytes),le=t?.enabled===!0,Z=q?.last_learning_run??t?.last_updated,re=q?.last_observation,H=t?.sync_interval_minutes,X=t?.last_error,ne=q&&Object.keys(q).length>0||J>0||oe>0||ie>0,ae=U?.s_index_base_factor,xe=U?.pv_error_mean_abs_kwh,V=U?.load_error_mean_abs_kwh,ee=async()=>{if(!(!le||_)){j(!0),N(null);try{const F=await Me.learningRun(),de=[];F.message&&de.push(F.message),typeof F.changes_applied=="number"&&de.push(`changes applied: ${F.changes_applied}`),!de.length&&F.status&&de.push(F.status),N(de.join("  ")||"Learning run completed.")}catch(F){console.error("Failed to run learning:",F),N("Failed to run learning (see logs).")}finally{j(!1);try{const F=await Me.learningStatus();e(F);const de=await Me.learningHistory();p(de)}catch(F){console.error("Failed to refresh learning status/history after run:",F)}}}},pe=async()=>{if(!D){R(!0),B(null);try{const F=await Me.learningLoops(),de=[];Object.entries(F).forEach(([Ie,tt])=>{if(!tt||typeof tt!="object")return;const Te=tt.status||"no_changes";de.push(`${Ie}: ${Te}`)}),B(de.length?de.join("  "):"No loops reported any changes.")}catch(F){console.error("Failed to test learning loops:",F),B("Failed to test loops (see logs).")}finally{R(!1)}}};return A.useEffect(()=>{if(!I.current)return;const F=h?.runs??[],de=h?.s_index_history??[];if(!F.length&&!de.length){O.current&&(O.current.destroy(),O.current=null);return}const Se=new Map;F.forEach(st=>{const ln=new Date(st.started_at);if(Number.isNaN(ln.getTime()))return;const Yn=ln.toISOString().slice(0,10),Sn=Se.get(Yn)??0,cs=typeof st.changes_applied=="number"?st.changes_applied:0;Se.set(Yn,Sn+cs)});const Ie=new Set;for(const st of Se.keys())Ie.add(st);de.forEach(st=>{st.date&&Ie.add(st.date)});const tt=Array.from(Ie).sort(),Te=tt,ft=tt.map(st=>Se.get(st)??0),xt=new Map;de.forEach(st=>{xt.set(st.date,st.value!==null&&st.value!==void 0?st.value:null)});const _t=tt.map(st=>xt.has(st)?xt.get(st):null),Bt={labels:Te,datasets:[{type:"bar",label:"Changes applied",data:ft,backgroundColor:"rgba(244, 143, 177, 0.7)",borderRadius:4,yAxisID:"y"},{type:"line",label:"S-index factor",data:_t,borderColor:"rgba(129, 212, 250, 0.9)",backgroundColor:"rgba(129, 212, 250, 0.2)",tension:.2,pointRadius:2,yAxisID:"y1"}]},Dt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#a6b0bf",usePointStyle:!0}},tooltip:{callbacks:{label:st=>st.dataset.label==="Changes applied"?`Changes applied: ${st.parsed.y}`:st.dataset.label==="S-index factor"?`S-index: ${st.parsed.y.toFixed(3)}`:`${st.dataset.label}: ${st.parsed.y}`}}},scales:{x:{ticks:{color:"#a6b0bf",maxRotation:0},grid:{display:!1}},y:{ticks:{color:"#a6b0bf",stepSize:1},grid:{color:"rgba(255,255,255,0.06)"},beginAtZero:!0,position:"left",title:{display:!1}},y1:{ticks:{color:"#a6b0bf"},grid:{display:!1},beginAtZero:!1,position:"right",title:{display:!1}}}};if(O.current){O.current.data=Bt,O.current.options=Dt,O.current.update();return}return O.current=new oi(I.current,{type:"bar",data:Bt,options:Dt}),()=>{O.current&&(O.current.destroy(),O.current=null)}},[h]),u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12",children:[u.jsxs("div",{className:"mb-6 flex items-baseline justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-muted",children:"Learning Engine"}),u.jsx("div",{className:"text-[13px] text-muted/80",children:"Status, metrics, and history for the automatic tuning loop."})]}),u.jsxs("div",{className:"text-[11px] text-muted",children:[a&&"Loading",!a&&l&&l]})]}),u.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[u.jsxs(Xe,{className:"p-5 lg:col-span-1",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Overview"}),u.jsxs("div",{className:"space-y-2 text-sm text-muted",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Learning"}),u.jsx("span",{className:`rounded-pill border px-2.5 py-0.5 text-[11px] ${le?"border-emerald-500/60 text-emerald-300":"border-line/70 text-muted"}`,children:le?"enabled":"disabled"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Last run"}),u.jsx("span",{children:ay(Z)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Last observation"}),u.jsx("span",{children:ay(re)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Sync interval"}),u.jsx("span",{children:H!=null?`${H} min`:""})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"SQLite path"}),u.jsx("span",{className:"truncate max-w-[12rem] text-[11px] text-muted/80",children:t?.sqlite_path||n?.learning?.sqlite_path||""})]}),u.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[u.jsx("button",{className:"rounded-pill bg-accent text-canvas px-3 py-1.5 text-[11px] font-semibold disabled:opacity-40",onClick:ee,disabled:!le||_,children:_?"Running":"Run learning now"}),u.jsx("button",{className:"rounded-pill border border-line/70 px-3 py-1.5 text-[11px] font-semibold text-muted hover:border-accent disabled:opacity-40",onClick:pe,disabled:D,children:D?"Testing loops":"Test loops"})]}),(k||E)&&u.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-muted/90",children:[k&&u.jsx("div",{children:k}),E&&u.jsx("div",{children:E})]}),!a&&!l&&!le&&u.jsxs("div",{className:"mt-3 rounded-xl2 border border-dashed border-line/60 bg-surface2/60 px-3 py-2 text-[12px] text-muted/90",children:["Learning is currently ",u.jsx("span",{className:"font-semibold",children:"disabled"}),". Enable it in the Settings  Parameters section to start collecting data."]}),!a&&!l&&le&&!ne&&u.jsx("div",{className:"mt-3 rounded-xl2 border border-dashed border-line/60 bg-surface2/60 px-3 py-2 text-[12px] text-muted/90",children:"Learning is enabled but no runs have been recorded yet. This panel will fill in after the planner has accumulated enough data."}),!a&&!l&&X&&u.jsxs("div",{className:"mt-3 rounded-xl2 border border-amber-500/60 bg-amber-500/5 px-3 py-2 text-[12px] text-amber-200",children:[u.jsx("div",{className:"font-semibold mb-0.5",children:"Last learning error"}),u.jsx("div",{className:"line-clamp-3 break-words",children:X})]})]})]}),u.jsxs(Xe,{className:"p-5 lg:col-span-2",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Metrics"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4",children:[u.jsx(Fr,{label:"Completed runs",value:J?J.toString():"0"}),u.jsx(Fr,{label:"Failed runs",value:oe?oe.toString():"0"}),u.jsx(Fr,{label:"Days with data",value:ie?ie.toString():"0"}),u.jsx(Fr,{label:"DB size",value:me})]}),ae!=null&&u.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-[11px] text-muted",children:[u.jsxs("div",{children:[u.jsx("div",{className:"uppercase tracking-wide text-[10px] text-muted/70",children:"Learned S-index base"}),u.jsx("div",{className:"mt-0.5 text-[13px]",children:ae.toFixed(3)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"uppercase tracking-wide text-[10px] text-muted/70",children:"PV MAE (kWh)"}),u.jsx("div",{className:"mt-0.5 text-[13px]",children:xe!=null?xe.toFixed(3):""})]}),u.jsxs("div",{children:[u.jsx("div",{className:"uppercase tracking-wide text-[10px] text-muted/70",children:"Load MAE (kWh)"}),u.jsx("div",{className:"mt-0.5 text-[13px]",children:V!=null?V.toFixed(3):""})]})]})]})]}),u.jsxs("div",{className:"grid gap-6 mt-6 lg:grid-cols-3",children:[u.jsxs(Xe,{className:"p-5 lg:col-span-2",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Parameter impact"}),u.jsx("div",{className:"text-sm text-muted/80",children:"Read-only snapshot of key thresholds that learning can adjust (decision thresholds, S-index factors, daily change limits). Edits are made in the Settings tab."}),u.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-muted/90 md:grid-cols-2",children:[u.jsxs("div",{className:"rounded-xl2 border border-line/60 px-3 py-2",children:[u.jsx("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-muted",children:u.jsx("span",{children:"Decision thresholds"})}),u.jsxs("div",{className:"mt-2 space-y-1.5 text-[13px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Battery use margin"}),u.jsxs("span",{className:"tabular-nums",children:[n?.decision_thresholds?.battery_use_margin_sek??""," ",u.jsx("span",{className:"text-[11px] text-muted",children:"SEK/kWh"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Battery  Water margin"}),u.jsxs("span",{className:"tabular-nums",children:[n?.decision_thresholds?.battery_water_margin_sek??""," ",u.jsx("span",{className:"text-[11px] text-muted",children:"SEK/kWh"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Export profit margin"}),u.jsxs("span",{className:"tabular-nums",children:[n?.decision_thresholds?.export_profit_margin_sek??""," ",u.jsx("span",{className:"text-[11px] text-muted",children:"SEK/kWh"})]})]})]})]}),u.jsxs("div",{className:"rounded-xl2 border border-line/60 px-3 py-2",children:[u.jsx("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-muted",children:u.jsx("span",{children:"S-index & learning limits"})}),u.jsxs("div",{className:"mt-2 space-y-1.5 text-[13px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Current S-index"}),u.jsxs("span",{className:"tabular-nums",children:[g?.factor??g?.base_factor??n?.s_index?.base_factor??"",g?.mode&&u.jsxs("span",{className:"ml-1 text-[11px] text-muted",children:["(",g.mode,")"]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"S-index base factor"}),u.jsxs("span",{className:"tabular-nums",children:[n?.s_index?.base_factor??"",n?.learning?.max_daily_param_change?.s_index_base_factor?u.jsx("span",{className:"ml-1 rounded-full bg-emerald-500/10 px-1.5 py-0.5 text-[10px] text-emerald-300",children:"learning can adjust"}):null]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"PV deficit weight"}),u.jsxs("span",{className:"tabular-nums",children:[n?.s_index?.pv_deficit_weight??"",n?.learning?.max_daily_param_change?.s_index_pv_deficit_weight?u.jsx("span",{className:"ml-1 rounded-full bg-emerald-500/10 px-1.5 py-0.5 text-[10px] text-emerald-300",children:"learning can adjust"}):null]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Temp weight"}),u.jsxs("span",{className:"tabular-nums",children:[n?.s_index?.temp_weight??"",n?.learning?.max_daily_param_change?.s_index_temp_weight?u.jsx("span",{className:"ml-1 rounded-full bg-emerald-500/10 px-1.5 py-0.5 text-[10px] text-emerald-300",children:"learning can adjust"}):null]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Min improvement"}),u.jsx("span",{className:"tabular-nums",children:n?.learning?.min_improvement_threshold??""})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Min samples"}),u.jsx("span",{className:"tabular-nums",children:n?.learning?.min_sample_threshold??""})]})]})]})]})]}),u.jsxs(Xe,{className:"p-5 lg:col-span-1",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"History"}),u.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"Recent learning runs and how many parameter changes were applied."}),u.jsx("div",{className:"h-40 mb-3",children:u.jsx("canvas",{ref:I,className:"w-full h-full"})}),h?.recent_changes&&h.recent_changes.length>0&&u.jsxs("div",{className:"mt-1 border-t border-line/50 pt-2",children:[u.jsx("div",{className:"mb-1 text-[11px] uppercase tracking-wide text-muted",children:"Recent changes"}),u.jsx("div",{className:"space-y-1.5 max-h-32 overflow-auto text-[11px] text-muted/90",children:h.recent_changes.slice(0,6).map((F,de)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"truncate max-w-[10rem]",children:F.param_path}),u.jsxs("span",{className:"ml-2 tabular-nums text-right",children:[F.old_value??""," ",u.jsx("span",{className:"mx-0.5 text-muted/70",children:""}),F.new_value??""]})]}),u.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted/70",children:[u.jsxs("span",{children:[F.loop||"learning"," ",F.reason&&u.jsxs("span",{className:"ml-1 line-clamp-1",children:[" ",F.reason]})]}),F.started_at&&u.jsx("span",{children:ay(F.started_at)})]})]},`${F.run_id??"r"}-${F.param_path}-${de}`))})]})]})]})]})}function vW(){const[t,e]=A.useState([]),[n,s]=A.useState(!1),[a,o]=A.useState(null),[l,d]=A.useState("all"),[h,p]=A.useState("all"),[g,y]=A.useState(null),[_,j]=A.useState(!1),[k,N]=A.useState(null),[D,R]=A.useState("today"),E=A.useRef(null),B=A.useRef(null);A.useEffect(()=>{s(!0),o(null),Me.debugLogs().then(O=>e(O.logs??[])).catch(O=>{console.error("Failed to fetch debug logs:",O),o("Failed to load logs")}).finally(()=>s(!1))},[]),A.useEffect(()=>{(()=>{j(!0),N(null);let O="today";if(D==="yesterday"){const q=new Date;q.setDate(q.getDate()-1),O=q.toISOString().slice(0,10)}Me.historySoc(O).then(q=>y(q)).catch(q=>{console.error("Failed to fetch historic SoC:",q),N("Failed to load SoC history")}).finally(()=>j(!1))})()},[D]);const U=t.filter(I=>{if(l==="all")return!0;const O=(I.level||"").toUpperCase();return l==="error"?O==="ERROR"||O==="CRITICAL":O==="WARN"||O==="WARNING"||O==="ERROR"||O==="CRITICAL"}).filter(I=>{if(h==="all")return!0;const O=new Date(I.timestamp).getTime();if(Number.isNaN(O))return!0;const J=Date.now()-O,oe=3600*1e3;return h==="1h"?J<=oe:h==="6h"?J<=6*oe:h==="24h"?J<=24*oe:!0}),$=t.filter(I=>{const O=(I.level||"").toUpperCase();return O==="ERROR"||O==="CRITICAL"});return A.useEffect(()=>{if(!E.current)return;const I=g?.slots??[];if(!I.length){B.current&&(B.current.destroy(),B.current=null);return}const O=I.map(ie=>{const me=new Date(ie.timestamp);return Number.isNaN(me.getTime())?"":me.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}),q=I.map(ie=>ie.soc_percent??0),J={labels:O,datasets:[{type:"line",label:"SoC (%)",data:q,borderColor:"rgba(129, 200, 253, 0.9)",backgroundColor:"rgba(129, 200, 253, 0.15)",pointRadius:0,tension:.25}]},oe={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:ie=>`SoC: ${ie.parsed.y.toFixed(1)}%`}}},scales:{x:{ticks:{color:"#a6b0bf",maxRotation:0},grid:{display:!1}},y:{ticks:{color:"#a6b0bf",stepSize:10},grid:{color:"rgba(255,255,255,0.06)"},beginAtZero:!0,suggestedMax:100}}};if(B.current){B.current.data=J,B.current.options=oe,B.current.update();return}return B.current=new oi(E.current,{type:"line",data:J,options:oe}),()=>{B.current&&(B.current.destroy(),B.current=null)}},[g]),u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"text-sm text-muted",children:"Debug & Diagnostics"}),u.jsx("div",{className:"text-[13px] text-muted/80",children:"Logs and SoC history to understand what the planner has been doing recently."})]}),u.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[u.jsxs(Xe,{className:"p-5 lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("div",{className:"text-sm text-muted",children:"Logs"}),u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[u.jsx("button",{className:"rounded-pill border border-line/60 px-3 py-1 hover:border-accent disabled:opacity-40",onClick:()=>{s(!0),o(null),Me.debugLogs().then(I=>e(I.logs??[])).catch(I=>{console.error("Failed to refresh debug logs:",I),o("Failed to refresh logs")}).finally(()=>s(!1))},disabled:n,children:n?"Refreshing":"Refresh"}),u.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:h,onChange:I=>p(I.target.value),children:[u.jsx("option",{value:"all",children:"All time"}),u.jsx("option",{value:"1h",children:"Last 1 hour"}),u.jsx("option",{value:"6h",children:"Last 6 hours"}),u.jsx("option",{value:"24h",children:"Last 24 hours"})]}),u.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:l,onChange:I=>d(I.target.value),children:[u.jsx("option",{value:"all",children:"All levels"}),u.jsx("option",{value:"warn_error",children:"Warn + Error"}),u.jsx("option",{value:"error",children:"Errors only"})]})]})]}),a&&u.jsx("div",{className:"text-[11px] text-amber-400 mb-2",children:a}),u.jsxs("div",{className:"h-64 overflow-auto rounded-xl2 border border-line/60 bg-surface2/40 text-[11px] font-mono text-muted/90",children:[U.length===0&&!n&&!a&&u.jsx("div",{className:"px-3 py-2 text-muted/70",children:"No logs captured yet."}),U.map((I,O)=>u.jsxs("div",{className:"px-3 py-1.5 border-b border-line/20 last:border-b-0",children:[u.jsx("span",{className:"text-muted/60 mr-2",children:new Date(I.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),u.jsx("span",{className:"mr-2 rounded-full px-1.5 py-0.5 text-[10px] uppercase tracking-wide border border-line/50",children:I.level}),u.jsx("span",{className:"text-muted/70 mr-2",children:I.logger}),u.jsx("span",{children:I.message})]},`${I.timestamp}-${O}`))]})]}),u.jsxs(Xe,{className:"p-5 lg:col-span-1",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Recent events"}),u.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"Quick view of recent errors and warnings from the log stream."}),u.jsxs("div",{className:"space-y-2 text-[12px] text-muted/90",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Total log entries"}),u.jsx("span",{className:"tabular-nums",children:t.length})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Error/critical entries"}),u.jsx("span",{className:"tabular-nums",children:$.length})]}),u.jsx("div",{className:"mt-3 text-[11px] text-muted/70 uppercase tracking-wide",children:"Last errors"}),u.jsxs("div",{className:"space-y-1.5 max-h-40 overflow-auto",children:[$.slice(-5).map((I,O)=>u.jsxs("div",{className:"rounded-md bg-rose-500/5 border border-rose-500/40 px-2 py-1.5",children:[u.jsxs("div",{className:"text-[10px] text-rose-200/80 mb-0.5",children:[new Date(I.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})," "," ",I.logger]}),u.jsx("div",{className:"text-[11px] text-rose-50/90 line-clamp-2",children:I.message})]},`${I.timestamp}-err-${O}`)),$.length===0&&u.jsx("div",{className:"text-[11px] text-muted/70",children:"No error-level entries yet."})]})]})]})]}),u.jsx("div",{className:"grid gap-6 mt-6 lg:grid-cols-3",children:u.jsxs(Xe,{className:"p-5 lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("div",{className:"text-sm text-muted",children:"Historical SoC"}),u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[u.jsx("span",{className:"text-muted/70",children:"Range"}),u.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:D,onChange:I=>R(I.target.value),children:[u.jsx("option",{value:"today",children:"Today"}),u.jsx("option",{value:"yesterday",children:"Yesterday"})]})]})]}),u.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"SoC (%) over the selected day from the learning database. Use this to correlate planner behaviour with actual SoC movement."}),k&&u.jsx("div",{className:"text-[11px] text-amber-400 mb-2",children:k}),u.jsx("div",{className:"h-48",children:u.jsx("canvas",{ref:E,className:"w-full h-full"})})]})})]})}function bW({value:t,onChange:e}){const n=A.useMemo(()=>{if(typeof t!="number"||Number.isNaN(t))return 0;let y=t%360;return y<0&&(y+=360),y},[t]),[s,a]=A.useState(!1),o=y=>{const _=Math.round(y),j=[0,45,90,135,180,225,270,315];let k=_,N=1/0;for(const D of j){const R=Math.abs(_-D);R<N&&R<=7&&(N=R,k=D)}return k},l=y=>{const _=y.currentTarget.getBoundingClientRect(),j=_.left+_.width/2,k=_.top+_.height/2,N=y.clientX-j,D=y.clientY-k;let E=Math.atan2(N,-D)*180/Math.PI;E<0&&(E+=360);const B=o(E);e(B)},d=y=>{a(!0);try{y.currentTarget.setPointerCapture(y.pointerId)}catch{}l(y)},h=y=>{s&&l(y)},p=y=>{if(s){a(!1);try{y.currentTarget.releasePointerCapture(y.pointerId)}catch{}}},g=`rotate(${n} 24 24)`;return u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"relative h-16 w-16 cursor-pointer",onPointerDown:d,onPointerMove:h,onPointerUp:p,"aria-label":"Solar azimuth dial",role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":Math.round(n),children:u.jsxs("svg",{viewBox:"0 0 48 48",className:"h-full w-full",children:[u.jsx("circle",{cx:"24",cy:"24",r:"21",className:"fill-surface2 stroke-line/60",strokeWidth:"2"}),u.jsx("g",{children:Array.from({length:12}).map((y,_)=>{const j=_*30,k=j%90===0,N=!k&&j%45===0,D=21,R=k?16:N?18:19,E=(j-90)*Math.PI/180,B=24+D*Math.cos(E),U=24+D*Math.sin(E),$=24+R*Math.cos(E),I=24+R*Math.sin(E),O=k||N?"stroke-line/80":"stroke-line/40",q=k?1.6:1;return u.jsx("line",{x1:B,y1:U,x2:$,y2:I,className:O,strokeWidth:q},j)})}),u.jsx("text",{x:"24",y:"9",textAnchor:"middle",className:"fill-muted text-[8px]",children:"N"}),u.jsx("text",{x:"24",y:"45",textAnchor:"middle",className:"fill-muted text-[8px]",children:"S"}),u.jsx("text",{x:"43",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"E"}),u.jsx("text",{x:"5",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"W"}),u.jsxs("g",{transform:g,children:[u.jsx("line",{x1:"24",y1:"24",x2:"24",y2:"6",className:"stroke-accent",strokeWidth:"2.2",strokeLinecap:"round"}),u.jsx("circle",{cx:"24",cy:"24",r:"2.5",className:"fill-accent"})]})]})}),u.jsxs("div",{className:"text-[11px] text-muted leading-tight",children:[u.jsxs("div",{className:"font-medium text-text",children:[Math.round(n),""]}),u.jsx("div",{children:"0 = North  90 = East  180 = South  270 = West"})]})]})}function _W({value:t,onChange:e}){const n=A.useMemo(()=>{if(typeof t!="number"||Number.isNaN(t))return 0;let y=t;return y<0&&(y=0),y>90&&(y=90),y},[t]),[s,a]=A.useState(!1),o=y=>{const _=y.currentTarget.getBoundingClientRect(),j=_.left+_.width/2,k=_.top+_.height/2,N=y.clientX-j,D=y.clientY-k;let E=Math.atan2(N,-D)*180/Math.PI;E<0&&(E+=360),(E<270||E>360)&&(E>=0&&E<=135?E=360:E=270);let B=360-E;B<0&&(B=0),B>90&&(B=90);const U=Math.round(B/5)*5;e(U)},l=y=>{a(!0);try{y.currentTarget.setPointerCapture(y.pointerId)}catch{}o(y)},d=y=>{s&&o(y)},h=y=>{if(s){a(!1);try{y.currentTarget.releasePointerCapture(y.pointerId)}catch{}}},g=`rotate(${A.useMemo(()=>360-n,[n])} 24 24)`;return u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"relative h-16 w-16 cursor-pointer",onPointerDown:l,onPointerMove:d,onPointerUp:h,"aria-label":"Solar tilt dial",role:"slider","aria-valuemin":0,"aria-valuemax":90,"aria-valuenow":Math.round(n),children:u.jsxs("svg",{viewBox:"0 0 48 48",className:"h-full w-full",children:[u.jsx("circle",{cx:"24",cy:"24",r:"21",className:"fill-surface2 stroke-line/40",strokeWidth:"2"}),u.jsx("path",{d:"M3 24 A21 21 0 0 1 24 3",className:"fill-none stroke-accent/70",strokeWidth:"2.2"}),u.jsx("g",{children:Array.from({length:7}).map((y,_)=>{const j=_*15,k=360-j,N=21,D=j%30===0?18:19,R=(k-90)*Math.PI/180,E=24+N*Math.cos(R),B=24+N*Math.sin(R),U=24+D*Math.cos(R),$=24+D*Math.sin(R),I=j===0||j===90?"stroke-line/80":"stroke-line/60",O=j===0||j===90?1.6:1.2;return u.jsx("line",{x1:E,y1:B,x2:U,y2:$,className:I,strokeWidth:O},j)})}),u.jsx("text",{x:"24",y:"9",textAnchor:"middle",className:"fill-muted text-[8px]",children:"0"}),u.jsx("text",{x:"5",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"90"}),u.jsxs("g",{transform:g,children:[u.jsx("line",{x1:"24",y1:"24",x2:"24",y2:"6",className:"stroke-accent",strokeWidth:"2.2",strokeLinecap:"round"}),u.jsx("circle",{cx:"24",cy:"24",r:"2.5",className:"fill-accent"})]})]})}),u.jsxs("div",{className:"text-[11px] text-muted leading-tight",children:[u.jsxs("div",{className:"font-medium text-text",children:[Math.round(n),""]}),u.jsx("div",{children:"Drag along the arc: 0 = flat  90 = vertical panel"})]})]})}function wW({entities:t,value:e,onChange:n,placeholder:s="Select entity...",disabled:a=!1,loading:o=!1}){const[l,d]=A.useState(!1),[h,p]=A.useState(""),[g,y]=A.useState(0),_=A.useRef(null),j=A.useRef(null),k=A.useRef(null),N=t.find(I=>I.entity_id===e),D=A.useMemo(()=>{if(!h.trim())return t;const I=h.toLowerCase();return t.filter(O=>O.entity_id.toLowerCase().includes(I)||O.friendly_name.toLowerCase().includes(I))},[t,h]),R=A.useMemo(()=>{const I={};return D.forEach(O=>{const q=O.domain||O.entity_id.split(".")[0];I[q]||(I[q]=[]),I[q].push(O)}),I},[D]),E=A.useMemo(()=>{const I=[];return Object.values(R).forEach(O=>I.push(...O)),I},[R]);A.useEffect(()=>{y(0)},[D.length]),A.useEffect(()=>{const I=O=>{_.current&&!_.current.contains(O.target)&&(d(!1),p(""))};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),A.useEffect(()=>{if(l&&k.current){const I=k.current.querySelector('[data-highlighted="true"]');I&&I.scrollIntoView({block:"nearest"})}},[g,l]);const B=I=>{n(I.entity_id),d(!1),p("")},U=I=>{if(!l){(I.key==="Enter"||I.key===" "||I.key==="ArrowDown")&&(I.preventDefault(),d(!0));return}switch(I.key){case"ArrowDown":I.preventDefault(),y(O=>Math.min(O+1,E.length-1));break;case"ArrowUp":I.preventDefault(),y(O=>Math.max(O-1,0));break;case"Enter":I.preventDefault(),E[g]&&B(E[g]);break;case"Escape":I.preventDefault(),d(!1),p("");break}},$=I=>{I.stopPropagation(),n(""),d(!1),p("")};return u.jsxs("div",{ref:_,className:"relative",children:[u.jsxs("button",{type:"button",disabled:a,onClick:()=>{a||(d(!l),l||setTimeout(()=>j.current?.focus(),0))},onKeyDown:U,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[u.jsx("span",{className:N?"text-text":"text-muted",children:o?"Loading...":N?.friendly_name||N?.entity_id||s}),u.jsxs("div",{className:"flex items-center gap-1",children:[e&&!a&&u.jsx("button",{type:"button",onClick:$,className:"p-0.5 rounded hover:bg-line/60 text-muted hover:text-text",tabIndex:-1,children:u.jsx(_p,{className:"h-3.5 w-3.5"})}),u.jsx(jv,{className:`h-4 w-4 text-muted transition-transform ${l?"rotate-180":""}`})]})]}),l&&u.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[280px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float",children:[u.jsx("div",{className:"p-2 border-b border-line",children:u.jsxs("div",{className:"relative",children:[u.jsx(qT,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),u.jsx("input",{ref:j,type:"text",value:h,onChange:I=>p(I.target.value),onKeyDown:U,placeholder:"Search entities...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40"})]})}),u.jsx("div",{ref:k,className:"max-h-[240px] overflow-y-auto p-1",children:D.length===0?u.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No entities found"}):Object.entries(R).map(([I,O])=>u.jsxs("div",{className:"mb-1",children:[u.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:I}),O.map(q=>{const oe=E.findIndex(me=>me.entity_id===q.entity_id)===g,ie=q.entity_id===e;return u.jsxs("button",{type:"button","data-highlighted":oe,onClick:()=>B(q),className:`
                                                    w-full text-left px-2 py-1.5 rounded-md text-sm
                                                    transition-colors
                                                    ${oe?"bg-accent/20 text-text":"text-text hover:bg-surface2"}
                                                    ${ie?"font-medium":""}
                                                `,children:[u.jsx("div",{className:"truncate",children:q.friendly_name||q.entity_id}),u.jsx("div",{className:"text-[10px] text-muted truncate",children:q.entity_id})]},q.entity_id)})]},I))})]})]})}function SW({value:t,onChange:e,placeholder:n="Select service (e.g. notify.mobile_app)...",disabled:s=!1}){const[a,o]=A.useState(!1),[l,d]=A.useState(""),[h,p]=A.useState([]),[g,y]=A.useState(!1),[_,j]=A.useState(0),k=A.useRef(null),N=A.useRef(null),D=A.useRef(null);A.useEffect(()=>{a&&h.length===0&&!g&&(y(!0),Me.haServices().then(O=>{p(O.services||[])}).catch(O=>{console.error("Failed to fetch HA services:",O)}).finally(()=>{y(!1)}))},[a,h.length,g]);const R=A.useMemo(()=>{if(!l.trim())return h;const O=l.toLowerCase();return h.filter(q=>q.toLowerCase().includes(O))},[h,l]),E=A.useMemo(()=>{const O={};return R.forEach(q=>{const J=q.split(".")[0]||"other";O[J]||(O[J]=[]),O[J].push(q)}),O},[R]),B=A.useMemo(()=>{const O=[];return Object.values(E).forEach(q=>O.push(...q)),O},[E]);A.useEffect(()=>{j(0)},[R.length]),A.useEffect(()=>{const O=q=>{k.current&&!k.current.contains(q.target)&&(o(!1),d(""))};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]),A.useEffect(()=>{if(a&&D.current){const O=D.current.querySelector('[data-highlighted="true"]');O&&O.scrollIntoView({block:"nearest"})}},[_,a]);const U=O=>{e(O),o(!1),d("")},$=O=>{if(!a){(O.key==="Enter"||O.key===" "||O.key==="ArrowDown")&&(O.preventDefault(),o(!0));return}switch(O.key){case"ArrowDown":O.preventDefault(),j(q=>Math.min(q+1,B.length-1));break;case"ArrowUp":O.preventDefault(),j(q=>Math.max(q-1,0));break;case"Enter":O.preventDefault(),B[_]&&U(B[_]);break;case"Escape":O.preventDefault(),o(!1),d("");break}},I=O=>{O.stopPropagation(),e(""),o(!1),d("")};return u.jsxs("div",{ref:k,className:"relative",children:[u.jsxs("button",{type:"button",disabled:s,onClick:()=>{s||(o(!a),a||setTimeout(()=>N.current?.focus(),0))},onKeyDown:$,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[u.jsx("span",{className:t?"text-text":"text-muted",children:g&&h.length===0?"Loading services...":t||n}),u.jsxs("div",{className:"flex items-center gap-1",children:[t&&!s&&u.jsx("button",{type:"button",onClick:I,className:"p-0.5 rounded hover:bg-line/60 text-muted hover:text-text",tabIndex:-1,children:u.jsx(_p,{className:"h-3.5 w-3.5"})}),u.jsx(jv,{className:`h-4 w-4 text-muted transition-transform ${a?"rotate-180":""}`})]})]}),a&&u.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[280px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float",children:[u.jsx("div",{className:"p-2 border-b border-line",children:u.jsxs("div",{className:"relative",children:[u.jsx(qT,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),u.jsx("input",{ref:N,type:"text",value:l,onChange:O=>d(O.target.value),onKeyDown:$,placeholder:"Search services...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40"})]})}),u.jsx("div",{ref:D,className:"max-h-[240px] overflow-y-auto p-1 scrollbar-thin",children:g&&h.length===0?u.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted animate-pulse",children:"Loading from Home Assistant..."}):R.length===0?u.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No services found"}):Object.entries(E).map(([O,q])=>u.jsxs("div",{className:"mb-1",children:[u.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:O}),q.map(J=>{const ie=B.indexOf(J)===_,me=J===t;return u.jsx("button",{type:"button","data-highlighted":ie,onClick:()=>U(J),className:`
                                                    w-full text-left px-2 py-1.5 rounded-md text-sm
                                                    transition-colors
                                                    ${ie?"bg-accent/20 text-text":"text-text hover:bg-surface2"}
                                                    ${me?"font-medium":""}
                                                `,children:u.jsx("div",{className:"truncate",children:J})},J)})]},O))})]})]})}function Cr({text:t,className:e=""}){const[n,s]=A.useState(!1);return t?u.jsxs("div",{className:`relative inline-block ${e}`,children:[u.jsx("button",{type:"button",className:"ml-1.5 text-muted/60 hover:text-accent transition-colors",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onFocus:()=>s(!0),onBlur:()=>s(!1),children:u.jsx(c5,{className:"w-3.5 h-3.5"})}),n&&u.jsxs("div",{className:"absolute z-50 w-64 p-2.5 text-xs bg-surface2 border border-line rounded-lg shadow-lg left-0 bottom-full mb-1.5",children:[u.jsx("div",{className:"text-muted leading-relaxed",children:t}),u.jsx("div",{className:"absolute w-2 h-2 bg-surface2 border-r border-b border-line transform rotate-45 left-3 -bottom-1"})]})]}):null}const jW="IANA timezone for all schedule calculations",Er={timezone:jW,"advisor.enable_llm":"Enable LLM-powered advice on Dashboard","advisor.model":"OpenRouter model identifier (requires API key in secrets.yaml)","advisor.personality":"Advice style: concise | friendly | technical","advisor.auto_fetch":"Automatically fetch advice when Dashboard loads","system.has_solar":"Enable PV forecasting & solar-related features","system.has_battery":"Enable battery control & grid arbitrage","system.has_water_heater":"Enable water heating optimization","system.grid.max_power_kw":"HARD limit: max grid import (cannot be exceeded)","system.inverter.max_power_kw":"Maximum inverter AC power output","system.location.latitude":"Decimal degrees, positive north (for PV forecasting)","system.location.longitude":"Decimal degrees, positive east (for PV forecasting)","system.solar_array.azimuth":"Panel direction: 0=North, 90=East, 180=South, 270=West","system.solar_array.kwp":"Total DC peak power of PV array in kilowatts","system.solar_array.tilt":"Panel angle from horizontal: 0=flat, 90=vertical","battery.max_soc_percent":"Planner target ceiling (BMS still enforces absolute limit)","battery_economics.battery_cycle_cost_kwh":"Degradation cost applied per kWh cycled through the battery","charging_strategy.charge_threshold_percentile":"Bottom X% of daily prices are considered 'cheap'","charging_strategy.cheap_price_tolerance_sek":"Extends 'cheap' window to prices within this tolerance","charging_strategy.price_smoothing_sek_kwh":"Groups slots slightly above cheapest into charge window","charging_strategy.block_consolidation_tolerance_sek":"Price tolerance for merging adjacent charge blocks","charging_strategy.consolidation_max_gap_slots":"Max gap (in 15-min slots) to bridge when consolidating","strategic_charging.price_threshold_sek":"[NOT IMPLEMENTED] Floor price for opportunistic charging","strategic_charging.target_soc_percent":"SoC target for cheap window expansion (used in windows.py)","water_heating.power_kw":"Power consumption of the water heater","water_heating.min_hours_per_day":"Minimum run-time per day","water_heating.min_kwh_per_day":"Optional; defaults to power * hours when unset","water_heating.max_blocks_per_day":"Prefer single block, up to two if needed","water_heating.defer_up_to_hours":"Allow deferring into early tomorrow up to N hours if cheaper","water_heating.plan_days_ahead":"Plan at most today + 1 day (tomorrow) within 48h horizon","water_heating.max_hours_between_heating":"Max gap between heating sessions (0 = no constraint)","water_heating.comfort_level":"1-5 (EconomyMaximum) - controls gap penalty","water_heating.min_spacing_hours":"Min gap between starts to avoid efficiency loss","water_heating.spacing_penalty_sek":"Soft penalty for frequent starts","water_heating.vacation_mode.enabled":"Master switch (HA entity can override when ON)","water_heating.vacation_mode.anti_legionella_temp_c":"Target temperature for safety cycle","water_heating.vacation_mode.anti_legionella_interval_days":"Run cycle every N days","water_heating.vacation_mode.anti_legionella_duration_hours":"Duration at power_kw (e.g., 3h * 3kW = 9kWh)","s_index.mode":"Options: probabilistic | dynamic","s_index.static_factor":"Used when mode=static","s_index.base_factor":"Starting point for dynamic calculationsWfz","s_index.max_factor":"Upper bound clamp for dynamic mode","s_index.pv_deficit_weight":"Weight for PV/load deficit contribution","s_index.temp_weight":"Weight for temperature adjustment","s_index.temp_baseline_c":"Baseline temperature (no adjustment)","s_index.temp_cold_c":"Temperature where adjustment reaches 100%","s_index.s_index_horizon_days":"Number of days ahead to evaluate (integer)","s_index.risk_appetite":"1-5 scale (1=safe, 3=neutral, 5=gambler)","export.enable_export":"[NOT IMPLEMENTED] Master switch for grid export","manual_planning.charge_target_percent":"Cap for manual charge slots","manual_planning.export_target_percent":"Floor target when manually scheduling export","debug.enable_planner_debug":"Enable verbose planner logging","debug.sample_size":"Sample size for debug output charts","automation.enable_scheduler":"Enable automatic schedule regeneration","automation.write_to_mariadb":"Write telemetry to MariaDB (requires secrets.yaml)","automation.external_executor_mode":"Use external executor instead of built-in","automation.schedule.every_minutes":"How often to regenerate schedule","automation.schedule.jitter_minutes":"Random delay to avoid thundering herd","automation.ml_training.enabled":"Enable automatic ML model retraining","automation.ml_training.run_days":"Days of week to train (0=Mon, 6=Sun)","automation.ml_training.run_time":"Time of day to run training (HH:MM)","learning.default_battery_cost_sek_per_kwh":"Conservative default until dynamic cost is recorded","nordpool.price_area":"Nordpool bidding zone (SE1-SE4, NO1-NO5, DK1-DK2, FI, etc.)","nordpool.currency":"Price currency","nordpool.resolution_minutes":"Slot resolution (15, 30, or 60)","pricing.vat_percent":"VAT percentage on electricity","pricing.grid_transfer_fee_sek":"Grid operator transfer fee per kWh","pricing.energy_tax_sek":"Energy tax per kWh","pricing.subscription_fee_sek_per_month":"[FUTURE] Fixed monthly grid subscription (for cost analysis)","forecasting.active_forecast_version":"Forecast engine: aurora (ML) | legacy","forecasting.pv_confidence_percent":"PV forecast scaling (100 = trust forecast fully)","forecasting.load_safety_margin_percent":"Load forecast scaling (>100 = expect more load)","grid.import_limit_kw":"Soft limit for effekttariff (breached with high penalty)","kepler.ramping_cost_sek_per_kw":"Penalty for power changes between slots (reduces sawtooth)","input_sensors.alarm_state":"Alarm panel for occupancy detection (ML feature)","input_sensors.vacation_mode":"Vacation mode toggle (reduces load forecasts)","input_sensors.battery_soc":"Current battery state of charge (%)","input_sensors.pv_power":"Current PV production (W or kW)","input_sensors.load_power":"Current load consumption (W or kW)","input_sensors.total_battery_charge":"Cumulative battery charge (kWh)","input_sensors.total_battery_discharge":"Cumulative battery discharge (kWh)","input_sensors.total_grid_export":"Cumulative grid export (kWh)","input_sensors.total_grid_import":"Cumulative grid import (kWh)","input_sensors.total_load_consumption":"Cumulative load (kWh)","input_sensors.total_pv_production":"Cumulative PV production (kWh)","input_sensors.water_heater_consumption":"Water heater daily energy (kWh)","input_sensors.today_grid_import":"Today's grid import (kWh)","input_sensors.today_grid_export":"Today's grid export (kWh)","input_sensors.today_battery_charge":"Today's battery charge (kWh)","input_sensors.today_pv_production":"Today's PV production (kWh)","input_sensors.today_load_consumption":"Today's load consumption (kWh)","input_sensors.today_net_cost":"Today's net electricity cost","executor.enabled":"Enable executor control loop","executor.shadow_mode":"Log actions but don't execute (for testing)","executor.interval_seconds":"How often to run (default: 5 minutes)","executor.pause_reminder_minutes":"Notify if paused longer than this","executor.history_retention_days":"Keep execution history for N days","executor.automation_toggle_entity":"Master enable/disable switch","executor.manual_override_entity":"Manual override active flag","executor.soc_target_entity":"SoC target input_number","executor.inverter.work_mode_entity":"Inverter mode selector","executor.inverter.work_mode_export":"Value for export mode","executor.inverter.work_mode_zero_export":"Value for zero-export mode","executor.inverter.grid_charging_entity":"Enable/disable grid charging","executor.inverter.max_charging_current_entity":"Max charge current (A)","executor.inverter.max_discharging_current_entity":"Max discharge current (A)","executor.controller.battery_capacity_kwh":"Battery capacity in kWh (for current calculations)","executor.controller.system_voltage_v":"Nominal battery voltage","executor.controller.worst_case_voltage_v":"Minimum voltage for conservative calculations","executor.controller.inverter_ac_limit_kw":"Max AC power output of inverter","executor.controller.charge_efficiency":"Charging efficiency (0-1)","executor.controller.max_charge_a":"Maximum charging current (A)","executor.controller.min_charge_a":"Minimum meaningful charge current (A)","executor.controller.round_step_a":"Round current commands to nearest X amps","executor.controller.write_threshold_a":"Only write if change exceeds X amps","executor.water_heater.target_entity":"HA entity to control","executor.water_heater.temp_off":"Idle mode (legionella-safe minimum)","executor.water_heater.temp_normal":"Scheduled heating target (used by planner)","executor.water_heater.temp_boost":"Manual boost button (Dashboard/Executor)","executor.water_heater.temp_max":"PV dump target + safety limit (never exceeded)","executor.notifications.service":"HA notify service to use","executor.notifications.on_charge_start":"Notify when grid charging starts","executor.notifications.on_charge_stop":"Notify when grid charging stops","executor.notifications.on_export_start":"Notify when export/discharge starts","executor.notifications.on_export_stop":"Notify when export/discharge stops","executor.notifications.on_water_heat_start":"Notify when water heating starts","executor.notifications.on_water_heat_stop":"Notify when water heating stops","executor.notifications.on_soc_target_change":"Notify when SoC target changes","executor.notifications.on_override_activated":"Notify when manual override triggers","executor.notifications.on_error":"Notify on executor errors","dashboard.auto_refresh_enabled":"Auto-refresh dashboard schedule display","dashboard.overlay_defaults":"Default chart overlays","ui.theme":"Color theme name","ui.theme_accent_index":"Accent color index (0-based)","appliances.dishwasher.label":"Display name in UI","appliances.dishwasher.duration_hours":"Typical run duration"},TW=[{id:"system",label:"System"},{id:"parameters",label:"Parameters"},{id:"ui",label:"UI"},{id:"advanced",label:"Advanced"}],uv=[{title:"System Profile",description:"Core hardware toggles and high-level system preferences.",fields:[{key:"system.has_solar",label:"Solar panels installed",helper:"Enable PV forecasting and solar optimization",path:["system","has_solar"],type:"boolean"},{key:"system.has_battery",label:"Home battery installed",helper:"Enable battery control and grid arbitrage",path:["system","has_battery"],type:"boolean"},{key:"system.has_water_heater",label:"Smart water heater",helper:"Enable water heating optimization",path:["system","has_water_heater"],type:"boolean"},{key:"export.enable_export",label:"Enable grid export",helper:"[EXPERIMENTAL] Master switch for grid export",path:["export","enable_export"],type:"boolean"}]},{title:"Location & Solar Array",description:"Geolocation and PV array parameters used by the forecasting engine.",fields:[{key:"system.location.latitude",label:"Latitude",helper:"Decimal degrees, positive north. Example: 55.4932",path:["system","location","latitude"],type:"number"},{key:"system.location.longitude",label:"Longitude",helper:"Decimal degrees, positive east. Example: 13.1112",path:["system","location","longitude"],type:"number"},{key:"system.solar_array.azimuth",label:"Solar azimuth ()",helper:"Panel direction: 0 = North, 90 = East, 180 = South, 270 = West.",path:["system","solar_array","azimuth"],type:"number"},{key:"system.solar_array.tilt",label:"Solar tilt ()",helper:"Angle from horizontal. 0 = flat, 90 = vertical.",path:["system","solar_array","tilt"],type:"number"},{key:"system.solar_array.kwp",label:"Solar capacity (kWp)",helper:"Total DC peak power of the PV array.",path:["system","solar_array","kwp"],type:"number"}]},{title:"Battery Specifications",description:"Capacity, max power, and SoC limits define safe operating bands.",fields:[{key:"battery.capacity_kwh",label:"Battery capacity (kWh)",path:["battery","capacity_kwh"],type:"number"},{key:"battery.max_charge_power_kw",label:"Max charge power (kW)",path:["battery","max_charge_power_kw"],type:"number"},{key:"battery.max_discharge_power_kw",label:"Max discharge power (kW)",path:["battery","max_discharge_power_kw"],type:"number"},{key:"battery.min_soc_percent",label:"Min SoC (%)",path:["battery","min_soc_percent"],type:"number"},{key:"battery.max_soc_percent",label:"Max SoC (%)",path:["battery","max_soc_percent"],type:"number"},{key:"system.grid.max_power_kw",label:"HARD Grid max power (kW)",helper:"Absolute limit from your grid fuse/connection.",path:["system","grid","max_power_kw"],type:"number"},{key:"grid.import_limit_kw",label:"Soft import limit (kW)",helper:"Threshold for peak power penalties (effekttariff).",path:["grid","import_limit_kw"],type:"number"}]},{title:"Pricing & Timezone",description:"Nordpool zone and local timezone for planner calculations.",fields:[{key:"nordpool.price_area",label:"Nordpool Price Area",helper:"e.g. SE4, NO1, DK2",path:["nordpool","price_area"],type:"text"},{key:"pricing.vat_percent",label:"VAT (%)",path:["pricing","vat_percent"],type:"number"},{key:"pricing.grid_transfer_fee_sek",label:"Grid transfer fee (SEK/kWh)",path:["pricing","grid_transfer_fee_sek"],type:"number"},{key:"pricing.energy_tax_sek",label:"Energy tax (SEK/kWh)",path:["pricing","energy_tax_sek"],type:"number"},{key:"timezone",label:"Timezone",helper:"e.g. Europe/Stockholm",path:["timezone"],type:"text"}]},{title:"Notifications",description:"Configure automated notifications via Home Assistant.",fields:[{key:"executor.notifications.service",label:"HA Notify Service",helper:"e.g. notify.mobile_app_iphone",path:["executor","notifications","service"],type:"service"},{key:"executor.notifications.on_charge_start",label:"On charge start",path:["executor","notifications","on_charge_start"],type:"boolean"},{key:"executor.notifications.on_charge_stop",label:"On charge stop",path:["executor","notifications","on_charge_stop"],type:"boolean"},{key:"executor.notifications.on_discharge_start",label:"On discharge start",path:["executor","notifications","on_discharge_start"],type:"boolean"},{key:"executor.notifications.on_discharge_stop",label:"On discharge stop",path:["executor","notifications","on_discharge_stop"],type:"boolean"},{key:"executor.notifications.on_water_heating_start",label:"On water heating start",path:["executor","notifications","on_water_heat_start"],type:"boolean"},{key:"executor.notifications.on_water_heating_stop",label:"On water heating stop",path:["executor","notifications","on_water_heat_stop"],type:"boolean"},{key:"executor.notifications.on_soc_target_change",label:"On SoC target change",path:["executor","notifications","on_soc_target_change"],type:"boolean"},{key:"executor.notifications.on_override_activated",label:"On override activated",path:["executor","notifications","on_override_activated"],type:"boolean"},{key:"executor.notifications.on_error",label:"On error",path:["executor","notifications","on_error"],type:"boolean"}]},{title:" Home Assistant Connection ",isHA:!0,description:"Connection parameters for your Home Assistant instance.",fields:[{key:"home_assistant.url",label:"HA URL",helper:"e.g. http://homeassistant.local:8123",path:["home_assistant","url"],type:"text"},{key:"home_assistant.token",label:"Long-Lived Access Token",path:["home_assistant","token"],type:"text"}]},{title:"Required HA Entities",isHA:!0,description:"Core sensors and switches required for battery control.",fields:[{key:"input_sensors.battery_soc",label:"Battery SoC (%)",path:["input_sensors","battery_soc"],type:"entity"},{key:"input_sensors.pv_power",label:"PV Power (W/kW)",path:["input_sensors","pv_power"],type:"entity"},{key:"input_sensors.load_power",label:"Load Power (W/kW)",path:["input_sensors","load_power"],type:"entity"},{key:"executor.inverter.work_mode_entity",label:"Work Mode Selector",path:["executor","inverter","work_mode_entity"],type:"entity"},{key:"executor.inverter.grid_charging_entity",label:"Grid Charging Switch",path:["executor","inverter","grid_charging_entity"],type:"entity"},{key:"executor.inverter.max_charging_current_entity",label:"Max Charge Current",path:["executor","inverter","max_charging_current_entity"],type:"entity"},{key:"executor.inverter.max_discharging_current_entity",label:"Max Discharge Current",path:["executor","inverter","max_discharging_current_entity"],type:"entity"}]},{title:"Optional HA Entities",isHA:!0,description:"Optional sensors for better forecasting and dashboard metrics.",fields:[{key:"executor.automation_toggle_entity",label:"Automation Toggle",path:["executor","automation_toggle_entity"],type:"entity"},{key:"executor.manual_override_entity",label:"Manual Override Toggle",path:["executor","manual_override_entity"],type:"entity"},{key:"executor.soc_target_entity",label:"Target SoC Feedback",path:["executor","soc_target_entity"],type:"entity"},{key:"executor.water_heater.target_entity",label:"Water Heater Setpoint",path:["executor","water_heater","target_entity"],type:"entity"},{key:"input_sensors.vacation_mode",label:"Vacation Mode Toggle",path:["input_sensors","vacation_mode"],type:"entity"},{key:"input_sensors.alarm_state",label:"Alarm Control Panel",path:["input_sensors","alarm_state"],type:"entity"},{key:"input_sensors.water_heater_consumption",label:"Water Heater Daily Energy",path:["input_sensors","water_heater_consumption"],type:"entity"},{key:"input_sensors.today_net_cost",label:"Today's Net Cost",path:["input_sensors","today_net_cost"],type:"entity"},{key:"input_sensors.total_battery_charge",label:"Total Battery Charge (kWh)",path:["input_sensors","total_battery_charge"],type:"entity"},{key:"input_sensors.total_battery_discharge",label:"Total Battery Discharge (kWh)",path:["input_sensors","total_battery_discharge"],type:"entity"},{key:"input_sensors.total_grid_export",label:"Total Grid Export (kWh)",path:["input_sensors.total_grid_export"],type:"entity"},{key:"input_sensors.total_grid_import",label:"Total Grid Import (kWh)",path:["input_sensors.total_grid_import"],type:"entity"},{key:"input_sensors.total_load_consumption",label:"Total Load Consumption (kWh)",path:["input_sensors.total_load_consumption"],type:"entity"},{key:"input_sensors.total_pv_production",label:"Total PV Production (kWh)",path:["input_sensors.total_pv_production"],type:"entity"}]}],jD=[{title:"Charging Strategy",description:"Price smoothing, consolidation tolerances, and gap settings that govern charge windows.",fields:[{key:"charging_strategy.price_smoothing_sek_kwh",label:"Price smoothing (SEK/kWh)",path:["charging_strategy","price_smoothing_sek_kwh"],type:"number"},{key:"charging_strategy.block_consolidation_tolerance_sek",label:"Consolidation tolerance (SEK)",path:["charging_strategy","block_consolidation_tolerance_sek"],type:"number"},{key:"charging_strategy.consolidation_max_gap_slots",label:"Max gap slots",path:["charging_strategy","consolidation_max_gap_slots"],type:"number"},{key:"charging_strategy.charge_threshold_percentile",label:"Charge threshold (percentile)",path:["charging_strategy","charge_threshold_percentile"],type:"number"},{key:"charging_strategy.cheap_price_tolerance_sek",label:"Cheap price tolerance (SEK)",path:["charging_strategy","cheap_price_tolerance_sek"],type:"number"}]},{title:"Arbitrage & Export",description:"Export thresholds, peak-only export, and future guard buffers.",fields:[{key:"arbitrage.export_percentile_threshold",label:"Export percentile threshold",path:["arbitrage","export_percentile_threshold"],type:"number"},{key:"arbitrage.enable_peak_only_export",label:"Enable peak-only export",path:["arbitrage","enable_peak_only_export"],type:"boolean",helper:"Override to only export when we hit the percentile threshold."},{key:"arbitrage.export_future_price_guard",label:"Future price guard",path:["arbitrage","export_future_price_guard"],type:"boolean"},{key:"arbitrage.future_price_guard_buffer_sek",label:"Future guard buffer (SEK)",path:["arbitrage","future_price_guard_buffer_sek"],type:"number"},{key:"arbitrage.export_profit_margin_sek",label:"Export profit margin (SEK)",path:["arbitrage","export_profit_margin_sek"],type:"number"}]},{title:"Water Heating",description:"Quota, deferral, and sizing controls for the water heater scheduler.",fields:[{key:"water_heating.power_kw",label:"Water heater power (kW)",path:["water_heating","power_kw"],type:"number"},{key:"water_heating.defer_up_to_hours",label:"Max defer hours",path:["water_heating","defer_up_to_hours"],type:"number"},{key:"water_heating.max_blocks_per_day",label:"Max blocks per day",path:["water_heating","max_blocks_per_day"],type:"number"},{key:"water_heating.min_kwh_per_day",label:"Min kWh/day",path:["water_heating","min_kwh_per_day"],type:"number"},{key:"water_heating.min_spacing_hours",label:"Min spacing (hours)",path:["water_heating","min_spacing_hours"],type:"number",helper:"Minimum gap between heating sessions to avoid efficiency loss."},{key:"water_heating.spacing_penalty_sek",label:"Spacing penalty (SEK)",path:["water_heating","spacing_penalty_sek"],type:"number",helper:"Penalty applied when heating sessions are too close."},{key:"water_heating.schedule_future_only",label:"Schedule future only",path:["water_heating","schedule_future_only"],type:"boolean"}]},{title:"Learning Parameter Limits",description:"Limits that keep learning adjustments conservative.",fields:[{key:"learning.min_sample_threshold",label:"Min sample threshold",path:["learning","min_sample_threshold"],type:"number"},{key:"learning.min_improvement_threshold",label:"Min improvement (%)",path:["learning","min_improvement_threshold"],type:"number"},{key:"learning.max_daily_param_change.battery_use_margin_sek",label:"Battery margin change (SEK)",path:["learning","max_daily_param_change","battery_use_margin_sek"],type:"number"},{key:"learning.max_daily_param_change.export_profit_margin_sek",label:"Export margin change (SEK)",path:["learning","max_daily_param_change","export_profit_margin_sek"],type:"number"},{key:"learning.max_daily_param_change.future_price_guard_buffer_sek",label:"Future guard buffer change (SEK)",path:["learning","max_daily_param_change","future_price_guard_buffer_sek"],type:"number"},{key:"learning.max_daily_param_change.load_safety_margin_percent",label:"Load safety change (%)",path:["learning","max_daily_param_change","load_safety_margin_percent"],type:"number"},{key:"learning.max_daily_param_change.pv_confidence_percent",label:"PV confidence change (%)",path:["learning","max_daily_param_change","pv_confidence_percent"],type:"number"},{key:"learning.max_daily_param_change.s_index_base_factor",label:"S-index base change",path:["learning","max_daily_param_change","s_index_base_factor"],type:"number"},{key:"learning.max_daily_param_change.s_index_pv_deficit_weight",label:"S-index PV weight change",path:["learning","max_daily_param_change","s_index_pv_deficit_weight"],type:"number"},{key:"learning.max_daily_param_change.s_index_temp_weight",label:"S-index temp weight change",path:["learning","max_daily_param_change","s_index_temp_weight"],type:"number"}]},{title:"S-Index Safety",description:"Seasonal index parameters for reserve calculations.",fields:[{key:"s_index.temp_cold_c",label:"Cold temp (C)",path:["s_index","temp_cold_c"],type:"number"},{key:"s_index.s_index_horizon_days",label:"S-Index Horizon (days)",path:["s_index","s_index_horizon_days"],type:"select",options:[{label:"1 Day",value:"1"},{label:"2 Days",value:"2"},{label:"3 Days",value:"3"},{label:"4 Days",value:"4"},{label:"5 Days",value:"5"},{label:"6 Days",value:"6"},{label:"7 Days",value:"7"}]}]}],V0=uv.flatMap(t=>t.fields),kW=V0.reduce((t,e)=>(t[e.key]=e,t),{}),F0=jD.flatMap(t=>t.fields),NW=F0.reduce((t,e)=>(t[e.key]=e,t),{}),TD=[{title:"Dashboard Defaults",description:"Overlay defaults and refresh cadence for the planner dashboard.",fields:[{key:"dashboard.auto_refresh_enabled",label:"Auto refresh",helper:"Enable automatic refresh of the dashboard schedule.",path:["dashboard","auto_refresh_enabled"],type:"boolean"}]},{title:"AI Advisor",description:"Control the Smart Advisor LLM settings.",fields:[{key:"advisor.enable_llm",label:"Enable LLM advice",path:["advisor","enable_llm"],type:"boolean"},{key:"advisor.auto_fetch",label:"Auto-fetch advice on dashboard load",path:["advisor","auto_fetch"],type:"boolean"},{key:"advisor.personality",label:"Advisor personality",path:["advisor","personality"],type:"select",options:[{label:"Concise (Money focus)",value:"concise"},{label:"Friendly (Emoji style)",value:"friendly"},{label:"Technical (Data heavy)",value:"technical"}]}]}],kD=[{title:"Experimental Features",description:"Toggle advanced and experimental modes.",fields:[{key:"automation.external_executor_mode",label:"External Executor Mode",helper:"When enabled, Darkstar expects an external system to execute the plan.",path:["automation","external_executor_mode"],type:"boolean"},{key:"automation.write_to_mariadb",label:"Log to MariaDB",helper:"Requires MariaDB credentials in secrets.yaml",path:["automation","write_to_mariadb"],type:"boolean"}]},{title:"Danger Zone",description:"Sensitive actions. Proceed with caution.",fields:[]}],H0=TD.flatMap(t=>t.fields),MW=H0.reduce((t,e)=>(t[e.key]=e,t),{}),U0=kD.flatMap(t=>t.fields),DW=U0.reduce((t,e)=>(t[e.key]=e,t),{});function Ua(t,e){return e.reduce((n,s)=>n&&typeof n=="object"?n[s]:void 0,t)}function Wp(t,e,n){let s=t;e.forEach((a,o)=>{if(o===e.length-1){s[a]=n;return}(!s[a]||typeof s[a]!="object")&&(s[a]={}),s=s[a]})}function bf(t){const e={};return V0.forEach(n=>{const s=t?Ua(t,n.path):void 0;n.type==="boolean"?e[n.key]=s===!0?"true":"false":e[n.key]=s!=null?String(s):""}),e}function _f(t){const e={};return F0.forEach(n=>{const s=t?Ua(t,n.path):void 0;n.type==="boolean"?e[n.key]=s===!0?"true":"false":n.type==="array"&&Array.isArray(s)?e[n.key]=s.join(", "):e[n.key]=s!=null?String(s):""}),e}function CW(t,e){const n=e.trim();if(t.type==="number"){if(n==="")return null;const s=Number(n);return Number.isNaN(s)?void 0:s}return t.type==="boolean"?n==="true":n}function EW(t,e){const n=e.trim();if(t.type==="number"){if(n==="")return null;const s=Number(n);return Number.isNaN(s)?void 0:s}return t.type==="boolean"?n==="true":t.type==="array"?n?n.split(",").map(o=>o.trim()).filter(Boolean).map(o=>Number(o)).filter(o=>!Number.isNaN(o)):[]:n}function AW(t,e){const n={};return V0.forEach(s=>{const a=e[s.key]??"",o=CW(s,a);if(o===void 0||s.type==="number"&&o===null)return;const l=Ua(t,s.path);o!==l&&Wp(n,s.path,o)}),n}function OW(t,e){const n={};return F0.forEach(s=>{const a=e[s.key]??"",o=EW(s,a);if(o===void 0)return;const l=Ua(t,s.path);(()=>{if(s.type==="array"){if(!Array.isArray(o)||!Array.isArray(l)||o.length!==l.length)return!1;for(let h=0;h<o.length;h+=1)if(o[h]!==l[h])return!1;return!0}return o===l})()||Wp(n,s.path,o)}),n}function ry(t){const e={};return H0.forEach(n=>{const s=t?Ua(t,n.path):void 0;n.type==="boolean"?e[n.key]=s===!0?"true":"false":e[n.key]=s!=null?String(s):""}),t?.dashboard?.overlay_defaults!==void 0&&(e["dashboard.overlay_defaults"]=String(t.dashboard.overlay_defaults)),e}function oy(t){const e={};return U0.forEach(n=>{const s=t?Ua(t,n.path):void 0;n.type==="boolean"?e[n.key]=s===!0?"true":"false":e[n.key]=s!=null?String(s):""}),e}function RW(t,e){const n=e.trim();return t.type==="boolean"?n===""?null:n==="true"?!0:n==="false"?!1:void 0:n}function PW(t,e){const n=e.trim();return t.type==="boolean"?n===""?null:n==="true"?!0:n==="false"?!1:void 0:n}function LW(t,e){const n={};H0.forEach(a=>{const o=e[a.key]??"",l=RW(a,o);if(l===void 0||a.type==="boolean"&&l===null)return;const d=Ua(t,a.path);l!==d&&Wp(n,a.path,l)});const s=e["dashboard.overlay_defaults"];if(s!==void 0){const a=Ua(t,["dashboard","overlay_defaults"]);s!==a&&(n.dashboard||(n.dashboard={}),n.dashboard.overlay_defaults=s)}return n}function zW(t,e){const n={};return U0.forEach(s=>{const a=e[s.key]??"",o=PW(s,a);if(o===void 0||s.type==="boolean"&&o===null)return;const l=Ua(t,s.path);o!==l&&Wp(n,s.path,o)}),n}function BW(){const[t,e]=A.useState("system"),[n,s]=A.useState(null),[a,o]=A.useState(()=>bf(null)),[l,d]=A.useState(()=>_f(null)),[h,p]=A.useState(()=>ry(null)),[g,y]=A.useState(()=>oy(null)),[_,j]=A.useState({}),[k,N]=A.useState({}),[D,R]=A.useState({}),[E,B]=A.useState({}),[U,$]=A.useState(!0),[I,O]=A.useState(null),[q,J]=A.useState(!1),[oe,ie]=A.useState(!1),[me,le]=A.useState(!1),[Z,re]=A.useState(!1),[H,X]=A.useState(null),[ne,ae]=A.useState(null),[xe,V]=A.useState(null),[ee,pe]=A.useState(null),[F,de]=A.useState([]),[Se,Ie]=A.useState(null),[tt,Te]=A.useState(null),[ft,xt]=A.useState(!0),[_t,Bt]=A.useState(null),[Dt,st]=A.useState(!1),[ln,Yn]=A.useState(null),[Sn,cs]=A.useState(!1),[Wn,ze]=A.useState(!1),[wt,fn]=A.useState(null),[Ut,Cs]=A.useState([]),[lt,Vn]=A.useState(!1),[gn,ui]=A.useState(null),Is=async()=>{Vn(!0);try{const fe=await Me.haEntities();Cs(fe.entities||[])}catch(fe){console.error("Failed to load HA entities",fe)}finally{Vn(!1)}},Ci=async()=>{ui("Testing...");try{const fe=a["home_assistant.url"],ye=a["home_assistant.token"],Ce=await Me.haTest({url:fe,token:ye});Ce.success?(ui("Success: Connected!"),Is()):ui(`Error: ${Ce.message}`)}catch(fe){ui(`Error: ${fe.message}`)}},Fn=async()=>{$(!0),O(null);try{const fe=await Me.config();s(fe),o(bf(fe)),d(_f(fe)),p(ry(fe)),y(oy(fe));const ye=fe?.ui?.theme_accent_index;Te(typeof ye=="number"?ye:null)}catch(fe){O(fe?.message||"Failed to load configuration")}finally{$(!1)}},ms=async()=>{xt(!0),Bt(null);try{const fe=await Me.theme();de(fe.themes),Ie(fe.current??null),Te(fe.accent_index??null)}catch(fe){Bt(fe?.message||"Failed to load themes")}finally{xt(!1)}};A.useEffect(()=>{Fn(),ms(),Is()},[]);const It=(fe,ye)=>{const Ce=kW[fe];if(Ce&&(o(Oe=>({...Oe,[fe]:ye})),X(null),Ce.type==="number")){const Oe=ye.trim();j(je=>{const Le={...je};Oe===""?Le[fe]="Required":Number.isNaN(Number(Oe))?Le[fe]="Must be a number":fe.includes("percent")&&(Number(Oe)<0||Number(Oe)>100)?Le[fe]="Must be between 0 and 100":fe.includes("power_kw")&&Number(Oe)<0?Le[fe]="Must be positive":fe.includes("capacity_kwh")&&Number(Oe)<=0?Le[fe]="Must be greater than 0":fe==="nordpool.resolution_minutes"&&![15,30,60].includes(Number(Oe))?Le[fe]="Must be 15, 30, or 60":delete Le[fe];const it="battery.min_soc_percent",We="battery.max_soc_percent",Re=fe===it?Oe:(a[it]??"").trim(),Yt=fe===We?Oe:(a[We]??"").trim(),ys=Number(Re),He=Number(Yt);return!Number.isNaN(ys)&&!Number.isNaN(He)&&(ys>=He?(Le[it]="Min SoC must be less than max SoC",Le[We]="Max SoC must be greater than min SoC"):(Le[it]&&Le[it].startsWith("Min SoC")&&delete Le[it],Le[We]&&Le[We].startsWith("Max SoC")&&delete Le[We])),Le})}},xn=(fe,ye)=>{const Ce=NW[fe];if(Ce&&(d(Oe=>({...Oe,[fe]:ye})),ae(null),Ce.type==="number")){const Oe=ye.trim();N(je=>{const Le={...je};return Oe===""?Le[fe]="Required":Number.isNaN(Number(Oe))?Le[fe]="Must be a number":fe.includes("percent")&&(Number(Oe)<0||Number(Oe)>100)?Le[fe]="Must be between 0 and 100":fe.includes("sek")&&Number(Oe)<0||fe.includes("power_kw")&&Number(Oe)<0?Le[fe]="Must be positive":fe.includes("kwh")&&Number(Oe)<=0?Le[fe]="Must be greater than 0":delete Le[fe],Le})}},Qt=(fe,ye)=>{const Ce=MW[fe];if(!(!Ce&&fe!=="dashboard.overlay_defaults")&&(p(Oe=>({...Oe,[fe]:ye})),V(null),fe!=="dashboard.overlay_defaults"&&Ce.type==="boolean")){const Oe=ye.trim();R(je=>{const Le={...je};return Oe===""?Le[fe]="Required":Oe!=="true"&&Oe!=="false"?Le[fe]="Invalid value":delete Le[fe],Le})}},us=(fe,ye)=>{const Ce=DW[fe];if(Ce&&(y(Oe=>({...Oe,[fe]:ye})),pe(null),Ce.type==="boolean")){const Oe=ye.trim();B(je=>{const Le={...je};return Oe===""?Le[fe]="Required":Oe!=="true"&&Oe!=="false"?Le[fe]="Invalid value":delete Le[fe],Le})}},di=Object.values(_).filter(Boolean).length>0,Es=Object.values(k).filter(Boolean).length>0;Object.values(D).filter(Boolean).length;const As=async()=>{if(!n)return;if(di){X("Fix validation errors before saving.");return}const fe=AW(n,a);if(!Object.keys(fe).length){X("No changes detected.");return}J(!0),X(null);try{const ye=await Me.configSave(fe);if(ye.status!=="success"){const Oe={};ye.errors?.forEach(je=>{je.field&&(Oe[je.field]=je.message||"Invalid value")}),Object.keys(Oe).length?(j(je=>({...je,...Oe})),X("Fix highlighted fields before saving.")):X(ye.errors&&ye.errors[0]?.message?ye.errors[0].message:"Save failed.");return}const Ce=await Me.config();s(Ce),o(bf(Ce)),d(_f(Ce)),j({}),X("System settings saved.")}catch(ye){X(ye?.message?`Failed to save: ${ye.message}`:"Save failed.")}finally{J(!1)}},ds=async()=>{if(!n)return;if(Es){ae("Fix validation errors before saving.");return}const fe=OW(n,l);if(!Object.keys(fe).length){ae("No changes detected.");return}ie(!0),ae(null);try{const ye=await Me.configSave(fe);if(ye.status!=="success"){const Oe={};ye.errors?.forEach(je=>{je.field&&(Oe[je.field]=je.message||"Invalid value")}),Object.keys(Oe).length?(N(je=>({...je,...Oe})),ae("Fix highlighted fields before saving.")):ae(ye.errors&&ye.errors[0]?.message?ye.errors[0].message:"Save failed.");return}const Ce=await Me.config();s(Ce),o(bf(Ce)),d(_f(Ce)),N({}),ae("Parameters saved.")}catch(ye){ae(ye?.message?`Failed to save: ${ye.message}`:"Save failed.")}finally{ie(!1)}},Ys=async()=>{if(!n)return;if(Object.values(D).filter(Boolean).length>0){V("Fix validation errors before saving.");return}const ye=LW(n,h);if(!Object.keys(ye).length){V("No changes detected.");return}le(!0),V(null);try{const Ce=await Me.configSave(ye);if(Ce.status!=="success"){const je={};Ce.errors?.forEach(Le=>{Le.field&&(je[Le.field]=Le.message||"Invalid value")}),Object.keys(je).length?(R(Le=>({...Le,...je})),V("Fix highlighted fields before saving.")):V(Ce.errors&&Ce.errors[0]?.message?Ce.errors[0].message:"Save failed.");return}const Oe=await Me.config();s(Oe),p(ry(Oe)),R({}),V("UI preferences saved.")}catch(Ce){V(Ce instanceof Error?`Failed to save: ${Ce.message}`:"Save failed.")}finally{le(!1)}},gs=async()=>{if(!n)return;if(Object.values(E).filter(Boolean).length>0){pe("Fix validation errors before saving.");return}const ye=zW(n,g);if(!Object.keys(ye).length){pe("No changes detected.");return}re(!0),pe(null);try{const Ce=await Me.configSave(ye);if(Ce.status!=="success"){const je={};Ce.errors?.forEach(Le=>{Le.field&&(je[Le.field]=Le.message||"Invalid value")}),Object.keys(je).length?(B(Le=>({...Le,...je})),pe("Fix highlighted fields before saving.")):pe(Ce.errors&&Ce.errors[0]?.message?Ce.errors[0].message:"Save failed.");return}const Oe=await Me.config();s(Oe),y(oy(Oe)),B({}),pe("Advanced settings saved.")}catch(Ce){pe(Ce instanceof Error?`Failed to save: ${Ce.message}`:"Save failed.")}finally{re(!1)}},Ai=async()=>{if(!Se){Yn("Select a theme before applying.");return}st(!0),Yn(null);try{await Me.setTheme({theme:Se,accent_index:tt??void 0}),await ms(),await Fn(),Yn("Theme applied successfully.")}catch(fe){Yn(fe?.message?`Failed to apply theme: ${fe.message}`:"Failed to apply theme.")}finally{st(!1)}},Oi=fe=>{const ye=fe.trim();if(ye===""){Te(null);return}const Ce=Number(ye);Number.isNaN(Ce)||Te(Math.max(0,Math.min(15,Ce)))},hi=async()=>{cs(!0),fn(null);try{await Me.configReset(),j({}),N({}),R({}),B({}),await Fn(),await ms(),fn("All settings have been reset to default values."),ze(!1)}catch(fe){fn(fe?.message?`Reset failed: ${fe.message}`:"Reset failed.")}finally{cs(!1)}},xs=()=>U?u.jsx(Xe,{className:"p-6 text-sm text-muted",children:"Loading system configuration"}):I?u.jsx(Xe,{className:"p-6 text-sm text-red-400",children:I}):u.jsxs("div",{className:"space-y-4",children:[uv.map((fe,ye)=>{const Ce=ye>0?uv[ye-1]:null,Oe=fe.isHA&&Ce&&!Ce.isHA;return u.jsxs("div",{children:[Oe&&u.jsxs("div",{className:"py-8 flex items-center gap-4",children:[u.jsx("div",{className:"h-px flex-1 bg-line/30"}),u.jsx("span",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-muted whitespace-nowrap",children:"Home Assistant Integration"}),u.jsx("div",{className:"h-px flex-1 bg-line/30"})]}),u.jsxs(Xe,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"System"})]}),u.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:fe.fields.map(je=>{const Le=je.key==="system.solar_array.azimuth",it=je.key==="system.solar_array.tilt";if(Le){const We=a[je.key],Re=We&&We.trim()!==""?Number(We):null;return u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(bW,{value:typeof Re=="number"&&!Number.isNaN(Re)?Re:null,onChange:Yt=>It(je.key,String(Math.round(Yt)))}),u.jsx("input",{type:"number",inputMode:"decimal",value:a[je.key]??"",onChange:Yt=>It(je.key,Yt.target.value),className:"mt-2 w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper}),_[je.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:_[je.key]})]},je.key)}if(it){const We=a[je.key],Re=We&&We.trim()!==""?Number(We):null;return u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(_W,{value:typeof Re=="number"&&!Number.isNaN(Re)?Re:null,onChange:Yt=>It(je.key,String(Math.round(Yt)))}),u.jsx("input",{type:"number",inputMode:"decimal",value:a[je.key]??"",onChange:Yt=>It(je.key,Yt.target.value),className:"mt-2 w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper}),_[je.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:_[je.key]})]},je.key)}return je.type==="entity"?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(wW,{entities:Ut,value:a[je.key]??"",onChange:We=>It(je.key,We),loading:lt,placeholder:"Select entity..."}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper})]},je.key):je.type==="service"?u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx(SW,{value:a[je.key]??"",onChange:We=>It(je.key,We),placeholder:"Select notification service..."}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper})]},je.key):je.type==="boolean"?u.jsxs("div",{className:"flex flex-col justify-center",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm h-full",children:[u.jsx("input",{type:"checkbox",checked:a[je.key]==="true",onChange:We=>It(je.key,We.target.checked?"true":"false"),className:"h-4 w-4 rounded border border-line/60 text-accent focus:ring-0"}),u.jsx("span",{className:"font-semibold",children:je.label})]}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted ml-6 mt-1",children:je.helper})]},je.key):u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[je.label,u.jsx(Cr,{text:Er[je.key]||je.helper})]}),u.jsx("input",{type:je.type==="number"?"number":"text",inputMode:je.type==="number"?"decimal":void 0,value:a[je.key]??"",onChange:We=>It(je.key,We.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),je.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:je.helper}),_[je.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:_[je.key]})]},je.key)})}),fe.title==="Home Assistant Connection"&&u.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[u.jsx("button",{type:"button",onClick:Ci,className:"rounded-xl px-4 py-2 text-[11px] font-semibold bg-neutral hover:bg-neutral/80 text-white transition",children:gn&&gn.startsWith("Testing")?"Testing...":"Test Connection"}),gn&&u.jsx("span",{className:`text-xs ${gn.startsWith("Success")?"text-green-400":"text-red-400"}`,children:gn})]})]})]},fe.title)}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:q||U,onClick:As,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:q?"Saving":"Save System Settings"}),H&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${H.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:H})]})]}),Ri=()=>U?u.jsx(Xe,{className:"p-6 text-sm text-muted",children:"Loading parameter configuration"}):I?u.jsx(Xe,{className:"p-6 text-sm text-red-400",children:I}):u.jsxs("div",{className:"space-y-4",children:[jD.map(fe=>u.jsxs(Xe,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Parameters"})]}),u.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:fe.fields.map(ye=>u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"block text-sm font-medium mb-1.5",children:[ye.label,u.jsx(Cr,{text:Er[ye.key]||ye.helper})]}),ye.type==="select"?u.jsxs("select",{value:l[ye.key]??"",onChange:Ce=>xn(ye.key,Ce.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none",children:[u.jsx("option",{value:"",children:"Select"}),ye.options?.map(Ce=>u.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))]}):ye.type==="boolean"?u.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[u.jsx("input",{type:"checkbox",checked:l[ye.key]==="true",onChange:Ce=>xn(ye.key,Ce.target.checked?"true":"false"),className:"h-4 w-4 rounded border border-line/60 text-accent focus:ring-0"}),u.jsx("span",{className:"text-sm font-semibold",children:"Enabled"})]}):u.jsx("input",{type:ye.type==="number"?"number":"text",inputMode:ye.type==="number"?"decimal":void 0,value:l[ye.key]??"",onChange:Ce=>xn(ye.key,Ce.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"}),ye.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:ye.helper}),k[ye.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:k[ye.key]})]},ye.key))})]},fe.title)),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:oe||U,onClick:ds,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:oe?"Saving & Re-planning":"Save & Re-plan"}),ne&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${ne.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:ne})]})]}),Pe=()=>U?u.jsx(Xe,{className:"p-6 text-sm text-muted",children:"Loading UI configuration"}):I?u.jsx(Xe,{className:"p-6 text-sm text-red-400",children:I}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs(Xe,{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:"Theme & Appearance"}),u.jsx("p",{className:"text-xs text-muted mt-1",children:"Select a theme for the app and adjust the accent color."})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"UI"})]}),ft?u.jsx("p",{className:"text-sm text-muted",children:"Loading themes"}):_t?u.jsx("p",{className:"text-sm text-red-400",children:_t}):u.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:F.map(fe=>{const ye=Se===fe.name;return u.jsxs("button",{type:"button",onClick:()=>Ie(fe.name),className:`group flex flex-col gap-2 rounded-xl border p-3 text-left transition ${ye?"border-accent shadow-sm":"border-line/50 hover:border-white/40"}`,children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.name}),u.jsx("div",{className:"flex h-6 overflow-hidden rounded-sm border border-line/40",children:fe.palette.slice(0,4).map(Ce=>u.jsx("span",{className:"flex-1",style:{backgroundColor:Ce}},`${fe.name}-${Ce}`))}),u.jsx("div",{className:"text-[10px] uppercase text-muted tracking-wide",children:ye?"Selected":"Select"})]},fe.name)})}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:"Accent index"}),u.jsx("input",{type:"number",min:0,max:15,value:tt??"",onChange:fe=>Oi(fe.target.value),className:"h-10 w-20 rounded-lg border border-line/50 bg-surface2 px-3 text-sm focus:border-accent focus:outline-none"}),u.jsx("button",{disabled:Dt||ft,onClick:Ai,className:"rounded-pill bg-accent px-4 py-2 text-sm font-semibold text-[#100f0e] shadow-sm transition hover:bg-accent2 disabled:opacity-50",children:Dt?"Applying":"Apply theme"}),ln&&u.jsx("p",{className:`text-sm ${ln.startsWith("Failed")?"text-red-400":"text-muted"}`,children:ln})]})]}),TD.map(fe=>u.jsxs(Xe,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"UI"})]}),u.jsxs("div",{className:"space-y-4",children:[fe.title==="Dashboard Defaults"&&u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:"Overlay defaults"}),u.jsx("p",{className:"text-[11px] text-muted mb-3",children:"Select which overlays are enabled by default on the dashboard."}),u.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:(()=>{const ye=h["dashboard.overlay_defaults"]||"",Ce=[...new Set(ye.split(",").map(Le=>Le.trim().toLowerCase()))],Oe=!Ce.includes("load_off"),je=(Le,it)=>{const We=[...new Set(ye.split(",").map(Yt=>Yt.trim().toLowerCase()))];let Re;it?Re=We.filter(Yt=>Yt!==Le.toLowerCase()):Re=[...We,Le.toLowerCase()],Qt("dashboard.overlay_defaults",Re.join(", "))};return u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>je("load_off",!Oe),className:`rounded-pill px-3 py-1 border text-[11px] transition ${Oe?"bg-accent text-[#100f0e] border-accent":"border-line/60 text-muted hover:border-accent"}`,children:"Load"}),[["Charge","charge"],["Discharge","discharge"],["Export","export"],["Water","water"],["SoC Target","socTarget"],["SoC Projected","socProjected"]].map(([Le,it])=>{const We=Ce.includes(it.toLowerCase());return u.jsx("button",{type:"button",onClick:()=>{const Re=[...new Set(ye.split(",").map(ys=>ys.trim().toLowerCase()))];let Yt;We?Yt=Re.filter(ys=>ys!==it.toLowerCase()):Yt=[...Re,it.toLowerCase()],Qt("dashboard.overlay_defaults",Yt.join(", "))},className:`rounded-pill px-3 py-1 border text-[11px] transition ${We?"bg-accent text-[#100f0e] border-accent":"border-line/60 text-muted hover:border-accent"}`,children:Le},it)})]})})()})]})}),u.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:fe.fields.map(ye=>u.jsxs("div",{className:"space-y-1",children:[ye.type==="boolean"?u.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[u.jsx("input",{type:"checkbox",checked:h[ye.key]==="true",onChange:Ce=>Qt(ye.key,Ce.target.checked?"true":"false"),className:"h-4 w-4 rounded border border-line/60 text-accent focus:ring-0"}),u.jsx("span",{className:"text-sm font-semibold",children:ye.label})]}):ye.type==="select"?u.jsxs(u.Fragment,{children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[ye.label,u.jsx(Cr,{text:Er[ye.key]||ye.helper})]}),u.jsxs("select",{value:h[ye.key]??"",onChange:Ce=>Qt(ye.key,Ce.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none",children:[u.jsx("option",{value:"",children:"Select"}),ye.options?.map(Ce=>u.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("label",{className:"text-[10px] uppercase tracking-wide text-muted",children:[ye.label,u.jsx(Cr,{text:Er[ye.key]||ye.helper})]}),u.jsx("input",{type:"text",value:h[ye.key]??"",onChange:Ce=>Qt(ye.key,Ce.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-white focus:border-accent focus:outline-none"})]}),ye.helper&&u.jsx("p",{className:"text-[11px] text-muted",children:ye.helper}),D[ye.key]&&u.jsx("p",{className:"text-[11px] text-red-400",children:D[ye.key]})]},ye.key))})]})]},fe.title)),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:me||U,onClick:Ys,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:me?"Saving":"Save UI Preferences"}),xe&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${xe.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:xe})]})]}),gt=()=>U?u.jsx(Xe,{className:"p-6 text-sm text-muted",children:"Loading advanced configuration"}):I?u.jsx(Xe,{className:"p-6 text-sm text-red-400",children:I}):u.jsxs("div",{className:"space-y-4",children:[kD.filter(fe=>fe.title!=="Danger Zone").map(fe=>u.jsxs(Xe,{className:"p-6",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold",children:fe.title}),u.jsx("p",{className:"text-xs text-muted mt-1",children:fe.description})]}),u.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Advanced"})]}),u.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:fe.fields.map(ye=>u.jsxs("div",{className:"space-y-1",children:[ye.type==="boolean"&&u.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[u.jsx("input",{type:"checkbox",checked:g[ye.key]==="true",onChange:Ce=>us(ye.key,Ce.target.checked?"true":"false"),className:"h-4 w-4 rounded border border-line/60 text-accent focus:ring-0"}),u.jsx("span",{className:"text-sm font-semibold",children:ye.label})]}),ye.helper&&u.jsx("p",{className:"text-[11px] text-muted ml-6",children:ye.helper}),E[ye.key]&&u.jsx("p",{className:"text-[11px] text-red-400 ml-6",children:E[ye.key]})]},ye.key))})]},fe.title)),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsx("button",{disabled:Z||U,onClick:gs,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:Z?"Saving":"Save Advanced Settings"}),ee&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${ee.startsWith("Failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:ee})]}),u.jsx("div",{className:"py-8",children:u.jsx("div",{className:"h-px bg-line/20"})}),u.jsxs(Xe,{className:"border-red-500/30 bg-red-500/5 p-6",children:[u.jsx("div",{className:"flex items-center justify-between gap-4",children:u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-red-400",children:"Danger Zone"}),u.jsx("p",{className:"text-xs text-red-400/70 mt-1",children:"Irreversible actions that affect your entire system configuration."})]})}),u.jsx("div",{className:"mt-6 flex flex-wrap items-center gap-4",children:Wn?u.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-canvas p-4 border border-line",children:[u.jsx("span",{className:"text-xs font-semibold text-white",children:"Are you absolutely sure?"}),u.jsx("button",{type:"button",disabled:Sn,onClick:hi,className:"rounded-lg bg-red-500 px-3 py-1.5 text-xs font-bold text-white shadow-lg transition hover:bg-red-600 disabled:opacity-50",children:Sn?"Resetting...":"Yes, reset everything"}),u.jsx("button",{type:"button",disabled:Sn,onClick:()=>ze(!1),className:"rounded-lg bg-surface px-3 py-1.5 text-xs font-semibold text-muted transition hover:text-white",children:"Cancel"})]}):u.jsx("button",{type:"button",onClick:()=>ze(!0),className:"rounded-lg bg-[#EE3B47] px-4 py-2 text-xs font-bold uppercase tracking-wider text-white transition hover:bg-[#D6323D]",children:"Reset all settings to defaults"})})]})]});return u.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12 space-y-6",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-semibold",children:"Settings"}),u.jsx("p",{className:"text-sm text-muted",children:"System, parameters, and UI preferences collected into one modern surface."})]})}),u.jsx("div",{className:"flex flex-wrap gap-2",children:TW.map(fe=>{const ye=t===fe.id;return u.jsx("button",{onClick:()=>e(fe.id),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${ye?"bg-accent text-[#0F1216] shadow-sm":"bg-surface border border-line/50 text-muted"}`,children:fe.label},fe.id)})}),wt&&u.jsx("div",{className:`rounded-lg p-3 text-sm ${wt.startsWith("Reset failed")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-green-500/10 border border-green-500/30 text-green-400"}`,children:wt}),t==="system"?xs():t==="parameters"?Ri():t==="ui"?Pe():gt()]})}const ND="label";function _T(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function VW(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function MD(t,e){t.labels=e}function DD(t,e,n=ND){const s=[];t.datasets=e.map(a=>{const o=t.datasets.find(l=>l[n]===a[n]);return!o||!a.data||s.includes(o)?{...a}:(s.push(o),Object.assign(o,a),o)})}function FW(t,e=ND){const n={labels:[],datasets:[]};return MD(n,t.labels),DD(n,t.datasets,e),n}function HW(t,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:o,type:l,data:d,options:h,plugins:p=[],fallbackContent:g,updateMode:y,..._}=t,j=A.useRef(null),k=A.useRef(null),N=()=>{j.current&&(k.current=new oi(j.current,{type:l,data:FW(d,o),options:h&&{...h},plugins:p}),_T(e,k.current))},D=()=>{_T(e,null),k.current&&(k.current.destroy(),k.current=null)};return A.useEffect(()=>{!a&&k.current&&h&&VW(k.current,h)},[a,h]),A.useEffect(()=>{!a&&k.current&&MD(k.current.config.data,d.labels)},[a,d.labels]),A.useEffect(()=>{!a&&k.current&&d.datasets&&DD(k.current.config.data,d.datasets,o)},[a,d.datasets]),A.useEffect(()=>{k.current&&(a?(D(),setTimeout(N)):k.current.update(y))},[a,h,d.labels,d.datasets,y]),A.useEffect(()=>{k.current&&(D(),setTimeout(N))},[l]),A.useEffect(()=>(N(),()=>D()),[]),u.jsx("canvas",{ref:j,role:"img",height:n,width:s,..._,children:g})}const UW=A.forwardRef(HW);function I0(t,e){return oi.register(e),A.forwardRef((n,s)=>u.jsx(UW,{...n,ref:s,type:t}))}const Y0=I0("line",Dk),IW=I0("bar",Mk),YW=I0("radar",Ek);oi.register(vd,bd,ic,Wa,Dp,rc,ac,Mp);function dv({title:t,slots:e,color:n}){const a={labels:e.map(l=>new Date(l.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),datasets:[{label:"Actual",data:e.map(l=>l.actual??null),borderColor:"#94a3b8",backgroundColor:"#94a3b8",borderWidth:2,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1},{label:"p90",data:e.map(l=>l.p90),borderColor:`${n}40`,borderWidth:1,backgroundColor:`${n}33`,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:"+1"},{label:"p10 (Risk)",data:e.map(l=>l.p10),borderColor:`${n}80`,borderWidth:1.5,borderDash:[4,4],backgroundColor:"transparent",pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1},{label:"p50 (Forecast)",data:e.map(l=>l.p50),borderColor:n,backgroundColor:n,borderWidth:2,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1}]},o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#cbd5e1",font:{size:11},boxWidth:8,usePointStyle:!0}},title:{display:!!t,text:t,color:"#e2e8f0",font:{size:13,weight:"normal"},align:"start",padding:{bottom:10}},tooltip:{mode:"index",intersect:!1,backgroundColor:"#1e293b",titleColor:"#e2e8f0",bodyColor:"#cbd5e1",borderColor:"#334155",borderWidth:1}},scales:{x:{grid:{color:"#334155",drawBorder:!1},ticks:{color:"#94a3b8",maxRotation:0,autoSkip:!0,maxTicksLimit:8}},y:{grid:{color:"#334155",drawBorder:!1},ticks:{color:"#94a3b8"},min:0}},interaction:{mode:"nearest",axis:"x",intersect:!1},layout:{padding:{bottom:0,left:10,right:10}}};return u.jsx("div",{className:"w-full h-[250px]",children:u.jsx(Y0,{data:a,options:o})})}function WW(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState("baseline"),[l,d]=A.useState(!1),[h,p]=A.useState(null),[g,y]=A.useState(!1),[_,j]=A.useState(!1),[k,N]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const Z=await Me.forecastEval();e(Z)}catch(Z){console.error("Failed to load forecast eval:",Z)}})()},[]),A.useEffect(()=>{(async()=>{d(!0);try{const Z=await Me.forecastDay();s(Z)}catch(Z){console.error("Failed to load forecast day:",Z)}finally{d(!1)}})()},[]),A.useEffect(()=>{(async()=>{try{const Z=await Me.config();p(Z)}catch(Z){console.error("Failed to load config for forecasting:",Z)}})()},[]);const D=t?.versions.find(le=>le.version==="baseline_7_day_avg")||null,R=t?.versions.find(le=>le.version==="aurora")||null,E=(le,Z)=>{if(!le)return"";const re=le[Z];return re==null?"":re.toFixed(3)},B=n?.slots??[];B.map(le=>new Date(le.slot_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),B.map(le=>le.load_kwh??0),B.map(le=>le.baseline_load??0),B.map(le=>le.aurora_load??0);const U=h?.forecasting?.active_forecast_version||"baseline_7_day_avg",$=!!R&&R.samples>0,I=(le,Z,re)=>{if(!le||!Z)return null;const H=le[re],X=Z[re];return H==null||X==null?null:H-X},O=I(D,R,"mae_pv"),q=I(D,R,"mae_load"),J=async le=>{if(h){y(!0);try{await Me.configSave({forecasting:{active_forecast_version:le}});const Z=await Me.config();p(Z)}catch(Z){console.error("Failed to save active forecast version:",Z)}finally{y(!1)}}},oe=async()=>{try{const[le,Z]=await Promise.all([Me.forecastEval(),Me.forecastDay()]);e(le),s(Z)}catch(le){console.error("Failed to reload forecasting data:",le)}},ie=async()=>{j(!0);try{await Me.forecastRunEval(7),await oe()}catch(le){console.error("Failed to run AURORA evaluation:",le)}finally{j(!1)}},me=async()=>{N(!0);try{await Me.forecastRunForward(48),await oe()}catch(le){console.error("Failed to run AURORA forward forecasts:",le)}finally{N(!1)}};return u.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-medium text-text",children:"Forecasting"}),u.jsx("p",{className:"text-[11px] text-muted",children:"Baseline vs AURORA forecasts. Use the selector to choose which source the planner uses."})]}),u.jsxs("div",{className:"flex flex-col items-end gap-2",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px]",children:[u.jsx("span",{className:"text-muted",children:"Highlight"}),u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${a==="baseline"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>o("baseline"),children:"Baseline"}),u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${a==="aurora"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>o("aurora"),children:"AURORA"})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px]",children:[u.jsx("span",{className:"text-muted",children:"Planner forecast source"}),u.jsxs("select",{value:U,onChange:le=>J(le.target.value),disabled:g,className:"rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px] text-white focus:border-accent focus:outline-none",children:[u.jsx("option",{value:"baseline_7_day_avg",children:"Baseline (7-day average)"}),u.jsx("option",{value:"aurora",children:"AURORA (ML model, experimental)"})]})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 text-[11px]",children:[u.jsx("button",{type:"button",onClick:ie,disabled:_,className:"rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px] text-white hover:border-accent disabled:opacity-50",children:_?"Running eval":"Run eval (7d)"}),u.jsx("button",{type:"button",onClick:me,disabled:k,className:"rounded-full border border-line/80 bg-surface2 px-2 py-1 text-[11px] text-white hover:border-accent disabled:opacity-50",children:k?"Running forward":"Run forward (48h)"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[u.jsx(Fr,{label:"Baseline MAE PV",value:E(D,"mae_pv"),hint:"Last window"}),u.jsx(Fr,{label:"Baseline MAE Load",value:E(D,"mae_load"),hint:"Last window"}),u.jsx(Fr,{label:"AURORA MAE PV",value:E(R,"mae_pv"),hint:"Last window"}),u.jsx(Fr,{label:"AURORA MAE Load",value:E(R,"mae_load"),hint:"Last window"})]}),D&&R&&u.jsxs(Xe,{className:"p-3 md:p-4",children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:"MAE delta (AURORA vs baseline, last window)"}),u.jsxs("div",{className:"flex flex-wrap gap-4 text-[11px]",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-muted mr-1",children:"PV:"}),O!=null?u.jsxs("span",{className:O>0?"text-green-400":O<0?"text-amber-300":"",children:[O>0?" ":O<0?" ":"",Math.abs(O).toFixed(3)," kWh MAE"]}):u.jsx("span",{className:"text-muted",children:""})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-muted mr-1",children:"Load:"}),q!=null?u.jsxs("span",{className:q>0?"text-green-400":q<0?"text-amber-300":"",children:[q>0?" ":q<0?" ":"",Math.abs(q).toFixed(3)," kWh MAE"]}):u.jsx("span",{className:"text-muted",children:""})]})]})]}),!$&&u.jsx("div",{className:"text-[11px] text-amber-300",children:"AURORA metrics are not available yet. Run an evaluation or keep the planner on baseline."}),u.jsx(wd,{day:"today",range:"48h",showDayToggle:!1}),B.some(le=>le.aurora_pv_p10!=null||le.aurora_load_p10!=null)&&u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsx(Xe,{className:"p-4",children:u.jsx(dv,{title:"PV Forecast (kWh) with Confidence Bands",color:"#22c55e",slots:B.map(le=>({time:le.slot_start,p10:le.aurora_pv_p10??null,p50:le.aurora_pv??null,p90:le.aurora_pv_p90??null,actual:le.pv_kwh}))})}),u.jsx(Xe,{className:"p-4",children:u.jsx(dv,{title:"Load Forecast (kWh) with Confidence Bands",color:"#f97316",slots:B.map(le=>({time:le.slot_start,p10:le.aurora_load_p10??null,p50:le.aurora_load??null,p90:le.aurora_load_p90??null,actual:le.load_kwh}))})})]}),u.jsxs(Xe,{children:[u.jsx("div",{className:"text-[11px] text-muted mb-2",children:"Today's slots"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full text-[11px] text-muted",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-line/60",children:[u.jsx("th",{className:"py-1 pr-3 text-left font-normal",children:"Time"}),u.jsx("th",{className:"py-1 pr-3 text-right font-normal",children:"Load (kWh)"}),u.jsx("th",{className:"py-1 pr-3 text-right font-normal",children:"Baseline (kWh)"}),u.jsx("th",{className:"py-1 pr-3 text-right font-normal",children:"AURORA (kWh)"})]})}),u.jsxs("tbody",{children:[B.map(le=>{const Z=new Date(le.slot_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return u.jsxs("tr",{className:"border-b border-line/20",children:[u.jsx("td",{className:"py-1 pr-3",children:Z}),u.jsx("td",{className:"py-1 pr-3 text-right",children:le.load_kwh?.toFixed(3)??""}),u.jsx("td",{className:"py-1 pr-3 text-right",children:le.baseline_load?.toFixed(3)??""}),u.jsx("td",{className:"py-1 pr-3 text-right",children:le.aurora_load?.toFixed(3)??""})]},le.slot_start)}),B.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"py-2 text-center text-muted",children:"No slots available for today."})})]})]})})]})]})}function $W(){const[t,e]=A.useState(!1),[n,s]=A.useState(null),[a,o]=A.useState(null),[l,d]=A.useState(10),[h,p]=A.useState(5);A.useEffect(()=>{Me.config().then(_=>{s(_),d(_.battery?.capacity_kwh||10),p(_.battery?.max_charge_power_kw||5)})},[]);const g=async()=>{e(!0);try{const _={battery:{capacity_kwh:l,max_charge_power_kw:h,max_discharge_power_kw:h}},j=await Me.simulate({manual_plan:[],overrides:_});o(j)}catch(_){console.error(_)}finally{e(!1)}},y=()=>{n&&(d(n.battery?.capacity_kwh||10),p(n.battery?.max_charge_power_kw||5),o(null))};return u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[u.jsxs("header",{children:[u.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-text flex items-center gap-3",children:[u.jsx(Hw,{className:"h-8 w-8 text-accent"}),"The Lab"]}),u.jsx("p",{className:"text-muted mt-1",children:'Run "What If?" simulations without affecting your real schedule.'})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-5 space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium text-text",children:[u.jsx($i,{className:"h-5 w-5 text-accent"}),u.jsx("span",{children:"Hardware Config"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[u.jsx("span",{className:"text-muted",children:"Battery Capacity"}),u.jsxs("span",{className:"text-text font-mono",children:[l," kWh"]})]}),u.jsx("input",{type:"range",min:"5",max:"100",step:"1",value:l,onChange:_=>d(parseFloat(_.target.value)),className:"w-full accent-accent h-2 bg-surface2 rounded-lg appearance-none cursor-pointer"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[u.jsx("span",{className:"text-muted",children:"Max Power (Charge/Discharge)"}),u.jsxs("span",{className:"text-text font-mono",children:[h," kW"]})]}),u.jsx("input",{type:"range",min:"1",max:"25",step:"0.5",value:h,onChange:_=>p(parseFloat(_.target.value)),className:"w-full accent-accent h-2 bg-surface2 rounded-lg appearance-none cursor-pointer"})]})]}),u.jsxs("div",{className:"pt-4 flex gap-3",children:[u.jsx("button",{onClick:g,disabled:t,className:"flex-1 btn btn-primary flex items-center justify-center gap-2",children:t?"Simulating...":u.jsxs(u.Fragment,{children:[u.jsx(kv,{className:"h-4 w-4"})," Run Sim"]})}),u.jsx("button",{onClick:y,className:"btn btn-ghost px-3",title:"Reset to Config",children:u.jsx(v5,{className:"h-4 w-4"})})]})]}),u.jsx("div",{className:"card p-5 bg-surface/50 border-dashed",children:u.jsxs("p",{className:"text-xs text-muted leading-relaxed",children:[u.jsx("strong",{children:"Note:"})," These simulations use live market prices and forecasts. Adjusting capacity scales your current SoC% to the new size. Results are not saved to the planner."]})})]}),u.jsx("div",{className:"lg:col-span-2 space-y-6",children:a?u.jsx(wd,{range:"48h",showDayToggle:!1,slotsOverride:a.schedule}):u.jsxs("div",{className:"h-full min-h-[400px] card flex flex-col items-center justify-center text-muted space-y-4",children:[u.jsx(Hw,{className:"h-12 w-12 opacity-20"}),u.jsx("p",{children:"Adjust parameters and click Run Sim to see results."})]})})]})]})}oi.register(vd,bd,ic,Wa,Yv,rc,ac);function qW({slots:t,mode:e,highlightIndex:n}){if(!t||t.length===0)return u.jsx("div",{className:"text-[11px] text-muted px-4 py-6",children:"No forecast data available for the next 48 hours."});const s=t.map(y=>new Date(y.slot_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),a=e==="load",o=t.map(y=>a?y.base.load_kwh:y.base.pv_kwh),l=t.map(y=>a?y.final.load_kwh:y.final.pv_kwh),d=t.map(y=>a?y.correction.load_kwh:y.correction.pv_kwh),h=d.map((y,_)=>{const j=y>=0?"rgba(34, 197, 94, 0.8)":"rgba(239, 68, 68, 0.8)";return typeof n=="number"&&_===n?y>=0?"rgba(34, 197, 94, 0.9)":"rgba(239, 68, 68, 0.9)":j}),p={labels:s,datasets:[{type:"line",label:a?"Base load (kWh)":"Base solar (kWh)",data:o,borderColor:"rgba(148, 163, 184, 0.9)",backgroundColor:y=>{const _=y.chart,{ctx:j,chartArea:k}=_;if(!k)return"rgba(56, 189, 248, 0.18)";const N=j.createLinearGradient(0,k.bottom,0,k.top);return N.addColorStop(0,"rgba(15, 23, 42, 0.0)"),N.addColorStop(.5,"rgba(56, 189, 248, 0.12)"),N.addColorStop(1,"rgba(56, 189, 248, 0.25)"),N},borderWidth:1.5,tension:.4,pointRadius:0,fill:"origin"},{type:"line",label:a?"Final load (kWh)":"Final solar (kWh)",data:l,borderColor:"rgba(59, 130, 246, 0.98)",backgroundColor:"rgba(59, 130, 246, 0.3)",borderWidth:2,borderDash:[4,3],tension:.4,pointRadius:0},{type:"bar",label:a?"Load correction (kWh)":"Solar correction (kWh)",data:d,backgroundColor:h,borderColor:h,borderWidth:0,yAxisID:"y"}]},g={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e5e7eb",font:{size:10}}},tooltip:{backgroundColor:"#020617",borderColor:"#4b5563",borderWidth:1,titleColor:"#e5e7eb",bodyColor:"#e5e7eb",padding:8,callbacks:{label(y){const _=y.dataset.label||"",j=y.parsed.y;return`${_}: ${typeof j=="number"?j.toFixed(2):j}`}}}},scales:{x:{ticks:{color:"#9ca3af",maxRotation:0,autoSkip:!0,maxTicksLimit:12,font:{size:9}},grid:{display:!1}},y:{ticks:{color:"#9ca3af",font:{size:9}},grid:{display:!1}}}};return u.jsx("div",{className:"w-full h-60 transition-opacity duration-300",children:u.jsx(Y0,{data:p,options:g},e)})}oi.register(Jk,ic,Wa,Mp,rc,ac);function GW({weatherVolatility:t,riskFactor:e,forecastAccuracy:n,priceSpread:s,forecastBias:a}){const o=Math.min(100,t.cloud*100),l=Math.min(100,t.temp*100),d=Math.max(0,Math.min(100,(e-1)*25)),h=n,p=s!=null?Math.max(0,Math.min(100,s/2.5*100)):50,g=a!=null?Math.max(0,Math.min(100,(a+2)/4*100)):50,y=["Cloud Vol.","Temp Vol.","Aggression","Accuracy","Spread","Bias"],_=["#38bdf8","#f472b6","#fbbf24","#34d399","#a78bfa","#fb923c"],j={labels:y,datasets:[{label:"Current Context",data:[o,l,d,h,p,g],backgroundColor:"rgba(56, 189, 248, 0.15)",borderColor:"rgba(56, 189, 248, 0.5)",borderWidth:2,pointBackgroundColor:_,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:_,pointRadius:4}]},k={scales:{r:{angleLines:{color:"rgba(255, 255, 255, 0.1)"},grid:{color:"rgba(255, 255, 255, 0.1)"},pointLabels:{display:!1},ticks:{display:!1,backdropColor:"transparent"},suggestedMin:0,suggestedMax:100}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1e293b",titleColor:"#f8fafc",bodyColor:"#cbd5e1",borderColor:"#334155",borderWidth:1}},maintainAspectRatio:!1},N=y.slice(0,3),D=y.slice(3);return u.jsxs("div",{className:"relative w-full h-full min-h-[200px]",children:[u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:u.jsx(YW,{data:j,options:k})}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-3 pb-2 z-10",children:[u.jsx("div",{className:"flex flex-col gap-1",children:N.map((R,E)=>u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm ring-1 ring-white/10",style:{backgroundColor:_[E]}}),u.jsx("span",{className:"text-[9px] text-muted font-medium leading-tight",children:R})]},R))}),u.jsx("div",{className:"flex flex-col gap-1",children:D.map((R,E)=>u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm ring-1 ring-white/10",style:{backgroundColor:_[E+3]}}),u.jsx("span",{className:"text-[9px] text-muted font-medium leading-tight",children:R})]},R))})]})]})}function XW({events:t}){const e=A.useMemo(()=>[...t].sort((a,o)=>new Date(o.timestamp).getTime()-new Date(a.timestamp).getTime()),[t]),n=a=>{const o=(a.type+" "+a.message).toLowerCase();if(o.includes("charge")||o.includes("charging"))return u.jsx($i,{className:"h-4 w-4 text-amber-400"});if(o.includes("export")||o.includes("discharging"))return u.jsx(wy,{className:"h-4 w-4 text-emerald-400"});if(o.includes("defensive")||o.includes("safety")||o.includes("hold"))return u.jsx(b5,{className:"h-4 w-4 text-blue-400"});if(o.includes("idle")||o.includes("wait"))return u.jsx(u5,{className:"h-4 w-4 text-slate-400"});if(o.includes("weather"))return u.jsx(Fw,{className:"h-4 w-4 text-sky-400"});if(o.includes("learning")||o.includes("tune"))return u.jsx(Uw,{className:"h-4 w-4 text-purple-400"});if(o.includes("price")||o.includes("cost"))return u.jsx(_y,{className:"h-4 w-4 text-emerald-400"});switch(a.type){case"STRATEGY_CHANGE":return u.jsx(IT,{className:"h-4 w-4 text-purple-400"});case"WEATHER_ADJUSTMENT":return u.jsx(Fw,{className:"h-4 w-4 text-blue-400"});case"PRICE_VOLATILITY":return u.jsx($i,{className:"h-4 w-4 text-amber-400"});case"LEARNING_EVENT":return u.jsx(Uw,{className:"h-4 w-4 text-emerald-400"});default:return u.jsx(Iw,{className:"h-4 w-4 text-slate-400"})}},s=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return t.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted text-xs",children:[u.jsx(Iw,{className:"h-6 w-6 mb-2 opacity-50"}),"No activity recorded yet."]}):u.jsxs("div",{className:"relative space-y-4 pl-2",children:[u.jsx("div",{className:"absolute left-[19px] top-2 bottom-2 w-[1px] bg-line/50"}),e.map((a,o)=>u.jsxs("div",{className:"relative flex gap-3 items-start group",children:[u.jsx("div",{className:"relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-surface border border-line/60 group-hover:border-accent/50 transition-colors",children:n(a)}),u.jsxs("div",{className:"flex-1 pt-1.5 min-w-0",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[u.jsx("p",{className:"text-xs font-medium text-text truncate",children:a.type.replace("_"," ")}),u.jsx("span",{className:"text-[10px] text-muted shrink-0 font-mono",children:s(a.timestamp)})]}),u.jsx("p",{className:"text-[11px] text-muted mt-0.5 leading-relaxed break-words",children:a.message}),a.details&&Object.keys(a.details).length>0&&u.jsx("div",{className:"mt-1.5",children:u.jsxs("details",{className:"group/details",children:[u.jsxs("summary",{className:"cursor-pointer text-[10px] text-accent/80 hover:text-accent select-none list-none flex items-center gap-1",children:[u.jsx("span",{children:"Details"}),u.jsx("span",{className:"opacity-50 group-open/details:rotate-180 transition-transform",children:""})]}),u.jsx("pre",{className:"mt-1 p-2 rounded bg-surface2/50 text-[10px] text-muted overflow-x-auto font-mono",children:JSON.stringify(a.details,null,2)})]})})]})]},o))]})}function KW({metrics:t,perfData:e}){let n=0,s=0;e?.cost_series&&e.cost_series.forEach(_=>{n+=_.planned,s+=_.realized});const a=s-n,o=a<=0?`Saved ${Math.abs(a).toFixed(1)} SEK`:`Overspent ${a.toFixed(1)} SEK`,l=a<=0,d=t?.mae_pv_aurora?.toFixed(2)??"N/A",h=t?.mae_load_aurora?.toFixed(2)??"N/A",p=t?.max_price_spread,g=p!=null?`${p.toFixed(2)} SEK`:"N/A",y=p!=null&&p>0;return u.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[u.jsxs(Xe,{className:"p-4 flex items-center justify-between relative overflow-hidden group",children:[u.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${l?"bg-emerald-500":"bg-rose-500"}`}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:`p-2 rounded-full ${l?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:u.jsx(YT,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"7-Day Cost Drift"}),u.jsx("div",{className:`text-lg font-semibold ${l?"text-emerald-400":"text-rose-400"}`,children:o})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"vs Plan"}),l?u.jsx(Ww,{className:"h-4 w-4 text-emerald-500 ml-auto"}):u.jsx(_y,{className:"h-4 w-4 text-rose-500 ml-auto"})]})]}),u.jsxs(Xe,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[u.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${y?"bg-emerald-500":"bg-rose-500"}`}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:`p-2 rounded-full ${y?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:u.jsx(Ju,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"Max Price Spread"}),u.jsx("div",{className:`text-lg font-semibold ${y?"text-emerald-400":"text-rose-400"}`,children:g})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"Arbitrage"}),y?u.jsx(_y,{className:"h-4 w-4 text-emerald-500 ml-auto"}):u.jsx(Ww,{className:"h-4 w-4 text-rose-500 ml-auto"})]})]}),u.jsxs(Xe,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-amber-500/[0.02]"}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:"p-2 rounded-full bg-amber-500/10 text-amber-400",children:u.jsx($i,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"PV Forecast Error"}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[d," ",u.jsx("span",{className:"text-xs font-normal text-muted",children:"kWh"})]})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"MAE (7d)"}),u.jsx(Yw,{className:"h-4 w-4 text-amber-500/50 ml-auto"})]})]}),u.jsxs(Xe,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-blue-500/[0.02]"}),u.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[u.jsx("div",{className:"p-2 rounded-full bg-blue-500/10 text-blue-400",children:u.jsx(Ju,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"Load Forecast Error"}),u.jsxs("div",{className:"text-lg font-semibold text-text",children:[h," ",u.jsx("span",{className:"text-xs font-normal text-muted",children:"kWh"})]})]})]}),u.jsxs("div",{className:"text-right relative z-10",children:[u.jsx("div",{className:"text-[10px] text-muted",children:"MAE (7d)"}),u.jsx(Yw,{className:"h-4 w-4 text-blue-500/50 ml-auto"})]})]})]})}var CD;function Ae(){return CD.apply(null,arguments)}function ZW(t){CD=t}function Ni(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function $o(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Rt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W0(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Rt(t,e))return!1;return!0}function Ms(t){return t===void 0}function Ia(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Md(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function ED(t,e){var n=[],s,a=t.length;for(s=0;s<a;++s)n.push(e(t[s],s));return n}function Hr(t,e){for(var n in e)Rt(e,n)&&(t[n]=e[n]);return Rt(e,"toString")&&(t.toString=e.toString),Rt(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ea(t,e,n,s){return eC(t,e,n,s,!0).utc()}function QW(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ht(t){return t._pf==null&&(t._pf=QW()),t._pf}var hv;Array.prototype.some?hv=Array.prototype.some:hv=function(t){var e=Object(this),n=e.length>>>0,s;for(s=0;s<n;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function $0(t){var e=null,n=!1,s=t._d&&!isNaN(t._d.getTime());if(s&&(e=ht(t),n=hv.call(e.parsedDateParts,function(a){return a!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s;return t._isValid}function $p(t){var e=ea(NaN);return t!=null?Hr(ht(e),t):ht(e).userInvalidated=!0,e}var wT=Ae.momentProperties=[],ly=!1;function q0(t,e){var n,s,a,o=wT.length;if(Ms(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Ms(e._i)||(t._i=e._i),Ms(e._f)||(t._f=e._f),Ms(e._l)||(t._l=e._l),Ms(e._strict)||(t._strict=e._strict),Ms(e._tzm)||(t._tzm=e._tzm),Ms(e._isUTC)||(t._isUTC=e._isUTC),Ms(e._offset)||(t._offset=e._offset),Ms(e._pf)||(t._pf=ht(e)),Ms(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)s=wT[n],a=e[s],Ms(a)||(t[s]=a);return t}function Dd(t){q0(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ly===!1&&(ly=!0,Ae.updateOffset(this),ly=!1)}function Mi(t){return t instanceof Dd||t!=null&&t._isAMomentObject!=null}function AD(t){Ae.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function li(t,e){var n=!0;return Hr(function(){if(Ae.deprecationHandler!=null&&Ae.deprecationHandler(null,t),n){var s=[],a,o,l,d=arguments.length;for(o=0;o<d;o++){if(a="",typeof arguments[o]=="object"){a+=`
[`+o+"] ";for(l in arguments[0])Rt(arguments[0],l)&&(a+=l+": "+arguments[0][l]+", ");a=a.slice(0,-2)}else a=arguments[o];s.push(a)}AD(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var ST={};function OD(t,e){Ae.deprecationHandler!=null&&Ae.deprecationHandler(t,e),ST[t]||(AD(e),ST[t]=!0)}Ae.suppressDeprecationWarnings=!1;Ae.deprecationHandler=null;function ta(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function JW(t){var e,n;for(n in t)Rt(t,n)&&(e=t[n],ta(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function fv(t,e){var n=Hr({},t),s;for(s in e)Rt(e,s)&&($o(t[s])&&$o(e[s])?(n[s]={},Hr(n[s],t[s]),Hr(n[s],e[s])):e[s]!=null?n[s]=e[s]:delete n[s]);for(s in t)Rt(t,s)&&!Rt(e,s)&&$o(t[s])&&(n[s]=Hr({},n[s]));return n}function G0(t){t!=null&&this.set(t)}var pv;Object.keys?pv=Object.keys:pv=function(t){var e,n=[];for(e in t)Rt(t,e)&&n.push(e);return n};var e$={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function t$(t,e,n){var s=this._calendar[t]||this._calendar.sameElse;return ta(s)?s.call(e,n):s}function Ji(t,e,n){var s=""+Math.abs(t),a=e-s.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+s}var X0=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,wf=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,cy={},$l={};function Ge(t,e,n,s){var a=s;typeof s=="string"&&(a=function(){return this[s]()}),t&&($l[t]=a),e&&($l[e[0]]=function(){return Ji(a.apply(this,arguments),e[1],e[2])}),n&&($l[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)})}function n$(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function s$(t){var e=t.match(X0),n,s;for(n=0,s=e.length;n<s;n++)$l[e[n]]?e[n]=$l[e[n]]:e[n]=n$(e[n]);return function(a){var o="",l;for(l=0;l<s;l++)o+=ta(e[l])?e[l].call(a,t):e[l];return o}}function Lf(t,e){return t.isValid()?(e=RD(e,t.localeData()),cy[e]=cy[e]||s$(e),cy[e](t)):t.localeData().invalidDate()}function RD(t,e){var n=5;function s(a){return e.longDateFormat(a)||a}for(wf.lastIndex=0;n>=0&&wf.test(t);)t=t.replace(wf,s),wf.lastIndex=0,n-=1;return t}var i$={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function a$(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(X0).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var r$="Invalid date";function o$(){return this._invalidDate}var l$="%d",c$=/\d{1,2}/;function u$(t){return this._ordinal.replace("%d",t)}var d$={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function h$(t,e,n,s){var a=this._relativeTime[n];return ta(a)?a(t,e,n,s):a.replace(/%d/i,t)}function f$(t,e){var n=this._relativeTime[t>0?"future":"past"];return ta(n)?n(e):n.replace(/%s/i,e)}var jT={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ci(t){return typeof t=="string"?jT[t]||jT[t.toLowerCase()]:void 0}function K0(t){var e={},n,s;for(s in t)Rt(t,s)&&(n=ci(s),n&&(e[n]=t[s]));return e}var p$={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function m$(t){var e=[],n;for(n in t)Rt(t,n)&&e.push({unit:n,priority:p$[n]});return e.sort(function(s,a){return s.priority-a.priority}),e}var PD=/\d/,Us=/\d\d/,LD=/\d{3}/,Z0=/\d{4}/,qp=/[+-]?\d{6}/,on=/\d\d?/,zD=/\d\d\d\d?/,BD=/\d\d\d\d\d\d?/,Gp=/\d{1,3}/,Q0=/\d{1,4}/,Xp=/[+-]?\d{1,6}/,gc=/\d+/,Kp=/[+-]?\d+/,g$=/Z|[+-]\d\d:?\d\d/gi,Zp=/Z|[+-]\d\d(?::?\d\d)?/gi,x$=/[+-]?\d+(\.\d{1,3})?/,Cd=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,xc=/^[1-9]\d?/,J0=/^([1-9]\d|\d)/,fp;fp={};function Fe(t,e,n){fp[t]=ta(e)?e:function(s,a){return s&&n?n:e}}function y$(t,e){return Rt(fp,t)?fp[t](e._strict,e._locale):new RegExp(v$(t))}function v$(t){return Va(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,s,a,o){return n||s||a||o}))}function Va(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ri(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function kt(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=ri(e)),n}var mv={};function Gt(t,e){var n,s=e,a;for(typeof t=="string"&&(t=[t]),Ia(e)&&(s=function(o,l){l[e]=kt(o)}),a=t.length,n=0;n<a;n++)mv[t[n]]=s}function Ed(t,e){Gt(t,function(n,s,a,o){a._w=a._w||{},e(n,a._w,a,o)})}function b$(t,e,n){e!=null&&Rt(mv,t)&&mv[t](e,n._a,n,t)}function Qp(t){return t%4===0&&t%100!==0||t%400===0}var os=0,Pa=1,Wi=2,Bn=3,ki=4,La=5,Uo=6,_$=7,w$=8;Ge("Y",0,0,function(){var t=this.year();return t<=9999?Ji(t,4):"+"+t});Ge(0,["YY",2],0,function(){return this.year()%100});Ge(0,["YYYY",4],0,"year");Ge(0,["YYYYY",5],0,"year");Ge(0,["YYYYYY",6,!0],0,"year");Fe("Y",Kp);Fe("YY",on,Us);Fe("YYYY",Q0,Z0);Fe("YYYYY",Xp,qp);Fe("YYYYYY",Xp,qp);Gt(["YYYYY","YYYYYY"],os);Gt("YYYY",function(t,e){e[os]=t.length===2?Ae.parseTwoDigitYear(t):kt(t)});Gt("YY",function(t,e){e[os]=Ae.parseTwoDigitYear(t)});Gt("Y",function(t,e){e[os]=parseInt(t,10)});function Ku(t){return Qp(t)?366:365}Ae.parseTwoDigitYear=function(t){return kt(t)+(kt(t)>68?1900:2e3)};var VD=yc("FullYear",!0);function S$(){return Qp(this.year())}function yc(t,e){return function(n){return n!=null?(FD(this,t,n),Ae.updateOffset(this,e),this):hd(this,t)}}function hd(t,e){if(!t.isValid())return NaN;var n=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function FD(t,e,n){var s,a,o,l,d;if(!(!t.isValid()||isNaN(n))){switch(s=t._d,a=t._isUTC,e){case"Milliseconds":return void(a?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(a?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(a?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(a?s.setUTCHours(n):s.setHours(n));case"Date":return void(a?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}o=n,l=t.month(),d=t.date(),d=d===29&&l===1&&!Qp(o)?28:d,a?s.setUTCFullYear(o,l,d):s.setFullYear(o,l,d)}}function j$(t){return t=ci(t),ta(this[t])?this[t]():this}function T$(t,e){if(typeof t=="object"){t=K0(t);var n=m$(t),s,a=n.length;for(s=0;s<a;s++)this[n[s].unit](t[n[s].unit])}else if(t=ci(t),ta(this[t]))return this[t](e);return this}function k$(t,e){return(t%e+e)%e}var Mn;Array.prototype.indexOf?Mn=Array.prototype.indexOf:Mn=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function eb(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=k$(e,12);return t+=(e-n)/12,n===1?Qp(t)?29:28:31-n%7%2}Ge("M",["MM",2],"Mo",function(){return this.month()+1});Ge("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Ge("MMMM",0,0,function(t){return this.localeData().months(this,t)});Fe("M",on,xc);Fe("MM",on,Us);Fe("MMM",function(t,e){return e.monthsShortRegex(t)});Fe("MMMM",function(t,e){return e.monthsRegex(t)});Gt(["M","MM"],function(t,e){e[Pa]=kt(t)-1});Gt(["MMM","MMMM"],function(t,e,n,s){var a=n._locale.monthsParse(t,s,n._strict);a!=null?e[Pa]=a:ht(n).invalidMonth=t});var N$="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),HD="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),UD=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,M$=Cd,D$=Cd;function C$(t,e){return t?Ni(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||UD).test(e)?"format":"standalone"][t.month()]:Ni(this._months)?this._months:this._months.standalone}function E$(t,e){return t?Ni(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[UD.test(e)?"format":"standalone"][t.month()]:Ni(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function A$(t,e,n){var s,a,o,l=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)o=ea([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:null):(a=Mn.call(this._longMonthsParse,l),a!==-1?a:null):e==="MMM"?(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:(a=Mn.call(this._longMonthsParse,l),a!==-1?a:null)):(a=Mn.call(this._longMonthsParse,l),a!==-1?a:(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:null))}function O$(t,e,n){var s,a,o;if(this._monthsParseExact)return A$.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(a=ea([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!n&&!this._monthsParse[s]&&(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(n&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!n&&this._monthsParse[s].test(t))return s}}function ID(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=kt(e);else if(e=t.localeData().monthsParse(e),!Ia(e))return t}var n=e,s=t.date();return s=s<29?s:Math.min(s,eb(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,s):t._d.setMonth(n,s),t}function YD(t){return t!=null?(ID(this,t),Ae.updateOffset(this,!0),this):hd(this,"Month")}function R$(){return eb(this.year(),this.month())}function P$(t){return this._monthsParseExact?(Rt(this,"_monthsRegex")||WD.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Rt(this,"_monthsShortRegex")||(this._monthsShortRegex=M$),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function L$(t){return this._monthsParseExact?(Rt(this,"_monthsRegex")||WD.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Rt(this,"_monthsRegex")||(this._monthsRegex=D$),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function WD(){function t(h,p){return p.length-h.length}var e=[],n=[],s=[],a,o,l,d;for(a=0;a<12;a++)o=ea([2e3,a]),l=Va(this.monthsShort(o,"")),d=Va(this.months(o,"")),e.push(l),n.push(d),s.push(d),s.push(l);e.sort(t),n.sort(t),s.sort(t),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function z$(t,e,n,s,a,o,l){var d;return t<100&&t>=0?(d=new Date(t+400,e,n,s,a,o,l),isFinite(d.getFullYear())&&d.setFullYear(t)):d=new Date(t,e,n,s,a,o,l),d}function fd(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function pp(t,e,n){var s=7+e-n,a=(7+fd(t,0,s).getUTCDay()-e)%7;return-a+s-1}function $D(t,e,n,s,a){var o=(7+n-s)%7,l=pp(t,s,a),d=1+7*(e-1)+o+l,h,p;return d<=0?(h=t-1,p=Ku(h)+d):d>Ku(t)?(h=t+1,p=d-Ku(t)):(h=t,p=d),{year:h,dayOfYear:p}}function pd(t,e,n){var s=pp(t.year(),e,n),a=Math.floor((t.dayOfYear()-s-1)/7)+1,o,l;return a<1?(l=t.year()-1,o=a+Fa(l,e,n)):a>Fa(t.year(),e,n)?(o=a-Fa(t.year(),e,n),l=t.year()+1):(l=t.year(),o=a),{week:o,year:l}}function Fa(t,e,n){var s=pp(t,e,n),a=pp(t+1,e,n);return(Ku(t)-s+a)/7}Ge("w",["ww",2],"wo","week");Ge("W",["WW",2],"Wo","isoWeek");Fe("w",on,xc);Fe("ww",on,Us);Fe("W",on,xc);Fe("WW",on,Us);Ed(["w","ww","W","WW"],function(t,e,n,s){e[s.substr(0,1)]=kt(t)});function B$(t){return pd(t,this._week.dow,this._week.doy).week}var V$={dow:0,doy:6};function F$(){return this._week.dow}function H$(){return this._week.doy}function U$(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function I$(t){var e=pd(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Ge("d",0,"do","day");Ge("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Ge("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Ge("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Ge("e",0,0,"weekday");Ge("E",0,0,"isoWeekday");Fe("d",on);Fe("e",on);Fe("E",on);Fe("dd",function(t,e){return e.weekdaysMinRegex(t)});Fe("ddd",function(t,e){return e.weekdaysShortRegex(t)});Fe("dddd",function(t,e){return e.weekdaysRegex(t)});Ed(["dd","ddd","dddd"],function(t,e,n,s){var a=n._locale.weekdaysParse(t,s,n._strict);a!=null?e.d=a:ht(n).invalidWeekday=t});Ed(["d","e","E"],function(t,e,n,s){e[s]=kt(t)});function Y$(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function W$(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function tb(t,e){return t.slice(e,7).concat(t.slice(0,e))}var $$="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qD="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),q$="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),G$=Cd,X$=Cd,K$=Cd;function Z$(t,e){var n=Ni(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?tb(n,this._week.dow):t?n[t.day()]:n}function Q$(t){return t===!0?tb(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function J$(t){return t===!0?tb(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function eq(t,e,n){var s,a,o,l=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)o=ea([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(a=Mn.call(this._weekdaysParse,l),a!==-1?a:null):e==="ddd"?(a=Mn.call(this._shortWeekdaysParse,l),a!==-1?a:null):(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null):e==="dddd"?(a=Mn.call(this._weekdaysParse,l),a!==-1||(a=Mn.call(this._shortWeekdaysParse,l),a!==-1)?a:(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null)):e==="ddd"?(a=Mn.call(this._shortWeekdaysParse,l),a!==-1||(a=Mn.call(this._weekdaysParse,l),a!==-1)?a:(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null)):(a=Mn.call(this._minWeekdaysParse,l),a!==-1||(a=Mn.call(this._weekdaysParse,l),a!==-1)?a:(a=Mn.call(this._shortWeekdaysParse,l),a!==-1?a:null))}function tq(t,e,n){var s,a,o;if(this._weekdaysParseExact)return eq.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(a=ea([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(n&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(n&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!n&&this._weekdaysParse[s].test(t))return s}}function nq(t){if(!this.isValid())return t!=null?this:NaN;var e=hd(this,"Day");return t!=null?(t=Y$(t,this.localeData()),this.add(t-e,"d")):e}function sq(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function iq(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=W$(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function aq(t){return this._weekdaysParseExact?(Rt(this,"_weekdaysRegex")||nb.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Rt(this,"_weekdaysRegex")||(this._weekdaysRegex=G$),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function rq(t){return this._weekdaysParseExact?(Rt(this,"_weekdaysRegex")||nb.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Rt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=X$),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function oq(t){return this._weekdaysParseExact?(Rt(this,"_weekdaysRegex")||nb.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Rt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=K$),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function nb(){function t(g,y){return y.length-g.length}var e=[],n=[],s=[],a=[],o,l,d,h,p;for(o=0;o<7;o++)l=ea([2e3,1]).day(o),d=Va(this.weekdaysMin(l,"")),h=Va(this.weekdaysShort(l,"")),p=Va(this.weekdays(l,"")),e.push(d),n.push(h),s.push(p),a.push(d),a.push(h),a.push(p);e.sort(t),n.sort(t),s.sort(t),a.sort(t),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function sb(){return this.hours()%12||12}function lq(){return this.hours()||24}Ge("H",["HH",2],0,"hour");Ge("h",["hh",2],0,sb);Ge("k",["kk",2],0,lq);Ge("hmm",0,0,function(){return""+sb.apply(this)+Ji(this.minutes(),2)});Ge("hmmss",0,0,function(){return""+sb.apply(this)+Ji(this.minutes(),2)+Ji(this.seconds(),2)});Ge("Hmm",0,0,function(){return""+this.hours()+Ji(this.minutes(),2)});Ge("Hmmss",0,0,function(){return""+this.hours()+Ji(this.minutes(),2)+Ji(this.seconds(),2)});function GD(t,e){Ge(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}GD("a",!0);GD("A",!1);function XD(t,e){return e._meridiemParse}Fe("a",XD);Fe("A",XD);Fe("H",on,J0);Fe("h",on,xc);Fe("k",on,xc);Fe("HH",on,Us);Fe("hh",on,Us);Fe("kk",on,Us);Fe("hmm",zD);Fe("hmmss",BD);Fe("Hmm",zD);Fe("Hmmss",BD);Gt(["H","HH"],Bn);Gt(["k","kk"],function(t,e,n){var s=kt(t);e[Bn]=s===24?0:s});Gt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Gt(["h","hh"],function(t,e,n){e[Bn]=kt(t),ht(n).bigHour=!0});Gt("hmm",function(t,e,n){var s=t.length-2;e[Bn]=kt(t.substr(0,s)),e[ki]=kt(t.substr(s)),ht(n).bigHour=!0});Gt("hmmss",function(t,e,n){var s=t.length-4,a=t.length-2;e[Bn]=kt(t.substr(0,s)),e[ki]=kt(t.substr(s,2)),e[La]=kt(t.substr(a)),ht(n).bigHour=!0});Gt("Hmm",function(t,e,n){var s=t.length-2;e[Bn]=kt(t.substr(0,s)),e[ki]=kt(t.substr(s))});Gt("Hmmss",function(t,e,n){var s=t.length-4,a=t.length-2;e[Bn]=kt(t.substr(0,s)),e[ki]=kt(t.substr(s,2)),e[La]=kt(t.substr(a))});function cq(t){return(t+"").toLowerCase().charAt(0)==="p"}var uq=/[ap]\.?m?\.?/i,dq=yc("Hours",!0);function hq(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var KD={calendar:e$,longDateFormat:i$,invalidDate:r$,ordinal:l$,dayOfMonthOrdinalParse:c$,relativeTime:d$,months:N$,monthsShort:HD,week:V$,weekdays:$$,weekdaysMin:q$,weekdaysShort:qD,meridiemParse:uq},un={},Du={},md;function fq(t,e){var n,s=Math.min(t.length,e.length);for(n=0;n<s;n+=1)if(t[n]!==e[n])return n;return s}function TT(t){return t&&t.toLowerCase().replace("_","-")}function pq(t){for(var e=0,n,s,a,o;e<t.length;){for(o=TT(t[e]).split("-"),n=o.length,s=TT(t[e+1]),s=s?s.split("-"):null;n>0;){if(a=Jp(o.slice(0,n).join("-")),a)return a;if(s&&s.length>=n&&fq(o,s)>=n-1)break;n--}e++}return md}function mq(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Jp(t){var e=null,n;if(un[t]===void 0&&typeof Vf<"u"&&Vf&&Vf.exports&&mq(t))try{e=md._abbr,n=require,n("./locale/"+t),$r(e)}catch{un[t]=null}return un[t]}function $r(t,e){var n;return t&&(Ms(e)?n=qa(t):n=ib(t,e),n?md=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),md._abbr}function ib(t,e){if(e!==null){var n,s=KD;if(e.abbr=t,un[t]!=null)OD("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=un[t]._config;else if(e.parentLocale!=null)if(un[e.parentLocale]!=null)s=un[e.parentLocale]._config;else if(n=Jp(e.parentLocale),n!=null)s=n._config;else return Du[e.parentLocale]||(Du[e.parentLocale]=[]),Du[e.parentLocale].push({name:t,config:e}),null;return un[t]=new G0(fv(s,e)),Du[t]&&Du[t].forEach(function(a){ib(a.name,a.config)}),$r(t),un[t]}else return delete un[t],null}function gq(t,e){if(e!=null){var n,s,a=KD;un[t]!=null&&un[t].parentLocale!=null?un[t].set(fv(un[t]._config,e)):(s=Jp(t),s!=null&&(a=s._config),e=fv(a,e),s==null&&(e.abbr=t),n=new G0(e),n.parentLocale=un[t],un[t]=n),$r(t)}else un[t]!=null&&(un[t].parentLocale!=null?(un[t]=un[t].parentLocale,t===$r()&&$r(t)):un[t]!=null&&delete un[t]);return un[t]}function qa(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return md;if(!Ni(t)){if(e=Jp(t),e)return e;t=[t]}return pq(t)}function xq(){return pv(un)}function ab(t){var e,n=t._a;return n&&ht(t).overflow===-2&&(e=n[Pa]<0||n[Pa]>11?Pa:n[Wi]<1||n[Wi]>eb(n[os],n[Pa])?Wi:n[Bn]<0||n[Bn]>24||n[Bn]===24&&(n[ki]!==0||n[La]!==0||n[Uo]!==0)?Bn:n[ki]<0||n[ki]>59?ki:n[La]<0||n[La]>59?La:n[Uo]<0||n[Uo]>999?Uo:-1,ht(t)._overflowDayOfYear&&(e<os||e>Wi)&&(e=Wi),ht(t)._overflowWeeks&&e===-1&&(e=_$),ht(t)._overflowWeekday&&e===-1&&(e=w$),ht(t).overflow=e),t}var yq=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vq=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bq=/Z|[+-]\d\d(?::?\d\d)?/,Sf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],uy=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_q=/^\/?Date\((-?\d+)/i,wq=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Sq={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ZD(t){var e,n,s=t._i,a=yq.exec(s)||vq.exec(s),o,l,d,h,p=Sf.length,g=uy.length;if(a){for(ht(t).iso=!0,e=0,n=p;e<n;e++)if(Sf[e][1].exec(a[1])){l=Sf[e][0],o=Sf[e][2]!==!1;break}if(l==null){t._isValid=!1;return}if(a[3]){for(e=0,n=g;e<n;e++)if(uy[e][1].exec(a[3])){d=(a[2]||" ")+uy[e][0];break}if(d==null){t._isValid=!1;return}}if(!o&&d!=null){t._isValid=!1;return}if(a[4])if(bq.exec(a[4]))h="Z";else{t._isValid=!1;return}t._f=l+(d||"")+(h||""),ob(t)}else t._isValid=!1}function jq(t,e,n,s,a,o){var l=[Tq(t),HD.indexOf(e),parseInt(n,10),parseInt(s,10),parseInt(a,10)];return o&&l.push(parseInt(o,10)),l}function Tq(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function kq(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Nq(t,e,n){if(t){var s=qD.indexOf(t),a=new Date(e[0],e[1],e[2]).getDay();if(s!==a)return ht(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Mq(t,e,n){if(t)return Sq[t];if(e)return 0;var s=parseInt(n,10),a=s%100,o=(s-a)/100;return o*60+a}function QD(t){var e=wq.exec(kq(t._i)),n;if(e){if(n=jq(e[4],e[3],e[2],e[5],e[6],e[7]),!Nq(e[1],n,t))return;t._a=n,t._tzm=Mq(e[8],e[9],e[10]),t._d=fd.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ht(t).rfc2822=!0}else t._isValid=!1}function Dq(t){var e=_q.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(ZD(t),t._isValid===!1)delete t._isValid;else return;if(QD(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:Ae.createFromInputFallback(t)}Ae.createFromInputFallback=li("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Pl(t,e,n){return t??e??n}function Cq(t){var e=new Date(Ae.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function rb(t){var e,n,s=[],a,o,l;if(!t._d){for(a=Cq(t),t._w&&t._a[Wi]==null&&t._a[Pa]==null&&Eq(t),t._dayOfYear!=null&&(l=Pl(t._a[os],a[os]),(t._dayOfYear>Ku(l)||t._dayOfYear===0)&&(ht(t)._overflowDayOfYear=!0),n=fd(l,0,t._dayOfYear),t._a[Pa]=n.getUTCMonth(),t._a[Wi]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=a[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Bn]===24&&t._a[ki]===0&&t._a[La]===0&&t._a[Uo]===0&&(t._nextDay=!0,t._a[Bn]=0),t._d=(t._useUTC?fd:z$).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Bn]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(ht(t).weekdayMismatch=!0)}}function Eq(t){var e,n,s,a,o,l,d,h,p;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,l=4,n=Pl(e.GG,t._a[os],pd(rn(),1,4).year),s=Pl(e.W,1),a=Pl(e.E,1),(a<1||a>7)&&(h=!0)):(o=t._locale._week.dow,l=t._locale._week.doy,p=pd(rn(),o,l),n=Pl(e.gg,t._a[os],p.year),s=Pl(e.w,p.week),e.d!=null?(a=e.d,(a<0||a>6)&&(h=!0)):e.e!=null?(a=e.e+o,(e.e<0||e.e>6)&&(h=!0)):a=o),s<1||s>Fa(n,o,l)?ht(t)._overflowWeeks=!0:h!=null?ht(t)._overflowWeekday=!0:(d=$D(n,s,a,o,l),t._a[os]=d.year,t._dayOfYear=d.dayOfYear)}Ae.ISO_8601=function(){};Ae.RFC_2822=function(){};function ob(t){if(t._f===Ae.ISO_8601){ZD(t);return}if(t._f===Ae.RFC_2822){QD(t);return}t._a=[],ht(t).empty=!0;var e=""+t._i,n,s,a,o,l,d=e.length,h=0,p,g;for(a=RD(t._f,t._locale).match(X0)||[],g=a.length,n=0;n<g;n++)o=a[n],s=(e.match(y$(o,t))||[])[0],s&&(l=e.substr(0,e.indexOf(s)),l.length>0&&ht(t).unusedInput.push(l),e=e.slice(e.indexOf(s)+s.length),h+=s.length),$l[o]?(s?ht(t).empty=!1:ht(t).unusedTokens.push(o),b$(o,s,t)):t._strict&&!s&&ht(t).unusedTokens.push(o);ht(t).charsLeftOver=d-h,e.length>0&&ht(t).unusedInput.push(e),t._a[Bn]<=12&&ht(t).bigHour===!0&&t._a[Bn]>0&&(ht(t).bigHour=void 0),ht(t).parsedDateParts=t._a.slice(0),ht(t).meridiem=t._meridiem,t._a[Bn]=Aq(t._locale,t._a[Bn],t._meridiem),p=ht(t).era,p!==null&&(t._a[os]=t._locale.erasConvertYear(p,t._a[os])),rb(t),ab(t)}function Aq(t,e,n){var s;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(s=t.isPM(n),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function Oq(t){var e,n,s,a,o,l,d=!1,h=t._f.length;if(h===0){ht(t).invalidFormat=!0,t._d=new Date(NaN);return}for(a=0;a<h;a++)o=0,l=!1,e=q0({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[a],ob(e),$0(e)&&(l=!0),o+=ht(e).charsLeftOver,o+=ht(e).unusedTokens.length*10,ht(e).score=o,d?o<s&&(s=o,n=e):(s==null||o<s||l)&&(s=o,n=e,l&&(d=!0));Hr(t,n||e)}function Rq(t){if(!t._d){var e=K0(t._i),n=e.day===void 0?e.date:e.day;t._a=ED([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),rb(t)}}function Pq(t){var e=new Dd(ab(JD(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function JD(t){var e=t._i,n=t._f;return t._locale=t._locale||qa(t._l),e===null||n===void 0&&e===""?$p({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Mi(e)?new Dd(ab(e)):(Md(e)?t._d=e:Ni(n)?Oq(t):n?ob(t):Lq(t),$0(t)||(t._d=null),t))}function Lq(t){var e=t._i;Ms(e)?t._d=new Date(Ae.now()):Md(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Dq(t):Ni(e)?(t._a=ED(e.slice(0),function(n){return parseInt(n,10)}),rb(t)):$o(e)?Rq(t):Ia(e)?t._d=new Date(e):Ae.createFromInputFallback(t)}function eC(t,e,n,s,a){var o={};return(e===!0||e===!1)&&(s=e,e=void 0),(n===!0||n===!1)&&(s=n,n=void 0),($o(t)&&W0(t)||Ni(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=a,o._l=n,o._i=t,o._f=e,o._strict=s,Pq(o)}function rn(t,e,n,s){return eC(t,e,n,s,!1)}var zq=li("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=rn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:$p()}),Bq=li("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=rn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:$p()});function tC(t,e){var n,s;if(e.length===1&&Ni(e[0])&&(e=e[0]),!e.length)return rn();for(n=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](n))&&(n=e[s]);return n}function Vq(){var t=[].slice.call(arguments,0);return tC("isBefore",t)}function Fq(){var t=[].slice.call(arguments,0);return tC("isAfter",t)}var Hq=function(){return Date.now?Date.now():+new Date},Cu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Uq(t){var e,n=!1,s,a=Cu.length;for(e in t)if(Rt(t,e)&&!(Mn.call(Cu,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<a;++s)if(t[Cu[s]]){if(n)return!1;parseFloat(t[Cu[s]])!==kt(t[Cu[s]])&&(n=!0)}return!0}function Iq(){return this._isValid}function Yq(){return Di(NaN)}function em(t){var e=K0(t),n=e.year||0,s=e.quarter||0,a=e.month||0,o=e.week||e.isoWeek||0,l=e.day||0,d=e.hour||0,h=e.minute||0,p=e.second||0,g=e.millisecond||0;this._isValid=Uq(e),this._milliseconds=+g+p*1e3+h*6e4+d*1e3*60*60,this._days=+l+o*7,this._months=+a+s*3+n*12,this._data={},this._locale=qa(),this._bubble()}function zf(t){return t instanceof em}function gv(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Wq(t,e,n){var s=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0,l;for(l=0;l<s;l++)kt(t[l])!==kt(e[l])&&o++;return o+a}function nC(t,e){Ge(t,0,0,function(){var n=this.utcOffset(),s="+";return n<0&&(n=-n,s="-"),s+Ji(~~(n/60),2)+e+Ji(~~n%60,2)})}nC("Z",":");nC("ZZ","");Fe("Z",Zp);Fe("ZZ",Zp);Gt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=lb(Zp,t)});var $q=/([\+\-]|\d\d)/gi;function lb(t,e){var n=(e||"").match(t),s,a,o;return n===null?null:(s=n[n.length-1]||[],a=(s+"").match($q)||["-",0,0],o=+(a[1]*60)+kt(a[2]),o===0?0:a[0]==="+"?o:-o)}function cb(t,e){var n,s;return e._isUTC?(n=e.clone(),s=(Mi(t)||Md(t)?t.valueOf():rn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),Ae.updateOffset(n,!1),n):rn(t).local()}function xv(t){return-Math.round(t._d.getTimezoneOffset())}Ae.updateOffset=function(){};function qq(t,e,n){var s=this._offset||0,a;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=lb(Zp,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(a=xv(this)),this._offset=t,this._isUTC=!0,a!=null&&this.add(a,"m"),s!==t&&(!e||this._changeInProgress?aC(this,Di(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Ae.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:xv(this)}function Gq(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Xq(t){return this.utcOffset(0,t)}function Kq(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(xv(this),"m")),this}function Zq(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=lb(g$,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Qq(t){return this.isValid()?(t=t?rn(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Jq(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function eG(){if(!Ms(this._isDSTShifted))return this._isDSTShifted;var t={},e;return q0(t,this),t=JD(t),t._a?(e=t._isUTC?ea(t._a):rn(t._a),this._isDSTShifted=this.isValid()&&Wq(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function tG(){return this.isValid()?!this._isUTC:!1}function nG(){return this.isValid()?this._isUTC:!1}function sC(){return this.isValid()?this._isUTC&&this._offset===0:!1}var sG=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,iG=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Di(t,e){var n=t,s=null,a,o,l;return zf(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Ia(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(s=sG.exec(t))?(a=s[1]==="-"?-1:1,n={y:0,d:kt(s[Wi])*a,h:kt(s[Bn])*a,m:kt(s[ki])*a,s:kt(s[La])*a,ms:kt(gv(s[Uo]*1e3))*a}):(s=iG.exec(t))?(a=s[1]==="-"?-1:1,n={y:Ao(s[2],a),M:Ao(s[3],a),w:Ao(s[4],a),d:Ao(s[5],a),h:Ao(s[6],a),m:Ao(s[7],a),s:Ao(s[8],a)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(l=aG(rn(n.from),rn(n.to)),n={},n.ms=l.milliseconds,n.M=l.months),o=new em(n),zf(t)&&Rt(t,"_locale")&&(o._locale=t._locale),zf(t)&&Rt(t,"_isValid")&&(o._isValid=t._isValid),o}Di.fn=em.prototype;Di.invalid=Yq;function Ao(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function kT(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function aG(t,e){var n;return t.isValid()&&e.isValid()?(e=cb(e,t),t.isBefore(e)?n=kT(t,e):(n=kT(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function iC(t,e){return function(n,s){var a,o;return s!==null&&!isNaN(+s)&&(OD(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=s,s=o),a=Di(n,s),aC(this,a,t),this}}function aC(t,e,n,s){var a=e._milliseconds,o=gv(e._days),l=gv(e._months);t.isValid()&&(s=s??!0,l&&ID(t,hd(t,"Month")+l*n),o&&FD(t,"Date",hd(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),s&&Ae.updateOffset(t,o||l))}var rG=iC(1,"add"),oG=iC(-1,"subtract");function rC(t){return typeof t=="string"||t instanceof String}function lG(t){return Mi(t)||Md(t)||rC(t)||Ia(t)||uG(t)||cG(t)||t===null||t===void 0}function cG(t){var e=$o(t)&&!W0(t),n=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,o,l=s.length;for(a=0;a<l;a+=1)o=s[a],n=n||Rt(t,o);return e&&n}function uG(t){var e=Ni(t),n=!1;return e&&(n=t.filter(function(s){return!Ia(s)&&rC(t)}).length===0),e&&n}function dG(t){var e=$o(t)&&!W0(t),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,o;for(a=0;a<s.length;a+=1)o=s[a],n=n||Rt(t,o);return e&&n}function hG(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function fG(t,e){arguments.length===1&&(arguments[0]?lG(arguments[0])?(t=arguments[0],e=void 0):dG(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||rn(),s=cb(n,this).startOf("day"),a=Ae.calendarFormat(this,s)||"sameElse",o=e&&(ta(e[a])?e[a].call(this,n):e[a]);return this.format(o||this.localeData().calendar(a,this,rn(n)))}function pG(){return new Dd(this)}function mG(t,e){var n=Mi(t)?t:rn(t);return this.isValid()&&n.isValid()?(e=ci(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function gG(t,e){var n=Mi(t)?t:rn(t);return this.isValid()&&n.isValid()?(e=ci(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function xG(t,e,n,s){var a=Mi(t)?t:rn(t),o=Mi(e)?e:rn(e);return this.isValid()&&a.isValid()&&o.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(a,n):!this.isBefore(a,n))&&(s[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function yG(t,e){var n=Mi(t)?t:rn(t),s;return this.isValid()&&n.isValid()?(e=ci(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function vG(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function bG(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function _G(t,e,n){var s,a,o;if(!this.isValid())return NaN;if(s=cb(t,this),!s.isValid())return NaN;switch(a=(s.utcOffset()-this.utcOffset())*6e4,e=ci(e),e){case"year":o=Bf(this,s)/12;break;case"month":o=Bf(this,s);break;case"quarter":o=Bf(this,s)/3;break;case"second":o=(this-s)/1e3;break;case"minute":o=(this-s)/6e4;break;case"hour":o=(this-s)/36e5;break;case"day":o=(this-s-a)/864e5;break;case"week":o=(this-s-a)/6048e5;break;default:o=this-s}return n?o:ri(o)}function Bf(t,e){if(t.date()<e.date())return-Bf(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(n,"months"),a,o;return e-s<0?(a=t.clone().add(n-1,"months"),o=(e-s)/(s-a)):(a=t.clone().add(n+1,"months"),o=(e-s)/(a-s)),-(n+o)||0}Ae.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Ae.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function wG(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function SG(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?Lf(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ta(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Lf(n,"Z")):Lf(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function jG(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,s,a,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+s+a+o)}function TG(t){t||(t=this.isUtc()?Ae.defaultFormatUtc:Ae.defaultFormat);var e=Lf(this,t);return this.localeData().postformat(e)}function kG(t,e){return this.isValid()&&(Mi(t)&&t.isValid()||rn(t).isValid())?Di({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function NG(t){return this.from(rn(),t)}function MG(t,e){return this.isValid()&&(Mi(t)&&t.isValid()||rn(t).isValid())?Di({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function DG(t){return this.to(rn(),t)}function oC(t){var e;return t===void 0?this._locale._abbr:(e=qa(t),e!=null&&(this._locale=e),this)}var lC=li("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function cC(){return this._locale}var mp=1e3,ql=60*mp,gp=60*ql,uC=(365*400+97)*24*gp;function Gl(t,e){return(t%e+e)%e}function dC(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-uC:new Date(t,e,n).valueOf()}function hC(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-uC:Date.UTC(t,e,n)}function CG(t){var e,n;if(t=ci(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?hC:dC,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Gl(e+(this._isUTC?0:this.utcOffset()*ql),gp);break;case"minute":e=this._d.valueOf(),e-=Gl(e,ql);break;case"second":e=this._d.valueOf(),e-=Gl(e,mp);break}return this._d.setTime(e),Ae.updateOffset(this,!0),this}function EG(t){var e,n;if(t=ci(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?hC:dC,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=gp-Gl(e+(this._isUTC?0:this.utcOffset()*ql),gp)-1;break;case"minute":e=this._d.valueOf(),e+=ql-Gl(e,ql)-1;break;case"second":e=this._d.valueOf(),e+=mp-Gl(e,mp)-1;break}return this._d.setTime(e),Ae.updateOffset(this,!0),this}function AG(){return this._d.valueOf()-(this._offset||0)*6e4}function OG(){return Math.floor(this.valueOf()/1e3)}function RG(){return new Date(this.valueOf())}function PG(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function LG(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function zG(){return this.isValid()?this.toISOString():null}function BG(){return $0(this)}function VG(){return Hr({},ht(this))}function FG(){return ht(this).overflow}function HG(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Ge("N",0,0,"eraAbbr");Ge("NN",0,0,"eraAbbr");Ge("NNN",0,0,"eraAbbr");Ge("NNNN",0,0,"eraName");Ge("NNNNN",0,0,"eraNarrow");Ge("y",["y",1],"yo","eraYear");Ge("y",["yy",2],0,"eraYear");Ge("y",["yyy",3],0,"eraYear");Ge("y",["yyyy",4],0,"eraYear");Fe("N",ub);Fe("NN",ub);Fe("NNN",ub);Fe("NNNN",QG);Fe("NNNNN",JG);Gt(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,s){var a=n._locale.erasParse(t,s,n._strict);a?ht(n).era=a:ht(n).invalidEra=t});Fe("y",gc);Fe("yy",gc);Fe("yyy",gc);Fe("yyyy",gc);Fe("yo",eX);Gt(["y","yy","yyy","yyyy"],os);Gt(["yo"],function(t,e,n,s){var a;n._locale._eraYearOrdinalRegex&&(a=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[os]=n._locale.eraYearOrdinalParse(t,a):e[os]=parseInt(t,10)});function UG(t,e){var n,s,a,o=this._eras||qa("en")._eras;for(n=0,s=o.length;n<s;++n)switch(typeof o[n].since==="string"&&(a=Ae(o[n].since).startOf("day"),o[n].since=a.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=Ae(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf();break}return o}function IG(t,e,n){var s,a,o=this.eras(),l,d,h;for(t=t.toUpperCase(),s=0,a=o.length;s<a;++s)if(l=o[s].name.toUpperCase(),d=o[s].abbr.toUpperCase(),h=o[s].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(d===t)return o[s];break;case"NNNN":if(l===t)return o[s];break;case"NNNNN":if(h===t)return o[s];break}else if([l,d,h].indexOf(t)>=0)return o[s]}function YG(t,e){var n=t.since<=t.until?1:-1;return e===void 0?Ae(t.since).year():Ae(t.since).year()+(e-t.offset)*n}function WG(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].name;return""}function $G(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].narrow;return""}function qG(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].abbr;return""}function GG(){var t,e,n,s,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t)if(n=a[t].since<=a[t].until?1:-1,s=this.clone().startOf("day").valueOf(),a[t].since<=s&&s<=a[t].until||a[t].until<=s&&s<=a[t].since)return(this.year()-Ae(a[t].since).year())*n+a[t].offset;return this.year()}function XG(t){return Rt(this,"_erasNameRegex")||db.call(this),t?this._erasNameRegex:this._erasRegex}function KG(t){return Rt(this,"_erasAbbrRegex")||db.call(this),t?this._erasAbbrRegex:this._erasRegex}function ZG(t){return Rt(this,"_erasNarrowRegex")||db.call(this),t?this._erasNarrowRegex:this._erasRegex}function ub(t,e){return e.erasAbbrRegex(t)}function QG(t,e){return e.erasNameRegex(t)}function JG(t,e){return e.erasNarrowRegex(t)}function eX(t,e){return e._eraYearOrdinalRegex||gc}function db(){var t=[],e=[],n=[],s=[],a,o,l,d,h,p=this.eras();for(a=0,o=p.length;a<o;++a)l=Va(p[a].name),d=Va(p[a].abbr),h=Va(p[a].narrow),e.push(l),t.push(d),n.push(h),s.push(l),s.push(d),s.push(h);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Ge(0,["gg",2],0,function(){return this.weekYear()%100});Ge(0,["GG",2],0,function(){return this.isoWeekYear()%100});function tm(t,e){Ge(0,[t,t.length],0,e)}tm("gggg","weekYear");tm("ggggg","weekYear");tm("GGGG","isoWeekYear");tm("GGGGG","isoWeekYear");Fe("G",Kp);Fe("g",Kp);Fe("GG",on,Us);Fe("gg",on,Us);Fe("GGGG",Q0,Z0);Fe("gggg",Q0,Z0);Fe("GGGGG",Xp,qp);Fe("ggggg",Xp,qp);Ed(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,s){e[s.substr(0,2)]=kt(t)});Ed(["gg","GG"],function(t,e,n,s){e[s]=Ae.parseTwoDigitYear(t)});function tX(t){return fC.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function nX(t){return fC.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function sX(){return Fa(this.year(),1,4)}function iX(){return Fa(this.isoWeekYear(),1,4)}function aX(){var t=this.localeData()._week;return Fa(this.year(),t.dow,t.doy)}function rX(){var t=this.localeData()._week;return Fa(this.weekYear(),t.dow,t.doy)}function fC(t,e,n,s,a){var o;return t==null?pd(this,s,a).year:(o=Fa(t,s,a),e>o&&(e=o),oX.call(this,t,e,n,s,a))}function oX(t,e,n,s,a){var o=$D(t,e,n,s,a),l=fd(o.year,0,o.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}Ge("Q",0,"Qo","quarter");Fe("Q",PD);Gt("Q",function(t,e){e[Pa]=(kt(t)-1)*3});function lX(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Ge("D",["DD",2],"Do","date");Fe("D",on,xc);Fe("DD",on,Us);Fe("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Gt(["D","DD"],Wi);Gt("Do",function(t,e){e[Wi]=kt(t.match(on)[0])});var pC=yc("Date",!0);Ge("DDD",["DDDD",3],"DDDo","dayOfYear");Fe("DDD",Gp);Fe("DDDD",LD);Gt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=kt(t)});function cX(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Ge("m",["mm",2],0,"minute");Fe("m",on,J0);Fe("mm",on,Us);Gt(["m","mm"],ki);var uX=yc("Minutes",!1);Ge("s",["ss",2],0,"second");Fe("s",on,J0);Fe("ss",on,Us);Gt(["s","ss"],La);var dX=yc("Seconds",!1);Ge("S",0,0,function(){return~~(this.millisecond()/100)});Ge(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Ge(0,["SSS",3],0,"millisecond");Ge(0,["SSSS",4],0,function(){return this.millisecond()*10});Ge(0,["SSSSS",5],0,function(){return this.millisecond()*100});Ge(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Ge(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Ge(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Ge(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Fe("S",Gp,PD);Fe("SS",Gp,Us);Fe("SSS",Gp,LD);var Ur,mC;for(Ur="SSSS";Ur.length<=9;Ur+="S")Fe(Ur,gc);function hX(t,e){e[Uo]=kt(("0."+t)*1e3)}for(Ur="S";Ur.length<=9;Ur+="S")Gt(Ur,hX);mC=yc("Milliseconds",!1);Ge("z",0,0,"zoneAbbr");Ge("zz",0,0,"zoneName");function fX(){return this._isUTC?"UTC":""}function pX(){return this._isUTC?"Coordinated Universal Time":""}var Ee=Dd.prototype;Ee.add=rG;Ee.calendar=fG;Ee.clone=pG;Ee.diff=_G;Ee.endOf=EG;Ee.format=TG;Ee.from=kG;Ee.fromNow=NG;Ee.to=MG;Ee.toNow=DG;Ee.get=j$;Ee.invalidAt=FG;Ee.isAfter=mG;Ee.isBefore=gG;Ee.isBetween=xG;Ee.isSame=yG;Ee.isSameOrAfter=vG;Ee.isSameOrBefore=bG;Ee.isValid=BG;Ee.lang=lC;Ee.locale=oC;Ee.localeData=cC;Ee.max=Bq;Ee.min=zq;Ee.parsingFlags=VG;Ee.set=T$;Ee.startOf=CG;Ee.subtract=oG;Ee.toArray=PG;Ee.toObject=LG;Ee.toDate=RG;Ee.toISOString=SG;Ee.inspect=jG;typeof Symbol<"u"&&Symbol.for!=null&&(Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Ee.toJSON=zG;Ee.toString=wG;Ee.unix=OG;Ee.valueOf=AG;Ee.creationData=HG;Ee.eraName=WG;Ee.eraNarrow=$G;Ee.eraAbbr=qG;Ee.eraYear=GG;Ee.year=VD;Ee.isLeapYear=S$;Ee.weekYear=tX;Ee.isoWeekYear=nX;Ee.quarter=Ee.quarters=lX;Ee.month=YD;Ee.daysInMonth=R$;Ee.week=Ee.weeks=U$;Ee.isoWeek=Ee.isoWeeks=I$;Ee.weeksInYear=aX;Ee.weeksInWeekYear=rX;Ee.isoWeeksInYear=sX;Ee.isoWeeksInISOWeekYear=iX;Ee.date=pC;Ee.day=Ee.days=nq;Ee.weekday=sq;Ee.isoWeekday=iq;Ee.dayOfYear=cX;Ee.hour=Ee.hours=dq;Ee.minute=Ee.minutes=uX;Ee.second=Ee.seconds=dX;Ee.millisecond=Ee.milliseconds=mC;Ee.utcOffset=qq;Ee.utc=Xq;Ee.local=Kq;Ee.parseZone=Zq;Ee.hasAlignedHourOffset=Qq;Ee.isDST=Jq;Ee.isLocal=tG;Ee.isUtcOffset=nG;Ee.isUtc=sC;Ee.isUTC=sC;Ee.zoneAbbr=fX;Ee.zoneName=pX;Ee.dates=li("dates accessor is deprecated. Use date instead.",pC);Ee.months=li("months accessor is deprecated. Use month instead",YD);Ee.years=li("years accessor is deprecated. Use year instead",VD);Ee.zone=li("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Gq);Ee.isDSTShifted=li("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",eG);function mX(t){return rn(t*1e3)}function gX(){return rn.apply(null,arguments).parseZone()}function gC(t){return t}var Pt=G0.prototype;Pt.calendar=t$;Pt.longDateFormat=a$;Pt.invalidDate=o$;Pt.ordinal=u$;Pt.preparse=gC;Pt.postformat=gC;Pt.relativeTime=h$;Pt.pastFuture=f$;Pt.set=JW;Pt.eras=UG;Pt.erasParse=IG;Pt.erasConvertYear=YG;Pt.erasAbbrRegex=KG;Pt.erasNameRegex=XG;Pt.erasNarrowRegex=ZG;Pt.months=C$;Pt.monthsShort=E$;Pt.monthsParse=O$;Pt.monthsRegex=L$;Pt.monthsShortRegex=P$;Pt.week=B$;Pt.firstDayOfYear=H$;Pt.firstDayOfWeek=F$;Pt.weekdays=Z$;Pt.weekdaysMin=J$;Pt.weekdaysShort=Q$;Pt.weekdaysParse=tq;Pt.weekdaysRegex=aq;Pt.weekdaysShortRegex=rq;Pt.weekdaysMinRegex=oq;Pt.isPM=cq;Pt.meridiem=hq;function xp(t,e,n,s){var a=qa(),o=ea().set(s,e);return a[n](o,t)}function xC(t,e,n){if(Ia(t)&&(e=t,t=void 0),t=t||"",e!=null)return xp(t,e,n,"month");var s,a=[];for(s=0;s<12;s++)a[s]=xp(t,s,n,"month");return a}function hb(t,e,n,s){typeof t=="boolean"?(Ia(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Ia(e)&&(n=e,e=void 0),e=e||"");var a=qa(),o=t?a._week.dow:0,l,d=[];if(n!=null)return xp(e,(n+o)%7,s,"day");for(l=0;l<7;l++)d[l]=xp(e,(l+o)%7,s,"day");return d}function xX(t,e){return xC(t,e,"months")}function yX(t,e){return xC(t,e,"monthsShort")}function vX(t,e,n){return hb(t,e,n,"weekdays")}function bX(t,e,n){return hb(t,e,n,"weekdaysShort")}function _X(t,e,n){return hb(t,e,n,"weekdaysMin")}$r("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=kt(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});Ae.lang=li("moment.lang is deprecated. Use moment.locale instead.",$r);Ae.langData=li("moment.langData is deprecated. Use moment.localeData instead.",qa);var Na=Math.abs;function wX(){var t=this._data;return this._milliseconds=Na(this._milliseconds),this._days=Na(this._days),this._months=Na(this._months),t.milliseconds=Na(t.milliseconds),t.seconds=Na(t.seconds),t.minutes=Na(t.minutes),t.hours=Na(t.hours),t.months=Na(t.months),t.years=Na(t.years),this}function yC(t,e,n,s){var a=Di(e,n);return t._milliseconds+=s*a._milliseconds,t._days+=s*a._days,t._months+=s*a._months,t._bubble()}function SX(t,e){return yC(this,t,e,1)}function jX(t,e){return yC(this,t,e,-1)}function NT(t){return t<0?Math.floor(t):Math.ceil(t)}function TX(){var t=this._milliseconds,e=this._days,n=this._months,s=this._data,a,o,l,d,h;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=NT(yv(n)+e)*864e5,e=0,n=0),s.milliseconds=t%1e3,a=ri(t/1e3),s.seconds=a%60,o=ri(a/60),s.minutes=o%60,l=ri(o/60),s.hours=l%24,e+=ri(l/24),h=ri(vC(e)),n+=h,e-=NT(yv(h)),d=ri(n/12),n%=12,s.days=e,s.months=n,s.years=d,this}function vC(t){return t*4800/146097}function yv(t){return t*146097/4800}function kX(t){if(!this.isValid())return NaN;var e,n,s=this._milliseconds;if(t=ci(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,n=this._months+vC(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(yv(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function Ga(t){return function(){return this.as(t)}}var bC=Ga("ms"),NX=Ga("s"),MX=Ga("m"),DX=Ga("h"),CX=Ga("d"),EX=Ga("w"),AX=Ga("M"),OX=Ga("Q"),RX=Ga("y"),PX=bC;function LX(){return Di(this)}function zX(t){return t=ci(t),this.isValid()?this[t+"s"]():NaN}function Jo(t){return function(){return this.isValid()?this._data[t]:NaN}}var BX=Jo("milliseconds"),VX=Jo("seconds"),FX=Jo("minutes"),HX=Jo("hours"),UX=Jo("days"),IX=Jo("months"),YX=Jo("years");function WX(){return ri(this.days()/7)}var Ca=Math.round,Il={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function $X(t,e,n,s,a){return a.relativeTime(e||1,!!n,t,s)}function qX(t,e,n,s){var a=Di(t).abs(),o=Ca(a.as("s")),l=Ca(a.as("m")),d=Ca(a.as("h")),h=Ca(a.as("d")),p=Ca(a.as("M")),g=Ca(a.as("w")),y=Ca(a.as("y")),_=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||l<=1&&["m"]||l<n.m&&["mm",l]||d<=1&&["h"]||d<n.h&&["hh",d]||h<=1&&["d"]||h<n.d&&["dd",h];return n.w!=null&&(_=_||g<=1&&["w"]||g<n.w&&["ww",g]),_=_||p<=1&&["M"]||p<n.M&&["MM",p]||y<=1&&["y"]||["yy",y],_[2]=e,_[3]=+t>0,_[4]=s,$X.apply(null,_)}function GX(t){return t===void 0?Ca:typeof t=="function"?(Ca=t,!0):!1}function XX(t,e){return Il[t]===void 0?!1:e===void 0?Il[t]:(Il[t]=e,t==="s"&&(Il.ss=e-1),!0)}function KX(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=Il,a,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(s=Object.assign({},Il,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),a=this.localeData(),o=qX(this,!n,s,a),n&&(o=a.pastFuture(+this,o)),a.postformat(o)}var dy=Math.abs;function Rl(t){return(t>0)-(t<0)||+t}function nm(){if(!this.isValid())return this.localeData().invalidDate();var t=dy(this._milliseconds)/1e3,e=dy(this._days),n=dy(this._months),s,a,o,l,d=this.asSeconds(),h,p,g,y;return d?(s=ri(t/60),a=ri(s/60),t%=60,s%=60,o=ri(n/12),n%=12,l=t?t.toFixed(3).replace(/\.?0+$/,""):"",h=d<0?"-":"",p=Rl(this._months)!==Rl(d)?"-":"",g=Rl(this._days)!==Rl(d)?"-":"",y=Rl(this._milliseconds)!==Rl(d)?"-":"",h+"P"+(o?p+o+"Y":"")+(n?p+n+"M":"")+(e?g+e+"D":"")+(a||s||t?"T":"")+(a?y+a+"H":"")+(s?y+s+"M":"")+(t?y+l+"S":"")):"P0D"}var Mt=em.prototype;Mt.isValid=Iq;Mt.abs=wX;Mt.add=SX;Mt.subtract=jX;Mt.as=kX;Mt.asMilliseconds=bC;Mt.asSeconds=NX;Mt.asMinutes=MX;Mt.asHours=DX;Mt.asDays=CX;Mt.asWeeks=EX;Mt.asMonths=AX;Mt.asQuarters=OX;Mt.asYears=RX;Mt.valueOf=PX;Mt._bubble=TX;Mt.clone=LX;Mt.get=zX;Mt.milliseconds=BX;Mt.seconds=VX;Mt.minutes=FX;Mt.hours=HX;Mt.days=UX;Mt.weeks=WX;Mt.months=IX;Mt.years=YX;Mt.humanize=KX;Mt.toISOString=nm;Mt.toString=nm;Mt.toJSON=nm;Mt.locale=oC;Mt.localeData=cC;Mt.toIsoString=li("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nm);Mt.lang=lC;Ge("X",0,0,"unix");Ge("x",0,0,"valueOf");Fe("x",Kp);Fe("X",x$);Gt("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Gt("x",function(t,e,n){n._d=new Date(kt(t))});Ae.version="2.30.1";ZW(rn);Ae.fn=Ee;Ae.min=Vq;Ae.max=Fq;Ae.now=Hq;Ae.utc=ea;Ae.unix=mX;Ae.months=xX;Ae.isDate=Md;Ae.locale=$r;Ae.invalid=$p;Ae.duration=Di;Ae.isMoment=Mi;Ae.weekdays=vX;Ae.parseZone=gX;Ae.localeData=qa;Ae.isDuration=zf;Ae.monthsShort=yX;Ae.weekdaysMin=_X;Ae.defineLocale=ib;Ae.updateLocale=gq;Ae.locales=xq;Ae.weekdaysShort=bX;Ae.normalizeUnits=ci;Ae.relativeTimeRounding=GX;Ae.relativeTimeThreshold=XX;Ae.calendarFormat=hG;Ae.prototype=Ee;Ae.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const ZX={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Ak._date.override(typeof Ae=="function"?{_id:"moment",formats:function(){return ZX},parse:function(t,e){return typeof t=="string"&&typeof e=="string"?t=Ae(t,e):t instanceof Ae||(t=Ae(t)),t.isValid()?t.valueOf():null},format:function(t,e){return Ae(t).format(e)},add:function(t,e,n){return Ae(t).add(e,n).valueOf()},diff:function(t,e,n){return Ae(t).diff(Ae(e),n)},startOf:function(t,e,n){return t=Ae(t),e==="isoWeek"?(n=Math.trunc(Math.min(Math.max(0,n),6)),t.isoWeekday(n).startOf("day").valueOf()):t.startOf(e).valueOf()},endOf:function(t,e){return Ae(t).endOf(e).valueOf()}}:{});oi.register(vd,bd,ic,Wa,Yv,Dp,rc,ac,Zf);function QX(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState(""),[l,d]=A.useState(null),[h,p]=A.useState(!1),[g,y]=A.useState(!1),[_,j]=A.useState(3),[k,N]=A.useState(!1),[D,R]=A.useState(!1),[E,B]=A.useState("load"),[U,$]=A.useState("forecast"),[I,O]=A.useState(""),q=A.useRef(null),[J,oe]=A.useState(!1),[ie,me]=A.useState(!1),[le,Z]=A.useState(!1),[re,H]=A.useState(!1),[X,ne]=A.useState(!1),[ae,xe]=A.useState(!1),[V,ee]=A.useState(null),[pe,F]=A.useState(!0),de=async()=>{p(!0);try{const ze=await Me.aurora.dashboard();e(ze);const wt=ze.state?.risk_profile?.risk_appetite;typeof wt=="number"&&j(wt),oe(!!ze.state?.auto_tune_enabled),Z(!!ze.state?.reflex_enabled),ne(ze.state?.risk_profile?.mode==="probabilistic")}catch(ze){console.error("Failed to load Aurora dashboard:",ze)}finally{p(!1)}};A.useEffect(()=>{de(),(async()=>{try{const wt=await Me.schedulerStatus();s(wt)}catch(wt){console.error("Failed to load scheduler status:",wt)}})()},[]),A.useEffect(()=>{(async()=>{try{const wt=await Me.performanceData(7);ee(wt)}catch(wt){console.error("Failed to load performance data:",wt)}finally{F(!1)}})()},[]);const Se=async()=>{if(t){y(!0);try{const ze=await Me.aurora.briefing(t);o(ze.briefing),d(new Date().toISOString())}catch(ze){console.error("Failed to fetch Aurora briefing:",ze),o("Failed to fetch Aurora briefing.")}finally{y(!1)}}},Ie=async ze=>{j(ze),N(!0);try{await Me.configSave({s_index:{risk_appetite:ze}}),q.current!==null&&window.clearTimeout(q.current),O("Saved."),q.current=window.setTimeout(()=>{O(""),q.current=null},2e3)}catch(wt){console.error("Failed to save risk level (risk_appetite):",wt),O("Failed to save.")}finally{N(!1)}},tt=async()=>{const ze=!J;oe(ze),me(!0);try{await Me.configSave({learning:{auto_tune_enabled:ze}})}catch(wt){console.error("Failed to toggle auto-tune:",wt),oe(!ze)}finally{me(!1)}},Te=async()=>{const ze=!le;Z(ze),H(!0);try{await Me.aurora.toggleReflex(ze)}catch(wt){console.error("Failed to toggle reflex:",wt),Z(!ze)}finally{H(!1)}},ft=async()=>{const ze=!X;ne(ze),xe(!0);try{await Me.configSave({s_index:{mode:ze?"probabilistic":"dynamic"}})}catch(wt){console.error("Failed to toggle probabilistic mode:",wt),ne(!ze)}finally{xe(!1)}};A.useMemo(()=>{const ze=t?.state?.risk_profile?.persona;return ze||"Unknown"},[t]);const xt=t?.identity?.graduation?.label??"infant";t?.identity?.graduation?.runs;const _t=t?.state?.weather_volatility,Bt=_t?.overall??0,Dt=Bt<.3?"bg-emerald-400/90":Bt<.7?"bg-sky-400/90":"bg-amber-400/90",st=Bt<.3?"from-emerald-900/60 via-surface to-surface":Bt<.7?"from-sky-900/60 via-surface to-surface":"from-amber-900/60 via-surface to-surface",ln=t?.horizon?.slots??[],Yn=t?.horizon?.end??new Date().toISOString(),Sn=t?.history?.strategy_events??[],cs=A.useMemo(()=>V?{datasets:[{label:"Planned",data:V.soc_series.map(ze=>({x:ze.time,y:ze.planned})),borderColor:"#94a3b8",borderDash:[5,5],borderWidth:1.5,pointRadius:0,tension:.4},{label:"Actual",data:V.soc_series.map(ze=>({x:ze.time,y:ze.actual})),borderColor:"#60a5fa",backgroundColor:"rgba(96, 165, 250, 0.1)",borderWidth:1.5,pointRadius:0,fill:!0,tension:.4}]}:null,[V]),Wn=A.useMemo(()=>V?{labels:V.cost_series.map(ze=>ze.date.slice(5)),datasets:[{label:"Plan",data:V.cost_series.map(ze=>ze.planned),backgroundColor:"#94a3b8",borderRadius:2},{label:"Real",data:V.cost_series.map(ze=>ze.realized),backgroundColor:V.cost_series.map(ze=>ze.realized<=ze.planned?"#34d399":"#f87171"),borderRadius:2}]}:null,[V]);return u.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[u.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-lg font-medium text-text flex items-center gap-2",children:["Aurora Command Center",u.jsx("span",{className:"px-2 py-0.5 rounded-full bg-surface2 border border-line/50 text-[10px] text-muted uppercase tracking-wider",children:xt})]}),u.jsx("p",{className:"text-[11px] text-muted",children:"The Mastermind. Observing context, managing risk, and learning from reality."})]})}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[u.jsx(Xe,{className:`lg:col-span-6 p-4 md:p-5 bg-gradient-to-br ${st} relative overflow-hidden`,children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row gap-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative flex items-center justify-center",children:[u.jsx("div",{className:`absolute h-16 w-16 rounded-full ${Dt} opacity-30 animate-pulse`}),u.jsx("div",{className:"relative flex items-center justify-center w-14 h-14 rounded-full bg-surface/90 border border-line/80 shadow-float ring-2 ring-accent/20",children:u.jsx(yy,{className:"h-8 w-8 text-accent drop-shadow-[0_0_12px_rgba(56,189,248,0.75)]"})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-semibold text-text uppercase tracking-wide",children:"Status"}),u.jsx("div",{className:"text-lg font-medium text-text",children:Bt>.6?"Defensive Mode":Bt>.3?"Cautious Mode":"Optimal Mode"}),u.jsxs("div",{className:"text-[11px] text-muted flex items-center gap-2",children:[u.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${Bt>.6?"bg-amber-400":"bg-emerald-400"}`}),Bt>.6?"High Volatility Detected":"Conditions Stable"]})]})]}),u.jsxs("div",{className:"flex-1 bg-surface/40 rounded-xl p-3 border border-white/5 backdrop-blur-sm",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-text font-medium",children:[u.jsx(GT,{className:"h-3 w-3 text-accent"}),"Daily Briefing"]}),u.jsx("button",{onClick:Se,disabled:!t||g,className:"text-[10px] text-muted hover:text-accent disabled:opacity-50 transition-colors",children:g?"Thinking...":"Refresh"})]}),u.jsx("div",{className:"text-[11px] leading-relaxed text-muted/90 font-mono",children:a||"Aurora is analyzing current market and weather conditions..."})]})]})}),u.jsxs(Xe,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col justify-center",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("span",{className:"text-[10px] uppercase font-bold text-muted tracking-wider",children:"Risk Appetite"}),u.jsxs("div",{className:"flex items-center gap-2",children:[t?.state?.risk_profile?.raw_factor!=null&&(t.state.risk_profile.raw_factor??0)>0&&u.jsxs("span",{className:"text-[9px] text-muted/60",title:"Calculated based on risk",children:["Calc: ",(t.state.risk_profile.raw_factor??0).toFixed(2)]}),u.jsxs("span",{className:"text-[9px] text-muted",title:"Proected factor for next run",children:["Applied: ",(t?.state?.risk_profile?.current_factor??1).toFixed(2)]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1 p-1 bg-surface2/50 rounded-lg border border-line/30",children:[1,2,3,4,5].map(ze=>{const wt=_===ze;let fn="bg-surface border-line text-text shadow-sm";return wt&&(ze===1?fn="bg-emerald-500/20 border-emerald-500/50 text-emerald-100 shadow-[0_0_10px_rgba(16,185,129,0.2)]":ze===2?fn="bg-teal-500/20 border-teal-500/50 text-teal-100":ze===3?fn="bg-blue-500/20 border-blue-500/50 text-blue-100":ze===4?fn="bg-amber-500/20 border-amber-500/50 text-amber-100":ze===5&&(fn="bg-red-500/20 border-red-500/50 text-red-100 shadow-[0_0_10px_rgba(239,68,68,0.2)]")),u.jsx("button",{onClick:()=>Ie(ze),className:`
                       relative flex items-center justify-center h-9 rounded-md text-[10px] font-medium transition-all duration-200
                       border border-transparent
                       ${wt?fn:"text-muted hover:bg-surface/50 hover:text-text"}
                     `,children:ze},ze)})}),u.jsxs("div",{className:"text-center h-8 flex flex-col justify-center",children:[u.jsx("span",{className:`text-[11px] font-medium transition-colors duration-300 ${_===1?"text-emerald-400":_===2?"text-teal-400":_===3?"text-blue-400":_===4?"text-amber-400":"text-red-400"}`,children:{1:"Safety First",2:"Conservative",3:"Neutral (Balanced)",4:"Aggressive",5:"Gambler"}[_]}),u.jsx("span",{className:"text-[9px] text-muted/70",children:{1:"Covers Worst Case (p90)",2:"Covers High Load (p75)",3:"Trusts the Mean (p50)",4:"Expects Lower Load",5:"Bets on Sun/Empty"}[_]})]})]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-line/30 flex flex-col items-center gap-2",children:[u.jsx("button",{onClick:async()=>{R(!0);try{await Ie(_),await Me.runPlanner(),await de()}finally{R(!1)}},disabled:D,className:`flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface hover:bg-surface2 border border-line/50 text-[10px] transition-colors ${D?"opacity-70 cursor-not-allowed text-muted":"text-muted hover:text-text"}`,title:"Run Strategy Engine to update forecast based on new risk",children:D?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-3 w-3 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),u.jsx("span",{children:"Re-planning..."})]}):u.jsxs(u.Fragment,{children:[u.jsx($i,{className:"h-3 w-3 text-accent"}),u.jsx("span",{children:"Apply & Re-Plan"})]})}),D&&u.jsx("span",{className:"text-[9px] text-muted/70 animate-pulse",children:"Regenerating schedule with new risk level..."})]})]}),u.jsxs(Xe,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx($i,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Controls"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Auto-Tuner"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Allow Aurora to act"})]}),u.jsx("button",{onClick:tt,disabled:ie,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${J?"bg-accent":"bg-surface2"}`,children:u.jsx("span",{className:`${J?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Aurora Reflex"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Long-term auto-tuning"})]}),u.jsx("button",{onClick:Te,disabled:re,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${le?"bg-accent":"bg-surface2"}`,children:u.jsx("span",{className:`${le?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),u.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Probabilistic"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Use p10/p90 confidence bands"})]}),u.jsx("button",{onClick:ft,disabled:ae,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${X?"bg-accent":"bg-surface2"}`,children:u.jsx("span",{className:`${X?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),u.jsx("div",{className:"mt-auto pt-2 text-center text-[10px] text-muted",children:"More controls coming soon."})]})]}),u.jsx(KW,{metrics:t?.metrics,perfData:V}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-12 lg:h-[450px]",children:[u.jsxs(Xe,{className:"lg:col-span-4 p-4 flex flex-col h-full min-h-0 overflow-hidden",children:[u.jsx("div",{className:"mb-4 flex items-center justify-between shrink-0",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ju,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Context Radar"})]})}),u.jsx("div",{className:"flex-1 min-h-0 relative",children:u.jsx(GW,{weatherVolatility:{cloud:_t?.cloud_volatility??0,temp:_t?.temp_volatility??0,overall:Bt},riskFactor:_??3,forecastAccuracy:t?.metrics?.mae_pv_aurora!=null?Math.max(0,100-t.metrics.mae_pv_aurora*20):85,priceSpread:t?.metrics?.max_price_spread,forecastBias:t?.metrics?.forecast_bias})})]}),u.jsxs(Xe,{className:"lg:col-span-4 p-4 flex flex-col h-full min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(IT,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Activity Log"})]}),u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsxs("span",{className:"text-[10px] text-muted",children:[Sn.length," events"]}),n?.ml_training_last_run_at&&u.jsxs("span",{className:"text-[9px] text-muted/70",title:"Last ML Training Run",children:["ML Train: ",new Date(n.ml_training_last_run_at).toLocaleString("sv-SE",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),u.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto pr-2 custom-scrollbar",children:u.jsx(XW,{events:Sn})})]}),u.jsxs(Xe,{className:"lg:col-span-4 p-4 md:p-5 flex flex-col h-full min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"mb-4 shrink-0",children:[u.jsx("div",{className:"text-xs font-medium text-text",children:"Cost Reality"}),u.jsx("div",{className:"text-[11px] text-muted",children:"Daily financial outcome"})]}),u.jsx("div",{className:"flex-1 min-h-0",children:Wn&&u.jsx(IW,{data:Wn,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{color:"#94a3b8",font:{size:10}}},y:{grid:{color:"#334155"},ticks:{color:"#94a3b8"}}},plugins:{legend:{labels:{color:"#e2e8f0",font:{size:10}}}}}})})]})]}),u.jsx("div",{className:"grid gap-4 lg:grid-cols-12",children:u.jsxs(Xe,{className:"lg:col-span-12 p-4 flex flex-col h-[350px] overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3 shrink-0",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-medium text-text",children:U==="forecast"?"Forecast Horizon (48h)":"SoC Tunnel"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[U==="forecast"?X?`Probabilistic View (${E.toUpperCase()})`:`Decomposition View (${E.toUpperCase()})`:"Plan vs Reality",U==="forecast"&&u.jsxs(u.Fragment,{children:["  ",new Date().toISOString().slice(0,10)," - ",new Date(Yn).toISOString().slice(0,10)]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-line/70 bg-surface2 px-1 py-0.5 text-[11px] mr-2",children:[u.jsx("button",{className:`px-3 py-0.5 rounded-full ${U==="forecast"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>$("forecast"),children:"Forecast"}),u.jsx("button",{className:`px-3 py-0.5 rounded-full ${U==="soc"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>$("soc"),children:"SoC"})]}),U==="forecast"&&u.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-line/70 bg-surface2 px-1 py-0.5 text-[11px]",children:[u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${E==="load"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>B("load"),children:u.jsx($i,{className:"h-3 w-3"})}),u.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${E==="pv"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>B("pv"),children:u.jsx(XT,{className:"h-3 w-3"})})]})]})]}),u.jsx("div",{className:"flex-1 min-h-0",children:h?u.jsx("div",{className:"text-[11px] text-muted",children:"Loading..."}):U==="soc"?u.jsx("div",{className:"h-full w-full",children:cs&&u.jsx(Y0,{data:cs,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"}},grid:{color:"#334155",display:!1},ticks:{color:"#94a3b8",maxTicksLimit:6}},y:{min:0,max:100,grid:{color:"#334155"},ticks:{color:"#94a3b8",display:!1}}},plugins:{legend:{display:!1}}}})}):X?u.jsx("div",{className:"h-full w-full",children:u.jsx(dv,{title:"",color:E==="load"?"#f97316":"#22c55e",slots:(()=>{const ze=t?.horizon?.history_series?.[E==="load"?"load":"pv"]||[],wt=ln.map(lt=>E==="load"?{time:lt.slot_start,p10:lt.probabilistic?.load_p10??null,p50:lt.final.load_kwh,p90:lt.probabilistic?.load_p90??null,actual:null}:{time:lt.slot_start,p10:lt.probabilistic?.pv_p10??null,p50:lt.final.pv_kwh,p90:lt.probabilistic?.pv_p90??null,actual:null}),fn=new Map;ze.forEach(lt=>{fn.set(lt.slot_start,{time:lt.slot_start,p10:lt.p10??null,p50:lt.forecast??null,p90:lt.p90??null,actual:lt.actual})}),wt.forEach(lt=>{const Vn=fn.get(lt.time);Vn?fn.set(lt.time,{...Vn,p10:lt.p10,p50:lt.p50,p90:lt.p90}):fn.set(lt.time,lt)});const Ut=new Date().getTime(),Cs=1440*60*1e3;return Array.from(fn.values()).sort((lt,Vn)=>new Date(lt.time).getTime()-new Date(Vn.time).getTime()).filter(lt=>{const Vn=new Date(lt.time).getTime();return Vn>=Ut-Cs&&Vn<=Ut+Cs})})()})}):u.jsx(qW,{slots:ln,mode:E})})]})})]})}function Eu({data:t,colorClass:e="bg-accent",height:n=32,bars:s=12}){const a=A.useMemo(()=>{if(!t||t.length===0)return Array(s).fill(.2);const o=t.slice(-s),l=Math.max(...o,1),d=Math.min(...o,0),h=l-d||1;return o.map(p=>.1+.9*((p-d)/h))},[t,s]);return u.jsx("div",{className:"mini-bars",style:{height:n},children:a.map((o,l)=>u.jsx("div",{className:`mini-bar ${e}`,style:{height:`${Math.round(o*100)}%`}},l))})}const si={status:async()=>{const t=await fetch("api/executor/status");if(!t.ok)throw new Error(`Status failed: ${t.status}`);return t.json()},toggle:async t=>{const e=await fetch("api/executor/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Toggle failed: ${e.status}`);return e.json()},run:async()=>{const t=await fetch("api/executor/run",{method:"POST"});if(!t.ok)throw new Error(`Run failed: ${t.status}`);return t.json()},history:async(t=20)=>{const e=await fetch(`api/executor/history?limit=${t}`);if(!e.ok)throw new Error(`History failed: ${e.status}`);return e.json()},stats:async(t=7)=>{const e=await fetch(`api/executor/stats?days=${t}`);if(!e.ok)throw new Error(`Stats failed: ${e.status}`);return e.json()},live:async()=>{const t=await fetch("api/executor/live");if(!t.ok)throw new Error(`Live failed: ${t.status}`);return t.json()},notifications:{get:async()=>{const t=await fetch("api/executor/notifications");if(!t.ok)throw new Error(`Notifications failed: ${t.status}`);return t.json()},update:async t=>{const e=await fetch("api/executor/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Notifications update failed: ${e.status}`);return e.json()},test:async()=>{const t=await fetch("api/executor/notifications/test",{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.error||`Test failed: ${t.status}`);return e}},config:{get:async()=>{const t=await fetch("api/executor/config");if(!t.ok)throw new Error(`Config get failed: ${t.status}`);return t.json()},update:async t=>{const e=await fetch("api/executor/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Config update failed: ${e.status}`);return e.json()}},quickAction:{get:async()=>{const t=await fetch("api/executor/quick-action");if(!t.ok)throw new Error(`Quick action get failed: ${t.status}`);return t.json()},set:async(t,e)=>{const n=await fetch("api/executor/quick-action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,duration_minutes:e})});if(!n.ok)throw new Error(`Quick action set failed: ${n.status}`);return n.json()},clear:async()=>{const t=await fetch("api/executor/quick-action",{method:"DELETE"});if(!t.ok)throw new Error(`Quick action clear failed: ${t.status}`);return t.json()}}};function hy({enabled:t,onChange:e,disabled:n=!1,size:s="md"}){const a=s==="sm"?"h-5 w-9":"h-6 w-11",o=s==="sm"?"h-3 w-3":"h-4 w-4",l=s==="sm"?t?"translate-x-5":"translate-x-1":t?"translate-x-6":"translate-x-1";return u.jsx("button",{type:"button",role:"switch","aria-checked":t,disabled:n,onClick:()=>e(!t),className:`relative inline-flex items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${a} ${t?"bg-accent":"bg-surface2"} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:u.jsx("span",{className:`inline-block transform rounded-full bg-white transition-transform ${o} ${l}`})})}oi.register(vd,bd,ic,Wa,Dp,rc,ac,Mp);function JX(){const[t,e]=A.useState(null),[n,s]=A.useState(null),[a,o]=A.useState([]),[l,d]=A.useState(null),[h,p]=A.useState({soc:[],pv:[],load:[],import:[],export:[],labels:[]}),[g,y]=A.useState(!0),[_,j]=A.useState(!1),[k,N]=A.useState(!1),[D,R]=A.useState(null),[E,B]=A.useState(!1),[U,$]=A.useState(null),[I,O]=A.useState(!1),[q,J]=A.useState(!1),[oe,ie]=A.useState(null),[me,le]=A.useState(null),Z=A.useCallback(async()=>{try{const[F,de,Se]=await Promise.all([si.status(),si.stats(7),si.history(20)]);e(F),s(de),o(Se.records),R(null)}catch(F){R(F.message||"Failed to load executor data")}finally{y(!1)}},[]);Ul("live_metrics",F=>{d(de=>({...de,soc:F.soc!==void 0?{value:`${F.soc.toFixed(0)}%`,numeric:F.soc,unit:"%"}:de?.soc,pv_power:F.pv_kw!==void 0?{value:`${F.pv_kw.toFixed(1)} kW`,numeric:F.pv_kw*1e3,unit:"W"}:de?.pv_power,load_power:F.load_kw!==void 0?{value:`${F.load_kw.toFixed(1)} kW`,numeric:F.load_kw*1e3,unit:"W"}:de?.load_power,grid_import:F.grid_import_kw!==void 0?{value:`${F.grid_import_kw.toFixed(2)} kW`,numeric:F.grid_import_kw*1e3,unit:"W"}:de?.grid_import,grid_export:F.grid_export_kw!==void 0?{value:`${F.grid_export_kw.toFixed(2)} kW`,numeric:F.grid_export_kw*1e3,unit:"W"}:de?.grid_export,work_mode:F.work_mode?{value:F.work_mode}:de?.work_mode})),p(de=>{const Ie=[...de.labels,""],tt=[...de.soc,F.soc??de.soc[de.soc.length-1]??0],Te=[...de.pv,F.pv_kw??de.pv[de.pv.length-1]??0],ft=[...de.load,F.load_kw??de.load[de.load.length-1]??0],xt=[...de.import,F.grid_import_kw??de.import[de.import.length-1]??0],_t=[...de.export,F.grid_export_kw??de.export[de.export.length-1]??0];return Ie.length>20&&(Ie.shift(),tt.shift(),Te.shift(),ft.shift(),xt.shift(),_t.shift()),{labels:Ie,soc:tt,pv:Te,load:ft,import:xt,export:_t}})}),Ul("executor_status",F=>{e(F)}),A.useEffect(()=>{Z();const F=setInterval(Z,3e4);return()=>clearInterval(F)},[Z]),A.useEffect(()=>{(async()=>{try{const de=await si.live();d(de)}catch{}})()},[]),A.useEffect(()=>{(async()=>{try{const de=await si.notifications.get();$(de)}catch{}})()},[]);const re=async(F,de)=>{if(U){O(!0);try{await si.notifications.update({[F]:de}),$(Se=>Se?{...Se,[F]:de}:null)}catch(Se){R(Se.message)}finally{O(!1)}}},H=async F=>{j(!0);try{await si.toggle({enabled:F}),await Z()}catch(de){R(de.message)}finally{j(!1)}},X=async()=>{J(!0),ie(null);try{const F=await si.notifications.test();ie({success:!0,message:F.message||"Test sent!"})}catch(F){ie({success:!1,message:F.message})}finally{J(!1)}},ne=async F=>{j(!0);try{await si.toggle({shadow_mode:F}),await Z()}catch(de){R(de.message)}finally{j(!1)}},ae=async()=>{N(!0);try{await si.run(),await Z()}catch(F){R(F.message)}finally{N(!1)}},xe=F=>{if(!F)return"";try{return new Date(F).toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})}catch{return F}},V=F=>{if(!F)return"";try{return new Date(F).toLocaleString("sv-SE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return F}},ee=t?.enabled?t?.shadow_mode?"from-amber-900/60 via-surface to-surface":"from-emerald-900/60 via-surface to-surface":"from-slate-800/60 via-surface to-surface",pe=t?.enabled?t?.shadow_mode?"bg-amber-400/90":"bg-emerald-400/90":"bg-slate-500/90";return g?u.jsx("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-10 bg-surface2 rounded w-48"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[u.jsx("div",{className:"h-64 bg-surface2 rounded"}),u.jsx("div",{className:"h-64 bg-surface2 rounded lg:col-span-2"})]})]})}):u.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[u.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-lg font-medium text-text flex items-center gap-2",children:["Executor Control Center",u.jsx("span",{className:`px-2 py-0.5 rounded-full border text-[10px] uppercase tracking-wider ${t?.enabled?t?.shadow_mode?"bg-amber-500/20 border-amber-500/50 text-amber-300":"bg-emerald-500/20 border-emerald-500/50 text-emerald-300":"bg-slate-500/20 border-slate-500/50 text-slate-400"}`,children:t?.enabled?t?.shadow_mode?"Shadow":"Active":"Disabled"})]}),u.jsx("p",{className:"text-[11px] text-muted",children:"Native execution engine  controls inverter and water heater based on the schedule."})]})}),D&&u.jsxs("div",{className:"rounded-xl p-3 bg-red-500/10 border border-red-500/30 flex items-center gap-3",children:[u.jsx(vx,{className:"h-4 w-4 text-red-400"}),u.jsx("span",{className:"text-red-300 text-[11px] flex-1",children:D}),u.jsx("button",{onClick:()=>R(null),className:"text-red-400 hover:text-red-300 text-lg",children:""})]}),u.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[u.jsxs(Xe,{className:`lg:col-span-5 p-4 md:p-5 bg-gradient-to-br ${ee} relative overflow-hidden`,children:[u.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[u.jsxs("div",{className:"relative flex items-center justify-center shrink-0",children:[u.jsx("div",{className:`absolute h-14 w-14 rounded-full ${pe} opacity-30 animate-pulse`}),u.jsx("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full bg-surface/90 border border-line/80 shadow-float ring-2 ring-accent/20",children:u.jsx(vy,{className:"h-6 w-6 text-accent drop-shadow-[0_0_12px_rgba(56,189,248,0.75)]"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-xs font-semibold text-text uppercase tracking-wide",children:"Status"}),u.jsx("div",{className:"text-lg font-medium text-text",children:t?.enabled?t?.shadow_mode?"Shadow Mode":"Executing":"Standby"}),u.jsxs("div",{className:"text-[11px] text-muted flex items-center gap-2 mt-1",children:[u.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${t?.last_run_status==="success"?"bg-emerald-400":t?.last_run_status==="error"?"bg-red-400":"bg-slate-400"}`}),t?.last_run_status==="success"?"Last run successful":t?.last_run_status==="error"?"Last run failed":"No runs yet"]})]})]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10 grid grid-cols-3 gap-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Last Run"}),u.jsx("div",{className:"text-sm font-mono text-text",children:xe(t?.last_run_at)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Next Run"}),u.jsx("div",{className:"text-sm font-mono text-text",children:xe(t?.next_run_at)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Version"}),u.jsx("div",{className:"text-sm font-mono text-text",children:t?.version||""})]})]}),t?.override_active&&u.jsx("div",{className:"mt-3 p-2 rounded-lg bg-amber-500/20 border border-amber-500/30",children:u.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-amber-300",children:[u.jsx(vx,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"font-medium",children:"Override Active:"}),u.jsx("span",{children:t.override_type})]})})]}),u.jsxs(Xe,{className:"lg:col-span-4 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(by,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Controls"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Executor Enabled"}),u.jsx("span",{className:"text-[9px] text-muted",children:"Execute actions on Home Assistant"})]}),u.jsx(hy,{enabled:t?.enabled??!1,onChange:H,disabled:_,size:"sm"})]}),u.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("div",{className:"text-[11px] font-medium text-text flex items-center gap-1.5",children:["Shadow Mode",u.jsx(d5,{className:"h-3 w-3 text-muted"})]}),u.jsx("span",{className:"text-[9px] text-muted",children:"Log only, don't execute actions"})]}),u.jsx(hy,{enabled:t?.shadow_mode??!1,onChange:ne,disabled:_,size:"sm"})]}),u.jsxs("button",{onClick:()=>B(!0),className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50 mt-2 hover:bg-surface2 transition-colors w-full",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(yx,{className:"h-4 w-4 text-muted"}),u.jsx("span",{className:"text-[11px] font-medium text-text",children:"Notifications"})]}),U&&Object.entries(U).some(([F,de])=>F.startsWith("on_")&&de===!0)&&u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute inset-0 rounded-full bg-accent/50 blur-sm animate-pulse"}),u.jsx("span",{className:"relative h-2.5 w-2.5 rounded-full bg-accent block ring-2 ring-accent/30"})]})]}),u.jsx("div",{className:"mt-auto pt-4",children:u.jsx("button",{onClick:ae,disabled:k,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-surface hover:bg-surface2 border border-line/50 text-[11px] font-medium transition-all ${k?"opacity-70 cursor-not-allowed text-muted":"text-text hover:border-accent/50"}`,children:k?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-3.5 w-3.5 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),u.jsx("span",{children:"Running..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(kv,{className:"h-3.5 w-3.5 text-accent"}),u.jsx("span",{children:"Run Now"})]})})})]}),u.jsxs(Xe,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Uf,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"7-Day Stats"})]}),n&&u.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-1",children:[u.jsxs("div",{className:"p-3 rounded-lg bg-surface2/30 border border-line/30",children:[u.jsx("div",{className:"text-xl font-bold text-text",children:n.total_executions}),u.jsx("div",{className:"text-[10px] text-muted",children:"Total Runs"})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[u.jsxs("div",{className:"text-xl font-bold text-emerald-400",children:[n.success_rate,"%"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Success Rate"})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[u.jsx("div",{className:"text-xl font-bold text-amber-400",children:n.override_count}),u.jsx("div",{className:"text-[10px] text-muted",children:"Overrides"})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[u.jsx("div",{className:"text-xl font-bold text-red-400",children:n.failed}),u.jsx("div",{className:"text-[10px] text-muted",children:"Failed"})]})]})]}),u.jsxs(Xe,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx($i,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Quick Actions"})]}),t?.quick_action&&u.jsx("div",{className:"mb-3 p-3 rounded-lg bg-accent/10 border border-accent/30",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-[11px] font-medium text-accent capitalize",children:[t.quick_action.type.replace("_"," ")," Active"]}),u.jsxs("div",{className:"text-[10px] text-muted",children:[t.quick_action.remaining_minutes.toFixed(0)," min remaining"]})]}),u.jsx("button",{onClick:async()=>{try{await si.quickAction.clear(),Z()}catch(F){console.error(F)}},className:"text-[10px] px-2 py-1 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",children:"Cancel"})]})}),u.jsx("div",{className:"space-y-2 flex-1",children:[{type:"force_charge",label:"Force Charge",icon:xy,labelClass:"text-emerald-400",btnClass:"bg-emerald-500/10 border-emerald-500/20 text-emerald-400 hover:bg-emerald-500/20"},{type:"force_export",label:"Force Export",icon:wy,labelClass:"text-amber-400",btnClass:"bg-amber-500/10 border-amber-500/20 text-amber-400 hover:bg-amber-500/20"},{type:"force_heat",label:"Force Heat",icon:Tv,labelClass:"text-orange-400",btnClass:"bg-orange-500/10 border-orange-500/20 text-orange-400 hover:bg-orange-500/20"},{type:"force_stop",label:"Stop All",icon:x5,labelClass:"text-red-400",btnClass:"bg-red-500/10 border-red-500/20 text-red-400 hover:bg-red-500/20"}].map(F=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:`text-[11px] ${F.labelClass} w-20 font-medium flex items-center gap-1`,children:[u.jsx(F.icon,{className:"h-3 w-3"}),F.label]}),u.jsx("div",{className:"flex gap-1 flex-1",children:[15,30,60].map(de=>u.jsxs("button",{onClick:async()=>{try{await si.quickAction.set(F.type,de),Z()}catch(Se){alert("Failed: "+Se.message)}},disabled:t?.quick_action?.type===F.type,className:`flex-1 px-2 py-1.5 text-[10px] rounded-lg border transition-all ${t?.quick_action?.type===F.type?"bg-accent/20 border-accent/40 text-accent":F.btnClass}`,children:[de,"m"]},de))})]},F.type))}),u.jsx("div",{className:"mt-3 text-[9px] text-muted/60 text-center",children:"Overrides schedule for selected duration"})]})]}),u.jsxs(Xe,{className:"p-4 md:p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ju,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Live System"}),u.jsx("span",{className:"text-[9px] text-muted/70",children:"(every 10s)"})]}),l?.work_mode&&u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${l.work_mode.value.includes("Export")?"bg-emerald-500/20 border-emerald-500/30 text-emerald-300":"bg-blue-500/20 border-blue-500/30 text-blue-300"}`,children:l.work_mode.value})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[u.jsxs("div",{className:"metric-card-border metric-card-border-battery p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Eu,{data:h.soc,colorClass:"bg-good"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(UT,{className:`h-6 w-6 ${(l?.soc?.numeric??0)>50?"text-good":(l?.soc?.numeric??0)>20?"text-warn":"text-bad"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-good",children:[l?.soc?.numeric?.toFixed(0)??"","%"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Battery SoC"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-solar p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Eu,{data:h.pv,colorClass:"bg-accent"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(Nv,{className:`h-6 w-6 ${(l?.pv_power?.numeric??0)>500?"text-accent":"text-accent/40"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-accent",children:[l?.pv_power?.numeric?(l.pv_power.numeric/1e3).toFixed(1):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"PV Power"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-house p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Eu,{data:h.load,colorClass:"bg-house"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(g5,{className:"h-6 w-6 text-house"}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-house",children:[l?.load_power?.numeric?(l.load_power.numeric/1e3).toFixed(1):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Load"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-grid p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Eu,{data:h.import,colorClass:(l?.grid_import?.numeric??0)>100?"bg-bad":"bg-grid"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(wv,{className:`h-6 w-6 ${(l?.grid_import?.numeric??0)>100?"text-bad":"text-grid"}`}),u.jsxs("div",{children:[u.jsxs("div",{className:`text-lg font-bold ${(l?.grid_import?.numeric??0)>100?"text-bad":"text-text"}`,children:[l?.grid_import?.numeric?(l.grid_import.numeric/1e3).toFixed(2):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Grid Import"})]})]})]}),u.jsxs("div",{className:"metric-card-border metric-card-border-bad p-3 bg-surface2/30 relative overflow-hidden group",children:[u.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:u.jsx(Eu,{data:h.export,colorClass:"bg-bad"})}),u.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[u.jsx(Sv,{className:"h-6 w-6 text-bad"}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-lg font-bold text-bad",children:[l?.grid_export?.numeric?(l.grid_export.numeric/1e3).toFixed(2):""," kW"]}),u.jsx("div",{className:"text-[10px] text-muted",children:"Grid Export"})]})]})]})]})]}),u.jsxs(Xe,{className:"p-4 md:p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(h5,{className:"h-4 w-4 text-accent"}),u.jsx("span",{className:"text-xs font-medium text-text",children:"Execution History"}),u.jsxs("span",{className:"text-[10px] text-muted",children:["(",a.length," records)"]})]}),u.jsxs("button",{onClick:Z,className:"flex items-center gap-1.5 text-[10px] text-muted hover:text-accent transition px-2 py-1 rounded-lg hover:bg-surface2",children:[u.jsx($T,{className:"h-3 w-3"}),"Refresh"]})]}),a.length===0?u.jsxs("div",{className:"text-center py-12 text-muted",children:[u.jsx(Vw,{className:"h-10 w-10 mx-auto opacity-20 mb-3"}),u.jsx("p",{className:"text-[11px]",children:"No execution history yet."}),u.jsx("p",{className:"text-[10px] mt-1 text-muted/70",children:"Run the executor to see results here."})]}):u.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[t?.next_run_at&&u.jsxs("div",{className:"p-3 rounded-xl border-2 border-dashed border-line/30 bg-surface2/10 opacity-70",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vw,{className:"h-4 w-4 text-muted animate-pulse"}),u.jsxs("span",{className:"text-[11px] text-muted font-mono",children:["Next: ",xe(t.next_run_at)]})]}),u.jsx("span",{className:"text-[9px] text-muted/70 bg-surface2/50 px-2 py-0.5 rounded-full",children:"Scheduled"})]}),t.current_slot_plan&&u.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2 text-[10px]",children:[t.current_slot_plan.charge_kw>0&&u.jsxs("div",{className:"flex items-center gap-1 text-emerald-400",children:[u.jsx(xy,{className:"h-3 w-3"}),u.jsxs("span",{children:[t.current_slot_plan.charge_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.export_kw>0&&u.jsxs("div",{className:"flex items-center gap-1 text-amber-400",children:[u.jsx(wy,{className:"h-3 w-3"}),u.jsxs("span",{children:[t.current_slot_plan.export_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.water_kw>0&&u.jsxs("div",{className:"flex items-center gap-1 text-sky-400",children:[u.jsx(WT,{className:"h-3 w-3"}),u.jsxs("span",{children:[t.current_slot_plan.water_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.soc_target>0&&u.jsx("div",{className:"flex items-center gap-1 text-muted",children:u.jsxs("span",{children:["SoC",t.current_slot_plan.soc_target,"%"]})}),!t.current_slot_plan.charge_kw&&!t.current_slot_plan.export_kw&&!t.current_slot_plan.water_kw&&u.jsx("div",{className:"text-muted/60 col-span-4",children:"Idle / Self-consumption"})]})]}),a.map(F=>{const de=me===F.id;return u.jsxs("div",{className:`rounded-xl border transition-all ${F.success?"bg-surface2/30 border-line/40 hover:border-line/60":"bg-red-500/10 border-red-500/30 hover:border-red-500/50"}`,children:[u.jsxs("div",{className:"p-3 cursor-pointer flex items-center justify-between",onClick:()=>le(de?null:F.id),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(jv,{className:`h-3 w-3 text-muted transition-transform ${de?"rotate-180":""}`}),F.success?u.jsx(l5,{className:"h-4 w-4 text-emerald-400"}):u.jsx(vx,{className:"h-4 w-4 text-red-400"}),u.jsx("span",{className:"text-[11px] text-text font-mono",children:V(F.executed_at)}),F.commanded_charge_current_a&&F.commanded_charge_current_a>0&&u.jsx("span",{className:"text-[9px] text-emerald-400 bg-emerald-500/20 px-1.5 py-0.5 rounded",children:" Charge"}),F.commanded_work_mode==="Export First"&&u.jsx("span",{className:"text-[9px] text-amber-400 bg-amber-500/20 px-1.5 py-0.5 rounded",children:" Export"}),F.commanded_water_temp&&F.commanded_water_temp>50&&u.jsx("span",{className:"text-[9px] text-orange-400 bg-orange-500/20 px-1.5 py-0.5 rounded",children:" Heat"}),(!F.commanded_charge_current_a||F.commanded_charge_current_a===0)&&F.commanded_work_mode!=="Export First"&&(!F.commanded_water_temp||F.commanded_water_temp<=50)&&u.jsx("span",{className:"text-[9px] text-muted/60 bg-surface2/50 px-1.5 py-0.5 rounded",children:" Idle"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[F.override_active?u.jsx("span",{className:"text-[9px] text-amber-400 bg-amber-500/20 px-2 py-0.5 rounded-full border border-amber-500/30",children:F.override_type}):null,F.duration_ms&&u.jsxs("span",{className:"text-[9px] text-muted font-mono",children:[F.duration_ms,"ms"]})]})]}),de&&u.jsxs("div",{className:"px-3 pb-3 border-t border-line/20",children:[u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"Planned (from Schedule)"}),u.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 text-[10px]",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Charge"}),u.jsxs("span",{className:F.planned_charge_kw?"text-emerald-400":"text-muted/40",children:[F.planned_charge_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Export"}),u.jsxs("span",{className:F.planned_export_kw?"text-amber-400":"text-muted/40",children:[F.planned_export_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Water"}),u.jsxs("span",{className:F.planned_water_kw?"text-orange-400":"text-muted/40",children:[F.planned_water_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC Target"}),u.jsxs("span",{className:"text-text",children:[F.planned_soc_target??"","%"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC Projected"}),u.jsxs("span",{className:"text-text",children:[F.planned_soc_projected??"","%"]})]})]})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"Commanded (What We Set)"}),u.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 text-[10px]",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Work Mode"}),u.jsx("span",{className:"text-text font-medium",children:F.commanded_work_mode??""})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Grid Charging"}),u.jsx("span",{className:F.commanded_grid_charging?"text-emerald-400":"text-muted/40",children:F.commanded_grid_charging?"ON":"OFF"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Charge I"}),u.jsxs("span",{className:F.commanded_charge_current_a?"text-emerald-400":"text-muted/40",children:[F.commanded_charge_current_a??""," A"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Discharge I"}),u.jsxs("span",{className:F.commanded_discharge_current_a?"text-amber-400":"text-muted/40",children:[F.commanded_discharge_current_a??""," A"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC Target"}),u.jsxs("span",{className:"text-text",children:[F.commanded_soc_target??"","%"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Water Temp"}),u.jsxs("span",{className:F.commanded_water_temp&&F.commanded_water_temp>50?"text-orange-400":"text-muted/40",children:[F.commanded_water_temp??"","C"]})]})]})]}),u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"State Before Execution"}),u.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2 text-[10px]",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"SoC"}),u.jsxs("span",{className:"text-text",children:[F.before_soc_percent?.toFixed(0)??"","%"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Work Mode"}),u.jsx("span",{className:"text-text",children:F.before_work_mode??""})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"PV Power"}),u.jsxs("span",{className:"text-yellow-400",children:[F.before_pv_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Load"}),u.jsxs("span",{className:"text-sky-400",children:[F.before_load_kw?.toFixed(1)??""," kW"]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-muted/60",children:"Water Temp"}),u.jsxs("span",{className:"text-text",children:[F.before_water_temp??"","C"]})]})]})]}),F.error_message&&u.jsx("div",{className:"mt-2 text-[10px] text-red-400 bg-red-500/10 rounded-lg p-2",children:F.error_message}),F.override_reason&&u.jsxs("div",{className:"mt-2 text-[10px] text-amber-300/80 bg-amber-500/10 rounded-lg p-2",children:["Override: ",F.override_reason]})]})]},F.id)})]})]}),E&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>B(!1),children:u.jsxs("div",{className:"bg-surface border border-line rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:F=>F.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(yx,{className:"h-5 w-5 text-accent"}),u.jsx("span",{className:"text-sm font-medium text-text",children:"Notification Settings"})]}),u.jsx("button",{onClick:()=>B(!1),className:"text-muted hover:text-text transition p-1",children:u.jsx(_p,{className:"h-5 w-5"})})]}),U&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"p-2 rounded-lg bg-surface2/30 border border-line/30 mb-3",children:[u.jsx("div",{className:"text-[10px] text-muted mb-1",children:"HA Notify Service"}),u.jsx("div",{className:"text-[11px] text-text font-mono",children:U.service||"Not configured"})]}),[{key:"on_charge_start",label:"Charge Started",desc:"When grid charging begins"},{key:"on_charge_stop",label:"Charge Stopped",desc:"When grid charging ends"},{key:"on_export_start",label:"Export Started",desc:"When battery export begins"},{key:"on_export_stop",label:"Export Stopped",desc:"When battery export ends"},{key:"on_water_heat_start",label:"Water Heating Started",desc:"When water heater activates"},{key:"on_water_heat_stop",label:"Water Heating Stopped",desc:"When water heater deactivates"},{key:"on_soc_target_change",label:"SoC Target Changed",desc:"When battery target changes"},{key:"on_override_activated",label:"Override Activated",desc:"When emergency override triggers"},{key:"on_error",label:"Errors",desc:"When execution fails"}].map(F=>u.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-medium text-text",children:F.label}),u.jsx("span",{className:"text-[9px] text-muted",children:F.desc})]}),u.jsx(hy,{enabled:U[F.key],onChange:de=>re(F.key,de),disabled:I,size:"sm"})]},F.key))]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-line/30",children:[u.jsx("button",{onClick:X,disabled:q,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border text-[11px] font-medium transition-all ${q?"bg-surface2/50 border-line/30 text-muted cursor-not-allowed":"bg-accent/10 border-accent/30 text-accent hover:bg-accent/20"}`,children:q?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-3 w-3 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),"Sending..."]}):u.jsxs(u.Fragment,{children:[u.jsx(yx,{className:"h-3.5 w-3.5"}),"Send Test Notification"]})}),oe&&u.jsx("div",{className:`mt-2 text-center text-[10px] ${oe.success?"text-emerald-400":"text-red-400"}`,children:oe.message}),u.jsx("div",{className:"mt-2 text-center text-[9px] text-muted/70",children:"Changes are saved automatically"})]})]})})]})}function eK(){const[t,e]=A.useState(!1),[n,s]=A.useState(65),[a,o]=A.useState(!1),[l,d]=A.useState(!1),[h,p]=A.useState("");return u.jsxs("main",{className:"mx-auto max-w-6xl px-6 py-10 space-y-12",children:[u.jsxs("header",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text",children:"Darkstar Design System"}),u.jsx("p",{className:"text-muted text-lg mt-2",children:"Visual reference & component showcase"})]}),u.jsx(KT,{})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Color Palette"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[{name:"Accent",var:"--color-accent",hex:"#FFCE59"},{name:"Good",var:"--color-good",hex:"#1FB256"},{name:"Warn",var:"--color-warn",hex:"#F59E0B"},{name:"Bad",var:"--color-bad",hex:"#F15132"},{name:"Water",var:"--color-water",hex:"#4EA8DE"},{name:"House",var:"--color-house",hex:"#A855F7"},{name:"Peak",var:"--color-peak",hex:"#EC4899"},{name:"Night",var:"--color-night",hex:"#06B6D4"},{name:"Grid",var:"--color-grid",hex:"#64748B"},{name:"Neutral",var:"--color-neutral",hex:"#989FA5"},{name:"AI",var:"--color-ai",hex:"#8B5CF6"}].map(g=>u.jsxs("div",{className:"rounded-ds-md overflow-hidden shadow-float bg-surface",children:[u.jsx("div",{className:"h-16",style:{backgroundColor:`rgb(var(${g.var}))`}}),u.jsxs("div",{className:"p-2",children:[u.jsx("div",{className:"text-sm font-medium text-text",children:g.name}),u.jsx("div",{className:"text-xs text-muted font-mono",children:g.hex})]})]},g.name))}),u.jsx("h3",{className:"text-lg font-medium text-text mt-6 mb-3",children:"Surface Colors"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Canvas",var:"--color-canvas"},{name:"Surface",var:"--color-surface"},{name:"Surface2",var:"--color-surface2"},{name:"Line",var:"--color-line"}].map(g=>u.jsx("div",{className:"h-20 rounded-ds-md border border-line flex items-center justify-center",style:{backgroundColor:`rgb(var(${g.var}))`},children:u.jsx("span",{className:"text-sm font-medium text-text",children:g.name})},g.name))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Typography"}),u.jsxs("div",{className:"space-y-3 bg-surface p-6 rounded-ds-lg",children:[u.jsx("div",{className:"text-4xl",children:"text-4xl (28px)  Page Titles"}),u.jsx("div",{className:"text-3xl",children:"text-3xl (24px)  Section Headers"}),u.jsx("div",{className:"text-2xl",children:"text-2xl (18px)  Subsections"}),u.jsx("div",{className:"text-xl",children:"text-xl (16px)  Large Body"}),u.jsx("div",{className:"text-lg",children:"text-lg (14px)  Body Text"}),u.jsx("div",{className:"text-md",children:"text-md (13px)  Secondary"}),u.jsx("div",{className:"text-base",children:"text-base (12px)  Small Body"}),u.jsx("div",{className:"text-sm",children:"text-sm (11px)  Labels"}),u.jsx("div",{className:"text-xs",children:"text-xs (10px)  Micro"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Buttons"}),u.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[u.jsx("button",{className:"btn btn-primary",children:"Primary"}),u.jsx("button",{className:"btn btn-secondary",children:"Secondary"}),u.jsx("button",{className:"btn btn-danger",children:"Danger"}),u.jsx("button",{className:"btn btn-ghost",children:"Ghost"}),u.jsx("button",{className:"btn btn-primary btn-pill",children:"Pill Primary"}),u.jsx("button",{className:"btn btn-ghost btn-pill",children:"Pill Ghost"})]}),u.jsxs("div",{className:"flex flex-wrap gap-4 items-center mt-4",children:[u.jsx("button",{className:"btn btn-primary",disabled:!0,children:"Disabled Primary"}),u.jsx("button",{className:"btn btn-secondary",disabled:!0,children:"Disabled Secondary"}),u.jsx("button",{className:"btn btn-ghost",disabled:!0,children:"Disabled Ghost"})]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("p",{className:"text-sm text-muted mb-2",children:"Dynamic color (using CSS custom property):"}),u.jsx("button",{className:"btn btn-pill btn-dynamic",style:{"--btn-bg":"rgb(var(--color-water))","--btn-text":"#fff"},children:"Custom Water Color"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Banners / Alerts"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"banner banner-info",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Info Banner  Neutral information message"})]}),u.jsxs("div",{className:"banner banner-success",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Success Banner  Action completed successfully"})]}),u.jsxs("div",{className:"banner banner-warning",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Warning Banner  Requires attention"})]}),u.jsxs("div",{className:"banner banner-error",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Error Banner  Critical issue detected"})]}),u.jsxs("div",{className:"banner banner-purple",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Purple Banner  Special mode (shadow mode)"})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Badges"}),u.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[u.jsx("span",{className:"badge badge-accent",children:"Accent"}),u.jsx("span",{className:"badge badge-good",children:"Good"}),u.jsx("span",{className:"badge badge-warn",children:"Warning"}),u.jsx("span",{className:"badge badge-bad",children:"Error"}),u.jsx("span",{className:"badge badge-muted",children:"Muted"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Form Elements"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-muted mb-2",children:"Text Input"}),u.jsx("input",{type:"text",className:"input",placeholder:"Enter value..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-muted mb-2",children:"Number Input"}),u.jsx("input",{type:"number",className:"input",placeholder:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-muted mb-2",children:"Toggle Switch"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`toggle ${t?"active":""}`,onClick:()=>e(!t),children:u.jsx("div",{className:"toggle-knob"})}),u.jsx("span",{className:"text-sm text-text",children:t?"On":"Off"})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Loading States"}),u.jsxs("div",{className:"flex items-center gap-8",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-muted mb-2",children:"Spinner"}),u.jsx("div",{className:"spinner"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-sm text-muted mb-2",children:"Skeleton"}),u.jsx("div",{className:"skeleton h-8 w-full"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"text-sm text-muted mb-2",children:["Progress Bar (",n,"%)"]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-bar-fill",style:{width:`${n}%`}})}),u.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:g=>s(Number(g.target.value)),className:"slider mt-2"})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Data Visualization"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-surface p-4 rounded-ds-lg",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Mini-Bar Chart (Solar)"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"mini-bars",children:[40,55,75,90,100,85,70,45].map((g,y)=>u.jsx("div",{className:"mini-bar",style:{height:`${g}%`,background:"rgb(var(--color-accent))"}},y))}),u.jsx("span",{className:"font-mono font-bold text-accent",children:"4.2kW"})]})]}),u.jsxs("div",{className:"bg-surface p-4 rounded-ds-lg",children:[u.jsx("div",{className:"text-sm text-muted mb-3",children:"Mini-Bar Chart (Battery)"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"mini-bars",children:[60,65,70,75,80,82,85,85].map((g,y)=>u.jsx("div",{className:"mini-bar",style:{height:`${g}%`,background:"rgb(var(--color-good))"}},y))}),u.jsx("span",{className:"font-mono font-bold text-good",children:"85%"})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Chart.js  Live Example"}),u.jsx("p",{className:"text-muted text-sm mb-4",children:"This is the actual ChartCard component used throughout Darkstar."}),u.jsx("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:u.jsx(wd,{day:"today",showDayToggle:!1})})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Power Flow Visualization"}),u.jsx("p",{className:"text-muted text-sm mb-4",children:"Animated energy flow between sources and loads (inspired by power-flow-card-plus)."}),u.jsx("div",{className:"bg-surface rounded-ds-lg p-8 shadow-float",children:u.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full max-w-lg mx-auto",children:[u.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-accent))",strokeWidth:3,fill:"none"},children:u.jsx("path",{d:"M100,50 L200,150"})}),u.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-good))",strokeWidth:3,fill:"none",animationDelay:"0.25s"},children:u.jsx("path",{d:"M200,150 L200,250"})}),u.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-house))",strokeWidth:3,fill:"none",animationDelay:"0.5s"},children:u.jsx("path",{d:"M200,150 L300,150"})}),u.jsx("g",{style:{stroke:"rgb(var(--color-grid))",strokeWidth:3,fill:"none",strokeDasharray:"5 5"},children:u.jsx("path",{d:"M100,250 L200,150"})}),u.jsxs("g",{transform:"translate(100, 50)",children:[u.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-accent))",strokeWidth:"3",className:"animate-glow"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-accent))",fontSize:"24",children:""}),u.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"4.2 kW"}),u.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Solar"})]}),u.jsxs("g",{transform:"translate(200, 150)",children:[u.jsx("circle",{r:"40",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-house))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-house))",fontSize:"24",children:""}),u.jsx("text",{y:"-50",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"3.1 kW"})]}),u.jsxs("g",{transform:"translate(200, 250)",children:[u.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-good))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-good))",fontSize:"24",children:""}),u.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"85%"}),u.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"+0.6 kW"})]}),u.jsxs("g",{transform:"translate(100, 250)",children:[u.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-grid))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-grid))",fontSize:"24",children:""}),u.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"0 W"}),u.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Grid"})]}),u.jsxs("g",{transform:"translate(300, 150)",children:[u.jsx("circle",{r:"30",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-water))",strokeWidth:"3"}),u.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-water))",fontSize:"20",children:""}),u.jsx("text",{y:"50",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"0.5 kW"}),u.jsx("text",{y:"65",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Water"})]})]})})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Animation Examples"}),u.jsx("p",{className:"text-muted text-sm mb-4",children:"CSS animations available in the design system."}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-accent animate-pulse"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Pulse"}),u.jsx("code",{className:"text-xs text-muted",children:".animate-pulse"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-good animate-bounce"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Bounce"}),u.jsx("code",{className:"text-xs text-muted",children:".animate-bounce"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-accent animate-glow"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Glow"}),u.jsx("code",{className:"text-xs text-muted",children:".animate-glow"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("div",{className:"spinner mx-auto mb-3",style:{width:"3rem",height:"3rem",borderWidth:"4px"}}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Spinner"}),u.jsx("code",{className:"text-xs text-muted",children:".spinner"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Skeleton Loading"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"skeleton h-4 w-3/4"}),u.jsx("div",{className:"skeleton h-4 w-1/2"}),u.jsx("div",{className:"skeleton h-4 w-full"})]}),u.jsx("code",{className:"text-xs text-muted mt-2 block",children:".skeleton"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Mini Bar Animation"}),u.jsx("div",{className:"mini-bars",children:[40,60,80,100,80,60,40,20].map((g,y)=>u.jsx("div",{className:"mini-bar animate-pulse",style:{height:`${g}%`,background:"rgb(var(--color-accent))",animationDelay:`${y*.1}s`}},y))}),u.jsx("code",{className:"text-xs text-muted mt-2 block",children:".mini-bars"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[u.jsx("button",{className:"btn btn-primary animate-glow mb-2",children:"Glowing Button"}),u.jsx("div",{className:"text-sm font-medium text-text",children:"Button Glow"}),u.jsx("code",{className:"text-xs text-muted",children:".btn + .animate-glow"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Animated Progress"}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-bar-fill",style:{width:"75%",animation:"skeleton-shimmer 1.5s infinite",background:"linear-gradient(90deg, rgb(var(--color-accent)), rgb(var(--color-accent2)), rgb(var(--color-accent)))",backgroundSize:"200% 100%"}})}),u.jsx("code",{className:"text-xs text-muted mt-2 block",children:".progress-bar"})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Metric Cards"}),u.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[{border:"solar",label:"Solar",value:"4.2 kW",sub:"+12% today"},{border:"battery",label:"Battery",value:"78%",sub:"Target: 85%"},{border:"house",label:"House Load",value:"1.8 kW",sub:"Avg: 2.1 kW"},{border:"water",label:"Water",value:"2.4 kWh",sub:"Today"},{border:"grid",label:"Grid",value:"-0.5 kW",sub:"Exporting"},{border:"bad",label:"Error",value:"3",sub:"Issues detected"}].map(g=>u.jsxs("div",{className:`metric-card-border metric-card-border-${g.border} bg-surface p-4`,children:[u.jsx("div",{className:"text-xs text-muted uppercase tracking-wider",children:g.label}),u.jsx("div",{className:"text-2xl font-bold text-text mt-1",children:g.value}),u.jsx("div",{className:"text-xs text-muted mt-1",children:g.sub})]},g.border))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Border Radius"}),u.jsx("div",{className:"flex gap-4 items-end",children:[{name:"sm",size:"8px"},{name:"md",size:"12px"},{name:"lg",size:"16px"},{name:"xl",size:"20px"},{name:"pill",size:"9999px"}].map(g=>u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:`w-16 h-16 bg-accent rounded-ds-${g.name}`}),u.jsx("div",{className:"text-xs text-muted mt-2",children:g.name}),u.jsx("div",{className:"text-xs text-muted",children:g.size})]},g.name))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Spacing Scale (4px grid)"}),u.jsx("div",{className:"flex gap-4 items-end flex-wrap",children:[1,2,3,4,5,6,8,10,12].map(g=>u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"bg-accent",style:{width:`var(--space-${g})`,height:`var(--space-${g})`,minWidth:"4px",minHeight:"4px"}}),u.jsxs("div",{className:"text-xs text-muted mt-2",children:["ds-",g]})]},g))})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Dark / Light Mode Comparison"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"rounded-ds-lg overflow-hidden",style:{background:"#0f1216"},children:[u.jsx("div",{className:"px-4 py-3",style:{background:"#14191f"},children:u.jsx("span",{className:"text-sm font-semibold",style:{color:"#e6e9ef"},children:" Dark Mode  Glow Buttons"})}),u.jsxs("div",{className:"p-4 space-y-2",style:{background:"#14191f"},children:[u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#FFCE59"},children:" Solar"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#FFCE59"},children:"4.2kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#1FB256"},children:" Battery"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#1FB256"},children:"85%"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#A855F7"},children:" House"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#e6e9ef"},children:"1.8kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[u.jsx("span",{style:{color:"#4EA8DE"},children:" Water"}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#e6e9ef"},children:"58C"})]}),u.jsxs("div",{className:"flex gap-2 pt-3",children:[u.jsx("button",{style:{background:"#FFCE59",color:"#1a1d23",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",boxShadow:"0 0 16px rgba(255, 206, 89, 0.4), 0 0 32px rgba(255, 206, 89, 0.2)"},children:" Boost"}),u.jsx("button",{style:{background:"#989FA5",color:"#fff",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",boxShadow:"0 0 12px rgba(152, 159, 165, 0.3)"},children:" Vacation"})]})]})]}),u.jsxs("div",{className:"rounded-ds-lg overflow-hidden",style:{background:"#DFDFDF"},children:[u.jsx("div",{className:"px-4 py-3",style:{background:"#EFEFEF"},children:u.jsx("span",{className:"text-sm font-semibold",style:{color:"#2D2D2D"},children:" Light Mode  Flat Buttons (TE Style)"})}),u.jsxs("div",{className:"p-4 space-y-2",style:{background:"#EFEFEF"},children:[u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#b38b00"},children:"Solar"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"4.2kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#1FB256"},children:"Battery"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"85%"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#A855F7"},children:"House"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"1.8kW"})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[u.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",u.jsx("b",{style:{color:"#4EA8DE"},children:"Water"})]}),u.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"58C"})]}),u.jsxs("div",{className:"flex gap-2 pt-3",children:[u.jsx("button",{style:{background:"#FFCE59",color:"#2D2D2D",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",border:"none"},children:" Boost"}),u.jsx("button",{style:{background:"#989FA5",color:"#fff",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",border:"none"},children:" Vacation"})]})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Future Components (Inspiration)"}),u.jsx("p",{className:"text-muted text-sm mb-6",children:"These components are not yet implemented but can be added as needed."}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Card"}),u.jsx("p",{className:"text-xs text-muted",children:"Container with shadow, padding, and rounded corners for grouping content."}),u.jsx("div",{className:"mt-3 p-3 bg-surface2 rounded-ds-md",children:u.jsx("div",{className:"text-xs text-text",children:"Card content goes here..."})})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Dropdown Menu"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Popover menu with options."}),u.jsxs("div",{className:"bg-surface2 rounded-ds-md p-1 w-40 shadow-lg",children:[u.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"Option 1"}),u.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"Option 2"}),u.jsx("div",{className:"px-3 py-2 text-xs text-bad rounded cursor-pointer",children:"Delete"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Tabs"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Navigation between views."}),u.jsxs("div",{className:"flex gap-1 bg-surface2 p-1 rounded-ds-md",children:[u.jsx("div",{className:"px-3 py-1.5 text-xs font-medium bg-accent text-black rounded",children:"Active"}),u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted rounded",children:"Tab 2"}),u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted rounded",children:"Tab 3"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Avatars"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"User profile images or initials."}),u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center text-xs font-bold text-black",children:"JD"}),u.jsx("div",{className:"w-8 h-8 rounded-full bg-water flex items-center justify-center text-xs font-bold text-white",children:"AB"}),u.jsx("div",{className:"w-8 h-8 rounded-full bg-house flex items-center justify-center text-xs font-bold text-white",children:"?"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Tooltip"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Hover for more info."}),u.jsx("span",{className:"tooltip px-3 py-1.5 bg-surface2 rounded text-xs text-text cursor-help","data-tooltip":"This is a tooltip!",children:"Hover me"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Data Table"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Tabular data display."}),u.jsxs("div",{className:"text-xs",children:[u.jsxs("div",{className:"flex gap-2 py-1 border-b border-line text-muted font-medium",children:[u.jsx("span",{className:"flex-1",children:"Name"}),u.jsx("span",{className:"w-16 text-right",children:"Value"})]}),u.jsxs("div",{className:"flex gap-2 py-1 text-text",children:[u.jsx("span",{className:"flex-1",children:"Solar"}),u.jsx("span",{className:"w-16 text-right text-accent",children:"4.2kW"})]}),u.jsxs("div",{className:"flex gap-2 py-1 text-text",children:[u.jsx("span",{className:"flex-1",children:"Battery"}),u.jsx("span",{className:"w-16 text-right text-good",children:"85%"})]})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Gauge / Dial"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Circular progress indicator."}),u.jsxs("div",{className:"w-16 h-16 rounded-full border-4 border-surface2 relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-accent border-r-accent",style:{transform:"rotate(45deg)"}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-text",children:"75%"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Notification Badge"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Alert indicator on icons."}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx("div",{className:"w-10 h-10 bg-surface2 rounded-lg flex items-center justify-center text-lg",children:""}),u.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-bad rounded-full flex items-center justify-center text-[10px] font-bold text-white",children:"3"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Stepper"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Multi-step progress."}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-accent flex items-center justify-center text-[10px] font-bold text-black",children:"1"}),u.jsx("div",{className:"flex-1 h-0.5 bg-accent"}),u.jsx("div",{className:"w-6 h-6 rounded-full bg-accent flex items-center justify-center text-[10px] font-bold text-black",children:"2"}),u.jsx("div",{className:"flex-1 h-0.5 bg-surface2"}),u.jsx("div",{className:"w-6 h-6 rounded-full bg-surface2 flex items-center justify-center text-[10px] font-bold text-muted",children:"3"})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" More Future Components"}),u.jsx("p",{className:"text-muted text-sm mb-6",children:"Additional component patterns for future implementation."}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Modal / Dialog"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Overlay for confirmations & forms."}),u.jsx("button",{className:"btn btn-primary text-xs",onClick:()=>d(!0),children:"Open Modal"})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Accordion"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Expandable content sections."}),u.jsxs("div",{className:"bg-surface2 rounded-ds-md overflow-hidden",children:[u.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-text flex justify-between items-center cursor-pointer",onClick:()=>o(!a),children:[u.jsx("span",{children:"Click to expand"}),u.jsx("span",{children:a?"":"+"})]}),a&&u.jsx("div",{className:"px-3 py-2 text-xs text-muted border-t border-line",children:"Hidden content revealed!"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Search Input"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"With autocomplete dropdown."}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",className:"input pr-8",placeholder:"Search entities...",value:h,onChange:g=>p(g.target.value)}),u.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted",children:""})]}),h&&u.jsxs("div",{className:"mt-1 bg-surface2 rounded-ds-md p-1 shadow-lg",children:[u.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"sensor.solar_power"}),u.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"sensor.battery_soc"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Date Picker"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Calendar date selection."}),u.jsxs("div",{className:"bg-surface2 rounded-ds-md p-2 w-48",children:[u.jsx("div",{className:"text-xs font-medium text-text text-center mb-2",children:"December 2024"}),u.jsxs("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-center",children:[["M","T","W","T","F","S","S"].map((g,y)=>u.jsx("div",{className:"text-muted",children:g},y)),[...Array(31)].map((g,y)=>u.jsx("div",{className:`py-1 rounded cursor-pointer ${y===30?"bg-accent text-black font-bold":"text-text hover:bg-accent/20"}`,children:y+1},y))]})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Toast Notification"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Temporary status messages."}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-good/20 border border-good/40 rounded-ds-md px-3 py-2",children:[u.jsx("span",{className:"text-good",children:""}),u.jsx("span",{className:"text-xs text-text",children:"Settings saved!"})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-bad/20 border border-bad/40 rounded-ds-md px-3 py-2",children:[u.jsx("span",{className:"text-bad",children:""}),u.jsx("span",{className:"text-xs text-text",children:"Connection failed"})]})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Breadcrumbs"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Navigation path trail."}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-accent hover:underline cursor-pointer",children:"Home"}),u.jsx("span",{className:"text-muted",children:"/"}),u.jsx("span",{className:"text-accent hover:underline cursor-pointer",children:"Settings"}),u.jsx("span",{className:"text-muted",children:"/"}),u.jsx("span",{className:"text-text font-medium",children:"Entities"})]})]}),u.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float col-span-full lg:col-span-2",children:[u.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Timeline / Activity Log"}),u.jsx("p",{className:"text-xs text-muted mb-3",children:"Chronological event display."}),u.jsx("div",{className:"space-y-3",children:[{time:"14:32",event:"Battery charging started",color:"good"},{time:"14:15",event:"Solar production peaked at 4.2kW",color:"accent"},{time:"13:45",event:"Grid export enabled",color:"water"}].map((g,y)=>u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 bg-${g.color}`}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-mono text-muted",children:g.time}),u.jsx("div",{className:"text-xs text-text",children:g.event})]})]},y))})]})]})]}),l&&u.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:u.jsxs("div",{className:"modal",onClick:g=>g.stopPropagation(),children:[u.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Modal Title"}),u.jsx("p",{className:"text-sm text-muted mb-4",children:"This is a sample modal dialog. It uses the design system's modal classes."}),u.jsxs("div",{className:"flex gap-2 justify-end",children:[u.jsx("button",{className:"btn btn-ghost",onClick:()=>d(!1),children:"Cancel"}),u.jsx("button",{className:"btn btn-primary",onClick:()=>d(!1),children:"Confirm"})]})]})}),u.jsxs("footer",{className:"text-center text-muted text-sm pt-8 border-t border-line",children:[u.jsxs("p",{children:["SSOT: ",u.jsx("code",{className:"bg-surface2 px-2 py-1 rounded text-xs",children:"frontend/src/index.css"})]}),u.jsx("p",{className:"mt-2",children:"Toggle dark/light mode using the switch in the header."})]})]})}function tK({health:t,onDismiss:e}){if(!t||t.healthy)return null;const n=t.issues.filter(a=>a.severity==="critical"),s=t.issues.filter(a=>a.severity==="warning");return u.jsxs("div",{className:"system-alert-container",children:[n.length>0&&u.jsxs("div",{className:"system-alert system-alert--critical",children:[u.jsx("div",{className:"system-alert__icon",children:""}),u.jsxs("div",{className:"system-alert__content",children:[u.jsxs("div",{className:"system-alert__title",children:["System Error",n.length>1?"s":""," Detected"]}),u.jsx("ul",{className:"system-alert__list",children:n.map((a,o)=>u.jsxs("li",{className:"system-alert__item",children:[u.jsx("strong",{children:a.message}),a.entity_id&&u.jsx("code",{className:"system-alert__entity",children:a.entity_id}),u.jsx("div",{className:"system-alert__guidance",children:a.guidance})]},o))})]}),e&&u.jsx("button",{className:"system-alert__dismiss",onClick:e,title:"Dismiss (will reappear on next check)",children:""})]}),s.length>0&&u.jsxs("div",{className:"system-alert system-alert--warning",children:[u.jsx("div",{className:"system-alert__icon",children:""}),u.jsxs("div",{className:"system-alert__content",children:[u.jsxs("div",{className:"system-alert__title",children:["Warning",s.length>1?"s":""]}),u.jsx("ul",{className:"system-alert__list",children:s.map((a,o)=>u.jsxs("li",{className:"system-alert__item",children:[u.jsx("strong",{children:a.message}),u.jsx("div",{className:"system-alert__guidance",children:a.guidance})]},o))})]})]})]})}function nK(){const[t,e]=A.useState(!1),[n,s]=A.useState(null);return A.useEffect(()=>{let a=!1,o=0;const l=async()=>{try{const[,h]=await Promise.all([Me.status(),Me.health()]);if(a)return;o=0,e(!1),s(h)}catch{if(a)return;o+=1,o>=3&&(e(!0),s(null))}};l();const d=window.setInterval(l,6e4);return()=>{a=!0,window.clearInterval(d)}},[]),u.jsx(S5,{children:u.jsxs(QA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[u.jsx(w5,{}),u.jsxs("div",{className:"lg:pl-[96px]",children:[n&&!n.healthy&&u.jsx(tK,{health:n}),t&&!n&&u.jsx("div",{className:"bg-amber-900/80 border-b border-amber-500/60 text-amber-100 text-[11px] px-4 py-2 flex items-center justify-between",children:u.jsx("span",{children:"Backend appears offline or degraded. Some data may be stale or unavailable."})}),u.jsxs(YA,{children:[u.jsx(wi,{path:"/",element:u.jsx(hV,{})}),u.jsx(wi,{path:"/planning",element:u.jsx(gW,{})}),u.jsx(wi,{path:"/forecasting",element:u.jsx(WW,{})}),u.jsx(wi,{path:"/executor",element:u.jsx(JX,{})}),u.jsx(wi,{path:"/aurora",element:u.jsx(QX,{})}),u.jsx(wi,{path:"/learning",element:u.jsx(yW,{})}),u.jsx(wi,{path:"/debug",element:u.jsx(vW,{})}),u.jsx(wi,{path:"/lab",element:u.jsx($W,{})}),u.jsx(wi,{path:"/settings",element:u.jsx(BW,{})}),u.jsx(wi,{path:"/design-system",element:u.jsx(eK,{})})]})]})]})})}JE.createRoot(document.getElementById("root")).render(u.jsx(Kt.StrictMode,{children:u.jsx(nK,{})}))});export default sK();
