import{r as fb,a as y,R as mb,j as l,g as pb,b as ea}from"./index-p3Z98NM8.js";var bp=fb();function cr(){return cr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},cr.apply(this,arguments)}var Fs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fs||(Fs={}));const zu="popstate";function gb(t){t===void 0&&(t={});function e(n,i){let{pathname:r,search:a,hash:o}=n.location;return Gl("",{pathname:r,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:Wa(i)}return yb(e,s,null,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xb(){return Math.random().toString(36).substr(2,8)}function Hu(t,e){return{usr:t.state,key:t.key,idx:e}}function Gl(t,e,s,n){return s===void 0&&(s=null),cr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?di(e):e,{state:s,key:e&&e.key||n||xb()})}function Wa(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function di(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function yb(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:r=!1}=n,a=i.history,o=Fs.Pop,c=null,d=u();d==null&&(d=0,a.replaceState(cr({},a.state,{idx:d}),""));function u(){return(a.state||{idx:null}).idx}function h(){o=Fs.Pop;let x=u(),v=x==null?null:x-d;d=x,c&&c({action:o,location:g.location,delta:v})}function f(x,v){o=Fs.Push;let _=Gl(g.location,x,v);d=u()+1;let S=Hu(_,d),N=g.createHref(_);try{a.pushState(S,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(N)}r&&c&&c({action:o,location:g.location,delta:1})}function m(x,v){o=Fs.Replace;let _=Gl(g.location,x,v);d=u();let S=Hu(_,d),N=g.createHref(_);a.replaceState(S,"",N),r&&c&&c({action:o,location:g.location,delta:0})}function p(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof x=="string"?x:Wa(x);return _=_.replace(/ $/,"%20"),He(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let g={get action(){return o},get location(){return t(i,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(zu,h),c=x,()=>{i.removeEventListener(zu,h),c=null}},createHref(x){return e(i,x)},createURL:p,encodeLocation(x){let v=p(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(x){return a.go(x)}};return g}var $u;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($u||($u={}));function bb(t,e,s){return s===void 0&&(s="/"),vb(t,e,s)}function vb(t,e,s,n){let i=typeof e=="string"?di(e):e,r=si(i.pathname||"/",s);if(r==null)return null;let a=vp(t);_b(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let d=Eb(r);o=Pb(a[c],d)}return o}function vp(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(r,a,o)=>{let c={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};c.relativePath.startsWith("/")&&(He(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=$s([n,c.relativePath]),u=s.concat(c);r.children&&r.children.length>0&&(He(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),vp(r.children,e,u,d)),!(r.path==null&&!r.index)&&e.push({path:d,score:Tb(d,r.index),routesMeta:u})};return t.forEach((r,a)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))i(r,a);else for(let c of _p(r.path))i(r,a,c)}),e}function _p(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),r=s.replace(/\?$/,"");if(n.length===0)return i?[r,""]:[r];let a=_p(n.join("/")),o=[];return o.push(...a.map(c=>c===""?r:[r,c].join("/"))),i&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function _b(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:Cb(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const wb=/^:[\w-]+$/,kb=3,Sb=2,jb=1,Nb=10,Mb=-2,Yu=t=>t==="*";function Tb(t,e){let s=t.split("/"),n=s.length;return s.some(Yu)&&(n+=Mb),e&&(n+=Sb),s.filter(i=>!Yu(i)).reduce((i,r)=>i+(wb.test(r)?kb:r===""?jb:Nb),n)}function Cb(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Pb(t,e,s){let{routesMeta:n}=t,i={},r="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,u=r==="/"?e:e.slice(r.length)||"/",h=ql({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:$s([r,h.pathname]),pathnameBase:Fb($s([r,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(r=$s([r,h.pathnameBase]))}return a}function ql(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=Db(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let g=o[h]||"";a=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return m&&!p?d[f]=void 0:d[f]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:a,pattern:t}}function Db(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Kc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Eb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function si(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}const Ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ob=t=>Ab.test(t);function Rb(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?di(t):t,r;if(s)if(Ob(s))r=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),Kc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+s))}s.startsWith("/")?r=Uu(s.substring(1),"/"):r=Uu(s,e)}else r=e;return{pathname:r,search:Ib(n),hash:Vb(i)}}function Uu(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function al(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lb(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function wp(t,e){let s=Lb(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function kp(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=di(t):(i=cr({},t),He(!i.pathname||!i.pathname.includes("?"),al("?","pathname","search",i)),He(!i.pathname||!i.pathname.includes("#"),al("#","pathname","hash",i)),He(!i.search||!i.search.includes("#"),al("#","search","hash",i)));let r=t===""||i.pathname==="",a=r?"/":i.pathname,o;if(a==null)o=s;else{let h=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?e[h]:"/"}let c=Rb(i,o),d=a&&a!=="/"&&a.endsWith("/"),u=(r||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const $s=t=>t.join("/").replace(/\/\/+/g,"/"),Fb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ib=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Wb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Sp=["post","put","patch","delete"];new Set(Sp);const Bb=["get",...Sp];new Set(Bb);function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},dr.apply(this,arguments)}const po=y.createContext(null),jp=y.createContext(null),Qs=y.createContext(null),go=y.createContext(null),Tn=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Np=y.createContext(null);function zb(t,e){let{relative:s}=e===void 0?{}:e;Pr()||He(!1);let{basename:n,navigator:i}=y.useContext(Qs),{hash:r,pathname:a,search:o}=xo(t,{relative:s}),c=a;return n!=="/"&&(c=a==="/"?n:$s([n,a])),i.createHref({pathname:c,search:o,hash:r})}function Pr(){return y.useContext(go)!=null}function Cn(){return Pr()||He(!1),y.useContext(go).location}function Mp(t){y.useContext(Qs).static||y.useLayoutEffect(t)}function Tp(){let{isDataRoute:t}=y.useContext(Tn);return t?tv():Hb()}function Hb(){Pr()||He(!1);let t=y.useContext(po),{basename:e,future:s,navigator:n}=y.useContext(Qs),{matches:i}=y.useContext(Tn),{pathname:r}=Cn(),a=JSON.stringify(wp(i,s.v7_relativeSplatPath)),o=y.useRef(!1);return Mp(()=>{o.current=!0}),y.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let h=kp(d,JSON.parse(a),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:$s([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,a,r,t])}function xo(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=y.useContext(Qs),{matches:i}=y.useContext(Tn),{pathname:r}=Cn(),a=JSON.stringify(wp(i,n.v7_relativeSplatPath));return y.useMemo(()=>kp(t,JSON.parse(a),r,s==="path"),[t,a,r,s])}function $b(t,e){return Yb(t,e)}function Yb(t,e,s,n){Pr()||He(!1);let{navigator:i}=y.useContext(Qs),{matches:r}=y.useContext(Tn),a=r[r.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Cn(),u;if(e){var h;let x=typeof e=="string"?di(e):e;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||He(!1),u=x}else u=d;let f=u.pathname||"/",m=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let p=bb(t,{pathname:m}),g=Xb(p&&p.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:$s([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:$s([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),r,s,n);return e&&g?y.createElement(go.Provider,{value:{location:dr({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fs.Pop}},g):g}function Ub(){let t=ev(),e=Wb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),s?y.createElement("pre",{style:i},s):null,null)}const Gb=y.createElement(Ub,null);class qb extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?y.createElement(Tn.Provider,{value:this.props.routeContext},y.createElement(Np.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kb(t){let{routeContext:e,match:s,children:n}=t,i=y.useContext(po);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),y.createElement(Tn.Provider,{value:e},n)}function Xb(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var r;if(!s)return null;if(s.errors)t=s.matches;else if((r=n)!=null&&r.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,o=(i=s)==null?void 0:i.errors;if(o!=null){let u=a.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);u>=0||He(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:m}=s,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let m,p=!1,g=null,x=null;s&&(m=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||Gb,c&&(d<0&&f===0?(sv("route-fallback"),p=!0,x=null):d===f&&(p=!0,x=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,f+1)),_=()=>{let S;return m?S=g:p?S=x:h.route.Component?S=y.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=u,y.createElement(Kb,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:s!=null},children:S})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(qb,{location:s.location,revalidation:s.revalidation,component:g,error:m,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var Cp=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Cp||{}),Pp=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Pp||{});function Zb(t){let e=y.useContext(po);return e||He(!1),e}function Jb(t){let e=y.useContext(jp);return e||He(!1),e}function Qb(t){let e=y.useContext(Tn);return e||He(!1),e}function Dp(t){let e=Qb(),s=e.matches[e.matches.length-1];return s.route.id||He(!1),s.route.id}function ev(){var t;let e=y.useContext(Np),s=Jb(),n=Dp();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function tv(){let{router:t}=Zb(Cp.UseNavigateStable),e=Dp(Pp.UseNavigateStable),s=y.useRef(!1);return Mp(()=>{s.current=!0}),y.useCallback(function(i,r){r===void 0&&(r={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,dr({fromRouteId:e},r)))},[t,e])}const Gu={};function sv(t,e,s){Gu[t]||(Gu[t]=!0)}function nv(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function ms(t){He(!1)}function iv(t){let{basename:e="/",children:s=null,location:n,navigationType:i=Fs.Pop,navigator:r,static:a=!1,future:o}=t;Pr()&&He(!1);let c=e.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:r,static:a,future:dr({v7_relativeSplatPath:!1},o)}),[c,o,r,a]);typeof n=="string"&&(n=di(n));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:p="default"}=n,g=y.useMemo(()=>{let x=si(u,c);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:p},navigationType:i}},[c,u,h,f,m,p,i]);return g==null?null:y.createElement(Qs.Provider,{value:d},y.createElement(go.Provider,{children:s,value:g}))}function rv(t){let{children:e,location:s}=t;return $b(Kl(e),s)}new Promise(()=>{});function Kl(t,e){e===void 0&&(e=[]);let s=[];return y.Children.forEach(t,(n,i)=>{if(!y.isValidElement(n))return;let r=[...e,i];if(n.type===y.Fragment){s.push.apply(s,Kl(n.props.children,r));return}n.type!==ms&&He(!1),!n.props.index||!n.props.children||He(!1);let a={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Kl(n.props.children,r)),s.push(a)}),s}function Ba(){return Ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ba.apply(this,arguments)}function Ep(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,r;for(r=0;r<n.length;r++)i=n[r],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function av(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ov(t,e){return t.button===0&&(!e||e==="_self")&&!av(t)}function Xl(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let n=t[s];return e.concat(Array.isArray(n)?n.map(i=>[s,i]):[[s,n]])},[]))}function lv(t,e){let s=Xl(t);return e&&e.forEach((n,i)=>{s.has(i)||e.getAll(i).forEach(r=>{s.append(i,r)})}),s}const cv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],uv="6";try{window.__reactRouterVersion=uv}catch{}const hv=y.createContext({isTransitioning:!1}),fv="startTransition",qu=mb[fv];function mv(t){let{basename:e,children:s,future:n,window:i}=t,r=y.useRef();r.current==null&&(r.current=gb({window:i,v5Compat:!0}));let a=r.current,[o,c]=y.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},u=y.useCallback(h=>{d&&qu?qu(()=>c(h)):c(h)},[c,d]);return y.useLayoutEffect(()=>a.listen(u),[a,u]),y.useEffect(()=>nv(n),[n]),y.createElement(iv,{basename:e,children:s,location:o.location,navigationType:o.action,navigator:a,future:n})}const pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pn=y.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:r,replace:a,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=Ep(e,cv),{basename:m}=y.useContext(Qs),p,g=!1;if(typeof d=="string"&&gv.test(d)&&(p=d,pv))try{let S=new URL(window.location.href),N=d.startsWith("//")?new URL(S.protocol+d):new URL(d),j=si(N.pathname,m);N.origin===S.origin&&j!=null?d=j+N.search+N.hash:g=!0}catch{}let x=zb(d,{relative:i}),v=bv(d,{replace:a,state:o,target:c,preventScrollReset:u,relative:i,viewTransition:h});function _(S){n&&n(S),S.defaultPrevented||v(S)}return y.createElement("a",Ba({},f,{href:p||x,onClick:g||r?n:_,ref:s,target:c}))}),xv=y.forwardRef(function(e,s){let{"aria-current":n="page",caseSensitive:i=!1,className:r="",end:a=!1,style:o,to:c,viewTransition:d,children:u}=e,h=Ep(e,dv),f=xo(c,{relative:h.relative}),m=Cn(),p=y.useContext(jp),{navigator:g,basename:x}=y.useContext(Qs),v=p!=null&&_v(f)&&d===!0,_=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,S=m.pathname,N=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(S=S.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&x&&(N=si(N,x)||N);const j=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let k=S===_||!a&&S.startsWith(_)&&S.charAt(j)==="/",T=N!=null&&(N===_||!a&&N.startsWith(_)&&N.charAt(_.length)==="/"),M={isActive:k,isPending:T,isTransitioning:v},P=k?n:void 0,O;typeof r=="function"?O=r(M):O=[r,k?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(M):o;return y.createElement(pn,Ba({},h,{"aria-current":P,className:O,ref:s,style:A,to:c,viewTransition:d}),typeof u=="function"?u(M):u)});var Zl;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Zl||(Zl={}));var Ku;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ku||(Ku={}));function yv(t){let e=y.useContext(po);return e||He(!1),e}function bv(t,e){let{target:s,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:o}=e===void 0?{}:e,c=Tp(),d=Cn(),u=xo(t,{relative:a});return y.useCallback(h=>{if(ov(h,s)){h.preventDefault();let f=n!==void 0?n:Wa(d)===Wa(u);c(t,{replace:f,state:i,preventScrollReset:r,relative:a,viewTransition:o})}},[d,c,u,n,i,s,t,r,a,o])}function vv(t){let e=y.useRef(Xl(t)),s=y.useRef(!1),n=Cn(),i=y.useMemo(()=>lv(n.search,s.current?null:e.current),[n.search]),r=Tp(),a=y.useCallback((o,c)=>{const d=Xl(typeof o=="function"?o(i):o);s.current=!0,r("?"+d,c)},[r,i]);return[i,a]}function _v(t,e){e===void 0&&(e={});let s=y.useContext(hv);s==null&&He(!1);let{basename:n}=yv(Zl.useViewTransitionState),i=xo(t,{relative:e.relative});if(!s.isTransitioning)return!1;let r=si(s.currentLocation.pathname,n)||s.currentLocation.pathname,a=si(s.nextLocation.pathname,n)||s.nextLocation.pathname;return ql(i.pathname,a)!=null||ql(i.pathname,r)!=null}const wv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ap=(...t)=>t.filter((e,s,n)=>!!e&&n.indexOf(e)===s).join(" ");var kv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Sv=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:a,...o},c)=>y.createElement("svg",{ref:c,...kv,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:Ap("lucide",i),...o},[...a.map(([d,u])=>y.createElement(d,u)),...Array.isArray(r)?r:[r]]));const Q=(t,e)=>{const s=y.forwardRef(({className:n,...i},r)=>y.createElement(Sv,{ref:r,iconNode:e,className:Ap(`lucide-${wv(t)}`,n),...i}));return s.displayName=`${t}`,s};const ni=Q("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const Xc=Q("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);const Zc=Q("ArrowUpFromLine",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const ur=Q("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const yo=Q("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);const ol=Q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const Jl=Q("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Op=Q("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);const Xu=Q("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const Zu=Q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const bo=Q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Ju=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Qu=Q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const jv=Q("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Rp=Q("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Nv=Q("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const eh=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const th=Q("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);const Mv=Q("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);const Ql=Q("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const Lp=Q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const hr=Q("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);const Tv=Q("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Fp=Q("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const za=Q("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const sh=Q("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const Cv=Q("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Ip=Q("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const ec=Q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Pv=Q("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Dv=Q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Ev=Q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Av=Q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const Ov=Q("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Vp=Q("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const Rv=Q("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);const Lv=Q("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);const Wp=Q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Fv=Q("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Jc=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Ha=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Iv=Q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Vv=Q("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);const Qc=Q("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const Bp=Q("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);const Dr=Q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const nh=Q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Wv=Q("TreePalm",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]);const ih=Q("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const tc=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Na=Q("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const sc=Q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const ui=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Dt=Q("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function ll(t){return l.jsx("svg",{viewBox:"0 0 741 741",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:l.jsx("path",{d:"m0-71v71h741v-142h-741zm0 882.5v70.5h741v-141h-741zm355.5-782.94c-3.3 0.83-8.48 2.92-11.5 4.62-3.02 1.71-6.85 4.12-8.5 5.36-1.65 1.23-4.89 4.66-7.2 7.6-2.31 2.95-5.52 8.06-7.13 11.36-1.61 3.3-5.03 13.2-7.6 22-2.57 8.8-5.52 18.7-6.55 22-1.03 3.3-4.63 15.9-8.01 28-3.37 12.1-6.97 24.7-7.98 28-1.02 3.3-3.5 11.63-5.51 18.5-2.01 6.88-6.14 19.93-9.18 29-3.04 9.08-8.34 22.35-11.76 29.5-3.43 7.15-8.26 16.15-10.75 20-2.48 3.85-7.22 10.38-10.53 14.5-3.31 4.13-9.12 10.22-12.91 13.55-3.79 3.32-8.69 7.4-10.89 9.06-2.2 1.65-7.6 5.29-12 8.09-4.4 2.79-18.35 10.37-31 16.84-12.65 6.47-25.7 13.66-29 15.97-3.3 2.32-7.61 6.19-9.58 8.6-1.98 2.41-4.74 6.42-6.14 8.89-1.41 2.48-3.38 6.98-4.4 10-1.29 3.85-1.83 8.35-1.81 15 0.03 7.34 0.58 11.09 2.42 16.5 1.39 4.06 4.31 9.5 6.95 12.97 2.51 3.28 7.09 8 10.19 10.5 3.09 2.49 13.44 8.52 23 13.4 9.55 4.88 21.19 10.92 25.87 13.43 4.68 2.51 11.87 6.81 16 9.55 4.12 2.75 10.65 7.55 14.5 10.67 3.85 3.12 9.93 8.82 13.5 12.66 3.57 3.84 9.4 11.22 12.95 16.4 3.55 5.18 8.58 13.7 11.17 18.92 2.59 5.23 5.69 11.98 6.9 15 1.2 3.03 3.67 9.78 5.49 15 1.82 5.23 5.56 16.7 8.31 25.5 2.76 8.8 7.55 24.78 10.65 35.5 3.11 10.73 7.84 26.93 10.51 36 2.68 9.08 6.93 23.81 9.45 32.75 2.51 8.94 5.64 18.39 6.95 21 1.31 2.61 4.09 7 6.19 9.75 2.09 2.75 5.63 6.67 7.87 8.72 2.23 2.04 6.54 5.05 9.56 6.69 3.02 1.64 8.43 3.73 12 4.66 4.88 1.26 8.62 1.53 15 1.06 6.56-0.49 10.1-1.36 15.5-3.85 3.85-1.77 9.25-4.88 12-6.92 2.75-2.03 6.56-5.65 8.47-8.03 1.91-2.38 4.98-7.25 6.82-10.83 1.84-3.57 4.02-8.97 4.84-12 0.82-3.02 2.79-10 4.36-15.5 1.58-5.5 5.36-18.55 8.4-29 3.05-10.45 8.5-29.12 12.12-41.5 3.61-12.37 7.45-25.54 8.53-29.25 1.08-3.71 4.71-14.51 8.07-24 3.36-9.49 8.51-22.2 11.45-28.25 2.93-6.05 7.22-13.92 9.53-17.5 2.3-3.57 6.76-9.65 9.91-13.5 3.15-3.85 8.94-10.04 12.86-13.75 3.93-3.71 10.4-9.04 14.39-11.84 3.99-2.8 11.3-7.48 16.25-10.4 4.95-2.92 17.77-9.76 28.5-15.19 10.73-5.44 21.52-11.27 24-12.96 2.48-1.69 6.71-5.5 9.41-8.47 2.7-2.96 6.38-8.54 8.18-12.39 1.8-3.85 3.75-10.04 4.34-13.75 0.73-4.63 0.76-8.94 0.07-13.75-0.55-3.85-1.92-9.59-3.05-12.75-1.12-3.16-4.05-8.56-6.5-12-2.45-3.44-6.81-8.02-9.7-10.17-2.89-2.16-16.05-9.52-29.25-16.35-13.2-6.84-28.09-15.08-33.1-18.33-5-3.24-11.08-7.21-13.5-8.81-2.42-1.59-8.67-7.22-13.9-12.5-5.23-5.27-12.25-13.64-15.6-18.59-3.36-4.95-8.02-12.6-10.35-17-2.34-4.4-5.36-10.7-6.71-14-1.36-3.3-4.63-11.85-7.28-19-2.66-7.15-6.72-19.75-9.03-28-2.32-8.25-5.29-18.37-6.6-22.5-1.31-4.12-5.28-17.62-8.81-30-3.53-12.37-8.1-28.12-10.15-35-2.06-6.87-4.52-15.42-5.48-19-0.96-3.57-3.15-9.87-4.87-14-1.72-4.12-5.34-10.42-8.03-14-3.25-4.3-7.22-8.01-11.75-10.97-3.76-2.46-9.32-5.31-12.34-6.33-3.02-1.03-9.1-2.04-13.5-2.26-5.13-0.26-10.16 0.14-14 1.12z"})})}async function ee(t,e="GET",s){const n=t.startsWith("/")?t.slice(1):t,i={method:e,headers:{Accept:"application/json","Content-Type":"application/json"}};s&&(e==="POST"||e==="DELETE")&&(i.body=JSON.stringify(s));const r=await fetch(n,i);if(!r.ok)throw new Error(`${t} -> ${r.status}`);return r.json()}const G={schedule:()=>ee("/api/schedule"),scheduleTodayWithHistory:()=>ee("/api/schedule/today_with_history"),status:()=>ee("/api/status"),health:()=>ee("/api/health"),version:()=>ee("/api/version"),horizon:()=>ee("/api/forecast/horizon"),config:()=>ee("/api/config"),configSave:t=>ee("/api/config/save","POST",t),configReset:()=>ee("/api/config/reset","POST"),setTheme:t=>ee("/api/theme","POST",t),haAverage:()=>ee("/api/ha/average"),haWaterToday:()=>ee("/api/ha/water_today"),haTest:t=>ee("/api/ha/test","POST",t),haEntities:()=>ee("/api/ha/entities"),haServices:()=>ee("/api/ha/services"),haEntityState:t=>ee(`/api/ha/entity/${t}`),learningStatus:()=>ee("/api/learning/status"),learningHistory:()=>ee("/api/learning/history"),learningDailyMetrics:()=>ee("/api/learning/daily_metrics"),learningRun:()=>ee("/api/learning/run","POST"),learningLoops:()=>ee("/api/learning/loops"),theme:()=>ee("/api/themes"),runPlanner:()=>ee("/api/run_planner","POST"),loadServerPlan:()=>ee("/api/db/current_schedule"),pushToDb:()=>ee("/api/db/push_current","POST"),resetToOptimal:()=>ee("/api/schedule/save","POST"),simulate:async t=>{const e=await fetch("api/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Simulation failed");return e.json()},getAdvice:async()=>{const t=await fetch("api/analyst/advice");if(!t.ok)throw new Error("Failed to fetch advice");return t.json()},analystRun:()=>ee("/api/analyst/run"),debug:()=>ee("/api/debug"),debugLogs:()=>ee("/api/debug/logs"),historySoc:(t="today")=>ee(`/api/history/soc?date=${t}`),forecastEval:()=>ee("/api/forecast/eval"),forecastDay:t=>ee(t?`/api/forecast/day?date=${t}`:"/api/forecast/day"),forecastRunEval:(t=7)=>ee("/api/forecast/run_eval","POST",{days_back:t}),forecastRunForward:(t=48)=>ee("/api/forecast/run_forward","POST",{horizon_hours:t}),schedulerStatus:()=>ee("/api/scheduler/status"),aurora:{dashboard:()=>ee("/api/aurora/dashboard"),briefing:t=>ee("/api/aurora/briefing","POST",t),toggleReflex:t=>ee("/api/aurora/config/toggle_reflex","POST",{enabled:t})},performanceData:(t=7)=>ee(`/api/performance/data?days=${t}`),executor:{status:()=>ee("/api/executor/status"),run:()=>ee("/api/executor/run","POST"),pause:(t=60)=>ee("/api/executor/pause","POST",{duration_minutes:t}),resume:()=>ee("/api/executor/resume","POST"),quickAction:{get:()=>ee("/api/executor/quick-action"),set:(t,e)=>ee("/api/executor/quick-action","POST",{type:t,duration_minutes:e}),clear:()=>ee("/api/executor/quick-action","DELETE")}},waterBoost:{status:()=>ee("/api/water/boost"),start:t=>ee("/api/water/boost","POST",{duration_minutes:t}),cancel:()=>ee("/api/water/boost","DELETE")},energyToday:()=>ee("/api/energy/today"),energyRange:t=>ee(`/api/energy/range?period=${t}`)};function zp(){const[t,e]=y.useState("dark"),[s,n]=y.useState(!0),i=c=>c==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":c,r=c=>{const d=document.documentElement;c==="dark"?d.classList.add("dark"):d.classList.remove("dark")};y.useEffect(()=>{(async()=>{try{const u=(await G.config())?.ui?.theme_mode;if(u&&["light","dark","system"].includes(u))e(u),r(i(u));else{const h=localStorage.getItem("darkstar-theme");h&&["light","dark","system"].includes(h)?(e(h),r(i(h))):(e("dark"),r("dark"))}}catch{const u=localStorage.getItem("darkstar-theme")||"dark";e(u),r(i(u))}finally{n(!1)}})()},[]),y.useEffect(()=>{if(t!=="system")return;const c=window.matchMedia("(prefers-color-scheme: dark)"),d=u=>{r(u.matches?"dark":"light")};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[t]);const a=async()=>{const c=t==="dark"?"light":"dark";e(c),r(c),localStorage.setItem("darkstar-theme",c);try{await G.configSave({ui:{theme_mode:c}})}catch(d){console.warn("[ThemeToggle] Failed to save theme to backend:",d)}};if(s)return l.jsx("div",{className:"h-12 w-12 rounded-2xl border border-line/70 bg-surface/80 flex items-center justify-center",children:l.jsx("div",{className:"h-5 w-5 rounded-full bg-muted/30 animate-pulse"})});const o=i(t);return l.jsxs("button",{type:"button",onClick:a,className:"group relative flex items-center justify-center w-12 h-12 rounded-2xl border border-line/70 bg-surface/80 hover:bg-surface2 transition",title:`Switch to ${o==="dark"?"light":"dark"} mode`,children:[o==="dark"?l.jsx(Dr,{className:"h-5 w-5 text-muted group-hover:text-accent transition-colors"}):l.jsx(Ev,{className:"h-5 w-5 text-muted group-hover:text-accent transition-colors"}),l.jsx("span",{className:"absolute -right-2 top-1 rounded-full bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition z-50 whitespace-nowrap",children:o==="dark"?"Light mode":"Dark mode"})]})}const Ci=({to:t,icon:e,label:s,onClick:n})=>{const i="group relative flex items-center justify-center w-12 h-12 rounded-2xl border border-line/70 bg-surface2 hover:brightness-110 transition",r="ring-2 ring-accent/50",a=l.jsxs(l.Fragment,{children:[l.jsx(e,{className:"h-5 w-5 text-muted group-hover:text-text"}),l.jsx("span",{className:"absolute -right-2 top-1 rounded-pill bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition z-50 whitespace-nowrap",children:s})]});return t?l.jsx(xv,{to:t,className:({isActive:o})=>`${i} ${o?r:""}`,title:s,children:a}):l.jsx("button",{onClick:n,className:i,title:s,children:a})};function Bv(){const{pathname:t}=Cn(),[e,s]=y.useState(!1),[n,i]=y.useState(null),[r,a]=y.useState("...");y.useEffect(()=>{const c=async()=>{try{await G.status(),i(!0)}catch{i(!1)}};c();const d=setInterval(c,3e4);return()=>clearInterval(d)},[]),y.useEffect(()=>{G.version().then(c=>a(c.version||"dev")).catch(()=>a("dev"))},[]);const o=()=>s(!1);return l.jsxs(l.Fragment,{children:[l.jsx("aside",{className:"hidden lg:block fixed left-6 top-6 bottom-6 z-50",children:l.jsxs("div",{className:"h-full w-16 rounded-2xl bg-surface shadow-float border border-line/60 flex flex-col items-center gap-3 p-2",children:[l.jsxs(pn,{to:"/",className:"mt-1 mb-1 flex items-center justify-center group relative",children:[l.jsx("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-surface2 border border-line/60 overflow-hidden",children:l.jsx(ll,{className:"h-8 w-8 text-accent"})}),l.jsxs("span",{className:"absolute left-14 top-1/2 -translate-y-1/2 rounded-pill bg-surface2/90 border border-line/60 px-2 py-0.5 text-[10px] text-muted opacity-0 group-hover:opacity-100 transition whitespace-nowrap z-50 pointer-events-none",children:["darkstar v",r]})]}),l.jsx(Ci,{to:"/",icon:za,label:"Dash"}),l.jsx(Ci,{to:"/executor",icon:Ql,label:"Executor"}),l.jsx(Ci,{to:"/aurora",icon:Jl,label:"Aurora"}),l.jsx(Ci,{to:"/debug",icon:Xu,label:"Debug"}),l.jsx("div",{className:"mt-auto w-8 h-px bg-line/70"}),l.jsxs("div",{className:"py-2 flex flex-col items-center gap-2",children:[l.jsx("div",{className:`h-1.5 w-1.5 rounded-full transition-all duration-500 ${n===!0?"bg-good shadow-[0_0_8px_rgba(31,178,86,0.5)]":n===!1?"bg-bad":"bg-slate-700"}`,title:n===!0?"System Online":n===!1?"System Offline":"Connecting..."}),l.jsxs("span",{className:"text-[10px] text-muted/30 font-mono select-none tracking-widest whitespace-nowrap opacity-50 hover:opacity-100 transition",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:["darkstar v",r]})]}),l.jsx(zp,{}),l.jsx(Ci,{to:"/settings",icon:Ha,label:"Settings"})]})}),l.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-surface/95 border-b border-line/60 flex items-center justify-between px-4 py-2",children:[l.jsx("button",{type:"button","aria-label":"Open navigation",className:"inline-flex h-10 w-10 items-center justify-center rounded-xl border border-line/70 bg-surface2 text-muted hover:border-accent hover:text-accent",onClick:()=>s(!0),children:l.jsx(Dv,{className:"h-5 w-5"})}),l.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[l.jsx(ll,{className:"h-5 w-5 text-accent"}),l.jsxs("span",{className:"font-mono",children:["v",r]})]}),l.jsx("div",{className:"w-10"})]}),e&&l.jsxs("div",{className:"lg:hidden fixed inset-0 z-50 bg-[rgba(4,6,10,0.92)] backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-line/60",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-2xl bg-surface2 border border-line/60",children:l.jsx(ll,{className:"h-5 w-5 text-accent"})}),l.jsxs("span",{className:"text-muted font-mono",children:["darkstar v",r]})]}),l.jsx("button",{type:"button","aria-label":"Close navigation",className:"inline-flex h-9 w-9 items-center justify-center rounded-xl border border-line/70 bg-surface text-muted hover:border-accent hover:text-accent",onClick:o,children:l.jsx(ui,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",onClick:o,children:[l.jsxs(pn,{to:"/",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[l.jsx(za,{className:`h-6 w-6 ${t==="/"?"text-accent":"text-muted"}`}),l.jsx("span",{className:"text-sm",children:"Dash"})]}),l.jsxs(pn,{to:"/executor",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/executor"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[l.jsx(Ql,{className:`h-6 w-6 ${t==="/executor"?"text-accent":"text-muted"}`}),l.jsx("span",{className:"text-sm",children:"Executor"})]}),l.jsxs(pn,{to:"/aurora",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/aurora"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[l.jsx(Jl,{className:`h-6 w-6 ${t==="/aurora"?"text-accent":"text-muted"}`}),l.jsx("span",{className:"text-sm",children:"Aurora"})]}),l.jsxs(pn,{to:"/debug",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/debug"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[l.jsx(Xu,{className:`h-6 w-6 ${t==="/debug"?"text-accent":"text-muted"}`}),l.jsx("span",{className:"text-sm",children:"Debug"})]}),l.jsxs(pn,{to:"/settings",className:`flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border ${t==="/settings"?"bg-surface2 border-accent/50 ring-1 ring-accent/50":"bg-surface/50 border-line/70"}`,children:[l.jsx(Ha,{className:`h-6 w-6 ${t==="/settings"?"text-accent":"text-muted"}`}),l.jsx("span",{className:"text-sm",children:"Settings"})]})]})]})]})}class zv extends y.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("[ErrorBoundary] Caught error:",e),console.error("[ErrorBoundary] Component stack:",s.componentStack)}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-canvas flex items-center justify-center p-6",children:l.jsxs("div",{className:"max-w-md w-full bg-surface border border-line rounded-2xl p-8 shadow-float text-center",children:[l.jsx("div",{className:"h-16 w-16 mx-auto mb-4 rounded-full bg-red-500/20 border border-red-500/40 flex items-center justify-center",children:l.jsx("svg",{className:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("h1",{className:"text-lg font-semibold text-text mb-2",children:"Something went wrong"}),l.jsx("p",{className:"text-sm text-muted mb-4",children:"The application encountered an unexpected error."}),this.state.error&&l.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30",children:l.jsx("code",{className:"text-xs text-red-400 break-all",children:this.state.error.message})}),l.jsx("button",{onClick:this.handleReload,className:"px-6 py-2.5 rounded-full bg-accent text-canvas font-medium text-sm hover:bg-accent2 transition-colors",children:"Reload Page"}),l.jsx("p",{className:"mt-4 text-xs text-muted/60",children:"If this keeps happening, check the browser console for details."})]})}):this.props.children}}const Hv={card:"rounded-xl2 bg-surface shadow-float border border-line/60"};function re({children:t,className:e=""}){return l.jsx("div",{className:`${Hv.card} ${e}`,children:t})}function Er(t){return t+.5|0}const Is=(t,e,s)=>Math.max(Math.min(t,s),e);function Yi(t){return Is(Er(t*2.55),0,255)}function Ys(t){return Is(Er(t*255),0,255)}function ys(t){return Is(Er(t/2.55)/100,0,1)}function rh(t){return Is(Er(t*100),0,100)}const jt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},nc=[..."0123456789ABCDEF"],$v=t=>nc[t&15],Yv=t=>nc[(t&240)>>4]+nc[t&15],ta=t=>(t&240)>>4===(t&15),Uv=t=>ta(t.r)&&ta(t.g)&&ta(t.b)&&ta(t.a);function Gv(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&jt[t[1]]*17,g:255&jt[t[2]]*17,b:255&jt[t[3]]*17,a:e===5?jt[t[4]]*17:255}:(e===7||e===9)&&(s={r:jt[t[1]]<<4|jt[t[2]],g:jt[t[3]]<<4|jt[t[4]],b:jt[t[5]]<<4|jt[t[6]],a:e===9?jt[t[7]]<<4|jt[t[8]]:255})),s}const qv=(t,e)=>t<255?e(t):"";function Kv(t){var e=Uv(t)?$v:Yv;return t?"#"+e(t.r)+e(t.g)+e(t.b)+qv(t.a,e):void 0}const Xv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Hp(t,e,s){const n=e*Math.min(s,1-s),i=(r,a=(r+t/30)%12)=>s-n*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function Zv(t,e,s){const n=(i,r=(i+t/60)%6)=>s-s*e*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Jv(t,e,s){const n=Hp(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)n[i]*=1-e-s,n[i]+=e;return n}function Qv(t,e,s,n,i){return t===i?(e-s)/n+(e<s?6:0):e===i?(s-t)/n+2:(t-e)/n+4}function ed(t){const s=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(s,n,i),a=Math.min(s,n,i),o=(r+a)/2;let c,d,u;return r!==a&&(u=r-a,d=o>.5?u/(2-r-a):u/(r+a),c=Qv(s,n,i,u,r),c=c*60+.5),[c|0,d||0,o]}function td(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Ys)}function sd(t,e,s){return td(Hp,t,e,s)}function e_(t,e,s){return td(Jv,t,e,s)}function t_(t,e,s){return td(Zv,t,e,s)}function $p(t){return(t%360+360)%360}function s_(t){const e=Xv.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Yi(+e[5]):Ys(+e[5]));const i=$p(+e[2]),r=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=e_(i,r,a):e[1]==="hsv"?n=t_(i,r,a):n=sd(i,r,a),{r:n[0],g:n[1],b:n[2],a:s}}function n_(t,e){var s=ed(t);s[0]=$p(s[0]+e),s=sd(s),t.r=s[0],t.g=s[1],t.b=s[2]}function i_(t){if(!t)return;const e=ed(t),s=e[0],n=rh(e[1]),i=rh(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${i}%, ${ys(t.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const ah={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},oh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function r_(){const t={},e=Object.keys(oh),s=Object.keys(ah);let n,i,r,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],i=0;i<s.length;i++)r=s[i],o=o.replace(r,ah[r]);r=parseInt(oh[a],16),t[o]=[r>>16&255,r>>8&255,r&255]}return t}let sa;function a_(t){sa||(sa=r_(),sa.transparent=[0,0,0,0]);const e=sa[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const o_=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function l_(t){const e=o_.exec(t);let s=255,n,i,r;if(e){if(e[7]!==n){const a=+e[7];s=e[8]?Yi(a):Is(a*255,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?Yi(n):Is(n,0,255)),i=255&(e[4]?Yi(i):Is(i,0,255)),r=255&(e[6]?Yi(r):Is(r,0,255)),{r:n,g:i,b:r,a:s}}}function c_(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ys(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const cl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Vn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function d_(t,e,s){const n=Vn(ys(t.r)),i=Vn(ys(t.g)),r=Vn(ys(t.b));return{r:Ys(cl(n+s*(Vn(ys(e.r))-n))),g:Ys(cl(i+s*(Vn(ys(e.g))-i))),b:Ys(cl(r+s*(Vn(ys(e.b))-r))),a:t.a+s*(e.a-t.a)}}function na(t,e,s){if(t){let n=ed(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=sd(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Yp(t,e){return t&&Object.assign(e||{},t)}function lh(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ys(t[3]))):(e=Yp(t,{r:0,g:0,b:0,a:1}),e.a=Ys(e.a)),e}function u_(t){return t.charAt(0)==="r"?l_(t):s_(t)}class fr{constructor(e){if(e instanceof fr)return e;const s=typeof e;let n;s==="object"?n=lh(e):s==="string"&&(n=Gv(e)||a_(e)||u_(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Yp(this._rgb);return e&&(e.a=ys(e.a)),e}set rgb(e){this._rgb=lh(e)}rgbString(){return this._valid?c_(this._rgb):void 0}hexString(){return this._valid?Kv(this._rgb):void 0}hslString(){return this._valid?i_(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,i=e.rgb;let r;const a=s===r?.5:s,o=2*a-1,c=n.a-i.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;r=1-d,n.r=255&d*n.r+r*i.r+.5,n.g=255&d*n.g+r*i.g+.5,n.b=255&d*n.b+r*i.b+.5,n.a=a*n.a+(1-a)*i.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=d_(this._rgb,e._rgb,s)),this}clone(){return new fr(this.rgb)}alpha(e){return this._rgb.a=Ys(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Er(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return na(this._rgb,2,e),this}darken(e){return na(this._rgb,2,-e),this}saturate(e){return na(this._rgb,1,e),this}desaturate(e){return na(this._rgb,1,-e),this}rotate(e){return n_(this._rgb,e),this}}function hs(){}const h_=(()=>{let t=0;return()=>t++})();function ge(t){return t==null}function Re(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ze(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function bt(t,e){return ze(t)?t:e}function ie(t,e){return typeof t>"u"?e:t}const f_=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Up=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ne(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function pe(t,e,s,n){let i,r,a;if(Re(t))for(r=t.length,i=0;i<r;i++)e.call(s,t[i],i);else if(ye(t))for(a=Object.keys(t),r=a.length,i=0;i<r;i++)e.call(s,t[a[i]],a[i])}function $a(t,e){let s,n,i,r;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],r=e[s],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Ya(t){if(Re(t))return t.map(Ya);if(ye(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=Ya(t[s[i]]);return e}return t}function Gp(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function m_(t,e,s,n){if(!Gp(t))return;const i=e[t],r=s[t];ye(i)&&ye(r)?mr(i,r,n):e[t]=Ya(r)}function mr(t,e,s){const n=Re(e)?e:[e],i=n.length;if(!ye(t))return t;s=s||{};const r=s.merger||m_;let a;for(let o=0;o<i;++o){if(a=n[o],!ye(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)r(c[d],t,a,s)}return t}function Qi(t,e){return mr(t,e,{merger:p_})}function p_(t,e,s){if(!Gp(t))return;const n=e[t],i=s[t];ye(n)&&ye(i)?Qi(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ya(i))}const ch={"":t=>t,x:t=>t.x,y:t=>t.y};function g_(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function x_(t){const e=g_(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function qs(t,e){return(ch[e]||(ch[e]=x_(e)))(t)}function nd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const pr=t=>typeof t<"u",Ks=t=>typeof t=="function",dh=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function y_(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ke=Math.PI,Ce=2*ke,b_=Ce+ke,Ua=Number.POSITIVE_INFINITY,v_=ke/180,Ge=ke/2,cn=ke/4,uh=ke*2/3,Vs=Math.log10,Et=Math.sign;function _n(t,e,s){return Math.abs(t-e)<s}function hh(t){const e=Math.round(t);t=_n(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(Vs(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function __(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,r)=>i-r).pop(),e}function w_(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function ii(t){return!w_(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function k_(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function qp(t,e,s){let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n][s],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Bt(t){return t*(ke/180)}function id(t){return t*(180/ke)}function fh(t){if(!ze(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function Kp(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let r=Math.atan2(n,s);return r<-.5*ke&&(r+=Ce),{angle:r,distance:i}}function ic(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function S_(t,e){return(t-e+b_)%Ce-ke}function ot(t){return(t%Ce+Ce)%Ce}function gr(t,e,s,n){const i=ot(t),r=ot(e),a=ot(s),o=ot(r-i),c=ot(a-i),d=ot(i-r),u=ot(i-a);return i===r||i===a||n&&r===a||o>c&&d<u}function et(t,e,s){return Math.max(e,Math.min(s,t))}function j_(t){return et(t,-32768,32767)}function bs(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function rd(t,e,s){s=s||(a=>t[a]<e);let n=t.length-1,i=0,r;for(;n-i>1;)r=i+n>>1,s(r)?i=r:n=r;return{lo:i,hi:n}}const vs=(t,e,s,n)=>rd(t,s,n?i=>{const r=t[i][e];return r<s||r===s&&t[i+1][e]===s}:i=>t[i][e]<s),N_=(t,e,s)=>rd(t,s,n=>t[n][e]>=s);function M_(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const Xp=["push","pop","shift","splice","unshift"];function T_(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Xp.forEach(s=>{const n="_onData"+nd(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...r){const a=i.apply(this,r);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...r)}),a}})})}function mh(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(Xp.forEach(r=>{delete t[r]}),delete t._chartjs)}function Zp(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Jp=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Qp(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,Jp.call(window,()=>{n=!1,t.apply(e,s)}))}}function C_(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const ad=t=>t==="start"?"left":t==="end"?"right":"center",rt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,P_=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function eg(t,e,s){const n=e.length;let i=0,r=n;if(t._sorted){const{iScale:a,vScale:o,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:h,max:f,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(i=Math.min(vs(c,u,h).lo,s?n:vs(e,u,a.getPixelForValue(h)).lo),d){const g=c.slice(0,i+1).reverse().findIndex(x=>!ge(x[o.axis]));i-=Math.max(0,g)}i=et(i,0,n-1)}if(p){let g=Math.max(vs(c,a.axis,f,!0).hi+1,s?0:vs(e,u,a.getPixelForValue(f),!0).hi+1);if(d){const x=c.slice(g-1).findIndex(v=>!ge(v[o.axis]));g+=Math.max(0,x)}r=et(g,i,n)-i}else r=n-i}return{start:i,count:r}}function tg(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const r=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),r}const ia=t=>t===0||t===1,ph=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ce/s)),gh=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ce/s)+1,er={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ge)+1,easeOutSine:t=>Math.sin(t*Ge),easeInOutSine:t=>-.5*(Math.cos(ke*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ia(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ia(t)?t:ph(t,.075,.3),easeOutElastic:t=>ia(t)?t:gh(t,.075,.3),easeInOutElastic(t){return ia(t)?t:t<.5?.5*ph(t*2,.1125,.45):.5+.5*gh(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-er.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?er.easeInBounce(t*2)*.5:er.easeOutBounce(t*2-1)*.5+.5};function od(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function xh(t){return od(t)?t:new fr(t)}function dl(t){return od(t)?t:new fr(t).saturate(.5).darken(.1).hexString()}const D_=["x","y","borderWidth","radius","tension"],E_=["color","borderColor","backgroundColor"];function A_(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:E_},numbers:{type:"number",properties:D_}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function O_(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const yh=new Map;function R_(t,e){e=e||{};const s=t+JSON.stringify(e);let n=yh.get(s);return n||(n=new Intl.NumberFormat(t,e),yh.set(s,n)),n}function Ar(t,e,s){return R_(e,s).format(t)}const sg={values(t){return Re(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,r=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),r=L_(t,s)}const a=Vs(Math.abs(r)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),Ar(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(Vs(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?sg.numeric.call(this,t,e,s):""}};function L_(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var vo={formatters:sg};function F_(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Nn=Object.create(null),rc=Object.create(null);function tr(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const r=s[n];t=t[r]||(t[r]=Object.create(null))}return t}function ul(t,e,s){return typeof e=="string"?mr(tr(t,e),s):mr(tr(t,""),e)}class I_{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>dl(i.backgroundColor),this.hoverBorderColor=(n,i)=>dl(i.borderColor),this.hoverColor=(n,i)=>dl(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return ul(this,e,s)}get(e){return tr(this,e)}describe(e,s){return ul(rc,e,s)}override(e,s){return ul(Nn,e,s)}route(e,s,n,i){const r=tr(this,e),a=tr(this,n),o="_"+s;Object.defineProperties(r,{[o]:{value:r[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[o],d=a[i];return ye(c)?Object.assign({},d,c):ie(c,d)},set(c){this[o]=c}}})}apply(e){e.forEach(s=>s(this))}}var Le=new I_({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[A_,O_,F_]);function V_(t){return!t||ge(t.size)||ge(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ga(t,e,s,n,i){let r=e[i];return r||(r=e[i]=t.measureText(i).width,s.push(i)),r>n&&(n=r),n}function W_(t,e,s,n){n=n||{};let i=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},r=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const o=s.length;let c,d,u,h,f;for(c=0;c<o;c++)if(h=s[c],h!=null&&!Re(h))a=Ga(t,i,r,a,h);else if(Re(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!Re(f)&&(a=Ga(t,i,r,a,f));t.restore();const m=r.length/2;if(m>s.length){for(c=0;c<m;c++)delete i[r[c]];r.splice(0,m)}return a}function dn(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function bh(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ac(t,e,s,n){ng(t,e,s,n,null)}function ng(t,e,s,n,i){let r,a,o,c,d,u,h,f;const m=e.pointStyle,p=e.rotation,g=e.radius;let x=(p||0)*v_;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),m){default:i?t.ellipse(s,n,i/2,g,0,0,Ce):t.arc(s,n,g,0,Ce),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(s+Math.sin(x)*u,n-Math.cos(x)*g),x+=uh,t.lineTo(s+Math.sin(x)*u,n-Math.cos(x)*g),x+=uh,t.lineTo(s+Math.sin(x)*u,n-Math.cos(x)*g),t.closePath();break;case"rectRounded":d=g*.516,c=g-d,a=Math.cos(x+cn)*c,h=Math.cos(x+cn)*(i?i/2-d:c),o=Math.sin(x+cn)*c,f=Math.sin(x+cn)*(i?i/2-d:c),t.arc(s-h,n-o,d,x-ke,x-Ge),t.arc(s+f,n-a,d,x-Ge,x),t.arc(s+h,n+o,d,x,x+Ge),t.arc(s-f,n+a,d,x+Ge,x+ke),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=i?i/2:c,t.rect(s-u,n-c,2*u,2*c);break}x+=cn;case"rectRot":h=Math.cos(x)*(i?i/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(i?i/2:g),t.moveTo(s-h,n-o),t.lineTo(s+f,n-a),t.lineTo(s+h,n+o),t.lineTo(s-f,n+a),t.closePath();break;case"crossRot":x+=cn;case"cross":h=Math.cos(x)*(i?i/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(i?i/2:g),t.moveTo(s-h,n-o),t.lineTo(s+h,n+o),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a);break;case"star":h=Math.cos(x)*(i?i/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(i?i/2:g),t.moveTo(s-h,n-o),t.lineTo(s+h,n+o),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a),x+=cn,h=Math.cos(x)*(i?i/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(i?i/2:g),t.moveTo(s-h,n-o),t.lineTo(s+h,n+o),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a);break;case"line":a=i?i/2:Math.cos(x)*g,o=Math.sin(x)*g,t.moveTo(s-a,n-o),t.lineTo(s+a,n+o);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(x)*(i?i/2:g),n+Math.sin(x)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ts(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function _o(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function wo(t){t.restore()}function B_(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const r=(e.x+s.x)/2;t.lineTo(r,e.y),t.lineTo(r,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function z_(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function H_(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ge(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function $_(t,e,s,n,i){if(i.strikethrough||i.underline){const r=t.measureText(n),a=e-r.actualBoundingBoxLeft,o=e+r.actualBoundingBoxRight,c=s-r.actualBoundingBoxAscent,d=s+r.actualBoundingBoxDescent,u=i.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,u),t.lineTo(o,u),t.stroke()}}function Y_(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Mn(t,e,s,n,i,r={}){const a=Re(e)?e:[e],o=r.strokeWidth>0&&r.strokeColor!=="";let c,d;for(t.save(),t.font=i.string,H_(t,r),c=0;c<a.length;++c)d=a[c],r.backdrop&&Y_(t,r.backdrop),o&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),ge(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(d,s,n,r.maxWidth)),t.fillText(d,s,n,r.maxWidth),$_(t,s,n,d,r),n+=Number(i.lineHeight);t.restore()}function xr(t,e){const{x:s,y:n,w:i,h:r,radius:a}=e;t.arc(s+a.topLeft,n+a.topLeft,a.topLeft,1.5*ke,ke,!0),t.lineTo(s,n+r-a.bottomLeft),t.arc(s+a.bottomLeft,n+r-a.bottomLeft,a.bottomLeft,ke,Ge,!0),t.lineTo(s+i-a.bottomRight,n+r),t.arc(s+i-a.bottomRight,n+r-a.bottomRight,a.bottomRight,Ge,0,!0),t.lineTo(s+i,n+a.topRight),t.arc(s+i-a.topRight,n+a.topRight,a.topRight,0,-Ge,!0),t.lineTo(s+a.topLeft,n)}const U_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,G_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function q_(t,e){const s=(""+t).match(U_);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const K_=t=>+t||0;function ld(t,e){const s={},n=ye(e),i=n?Object.keys(e):e,r=ye(t)?n?a=>ie(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of i)s[a]=K_(r(a));return s}function ig(t){return ld(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wn(t){return ld(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ut(t){const e=ig(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ze(t,e){t=t||{},e=e||Le.font;let s=ie(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=ie(t.style,e.style);n&&!(""+n).match(G_)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:ie(t.family,e.family),lineHeight:q_(ie(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:ie(t.weight,e.weight),string:""};return i.string=V_(i),i}function Ui(t,e,s,n){let i,r,a;for(i=0,r=t.length;i<r;++i)if(a=t[i],a!==void 0&&a!==void 0)return a}function X_(t,e,s){const{min:n,max:i}=t,r=Up(e,(i-n)/2),a=(o,c)=>s&&o===0?0:o+c;return{min:a(n,-Math.abs(r)),max:a(i,r)}}function en(t,e){return Object.assign(Object.create(t),e)}function cd(t,e=[""],s,n,i=()=>t[0]){const r=s||t;typeof n>"u"&&(n=lg("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:n,_getTarget:i,override:o=>cd([o,...t],e,r,n)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete o._keys,delete t[0][c],!0},get(o,c){return ag(o,c,()=>i1(c,e,t,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,c){return _h(o).includes(c)},ownKeys(o){return _h(o)},set(o,c,d){const u=o._storage||(o._storage=i());return o[c]=u[c]=d,delete o._keys,!0}})}function ri(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:rg(t,n),setContext:r=>ri(t,r,s,n),override:r=>ri(t.override(r),e,s,n)};return new Proxy(i,{deleteProperty(r,a){return delete r[a],delete t[a],!0},get(r,a,o){return ag(r,a,()=>J_(r,a,o))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(r,a,o){return t[a]=o,delete r[a],!0}})}function rg(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Ks(s)?s:()=>s,isIndexable:Ks(n)?n:()=>n}}const Z_=(t,e)=>t?t+nd(e):e,dd=(t,e)=>ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ag(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function J_(t,e,s){const{_proxy:n,_context:i,_subProxy:r,_descriptors:a}=t;let o=n[e];return Ks(o)&&a.isScriptable(e)&&(o=Q_(e,o,t,s)),Re(o)&&o.length&&(o=e1(e,o,t,a.isIndexable)),dd(e,o)&&(o=ri(o,i,r&&r[e],a)),o}function Q_(t,e,s,n){const{_proxy:i,_context:r,_subProxy:a,_stack:o}=s;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let c=e(r,a||n);return o.delete(t),dd(t,c)&&(c=ud(i._scopes,i,t,c)),c}function e1(t,e,s,n){const{_proxy:i,_context:r,_subProxy:a,_descriptors:o}=s;if(typeof r.index<"u"&&n(t))return e[r.index%e.length];if(ye(e[0])){const c=e,d=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=ud(d,i,t,u);e.push(ri(h,r,a&&a[t],o))}}return e}function og(t,e,s){return Ks(t)?t(e,s):t}const t1=(t,e)=>t===!0?e:typeof t=="string"?qs(e,t):void 0;function s1(t,e,s,n,i){for(const r of e){const a=t1(s,r);if(a){t.add(a);const o=og(a._fallback,s,i);if(typeof o<"u"&&o!==s&&o!==n)return o}else if(a===!1&&typeof n<"u"&&s!==n)return null}return!1}function ud(t,e,s,n){const i=e._rootScopes,r=og(e._fallback,s,n),a=[...t,...i],o=new Set;o.add(n);let c=vh(o,a,s,r||s,n);return c===null||typeof r<"u"&&r!==s&&(c=vh(o,a,r,c,n),c===null)?!1:cd(Array.from(o),[""],i,r,()=>n1(e,s,n))}function vh(t,e,s,n,i){for(;s;)s=s1(t,e,s,n,i);return s}function n1(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return Re(i)&&ye(s)?s:i||{}}function i1(t,e,s,n){let i;for(const r of e)if(i=lg(Z_(r,t),s),typeof i<"u")return dd(t,i)?ud(s,n,t,i):i}function lg(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function _h(t){let e=t._keys;return e||(e=t._keys=r1(t._scopes)),e}function r1(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function cg(t,e,s,n){const{iScale:i}=t,{key:r="r"}=this._parsing,a=new Array(n);let o,c,d,u;for(o=0,c=n;o<c;++o)d=o+s,u=e[d],a[o]={r:i.parse(qs(u,r),d)};return a}const a1=Number.EPSILON||1e-14,ai=(t,e)=>e<t.length&&!t[e].skip&&t[e],dg=t=>t==="x"?"y":"x";function o1(t,e,s,n){const i=t.skip?e:t,r=e,a=s.skip?e:s,o=ic(r,i),c=ic(a,r);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:r.x-h*(a.x-i.x),y:r.y-h*(a.y-i.y)},next:{x:r.x+f*(a.x-i.x),y:r.y+f*(a.y-i.y)}}}function l1(t,e,s){const n=t.length;let i,r,a,o,c,d=ai(t,0);for(let u=0;u<n-1;++u)if(c=d,d=ai(t,u+1),!(!c||!d)){if(_n(e[u],0,a1)){s[u]=s[u+1]=0;continue}i=s[u]/e[u],r=s[u+1]/e[u],o=Math.pow(i,2)+Math.pow(r,2),!(o<=9)&&(a=3/Math.sqrt(o),s[u]=i*a*e[u],s[u+1]=r*a*e[u])}}function c1(t,e,s="x"){const n=dg(s),i=t.length;let r,a,o,c=ai(t,0);for(let d=0;d<i;++d){if(a=o,o=c,c=ai(t,d+1),!o)continue;const u=o[s],h=o[n];a&&(r=(u-a[s])/3,o[`cp1${s}`]=u-r,o[`cp1${n}`]=h-r*e[d]),c&&(r=(c[s]-u)/3,o[`cp2${s}`]=u+r,o[`cp2${n}`]=h+r*e[d])}}function d1(t,e="x"){const s=dg(e),n=t.length,i=Array(n).fill(0),r=Array(n);let a,o,c,d=ai(t,0);for(a=0;a<n;++a)if(o=c,c=d,d=ai(t,a+1),!!c){if(d){const u=d[e]-c[e];i[a]=u!==0?(d[s]-c[s])/u:0}r[a]=o?d?Et(i[a-1])!==Et(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}l1(t,i,r),c1(t,r,e)}function ra(t,e,s){return Math.max(Math.min(t,s),e)}function u1(t,e){let s,n,i,r,a,o=ts(t[0],e);for(s=0,n=t.length;s<n;++s)a=r,r=o,o=s<n-1&&ts(t[s+1],e),r&&(i=t[s],a&&(i.cp1x=ra(i.cp1x,e.left,e.right),i.cp1y=ra(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=ra(i.cp2x,e.left,e.right),i.cp2y=ra(i.cp2y,e.top,e.bottom)))}function h1(t,e,s,n,i){let r,a,o,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")d1(t,i);else{let d=n?t[t.length-1]:t[0];for(r=0,a=t.length;r<a;++r)o=t[r],c=o1(d,o,t[Math.min(r+1,a-(n?0:1))%a],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}e.capBezierPoints&&u1(t,s)}function hd(){return typeof window<"u"&&typeof document<"u"}function fd(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function qa(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const ko=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function f1(t,e){return ko(t).getPropertyValue(e)}const m1=["top","right","bottom","left"];function kn(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const r=m1[i];n[r]=parseFloat(t[e+"-"+r+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const p1=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function g1(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:r}=n;let a=!1,o,c;if(p1(i,r,t.target))o=i,c=r;else{const d=e.getBoundingClientRect();o=n.clientX-d.left,c=n.clientY-d.top,a=!0}return{x:o,y:c,box:a}}function Qt(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=ko(s),r=i.boxSizing==="border-box",a=kn(i,"padding"),o=kn(i,"border","width"),{x:c,y:d,box:u}=g1(t,s),h=a.left+(u&&o.left),f=a.top+(u&&o.top);let{width:m,height:p}=e;return r&&(m-=a.width+o.width,p-=a.height+o.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/p*s.height/n)}}function x1(t,e,s){let n,i;if(e===void 0||s===void 0){const r=t&&fd(t);if(!r)e=t.clientWidth,s=t.clientHeight;else{const a=r.getBoundingClientRect(),o=ko(r),c=kn(o,"border","width"),d=kn(o,"padding");e=a.width-d.width-c.width,s=a.height-d.height-c.height,n=qa(o.maxWidth,r,"clientWidth"),i=qa(o.maxHeight,r,"clientHeight")}}return{width:e,height:s,maxWidth:n||Ua,maxHeight:i||Ua}}const Ws=t=>Math.round(t*10)/10;function y1(t,e,s,n){const i=ko(t),r=kn(i,"margin"),a=qa(i.maxWidth,t,"clientWidth")||Ua,o=qa(i.maxHeight,t,"clientHeight")||Ua,c=x1(t,e,s);let{width:d,height:u}=c;if(i.boxSizing==="content-box"){const f=kn(i,"border","width"),m=kn(i,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-r.width),u=Math.max(0,n?d/n:u-r.height),d=Ws(Math.min(d,a,c.maxWidth)),u=Ws(Math.min(u,o,c.maxHeight)),d&&!u&&(u=Ws(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=Ws(Math.floor(u*n))),{width:d,height:u}}function wh(t,e,s){const n=e||1,i=Ws(t.height*n),r=Ws(t.width*n);t.height=Ws(t.height),t.width=Ws(t.width);const a=t.canvas;return a.style&&(s||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==i||a.width!==r?(t.currentDevicePixelRatio=n,a.height=i,a.width=r,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const b1=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};hd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function kh(t,e){const s=f1(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function gn(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function v1(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function _1(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},a=gn(t,i,s),o=gn(i,r,s),c=gn(r,e,s),d=gn(a,o,s),u=gn(o,c,s);return gn(d,u,s)}const w1=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},k1=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Jn(t,e,s){return t?w1(e,s):k1()}function ug(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function hg(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function fg(t){return t==="angle"?{between:gr,compare:S_,normalize:ot}:{between:bs,compare:(e,s)=>e-s,normalize:e=>e}}function Sh({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function S1(t,e,s){const{property:n,start:i,end:r}=s,{between:a,normalize:o}=fg(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&a(o(e[d%c][n]),i,r);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function mg(t,e,s){if(!s)return[t];const{property:n,start:i,end:r}=s,a=e.length,{compare:o,between:c,normalize:d}=fg(n),{start:u,end:h,loop:f,style:m}=S1(t,e,s),p=[];let g=!1,x=null,v,_,S;const N=()=>c(i,S,v)&&o(i,S)!==0,j=()=>o(r,v)===0||c(r,S,v),k=()=>g||N(),T=()=>!g||j();for(let M=u,P=u;M<=h;++M)_=e[M%a],!_.skip&&(v=d(_[n]),v!==S&&(g=c(v,i,r),x===null&&k()&&(x=o(v,i)===0?M:P),x!==null&&T()&&(p.push(Sh({start:x,end:M,loop:f,count:a,style:m})),x=null),P=M,S=v));return x!==null&&p.push(Sh({start:x,end:h,loop:f,count:a,style:m})),p}function pg(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const r=mg(n[i],t.points,e);r.length&&s.push(...r)}return s}function j1(t,e,s,n){let i=0,r=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(r+=i);r>i&&t[r%e].skip;)r--;return r%=e,{start:i,end:r}}function N1(t,e,s,n){const i=t.length,r=[];let a=e,o=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%i];d.skip||d.stop?o.skip||(n=!1,r.push({start:e%i,end:(c-1)%i,loop:n}),e=a=d.stop?c:null):(a=c,o.skip&&(e=c)),o=d}return a!==null&&r.push({start:e%i,end:a%i,loop:n}),r}function M1(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const r=!!t._loop,{start:a,end:o}=j1(s,i,r,n);if(n===!0)return jh(t,[{start:a,end:o,loop:r}],s,e);const c=o<a?o+i:o,d=!!t._fullLoop&&a===0&&o===i-1;return jh(t,N1(s,a,c,d),s,e)}function jh(t,e,s,n){return!n||!n.setContext||!s?e:T1(t,e,s,n)}function T1(t,e,s,n){const i=t._chart.getContext(),r=Nh(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,c=s.length,d=[];let u=r,h=e[0].start,f=h;function m(p,g,x,v){const _=o?-1:1;if(p!==g){for(p+=c;s[p%c].skip;)p-=_;for(;s[g%c].skip;)g+=_;p%c!==g%c&&(d.push({start:p%c,end:g%c,loop:x,style:v}),u=v,h=g%c)}}for(const p of e){h=o?h:p.start;let g=s[h%c],x;for(f=h+1;f<=p.end;f++){const v=s[f%c];x=Nh(n.setContext(en(i,{type:"segment",p0:g,p1:v,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),C1(x,u)&&m(h,f-1,p.loop,u),g=v,u=x}h<f-1&&m(h,f-1,p.loop,u)}return d}function Nh(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function C1(t,e){if(!e)return!1;const s=[],n=function(i,r){return od(r)?(s.includes(r)||s.push(r),s.indexOf(r)):r};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function aa(t,e,s){return t.options.clip?t[s]:e[s]}function P1(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:aa(s,e,"left"),right:aa(s,e,"right"),top:aa(n,e,"top"),bottom:aa(n,e,"bottom")}:e}function gg(t,e){const s=e._clip;if(s.disabled)return!1;const n=P1(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}class D1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const r=s.listeners[i],a=s.duration;r.forEach(o=>o({chart:e,initial:s.initial,numSteps:a,currentStep:Math.min(n-s.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Jp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let a=r.length-1,o=!1,c;for(;a>=0;--a)c=r[a],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=r.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ps=new D1;const Mh="transparent",E1={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=xh(t||Mh),i=n.valid&&xh(e||Mh);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class A1{constructor(e,s,n,i){const r=s[n];i=Ui([e.to,i,r,e.from]);const a=Ui([e.from,r,i]);this._active=!0,this._fn=e.fn||E1[e.type||typeof a],this._easing=er[e.easing]||er.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,a=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ui([e.to,s,i,e.from]),this._from=Ui([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,r=this._from,a=this._loop,o=this._to;let c;if(this._active=r!==o&&(a||s<n),!this._active){this._target[i]=o,this._notify(!0);return}if(s<0){this._target[i]=r;return}c=s/n%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(r,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class xg{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ye(e))return;const s=Object.keys(Le.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!ye(r))return;const a={};for(const o of s)a[o]=r[o];(Re(r.properties)&&r.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,a)})})}_animateOptions(e,s){const n=s.options,i=R1(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&O1(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,s){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),a=Object.keys(s),o=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,s));continue}const u=s[d];let h=r[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,o);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}r[d]=h=new A1(f,e,d,u),i.push(h)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return ps.add(this._chart,n),!0}}function O1(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const r=t[n[i]];r&&r.active()&&s.push(r.wait())}return Promise.all(s)}function R1(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Th(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,r=s.max===void 0?e:0;return{start:n?r:i,end:n?i:r}}function L1(t,e,s){if(s===!1)return!1;const n=Th(t,s),i=Th(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function F1(t){let e,s,n,i;return ye(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function yg(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,r;for(i=0,r=n.length;i<r;++i)s.push(n[i].index);return s}function Ch(t,e,s,n={}){const i=t.keys,r=n.mode==="single";let a,o,c,d;if(e===null)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(c=+i[a],c===s){if(u=!0,n.all)continue;break}d=t.values[c],ze(d)&&(r||e===0||Et(e)===Et(d))&&(e+=d)}return!u&&!n.all?0:e}function I1(t,e){const{iScale:s,vScale:n}=e,i=s.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],o[c]={[i]:u,[r]:t[u]};return o}function hl(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function V1(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function W1(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function B1(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Ph(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const r=t[i.index];if(s&&r>0||!s&&r<0)return i.index}return null}function Dh(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:r,vScale:a,index:o}=n,c=r.axis,d=a.axis,u=V1(r,a,n),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[c]:g,[d]:x}=p,v=p._stacks||(p._stacks={});f=v[d]=B1(i,u,g),f[o]=x,f._top=Ph(f,a,!0,n.type),f._bottom=Ph(f,a,!1,n.type);const _=f._visualValues||(f._visualValues={});_[o]=x}}function fl(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function z1(t,e){return en(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function H1(t,e,s){return en(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Pi(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const r=i._stacks;if(!r||r[n]===void 0||r[n][s]===void 0)return;delete r[n][s],r[n]._visualValues!==void 0&&r[n]._visualValues[s]!==void 0&&delete r[n]._visualValues[s]}}}const ml=t=>t==="reset"||t==="none",Eh=(t,e)=>e?t:Object.assign({},t),$1=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:yg(s,!0),values:null};class tn{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Pi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,r=s.xAxisID=ie(n.xAxisID,fl(e,"x")),a=s.yAxisID=ie(n.yAxisID,fl(e,"y")),o=s.rAxisID=ie(n.rAxisID,fl(e,"r")),c=s.indexAxis,d=s.iAxisID=i(c,r,a,o),u=s.vAxisID=i(c,a,r,o);s.xScale=this.getScaleForId(r),s.yScale=this.getScaleForId(a),s.rScale=this.getScaleForId(o),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&mh(this._data,this),e._stacked&&Pi(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ye(s)){const i=this._cachedMeta;this._data=I1(s,i)}else if(n!==s){if(n){mh(n,this);const i=this._cachedMeta;Pi(i),i._parsed=[]}s&&Object.isExtensible(s)&&T_(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=s._stacked;s._stacked=hl(s.vScale,s),s.stack!==n.stack&&(i=!0,Pi(s),s.stack=n.stack),this._resyncElements(e),(i||r!==s._stacked)&&(Dh(this,s._parsed),s._stacked=hl(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:a}=n,o=r.axis;let c=e===0&&s===i.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{Re(i[e])?f=this.parseArrayData(n,i,e,s):ye(i[e])?f=this.parseObjectData(n,i,e,s):f=this.parsePrimitiveData(n,i,e,s);const m=()=>h[o]===null||d&&h[o]<d[o];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}a&&Dh(this,f)}parsePrimitiveData(e,s,n,i){const{iScale:r,vScale:a}=e,o=r.axis,c=a.axis,d=r.getLabels(),u=r===a,h=new Array(i);let f,m,p;for(f=0,m=i;f<m;++f)p=f+n,h[f]={[o]:u||r.parse(d[p],p),[c]:a.parse(s[p],p)};return h}parseArrayData(e,s,n,i){const{xScale:r,yScale:a}=e,o=new Array(i);let c,d,u,h;for(c=0,d=i;c<d;++c)u=c+n,h=s[u],o[c]={x:r.parse(h[0],u),y:a.parse(h[1],u)};return o}parseObjectData(e,s,n,i){const{xScale:r,yScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(i);let u,h,f,m;for(u=0,h=i;u<h;++u)f=u+n,m=s[f],d[u]={x:r.parse(qs(m,o),f),y:a.parse(qs(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,r=this._cachedMeta,a=s[e.axis],o={keys:yg(i,!0),values:s._stacks[e.axis]._visualValues};return Ch(o,a,r.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const r=n[s.axis];let a=r===null?NaN:r;const o=i&&n._stacks[s.axis];i&&o&&(i.values=o,a=Ch(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,a=i.length,o=this._getOtherScale(e),c=$1(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=W1(o);let f,m;function p(){m=i[f];const g=m[o.axis];return!ze(m[e.axis])||u>g||h<g}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),r));++f);if(r){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,r,a;for(i=0,r=s.length;i<r;++i)a=s[i][e.axis],ze(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=F1(ie(this.options.clip,L1(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],r=s.chartArea,a=[],o=this._drawStart||0,c=this._drawCount||i.length-o,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,r,o,c),u=o;u<o+c;++u){const h=i[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,r))}for(u=0;u<a.length;++u)a[u].draw(e,r)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];r=a.$context||(a.$context=H1(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=z1(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!s,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",r=this._cachedDataOpts,a=e+"-"+s,o=r[a],c=this.enableOptionSharing&&pr(n);if(o)return Eh(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Le.elements[e]),p=()=>this.getContext(n,i,s),g=d.resolveNamedOptions(f,m,p,h);return g.$shared&&(g.$shared=c,r[a]=Object.freeze(Eh(g,c))),g}_resolveAnimations(e,s,n){const i=this.chart,r=this._cachedDataOpts,a=`animation-${s}`,o=r[a];if(o)return o;let c;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new xg(i,c&&c.animations);return c&&c._cacheable&&(r[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||ml(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,r=this.getSharedOptions(n),a=this.includeOptions(s,r)||r!==i;return this.updateSharedOptions(r,s,n),{sharedOptions:r,includeOptions:a}}updateElement(e,s,n,i){ml(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!ml(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const r=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const i=n.length,r=s.length,a=Math.min(r,i);a&&this.parse(0,a),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,s,n=!0){const i=this._cachedMeta,r=i.data,a=e+s;let o;const c=d=>{for(d.length+=s,o=d.length-1;o>=a;o--)d[o]=d[o-s]};for(c(r),o=e;o<a;++o)r[o]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,s),n&&this.updateElements(r,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&Pi(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Y1(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,r=s.length;i<r;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=Zp(n.sort((i,r)=>i-r))}return t._cache.$bar}function U1(t){const e=t.iScale,s=Y1(e,t.type);let n=e._length,i,r,a,o;const c=()=>{a===32767||a===-32768||(pr(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(i=0,r=s.length;i<r;++i)a=e.getPixelForValue(s[i]),c();for(o=void 0,i=0,r=e.ticks.length;i<r;++i)a=e.getPixelForTick(i),c();return n}function G1(t,e,s,n){const i=s.barThickness;let r,a;return ge(i)?(r=e.min*s.categoryPercentage,a=s.barPercentage):(r=i*n,a=1),{chunk:r/n,ratio:a,start:e.pixels[t]-r/2}}function q1(t,e,s,n){const i=e.pixels,r=i[t];let a=t>0?i[t-1]:null,o=t<i.length-1?i[t+1]:null;const c=s.categoryPercentage;a===null&&(a=r-(o===null?e.end-e.start:o-r)),o===null&&(o=r+r-a);const d=r-(r-Math.min(a,o))/2*c;return{chunk:Math.abs(o-a)/2*c/n,ratio:s.barPercentage,start:d}}function K1(t,e,s,n){const i=s.parse(t[0],n),r=s.parse(t[1],n),a=Math.min(i,r),o=Math.max(i,r);let c=a,d=o;Math.abs(a)>Math.abs(o)&&(c=o,d=a),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:i,end:r,min:a,max:o}}function bg(t,e,s,n){return Re(t)?K1(t,e,s,n):e[s.axis]=s.parse(t,n),e}function Ah(t,e,s,n){const i=t.iScale,r=t.vScale,a=i.getLabels(),o=i===r,c=[];let d,u,h,f;for(d=s,u=s+n;d<u;++d)f=e[d],h={},h[i.axis]=o||i.parse(a[d],d),c.push(bg(f,h,r,d));return c}function pl(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function X1(t,e,s){return t!==0?Et(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function Z1(t){let e,s,n,i,r;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",r="start"):(i="start",r="end"),{start:s,end:n,reverse:e,top:i,bottom:r}}function J1(t,e,s,n){let i=e.borderSkipped;const r={};if(!i){t.borderSkipped=r;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:c,top:d,bottom:u}=Z1(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=d:(s._bottom||0)===n?i=u:(r[Oh(u,a,o,c)]=!0,i=d)),r[Oh(i,a,o,c)]=!0,t.borderSkipped=r}function Oh(t,e,s,n){return n?(t=Q1(t,e,s),t=Rh(t,s,e)):t=Rh(t,e,s),t}function Q1(t,e,s){return t===e?s:t===s?e:t}function Rh(t,e,s){return t==="start"?e:t==="end"?s:t}function ew(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class vg extends tn{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,n,i){return Ah(e,s,n,i)}parseArrayData(e,s,n,i){return Ah(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:r,vScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=r.axis==="x"?o:c,u=a.axis==="x"?o:c,h=[];let f,m,p,g;for(f=n,m=n+i;f<m;++f)g=s[f],p={},p[r.axis]=r.parse(qs(g,d),f),h.push(bg(qs(g,u),p,a,f));return h}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const r=n._custom;r&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,r=this.getParsed(e),a=r._custom,o=pl(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const r=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,i);for(let m=s;m<s+n;m++){const p=this.getParsed(m),g=r||ge(p[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),v=(p._stacks||{})[o.axis],_={horizontal:d,base:g.base,enableBorderRadius:!v||pl(p._custom)||a===v._top||a===v._bottom,x:d?g.head:x.center,y:d?x.center:g.head,height:d?x.size:Math.abs(g.size),width:d?Math.abs(g.size):x.size};f&&(_.options=h||this.resolveDataElementOptions(m,e[m].active?"active":i));const S=_.options||e[m].options;J1(_,S,v,a),ew(_,S,u.ratio),this.updateElement(e[m],m,_,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=n.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(s),c=o&&o[n.axis],d=u=>{const h=u._parsed.find(m=>m[n.axis]===c),f=h&&h[u.vScale.axis];if(ge(f)||isNaN(f))return!0};for(const u of i)if(!(s!==void 0&&d(u))&&((r===!1||a.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[ie(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const i=this._getStacks(e,n),r=s!==void 0?i.indexOf(s):-1;return r===-1?i.length-1:r}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let r,a;for(r=0,a=s.data.length;r<a;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=e.barThickness;return{min:o||U1(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:r,minBarLength:a}}=this,o=r||0,c=this.getParsed(e),d=c._custom,u=pl(d);let h=c[s.axis],f=0,m=n?this.applyStack(s,c,n):h,p,g;m!==h&&(f=m-h,m=h),u&&(h=d.barStart,m=d.barEnd-d.barStart,h!==0&&Et(h)!==Et(d.barEnd)&&(f=0),f+=h);const x=!ge(r)&&!u?r:f;let v=s.getPixelForValue(x);if(this.chart.getDataVisibility(e)?p=s.getPixelForValue(f+m):p=v,g=p-v,Math.abs(g)<a){g=X1(g,s,o)*a,h===o&&(v-=g/2);const _=s.getPixelForDecimal(0),S=s.getPixelForDecimal(1),N=Math.min(_,S),j=Math.max(_,S);v=Math.max(Math.min(v,j),N),p=v+g,n&&!u&&(c._stacks[s.axis]._visualValues[i]=s.getValueForPixel(p)-s.getValueForPixel(v))}if(v===s.getPixelForValue(o)){const _=Et(g)*s.getLineWidthForValue(o)/2;v+=_,g-=_}return{size:g,base:v,head:p,center:p+g/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,r=i.skipNull,a=ie(i.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(s.grouped){const u=r?this._getStackCount(e):s.stackCount,h=i.barThickness==="flex"?q1(e,s,i,u*d):G1(e,s,i,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ie(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+m;o=h.start+h.chunk*p+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(a,s.min*s.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)this.getParsed(r)[s.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}class tw extends tn{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,i){const r=super.parsePrimitiveData(e,s,n,i);for(let a=0;a<r.length;a++)r[a]._custom=this.resolveDataElementOptions(a+n).radius;return r}parseArrayData(e,s,n,i){const r=super.parseArrayData(e,s,n,i);for(let a=0;a<r.length;a++){const o=s[n+a];r[a]._custom=ie(o[2],this.resolveDataElementOptions(a+n).radius)}return r}parseObjectData(e,s,n,i){const r=super.parseObjectData(e,s,n,i);for(let a=0;a<r.length;a++){const o=s[n+a];r[a]._custom=ie(o&&o.r&&+o.r,this.resolveDataElementOptions(a+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=s,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=r.getLabelForValue(a.y),d=a._custom;return{label:n[e]||"",value:"("+o+", "+c+(d?", "+d:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,i){const r=i==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(s,i),u=a.axis,h=o.axis;for(let f=s;f<s+n;f++){const m=e[f],p=!r&&this.getParsed(f),g={},x=g[u]=r?a.getPixelForDecimal(.5):a.getPixelForValue(p[u]),v=g[h]=r?o.getBasePixel():o.getPixelForValue(p[h]);g.skip=isNaN(x)||isNaN(v),d&&(g.options=c||this.resolveDataElementOptions(f,m.active?"active":i),r&&(g.options.radius=0)),this.updateElement(m,f,g,i)}}resolveDataElementOptions(e,s){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,s);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return s!=="active"&&(i.radius=0),i.radius+=ie(n&&n._custom,r),i}}function sw(t,e,s){let n=1,i=1,r=0,a=0;if(e<Ce){const o=t,c=o+e,d=Math.cos(o),u=Math.sin(o),h=Math.cos(c),f=Math.sin(c),m=(S,N,j)=>gr(S,o,c,!0)?1:Math.max(N,N*s,j,j*s),p=(S,N,j)=>gr(S,o,c,!0)?-1:Math.min(N,N*s,j,j*s),g=m(0,d,h),x=m(Ge,u,f),v=p(ke,d,h),_=p(ke+Ge,u,f);n=(g-v)/2,i=(x-_)/2,r=-(g+v)/2,a=-(x+_)/2}return{ratioX:n,ratioY:i,offsetX:r,offsetY:a}}class md extends tn{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data,{labels:{pointStyle:n,textAlign:i,color:r,useBorderRadius:a,borderRadius:o}}=e.legend.options;return s.labels.length&&s.datasets.length?s.labels.map((c,d)=>{const h=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(d),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:i,pointStyle:n,borderRadius:a&&(o||h.borderRadius),index:d}}):[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let r=c=>+n[c];if(ye(n[e])){const{key:c="value"}=this._parsing;r=d=>+qs(n[d],c)}let a,o;for(a=e,o=e+s;a<o;++a)i._parsed[a]=r(a)}}_getRotation(){return Bt(this.options.rotation-90)}_getCircumference(){return Bt(this.options.circumference)}_getRotationExtents(){let e=Ce,s=-Ce;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),a=i._getCircumference();e=Math.min(e,r),s=Math.max(s,r+a)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,r=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),c=Math.min(f_(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=sw(h,u,c),x=(n.width-a)/f,v=(n.height-a)/m,_=Math.max(Math.min(x,v)/2,0),S=Up(this.options.radius,_),N=Math.max(S*c,0),j=(S-N)/this._getVisibleDatasetWeightTotal();this.offsetX=p*S,this.offsetY=g*S,i.total=this.calculateTotal(),this.outerRadius=S-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/Ce)}updateElements(e,s,n,i){const r=i==="reset",a=this.chart,o=a.chartArea,d=a.options.animation,u=(o.left+o.right)/2,h=(o.top+o.bottom)/2,f=r&&d.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:g,includeOptions:x}=this._getSharedOptions(s,i);let v=this._getRotation(),_;for(_=0;_<s;++_)v+=this._circumference(_,r);for(_=s;_<s+n;++_){const S=this._circumference(_,r),N=e[_],j={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+S,circumference:S,outerRadius:p,innerRadius:m};x&&(j.options=g||this.resolveDataElementOptions(_,N.active?"active":i)),v+=S,this.updateElement(N,_,j,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?Ce*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ar(s._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,r,a,o,c;if(!e){for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){a=n.getDatasetMeta(i),e=a.data,o=a.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)c=o.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const r=this.resolveDataElementOptions(n);s=Math.max(s,r.offset||0,r.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(ie(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class _g extends tn{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=s,a=this.chart._animationsDisabled;let{start:o,count:c}=eg(s,i,a);this._drawStart=o,this._drawCount=c,tg(s)&&(o=0,c=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:d},e),this.updateElements(i,o,c,e)}updateElements(e,s,n,i){const r=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,i),f=a.axis,m=o.axis,{spanGaps:p,segment:g}=this.options,x=ii(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||i==="none",_=s+n,S=e.length;let N=s>0&&this.getParsed(s-1);for(let j=0;j<S;++j){const k=e[j],T=v?k:{};if(j<s||j>=_){T.skip=!0;continue}const M=this.getParsed(j),P=ge(M[m]),O=T[f]=a.getPixelForValue(M[f],j),A=T[m]=r||P?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,M,c):M[m],j);T.skip=isNaN(O)||isNaN(A)||P,T.stop=j>0&&Math.abs(M[f]-N[f])>x,g&&(T.parsed=M,T.raw=d.data[j]),h&&(T.options=u||this.resolveDataElementOptions(j,k.active?"active":i)),v||this.updateElement(k,j,T,i),N=M}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class wg extends tn{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((r,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ar(s._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,s,n,i){return cg.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<s.min&&(s.min=r),r>s.max&&(s.max=r))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,n=e.options,i=Math.min(s.right-s.left,s.bottom-s.top),r=Math.max(i/2,0),a=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),o=(r-a)/e.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,s,n,i){const r=i==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,f=d.getIndexAngle(0)-.5*ke;let m=f,p;const g=360/this.countVisibleElements();for(p=0;p<s;++p)m+=this._computeAngle(p,i,g);for(p=s;p<s+n;p++){const x=e[p];let v=m,_=m+this._computeAngle(p,i,g),S=a.getDataVisibility(p)?d.getDistanceFromCenterForValue(this.getParsed(p).r):0;m=_,r&&(c.animateScale&&(S=0),c.animateRotate&&(v=_=f));const N={x:u,y:h,innerRadius:0,outerRadius:S,startAngle:v,endAngle:_,options:this.resolveDataElementOptions(p,x.active?"active":i)};this.updateElement(x,p,N,i)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?Bt(this.resolveDataElementOptions(e,s).angle||n):0}}class nw extends md{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class kg extends tn{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,i){return cg.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta,n=s.dataset,i=s.data||[],r=s.iScale.getLabels();if(n.points=i,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:a};this.updateElement(n,void 0,o,e)}this.updateElements(i,0,i.length,e)}updateElements(e,s,n,i){const r=this._cachedMeta.rScale,a=i==="reset";for(let o=s;o<s+n;o++){const c=e[o],d=this.resolveDataElementOptions(o,c.active?"active":i),u=r.getPointPositionForValue(o,this.getParsed(o).r),h=a?r.xCenter:u.x,f=a?r.yCenter:u.y,m={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(c,o,m,i)}}}class iw extends tn{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=s,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=r.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+c+")"}}update(e){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:r,count:a}=eg(s,n,i);if(this._drawStart=r,this._drawCount=a,tg(s)&&(r=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:c}=s;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!c._decimated,o.points=n;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:d},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,r,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,i){const r=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),h=this.getSharedOptions(u),f=this.includeOptions(i,h),m=a.axis,p=o.axis,{spanGaps:g,segment:x}=this.options,v=ii(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||i==="none";let S=s>0&&this.getParsed(s-1);for(let N=s;N<s+n;++N){const j=e[N],k=this.getParsed(N),T=_?j:{},M=ge(k[p]),P=T[m]=a.getPixelForValue(k[m],N),O=T[p]=r||M?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,k,c):k[p],N);T.skip=isNaN(P)||isNaN(O)||M,T.stop=N>0&&Math.abs(k[m]-S[m])>v,x&&(T.parsed=k,T.raw=d.data[N]),f&&(T.options=h||this.resolveDataElementOptions(N,j.active?"active":i)),_||this.updateElement(j,N,T,i),S=k}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let o=0;for(let c=s.length-1;c>=0;--c)o=Math.max(o,s[c].size(this.resolveDataElementOptions(c))/2);return o>0&&o}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,a)/2}}var rw=Object.freeze({__proto__:null,BarController:vg,BubbleController:tw,DoughnutController:md,LineController:_g,PieController:nw,PolarAreaController:wg,RadarController:kg,ScatterController:iw});function un(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pd{static override(e){Object.assign(pd.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return un()}parse(){return un()}format(){return un()}add(){return un()}diff(){return un()}startOf(){return un()}endOf(){return un()}}var Sg={_date:pd};function aw(t,e,s,n){const{controller:i,data:r,_sorted:a}=t,o=i._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&r.length){const d=o._reversePixels?N_:vs;if(n){if(i._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(r,e,s-h),m=d(r,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(r,e,s);if(c){const{vScale:h}=i._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(g=>!ge(g[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(g=>!ge(g[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function So(t,e,s,n,i){const r=t.getSortedVisibleDatasetMetas(),a=s[e];for(let o=0,c=r.length;o<c;++o){const{index:d,data:u}=r[o],{lo:h,hi:f}=aw(r[o],e,a,i);for(let m=h;m<=f;++m){const p=u[m];p.skip||n(p,d,m)}}}function ow(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const r=e?Math.abs(n.x-i.x):0,a=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function gl(t,e,s,n,i){const r=[];return!i&&!t.isPointInArea(e)||So(t,s,e,function(o,c,d){!i&&!ts(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&r.push({element:o,datasetIndex:c,index:d})},!0),r}function lw(t,e,s,n){let i=[];function r(a,o,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],n),{angle:h}=Kp(a,{x:e.x,y:e.y});gr(h,d,u)&&i.push({element:a,datasetIndex:o,index:c})}return So(t,s,e,r),i}function cw(t,e,s,n,i,r){let a=[];const o=ow(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,i);if(n&&!m)return;const p=u.getCenterPoint(i);if(!(!!r||t.isPointInArea(p))&&!m)return;const x=o(e,p);x<c?(a=[{element:u,datasetIndex:h,index:f}],c=x):x===c&&a.push({element:u,datasetIndex:h,index:f})}return So(t,s,e,d),a}function xl(t,e,s,n,i,r){return!r&&!t.isPointInArea(e)?[]:s==="r"&&!n?lw(t,e,s,i):cw(t,e,s,n,i,r)}function Lh(t,e,s,n,i){const r=[],a=s==="x"?"inXRange":"inYRange";let o=!1;return So(t,s,e,(c,d,u)=>{c[a]&&c[a](e[s],i)&&(r.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(e.x,e.y,i))}),n&&!o?[]:r}var dw={modes:{index(t,e,s,n){const i=Qt(e,t),r=s.axis||"x",a=s.includeInvisible||!1,o=s.intersect?gl(t,i,r,n,a):xl(t,i,r,!1,n,a),c=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const i=Qt(e,t),r=s.axis||"xy",a=s.includeInvisible||!1;let o=s.intersect?gl(t,i,r,n,a):xl(t,i,r,!1,n,a);if(o.length>0){const c=o[0].datasetIndex,d=t.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(t,e,s,n){const i=Qt(e,t),r=s.axis||"xy",a=s.includeInvisible||!1;return gl(t,i,r,n,a)},nearest(t,e,s,n){const i=Qt(e,t),r=s.axis||"xy",a=s.includeInvisible||!1;return xl(t,i,r,s.intersect,n,a)},x(t,e,s,n){const i=Qt(e,t);return Lh(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=Qt(e,t);return Lh(t,i,"y",s.intersect,n)}}};const jg=["left","top","right","bottom"];function Di(t,e){return t.filter(s=>s.pos===e)}function Fh(t,e){return t.filter(s=>jg.indexOf(s.pos)===-1&&s.box.axis===e)}function Ei(t,e){return t.sort((s,n)=>{const i=e?n:s,r=e?s:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function uw(t){const e=[];let s,n,i,r,a,o;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:r,options:{stack:a,stackWeight:o=1}}=i,e.push({index:s,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&r+a,stackWeight:o});return e}function hw(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:r}=s;if(!n||!jg.includes(i))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return e}function fw(t,e){const s=hw(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let r,a,o;for(r=0,a=t.length;r<a;++r){o=t[r];const{fullSize:c}=o.box,d=s[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*n:c&&e.availableWidth,o.height=i):(o.width=n,o.height=u?u*i:c&&e.availableHeight)}return s}function mw(t){const e=uw(t),s=Ei(e.filter(d=>d.box.fullSize),!0),n=Ei(Di(e,"left"),!0),i=Ei(Di(e,"right")),r=Ei(Di(e,"top"),!0),a=Ei(Di(e,"bottom")),o=Fh(e,"x"),c=Fh(e,"y");return{fullSize:s,leftAndTop:n.concat(r),rightAndBottom:i.concat(c).concat(a).concat(o),chartArea:Di(e,"chartArea"),vertical:n.concat(i).concat(c),horizontal:r.concat(a).concat(o)}}function Ih(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Ng(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function pw(t,e,s,n){const{pos:i,box:r}=s,a=t.maxPadding;if(!ye(i)){s.size&&(t[i]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?r.height:r.width),s.size=h.size/h.count,t[i]+=s.size}r.getPadding&&Ng(a,r.getPadding());const o=Math.max(0,e.outerWidth-Ih(a,t,"left","right")),c=Math.max(0,e.outerHeight-Ih(a,t,"top","bottom")),d=o!==t.w,u=c!==t.h;return t.w=o,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function gw(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function xw(t,e){const s=e.maxPadding;function n(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{r[a]=Math.max(e[a],s[a])}),r}return n(t?["left","right"]:["top","bottom"])}function Gi(t,e,s,n){const i=[];let r,a,o,c,d,u;for(r=0,a=t.length,d=0;r<a;++r){o=t[r],c=o.box,c.update(o.width||e.w,o.height||e.h,xw(o.horizontal,e));const{same:h,other:f}=pw(e,s,o,n);d|=h&&i.length,u=u||f,c.fullSize||i.push(o)}return d&&Gi(i,e,s,n)||u}function oa(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function Vh(t,e,s,n){const i=s.padding;let{x:r,y:a}=e;for(const o of t){const c=o.box,d=n[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const h=e.w*u,f=d.size||c.height;pr(d.start)&&(a=d.start),c.fullSize?oa(c,i.left,a,s.outerWidth-i.right-i.left,f):oa(c,e.left+d.placed,a,h,f),d.start=a,d.placed+=h,a=c.bottom}else{const h=e.h*u,f=d.size||c.width;pr(d.start)&&(r=d.start),c.fullSize?oa(c,r,i.top,f,s.outerHeight-i.bottom-i.top):oa(c,r,e.top+d.placed,f,h),d.start=r,d.placed+=h,r=c.right}}e.x=r,e.y=a}var lt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=ut(t.options.layout.padding),r=Math.max(e-i.width,0),a=Math.max(s-i.height,0),o=mw(t.boxes),c=o.vertical,d=o.horizontal;pe(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=c.reduce((g,x)=>x.box.options&&x.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/u,hBoxMaxHeight:a/2}),f=Object.assign({},i);Ng(f,ut(n));const m=Object.assign({maxPadding:f,w:r,h:a,x:i.left,y:i.top},i),p=fw(c.concat(d),h);Gi(o.fullSize,m,h,p),Gi(c,m,h,p),Gi(d,m,h,p)&&Gi(c,m,h,p),gw(m),Vh(o.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Vh(o.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},pe(o.chartArea,g=>{const x=g.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Mg{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class yw extends Mg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ma="$chartjs",bw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wh=t=>t===null||t==="";function vw(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ma]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Wh(i)){const r=kh(t,"width");r!==void 0&&(t.width=r)}if(Wh(n))if(t.style.height==="")t.height=t.width/(e||2);else{const r=kh(t,"height");r!==void 0&&(t.height=r)}return t}const Tg=b1?{passive:!0}:!1;function _w(t,e,s){t&&t.addEventListener(e,s,Tg)}function ww(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Tg)}function kw(t,e){const s=bw[t.type]||t.type,{x:n,y:i}=Qt(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Ka(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function Sw(t,e,s){const n=t.canvas,i=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||Ka(o.addedNodes,n),a=a&&!Ka(o.removedNodes,n);a&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function jw(t,e,s){const n=t.canvas,i=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||Ka(o.removedNodes,n),a=a&&!Ka(o.addedNodes,n);a&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const yr=new Map;let Bh=0;function Cg(){const t=window.devicePixelRatio;t!==Bh&&(Bh=t,yr.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function Nw(t,e){yr.size||window.addEventListener("resize",Cg),yr.set(t,e)}function Mw(t){yr.delete(t),yr.size||window.removeEventListener("resize",Cg)}function Tw(t,e,s){const n=t.canvas,i=n&&fd(n);if(!i)return;const r=Qp((o,c)=>{const d=i.clientWidth;s(o,c),d<i.clientWidth&&s()},window),a=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||r(d,u)});return a.observe(i),Nw(t,r),a}function yl(t,e,s){s&&s.disconnect(),e==="resize"&&Mw(t)}function Cw(t,e,s){const n=t.canvas,i=Qp(r=>{t.ctx!==null&&s(kw(r,t))},t);return _w(n,e,i),i}class Pw extends Mg{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(vw(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Ma])return!1;const n=s[Ma].initial;["height","width"].forEach(r=>{const a=n[r];ge(a)?s.removeAttribute(r):s.setAttribute(r,a)});const i=n.style||{};return Object.keys(i).forEach(r=>{s.style[r]=i[r]}),s.width=s.width,delete s[Ma],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),a={attach:Sw,detach:jw,resize:Tw}[s]||Cw;i[s]=a(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:yl,detach:yl,resize:yl}[s]||ww)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return y1(e,s,n,i)}isAttached(e){const s=e&&fd(e);return!!(s&&s.isConnected)}}function Dw(t){return!hd()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?yw:Pw}let Cs=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return ii(this.x)&&ii(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(r=>{i[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),i}};function Ew(t,e){const s=t.options.ticks,n=Aw(t),i=Math.min(s.maxTicksLimit||n,n),r=s.major.enabled?Rw(e):[],a=r.length,o=r[0],c=r[a-1],d=[];if(a>i)return Lw(e,d,r,a/i),d;const u=Ow(r,e,i);if(a>0){let h,f;const m=a>1?Math.round((c-o)/(a-1)):null;for(la(e,d,u,ge(m)?0:o-m,o),h=0,f=a-1;h<f;h++)la(e,d,u,r[h],r[h+1]);return la(e,d,u,c,ge(m)?e.length:c+m),d}return la(e,d,u),d}function Aw(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function Ow(t,e,s){const n=Fw(t),i=e.length/s;if(!n)return Math.max(i,1);const r=__(n);for(let a=0,o=r.length-1;a<o;a++){const c=r[a];if(c>i)return c}return Math.max(i,1)}function Rw(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function Lw(t,e,s,n){let i=0,r=s[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===r&&(e.push(t[a]),i++,r=s[i*n])}function la(t,e,s,n,i){const r=ie(n,0),a=Math.min(ie(i,t.length),t.length);let o=0,c,d,u;for(s=Math.ceil(s),i&&(c=i-n,s=c/Math.floor(c/s)),u=r;u<0;)o++,u=Math.round(r+o*s);for(d=Math.max(r,0);d<a;d++)d===u&&(e.push(t[d]),o++,u=Math.round(r+o*s))}function Fw(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const Iw=t=>t==="left"?"right":t==="right"?"left":t,zh=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Hh=(t,e)=>Math.min(e||t,t);function $h(t,e){const s=[],n=t.length/e,i=t.length;let r=0;for(;r<i;r+=n)s.push(t[Math.floor(r)]);return s}function Vw(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),r=t._startPixel,a=t._endPixel,o=1e-6;let c=t.getPixelForTick(i),d;if(!(s&&(n===1?d=Math.max(c-r,a-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(i-1))/2,c+=i<e?d:-d,c<r-o||c>a+o)))return c}function Ww(t,e){pe(t,s=>{const n=s.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete s.data[n[r]];n.splice(0,i)}})}function Ai(t){return t.drawTicks?t.tickLength:0}function Yh(t,e){if(!t.display)return 0;const s=Ze(t.font,e),n=ut(t.padding);return(Re(t.text)?t.text.length:1)*s.lineHeight+n.height}function Bw(t,e){return en(t,{scale:e,type:"scale"})}function zw(t,e,s){return en(t,{tick:s,index:e,type:"tick"})}function Hw(t,e,s){let n=ad(t);return(s&&e!=="right"||!s&&e==="right")&&(n=Iw(n)),n}function $w(t,e,s,n){const{top:i,left:r,bottom:a,right:o,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,p;const g=a-i,x=o-r;if(t.isHorizontal()){if(m=rt(n,r,o),ye(s)){const v=Object.keys(s)[0],_=s[v];p=u[v].getPixelForValue(_)+g-e}else s==="center"?p=(d.bottom+d.top)/2+g-e:p=zh(t,s,e);f=o-r}else{if(ye(s)){const v=Object.keys(s)[0],_=s[v];m=u[v].getPixelForValue(_)-x+e}else s==="center"?m=(d.left+d.right)/2-x+e:m=zh(t,s,e);p=rt(n,a,i),h=s==="left"?-Ge:Ge}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class Pn extends Cs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=bt(e,Number.POSITIVE_INFINITY),s=bt(s,Number.NEGATIVE_INFINITY),n=bt(n,Number.POSITIVE_INFINITY),i=bt(i,Number.NEGATIVE_INFINITY),{min:bt(e,n),max:bt(s,i),minDefined:ze(e),maxDefined:ze(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:r}=this.getUserBounds(),a;if(i&&r)return{min:s,max:n};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)a=o[c].controller.getMinMax(this,e),i||(s=Math.min(s,a.min)),r||(n=Math.max(n,a.max));return s=r&&s>n?n:s,n=i&&s>n?s:n,{min:bt(s,bt(n,s)),max:bt(n,bt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ne(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:r,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=X_(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?$h(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Ew(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ne(this.options.afterUpdate,[this])}beforeSetDimensions(){ne(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ne(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ne(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ne(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=ne(s.callback,[r.value,n,e],this)}afterTickToLabelConversion(){ne(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ne(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=Hh(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,r=s.maxRotation;let a=i,o,c,d;if(!this._isVisible()||!s.display||i>=r||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=et(this.chart.width-h,0,this.maxWidth);o=e.offset?this.maxWidth/n:m/(n-1),h+6>o&&(o=m/(n-(e.offset?.5:1)),c=this.maxHeight-Ai(e.grid)-s.padding-Yh(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),a=id(Math.min(Math.asin(et((u.highest.height+6)/o,-1,1)),Math.asin(et(c/d,-1,1))-Math.asin(et(f/d,-1,1)))),a=Math.max(i,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){ne(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ne(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:r}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const c=Yh(i,s.options.font);if(o?(e.width=this.maxWidth,e.height=Ai(r)+c):(e.height=this.maxHeight,e.width=Ai(r)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,p=Bt(this.labelRotation),g=Math.cos(p),x=Math.sin(p);if(o){const v=n.mirror?0:x*h.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=n.mirror?0:g*h.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(d,u,x,g)}}this._handleMargins(),o?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:r,padding:a},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=i*e.width,m=n*s.height):(f=n*e.height,m=i*s.width):r==="start"?m=s.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=s.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ne(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ge(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=$h(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:r}=this,a=[],o=[],c=Math.floor(s/Hh(s,n));let d=0,u=0,h,f,m,p,g,x,v,_,S,N,j;for(h=0;h<s;h+=c){if(p=e[h].label,g=this._resolveTickFontOptions(h),i.font=x=g.string,v=r[x]=r[x]||{data:{},gc:[]},_=g.lineHeight,S=N=0,!ge(p)&&!Re(p))S=Ga(i,v.data,v.gc,S,p),N=_;else if(Re(p))for(f=0,m=p.length;f<m;++f)j=p[f],!ge(j)&&!Re(j)&&(S=Ga(i,v.data,v.gc,S,j),N+=_);a.push(S),o.push(N),d=Math.max(S,d),u=Math.max(N,u)}Ww(r,s);const k=a.indexOf(d),T=o.indexOf(u),M=P=>({width:a[P]||0,height:o[P]||0});return{first:M(0),last:M(s-1),widest:M(k),highest:M(T),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return j_(this._alignToPixels?dn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=zw(this.getContext(),e,n))}return this.$context||(this.$context=Bw(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Bt(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,o=r?r.widest.width+a:0,c=r?r.highest.height+a:0;return this.isHorizontal()?c*n>o*i?o/n:c/i:c*i<o*n?c/n:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:r,position:a,border:o}=i,c=r.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Ai(r),m=[],p=o.setContext(this.getContext()),g=p.display?p.width:0,x=g/2,v=function(J){return dn(n,J,g)};let _,S,N,j,k,T,M,P,O,A,I,X;if(a==="top")_=v(this.bottom),T=this.bottom-f,P=_-x,A=v(e.top)+x,X=e.bottom;else if(a==="bottom")_=v(this.top),A=e.top,X=v(e.bottom)-x,T=_+x,P=this.top+f;else if(a==="left")_=v(this.right),k=this.right-f,M=_-x,O=v(e.left)+x,I=e.right;else if(a==="right")_=v(this.left),O=e.left,I=v(e.right)-x,k=_+x,M=this.left+f;else if(s==="x"){if(a==="center")_=v((e.top+e.bottom)/2+.5);else if(ye(a)){const J=Object.keys(a)[0],q=a[J];_=v(this.chart.scales[J].getPixelForValue(q))}A=e.top,X=e.bottom,T=_+x,P=T+f}else if(s==="y"){if(a==="center")_=v((e.left+e.right)/2);else if(ye(a)){const J=Object.keys(a)[0],q=a[J];_=v(this.chart.scales[J].getPixelForValue(q))}k=_-x,M=k-f,O=e.left,I=e.right}const U=ie(i.ticks.maxTicksLimit,h),K=Math.max(1,Math.ceil(h/U));for(S=0;S<h;S+=K){const J=this.getContext(S),q=r.setContext(J),de=o.setContext(J),B=q.lineWidth,ae=q.color,Ne=de.dash||[],Te=de.dashOffset,he=q.tickWidth,D=q.tickColor,R=q.tickBorderDash||[],W=q.tickBorderDashOffset;N=Vw(this,S,c),N!==void 0&&(j=dn(n,N,B),d?k=M=O=I=j:T=P=A=X=j,m.push({tx1:k,ty1:T,tx2:M,ty2:P,x1:O,y1:A,x2:I,y2:X,width:B,color:ae,borderDash:Ne,borderDashOffset:Te,tickWidth:he,tickColor:D,tickBorderDash:R,tickBorderDashOffset:W}))}return this._ticksLength=h,this._borderValue=_,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:r}=n,a=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=r,f=Ai(n.grid),m=f+u,p=h?-u:m,g=-Bt(this.labelRotation),x=[];let v,_,S,N,j,k,T,M,P,O,A,I,X="middle";if(i==="top")k=this.bottom-p,T=this._getXAxisLabelAlignment();else if(i==="bottom")k=this.top+p,T=this._getXAxisLabelAlignment();else if(i==="left"){const K=this._getYAxisLabelAlignment(f);T=K.textAlign,j=K.x}else if(i==="right"){const K=this._getYAxisLabelAlignment(f);T=K.textAlign,j=K.x}else if(s==="x"){if(i==="center")k=(e.top+e.bottom)/2+m;else if(ye(i)){const K=Object.keys(i)[0],J=i[K];k=this.chart.scales[K].getPixelForValue(J)+m}T=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")j=(e.left+e.right)/2-m;else if(ye(i)){const K=Object.keys(i)[0],J=i[K];j=this.chart.scales[K].getPixelForValue(J)}T=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?X="top":c==="end"&&(X="bottom"));const U=this._getLabelSizes();for(v=0,_=o.length;v<_;++v){S=o[v],N=S.label;const K=r.setContext(this.getContext(v));M=this.getPixelForTick(v)+r.labelOffset,P=this._resolveTickFontOptions(v),O=P.lineHeight,A=Re(N)?N.length:1;const J=A/2,q=K.color,de=K.textStrokeColor,B=K.textStrokeWidth;let ae=T;a?(j=M,T==="inner"&&(v===_-1?ae=this.options.reverse?"left":"right":v===0?ae=this.options.reverse?"right":"left":ae="center"),i==="top"?d==="near"||g!==0?I=-A*O+O/2:d==="center"?I=-U.highest.height/2-J*O+O:I=-U.highest.height+O/2:d==="near"||g!==0?I=O/2:d==="center"?I=U.highest.height/2-J*O:I=U.highest.height-A*O,h&&(I*=-1),g!==0&&!K.showLabelBackdrop&&(j+=O/2*Math.sin(g))):(k=M,I=(1-A)*O/2);let Ne;if(K.showLabelBackdrop){const Te=ut(K.backdropPadding),he=U.heights[v],D=U.widths[v];let R=I-Te.top,W=0-Te.left;switch(X){case"middle":R-=he/2;break;case"bottom":R-=he;break}switch(T){case"center":W-=D/2;break;case"right":W-=D;break;case"inner":v===_-1?W-=D:v>0&&(W-=D/2);break}Ne={left:W,top:R,width:D+Te.width,height:he+Te.height,color:K.backdropColor}}x.push({label:N,font:P,textOffset:I,options:{rotation:g,color:q,strokeColor:de,strokeWidth:B,textAlign:ae,textBaseline:X,translation:[j,k],backdrop:Ne}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Bt(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,a=this._getLabelSizes(),o=e+r,c=a.widest.width;let d,u;return s==="left"?i?(u=this.right+r,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?i?(u=this.left+r,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:r,height:a}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,r,a),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,a;const o=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(r=0,a=i.length;r<a;++r){const c=i[r];s.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),a=n.display?r.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=dn(e,this.left,a)-a/2,u=dn(e,this.right,o)+o/2,h=f=c):(h=dn(e,this.top,a)-a/2,f=dn(e,this.bottom,o)+o/2,d=u=c),s.save(),s.lineWidth=r.width,s.strokeStyle=r.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&_o(n,i);const r=this.getLabelItems(e);for(const a of r){const o=a.options,c=a.font,d=a.label,u=a.textOffset;Mn(n,d,0,u,c,o)}i&&wo(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const r=Ze(n.font),a=ut(n.padding),o=n.align;let c=r.lineHeight/2;s==="bottom"||s==="center"||ye(s)?(c+=a.bottom,Re(n.text)&&(c+=r.lineHeight*(n.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=$w(this,c,s,o);Mn(e,n.text,0,0,r,{color:n.color,maxWidth:h,rotation:f,textAlign:Hw(o,s,i),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=ie(e.grid&&e.grid.z,-1),i=ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Pn.prototype.draw?[{z:s,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,a;for(r=0,a=s.length;r<a;++r){const o=s[r];o[n]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ze(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ca{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;Gw(s)&&(n=this.register(s));const i=this.items,r=e.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,Yw(e,a,n),this.override&&Le.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in Le[i]&&(delete Le[i][n],this.override&&delete Nn[n])}}function Yw(t,e,s){const n=mr(Object.create(null),[s?Le.get(s):{},Le.get(e),t.defaults]);Le.set(e,n),t.defaultRoutes&&Uw(e,t.defaultRoutes),t.descriptors&&Le.describe(e,t.descriptors)}function Uw(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),r=[t].concat(n).join("."),a=e[s].split("."),o=a.pop(),c=a.join(".");Le.route(r,i,c,o)})}function Gw(t){return"id"in t&&"defaults"in t}class qw{constructor(){this.controllers=new ca(tn,"datasets",!0),this.elements=new ca(Cs,"elements"),this.plugins=new ca(Object,"plugins"),this.scales=new ca(Pn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const r=n||this._getRegistryForType(i);n||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):pe(i,a=>{const o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,s,n){const i=nd(e);ne(n["before"+i],[],n),s[e](n),ne(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Jt=new qw;class Kw{constructor(){this._init=void 0}notify(e,s,n,i){if(s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(r,e,s,n);return s==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,s,n,i){i=i||{};for(const r of e){const a=r.plugin,o=a[n],c=[s,i,r.options];if(ne(o,c,a)===!1&&i.cancelable)return!1}return!0}invalidate(){ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=ie(n.options&&n.options.plugins,{}),r=Xw(n);return i===!1&&!s?[]:Jw(e,r,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(r,a)=>r.filter(o=>!a.some(c=>o.plugin.id===c.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function Xw(t){const e={},s=[],n=Object.keys(Jt.plugins.items);for(let r=0;r<n.length;r++)s.push(Jt.getPlugin(n[r]));const i=t.plugins||[];for(let r=0;r<i.length;r++){const a=i[r];s.indexOf(a)===-1&&(s.push(a),e[a.id]=!0)}return{plugins:s,localIds:e}}function Zw(t,e){return!e&&t===!1?null:t===!0?{}:t}function Jw(t,{plugins:e,localIds:s},n,i){const r=[],a=t.getContext();for(const o of e){const c=o.id,d=Zw(n[c],i);d!==null&&r.push({plugin:o,options:Qw(t.config,{plugin:o,local:s[c]},d,a)})}return r}function Qw(t,{plugin:e,local:s},n,i){const r=t.pluginScopeKeys(e),a=t.getOptionScopes(n,r);return s&&e.defaults&&a.push(e.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function oc(t,e){const s=Le.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function ek(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function tk(t,e){return t===e?"_index_":"_value_"}function Uh(t){if(t==="x"||t==="y"||t==="r")return t}function sk(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function lc(t,...e){if(Uh(t))return t;for(const s of e){const n=s.axis||sk(s.position)||t.length>1&&Uh(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Gh(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function nk(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return Gh(t,"x",s[0])||Gh(t,"y",s[0])}return{}}function ik(t,e){const s=Nn[t.type]||{scales:{}},n=e.scales||{},i=oc(t.type,e),r=Object.create(null);return Object.keys(n).forEach(a=>{const o=n[a];if(!ye(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=lc(a,o,nk(a,t),Le.scales[o.type]),d=tk(c,i),u=s.scales||{};r[a]=Qi(Object.create(null),[{axis:c},o,u[c],u[d]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,c=a.indexAxis||oc(o,e),u=(Nn[o]||{}).scales||{};Object.keys(u).forEach(h=>{const f=ek(h,c),m=a[f+"AxisID"]||f;r[m]=r[m]||Object.create(null),Qi(r[m],[{axis:f},n[m],u[h]])})}),Object.keys(r).forEach(a=>{const o=r[a];Qi(o,[Le.scales[o.type],Le.scale])}),r}function Pg(t){const e=t.options||(t.options={});e.plugins=ie(e.plugins,{}),e.scales=ik(t,e)}function Dg(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function rk(t){return t=t||{},t.data=Dg(t.data),Pg(t),t}const qh=new Map,Eg=new Set;function da(t,e){let s=qh.get(t);return s||(s=e(),qh.set(t,s),Eg.add(s)),s}const Oi=(t,e,s)=>{const n=qs(e,s);n!==void 0&&t.add(n)};class ak{constructor(e){this._config=rk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Dg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Pg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return da(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return da(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return da(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return da(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:r}=this,a=this._cachedScopes(e,n),o=a.get(s);if(o)return o;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>Oi(c,e,h))),u.forEach(h=>Oi(c,i,h)),u.forEach(h=>Oi(c,Nn[r]||{},h)),u.forEach(h=>Oi(c,Le,h)),u.forEach(h=>Oi(c,rc,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Eg.has(s)&&a.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,Nn[s]||{},Le.datasets[s]||{},{type:s},Le,rc]}resolveNamedOptions(e,s,n,i=[""]){const r={$shared:!0},{resolver:a,subPrefixes:o}=Kh(this._resolverCache,e,i);let c=a;if(lk(a,s)){r.$shared=!1,n=Ks(n)?n():n;const d=this.createResolver(e,n,o);c=ri(a,n,d)}for(const d of s)r[d]=c[d];return r}createResolver(e,s,n=[""],i){const{resolver:r}=Kh(this._resolverCache,e,n);return ye(s)?ri(r,s,void 0,i):r}}function Kh(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let r=n.get(i);return r||(r={resolver:cd(e,s),subPrefixes:s.filter(o=>!o.toLowerCase().includes("hover"))},n.set(i,r)),r}const ok=t=>ye(t)&&Object.getOwnPropertyNames(t).some(e=>Ks(t[e]));function lk(t,e){const{isScriptable:s,isIndexable:n}=rg(t);for(const i of e){const r=s(i),a=n(i),o=(a||r)&&t[i];if(r&&(Ks(o)||ok(o))||a&&Re(o))return!0}return!1}var ck="4.5.1";const dk=["top","bottom","left","right","chartArea"];function Xh(t,e){return t==="top"||t==="bottom"||dk.indexOf(t)===-1&&e==="x"}function Zh(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function Jh(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),ne(s&&s.onComplete,[t],e)}function uk(t){const e=t.chart,s=e.options.animation;ne(s&&s.onProgress,[t],e)}function Ag(t){return hd()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ta={},Qh=t=>{const e=Ag(t);return Object.values(Ta).filter(s=>s.canvas===e).pop()};function hk(t,e,s){const n=Object.keys(t);for(const i of n){const r=+i;if(r>=e){const a=t[i];delete t[i],(s>0||r>e)&&(t[r+s]=a)}}}function fk(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}let At=class{static defaults=Le;static instances=Ta;static overrides=Nn;static registry=Jt;static version=ck;static getChart=Qh;static register(...e){Jt.add(...e),ef()}static unregister(...e){Jt.remove(...e),ef()}constructor(e,s){const n=this.config=new ak(s),i=Ag(e),r=Qh(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Dw(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,a.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=h_(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Kw,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=C_(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],Ta[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ps.listen(this,"complete",Jh),ps.listen(this,"progress",uk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:r}=this;return ge(e)?s&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Jt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bh(this.canvas,this.ctx),this}stop(){return ps.stop(this),this}resize(e,s){ps.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,s,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,wh(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),ne(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};pe(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{});let r=[];s&&(r=r.concat(Object.keys(s).map(a=>{const o=s[a],c=lc(a,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),pe(r,a=>{const o=a.options,c=o.id,d=lc(c,o),u=ie(o.type,a.dtype);(o.position===void 0||Xh(o.position,d)!==Xh(a.dposition))&&(o.position=a.dposition),i[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=Jt.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(o,e)}),pe(i,(a,o)=>{a||delete n[o]}),pe(n,a=>{lt.configure(this,a,a.options),lt.addBox(this,a)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,r)=>i.index-r.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(Zh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const r=s[n];let a=this.getDatasetMeta(n);const o=r.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=r.indexAxis||oc(o,this.options),a.order=r.order||0,a.index=n,a.label=""+r.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const c=Jt.getController(o),{datasetElementType:d,dataElementType:u}=Le.datasets[o];Object.assign(c,{dataElementType:Jt.getElement(u),datasetElementType:d&&Jt.getElement(d)}),a.controller=new c(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){pe(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||pe(r,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Zh("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){pe(this.scales,e=>{lt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!dh(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of s){const a=n==="_removeElements"?-r:r;hk(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=r=>new Set(e.filter(a=>a[0]===r).map((a,o)=>o+","+a.splice(1).join(","))),i=n(0);for(let r=1;r<s;r++)if(!dh(i,n(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;lt.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],pe(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Ks(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ps.has(this)?this.attached&&!ps.running(this)&&ps.start(this):(this.draw(),Jh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,r;for(i=0,r=s.length;i<r;++i){const a=s[i];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=gg(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&_o(s,i),e.controller.draw(),i&&wo(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ts(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const r=dw.modes[s];return typeof r=="function"?r(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(r=>r&&r._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=en(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,i);pr(s)?(r.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(r,{visible:n}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),ps.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),bh(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Ta[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(r,a)=>{s.addEventListener(this,r,a),e[r]=a},i=(r,a,o)=>{r.offsetX=a,r.offsetY=o,this._eventHandler(r)};pe(this.options.events,r=>n(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},i=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},r=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",a)};a=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},s.isAttached(this.canvas)?o():a()}unbindEvents(){pe(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},pe(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let r,a,o,c;for(s==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){a=e[o];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:r,index:a})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[a],index:a}});!$a(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,r=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=r(s,e),o=n?e:r(e,s);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const r=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:r}=this,a=s,o=this._getActiveElements(e,i,n,a),c=y_(e),d=fk(e,this._lastEvent,n,c);n&&(this._lastEvent=null,ne(r.onHover,[e,o,this],this),c&&ne(r.onClick,[e,o,this],this));const u=!$a(o,i);return(u||s)&&(this._active=o,this._updateHoverStyles(o,i,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}};function ef(){return pe(At.instances,t=>t._plugins.invalidate())}function mk(t,e,s){const{startAngle:n,x:i,y:r,outerRadius:a,innerRadius:o,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/a,ot(n-s));if(t.beginPath(),t.arc(i,r,a-d/2,n+h/2,s-h/2),o>0){const f=Math.min(d/o,ot(n-s));t.arc(i,r,o+d/2,s-f/2,n+f/2,!0)}else{const f=Math.min(d/2,a*ot(n-s));if(u==="round")t.arc(i,r,f,s-ke/2,n+ke/2,!0);else if(u==="bevel"){const m=2*f*f,p=-m*Math.cos(s+ke/2)+i,g=-m*Math.sin(s+ke/2)+r,x=m*Math.cos(n+ke/2)+i,v=m*Math.sin(n+ke/2)+r;t.lineTo(p,g),t.lineTo(x,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function pk(t,e,s){const{startAngle:n,pixelMargin:i,x:r,y:a,outerRadius:o,innerRadius:c}=e;let d=i/o;t.beginPath(),t.arc(r,a,o,n-d,s+d),c>i?(d=i/c,t.arc(r,a,c,s+d,n-d,!0)):t.arc(r,a,i,s+Ge,n-Ge),t.closePath(),t.clip()}function gk(t){return ld(t,["outerStart","outerEnd","innerStart","innerEnd"])}function xk(t,e,s,n){const i=gk(t.options.borderRadius),r=(s-e)/2,a=Math.min(r,n*e/2),o=c=>{const d=(s-Math.min(r,c))*n/2;return et(c,0,Math.min(r,d))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:et(i.innerStart,0,a),innerEnd:et(i.innerEnd,0,a)}}function Wn(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function Xa(t,e,s,n,i,r){const{x:a,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+n+s-d,0),f=u>0?u+n+s+d:0;let m=0;const p=i-c;if(n){const K=u>0?u-n:0,J=h>0?h-n:0,q=(K+J)/2,de=q!==0?p*q/(q+n):p;m=(p-de)/2}const g=Math.max(.001,p*h-s/ke)/h,x=(p-g)/2,v=c+x+m,_=i-x-m,{outerStart:S,outerEnd:N,innerStart:j,innerEnd:k}=xk(e,f,h,_-v),T=h-S,M=h-N,P=v+S/T,O=_-N/M,A=f+j,I=f+k,X=v+j/A,U=_-k/I;if(t.beginPath(),r){const K=(P+O)/2;if(t.arc(a,o,h,P,K),t.arc(a,o,h,K,O),N>0){const B=Wn(M,O,a,o);t.arc(B.x,B.y,N,O,_+Ge)}const J=Wn(I,_,a,o);if(t.lineTo(J.x,J.y),k>0){const B=Wn(I,U,a,o);t.arc(B.x,B.y,k,_+Ge,U+Math.PI)}const q=(_-k/f+(v+j/f))/2;if(t.arc(a,o,f,_-k/f,q,!0),t.arc(a,o,f,q,v+j/f,!0),j>0){const B=Wn(A,X,a,o);t.arc(B.x,B.y,j,X+Math.PI,v-Ge)}const de=Wn(T,v,a,o);if(t.lineTo(de.x,de.y),S>0){const B=Wn(T,P,a,o);t.arc(B.x,B.y,S,v-Ge,P)}}else{t.moveTo(a,o);const K=Math.cos(P)*h+a,J=Math.sin(P)*h+o;t.lineTo(K,J);const q=Math.cos(O)*h+a,de=Math.sin(O)*h+o;t.lineTo(q,de)}t.closePath()}function yk(t,e,s,n,i){const{fullCircles:r,startAngle:a,circumference:o}=e;let c=e.endAngle;if(r){Xa(t,e,s,n,c,i);for(let d=0;d<r;++d)t.fill();isNaN(o)||(c=a+(o%Ce||Ce))}return Xa(t,e,s,n,c,i),t.fill(),c}function bk(t,e,s,n,i){const{fullCircles:r,startAngle:a,circumference:o,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=f,p?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let g=e.endAngle;if(r){Xa(t,e,s,n,g,i);for(let x=0;x<r;++x)t.stroke();isNaN(o)||(g=a+(o%Ce||Ce))}p&&pk(t,e,g),c.selfJoin&&g-a>=ke&&m===0&&u!=="miter"&&mk(t,e,g),r||(Xa(t,e,s,n,g,i),t.stroke())}class vk extends Cs{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.getProps(["x","y"],n),{angle:r,distance:a}=Kp(i,{x:e,y:s}),{startAngle:o,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=(this.options.spacing+this.options.borderWidth)/2,m=ie(h,c-o),p=gr(r,o,c)&&o!==c,g=m>=Ce||p,x=bs(a,d+f,u+f);return g&&x}getCenterPoint(e){const{x:s,y:n,startAngle:i,endAngle:r,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(i+r)/2,h=(a+o+d+c)/2;return{x:s+Math.cos(u)*h,y:n+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,i=(s.offset||0)/4,r=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>Ce?Math.floor(n/Ce):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const c=1-Math.sin(Math.min(ke,n||0)),d=i*c;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,yk(e,this,d,r,a),bk(e,this,d,r,a),e.restore()}}function Og(t,e,s=e){t.lineCap=ie(s.borderCapStyle,e.borderCapStyle),t.setLineDash(ie(s.borderDash,e.borderDash)),t.lineDashOffset=ie(s.borderDashOffset,e.borderDashOffset),t.lineJoin=ie(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ie(s.borderWidth,e.borderWidth),t.strokeStyle=ie(s.borderColor,e.borderColor)}function _k(t,e,s){t.lineTo(s.x,s.y)}function wk(t){return t.stepped?B_:t.tension||t.cubicInterpolationMode==="monotone"?z_:_k}function Rg(t,e,s={}){const n=t.length,{start:i=0,end:r=n-1}=s,{start:a,end:o}=e,c=Math.max(i,a),d=Math.min(r,o),u=i<a&&r<a||i>o&&r>o;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function kk(t,e,s,n){const{points:i,options:r}=e,{count:a,start:o,loop:c,ilen:d}=Rg(i,s,n),u=wk(r);let{move:h=!0,reverse:f}=n||{},m,p,g;for(m=0;m<=d;++m)p=i[(o+(f?d-m:m))%a],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,g,p,f,r.stepped),g=p);return c&&(p=i[(o+(f?d:0))%a],u(t,g,p,f,r.stepped)),!!c}function Sk(t,e,s,n){const i=e.points,{count:r,start:a,ilen:o}=Rg(i,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,p,g,x,v;const _=N=>(a+(d?o-N:N))%r,S=()=>{g!==x&&(t.lineTo(u,x),t.lineTo(u,g),t.lineTo(u,v))};for(c&&(m=i[_(0)],t.moveTo(m.x,m.y)),f=0;f<=o;++f){if(m=i[_(f)],m.skip)continue;const N=m.x,j=m.y,k=N|0;k===p?(j<g?g=j:j>x&&(x=j),u=(h*u+N)/++h):(S(),t.lineTo(N,j),p=k,h=0,g=x=j),v=j}S()}function cc(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?Sk:kk}function jk(t){return t.stepped?v1:t.tension||t.cubicInterpolationMode==="monotone"?_1:gn}function Nk(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),Og(t,e.options),t.stroke(i)}function Mk(t,e,s,n){const{segments:i,options:r}=e,a=cc(e);for(const o of i)Og(t,r,o.style),t.beginPath(),a(t,e,o,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const Tk=typeof Path2D=="function";function Ck(t,e,s,n){Tk&&!e.options.segment?Nk(t,e,s,n):Mk(t,e,s,n)}class Ps extends Cs{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;h1(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=M1(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],r=this.points,a=pg(this,{property:s,start:i,end:i});if(!a.length)return;const o=[],c=jk(n);let d,u;for(d=0,u=a.length;d<u;++d){const{start:h,end:f}=a[d],m=r[h],p=r[f];if(m===p){o.push(m);continue}const g=Math.abs((i-m[s])/(p[s]-m[s])),x=c(m,p,g,n.stepped);x[s]=e[s],o.push(x)}return o.length===1?o[0]:o}pathSegment(e,s,n){return cc(this)(e,this,s,n)}path(e,s,n){const i=this.segments,r=cc(this);let a=this._loop;s=s||0,n=n||this.points.length-s;for(const o of i)a&=r(e,this,o,{start:s,end:s+n-1});return!!a}draw(e,s,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Ck(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function tf(t,e,s,n){const i=t.options,{[s]:r}=t.getProps([s],n);return Math.abs(e-r)<i.radius+i.hitRadius}class hi extends Cs{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const i=this.options,{x:r,y:a}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,s){return tf(this,e,"x",s)}inYRange(e,s){return tf(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!ts(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,ac(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Lg(t,e){const{x:s,y:n,base:i,width:r,height:a}=t.getProps(["x","y","base","width","height"],e);let o,c,d,u,h;return t.horizontal?(h=a/2,o=Math.min(s,i),c=Math.max(s,i),d=n-h,u=n+h):(h=r/2,o=s-h,c=s+h,d=Math.min(n,i),u=Math.max(n,i)),{left:o,top:d,right:c,bottom:u}}function Bs(t,e,s,n){return t?0:et(e,s,n)}function Pk(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,r=ig(n);return{t:Bs(i.top,r.top,0,s),r:Bs(i.right,r.right,0,e),b:Bs(i.bottom,r.bottom,0,s),l:Bs(i.left,r.left,0,e)}}function Dk(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,r=wn(i),a=Math.min(e,s),o=t.borderSkipped,c=n||ye(i);return{topLeft:Bs(!c||o.top||o.left,r.topLeft,0,a),topRight:Bs(!c||o.top||o.right,r.topRight,0,a),bottomLeft:Bs(!c||o.bottom||o.left,r.bottomLeft,0,a),bottomRight:Bs(!c||o.bottom||o.right,r.bottomRight,0,a)}}function Ek(t){const e=Lg(t),s=e.right-e.left,n=e.bottom-e.top,i=Pk(t,s/2,n/2),r=Dk(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function bl(t,e,s,n){const i=e===null,r=s===null,o=t&&!(i&&r)&&Lg(t,n);return o&&(i||bs(e,o.left,o.right))&&(r||bs(s,o.top,o.bottom))}function Ak(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Ok(t,e){t.rect(e.x,e.y,e.w,e.h)}function vl(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,r=(t.x+t.w!==s.x+s.w?e:0)-n,a=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+r,h:t.h+a,radius:t.radius}}class gd extends Cs{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:a}=Ek(this),o=Ak(a.radius)?xr:Ok;e.save(),(a.w!==r.w||a.h!==r.h)&&(e.beginPath(),o(e,vl(a,s,r)),e.clip(),o(e,vl(r,-s,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,vl(r,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return bl(this,e,s,n)}inXRange(e,s){return bl(this,e,null,s)}inYRange(e,s){return bl(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(s+i)/2:s,y:r?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var Rk=Object.freeze({__proto__:null,ArcElement:vk,BarElement:gd,LineElement:Ps,PointElement:hi});const dc=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],sf=dc.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Fg(t){return dc[t%dc.length]}function Ig(t){return sf[t%sf.length]}function Lk(t,e){return t.borderColor=Fg(e),t.backgroundColor=Ig(e),++e}function Fk(t,e){return t.backgroundColor=t.data.map(()=>Fg(e++)),e}function Ik(t,e){return t.backgroundColor=t.data.map(()=>Ig(e++)),e}function Vk(t){let e=0;return(s,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof md?e=Fk(s,e):i instanceof wg?e=Ik(s,e):i&&(e=Lk(s,e))}}function nf(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Wk(t){return t&&(t.borderColor||t.backgroundColor)}function Bk(){return Le.borderColor!=="rgba(0,0,0,0.1)"||Le.backgroundColor!=="rgba(0,0,0,0.1)"}var zk={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:r}=i,a=nf(n)||Wk(i)||r&&nf(r)||Bk();if(!s.forceOverride&&a)return;const o=Vk(t);n.forEach(o)}};function Hk(t,e,s,n,i){const r=i.samples||n;if(r>=s)return t.slice(e,e+s);const a=[],o=(s-2)/(r-2);let c=0;const d=e+s-1;let u=e,h,f,m,p,g;for(a[c++]=t[u],h=0;h<r-2;h++){let x=0,v=0,_;const S=Math.floor((h+1)*o)+1+e,N=Math.min(Math.floor((h+2)*o)+1,s)+e,j=N-S;for(_=S;_<N;_++)x+=t[_].x,v+=t[_].y;x/=j,v/=j;const k=Math.floor(h*o)+1+e,T=Math.min(Math.floor((h+1)*o)+1,s)+e,{x:M,y:P}=t[u];for(m=p=-1,_=k;_<T;_++)p=.5*Math.abs((M-x)*(t[_].y-P)-(M-t[_].x)*(v-P)),p>m&&(m=p,f=t[_],g=_);a[c++]=f,u=g}return a[c++]=t[d],a}function $k(t,e,s,n){let i=0,r=0,a,o,c,d,u,h,f,m,p,g;const x=[],v=e+s-1,_=t[e].x,N=t[v].x-_;for(a=e;a<e+s;++a){o=t[a],c=(o.x-_)/N*n,d=o.y;const j=c|0;if(j===u)d<p?(p=d,h=a):d>g&&(g=d,f=a),i=(r*i+o.x)/++r;else{const k=a-1;if(!ge(h)&&!ge(f)){const T=Math.min(h,f),M=Math.max(h,f);T!==m&&T!==k&&x.push({...t[T],x:i}),M!==m&&M!==k&&x.push({...t[M],x:i})}a>0&&k!==m&&x.push(t[k]),x.push(o),u=j,r=0,p=g=d,h=f=m=a}}return x}function Vg(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function rf(t){t.data.datasets.forEach(e=>{Vg(e)})}function Yk(t,e){const s=e.length;let n=0,i;const{iScale:r}=t,{min:a,max:o,minDefined:c,maxDefined:d}=r.getUserBounds();return c&&(n=et(vs(e,r.axis,a).lo,0,s-1)),d?i=et(vs(e,r.axis,o).hi+1,n,s)-n:i=s-n,{start:n,count:i}}var Uk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){rf(t);return}const n=t.width;t.data.datasets.forEach((i,r)=>{const{_data:a,indexAxis:o}=i,c=t.getDatasetMeta(r),d=a||i.data;if(Ui([o,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=t.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:f}=Yk(c,d);const m=s.threshold||4*n;if(f<=m){Vg(i);return}ge(a)&&(i._data=d,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(s.algorithm){case"lttb":p=Hk(d,h,f,n,s);break;case"min-max":p=$k(d,h,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}i._decimated=p})},destroy(t){rf(t)}};function Gk(t,e,s){const n=t.segments,i=t.points,r=e.points,a=[];for(const o of n){let{start:c,end:d}=o;d=jo(c,d,i);const u=uc(s,i[c],i[d],o.loop);if(!e.segments){a.push({source:o,target:u,start:i[c],end:i[d]});continue}const h=pg(e,u);for(const f of h){const m=uc(s,r[f.start],r[f.end],f.loop),p=mg(o,i,m);for(const g of p)a.push({source:g,target:f,start:{[s]:af(u,m,"start",Math.max)},end:{[s]:af(u,m,"end",Math.min)}})}}return a}function uc(t,e,s,n){if(n)return;let i=e[t],r=s[t];return t==="angle"&&(i=ot(i),r=ot(r)),{property:t,start:i,end:r}}function qk(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,r=[];return e.segments.forEach(({start:a,end:o})=>{o=jo(a,o,i);const c=i[a],d=i[o];n!==null?(r.push({x:c.x,y:n}),r.push({x:d.x,y:n})):s!==null&&(r.push({x:s,y:c.y}),r.push({x:s,y:d.y}))}),r}function jo(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function af(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function Wg(t,e){let s=[],n=!1;return Re(t)?(n=!0,s=t):s=qk(t,e),s.length?new Ps({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function of(t){return t&&t.fill!==!1}function Kk(t,e,s){let i=t[e].fill;const r=[e];let a;if(!s)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!ze(i))return i;if(a=t[i],!a)return!1;if(a.visible)return i;r.push(i),i=a.fill}return!1}function Xk(t,e,s){const n=e2(t);if(ye(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return ze(i)&&Math.floor(i)===i?Zk(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Zk(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function Jk(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ye(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function Qk(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ye(t)?n=t.value:n=e.getBaseValue(),n}function e2(t){const e=t.options,s=e.fill;let n=ie(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function t2(t){const{scale:e,index:s,line:n}=t,i=[],r=n.segments,a=n.points,o=s2(e,s);o.push(Wg({x:null,y:e.bottom},n));for(let c=0;c<r.length;c++){const d=r[c];for(let u=d.start;u<=d.end;u++)n2(i,a[u],o)}return new Ps({points:i,options:{}})}function s2(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const r=n[i];if(r.index===e)break;r.hidden||s.unshift(r.dataset)}return s}function n2(t,e,s){const n=[];for(let i=0;i<s.length;i++){const r=s[i],{first:a,last:o,point:c}=i2(r,e,"x");if(!(!c||a&&o)){if(a)n.unshift(c);else if(t.push(c),!o)break}}t.push(...n)}function i2(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],r=t.segments,a=t.points;let o=!1,c=!1;for(let d=0;d<r.length;d++){const u=r[d],h=a[u.start][s],f=a[u.end][s];if(bs(i,h,f)){o=i===h,c=i===f;break}}return{first:o,last:c,point:n}}class Bg{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:r,radius:a}=this;return s=s||{start:0,end:Ce},e.arc(i,r,a,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,r=e.angle;return{x:s+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function r2(t){const{chart:e,fill:s,line:n}=t;if(ze(s))return a2(e,s);if(s==="stack")return t2(t);if(s==="shape")return!0;const i=o2(t);return i instanceof Bg?i:Wg(i,n)}function a2(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function o2(t){return(t.scale||{}).getPointPositionForValue?c2(t):l2(t)}function l2(t){const{scale:e={},fill:s}=t,n=Jk(s,e);if(ze(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function c2(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,r=n.reverse?e.max:e.min,a=Qk(s,e,r),o=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,r);return new Bg({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<i;++c)o.push(e.getPointPositionForValue(c,a));return o}function _l(t,e,s){const n=r2(e),{chart:i,index:r,line:a,scale:o,axis:c}=e,d=a.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},p=i.getDatasetMeta(r),g=gg(i,p);n&&a.points.length&&(_o(t,s),d2(t,{line:a,target:n,above:f,below:m,area:s,scale:o,axis:c,clip:g}),wo(t))}function d2(t,e){const{line:s,target:n,above:i,below:r,area:a,scale:o,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=r;r!==i&&(d==="x"?(lf(t,n,a.top),wl(t,{line:s,target:n,color:i,scale:o,property:d,clip:c}),t.restore(),t.save(),lf(t,n,a.bottom)):d==="y"&&(cf(t,n,a.left),wl(t,{line:s,target:n,color:r,scale:o,property:d,clip:c}),t.restore(),t.save(),cf(t,n,a.right),u=i)),wl(t,{line:s,target:n,color:u,scale:o,property:d,clip:c}),t.restore()}function lf(t,e,s){const{segments:n,points:i}=e;let r=!0,a=!1;t.beginPath();for(const o of n){const{start:c,end:d}=o,u=i[c],h=i[jo(c,d,i)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function cf(t,e,s){const{segments:n,points:i}=e;let r=!0,a=!1;t.beginPath();for(const o of n){const{start:c,end:d}=o,u=i[c],h=i[jo(c,d,i)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function wl(t,e){const{line:s,target:n,property:i,color:r,scale:a,clip:o}=e,c=Gk(s,n,i);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=r}={}}=d,p=n!==!0;t.save(),t.fillStyle=m,u2(t,a,o,p&&uc(i,h,f)),t.beginPath();const g=!!s.pathSegment(t,d);let x;if(p){g?t.closePath():df(t,n,f,i);const v=!!n.pathSegment(t,u,{move:g,reverse:!0});x=g&&v,x||df(t,n,h,i)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function u2(t,e,s,n){const i=e.chart.chartArea,{property:r,start:a,end:o}=n||{};if(r==="x"||r==="y"){let c,d,u,h;r==="x"?(c=a,d=i.top,u=o,h=i.bottom):(c=i.left,d=a,u=i.right,h=o),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function df(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var No={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let r,a,o,c;for(a=0;a<n;++a)r=t.getDatasetMeta(a),o=r.dataset,c=null,o&&o.options&&o instanceof Ps&&(c={visible:t.isDatasetVisible(a),index:a,fill:Xk(o,a,n),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=c,i.push(c);for(a=0;a<n;++a)c=i[a],!(!c||c.fill===!1)&&(c.fill=Kk(i,a,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let a=i.length-1;a>=0;--a){const o=i[a].$filler;o&&(o.line.updateControlPoints(r,o.axis),n&&o.fill&&_l(t.ctx,o,r))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const r=n[i].$filler;of(r)&&_l(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!of(n)||s.drawTime!=="beforeDatasetDraw"||_l(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const uf=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},h2=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class hf extends Cs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=ne(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Ze(n.font),r=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=uf(n,r);let d,u;s.font=i.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,r,o,c)+10):(u=this.maxHeight,d=this._fitCols(a,i,o,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:r,maxWidth:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=i+o;let h=e;r.textAlign="left",r.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,g)=>{const x=n+s/2+r.measureText(p.text).width;(g===0||d[d.length-1]+x+2*o>a)&&(h+=u,d[d.length-(g>0?0:1)]=0,m+=u,f++),c[g]={left:0,top:m,row:f,width:x,height:i},d[d.length-1]+=x+o}),h}_fitCols(e,s,n,i){const{ctx:r,maxHeight:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let h=o,f=0,m=0,p=0,g=0;return this.legendItems.forEach((x,v)=>{const{itemWidth:_,itemHeight:S}=f2(n,s,r,x,i);v>0&&m+S+2*o>u&&(h+=f+o,d.push({width:f,height:m}),p+=f+o,g++,f=m=0),c[v]={left:p,top:m,col:g,width:_,height:S},f=Math.max(f,_),m+=S+o}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:r}}=this,a=Jn(r,this.left,this.width);if(this.isHorizontal()){let o=0,c=rt(n,this.left+i,this.right-this.lineWidths[o]);for(const d of s)o!==d.row&&(o=d.row,c=rt(n,this.left+i,this.right-this.lineWidths[o])),d.top+=this.top+e+i,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+i}else{let o=0,c=rt(n,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const d of s)d.col!==o&&(o=d.col,c=rt(n,this.top+e+i,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+i,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;_o(e,this),this._draw(),wo(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:r,labels:a}=e,o=Le.color,c=Jn(e.rtl,this.left,this.width),d=Ze(a.font),{padding:u}=a,h=d.size,f=h/2;let m;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:p,boxHeight:g,itemHeight:x}=uf(a,h),v=function(k,T,M){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const P=ie(M.lineWidth,1);if(i.fillStyle=ie(M.fillStyle,o),i.lineCap=ie(M.lineCap,"butt"),i.lineDashOffset=ie(M.lineDashOffset,0),i.lineJoin=ie(M.lineJoin,"miter"),i.lineWidth=P,i.strokeStyle=ie(M.strokeStyle,o),i.setLineDash(ie(M.lineDash,[])),a.usePointStyle){const O={radius:g*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:P},A=c.xPlus(k,p/2),I=T+f;ng(i,O,A,I,a.pointStyleWidth&&p)}else{const O=T+Math.max((h-g)/2,0),A=c.leftForLtr(k,p),I=wn(M.borderRadius);i.beginPath(),Object.values(I).some(X=>X!==0)?xr(i,{x:A,y:O,w:p,h:g,radius:I}):i.rect(A,O,p,g),i.fill(),P!==0&&i.stroke()}i.restore()},_=function(k,T,M){Mn(i,M.text,k,T+x/2,d,{strikethrough:M.hidden,textAlign:c.textAlign(M.textAlign)})},S=this.isHorizontal(),N=this._computeTitleHeight();S?m={x:rt(r,this.left+u,this.right-n[0]),y:this.top+u+N,line:0}:m={x:this.left+u,y:rt(r,this.top+N+u,this.bottom-s[0].height),line:0},ug(this.ctx,e.textDirection);const j=x+u;this.legendItems.forEach((k,T)=>{i.strokeStyle=k.fontColor,i.fillStyle=k.fontColor;const M=i.measureText(k.text).width,P=c.textAlign(k.textAlign||(k.textAlign=a.textAlign)),O=p+f+M;let A=m.x,I=m.y;c.setWidth(this.width),S?T>0&&A+O+u>this.right&&(I=m.y+=j,m.line++,A=m.x=rt(r,this.left+u,this.right-n[m.line])):T>0&&I+j>this.bottom&&(A=m.x=A+s[m.line].width+u,m.line++,I=m.y=rt(r,this.top+N+u,this.bottom-s[m.line].height));const X=c.x(A);if(v(X,I,k),A=P_(P,A+p+f,S?A+O:this.right,e.rtl),_(c.x(A),I,k),S)m.x+=O+u;else if(typeof k.text!="string"){const U=d.lineHeight;m.y+=zg(k,U)+u}else m.y+=j}),hg(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Ze(s.font),i=ut(s.padding);if(!s.display)return;const r=Jn(e.rtl,this.left,this.width),a=this.ctx,o=s.position,c=n.size/2,d=i.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=rt(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((g,x)=>Math.max(g,x.height),0);u=d+rt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=rt(o,h,h+f);a.textAlign=r.textAlign(ad(o)),a.textBaseline="middle",a.strokeStyle=s.color,a.fillStyle=s.color,a.font=n.string,Mn(a,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=Ze(e.font),n=ut(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,r;if(bs(e,this.left,this.right)&&bs(s,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],bs(e,i.left,i.left+i.width)&&bs(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!g2(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=h2(i,n);i&&!r&&ne(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&ne(s.onHover,[e,n,this],this)}else n&&ne(s.onClick,[e,n,this],this)}}function f2(t,e,s,n,i){const r=m2(n,t,e,s),a=p2(i,n,e.lineHeight);return{itemWidth:r,itemHeight:a}}function m2(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((r,a)=>r.length>a.length?r:a)),e+s.size/2+n.measureText(i).width}function p2(t,e,s){let n=t;return typeof e.text!="string"&&(n=zg(e,s)),n}function zg(t,e){const s=t.text?t.text.length:0;return e*s}function g2(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var fi={id:"legend",_element:hf,start(t,e,s){const n=t.legend=new hf({ctx:t.ctx,options:s,chart:t});lt.configure(t,n,s),lt.addBox(t,n)},stop(t){lt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;lt.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:r,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=ut(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:a&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class xd extends Cs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=Re(n.text)?n.text.length:1;this._padding=ut(n.padding);const r=i*Ze(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:r,options:a}=this,o=a.align;let c=0,d,u,h;return this.isHorizontal()?(u=rt(o,n,r),h=s+e,d=r-n):(a.position==="left"?(u=n+e,h=rt(o,i,s),c=ke*-.5):(u=r-e,h=rt(o,s,i),c=ke*.5),d=i-s),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Ze(s.font),r=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(r);Mn(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:d,textAlign:ad(s.align),textBaseline:"middle",translation:[a,o]})}}function x2(t,e){const s=new xd({ctx:t.ctx,options:e,chart:t});lt.configure(t,s,e),lt.addBox(t,s),t.titleBlock=s}var Mo={id:"title",_element:xd,start(t,e,s){x2(t,s)},stop(t){const e=t.titleBlock;lt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;lt.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ua=new WeakMap;var y2={id:"subtitle",start(t,e,s){const n=new xd({ctx:t.ctx,options:s,chart:t});lt.configure(t,n,s),lt.addBox(t,n),ua.set(t,n)},stop(t){lt.removeBox(t,ua.get(t)),ua.delete(t)},beforeUpdate(t,e,s){const n=ua.get(t);lt.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qi={average(t){if(!t.length)return!1;let e,s,n=new Set,i=0,r=0;for(e=0,s=t.length;e<s;++e){const o=t[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();n.add(c.x),i+=c.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((o,c)=>o+c)/n.size,y:i/r}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,r,a,o;for(r=0,a=t.length;r<a;++r){const c=t[r].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=ic(e,d);u<i&&(i=u,o=c)}}if(o){const c=o.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function Zt(t,e){return e&&(Re(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function gs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function b2(t,e){const{element:s,datasetIndex:n,index:i}=e,r=t.getDatasetMeta(n).controller,{label:a,value:o}=r.getLabelAndValue(i);return{chart:t,label:a,parsed:r.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:o,dataset:r.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function ff(t,e){const s=t.chart.ctx,{body:n,footer:i,title:r}=t,{boxWidth:a,boxHeight:o}=e,c=Ze(e.bodyFont),d=Ze(e.titleFont),u=Ze(e.footerFont),h=r.length,f=i.length,m=n.length,p=ut(e.padding);let g=p.height,x=0,v=n.reduce((N,j)=>N+j.before.length+j.lines.length+j.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const N=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;g+=m*N+(v-m)*c.lineHeight+(v-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let _=0;const S=function(N){x=Math.max(x,s.measureText(N).width+_)};return s.save(),s.font=d.string,pe(t.title,S),s.font=c.string,pe(t.beforeBody.concat(t.afterBody),S),_=e.displayColors?a+2+e.boxPadding:0,pe(n,N=>{pe(N.before,S),pe(N.lines,S),pe(N.after,S)}),_=0,s.font=u.string,pe(t.footer,S),s.restore(),x+=p.width,{width:x,height:g}}function v2(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function _2(t,e,s,n){const{x:i,width:r}=n,a=s.caretSize+s.caretPadding;if(t==="left"&&i+r+a>e.width||t==="right"&&i-r-a<0)return!0}function w2(t,e,s,n){const{x:i,width:r}=s,{width:a,chartArea:{left:o,right:c}}=t;let d="center";return n==="center"?d=i<=(o+c)/2?"left":"right":i<=r/2?d="left":i>=a-r/2&&(d="right"),_2(d,t,e,s)&&(d="center"),d}function mf(t,e,s){const n=s.yAlign||e.yAlign||v2(t,s);return{xAlign:s.xAlign||e.xAlign||w2(t,e,s,n),yAlign:n}}function k2(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function S2(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function pf(t,e,s,n){const{caretSize:i,caretPadding:r,cornerRadius:a}=t,{xAlign:o,yAlign:c}=s,d=i+r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=wn(a);let p=k2(e,o);const g=S2(e,c,d);return c==="center"?o==="left"?p+=d:o==="right"&&(p-=d):o==="left"?p-=Math.max(u,f)+i:o==="right"&&(p+=Math.max(h,m)+i),{x:et(p,0,n.width-e.width),y:et(g,0,n.height-e.height)}}function ha(t,e,s){const n=ut(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function gf(t){return Zt([],gs(t))}function j2(t,e,s){return en(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function xf(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const Hg={beforeTitle:hs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:hs,beforeBody:hs,beforeLabel:hs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ge(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:hs,afterBody:hs,beforeFooter:hs,footer:hs,afterFooter:hs};function ft(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?Hg[e].call(s,n):i}let yf=class extends Cs{static positioners=qi;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,r=new xg(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=j2(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=ft(n,"beforeTitle",this,e),r=ft(n,"title",this,e),a=ft(n,"afterTitle",this,e);let o=[];return o=Zt(o,gs(i)),o=Zt(o,gs(r)),o=Zt(o,gs(a)),o}getBeforeBody(e,s){return gf(ft(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return pe(e,r=>{const a={before:[],lines:[],after:[]},o=xf(n,r);Zt(a.before,gs(ft(o,"beforeLabel",this,r))),Zt(a.lines,ft(o,"label",this,r)),Zt(a.after,gs(ft(o,"afterLabel",this,r))),i.push(a)}),i}getAfterBody(e,s){return gf(ft(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=ft(n,"beforeFooter",this,e),r=ft(n,"footer",this,e),a=ft(n,"afterFooter",this,e);let o=[];return o=Zt(o,gs(i)),o=Zt(o,gs(r)),o=Zt(o,gs(a)),o}_createItems(e){const s=this._active,n=this.chart.data,i=[],r=[],a=[];let o=[],c,d;for(c=0,d=s.length;c<d;++c)o.push(b2(this.chart,s[c]));return e.filter&&(o=o.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(o=o.sort((u,h)=>e.itemSort(u,h,n))),pe(o,u=>{const h=xf(e.callbacks,u);i.push(ft(h,"labelColor",this,u)),r.push(ft(h,"labelPointStyle",this,u)),a.push(ft(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=o,o}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let r,a=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const o=qi[n.position].call(this,i,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const c=this._size=ff(this,n),d=Object.assign({},o,c),u=mf(this.chart,n,d),h=pf(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const r=this.getCaretPosition(e,n,i);s.lineTo(r.x1,r.y1),s.lineTo(r.x2,r.y2),s.lineTo(r.x3,r.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:r}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=wn(o),{x:f,y:m}=e,{width:p,height:g}=s;let x,v,_,S,N,j;return r==="center"?(N=m+g/2,i==="left"?(x=f,v=x-a,S=N+a,j=N-a):(x=f+p,v=x+a,S=N-a,j=N+a),_=x):(i==="left"?v=f+Math.max(c,u)+a:i==="right"?v=f+p-Math.max(d,h)-a:v=this.caretX,r==="top"?(S=m,N=S-a,x=v-a,_=v+a):(S=m+g,N=S+a,x=v+a,_=v-a),j=S),{x1:x,x2:v,x3:_,y1:S,y2:N,y3:j}}drawTitle(e,s,n){const i=this.title,r=i.length;let a,o,c;if(r){const d=Jn(n.rtl,this.x,this.width);for(e.x=ha(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",a=Ze(n.titleFont),o=n.titleSpacing,s.fillStyle=n.titleColor,s.font=a.string,c=0;c<r;++c)s.fillText(i[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,c+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,s,n,i,r){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=r,u=Ze(r.bodyFont),h=ha(this,"left",r),f=i.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=s.y+m;if(r.usePointStyle){const g={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},x=i.leftForLtr(f,d)+d/2,v=p+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,ac(e,g,x,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,ac(e,g,x,v)}else{e.lineWidth=ye(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const g=i.leftForLtr(f,d),x=i.leftForLtr(i.xPlus(f,1),d-2),v=wn(a.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,xr(e,{x:g,y:p,w:d,h:c,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),xr(e,{x,y:p+1,w:d-2,h:c-2,radius:v}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(g,p,d,c),e.strokeRect(g,p,d,c),e.fillStyle=a.backgroundColor,e.fillRect(x,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:r,bodyAlign:a,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=Ze(n.bodyFont);let f=h.lineHeight,m=0;const p=Jn(n.rtl,this.x,this.width),g=function(M){s.fillText(M,p.x(e.x+m),e.y+f/2),e.y+=f+r},x=p.textAlign(a);let v,_,S,N,j,k,T;for(s.textAlign=a,s.textBaseline="middle",s.font=h.string,e.x=ha(this,x,n),s.fillStyle=n.bodyColor,pe(this.beforeBody,g),m=o&&x!=="right"?a==="center"?d/2+u:d+2+u:0,N=0,k=i.length;N<k;++N){for(v=i[N],_=this.labelTextColors[N],s.fillStyle=_,pe(v.before,g),S=v.lines,o&&S.length&&(this._drawColorBox(s,e,N,p,n),f=Math.max(h.lineHeight,c)),j=0,T=S.length;j<T;++j)g(S[j]),f=h.lineHeight;pe(v.after,g)}m=0,f=h.lineHeight,pe(this.afterBody,g),e.y-=r}drawFooter(e,s,n){const i=this.footer,r=i.length;let a,o;if(r){const c=Jn(n.rtl,this.x,this.width);for(e.x=ha(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",a=Ze(n.footerFont),s.fillStyle=n.footerColor,s.font=a.string,o=0;o<r;++o)s.fillText(i[o],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:r,yAlign:a}=this,{x:o,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=wn(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(o+h,c),a==="top"&&this.drawCaret(e,s,n,i),s.lineTo(o+d-f,c),s.quadraticCurveTo(o+d,c,o+d,c+f),a==="center"&&r==="right"&&this.drawCaret(e,s,n,i),s.lineTo(o+d,c+u-p),s.quadraticCurveTo(o+d,c+u,o+d-p,c+u),a==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(o+m,c+u),s.quadraticCurveTo(o,c+u,o,c+u-m),a==="center"&&r==="left"&&this.drawCaret(e,s,n,i),s.lineTo(o,c+h),s.quadraticCurveTo(o,c,o+h,c),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const a=qi[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=ff(this,e),c=Object.assign({},a,this._size),d=mf(s,e,c),u=pf(e,c,d,s);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=ut(s.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,s),ug(e,s.textDirection),r.y+=a.top,this.drawTitle(r,e,s),this.drawBody(r,e,s),this.drawFooter(r,e,s),hg(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),r=!$a(n,i),a=this._positionChanged(i,s);(r||a)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],a=this._getActiveElements(e,r,s,n),o=this._positionChanged(a,e),c=s||!$a(a,r)||o;return c&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&a.reverse(),a}_positionChanged(e,s){const{caretX:n,caretY:i,options:r}=this,a=qi[r.position].call(this,e,s);return a!==!1&&(n!==a.x||i!==a.y)}};var mi={id:"tooltip",_element:yf,positioners:qi,afterInit(t,e,s){s&&(t.tooltip=new yf({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},N2=Object.freeze({__proto__:null,Colors:zk,Decimation:Uk,Filler:No,Legend:fi,SubTitle:y2,Title:Mo,Tooltip:mi});const M2=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function T2(t,e,s,n){const i=t.indexOf(e);if(i===-1)return M2(t,e,s,n);const r=t.lastIndexOf(e);return i!==r?s:i}const C2=(t,e)=>t===null?null:et(Math.round(t),0,e);function bf(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Or extends Pn{static id="category";static defaults={ticks:{callback:bf}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:r}of s)n[i]===r&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ge(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:T2(n,e,ie(s,e),this._addedLabels),C2(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=e===0&&s===r.length-1?r:r.slice(e,s+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=s;a++)i.push({value:a});return i}getLabelForValue(e){return bf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function P2(t,e){const s=[],{bounds:i,step:r,min:a,max:o,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=r||1,p=u-1,{min:g,max:x}=e,v=!ge(a),_=!ge(o),S=!ge(d),N=(x-g)/(h+1);let j=hh((x-g)/p/m)*m,k,T,M,P;if(j<1e-14&&!v&&!_)return[{value:g},{value:x}];P=Math.ceil(x/j)-Math.floor(g/j),P>p&&(j=hh(P*j/p/m)*m),ge(c)||(k=Math.pow(10,c),j=Math.ceil(j*k)/k),i==="ticks"?(T=Math.floor(g/j)*j,M=Math.ceil(x/j)*j):(T=g,M=x),v&&_&&r&&k_((o-a)/r,j/1e3)?(P=Math.round(Math.min((o-a)/j,u)),j=(o-a)/P,T=a,M=o):S?(T=v?a:T,M=_?o:M,P=d-1,j=(M-T)/P):(P=(M-T)/j,_n(P,Math.round(P),j/1e3)?P=Math.round(P):P=Math.ceil(P));const O=Math.max(fh(j),fh(T));k=Math.pow(10,ge(c)?O:c),T=Math.round(T*k)/k,M=Math.round(M*k)/k;let A=0;for(v&&(f&&T!==a?(s.push({value:a}),T<a&&A++,_n(Math.round((T+A*j)*k)/k,a,vf(a,N,t))&&A++):T<a&&A++);A<P;++A){const I=Math.round((T+A*j)*k)/k;if(_&&I>o)break;s.push({value:I})}return _&&f&&M!==o?s.length&&_n(s[s.length-1].value,o,vf(o,N,t))?s[s.length-1].value=o:s.push({value:o}):(!_||M===o)&&s.push({value:M}),s}function vf(t,e,{horizontal:s,minRotation:n}){const i=Bt(n),r=(s?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/r,a)}class Za extends Pn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const a=c=>i=s?i:c,o=c=>r=n?r:c;if(e){const c=Et(i),d=Et(r);c<0&&d<0?o(0):c>0&&d>0&&a(0)}if(i===r){let c=r===0?1:Math.abs(r*.05);o(r+c),e||a(i-c)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},r=this._range||this,a=P2(i,r);return e.bounds==="ticks"&&qp(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Ar(e,this.chart.options.locale,this.options.ticks.format)}}class Rr extends Za{static id="linear";static defaults={ticks:{callback:vo.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=ze(e)?e:0,this.max=ze(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Bt(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const br=t=>Math.floor(Vs(t)),hn=(t,e)=>Math.pow(10,br(t)+e);function _f(t){return t/Math.pow(10,br(t))===1}function wf(t,e,s){const n=Math.pow(10,s),i=Math.floor(t/n);return Math.ceil(e/n)-i}function D2(t,e){const s=e-t;let n=br(s);for(;wf(t,e,n)>10;)n++;for(;wf(t,e,n)<10;)n--;return Math.min(n,br(t))}function E2(t,{min:e,max:s}){e=bt(t.min,e);const n=[],i=br(e);let r=D2(e,s),a=r<0?Math.pow(10,Math.abs(r)):1;const o=Math.pow(10,r),c=i>r?Math.pow(10,i):0,d=Math.round((e-c)*a)/a,u=Math.floor((e-c)/o/10)*o*10;let h=Math.floor((d-u)/Math.pow(10,r)),f=bt(t.min,Math.round((c+u+h*Math.pow(10,r))*a)/a);for(;f<s;)n.push({value:f,major:_f(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,a=r>=0?1:a),f=Math.round((c+u+h*Math.pow(10,r))*a)/a;const m=bt(t.max,f);return n.push({value:m,major:_f(m),significand:h}),n}class A2 extends Pn{static id="logarithmic";static defaults={ticks:{callback:vo.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=Za.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return ze(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=ze(e)?Math.max(0,e):null,this.max=ze(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ze(this._userMin)&&(this.min=e===hn(this.min,0)?hn(this.min,-1):hn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,i=this.max;const r=o=>n=e?n:o,a=o=>i=s?i:o;n===i&&(n<=0?(r(1),a(10)):(r(hn(n,-1)),a(hn(i,1)))),n<=0&&r(hn(i,-1)),i<=0&&a(hn(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=E2(s,this);return e.bounds==="ticks"&&qp(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Ar(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Vs(e),this._valueRange=Vs(this.max)-Vs(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Vs(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}function hc(t){const e=t.ticks;if(e.display&&t.display){const s=ut(e.backdropPadding);return ie(e.font&&e.font.size,Le.font.size)+s.height}return 0}function O2(t,e,s){return s=Re(s)?s:[s],{w:W_(t,e.string,s),h:s.length*e.lineHeight}}function kf(t,e,s,n,i){return t===n||t===i?{start:e-s/2,end:e+s/2}:t<n||t>i?{start:e-s,end:e}:{start:e,end:e+s}}function R2(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],i=[],r=t._pointLabels.length,a=t.options.pointLabels,o=a.centerPointLabels?ke/r:0;for(let c=0;c<r;c++){const d=a.setContext(t.getPointLabelContext(c));i[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+i[c],o),h=Ze(d.font),f=O2(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=ot(t.getIndexAngle(c)+o),p=Math.round(id(m)),g=kf(p,u.x,f.w,0,180),x=kf(p,u.y,f.h,90,270);L2(s,e,m,g,x)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=V2(t,n,i)}function L2(t,e,s,n,i){const r=Math.abs(Math.sin(s)),a=Math.abs(Math.cos(s));let o=0,c=0;n.start<e.l?(o=(e.l-n.start)/r,t.l=Math.min(t.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/r,t.r=Math.max(t.r,e.r+o)),i.start<e.t?(c=(e.t-i.start)/a,t.t=Math.min(t.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/a,t.b=Math.max(t.b,e.b+c))}function F2(t,e,s){const n=t.drawingArea,{extra:i,additionalAngle:r,padding:a,size:o}=s,c=t.getPointPosition(e,n+i+a,r),d=Math.round(id(ot(c.angle+Ge))),u=z2(c.y,o.h,d),h=W2(d),f=B2(c.x,o.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+o.w,bottom:u+o.h}}function I2(t,e){if(!e)return!0;const{left:s,top:n,right:i,bottom:r}=t;return!(ts({x:s,y:n},e)||ts({x:s,y:r},e)||ts({x:i,y:n},e)||ts({x:i,y:r},e))}function V2(t,e,s){const n=[],i=t._pointLabels.length,r=t.options,{centerPointLabels:a,display:o}=r.pointLabels,c={extra:hc(r)/2,additionalAngle:a?ke/i:0};let d;for(let u=0;u<i;u++){c.padding=s[u],c.size=e[u];const h=F2(t,u,c);n.push(h),o==="auto"&&(h.visible=I2(h,d),h.visible&&(d=h))}return n}function W2(t){return t===0||t===180?"center":t<180?"left":"right"}function B2(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function z2(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function H2(t,e,s){const{left:n,top:i,right:r,bottom:a}=s,{backdropColor:o}=e;if(!ge(o)){const c=wn(e.borderRadius),d=ut(e.backdropPadding);t.fillStyle=o;const u=n-d.left,h=i-d.top,f=r-n+d.width,m=a-i+d.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),xr(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function $2(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const r=t._pointLabelItems[i];if(!r.visible)continue;const a=n.setContext(t.getPointLabelContext(i));H2(s,a,r);const o=Ze(a.font),{x:c,y:d,textAlign:u}=r;Mn(s,t._pointLabels[i],c,d+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}function $g(t,e,s,n){const{ctx:i}=t;if(s)i.arc(t.xCenter,t.yCenter,e,0,Ce);else{let r=t.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let a=1;a<n;a++)r=t.getPointPosition(a,e),i.lineTo(r.x,r.y)}}function Y2(t,e,s,n,i){const r=t.ctx,a=e.circular,{color:o,lineWidth:c}=e;!a&&!n||!o||!c||s<0||(r.save(),r.strokeStyle=o,r.lineWidth=c,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),$g(t,s,a,n),r.closePath(),r.stroke(),r.restore())}function U2(t,e,s){return en(t,{label:s,index:e,type:"pointLabel"})}class Yg extends Za{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:vo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ut(hc(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=ze(e)&&!isNaN(e)?e:0,this.max=ze(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hc(this.options))}generateTickLabels(e){Za.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const i=ne(this.options.pointLabels.callback,[s,n],this);return i||i===0?i:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?R2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,i){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,i))}getIndexAngle(e){const s=Ce/(this._pointLabels.length||1),n=this.options.startAngle||0;return ot(e*s+Bt(n))}getDistanceFromCenterForValue(e){if(ge(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ge(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return U2(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const i=this.getIndexAngle(e)-Ge+n;return{x:Math.cos(i)*s+this.xCenter,y:Math.sin(i)*s+this.yCenter,angle:i}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:s,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),$g(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:i,border:r}=s,a=this._pointLabels.length;let o,c,d;if(s.pointLabels.display&&$2(this,a),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=i.setContext(f),p=r.setContext(f);Y2(this,m,c,a,p)}}),n.display){for(e.save(),o=a-1;o>=0;o--){const u=n.setContext(this.getPointLabelContext(o)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(o,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=Ze(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=d.backdropColor;const h=ut(d.backdropPadding);e.fillRect(-a/2-h.left,-r-u.size/2-h.top,a+h.width,u.size+h.height)}Mn(e,o.label,0,-r,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}const To={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},gt=Object.keys(To);function Sf(t,e){return t-e}function jf(t,e){if(ge(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:r}=t._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),ze(a)||(a=typeof n=="string"?s.parse(a,n):s.parse(a)),a===null?null:(i&&(a=i==="week"&&(ii(r)||r===!0)?s.startOf(a,"isoWeek",r):s.startOf(a,i)),+a)}function Nf(t,e,s,n){const i=gt.length;for(let r=gt.indexOf(t);r<i-1;++r){const a=To[gt[r]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((s-e)/(o*a.size))<=n)return gt[r]}return gt[i-1]}function G2(t,e,s,n,i){for(let r=gt.length-1;r>=gt.indexOf(s);r--){const a=gt[r];if(To[a].common&&t._adapter.diff(i,n,a)>=e-1)return a}return gt[s?gt.indexOf(s):0]}function q2(t){for(let e=gt.indexOf(t)+1,s=gt.length;e<s;++e)if(To[gt[e]].common)return gt[e]}function Mf(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=rd(s,e),r=s[n]>=e?s[n]:s[i];t[r]=!0}}function K2(t,e,s,n){const i=t._adapter,r=+i.startOf(e[0].value,n),a=e[e.length-1].value;let o,c;for(o=r;o<=a;o=+i.add(o,1,n))c=s[o],c>=0&&(e[c].major=!0);return e}function Tf(t,e,s){const n=[],i={},r=e.length;let a,o;for(a=0;a<r;++a)o=e[a],i[o]=a,n.push({value:o,major:!1});return r===0||!s?n:K2(t,n,i,s)}class Ja extends Pn{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new Sg._date(e.adapters.date);i.init(s),Qi(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:jf(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:a,maxDefined:o}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!o&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!a||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=ze(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),r=ze(r)&&!isNaN(r)?r:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,a=this.max,o=M_(i,r,a);return this._unit=s.unit||(n.autoSkip?Nf(s.minUnit,this.min,this.max,this._getLabelCapacity(r)):G2(this,o.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:q2(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),Tf(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?n=r:n=(r-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;s=et(s,0,a),n=et(n,0,a),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,r=i.time,a=r.unit||Nf(r.minUnit,s,n,this._getLabelCapacity(s)),o=ie(i.ticks.stepSize,1),c=a==="week"?r.isoWeekday:!1,d=ii(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(n,s,a)>1e5*o)throw new Error(s+" and "+n+" are too far apart with stepSize of "+o+" "+a);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,o,a),m++)Mf(u,f,p);return(f===n||i.bounds==="ticks"||m===1)&&Mf(u,f,p),Object.keys(u).sort(Sf).map(g=>+g)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,r=this._unit,a=s||i[r];return this._adapter.format(e,a)}_tickFormatFunction(e,s,n,i){const r=this.options,a=r.ticks.callback;if(a)return ne(a,[e,s,n],this);const o=r.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],h=d&&o[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,i||(m?h:u))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=Bt(this.isHorizontal()?s.maxRotation:s.minRotation),r=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*a,h:n*a+o*r}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Tf(this,[e],this._majorUnit),i),a=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(jf(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Zp(e.sort(Sf))}}function fa(t,e,s){let n=0,i=t.length-1,r,a,o,c;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=vs(t,"pos",e)),{pos:r,time:o}=t[n],{pos:a,time:c}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=vs(t,"time",e)),{time:r,pos:o}=t[n],{time:a,pos:c}=t[i]);const d=a-r;return d?o+(c-o)*(e-r)/d:o}class X2 extends Ja{static id="timeseries";static defaults=Ja.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=fa(s,this.min),this._tableRange=fa(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],r=[];let a,o,c,d,u;for(a=0,o=e.length;a<o;++a)d=e[a],d>=s&&d<=n&&i.push(d);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(a=0,o=i.length;a<o;++a)u=i[a+1],c=i[a-1],d=i[a],Math.round((u+c)/2)!==d&&r.push({time:d,pos:a/(o-1)});return r}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(fa(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return fa(this._table,n*this._tableRange+this._minPos,!0)}}var Z2=Object.freeze({__proto__:null,CategoryScale:Or,LinearScale:Rr,LogarithmicScale:A2,RadialLinearScale:Yg,TimeScale:Ja,TimeSeriesScale:X2});const J2=[rw,Rk,N2,Z2];At.register(...J2);var kl={exports:{}};var Cf;function Q2(){return Cf||(Cf=1,(function(t){(function(e,s,n,i){var r=["","webkit","Moz","MS","ms","o"],a=s.createElement("div"),o="function",c=Math.round,d=Math.abs,u=Date.now;function h(b,w,C){return setTimeout(S(b,C),w)}function f(b,w,C){return Array.isArray(b)?(m(b,C[w],C),!0):!1}function m(b,w,C){var E;if(b)if(b.forEach)b.forEach(w,C);else if(b.length!==i)for(E=0;E<b.length;)w.call(C,b[E],E,b),E++;else for(E in b)b.hasOwnProperty(E)&&w.call(C,b[E],E,b)}function p(b,w,C){var E="DEPRECATED METHOD: "+w+`
`+C+` AT 
`;return function(){var L=new Error("get-stack-trace"),$=L&&L.stack?L.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",me=e.console&&(e.console.warn||e.console.log);return me&&me.call(e.console,E,$),b.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(w){if(w===i||w===null)throw new TypeError("Cannot convert undefined or null to object");for(var C=Object(w),E=1;E<arguments.length;E++){var L=arguments[E];if(L!==i&&L!==null)for(var $ in L)L.hasOwnProperty($)&&(C[$]=L[$])}return C}:g=Object.assign;var x=p(function(w,C,E){for(var L=Object.keys(C),$=0;$<L.length;)(!E||E&&w[L[$]]===i)&&(w[L[$]]=C[L[$]]),$++;return w},"extend","Use `assign`."),v=p(function(w,C){return x(w,C,!0)},"merge","Use `assign`.");function _(b,w,C){var E=w.prototype,L;L=b.prototype=Object.create(E),L.constructor=b,L._super=E,C&&g(L,C)}function S(b,w){return function(){return b.apply(w,arguments)}}function N(b,w){return typeof b==o?b.apply(w&&w[0]||i,w):b}function j(b,w){return b===i?w:b}function k(b,w,C){m(O(w),function(E){b.addEventListener(E,C,!1)})}function T(b,w,C){m(O(w),function(E){b.removeEventListener(E,C,!1)})}function M(b,w){for(;b;){if(b==w)return!0;b=b.parentNode}return!1}function P(b,w){return b.indexOf(w)>-1}function O(b){return b.trim().split(/\s+/g)}function A(b,w,C){if(b.indexOf&&!C)return b.indexOf(w);for(var E=0;E<b.length;){if(C&&b[E][C]==w||!C&&b[E]===w)return E;E++}return-1}function I(b){return Array.prototype.slice.call(b,0)}function X(b,w,C){for(var E=[],L=[],$=0;$<b.length;){var me=b[$][w];A(L,me)<0&&E.push(b[$]),L[$]=me,$++}return E=E.sort(function(st,ht){return st[w]>ht[w]}),E}function U(b,w){for(var C,E,L=w[0].toUpperCase()+w.slice(1),$=0;$<r.length;){if(C=r[$],E=C?C+L:w,E in b)return E;$++}return i}var K=1;function J(){return K++}function q(b){var w=b.ownerDocument||b;return w.defaultView||w.parentWindow||e}var de=/mobile|tablet|ip(ad|hone|od)|android/i,B="ontouchstart"in e,ae=U(e,"PointerEvent")!==i,Ne=B&&de.test(navigator.userAgent),Te="touch",he="pen",D="mouse",R="kinect",W=25,oe=1,le=2,_e=4,Fe=8,xt=1,H=2,we=4,Ae=8,Ut=16,it=H|we,fe=Ae|Ut,Ke=it|fe,$r=["x","y"],nn=["clientX","clientY"];function tt(b,w){var C=this;this.manager=b,this.callback=w,this.element=b.element,this.target=b.options.inputTarget,this.domHandler=function(E){N(b.options.enable,[b])&&C.handler(E)},this.init()}tt.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(q(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(q(this.element),this.evWin,this.domHandler)}};function Yr(b){var w,C=b.options.inputClass;return C?w=C:ae?w=Ft:Ne?w=Fn:B?w=Jo:w=Xe,new w(b,Gt)}function Gt(b,w,C){var E=C.pointers.length,L=C.changedPointers.length,$=w&oe&&E-L===0,me=w&(_e|Fe)&&E-L===0;C.isFirst=!!$,C.isFinal=!!me,$&&(b.session={}),C.eventType=w,Xo(b,C),b.emit("hammer.input",C),b.recognize(C),b.session.prevInput=C}function Xo(b,w){var C=b.session,E=w.pointers,L=E.length;C.firstInput||(C.firstInput=On(w)),L>1&&!C.firstMultiple?C.firstMultiple=On(w):L===1&&(C.firstMultiple=!1);var $=C.firstInput,me=C.firstMultiple,Qe=me?me.center:$.center,st=w.center=wi(E);w.timeStamp=u(),w.deltaTime=w.timeStamp-$.timeStamp,w.angle=an(Qe,st),w.distance=rn(Qe,st),Zo(C,w),w.offsetDirection=Ur(w.deltaX,w.deltaY);var ht=ki(w.deltaTime,w.deltaX,w.deltaY);w.overallVelocityX=ht.x,w.overallVelocityY=ht.y,w.overallVelocity=d(ht.x)>d(ht.y)?ht.x:ht.y,w.scale=me?Si(me.pointers,E):1,w.rotation=me?Gr(me.pointers,E):0,w.maxPointers=C.prevInput?w.pointers.length>C.prevInput.maxPointers?w.pointers.length:C.prevInput.maxPointers:w.pointers.length,As(C,w);var Xt=b.element;M(w.srcEvent.target,Xt)&&(Xt=w.srcEvent.target),w.target=Xt}function Zo(b,w){var C=w.center,E=b.offsetDelta||{},L=b.prevDelta||{},$=b.prevInput||{};(w.eventType===oe||$.eventType===_e)&&(L=b.prevDelta={x:$.deltaX||0,y:$.deltaY||0},E=b.offsetDelta={x:C.x,y:C.y}),w.deltaX=L.x+(C.x-E.x),w.deltaY=L.y+(C.y-E.y)}function As(b,w){var C=b.lastInterval||w,E=w.timeStamp-C.timeStamp,L,$,me,Qe;if(w.eventType!=Fe&&(E>W||C.velocity===i)){var st=w.deltaX-C.deltaX,ht=w.deltaY-C.deltaY,Xt=ki(E,st,ht);$=Xt.x,me=Xt.y,L=d(Xt.x)>d(Xt.y)?Xt.x:Xt.y,Qe=Ur(st,ht),b.lastInterval=w}else L=C.velocity,$=C.velocityX,me=C.velocityY,Qe=C.direction;w.velocity=L,w.velocityX=$,w.velocityY=me,w.direction=Qe}function On(b){for(var w=[],C=0;C<b.pointers.length;)w[C]={clientX:c(b.pointers[C].clientX),clientY:c(b.pointers[C].clientY)},C++;return{timeStamp:u(),pointers:w,center:wi(w),deltaX:b.deltaX,deltaY:b.deltaY}}function wi(b){var w=b.length;if(w===1)return{x:c(b[0].clientX),y:c(b[0].clientY)};for(var C=0,E=0,L=0;L<w;)C+=b[L].clientX,E+=b[L].clientY,L++;return{x:c(C/w),y:c(E/w)}}function ki(b,w,C){return{x:w/b||0,y:C/b||0}}function Ur(b,w){return b===w?xt:d(b)>=d(w)?b<0?H:we:w<0?Ae:Ut}function rn(b,w,C){C||(C=$r);var E=w[C[0]]-b[C[0]],L=w[C[1]]-b[C[1]];return Math.sqrt(E*E+L*L)}function an(b,w,C){C||(C=$r);var E=w[C[0]]-b[C[0]],L=w[C[1]]-b[C[1]];return Math.atan2(L,E)*180/Math.PI}function Gr(b,w){return an(w[1],w[0],nn)+an(b[1],b[0],nn)}function Si(b,w){return rn(w[0],w[1],nn)/rn(b[0],b[1],nn)}var z={mousedown:oe,mousemove:le,mouseup:_e},xe="mousedown",We="mousemove mouseup";function Xe(){this.evEl=xe,this.evWin=We,this.pressed=!1,tt.apply(this,arguments)}_(Xe,tt,{handler:function(w){var C=z[w.type];C&oe&&w.button===0&&(this.pressed=!0),C&le&&w.which!==1&&(C=_e),this.pressed&&(C&_e&&(this.pressed=!1),this.callback(this.manager,C,{pointers:[w],changedPointers:[w],pointerType:D,srcEvent:w}))}});var Rn={pointerdown:oe,pointermove:le,pointerup:_e,pointercancel:Fe,pointerout:Fe},kt={2:Te,3:he,4:D,5:R},cs="pointerdown",Lt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(cs="MSPointerDown",Lt="MSPointerMove MSPointerUp MSPointerCancel");function Ft(){this.evEl=cs,this.evWin=Lt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(Ft,tt,{handler:function(w){var C=this.store,E=!1,L=w.type.toLowerCase().replace("ms",""),$=Rn[L],me=kt[w.pointerType]||w.pointerType,Qe=me==Te,st=A(C,w.pointerId,"pointerId");$&oe&&(w.button===0||Qe)?st<0&&(C.push(w),st=C.length-1):$&(_e|Fe)&&(E=!0),!(st<0)&&(C[st]=w,this.callback(this.manager,$,{pointers:C,changedPointers:[w],pointerType:me,srcEvent:w}),E&&C.splice(st,1))}});var Ln={touchstart:oe,touchmove:le,touchend:_e,touchcancel:Fe},on="touchstart",te="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=on,this.evWin=te,this.started=!1,tt.apply(this,arguments)}_(yt,tt,{handler:function(w){var C=Ln[w.type];if(C===oe&&(this.started=!0),!!this.started){var E=qt.call(this,w,C);C&(_e|Fe)&&E[0].length-E[1].length===0&&(this.started=!1),this.callback(this.manager,C,{pointers:E[0],changedPointers:E[1],pointerType:Te,srcEvent:w})}}});function qt(b,w){var C=I(b.touches),E=I(b.changedTouches);return w&(_e|Fe)&&(C=X(C.concat(E),"identifier")),[C,E]}var ji={touchstart:oe,touchmove:le,touchend:_e,touchcancel:Fe},qr="touchstart touchmove touchend touchcancel";function Fn(){this.evTarget=qr,this.targetIds={},tt.apply(this,arguments)}_(Fn,tt,{handler:function(w){var C=ji[w.type],E=ib.call(this,w,C);E&&this.callback(this.manager,C,{pointers:E[0],changedPointers:E[1],pointerType:Te,srcEvent:w})}});function ib(b,w){var C=I(b.touches),E=this.targetIds;if(w&(oe|le)&&C.length===1)return E[C[0].identifier]=!0,[C,C];var L,$,me=I(b.changedTouches),Qe=[],st=this.target;if($=C.filter(function(ht){return M(ht.target,st)}),w===oe)for(L=0;L<$.length;)E[$[L].identifier]=!0,L++;for(L=0;L<me.length;)E[me[L].identifier]&&Qe.push(me[L]),w&(_e|Fe)&&delete E[me[L].identifier],L++;if(Qe.length)return[X($.concat(Qe),"identifier"),Qe]}var rb=2500,Eu=25;function Jo(){tt.apply(this,arguments);var b=S(this.handler,this);this.touch=new Fn(this.manager,b),this.mouse=new Xe(this.manager,b),this.primaryTouch=null,this.lastTouches=[]}_(Jo,tt,{handler:function(w,C,E){var L=E.pointerType==Te,$=E.pointerType==D;if(!($&&E.sourceCapabilities&&E.sourceCapabilities.firesTouchEvents)){if(L)ab.call(this,C,E);else if($&&ob.call(this,E))return;this.callback(w,C,E)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ab(b,w){b&oe?(this.primaryTouch=w.changedPointers[0].identifier,Au.call(this,w)):b&(_e|Fe)&&Au.call(this,w)}function Au(b){var w=b.changedPointers[0];if(w.identifier===this.primaryTouch){var C={x:w.clientX,y:w.clientY};this.lastTouches.push(C);var E=this.lastTouches,L=function(){var $=E.indexOf(C);$>-1&&E.splice($,1)};setTimeout(L,rb)}}function ob(b){for(var w=b.srcEvent.clientX,C=b.srcEvent.clientY,E=0;E<this.lastTouches.length;E++){var L=this.lastTouches[E],$=Math.abs(w-L.x),me=Math.abs(C-L.y);if($<=Eu&&me<=Eu)return!0}return!1}var Ou=U(a.style,"touchAction"),Ru=Ou!==i,Lu="compute",Fu="auto",Qo="manipulation",ln="none",Ni="pan-x",Mi="pan-y",Kr=cb();function el(b,w){this.manager=b,this.set(w)}el.prototype={set:function(b){b==Lu&&(b=this.compute()),Ru&&this.manager.element.style&&Kr[b]&&(this.manager.element.style[Ou]=b),this.actions=b.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var b=[];return m(this.manager.recognizers,function(w){N(w.options.enable,[w])&&(b=b.concat(w.getTouchAction()))}),lb(b.join(" "))},preventDefaults:function(b){var w=b.srcEvent,C=b.offsetDirection;if(this.manager.session.prevented){w.preventDefault();return}var E=this.actions,L=P(E,ln)&&!Kr[ln],$=P(E,Mi)&&!Kr[Mi],me=P(E,Ni)&&!Kr[Ni];if(L){var Qe=b.pointers.length===1,st=b.distance<2,ht=b.deltaTime<250;if(Qe&&st&&ht)return}if(!(me&&$)&&(L||$&&C&it||me&&C&fe))return this.preventSrc(w)},preventSrc:function(b){this.manager.session.prevented=!0,b.preventDefault()}};function lb(b){if(P(b,ln))return ln;var w=P(b,Ni),C=P(b,Mi);return w&&C?ln:w||C?w?Ni:Mi:P(b,Qo)?Qo:Fu}function cb(){if(!Ru)return!1;var b={},w=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(C){b[C]=w?e.CSS.supports("touch-action",C):!0}),b}var Xr=1,St=2,In=4,Os=8,ds=Os,Ti=16,Kt=32;function us(b){this.options=g({},this.defaults,b||{}),this.id=J(),this.manager=null,this.options.enable=j(this.options.enable,!0),this.state=Xr,this.simultaneous={},this.requireFail=[]}us.prototype={defaults:{},set:function(b){return g(this.options,b),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(b){if(f(b,"recognizeWith",this))return this;var w=this.simultaneous;return b=Zr(b,this),w[b.id]||(w[b.id]=b,b.recognizeWith(this)),this},dropRecognizeWith:function(b){return f(b,"dropRecognizeWith",this)?this:(b=Zr(b,this),delete this.simultaneous[b.id],this)},requireFailure:function(b){if(f(b,"requireFailure",this))return this;var w=this.requireFail;return b=Zr(b,this),A(w,b)===-1&&(w.push(b),b.requireFailure(this)),this},dropRequireFailure:function(b){if(f(b,"dropRequireFailure",this))return this;b=Zr(b,this);var w=A(this.requireFail,b);return w>-1&&this.requireFail.splice(w,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(b){return!!this.simultaneous[b.id]},emit:function(b){var w=this,C=this.state;function E(L){w.manager.emit(L,b)}C<Os&&E(w.options.event+Iu(C)),E(w.options.event),b.additionalEvent&&E(b.additionalEvent),C>=Os&&E(w.options.event+Iu(C))},tryEmit:function(b){if(this.canEmit())return this.emit(b);this.state=Kt},canEmit:function(){for(var b=0;b<this.requireFail.length;){if(!(this.requireFail[b].state&(Kt|Xr)))return!1;b++}return!0},recognize:function(b){var w=g({},b);if(!N(this.options.enable,[this,w])){this.reset(),this.state=Kt;return}this.state&(ds|Ti|Kt)&&(this.state=Xr),this.state=this.process(w),this.state&(St|In|Os|Ti)&&this.tryEmit(w)},process:function(b){},getTouchAction:function(){},reset:function(){}};function Iu(b){return b&Ti?"cancel":b&Os?"end":b&In?"move":b&St?"start":""}function Vu(b){return b==Ut?"down":b==Ae?"up":b==H?"left":b==we?"right":""}function Zr(b,w){var C=w.manager;return C?C.get(b):b}function It(){us.apply(this,arguments)}_(It,us,{defaults:{pointers:1},attrTest:function(b){var w=this.options.pointers;return w===0||b.pointers.length===w},process:function(b){var w=this.state,C=b.eventType,E=w&(St|In),L=this.attrTest(b);return E&&(C&Fe||!L)?w|Ti:E||L?C&_e?w|Os:w&St?w|In:St:Kt}});function Jr(){It.apply(this,arguments),this.pX=null,this.pY=null}_(Jr,It,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ke},getTouchAction:function(){var b=this.options.direction,w=[];return b&it&&w.push(Mi),b&fe&&w.push(Ni),w},directionTest:function(b){var w=this.options,C=!0,E=b.distance,L=b.direction,$=b.deltaX,me=b.deltaY;return L&w.direction||(w.direction&it?(L=$===0?xt:$<0?H:we,C=$!=this.pX,E=Math.abs(b.deltaX)):(L=me===0?xt:me<0?Ae:Ut,C=me!=this.pY,E=Math.abs(b.deltaY))),b.direction=L,C&&E>w.threshold&&L&w.direction},attrTest:function(b){return It.prototype.attrTest.call(this,b)&&(this.state&St||!(this.state&St)&&this.directionTest(b))},emit:function(b){this.pX=b.deltaX,this.pY=b.deltaY;var w=Vu(b.direction);w&&(b.additionalEvent=this.options.event+w),this._super.emit.call(this,b)}});function tl(){It.apply(this,arguments)}_(tl,It,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ln]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.scale-1)>this.options.threshold||this.state&St)},emit:function(b){if(b.scale!==1){var w=b.scale<1?"in":"out";b.additionalEvent=this.options.event+w}this._super.emit.call(this,b)}});function sl(){us.apply(this,arguments),this._timer=null,this._input=null}_(sl,us,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Fu]},process:function(b){var w=this.options,C=b.pointers.length===w.pointers,E=b.distance<w.threshold,L=b.deltaTime>w.time;if(this._input=b,!E||!C||b.eventType&(_e|Fe)&&!L)this.reset();else if(b.eventType&oe)this.reset(),this._timer=h(function(){this.state=ds,this.tryEmit()},w.time,this);else if(b.eventType&_e)return ds;return Kt},reset:function(){clearTimeout(this._timer)},emit:function(b){this.state===ds&&(b&&b.eventType&_e?this.manager.emit(this.options.event+"up",b):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function nl(){It.apply(this,arguments)}_(nl,It,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ln]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.rotation)>this.options.threshold||this.state&St)}});function il(){It.apply(this,arguments)}_(il,It,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:it|fe,pointers:1},getTouchAction:function(){return Jr.prototype.getTouchAction.call(this)},attrTest:function(b){var w=this.options.direction,C;return w&(it|fe)?C=b.overallVelocity:w&it?C=b.overallVelocityX:w&fe&&(C=b.overallVelocityY),this._super.attrTest.call(this,b)&&w&b.offsetDirection&&b.distance>this.options.threshold&&b.maxPointers==this.options.pointers&&d(C)>this.options.velocity&&b.eventType&_e},emit:function(b){var w=Vu(b.offsetDirection);w&&this.manager.emit(this.options.event+w,b),this.manager.emit(this.options.event,b)}});function Qr(){us.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(Qr,us,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Qo]},process:function(b){var w=this.options,C=b.pointers.length===w.pointers,E=b.distance<w.threshold,L=b.deltaTime<w.time;if(this.reset(),b.eventType&oe&&this.count===0)return this.failTimeout();if(E&&L&&C){if(b.eventType!=_e)return this.failTimeout();var $=this.pTime?b.timeStamp-this.pTime<w.interval:!0,me=!this.pCenter||rn(this.pCenter,b.center)<w.posThreshold;this.pTime=b.timeStamp,this.pCenter=b.center,!me||!$?this.count=1:this.count+=1,this._input=b;var Qe=this.count%w.taps;if(Qe===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=ds,this.tryEmit()},w.interval,this),St):ds}return Kt},failTimeout:function(){return this._timer=h(function(){this.state=Kt},this.options.interval,this),Kt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ds&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Rs(b,w){return w=w||{},w.recognizers=j(w.recognizers,Rs.defaults.preset),new rl(b,w)}Rs.VERSION="2.0.7",Rs.defaults={domEvents:!1,touchAction:Lu,enable:!0,inputTarget:null,inputClass:null,preset:[[nl,{enable:!1}],[tl,{enable:!1},["rotate"]],[il,{direction:it}],[Jr,{direction:it},["swipe"]],[Qr],[Qr,{event:"doubletap",taps:2},["tap"]],[sl]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var db=1,Wu=2;function rl(b,w){this.options=g({},Rs.defaults,w||{}),this.options.inputTarget=this.options.inputTarget||b,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=b,this.input=Yr(this),this.touchAction=new el(this,this.options.touchAction),Bu(this,!0),m(this.options.recognizers,function(C){var E=this.add(new C[0](C[1]));C[2]&&E.recognizeWith(C[2]),C[3]&&E.requireFailure(C[3])},this)}rl.prototype={set:function(b){return g(this.options,b),b.touchAction&&this.touchAction.update(),b.inputTarget&&(this.input.destroy(),this.input.target=b.inputTarget,this.input.init()),this},stop:function(b){this.session.stopped=b?Wu:db},recognize:function(b){var w=this.session;if(!w.stopped){this.touchAction.preventDefaults(b);var C,E=this.recognizers,L=w.curRecognizer;(!L||L&&L.state&ds)&&(L=w.curRecognizer=null);for(var $=0;$<E.length;)C=E[$],w.stopped!==Wu&&(!L||C==L||C.canRecognizeWith(L))?C.recognize(b):C.reset(),!L&&C.state&(St|In|Os)&&(L=w.curRecognizer=C),$++}},get:function(b){if(b instanceof us)return b;for(var w=this.recognizers,C=0;C<w.length;C++)if(w[C].options.event==b)return w[C];return null},add:function(b){if(f(b,"add",this))return this;var w=this.get(b.options.event);return w&&this.remove(w),this.recognizers.push(b),b.manager=this,this.touchAction.update(),b},remove:function(b){if(f(b,"remove",this))return this;if(b=this.get(b),b){var w=this.recognizers,C=A(w,b);C!==-1&&(w.splice(C,1),this.touchAction.update())}return this},on:function(b,w){if(b!==i&&w!==i){var C=this.handlers;return m(O(b),function(E){C[E]=C[E]||[],C[E].push(w)}),this}},off:function(b,w){if(b!==i){var C=this.handlers;return m(O(b),function(E){w?C[E]&&C[E].splice(A(C[E],w),1):delete C[E]}),this}},emit:function(b,w){this.options.domEvents&&ub(b,w);var C=this.handlers[b]&&this.handlers[b].slice();if(!(!C||!C.length)){w.type=b,w.preventDefault=function(){w.srcEvent.preventDefault()};for(var E=0;E<C.length;)C[E](w),E++}},destroy:function(){this.element&&Bu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Bu(b,w){var C=b.element;if(C.style){var E;m(b.options.cssProps,function(L,$){E=U(C.style,$),w?(b.oldCssProps[E]=C.style[E],C.style[E]=L):C.style[E]=b.oldCssProps[E]||""}),w||(b.oldCssProps={})}}function ub(b,w){var C=s.createEvent("Event");C.initEvent(b,!0,!0),C.gesture=w,w.target.dispatchEvent(C)}g(Rs,{INPUT_START:oe,INPUT_MOVE:le,INPUT_END:_e,INPUT_CANCEL:Fe,STATE_POSSIBLE:Xr,STATE_BEGAN:St,STATE_CHANGED:In,STATE_ENDED:Os,STATE_RECOGNIZED:ds,STATE_CANCELLED:Ti,STATE_FAILED:Kt,DIRECTION_NONE:xt,DIRECTION_LEFT:H,DIRECTION_RIGHT:we,DIRECTION_UP:Ae,DIRECTION_DOWN:Ut,DIRECTION_HORIZONTAL:it,DIRECTION_VERTICAL:fe,DIRECTION_ALL:Ke,Manager:rl,Input:tt,TouchAction:el,TouchInput:Fn,MouseInput:Xe,PointerEventInput:Ft,TouchMouseInput:Jo,SingleTouchInput:yt,Recognizer:us,AttrRecognizer:It,Tap:Qr,Pan:Jr,Swipe:il,Pinch:tl,Rotate:nl,Press:sl,on:k,off:T,each:m,merge:v,extend:x,assign:g,inherit:_,bindFn:S,prefixed:U});var hb=typeof e<"u"?e:typeof self<"u"?self:{};hb.Hammer=Rs,t.exports?t.exports=Rs:e[n]=Rs})(window,document,"Hammer")})(kl)),kl.exports}var eS=Q2();const sr=pb(eS);const vr=t=>t&&t.enabled&&t.modifierKey,Ug=(t,e)=>t&&e[t+"Key"],yd=(t,e)=>t&&!e[t+"Key"];function Xs(t,e,s){return t===void 0?!0:typeof t=="string"?t.indexOf(e)!==-1:typeof t=="function"?t({chart:s}).indexOf(e)!==-1:!1}function Sl(t,e){return typeof t=="function"&&(t=t({chart:e})),typeof t=="string"?{x:t.indexOf("x")!==-1,y:t.indexOf("y")!==-1}:{x:!1,y:!1}}function tS(t,e){let s;return function(){return clearTimeout(s),s=setTimeout(t,e),e}}function sS({x:t,y:e},s){const n=s.scales,i=Object.keys(n);for(let r=0;r<i.length;r++){const a=n[i[r]];if(e>=a.top&&e<=a.bottom&&t>=a.left&&t<=a.right)return a}return null}function Gg(t,e,s){const{mode:n="xy",scaleMode:i,overScaleMode:r}=t||{},a=sS(e,s),o=Sl(n,s),c=Sl(i,s);if(r){const u=Sl(r,s);for(const h of["x","y"])u[h]&&(c[h]=o[h],o[h]=!1)}if(a&&c[a.axis])return[a];const d=[];return pe(s.scales,function(u){o[u.axis]&&d.push(u)}),d}const fc=new WeakMap;function Ve(t){let e=fc.get(t);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},fc.set(t,e)),e}function nS(t){fc.delete(t)}function qg(t,e,s,n){const i=Math.max(0,Math.min(1,(t-e)/s||0)),r=1-i;return{min:n*i,max:n*r}}function Kg(t,e){const s=t.isHorizontal()?e.x:e.y;return t.getValueForPixel(s)}function Xg(t,e,s){const n=t.max-t.min,i=n*(e-1),r=Kg(t,s);return qg(r,t.min,n,i)}function iS(t,e,s){const n=Kg(t,s);if(n===void 0)return{min:t.min,max:t.max};const i=Math.log10(t.min),r=Math.log10(t.max),a=Math.log10(n),o=r-i,c=o*(e-1),d=qg(a,i,o,c);return{min:Math.pow(10,i+d.min),max:Math.pow(10,r-d.max)}}function rS(t,e){return e&&(e[t.id]||e[t.axis])||{}}function Pf(t,e,s,n,i){let r=s[n];if(r==="original"){const a=t.originalScaleLimits[e.id][n];r=ie(a.options,a.scale)}return ie(r,i)}function aS(t,e,s){const n=t.getValueForPixel(e),i=t.getValueForPixel(s);return{min:Math.min(n,i),max:Math.max(n,i)}}function oS(t,{min:e,max:s,minLimit:n,maxLimit:i},r){const a=(t-s+e)/2;e-=a,s+=a;const o=r.min.options??r.min.scale,c=r.max.options??r.max.scale,d=t/1e6;return _n(e,o,d)&&(e=o),_n(s,c,d)&&(s=c),e<n?(e=n,s=Math.min(n+t,i)):s>i&&(s=i,e=Math.max(i-t,n)),{min:e,max:s}}function Dn(t,{min:e,max:s},n,i=!1){const r=Ve(t.chart),{options:a}=t,o=rS(t,n),{minRange:c=0}=o,d=Pf(r,t,o,"min",-1/0),u=Pf(r,t,o,"max",1/0);if(i==="pan"&&(e<d||s>u))return!0;const h=t.max-t.min,f=i?Math.max(s-e,c):h;if(i&&f===c&&h<=c)return!0;const m=oS(f,{min:e,max:s,minLimit:d,maxLimit:u},r.originalScaleLimits[t.id]);return a.min=m.min,a.max=m.max,r.updatedScaleLimits[t.id]=m,t.parse(m.min)!==t.min||t.parse(m.max)!==t.max}function lS(t,e,s,n){const i=Xg(t,e,s),r={min:t.min+i.min,max:t.max-i.max};return Dn(t,r,n,!0)}function cS(t,e,s,n){const i=iS(t,e,s);return Dn(t,i,n,!0)}function dS(t,e,s,n){Dn(t,aS(t,e,s),n,!0)}const Df=t=>t===0||isNaN(t)?0:t<0?Math.min(Math.round(t),-1):Math.max(Math.round(t),1);function uS(t){const s=t.getLabels().length-1;t.min>0&&(t.min-=1),t.max<s&&(t.max+=1)}function hS(t,e,s,n){const i=Xg(t,e,s);t.min===t.max&&e<1&&uS(t);const r={min:t.min+Df(i.min),max:t.max-Df(i.max)};return Dn(t,r,n,!0)}function fS(t){return t.isHorizontal()?t.width:t.height}function mS(t,e,s){const i=t.getLabels().length-1;let{min:r,max:a}=t;const o=Math.max(a-r,1),c=Math.round(fS(t)/Math.max(o,10)),d=Math.round(Math.abs(e/c));let u;return e<-c?(a=Math.min(a+d,i),r=o===1?a:a-o,u=a===i):e>c&&(r=Math.max(0,r-d),a=o===1?r:r+o,u=r===0),Dn(t,{min:r,max:a},s)||u}const pS={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function Zg(t,e,s,n=!1){const{min:i,max:r,options:a}=t,o=a.time&&a.time.round,c=pS[o]||0,d=t.getValueForPixel(t.getPixelForValue(i+c)-e),u=t.getValueForPixel(t.getPixelForValue(r+c)-e);return isNaN(d)||isNaN(u)?!0:Dn(t,{min:d,max:u},s,n?"pan":!1)}function Ef(t,e,s){return Zg(t,e,s,!0)}const mc={category:hS,default:lS,logarithmic:cS},pc={default:dS},gc={category:mS,default:Zg,logarithmic:Ef,timeseries:Ef};function gS(t,e,s){const{id:n,options:{min:i,max:r}}=t;if(!e[n]||!s[n])return!0;const a=s[n];return a.min!==i||a.max!==r}function Af(t,e){pe(t,(s,n)=>{e[n]||delete t[n]})}function pi(t,e){const{scales:s}=t,{originalScaleLimits:n,updatedScaleLimits:i}=e;return pe(s,function(r){gS(r,n,i)&&(n[r.id]={min:{scale:r.min,options:r.options.min},max:{scale:r.max,options:r.options.max}})}),Af(n,s),Af(i,s),n}function Of(t,e,s,n){const i=mc[t.type]||mc.default;ne(i,[t,e,s,n])}function Rf(t,e,s,n){const i=pc[t.type]||pc.default;ne(i,[t,e,s,n])}function xS(t){const e=t.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function bd(t,e,s="none",n="api"){const{x:i=1,y:r=1,focalPoint:a=xS(t)}=typeof e=="number"?{x:e,y:e}:e,o=Ve(t),{options:{limits:c,zoom:d}}=o;pi(t,o);const u=i!==1,h=r!==1,f=Gg(d,a,t);pe(f||t.scales,function(m){m.isHorizontal()&&u?Of(m,i,a,c):!m.isHorizontal()&&h&&Of(m,r,a,c)}),t.update(s),ne(d.onZoom,[{chart:t,trigger:n}])}function Jg(t,e,s,n="none",i="api"){const r=Ve(t),{options:{limits:a,zoom:o}}=r,{mode:c="xy"}=o;pi(t,r);const d=Xs(c,"x",t),u=Xs(c,"y",t);pe(t.scales,function(h){h.isHorizontal()&&d?Rf(h,e.x,s.x,a):!h.isHorizontal()&&u&&Rf(h,e.y,s.y,a)}),t.update(n),ne(o.onZoom,[{chart:t,trigger:i}])}function yS(t,e,s,n="none",i="api"){const r=Ve(t);pi(t,r);const a=t.scales[e];Dn(a,s,void 0,!0),t.update(n),ne(r.options.zoom?.onZoom,[{chart:t,trigger:i}])}function bS(t,e="default"){const s=Ve(t),n=pi(t,s);pe(t.scales,function(i){const r=i.options;n[i.id]?(r.min=n[i.id].min.options,r.max=n[i.id].max.options):(delete r.min,delete r.max),delete s.updatedScaleLimits[i.id]}),t.update(e),ne(s.options.zoom.onZoomComplete,[{chart:t}])}function vS(t,e){const s=t.originalScaleLimits[e];if(!s)return;const{min:n,max:i}=s;return ie(i.options,i.scale)-ie(n.options,n.scale)}function _S(t){const e=Ve(t);let s=1,n=1;return pe(t.scales,function(i){const r=vS(e,i.id);if(r){const a=Math.round(r/(i.max-i.min)*100)/100;s=Math.min(s,a),n=Math.max(n,a)}}),s<1?s:n}function Lf(t,e,s,n){const{panDelta:i}=n,r=i[t.id]||0;Et(r)===Et(e)&&(e+=r);const a=gc[t.type]||gc.default;ne(a,[t,e,s])?i[t.id]=0:i[t.id]=e}function Qg(t,e,s,n="none"){const{x:i=0,y:r=0}=typeof e=="number"?{x:e,y:e}:e,a=Ve(t),{options:{pan:o,limits:c}}=a,{onPan:d}=o||{};pi(t,a);const u=i!==0,h=r!==0;pe(s||t.scales,function(f){f.isHorizontal()&&u?Lf(f,i,c,a):!f.isHorizontal()&&h&&Lf(f,r,c,a)}),t.update(n),ne(d,[{chart:t}])}function ex(t){const e=Ve(t);pi(t,e);const s={};for(const n of Object.keys(t.scales)){const{min:i,max:r}=e.originalScaleLimits[n]||{min:{},max:{}};s[n]={min:i.scale,max:r.scale}}return s}function wS(t){const e=Ve(t),s={};for(const n of Object.keys(t.scales))s[n]=e.updatedScaleLimits[n];return s}function kS(t){const e=ex(t);for(const s of Object.keys(t.scales)){const{min:n,max:i}=e[s];if(n!==void 0&&t.scales[s].min!==n||i!==void 0&&t.scales[s].max!==i)return!0}return!1}function Ff(t){const e=Ve(t);return e.panning||e.dragging}const If=(t,e,s)=>Math.min(s,Math.max(e,t));function pt(t,e){const{handlers:s}=Ve(t),n=s[e];n&&n.target&&(n.target.removeEventListener(e,n),delete s[e])}function nr(t,e,s,n){const{handlers:i,options:r}=Ve(t),a=i[s];if(a&&a.target===e)return;pt(t,s),i[s]=c=>n(t,c,r),i[s].target=e;const o=s==="wheel"?!1:void 0;e.addEventListener(s,i[s],{passive:o})}function SS(t,e){const s=Ve(t);s.dragStart&&(s.dragging=!0,s.dragEnd=e,t.update("none"))}function jS(t,e){const s=Ve(t);!s.dragStart||e.key!=="Escape"||(pt(t,"keydown"),s.dragging=!1,s.dragStart=s.dragEnd=null,t.update("none"))}function xc(t,e){if(t.target!==e.canvas){const s=e.canvas.getBoundingClientRect();return{x:t.clientX-s.left,y:t.clientY-s.top}}return Qt(t,e)}function tx(t,e,s){const{onZoomStart:n,onZoomRejected:i}=s;if(n){const r=xc(e,t);if(ne(n,[{chart:t,event:e,point:r}])===!1)return ne(i,[{chart:t,event:e}]),!1}}function NS(t,e){if(t.legend){const r=Qt(e,t);if(ts(r,t.legend))return}const s=Ve(t),{pan:n,zoom:i={}}=s.options;if(e.button!==0||Ug(vr(n),e)||yd(vr(i.drag),e))return ne(i.onZoomRejected,[{chart:t,event:e}]);tx(t,e,i)!==!1&&(s.dragStart=e,nr(t,t.canvas.ownerDocument,"mousemove",SS),nr(t,window.document,"keydown",jS))}function MS({begin:t,end:e},s){let n=e.x-t.x,i=e.y-t.y;const r=Math.abs(n/i);r>s?n=Math.sign(n)*Math.abs(i*s):r<s&&(i=Math.sign(i)*Math.abs(n/s)),e.x=t.x+n,e.y=t.y+i}function Vf(t,e,s,{min:n,max:i,prop:r}){t[n]=If(Math.min(s.begin[r],s.end[r]),e[n],e[i]),t[i]=If(Math.max(s.begin[r],s.end[r]),e[n],e[i])}function TS(t,e,s){const n={begin:xc(e.dragStart,t),end:xc(e.dragEnd,t)};if(s){const i=t.chartArea.width/t.chartArea.height;MS(n,i)}return n}function sx(t,e,s,n){const i=Xs(e,"x",t),r=Xs(e,"y",t),{top:a,left:o,right:c,bottom:d,width:u,height:h}=t.chartArea,f={top:a,left:o,right:c,bottom:d},m=TS(t,s,n&&i&&r);i&&Vf(f,t.chartArea,m,{min:"left",max:"right",prop:"x"}),r&&Vf(f,t.chartArea,m,{min:"top",max:"bottom",prop:"y"});const p=f.right-f.left,g=f.bottom-f.top;return{...f,width:p,height:g,zoomX:i&&p?1+(u-p)/u:1,zoomY:r&&g?1+(h-g)/h:1}}function CS(t,e){const s=Ve(t);if(!s.dragStart)return;pt(t,"mousemove");const{mode:n,onZoomComplete:i,drag:{threshold:r=0,maintainAspectRatio:a}}=s.options.zoom,o=sx(t,n,{dragStart:s.dragStart,dragEnd:e},a),c=Xs(n,"x",t)?o.width:0,d=Xs(n,"y",t)?o.height:0,u=Math.sqrt(c*c+d*d);if(s.dragStart=s.dragEnd=null,u<=r){s.dragging=!1,t.update("none");return}Jg(t,{x:o.left,y:o.top},{x:o.right,y:o.bottom},"zoom","drag"),s.dragging=!1,s.filterNextClick=!0,ne(i,[{chart:t}])}function PS(t,e,s){if(yd(vr(s.wheel),e)){ne(s.onZoomRejected,[{chart:t,event:e}]);return}if(tx(t,e,s)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function DS(t,e){const{handlers:{onZoomComplete:s},options:{zoom:n}}=Ve(t);if(!PS(t,e,n))return;const i=e.target.getBoundingClientRect(),r=n.wheel.speed,a=e.deltaY>=0?2-1/(1-r):1+r,o={x:a,y:a,focalPoint:{x:e.clientX-i.left,y:e.clientY-i.top}};bd(t,o,"zoom","wheel"),ne(s,[{chart:t}])}function ES(t,e,s,n){s&&(Ve(t).handlers[e]=tS(()=>ne(s,[{chart:t}]),n))}function AS(t,e){const s=t.canvas,{wheel:n,drag:i,onZoomComplete:r}=e.zoom;n.enabled?(nr(t,s,"wheel",DS),ES(t,"onZoomComplete",r,250)):pt(t,"wheel"),i.enabled?(nr(t,s,"mousedown",NS),nr(t,s.ownerDocument,"mouseup",CS)):(pt(t,"mousedown"),pt(t,"mousemove"),pt(t,"mouseup"),pt(t,"keydown"))}function OS(t){pt(t,"mousedown"),pt(t,"mousemove"),pt(t,"mouseup"),pt(t,"wheel"),pt(t,"click"),pt(t,"keydown")}function RS(t,e){return function(s,n){const{pan:i,zoom:r={}}=e.options;if(!i||!i.enabled)return!1;const a=n&&n.srcEvent;return a&&!e.panning&&n.pointerType==="mouse"&&(yd(vr(i),a)||Ug(vr(r.drag),a))?(ne(i.onPanRejected,[{chart:t,event:n}]),!1):!0}}function LS(t,e){const s=Math.abs(t.clientX-e.clientX),n=Math.abs(t.clientY-e.clientY),i=s/n;let r,a;return i>.3&&i<1.7?r=a=!0:s>n?r=!0:a=!0,{x:r,y:a}}function nx(t,e,s){if(e.scale){const{center:n,pointers:i}=s,r=1/e.scale*s.scale,a=s.target.getBoundingClientRect(),o=LS(i[0],i[1]),c=e.options.zoom.mode,d={x:o.x&&Xs(c,"x",t)?r:1,y:o.y&&Xs(c,"y",t)?r:1,focalPoint:{x:n.x-a.left,y:n.y-a.top}};bd(t,d,"zoom","pinch"),e.scale=s.scale}}function FS(t,e,s){if(e.options.zoom.pinch.enabled){const n=Qt(s,t);ne(e.options.zoom.onZoomStart,[{chart:t,event:s,point:n}])===!1?(e.scale=null,ne(e.options.zoom.onZoomRejected,[{chart:t,event:s}])):e.scale=1}}function IS(t,e,s){e.scale&&(nx(t,e,s),e.scale=null,ne(e.options.zoom.onZoomComplete,[{chart:t}]))}function ix(t,e,s){const n=e.delta;n&&(e.panning=!0,Qg(t,{x:s.deltaX-n.x,y:s.deltaY-n.y},e.panScales),e.delta={x:s.deltaX,y:s.deltaY})}function VS(t,e,s){const{enabled:n,onPanStart:i,onPanRejected:r}=e.options.pan;if(!n)return;const a=s.target.getBoundingClientRect(),o={x:s.center.x-a.left,y:s.center.y-a.top};if(ne(i,[{chart:t,event:s,point:o}])===!1)return ne(r,[{chart:t,event:s}]);e.panScales=Gg(e.options.pan,o,t),e.delta={x:0,y:0},ix(t,e,s)}function WS(t,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,ne(e.options.pan.onPanComplete,[{chart:t}]))}const yc=new WeakMap;function Wf(t,e){const s=Ve(t),n=t.canvas,{pan:i,zoom:r}=e,a=new sr.Manager(n);r&&r.pinch.enabled&&(a.add(new sr.Pinch),a.on("pinchstart",o=>FS(t,s,o)),a.on("pinch",o=>nx(t,s,o)),a.on("pinchend",o=>IS(t,s,o))),i&&i.enabled&&(a.add(new sr.Pan({threshold:i.threshold,enable:RS(t,s)})),a.on("panstart",o=>VS(t,s,o)),a.on("panmove",o=>ix(t,s,o)),a.on("panend",()=>WS(t,s))),yc.set(t,a)}function Bf(t){const e=yc.get(t);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),yc.delete(t))}function BS(t,e){const{pan:s,zoom:n}=t,{pan:i,zoom:r}=e;return n?.zoom?.pinch?.enabled!==r?.zoom?.pinch?.enabled||s?.enabled!==i?.enabled||s?.threshold!==i?.threshold}var zS="2.2.0";function ma(t,e,s){const n=s.zoom.drag,{dragStart:i,dragEnd:r}=Ve(t);if(n.drawTime!==e||!r)return;const{left:a,top:o,width:c,height:d}=sx(t,s.zoom.mode,{dragStart:i,dragEnd:r},n.maintainAspectRatio),u=t.ctx;u.save(),u.beginPath(),u.fillStyle=n.backgroundColor||"rgba(225,225,225,0.3)",u.fillRect(a,o,c,d),n.borderWidth>0&&(u.lineWidth=n.borderWidth,u.strokeStyle=n.borderColor||"rgba(225,225,225)",u.strokeRect(a,o,c,d)),u.restore()}var HS={id:"zoom",version:zS,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(t,e,s){const n=Ve(t);n.options=s,Object.prototype.hasOwnProperty.call(s.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(s.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(s.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),sr&&Wf(t,s),t.pan=(i,r,a)=>Qg(t,i,r,a),t.zoom=(i,r)=>bd(t,i,r),t.zoomRect=(i,r,a)=>Jg(t,i,r,a),t.zoomScale=(i,r,a)=>yS(t,i,r,a),t.resetZoom=i=>bS(t,i),t.getZoomLevel=()=>_S(t),t.getInitialScaleBounds=()=>ex(t),t.getZoomedScaleBounds=()=>wS(t),t.isZoomedOrPanned=()=>kS(t),t.isZoomingOrPanning=()=>Ff(t)},beforeEvent(t,{event:e}){if(Ff(t))return!1;if(e.type==="click"||e.type==="mouseup"){const s=Ve(t);if(s.filterNextClick)return s.filterNextClick=!1,!1}},beforeUpdate:function(t,e,s){const n=Ve(t),i=n.options;n.options=s,BS(i,s)&&(Bf(t),Wf(t,s)),AS(t,s)},beforeDatasetsDraw(t,e,s){ma(t,"beforeDatasetsDraw",s)},afterDatasetsDraw(t,e,s){ma(t,"afterDatasetsDraw",s)},beforeDraw(t,e,s){ma(t,"beforeDraw",s)},afterDraw(t,e,s){ma(t,"afterDraw",s)},stop:function(t){OS(t),sr&&Bf(t),nS(t)},panFunctions:gc,zoomFunctions:mc,zoomRectFunctions:pc};const pa={labels:Array.from({length:24},(t,e)=>`${String(e).padStart(2,"0")}:00`),load:Array.from({length:24},()=>+(Math.random()*2.2+.6).toFixed(2)),pv:Array.from({length:24},(t,e)=>+(Math.max(0,Math.sin((e-6)/4))*2.4).toFixed(2)),price:Array.from({length:24},()=>+(Math.random()*3.2+.8).toFixed(2))},rx="Europe/Stockholm";function vd(t){return new Date(t)}function Qa(t,e=rx){return new Intl.DateTimeFormat("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:e}).format(t)}function _d(t,e=new Date){return Qa(vd(t))===Qa(e)}function eo(t,e=new Date){const s=new Date(e);return s.setDate(s.getDate()+1),Qa(vd(t))===Qa(s)}function jl(t){const e=vd(t);return new Intl.DateTimeFormat("sv-SE",{hour:"2-digit",minute:"2-digit",timeZone:rx}).format(e)}function $S(t,e,s=new Date){return t.filter(i=>e==="today"?_d(i.start_time,s):eo(i.start_time,s))}At.register(HS);const YS={maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!1,labels:{color:"#e6e9ef",boxWidth:10,font:{size:12},filter:()=>!1}},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:"rgba(30, 30, 46, 0.95)",titleColor:"#e6e9ef",bodyColor:"#a6b0bf",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:12,displayColors:!0,caretPadding:8,yAlign:"bottom",callbacks:{title:function(t){return t[0].label},label:function(t){const e=t.dataset.label||"",s=t.parsed.y;if(s==null)return"";let n=s.toFixed(2),i="";if(e.includes("SEK/kWh")){n=s.toFixed(2),i=" SEK/kWh";const a=t.chart.data.pricingConfig;if(a){const o=1+a.vat/100,c=o>0?s/o:s,d=Math.max(0,c-a.fees),u=s-d;return[`${e}: ${n}${i}`,`(Spot: ${d.toFixed(2)} + Tax/Fees: ${u.toFixed(2)})`]}}else e.includes("kW")?(n=s.toFixed(1),i=" kW"):e.includes("kWh")?(n=s.toFixed(2),i=" kWh"):e.includes("%")&&(n=s.toFixed(1),i="%");return`${e}: ${n}${i}`}}},zoom:{pan:{enabled:!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x"}}},scales:{x:{grid:{display:!1},ticks:{color:"#6c7086",font:{family:"monospace",size:10},maxRotation:0,autoSkip:!1,callback:function(t,e,s){const n=this.getLabelForValue(t);if(typeof n!="string")return"";const i=n.split(":");if(i.length<2)return"";const[r,a]=i;return a==="00"?r:""}},border:{display:!1}},y:{position:"right",min:0,max:8,title:{display:!1,text:"SEK/kWh"},grid:{display:!1},border:{display:!1},ticks:{display:!1,color:"#6c7086",font:{family:"monospace",size:10},callback:t=>`${t} SEK`}},y1:{position:"left",min:0,max:9,title:{display:!1,text:"kW"},grid:{display:!1},ticks:{display:!1},border:{display:!1}},y2:{position:"left",min:0,max:9,title:{display:!1,text:"kWh"},grid:{display:!1},ticks:{display:!1},border:{display:!1},display:!1},y3:{position:"right",min:0,max:100,title:{display:!0,text:"%",color:"#a6b0bf"},grid:{display:!1},ticks:{color:"#a6b0bf",font:{family:"monospace",size:10}},border:{display:!1},display:!1},y4:{position:"left",min:0,max:1.5,title:{display:!1,text:"kW (PV)"},grid:{display:!1},ticks:{display:!1},border:{display:!1}}}},Hn=(t,e={},s)=>{const n={accent:"#FFCE59",grid:"#64748B",night:"#06B6D4"},i={labels:t.labels,datasets:[{type:"line",label:"Import Price (SEK/kWh)",data:t.price,borderColor:n.grid,backgroundColor:r=>{const a=r.chart.ctx,c=document.documentElement.classList.contains("dark")?.35:.5,d=a.createLinearGradient(0,0,0,r.chart.height);return d.addColorStop(0,`rgba(100, 116, 139, ${c})`),d.addColorStop(1,"rgba(100, 116, 139, 0)"),d},fill:!0,yAxisID:"y",tension:.4,pointRadius:0,borderWidth:3,order:1},{type:"line",label:"PV Forecast (kW)",data:t.pv,borderColor:n.accent,backgroundColor:r=>{const a=r.chart.ctx,c=document.documentElement.classList.contains("dark")?.5:.65,d=a.createLinearGradient(0,0,0,r.chart.height);return d.addColorStop(0,`rgba(255, 206, 89, ${c})`),d.addColorStop(1,"rgba(255, 206, 89, 0)"),d},fill:!0,yAxisID:"y4",tension:.4,pointRadius:0,borderWidth:3,order:2},{type:"bar",label:"Load (kW)",data:t.load,backgroundColor:"rgba(0, 183, 181, 0.3)",borderWidth:0,borderRadius:2,yAxisID:"y1",barPercentage:.85,categoryPercentage:.9,grouped:!1,order:0},{type:"bar",label:"Charge (kW)",data:t.charge??t.labels.map(()=>null),backgroundColor:"rgba(241, 81, 50, 0.3)",borderWidth:0,borderRadius:2,hidden:!0,yAxisID:"y1",barPercentage:.85,categoryPercentage:.9,grouped:!1,order:0},{type:"bar",label:"Discharge (kW)",data:t.discharge??t.labels.map(()=>null),backgroundColor:"rgba(236, 72, 153, 0.3)",borderWidth:0,borderRadius:2,hidden:!0,yAxisID:"y1",barPercentage:.85,categoryPercentage:.9,grouped:!1,order:0},{type:"bar",label:"Export (kWh)",data:t.export??t.labels.map(()=>null),backgroundColor:"rgba(31, 178, 86, 0.3)",borderWidth:0,borderRadius:2,hidden:!0,yAxisID:"y2",barPercentage:.85,categoryPercentage:.9,grouped:!1,order:0},{type:"bar",label:"Water Heating (kW)",data:t.water??t.labels.map(()=>null),backgroundColor:"rgba(78, 168, 222, 0.3)",borderWidth:0,borderRadius:2,hidden:!0,yAxisID:"y1",barPercentage:.85,categoryPercentage:.9,grouped:!1,order:0},{type:"line",label:"SoC Target (%)",data:t.socTarget??t.labels.map(()=>null),borderColor:n.night,borderDash:[0,6],borderCapStyle:"round",backgroundColor:r=>{const a=r.chart.ctx,c=document.documentElement.classList.contains("dark")?.05:.1,d=a.createLinearGradient(0,0,0,r.chart.height);return d.addColorStop(0,`rgba(6, 182, 212, ${c})`),d.addColorStop(1,"rgba(6, 182, 212, 0)"),d},fill:!0,segment:{borderColor:r=>{const a=t.nowIndex??-1;return a>=0&&r.p1DataIndex<a?"rgba(6, 182, 212, 0.5)":n.night}},yAxisID:"y3",pointRadius:0,borderWidth:3,tension:0,stepped:"after",hidden:!0,order:10},{type:"line",label:"SoC Projected (%)",data:t.socProjected??t.labels.map(()=>null),borderColor:n.night,segment:{borderColor:r=>{const a=t.nowIndex??-1;return a>=0&&r.p1DataIndex<a?"rgba(6, 182, 212, 0.5)":n.night}},yAxisID:"y3",pointRadius:0,borderWidth:3,tension:.3,hidden:!0},{type:"line",label:"SoC Actual (%)",data:t.socActual??t.labels.map(()=>null),borderColor:n.night,borderDash:[0,6],borderCapStyle:"round",yAxisID:"y3",pointRadius:0,borderWidth:3,tension:.3,hidden:!0}]};return t.hasNoData&&(i.plugins={tooltip:{enabled:!0,external:!0,callbacks:{title:()=>t.day==="tomorrow"?"No Price Data":"No Data",label:()=>t.day==="tomorrow"?"Schedule data not available yet. Check back later for prices.":"No schedule data available."}}}),{...i,nowIndex:t.nowIndex??null,nowPct:t.nowPct??null,hasNoData:!!t.hasNoData,pricingConfig:s}},US={id:"nowLine",afterDatasetsDraw(t){const{ctx:e,chartArea:{top:s,bottom:n},scales:{x:i}}=t,r=t.data,a=r.nowPct;if(typeof a!="number"||a<0||a>1)return;const o=r.labels?.length||0;if(o<2)return;const c=a*o,d=Math.floor(c),u=Math.ceil(c),h=c-d,f=i.getPixelForValue(d),m=i.getPixelForValue(u),p=f+(m-f)*h;p<i.left||p>i.right||(e.save(),e.beginPath(),e.strokeStyle="#e879f9",e.lineWidth=1.5,e.shadowColor="#e879f9",e.shadowBlur=10,e.setLineDash([4,4]),e.moveTo(p,s),e.lineTo(p,n),e.stroke(),e.setLineDash([]),e.fillStyle="#e879f9",e.textAlign="center",e.font="bold 10px monospace",e.fillText("NOW",p,s-8),e.restore())}},GS={id:"dotGrid",beforeDraw(t){const{ctx:e,chartArea:s,scales:n}=t;if(!s||!n.x)return;const{left:i,right:r,top:a,bottom:o}=s,c=n.x,d=1,u=30;e.save(),e.fillStyle="rgba(100, 116, 139, 0.25)";const h=t.data.labels?.length||0;if(h<2){e.restore();return}const f=c.getPixelForValue(0),m=c.getPixelForValue(1),p=Math.abs(m-f);let g=1;p<8?g=4:p<15&&(g=2);for(let x=0;x<h;x+=g){const v=c.getPixelForValue(x);if(!(v<i-5||v>r+5))for(let _=a;_<=o;_+=u)e.beginPath(),e.arc(v,_,d,0,Math.PI*2),e.fill()}e.restore()}},qS={id:"glowEffects",beforeDatasetsDraw(t){const{ctx:e}=t;e.save(),e.shadowBlur=0,e.shadowColor="transparent"},afterDatasetDraw(t,e){const{ctx:s}=t;t.data.datasets[e.index].glow&&s.restore()},beforeDatasetDraw(t,e){const{ctx:s}=t,n=t.data.datasets[e.index];n.glow&&(s.save(),s.shadowColor=n.borderColor,s.shadowBlur=8,s.shadowOffsetX=0,s.shadowOffsetY=0)}};function ax({day:t="today",range:e="48h",refreshToken:s=0,slotsOverride:n,useHistoryForToday:i=!1,showDayToggle:r=!1}){const[a,o]=y.useState(!1),c=t||"today",[d,u]=y.useState(e),h=y.useRef(null),f=y.useRef(null),[m,p]=y.useState({}),[g,x]=y.useState({price:!0,pv:!0,load:!0,charge:!1,discharge:!1,export:!1,water:!1,socTarget:!1,socProjected:!1,socActual:!0}),[v,_]=y.useState(!1),[S,N]=y.useState();y.useEffect(()=>{G.config().then(k=>{if(k.pricing){const M=k.pricing,P=M.vat_percent??25,O=(M.grid_transfer_fee_sek??0)+(M.energy_tax_sek??0);N({vat:P,fees:O})}const T=k?.dashboard?.overlay_defaults;if(T&&typeof T=="string"){const M=T.split(",").map(A=>A.trim().toLowerCase()),P=M.includes("socactual")||M.includes("soc_actual"),O={price:!M.includes("price_off"),pv:!M.includes("pv_off"),load:!M.includes("load_off"),charge:M.includes("charge"),discharge:M.includes("discharge"),export:M.includes("export"),water:M.includes("water"),socTarget:M.includes("soctarget")||M.includes("soc_target"),socProjected:M.includes("socprojected")||M.includes("soc_projected"),socActual:P?!0:g.socActual};x(O)}}).catch(k=>console.error("Failed to load overlay defaults:",k))},[g.socActual]),y.useEffect(()=>{G.theme().then(k=>{const T=k.themes.find(M=>M.name===k.current);if(T){const M={};T.palette.forEach((P,O)=>{M[`palette = ${O}`]=P}),M.background=T.background,M.foreground=T.foreground,p(M)}}).catch(k=>console.error("Failed to load theme colors:",k))},[]),y.useEffect(()=>{if(!h.current||Object.keys(m).length===0)return;const k={type:"bar",data:Hn({labels:pa.labels,price:pa.price,pv:pa.pv,load:pa.load},m,S),options:YS,plugins:[GS,US,qS]};return f.current=new At(h.current,k),()=>{f.current&&(f.current.destroy(),f.current=null)}},[m,S]);const j=k=>{if(!k)return!1;const T=k;return!(T._destroyed||T._plugins===void 0&&T.$plugins===void 0)};return y.useEffect(()=>{u(e)},[e]),y.useEffect(()=>{const k=f.current;if(!j(k)||Object.keys(m).length===0)return;const T=P=>{if(!j(f.current))return;const O=KS(P,c,d,m,S);if(!O)return;o(!!O.hasNoData);const A=O.datasets;A[0]&&(A[0].hidden=!g.price),A[1]&&(A[1].hidden=!g.pv),A[2]&&(A[2].hidden=!g.load),A[3]&&(A[3].hidden=!g.charge),A[4]&&(A[4].hidden=!g.discharge),A[5]&&(A[5].hidden=!g.export),A[6]&&(A[6].hidden=!g.water),A[7]&&(A[7].hidden=!g.socTarget),A[8]&&(A[8].hidden=!g.socProjected),A[9]&&(A[9].hidden=!g.socActual);try{if(!j(f.current))return;f.current&&(f.current.data=O,f.current.update())}catch(I){console.error("Chart update error:",I)}};if(n&&n.length){T(n);return}(i&&d==="day"&&c==="today"?G.scheduleTodayWithHistory().then(P=>({schedule:P.slots})):G.schedule()).then(P=>{T(P.schedule??[])}).catch(P=>{console.error("Failed to load schedule:",P),o(!0)})},[c,g,m,d,s,n,i,S]),l.jsxs(re,{className:"p-4 md:p-6 h-[380px]",children:[l.jsxs("div",{className:"flex items-baseline justify-between pb-2",children:[l.jsx("div",{className:"text-sm text-muted",children:"Schedule Overview"}),r&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{className:`rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition ${d==="day"?"bg-accent text-canvas":"bg-surface border border-line/60 text-muted"}`,onClick:()=>u("day"),children:"24h"}),l.jsx("button",{className:`rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition ${d==="48h"?"bg-accent text-canvas":"bg-surface border border-line/60 text-muted"}`,onClick:()=>u("48h"),children:"48h"})]}),l.jsx("button",{className:"rounded-pill px-3 py-1 text-[11px] font-semibold uppercase tracking-wide border border-line/60 text-muted hover:border-accent hover:text-accent transition",onClick:()=>_(k=>!k),children:"Overlays"})]})]}),v&&l.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px]",children:[["Price","price"],["PV","pv"],["Load","load"],["Charge","charge"],["Discharge","discharge"],["Export","export"],["Water","water"],["SoC Target","socTarget"],["SoC Projected","socProjected"],["SoC Actual","socActual"]].map(([k,T])=>l.jsx("button",{onClick:M=>{M.preventDefault(),x(P=>({...P,[T]:!P[T]}))},className:`rounded-pill px-3 py-1 border ${g[T]?"bg-accent text-canvas border-accent":"border-line/60 text-muted hover:border-accent"}`,children:k},T))}),l.jsxs("div",{className:"h-[310px] relative mt-1",children:[a&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-surface/90 rounded-lg",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-semibold text-accent mb-2",children:"No Price Data"}),l.jsx("div",{className:"text-sm text-muted",children:"Schedule data not available yet. Check back later for prices."})]})}),l.jsx("canvas",{ref:h,style:{display:a?"none":"block"}})]})]})}function KS(t,e,s,n={},i){const r=s==="day"?$S(t,e):t.filter(S=>_d(S.start_time)||eo(S.start_time));if(s==="day"){if(!r.length){const he=Array.from({length:24},(R,W)=>`${String(W).padStart(2,"0")}:00`),D=Array(24).fill(null);return Hn({labels:he,price:D.slice(),pv:D.slice(),load:D.slice(),charge:D.slice(),discharge:D.slice(),export:D.slice(),water:D.slice(),socTarget:D.slice(),socProjected:D.slice(),socActual:D.slice(),hasNoData:!0,day:e},n)}const S=[...r].sort((he,D)=>{const R=new Date(he.start_time).getTime(),W=new Date(D.start_time).getTime();return R-W});let N=15;if(S.length>=2){const he=new Date(S[0].start_time).getTime(),D=new Date(S[1].start_time).getTime(),R=Math.max(1,Math.round((D-he)/6e4));(R===15||R===30||R===60)&&(N=R)}const j=new Date;e==="today"||j.setDate(j.getDate()+1),j.setHours(0,0,0,0);const k=N*60*1e3,T=Math.round(1440/N),M=new Map;for(const he of S){const D=new Date(he.start_time).getTime();M.set(D,he)}const P=[],O=[],A=[],I=[],X=[],U=[],K=[],J=[],q=[],de=[],B=[];let ae=null;const Ne=new Date;for(let he=0;he<T;he++){const D=new Date(j.getTime()+he*k),R=new Date(D.getTime()+k),W=M.get(D.getTime());if(P.push(jl(D.toISOString())),W){const oe=W.is_executed===!0;O.push(W.import_price_sek_kwh??null),A.push(oe&&W.actual_pv_kwh!=null?W.actual_pv_kwh:W.pv_forecast_kwh??null),I.push(oe&&W.actual_load_kwh!=null?W.actual_load_kwh:W.load_forecast_kwh??null),X.push(oe&&W.actual_charge_kw!=null?W.actual_charge_kw:W.battery_charge_kw??W.charge_kw??null),U.push(W.battery_discharge_kw??W.discharge_kw??null),K.push(oe&&W.actual_export_kw!=null?W.actual_export_kw:W.export_kwh??null),J.push(W.water_heating_kw??null),q.push(W.soc_target_percent??null),de.push(W.projected_soc_percent??null),B.push(W.soc_actual_percent!=null?W.soc_actual_percent:null)}else O.push(null),A.push(null),I.push(null),X.push(null),U.push(null),K.push(null),J.push(null),q.push(null),de.push(null),B.push(null);e==="today"&&Ne>=D&&Ne<R&&(ae=he)}let Te=null;if(e==="today"){const he=T*k,D=Ne.getTime()-j.getTime();D>=0&&D<=he&&(Te=D/he)}return Hn({labels:P,price:O,pv:A,load:I,charge:X,discharge:U,export:K,water:J,socTarget:q,socProjected:de,socActual:B,nowIndex:ae,nowPct:Te},n)}if(s==="48h"){if(!r.length){console.log("[buildLiveData] No slots found for 48h range, creating fallback");const R=Array.from({length:48},(W,oe)=>{const le=oe%24;return`${String(le).padStart(2,"0")}:00`});return Hn({labels:R,price:Array(R.length).fill(null),pv:Array(R.length).fill(null),load:Array(R.length).fill(null),charge:Array(R.length).fill(null),discharge:Array(R.length).fill(null),export:Array(R.length).fill(null),water:Array(R.length).fill(null),socTarget:Array(R.length).fill(null),socProjected:Array(R.length).fill(null),hasNoData:!0,day:e},n)}const S=[...r].sort((R,W)=>{const oe=new Date(R.start_time).getTime(),le=new Date(W.start_time).getTime();return oe-le});let N=15;if(S.length>=2){const R=new Date(S[0].start_time).getTime(),W=new Date(S[1].start_time).getTime(),oe=Math.max(1,Math.round((W-R)/6e4));(oe===15||oe===30||oe===60)&&(N=oe)}const j=new Date;j.setHours(0,0,0,0);const k=N*60*1e3,T=Math.round(2880/N),M=new Map;for(const R of S){const W=new Date(R.start_time).getTime();M.set(W,R)}const P=[],O=[],A=[],I=[],X=[],U=[],K=[],J=[],q=[],de=[],B=[];let ae=null;const Ne=new Date;for(let R=0;R<T;R++){const W=new Date(j.getTime()+R*k),oe=new Date(W.getTime()+k),le=M.get(W.getTime());if(P.push(jl(W.toISOString())),le){const _e=le.is_executed===!0;O.push(le.import_price_sek_kwh??null),A.push(_e&&le.actual_pv_kwh!=null?le.actual_pv_kwh:le.pv_forecast_kwh??null),I.push(_e&&le.actual_load_kwh!=null?le.actual_load_kwh:le.load_forecast_kwh??null),X.push(_e&&le.actual_charge_kw!=null?le.actual_charge_kw:le.battery_charge_kw??le.charge_kw??null),U.push(le.battery_discharge_kw??le.discharge_kw??null),K.push(_e&&le.actual_export_kw!=null?le.actual_export_kw:le.export_kwh??null),J.push(le.water_heating_kw??null),q.push(le.soc_target_percent??null),de.push(le.projected_soc_percent??null),B.push(le.soc_actual_percent!=null?le.soc_actual_percent:null)}else O.push(null),A.push(null),I.push(null),X.push(null),U.push(null),K.push(null),J.push(null),q.push(null),de.push(null),B.push(null);Ne>=W&&Ne<oe&&(ae=R)}let Te=null;const he=T*k,D=Ne.getTime()-j.getTime();return D>=0&&D<=he&&(Te=D/he),Hn({labels:P,price:O,pv:A,load:I,charge:X,discharge:U,export:K,water:J,socTarget:q,socProjected:de,socActual:B,nowIndex:ae,nowPct:Te},n,i)}const a=[...r].sort((S,N)=>{const j=new Date(S.start_time).getTime(),k=new Date(N.start_time).getTime();return j-k}),o=a.map(S=>S.import_price_sek_kwh??null),c=a.map(S=>S.pv_forecast_kwh??null),d=a.map(S=>S.load_forecast_kwh??null),u=a.map(S=>S.battery_charge_kw??S.charge_kw??null),h=a.map(S=>S.battery_discharge_kw??S.discharge_kw??null),f=a.map(S=>S.export_kwh??null),m=a.map(S=>S.water_heating_kw??null),p=a.map(S=>S.soc_target_percent??null),g=a.map(S=>S.projected_soc_percent??null),x=a.map(S=>S.soc_actual_percent??null),v=a.map(S=>jl(S.start_time));let _=null;if(e==="today"){const S=new Date;for(let N=0;N<a.length;N++){const j=new Date(a[N].start_time||""),k=new Date(j.getTime()+1800*1e3);if(S>=j&&S<k){_=N;break}}}return Hn({labels:v,price:o,pv:c,load:d,charge:u,discharge:h,export:f,water:m,socTarget:p,socProjected:g,socActual:x,nowIndex:_},n)}const ga=[3,7,14,21,28],Ri=[30,60,120];function XS({onDataRefresh:t,onPlanSourceChange:e,onVacationModeChange:s}){const[n,i]=y.useState("idle"),[r,a]=y.useState(!1),[o,c]=y.useState(null),[d,u]=y.useState(1),[h,f]=y.useState(!1),[m,p]=y.useState(null),[g,x]=y.useState(1),[v,_]=y.useState(!1),[S,N]=y.useState(null),[j,k]=y.useState(0),[T,M]=y.useState(null),[P,O]=y.useState(null),A=y.useRef(null),I=y.useCallback(async()=>{try{const[B,ae,Ne]=await Promise.all([G.executor.status(),G.waterBoost.status(),G.config()]);if(B.paused?(a(!0),c(B.paused.paused_minutes||null)):(a(!1),c(null)),ae.water_boost){const he=new Date(ae.water_boost.expires_at);_(!0),N(he);const D=new Date,R=Math.max(0,Math.floor((he.getTime()-D.getTime())/1e3));k(R)}else _(!1),N(null),k(0);const Te=Ne.water_heating?.vacation_mode;Te?.enabled?(f(!0),p(Te.end_date||null)):(f(!1),p(null))}catch(B){console.error("Failed to fetch quick action status:",B)}},[]);y.useEffect(()=>{I();const B=setInterval(I,6e4);return()=>clearInterval(B)},[I]),y.useEffect(()=>{if(A.current&&(clearInterval(A.current),A.current=null),!(!v||!S))return A.current=setInterval(()=>{const B=new Date,ae=Math.floor((S.getTime()-B.getTime())/1e3);ae<=0?(_(!1),N(null),k(0),A.current&&(clearInterval(A.current),A.current=null)):k(ae)},1e3),()=>{A.current&&(clearInterval(A.current),A.current=null)}},[v,S]);const X=async()=>{i("planning"),M(null);try{await G.runPlanner(),i("executing"),await G.executor.run(),i("done"),e&&e("local"),t&&setTimeout(t,500),setTimeout(()=>i("idle"),2e3)}catch(B){M({type:"error",message:B instanceof Error?B.message:"Failed"}),i("idle")}},U=async()=>{M(null),O("pause");try{r?(await G.executor.resume(),a(!1),c(null),M({type:"success",message:"Executor resumed"})):(await G.executor.pause(),a(!0),M({type:"success",message:"Executor paused - idle mode"})),setTimeout(()=>M(null),3e3)}catch(B){M({type:"error",message:B instanceof Error?B.message:"Failed"})}finally{O(null)}},K=async()=>{M(null),O("vacation");try{if(h)await G.configSave({water_heating:{vacation_mode:{enabled:!1,end_date:null}}}),f(!1),p(null),M({type:"success",message:"Vacation mode disabled"});else{const B=ga[d],ae=new Date;ae.setDate(ae.getDate()+B);const Ne=ae.toISOString().split("T")[0];await G.configSave({water_heating:{vacation_mode:{enabled:!0,end_date:Ne}}}),f(!0),p(Ne),M({type:"success",message:`Vacation mode active until ${Ne}`})}window.dispatchEvent(new Event("config-updated")),s?.(!h),setTimeout(()=>M(null),3e3)}catch(B){M({type:"error",message:B instanceof Error?B.message:"Failed"})}finally{O(null)}},J=async()=>{M(null),O("boost");try{if(v)(await G.waterBoost.cancel()).success&&(_(!1),N(null),k(0),M({type:"success",message:"Water boost cancelled"}));else{const B=Ri[g],ae=await G.waterBoost.start(B);if(ae.success&&ae.expires_at){const Ne=new Date(ae.expires_at);_(!0),N(Ne),k(B*60),M({type:"success",message:`Water boost started (${B}min)`})}}setTimeout(()=>M(null),3e3)}catch(B){M({type:"error",message:B instanceof Error?B.message:"Failed"})}finally{O(null)}},q=()=>{switch(n){case"planning":return"Planning...";case"executing":return"Executing...";case"done":return"Done ";default:return"Run Planner"}},de=B=>{const ae=Math.floor(B/60),Ne=B%60;return`${ae}:${Ne.toString().padStart(2,"0")}`};return l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{className:`relative overflow-hidden flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary
                        ${n!=="idle"?"bg-surface border border-accent/50 text-accent cursor-wait":"bg-accent hover:bg-accent2 text-[#100f0e]"}`,onClick:X,disabled:n!=="idle",title:"Run planner and execute",children:[l.jsx("div",{className:`absolute left-0 top-0 bottom-0 transition-all duration-[2000ms] ease-out pointer-events-none ${n==="idle"?"bg-transparent":"bg-accent/50"}`,style:{width:n==="idle"?"0%":n==="done"?"100%":"90%"}}),l.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[n==="planning"||n==="executing"?l.jsx(Pv,{className:"h-4 w-4 animate-spin"}):l.jsx(Fv,{className:"h-4 w-4"}),l.jsx("span",{children:q()})]})]}),l.jsx("button",{className:`flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition
                        ${r?"bg-bad/80 text-white ring-2 ring-bad shadow-[0_0_20px_rgba(241,81,50,0.5)] animate-pulse":"bg-good hover:bg-good/80 text-white btn-glow-green"} ${P==="pause"?"opacity-60 cursor-wait":""}`,onClick:U,disabled:P==="pause",title:r?"Resume executor":"Pause executor (idle mode)",children:r?l.jsxs(l.Fragment,{children:[l.jsx(Vp,{className:"h-4 w-4"}),l.jsx("span",{children:"RESUME"}),o!==null&&l.jsxs("span",{className:"text-[9px] opacity-80",children:["(",Math.round(o),"m)"]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ov,{className:"h-4 w-4"}),l.jsx("span",{children:"Pause"})]})}),l.jsxs("div",{className:`flex items-center rounded-xl px-2 py-1.5 text-[11px] font-semibold transition
                    ${h?"bg-amber-500/30 border border-amber-500/50 ring-2 ring-amber-400/50 shadow-[0_0_15px_rgba(245,158,11,0.4)]":"bg-surface2 border border-line/50"} ${P==="vacation"?"opacity-60":""}`,children:[!h&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>u(B=>Math.max(0,B-1)),className:"px-0.5 hover:text-accent",disabled:d===0||P==="vacation",children:l.jsx(Ju,{className:"h-3 w-3"})}),l.jsxs("span",{className:"mx-0.5 min-w-[24px] text-center text-muted",children:[ga[d],"d"]}),l.jsx("button",{onClick:()=>u(B=>Math.min(ga.length-1,B+1)),className:"px-0.5 hover:text-accent",disabled:d===ga.length-1||P==="vacation",children:l.jsx(Qu,{className:"h-3 w-3"})})]}),l.jsxs("button",{onClick:K,disabled:P==="vacation",className:`flex-1 flex items-center justify-center gap-1 py-1 px-2 rounded-lg transition
                            ${h?"bg-amber-500/50 text-amber-100":"bg-amber-500/20 hover:bg-amber-500/30 text-amber-300/80 hover:text-amber-300"}`,children:[l.jsx(Wv,{className:"h-3.5 w-3.5"}),h?l.jsx("span",{className:"truncate",children:m?` ${m.slice(5)}`:"ON"}):l.jsx("span",{children:"Vacation"})]})]}),l.jsxs("div",{className:`flex items-center rounded-xl px-2 py-1.5 text-[11px] font-semibold transition
                    ${v?"bg-red-500/30 border border-red-500/50 ring-2 ring-red-400/50 shadow-[0_0_15px_rgba(239,68,68,0.4)]":"bg-surface2 border border-line/50"} ${P==="boost"?"opacity-60":""}`,children:[!v&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>x(B=>Math.max(0,B-1)),className:"px-0.5 hover:text-accent",disabled:g===0||P==="boost",children:l.jsx(Ju,{className:"h-3 w-3"})}),l.jsx("span",{className:"mx-0.5 min-w-[24px] text-center text-muted",children:Ri[g]===120?"2h":Ri[g]===60?"1h":"30m"}),l.jsx("button",{onClick:()=>x(B=>Math.min(Ri.length-1,B+1)),className:"px-0.5 hover:text-accent",disabled:g===Ri.length-1||P==="boost",children:l.jsx(Qu,{className:"h-3 w-3"})})]}),l.jsxs("button",{onClick:J,disabled:P==="boost",className:`flex-1 flex items-center justify-center gap-1 py-1 px-2 rounded-lg transition
                            ${v?"bg-red-500/50 text-red-100":"bg-red-500/20 hover:bg-red-500/30 text-red-300/80 hover:text-red-300"}`,children:[l.jsx(Fp,{className:`h-3.5 w-3.5 ${v?"animate-pulse":""}`}),v?l.jsx("span",{className:"font-mono",children:de(j)}):l.jsx("span",{children:"Boost"})]})]})]}),T&&l.jsx("div",{className:`absolute -bottom-8 left-0 right-0 text-center text-[10px] py-1 px-2 rounded-md transition-opacity animate-in fade-in slide-in-from-bottom-1 duration-300 ${T.type==="success"?"text-green-400":"text-red-400"}`,children:T.message})]})}const wd=y.createContext({});function kd(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Co=y.createContext(null),Sd=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class ZS extends y.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function JS({children:t,isPresent:e}){const s=y.useId(),n=y.useRef(null),i=y.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=y.useContext(Sd);return y.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:d}=i.current;if(e||!n.current||!a||!o)return;n.current.dataset.motionPopId=s;const u=document.createElement("style");return r&&(u.nonce=r),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),l.jsx(ZS,{isPresent:e,childRef:n,sizeRef:i,children:y.cloneElement(t,{ref:n})})}const QS=({children:t,initial:e,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:r,mode:a})=>{const o=kd(ej),c=y.useId(),d=y.useCallback(h=>{o.set(h,!0);for(const f of o.values())if(!f)return;n&&n()},[o,n]),u=y.useMemo(()=>({id:c,initial:e,isPresent:s,custom:i,onExitComplete:d,register:h=>(o.set(h,!1),()=>o.delete(h))}),r?[Math.random(),d]:[s,d]);return y.useMemo(()=>{o.forEach((h,f)=>o.set(f,!1))},[s]),y.useEffect(()=>{!s&&!o.size&&n&&n()},[s]),a==="popLayout"&&(t=l.jsx(JS,{isPresent:s,children:t})),l.jsx(Co.Provider,{value:u,children:t})};function ej(){return new Map}function ox(t=!0){const e=y.useContext(Co);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:i}=e,r=y.useId();y.useEffect(()=>{t&&i(r)},[t]);const a=y.useCallback(()=>t&&n&&n(r),[r,n,t]);return!s&&n?[!1,a]:[!0]}const xa=t=>t.key||"";function zf(t){const e=[];return y.Children.forEach(t,s=>{y.isValidElement(s)&&e.push(s)}),e}const jd=typeof window<"u",lx=jd?y.useLayoutEffect:y.useEffect,tj=({children:t,custom:e,initial:s=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:r="sync",propagate:a=!1})=>{const[o,c]=ox(a),d=y.useMemo(()=>zf(t),[t]),u=a&&!o?[]:d.map(xa),h=y.useRef(!0),f=y.useRef(d),m=kd(()=>new Map),[p,g]=y.useState(d),[x,v]=y.useState(d);lx(()=>{h.current=!1,f.current=d;for(let N=0;N<x.length;N++){const j=xa(x[N]);u.includes(j)?m.delete(j):m.get(j)!==!0&&m.set(j,!1)}},[x,u.length,u.join("-")]);const _=[];if(d!==p){let N=[...d];for(let j=0;j<x.length;j++){const k=x[j],T=xa(k);u.includes(T)||(N.splice(j,0,k),_.push(k))}r==="wait"&&_.length&&(N=_),v(zf(N)),g(d);return}const{forceRender:S}=y.useContext(wd);return l.jsx(l.Fragment,{children:x.map(N=>{const j=xa(N),k=a&&!o?!1:d===x||u.includes(j),T=()=>{if(m.has(j))m.set(j,!0);else return;let M=!0;m.forEach(P=>{P||(M=!1)}),M&&(S?.(),v(f.current),a&&c?.(),n&&n())};return l.jsx(QS,{isPresent:k,initial:!h.current||s?void 0:!1,custom:k?void 0:e,presenceAffectsLayout:i,mode:r,onExitComplete:k?void 0:T,children:N},j)})})},vt=t=>t;let cx=vt;function Nd(t){let e;return()=>(e===void 0&&(e=t()),e)}const oi=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n},ks=t=>t*1e3,Ss=t=>t/1e3,sj={useManualTiming:!1};function nj(t){let e=new Set,s=new Set,n=!1,i=!1;const r=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(d){r.has(d)&&(c.schedule(d),t()),d(a)}const c={schedule:(d,u=!1,h=!1)=>{const m=h&&n?e:s;return u&&r.add(d),m.has(d)||m.add(d),d},cancel:d=>{s.delete(d),r.delete(d)},process:d=>{if(a=d,n){i=!0;return}n=!0,[e,s]=[s,e],e.forEach(o),e.clear(),n=!1,i&&(i=!1,c.process(d))}};return c}const ya=["read","resolveKeyframes","update","preRender","render","postRender"],ij=40;function dx(t,e){let s=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>s=!0,a=ya.reduce((v,_)=>(v[_]=nj(r),v),{}),{read:o,resolveKeyframes:c,update:d,preRender:u,render:h,postRender:f}=a,m=()=>{const v=performance.now();s=!1,i.delta=n?1e3/60:Math.max(Math.min(v-i.timestamp,ij),1),i.timestamp=v,i.isProcessing=!0,o.process(i),c.process(i),d.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,s&&e&&(n=!1,t(m))},p=()=>{s=!0,n=!0,i.isProcessing||t(m)};return{schedule:ya.reduce((v,_)=>{const S=a[_];return v[_]=(N,j=!1,k=!1)=>(s||p(),S.schedule(N,j,k)),v},{}),cancel:v=>{for(let _=0;_<ya.length;_++)a[ya[_]].cancel(v)},state:i,steps:a}}const{schedule:Pe,cancel:Zs,state:nt,steps:Nl}=dx(typeof requestAnimationFrame<"u"?requestAnimationFrame:vt,!0),ux=y.createContext({strict:!1}),Hf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},li={};for(const t in Hf)li[t]={isEnabled:e=>Hf[t].some(s=>!!e[s])};function rj(t){for(const e in t)li[e]={...li[e],...t[e]}}const aj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function to(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||aj.has(t)}let hx=t=>!to(t);function oj(t){t&&(hx=e=>e.startsWith("on")?!to(e):t(e))}try{oj(require("@emotion/is-prop-valid").default)}catch{}function lj(t,e,s){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(hx(i)||s===!0&&to(i)||!e&&!to(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function cj(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...n)=>t(...n);return new Proxy(s,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Po=y.createContext({});function _r(t){return typeof t=="string"||Array.isArray(t)}function Do(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Md=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Td=["initial",...Md];function Eo(t){return Do(t.animate)||Td.some(e=>_r(t[e]))}function fx(t){return!!(Eo(t)||t.variants)}function dj(t,e){if(Eo(t)){const{initial:s,animate:n}=t;return{initial:s===!1||_r(s)?s:void 0,animate:_r(n)?n:void 0}}return t.inherit!==!1?e:{}}function uj(t){const{initial:e,animate:s}=dj(t,y.useContext(Po));return y.useMemo(()=>({initial:e,animate:s}),[$f(e),$f(s)])}function $f(t){return Array.isArray(t)?t.join(" "):t}const hj=Symbol.for("motionComponentSymbol");function Yn(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fj(t,e,s){return y.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):Yn(s)&&(s.current=n))},[e])}const Cd=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mj="framerAppearId",mx="data-"+Cd(mj),{schedule:Pd}=dx(queueMicrotask,!1),px=y.createContext({});function pj(t,e,s,n,i){var r,a;const{visualElement:o}=y.useContext(Po),c=y.useContext(ux),d=y.useContext(Co),u=y.useContext(Sd).reducedMotion,h=y.useRef(null);n=n||c.renderer,!h.current&&n&&(h.current=n(t,{visualState:e,parent:o,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,m=y.useContext(px);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&gj(h.current,s,i,m);const p=y.useRef(!1);y.useInsertionEffect(()=>{f&&p.current&&f.update(s,d)});const g=s[mx],x=y.useRef(!!g&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,g))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,g)));return lx(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Pd.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),y.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),x.current=!1))}),f}function gj(t,e,s,n){const{layoutId:i,layout:r,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:d}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:gx(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!a||o&&Yn(o),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function gx(t){if(t)return t.options.allowProjection!==!1?t.projection:gx(t.parent)}function xj({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:n,Component:i}){var r,a;t&&rj(t);function o(d,u){let h;const f={...y.useContext(Sd),...d,layoutId:yj(d)},{isStatic:m}=f,p=uj(d),g=n(d,m);if(!m&&jd){bj();const x=vj(f);h=x.MeasureLayout,p.visualElement=pj(i,g,f,e,x.ProjectionNode)}return l.jsxs(Po.Provider,{value:p,children:[h&&p.visualElement?l.jsx(h,{visualElement:p.visualElement,...f}):null,s(i,d,fj(g,p.visualElement,u),g,m,p.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(r=i.displayName)!==null&&r!==void 0?r:i.name)!==null&&a!==void 0?a:""})`}`;const c=y.forwardRef(o);return c[hj]=i,c}function yj({layoutId:t}){const e=y.useContext(wd).id;return e&&t!==void 0?e+"-"+t:t}function bj(t,e){y.useContext(ux).strict}function vj(t){const{drag:e,layout:s}=li;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e?.isEnabled(t)||s?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const _j=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dd(t){return typeof t!="string"||t.includes("-")?!1:!!(_j.indexOf(t)>-1||/[A-Z]/u.test(t))}function Yf(t){const e=[{},{}];return t?.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function Ed(t,e,s,n){if(typeof e=="function"){const[i,r]=Yf(n);e=e(s!==void 0?s:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=Yf(n);e=e(s!==void 0?s:t.custom,i,r)}return e}const bc=t=>Array.isArray(t),wj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),kj=t=>bc(t)?t[t.length-1]||0:t,ct=t=>!!(t&&t.getVelocity);function Ca(t){const e=ct(t)?t.get():t;return wj(e)?e.toValue():e}function Sj({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},n,i,r){const a={latestValues:jj(n,i,r,t),renderState:e()};return s&&(a.onMount=o=>s({props:n,current:o,...a}),a.onUpdate=o=>s(o)),a}const xx=t=>(e,s)=>{const n=y.useContext(Po),i=y.useContext(Co),r=()=>Sj(t,e,n,i);return s?r():kd(r)};function jj(t,e,s,n){const i={},r=n(t,{});for(const f in r)i[f]=Ca(r[f]);let{initial:a,animate:o}=t;const c=Eo(t),d=fx(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=s?s.initial===!1:!1;u=u||a===!1;const h=u?o:a;if(h&&typeof h!="boolean"&&!Do(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const p=Ed(t,f[m]);if(p){const{transitionEnd:g,transition:x,...v}=p;for(const _ in v){let S=v[_];if(Array.isArray(S)){const N=u?S.length-1:0;S=S[N]}S!==null&&(i[_]=S)}for(const _ in g)i[_]=g[_]}}}return i}const gi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],En=new Set(gi),yx=t=>e=>typeof e=="string"&&e.startsWith(t),bx=yx("--"),Nj=yx("var(--"),Ad=t=>Nj(t)?Mj.test(t.split("/*")[0].trim()):!1,Mj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,vx=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ms=(t,e,s)=>s>e?e:s<t?t:s,xi={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wr={...xi,transform:t=>Ms(0,1,t)},ba={...xi,default:1},Lr=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ls=Lr("deg"),ss=Lr("%"),se=Lr("px"),Tj=Lr("vh"),Cj=Lr("vw"),Uf={...ss,parse:t=>ss.parse(t)/100,transform:t=>ss.transform(t*100)},Pj={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,backgroundPositionX:se,backgroundPositionY:se},Dj={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:ba,scaleX:ba,scaleY:ba,scaleZ:ba,skew:Ls,skewX:Ls,skewY:Ls,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:wr,originX:Uf,originY:Uf,originZ:se},Gf={...xi,transform:Math.round},Od={...Pj,...Dj,zIndex:Gf,size:se,fillOpacity:wr,strokeOpacity:wr,numOctaves:Gf},Ej={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Aj=gi.length;function Oj(t,e,s){let n="",i=!0;for(let r=0;r<Aj;r++){const a=gi[r],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||s){const d=vx(o,Od[a]);if(!c){i=!1;const u=Ej[a]||a;n+=`${u}(${d}) `}s&&(e[a]=d)}}return n=n.trim(),s?n=s(e,i?"":n):i&&(n="none"),n}function Rd(t,e,s){const{style:n,vars:i,transformOrigin:r}=t;let a=!1,o=!1;for(const c in e){const d=e[c];if(En.has(c)){a=!0;continue}else if(bx(c)){i[c]=d;continue}else{const u=vx(d,Od[c]);c.startsWith("origin")?(o=!0,r[c]=u):n[c]=u}}if(e.transform||(a||s?n.transform=Oj(e,t.transform,s):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:d="50%",originZ:u=0}=r;n.transformOrigin=`${c} ${d} ${u}`}}const Rj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Lj={offset:"strokeDashoffset",array:"strokeDasharray"};function Fj(t,e,s=1,n=0,i=!0){t.pathLength=1;const r=i?Rj:Lj;t[r.offset]=se.transform(-n);const a=se.transform(e),o=se.transform(s);t[r.array]=`${a} ${o}`}function qf(t,e,s){return typeof t=="string"?t:se.transform(e+s*t)}function Ij(t,e,s){const n=qf(e,t.x,t.width),i=qf(s,t.y,t.height);return`${n} ${i}`}function Ld(t,{attrX:e,attrY:s,attrScale:n,originX:i,originY:r,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...d},u,h){if(Rd(t,d,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:p}=t;f.transform&&(p&&(m.transform=f.transform),delete f.transform),p&&(i!==void 0||r!==void 0||m.transform)&&(m.transformOrigin=Ij(p,i!==void 0?i:.5,r!==void 0?r:.5)),e!==void 0&&(f.x=e),s!==void 0&&(f.y=s),n!==void 0&&(f.scale=n),a!==void 0&&Fj(f,a,o,c,!1)}const Fd=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),_x=()=>({...Fd(),attrs:{}}),Id=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wx(t,{style:e,vars:s},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const r in s)t.style.setProperty(r,s[r])}const kx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Sx(t,e,s,n){wx(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(kx.has(i)?i:Cd(i),e.attrs[i])}const so={};function Vj(t){Object.assign(so,t)}function jx(t,{layout:e,layoutId:s}){return En.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!so[t]||t==="opacity")}function Vd(t,e,s){var n;const{style:i}=t,r={};for(const a in i)(ct(i[a])||e.style&&ct(e.style[a])||jx(a,t)||((n=s?.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(r[a]=i[a]);return r}function Nx(t,e,s){const n=Vd(t,e,s);for(const i in t)if(ct(t[i])||ct(e[i])){const r=gi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function Wj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Kf=["x","y","width","height","cx","cy","r"],Bj={useVisualState:xx({scrapeMotionValuesFromProps:Nx,createRenderState:_x,onUpdate:({props:t,prevProps:e,current:s,renderState:n,latestValues:i})=>{if(!s)return;let r=!!t.drag;if(!r){for(const o in i)if(En.has(o)){r=!0;break}}if(!r)return;let a=!e;if(e)for(let o=0;o<Kf.length;o++){const c=Kf[o];t[c]!==e[c]&&(a=!0)}a&&Pe.read(()=>{Wj(s,n),Pe.render(()=>{Ld(n,i,Id(s.tagName),t.transformTemplate),Sx(s,n)})})}})},zj={useVisualState:xx({scrapeMotionValuesFromProps:Vd,createRenderState:Fd})};function Mx(t,e,s){for(const n in e)!ct(e[n])&&!jx(n,s)&&(t[n]=e[n])}function Hj({transformTemplate:t},e){return y.useMemo(()=>{const s=Fd();return Rd(s,e,t),Object.assign({},s.vars,s.style)},[e])}function $j(t,e){const s=t.style||{},n={};return Mx(n,s,t),Object.assign(n,Hj(t,e)),n}function Yj(t,e){const s={},n=$j(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}function Uj(t,e,s,n){const i=y.useMemo(()=>{const r=_x();return Ld(r,e,Id(n),t.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};Mx(r,t.style,t),i.style={...r,...i.style}}return i}function Gj(t=!1){return(s,n,i,{latestValues:r},a)=>{const c=(Dd(s)?Uj:Yj)(n,r,a,s),d=lj(n,typeof s=="string",t),u=s!==y.Fragment?{...d,...c,ref:i}:{},{children:h}=n,f=y.useMemo(()=>ct(h)?h.get():h,[h]);return y.createElement(s,{...u,children:f})}}function qj(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...Dd(n)?Bj:zj,preloadedFeatures:t,useRender:Gj(i),createVisualElement:e,Component:n};return xj(a)}}function Tx(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}function Ao(t,e,s){const n=t.getProps();return Ed(n,e,s!==void 0?s:n.custom,t)}const Kj=Nd(()=>window.ScrollTimeline!==void 0);class Xj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=s}attachTimeline(e,s){const n=this.animations.map(i=>{if(Kj()&&i.attachTimeline)return i.attachTimeline(e);if(typeof s=="function")return s(i)});return()=>{n.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Zj extends Xj{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function Wd(t,e){return t?t[e]||t.default||t:void 0}const vc=2e4;function Cx(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<vc;)e+=s,n=t.next(e);return e>=vc?1/0:e}function Bd(t){return typeof t=="function"}function Xf(t,e){t.timeline=e,t.onfinish=null}const zd=t=>Array.isArray(t)&&typeof t[0]=="number",Jj={linearEasing:void 0};function Qj(t,e){const s=Nd(t);return()=>{var n;return(n=Jj[e])!==null&&n!==void 0?n:s()}}const no=Qj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Px=(t,e,s=10)=>{let n="";const i=Math.max(Math.round(e/s),2);for(let r=0;r<i;r++)n+=t(oi(0,i-1,r))+", ";return`linear(${n.substring(0,n.length-2)})`};function Dx(t){return!!(typeof t=="function"&&no()||!t||typeof t=="string"&&(t in _c||no())||zd(t)||Array.isArray(t)&&t.every(Dx))}const Ki=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,_c={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ki([0,.65,.55,1]),circOut:Ki([.55,0,1,.45]),backIn:Ki([.31,.01,.66,-.59]),backOut:Ki([.33,1.53,.69,.99])};function Ex(t,e){if(t)return typeof t=="function"&&no()?Px(t,e):zd(t)?Ki(t):Array.isArray(t)?t.map(s=>Ex(s,e)||_c.easeOut):_c[t]}const Vt={x:!1,y:!1};function Ax(){return Vt.x||Vt.y}function eN(t,e,s){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const r=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}function Ox(t,e){const s=eN(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[s,i,()=>n.abort()]}function Zf(t){return e=>{e.pointerType==="touch"||Ax()||t(e)}}function tN(t,e,s={}){const[n,i,r]=Ox(t,s),a=Zf(o=>{const{target:c}=o,d=e(o);if(typeof d!="function"||!c)return;const u=Zf(h=>{d(h),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,i)});return n.forEach(o=>{o.addEventListener("pointerenter",a,i)}),r}const Rx=(t,e)=>e?t===e?!0:Rx(t,e.parentElement):!1,Hd=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,sN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nN(t){return sN.has(t.tagName)||t.tabIndex!==-1}const Xi=new WeakSet;function Jf(t){return e=>{e.key==="Enter"&&t(e)}}function Ml(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iN=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=Jf(()=>{if(Xi.has(s))return;Ml(s,"down");const i=Jf(()=>{Ml(s,"up")}),r=()=>Ml(s,"cancel");s.addEventListener("keyup",i,e),s.addEventListener("blur",r,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function Qf(t){return Hd(t)&&!Ax()}function rN(t,e,s={}){const[n,i,r]=Ox(t,s),a=o=>{const c=o.currentTarget;if(!Qf(o)||Xi.has(c))return;Xi.add(c);const d=e(o),u=(m,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!Qf(m)||!Xi.has(c))&&(Xi.delete(c),typeof d=="function"&&d(m,{success:p}))},h=m=>{u(m,s.useGlobalTarget||Rx(c,m.target))},f=m=>{u(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return n.forEach(o=>{!nN(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(s.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",d=>iN(d,i),i)}),r}function aN(t){return t==="x"||t==="y"?Vt[t]?null:(Vt[t]=!0,()=>{Vt[t]=!1}):Vt.x||Vt.y?null:(Vt.x=Vt.y=!0,()=>{Vt.x=Vt.y=!1})}const Lx=new Set(["width","height","top","left","right","bottom",...gi]);let Pa;function oN(){Pa=void 0}const ns={now:()=>(Pa===void 0&&ns.set(nt.isProcessing||sj.useManualTiming?nt.timestamp:performance.now()),Pa),set:t=>{Pa=t,queueMicrotask(oN)}};function $d(t,e){t.indexOf(e)===-1&&t.push(e)}function Yd(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class Ud{constructor(){this.subscriptions=[]}add(e){return $d(this.subscriptions,e),()=>Yd(this.subscriptions,e)}notify(e,s,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,n);else for(let r=0;r<i;r++){const a=this.subscriptions[r];a&&a(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Fx(t,e){return e?t*(1e3/e):0}const em=30,lN=t=>!isNaN(parseFloat(t));class cN{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const r=ns.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=ns.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Ud);const n=this.events[e].add(s);return e==="change"?()=>{n(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ns.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>em)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,em);return Fx(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kr(t,e){return new cN(t,e)}function dN(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,kr(s))}function uN(t,e){const s=Ao(t,e);let{transitionEnd:n={},transition:i={},...r}=s||{};r={...r,...n};for(const a in r){const o=kj(r[a]);dN(t,a,o)}}function hN(t){return!!(ct(t)&&t.add)}function wc(t,e){const s=t.getValue("willChange");if(hN(s))return s.add(e)}function Ix(t){return t.props[mx]}const Vx=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,fN=1e-7,mN=12;function pN(t,e,s,n,i){let r,a,o=0;do a=e+(s-e)/2,r=Vx(a,n,i)-t,r>0?s=a:e=a;while(Math.abs(r)>fN&&++o<mN);return a}function Fr(t,e,s,n){if(t===e&&s===n)return vt;const i=r=>pN(r,0,1,t,s);return r=>r===0||r===1?r:Vx(i(r),e,n)}const Wx=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bx=t=>e=>1-t(1-e),zx=Fr(.33,1.53,.69,.99),Gd=Bx(zx),Hx=Wx(Gd),$x=t=>(t*=2)<1?.5*Gd(t):.5*(2-Math.pow(2,-10*(t-1))),qd=t=>1-Math.sin(Math.acos(t)),Yx=Bx(qd),Ux=Wx(qd),Gx=t=>/^0[^.\s]+$/u.test(t);function gN(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Gx(t):!0}const ir=t=>Math.round(t*1e5)/1e5,Kd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xN(t){return t==null}const yN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Xd=(t,e)=>s=>!!(typeof s=="string"&&yN.test(s)&&s.startsWith(t)||e&&!xN(s)&&Object.prototype.hasOwnProperty.call(s,e)),qx=(t,e,s)=>n=>{if(typeof n!="string")return n;const[i,r,a,o]=n.match(Kd);return{[t]:parseFloat(i),[e]:parseFloat(r),[s]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},bN=t=>Ms(0,255,t),Tl={...xi,transform:t=>Math.round(bN(t))},bn={test:Xd("rgb","red"),parse:qx("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+Tl.transform(t)+", "+Tl.transform(e)+", "+Tl.transform(s)+", "+ir(wr.transform(n))+")"};function vN(t){let e="",s="",n="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const kc={test:Xd("#"),parse:vN,transform:bn.transform},Un={test:Xd("hsl","hue"),parse:qx("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+ss.transform(ir(e))+", "+ss.transform(ir(s))+", "+ir(wr.transform(n))+")"},at={test:t=>bn.test(t)||kc.test(t)||Un.test(t),parse:t=>bn.test(t)?bn.parse(t):Un.test(t)?Un.parse(t):kc.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bn.transform(t):Un.transform(t)},_N=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wN(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Kd))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(_N))===null||s===void 0?void 0:s.length)||0)>0}const Kx="number",Xx="color",kN="var",SN="var(",tm="${}",jN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sr(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},i=[];let r=0;const o=e.replace(jN,c=>(at.test(c)?(n.color.push(r),i.push(Xx),s.push(at.parse(c))):c.startsWith(SN)?(n.var.push(r),i.push(kN),s.push(c)):(n.number.push(r),i.push(Kx),s.push(parseFloat(c))),++r,tm)).split(tm);return{values:s,split:o,indexes:n,types:i}}function Zx(t){return Sr(t).values}function Jx(t){const{split:e,types:s}=Sr(t),n=e.length;return i=>{let r="";for(let a=0;a<n;a++)if(r+=e[a],i[a]!==void 0){const o=s[a];o===Kx?r+=ir(i[a]):o===Xx?r+=at.transform(i[a]):r+=i[a]}return r}}const NN=t=>typeof t=="number"?0:t;function MN(t){const e=Zx(t);return Jx(t)(e.map(NN))}const Js={test:wN,parse:Zx,createTransformer:Jx,getAnimatableNone:MN},TN=new Set(["brightness","contrast","saturate","opacity"]);function CN(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(Kd)||[];if(!n)return t;const i=s.replace(n,"");let r=TN.has(e)?1:0;return n!==s&&(r*=100),e+"("+r+i+")"}const PN=/\b([a-z-]*)\(.*?\)/gu,Sc={...Js,getAnimatableNone:t=>{const e=t.match(PN);return e?e.map(CN).join(" "):t}},DN={...Od,color:at,backgroundColor:at,outlineColor:at,fill:at,stroke:at,borderColor:at,borderTopColor:at,borderRightColor:at,borderBottomColor:at,borderLeftColor:at,filter:Sc,WebkitFilter:Sc},Zd=t=>DN[t];function Qx(t,e){let s=Zd(t);return s!==Sc&&(s=Js),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const EN=new Set(["auto","none","0"]);function AN(t,e,s){let n=0,i;for(;n<t.length&&!i;){const r=t[n];typeof r=="string"&&!EN.has(r)&&Sr(r).values.length&&(i=t[n]),n++}if(i&&s)for(const r of e)t[r]=Qx(s,i)}const sm=t=>t===xi||t===se,nm=(t,e)=>parseFloat(t.split(", ")[e]),im=(t,e)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return nm(i[1],e);{const r=n.match(/^matrix\((.+)\)$/u);return r?nm(r[1],t):0}},ON=new Set(["x","y","z"]),RN=gi.filter(t=>!ON.has(t));function LN(t){const e=[];return RN.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const ci={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:im(4,13),y:im(5,14)};ci.translateX=ci.x;ci.translateY=ci.y;const Sn=new Set;let jc=!1,Nc=!1;function ey(){if(Nc){const t=Array.from(Sn).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const i=LN(n);i.length&&(s.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=s.get(n);i&&i.forEach(([r,a])=>{var o;(o=n.getValue(r))===null||o===void 0||o.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Nc=!1,jc=!1,Sn.forEach(t=>t.complete()),Sn.clear()}function ty(){Sn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Nc=!0)})}function FN(){ty(),ey()}class Jd{constructor(e,s,n,i,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=i,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sn.add(this),jc||(jc=!0,Pe.read(ty),Pe.resolveKeyframes(ey))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:i}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&s){const c=n.readValue(s,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sy=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),IN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VN(t){const e=IN.exec(t);if(!e)return[,];const[,s,n,i]=e;return[`--${s??n}`,i]}function ny(t,e,s=1){const[n,i]=VN(t);if(!n)return;const r=window.getComputedStyle(e).getPropertyValue(n);if(r){const a=r.trim();return sy(a)?parseFloat(a):a}return Ad(i)?ny(i,e,s+1):i}const iy=t=>e=>e.test(t),WN={test:t=>t==="auto",parse:t=>t},ry=[xi,se,ss,Ls,Cj,Tj,WN],rm=t=>ry.find(iy(t));class ay extends Jd{constructor(e,s,n,i,r){super(e,s,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Ad(d))){const u=ny(d,s.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Lx.has(n)||e.length!==2)return;const[i,r]=e,a=rm(i),o=rm(r);if(a!==o)if(sm(a)&&sm(o))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let i=0;i<e.length;i++)gN(e[i])&&n.push(i);n.length&&AN(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ci[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:s,name:n,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const r=s.getValue(n);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=ci[n](s.measureViewportBox(),window.getComputedStyle(s.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{s.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const am=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Js.test(t)||t==="0")&&!t.startsWith("url("));function BN(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function zN(t,e,s,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],a=am(i,e),o=am(r,e);return!a||!o?!1:BN(t)||(s==="spring"||Bd(s))&&n}const HN=t=>t!==null;function Oo(t,{repeat:e,repeatType:s="loop"},n){const i=t.filter(HN),r=e&&s!=="loop"&&e%2===1?0:i.length-1;return!r||n===void 0?i[r]:n}const $N=40;class oy{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ns.now(),this.options={autoplay:e,delay:s,type:n,repeat:i,repeatDelay:r,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$N?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&FN(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=ns.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:r,delay:a,onComplete:o,onUpdate:c,isGenerator:d}=this.options;if(!d&&!zN(e,n,i,r))if(a)this.options.duration=0;else{c&&c(Oo(e,this.options,s)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,s);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...u},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ie=(t,e,s)=>t+(e-t)*s;function Cl(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function YN({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let i=0,r=0,a=0;if(!e)i=r=a=s;else{const o=s<.5?s*(1+e):s+e-s*e,c=2*s-o;i=Cl(c,o,t+1/3),r=Cl(c,o,t),a=Cl(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:n}}function io(t,e){return s=>s>0?e:t}const Pl=(t,e,s)=>{const n=t*t,i=s*(e*e-n)+n;return i<0?0:Math.sqrt(i)},UN=[kc,bn,Un],GN=t=>UN.find(e=>e.test(t));function om(t){const e=GN(t);if(!e)return!1;let s=e.parse(t);return e===Un&&(s=YN(s)),s}const lm=(t,e)=>{const s=om(t),n=om(e);if(!s||!n)return io(t,e);const i={...s};return r=>(i.red=Pl(s.red,n.red,r),i.green=Pl(s.green,n.green,r),i.blue=Pl(s.blue,n.blue,r),i.alpha=Ie(s.alpha,n.alpha,r),bn.transform(i))},qN=(t,e)=>s=>e(t(s)),Ir=(...t)=>t.reduce(qN),Mc=new Set(["none","hidden"]);function KN(t,e){return Mc.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function XN(t,e){return s=>Ie(t,e,s)}function Qd(t){return typeof t=="number"?XN:typeof t=="string"?Ad(t)?io:at.test(t)?lm:QN:Array.isArray(t)?ly:typeof t=="object"?at.test(t)?lm:ZN:io}function ly(t,e){const s=[...t],n=s.length,i=t.map((r,a)=>Qd(r)(r,e[a]));return r=>{for(let a=0;a<n;a++)s[a]=i[a](r);return s}}function ZN(t,e){const s={...t,...e},n={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(n[i]=Qd(t[i])(t[i],e[i]));return i=>{for(const r in n)s[r]=n[r](i);return s}}function JN(t,e){var s;const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],o=t.indexes[a][i[a]],c=(s=t.values[o])!==null&&s!==void 0?s:0;n[r]=c,i[a]++}return n}const QN=(t,e)=>{const s=Js.createTransformer(e),n=Sr(t),i=Sr(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Mc.has(t)&&!i.values.length||Mc.has(e)&&!n.values.length?KN(t,e):Ir(ly(JN(n,i),i.values),s):io(t,e)};function cy(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Ie(t,e,s):Qd(t)(t,e)}const eM=5;function dy(t,e,s){const n=Math.max(e-eM,0);return Fx(s-t(n),e-n)}const Be={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dl=.001;function tM({duration:t=Be.duration,bounce:e=Be.bounce,velocity:s=Be.velocity,mass:n=Be.mass}){let i,r,a=1-e;a=Ms(Be.minDamping,Be.maxDamping,a),t=Ms(Be.minDuration,Be.maxDuration,Ss(t)),a<1?(i=d=>{const u=d*a,h=u*t,f=u-s,m=Tc(d,a),p=Math.exp(-h);return Dl-f/m*p},r=d=>{const h=d*a*t,f=h*s+s,m=Math.pow(a,2)*Math.pow(d,2)*t,p=Math.exp(-h),g=Tc(Math.pow(d,2),a);return(-i(d)+Dl>0?-1:1)*((f-m)*p)/g}):(i=d=>{const u=Math.exp(-d*t),h=(d-s)*t+1;return-Dl+u*h},r=d=>{const u=Math.exp(-d*t),h=(s-d)*(t*t);return u*h});const o=5/t,c=nM(i,r,o);if(t=ks(t),isNaN(c))return{stiffness:Be.stiffness,damping:Be.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:a*2*Math.sqrt(n*d),duration:t}}}const sM=12;function nM(t,e,s){let n=s;for(let i=1;i<sM;i++)n=n-t(n)/e(n);return n}function Tc(t,e){return t*Math.sqrt(1-e*e)}const iM=["duration","bounce"],rM=["stiffness","damping","mass"];function cm(t,e){return e.some(s=>t[s]!==void 0)}function aM(t){let e={velocity:Be.velocity,stiffness:Be.stiffness,damping:Be.damping,mass:Be.mass,isResolvedFromDuration:!1,...t};if(!cm(t,rM)&&cm(t,iM))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),i=n*n,r=2*Ms(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Be.mass,stiffness:i,damping:r}}else{const s=tM(t);e={...e,...s,mass:Be.mass},e.isResolvedFromDuration=!0}return e}function uy(t=Be.visualDuration,e=Be.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=s;const r=s.keyframes[0],a=s.keyframes[s.keyframes.length-1],o={done:!1,value:r},{stiffness:c,damping:d,mass:u,duration:h,velocity:f,isResolvedFromDuration:m}=aM({...s,velocity:-Ss(s.velocity||0)}),p=f||0,g=d/(2*Math.sqrt(c*u)),x=a-r,v=Ss(Math.sqrt(c/u)),_=Math.abs(x)<5;n||(n=_?Be.restSpeed.granular:Be.restSpeed.default),i||(i=_?Be.restDelta.granular:Be.restDelta.default);let S;if(g<1){const j=Tc(v,g);S=k=>{const T=Math.exp(-g*v*k);return a-T*((p+g*v*x)/j*Math.sin(j*k)+x*Math.cos(j*k))}}else if(g===1)S=j=>a-Math.exp(-v*j)*(x+(p+v*x)*j);else{const j=v*Math.sqrt(g*g-1);S=k=>{const T=Math.exp(-g*v*k),M=Math.min(j*k,300);return a-T*((p+g*v*x)*Math.sinh(M)+j*x*Math.cosh(M))/j}}const N={calculatedDuration:m&&h||null,next:j=>{const k=S(j);if(m)o.done=j>=h;else{let T=0;g<1&&(T=j===0?ks(p):dy(S,j,k));const M=Math.abs(T)<=n,P=Math.abs(a-k)<=i;o.done=M&&P}return o.value=o.done?a:k,o},toString:()=>{const j=Math.min(Cx(N),vc),k=Px(T=>N.next(j*T).value,j,30);return j+"ms "+k}};return N}function dm({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},m=M=>o!==void 0&&M<o||c!==void 0&&M>c,p=M=>o===void 0?c:c===void 0||Math.abs(o-M)<Math.abs(c-M)?o:c;let g=s*e;const x=h+g,v=a===void 0?x:a(x);v!==x&&(g=v-h);const _=M=>-g*Math.exp(-M/n),S=M=>v+_(M),N=M=>{const P=_(M),O=S(M);f.done=Math.abs(P)<=d,f.value=f.done?v:O};let j,k;const T=M=>{m(f.value)&&(j=M,k=uy({keyframes:[f.value,p(f.value)],velocity:dy(S,M,f.value),damping:i,stiffness:r,restDelta:d,restSpeed:u}))};return T(0),{calculatedDuration:null,next:M=>{let P=!1;return!k&&j===void 0&&(P=!0,N(M),T(M)),j!==void 0&&M>=j?k.next(M-j):(!P&&N(M),f)}}}const oM=Fr(.42,0,1,1),lM=Fr(0,0,.58,1),hy=Fr(.42,0,.58,1),cM=t=>Array.isArray(t)&&typeof t[0]!="number",dM={linear:vt,easeIn:oM,easeInOut:hy,easeOut:lM,circIn:qd,circInOut:Ux,circOut:Yx,backIn:Gd,backInOut:Hx,backOut:zx,anticipate:$x},um=t=>{if(zd(t)){cx(t.length===4);const[e,s,n,i]=t;return Fr(e,s,n,i)}else if(typeof t=="string")return dM[t];return t};function uM(t,e,s){const n=[],i=s||cy,r=t.length-1;for(let a=0;a<r;a++){let o=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||vt:e;o=Ir(c,o)}n.push(o)}return n}function hM(t,e,{clamp:s=!0,ease:n,mixer:i}={}){const r=t.length;if(cx(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=uM(e,n,i),c=o.length,d=u=>{if(a&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=oi(t[h],t[h+1],u);return o[h](f)};return s?u=>d(Ms(t[0],t[r-1],u)):d}function fM(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const i=oi(0,e,n);t.push(Ie(s,1,i))}}function mM(t){const e=[0];return fM(e,t.length-1),e}function pM(t,e){return t.map(s=>s*e)}function gM(t,e){return t.map(()=>e||hy).splice(0,t.length-1)}function ro({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const i=cM(n)?n.map(um):um(n),r={done:!1,value:e[0]},a=pM(s&&s.length===e.length?s:mM(e),t),o=hM(a,e,{ease:Array.isArray(i)?i:gM(e,i)});return{calculatedDuration:t,next:c=>(r.value=o(c),r.done=c>=t,r)}}const xM=t=>{const e=({timestamp:s})=>t(s);return{start:()=>Pe.update(e,!0),stop:()=>Zs(e),now:()=>nt.isProcessing?nt.timestamp:ns.now()}},yM={decay:dm,inertia:dm,tween:ro,keyframes:ro,spring:uy},bM=t=>t/100;class eu extends oy{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:s,motionValue:n,element:i,keyframes:r}=this.options,a=i?.KeyframeResolver||Jd,o=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new a(r,o,s,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:a=0}=this.options,o=Bd(s)?s:yM[s]||ro;let c,d;o!==ro&&typeof e[0]!="number"&&(c=Ir(bM,cy(e[0],e[1])),e=[0,100]);const u=o({...this.options,keyframes:e});r==="mirror"&&(d=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=Cx(u));const{calculatedDuration:h}=u,f=h+i,m=f*(n+1)-i;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:n}=this;if(!n){const{keyframes:M}=this.options;return{done:!0,value:M[M.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:h}=n;if(this.startTime===null)return r.next(0);const{delay:f,repeat:m,repeatType:p,repeatDelay:g,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),_=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,N=r;if(m){const M=Math.min(this.currentTime,u)/h;let P=Math.floor(M),O=M%1;!O&&M>=1&&(O=1),O===1&&P--,P=Math.min(P,m+1),P%2&&(p==="reverse"?(O=1-O,g&&(O-=g/h)):p==="mirror"&&(N=a)),S=Ms(0,1,O)*h}const j=_?{done:!1,value:c[0]}:N.next(S);o&&(j.value=o(j.value));let{done:k}=j;!_&&d!==null&&(k=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return T&&i!==void 0&&(j.value=Oo(c,this.options,i)),x&&x(j.value),T&&this.finish(),j}get duration(){const{resolved:e}=this;return e?Ss(e.calculatedDuration):0}get time(){return Ss(this.currentTime)}set time(e){e=ks(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Ss(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=xM,onPlay:s,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),s&&s();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const vM=new Set(["opacity","clipPath","filter","transform"]);function _M(t,e,s,{delay:n=0,duration:i=300,repeat:r=0,repeatType:a="loop",ease:o="easeInOut",times:c}={}){const d={[e]:s};c&&(d.offset=c);const u=Ex(o,i);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"})}const wM=Nd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ao=10,kM=2e4;function SM(t){return Bd(t.type)||t.type==="spring"||!Dx(t.ease)}function jM(t,e){const s=new eu({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const i=[];let r=0;for(;!n.done&&r<kM;)n=s.sample(r),i.push(n.value),r+=ao;return{times:void 0,keyframes:i,duration:r-ao,ease:"linear"}}const fy={anticipate:$x,backInOut:Hx,circInOut:Ux};function NM(t){return t in fy}class hm extends oy{constructor(e){super(e);const{name:s,motionValue:n,element:i,keyframes:r}=this.options;this.resolver=new ay(r,(a,o)=>this.onKeyframesResolved(a,o),s,n,i),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:n=300,times:i,ease:r,type:a,motionValue:o,name:c,startTime:d}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof r=="string"&&no()&&NM(r)&&(r=fy[r]),SM(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:p,...g}=this.options,x=jM(e,g);e=x.keyframes,e.length===1&&(e[1]=e[0]),n=x.duration,i=x.times,r=x.ease,a="keyframes"}const u=_M(o.owner.current,c,e,{...this.options,duration:n,times:i,ease:r});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(Xf(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;o.set(Oo(e,this.options,s)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:i,type:a,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return Ss(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return Ss(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.currentTime=ks(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return vt;const{animation:n}=s;Xf(n,e)}return vt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:n,duration:i,type:r,ease:a,times:o}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:h,element:f,...m}=this.options,p=new eu({...m,keyframes:n,duration:i,type:r,ease:a,times:o,isGenerator:!0}),g=ks(this.time);d.setWithVelocity(p.sample(g-ao).value,p.sample(g).value,ao)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:n,repeatDelay:i,repeatType:r,damping:a,type:o}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=s.owner.getProps();return wM()&&n&&vM.has(n)&&!c&&!d&&!i&&r!=="mirror"&&a!==0&&o!=="inertia"}}const MM={type:"spring",stiffness:500,damping:25,restSpeed:10},TM=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CM={type:"keyframes",duration:.8},PM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DM=(t,{keyframes:e})=>e.length>2?CM:En.has(t)?t.startsWith("scale")?TM(e[1]):MM:PM;function EM({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:i,repeat:r,repeatType:a,repeatDelay:o,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const tu=(t,e,s,n={},i,r)=>a=>{const o=Wd(n,t)||{},c=o.delay||n.delay||0;let{elapsed:d=0}=n;d=d-ks(c);let u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-d,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:r?void 0:i};EM(o)||(u={...u,...DM(t,u)}),u.duration&&(u.duration=ks(u.duration)),u.repeatDelay&&(u.repeatDelay=ks(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!r&&e.get()!==void 0){const f=Oo(u.keyframes,o);if(f!==void 0)return Pe.update(()=>{u.onUpdate(f),u.onComplete()}),new Zj([])}return!r&&hm.supports(u)?new hm(u):new eu(u)};function AM({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function my(t,e,{delay:s=0,transitionOverride:n,type:i}={}){var r;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;n&&(a=n);const d=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const f=t.getValue(h,(r=t.latestValues[h])!==null&&r!==void 0?r:null),m=c[h];if(m===void 0||u&&AM(u,h))continue;const p={delay:s,...Wd(a||{},h)};let g=!1;if(window.MotionHandoffAnimation){const v=Ix(t);if(v){const _=window.MotionHandoffAnimation(v,h,Pe);_!==null&&(p.startTime=_,g=!0)}}wc(t,h),f.start(tu(h,f,m,t.shouldReduceMotion&&Lx.has(h)?{type:!1}:p,t,g));const x=f.animation;x&&d.push(x)}return o&&Promise.all(d).then(()=>{Pe.update(()=>{o&&uN(t,o)})}),d}function Cc(t,e,s={}){var n;const i=Ao(t,e,s.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(r=s.transitionOverride);const a=i?()=>Promise.all(my(t,i,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=r;return OM(t,e,u+d,h,f,s)}:()=>Promise.resolve(),{when:c}=r;if(c){const[d,u]=c==="beforeChildren"?[a,o]:[o,a];return d().then(()=>u())}else return Promise.all([a(),o(s.delay)])}function OM(t,e,s=0,n=0,i=1,r){const a=[],o=(t.variantChildren.size-1)*n,c=i===1?(d=0)=>d*n:(d=0)=>o-d*n;return Array.from(t.variantChildren).sort(RM).forEach((d,u)=>{d.notify("AnimationStart",e),a.push(Cc(d,e,{...r,delay:s+c(u)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function RM(t,e){return t.sortNodePosition(e)}function LM(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(r=>Cc(t,r,s));n=Promise.all(i)}else if(typeof e=="string")n=Cc(t,e,s);else{const i=typeof e=="function"?Ao(t,e,s.custom):e;n=Promise.all(my(t,i,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}const FM=Td.length;function py(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?py(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<FM;s++){const n=Td[s],i=t.props[n];(_r(i)||i===!1)&&(e[n]=i)}return e}const IM=[...Md].reverse(),VM=Md.length;function WM(t){return e=>Promise.all(e.map(({animation:s,options:n})=>LM(t,s,n)))}function BM(t){let e=WM(t),s=fm(),n=!0;const i=c=>(d,u)=>{var h;const f=Ao(t,u,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:p,...g}=f;d={...d,...g,...p}}return d};function r(c){e=c(t)}function a(c){const{props:d}=t,u=py(t.parent)||{},h=[],f=new Set;let m={},p=1/0;for(let x=0;x<VM;x++){const v=IM[x],_=s[v],S=d[v]!==void 0?d[v]:u[v],N=_r(S),j=v===c?_.isActive:null;j===!1&&(p=x);let k=S===u[v]&&S!==d[v]&&N;if(k&&n&&t.manuallyAnimateOnMount&&(k=!1),_.protectedKeys={...m},!_.isActive&&j===null||!S&&!_.prevProp||Do(S)||typeof S=="boolean")continue;const T=zM(_.prevProp,S);let M=T||v===c&&_.isActive&&!k&&N||x>p&&N,P=!1;const O=Array.isArray(S)?S:[S];let A=O.reduce(i(v),{});j===!1&&(A={});const{prevResolvedValues:I={}}=_,X={...I,...A},U=q=>{M=!0,f.has(q)&&(P=!0,f.delete(q)),_.needsAnimating[q]=!0;const de=t.getValue(q);de&&(de.liveStyle=!1)};for(const q in X){const de=A[q],B=I[q];if(m.hasOwnProperty(q))continue;let ae=!1;bc(de)&&bc(B)?ae=!Tx(de,B):ae=de!==B,ae?de!=null?U(q):f.add(q):de!==void 0&&f.has(q)?U(q):_.protectedKeys[q]=!0}_.prevProp=S,_.prevResolvedValues=A,_.isActive&&(m={...m,...A}),n&&t.blockInitialAnimation&&(M=!1),M&&(!(k&&T)||P)&&h.push(...O.map(q=>({animation:q,options:{type:v}})))}if(f.size){const x={};f.forEach(v=>{const _=t.getBaseTarget(v),S=t.getValue(v);S&&(S.liveStyle=!0),x[v]=_??null}),h.push({animation:x})}let g=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(h):Promise.resolve()}function o(c,d){var u;if(s[c].isActive===d)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(c,d)}),s[c].isActive=d;const h=a(c);for(const f in s)s[f].protectedKeys={};return h}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>s,reset:()=>{s=fm(),n=!0}}}function zM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Tx(e,t):!1}function fn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fm(){return{animate:fn(!0),whileInView:fn(),whileHover:fn(),whileTap:fn(),whileDrag:fn(),whileFocus:fn(),exit:fn()}}class sn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class HM extends sn{constructor(e){super(e),e.animationState||(e.animationState=BM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Do(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let $M=0;class YM extends sn{constructor(){super(...arguments),this.id=$M++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);s&&!e&&i.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const UM={animation:{Feature:HM},exit:{Feature:YM}};function jr(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function Vr(t){return{point:{x:t.pageX,y:t.pageY}}}const GM=t=>e=>Hd(e)&&t(e,Vr(e));function rr(t,e,s,n){return jr(t,e,GM(s),n)}const mm=(t,e)=>Math.abs(t-e);function qM(t,e){const s=mm(t.x,e.x),n=mm(t.y,e.y);return Math.sqrt(s**2+n**2)}class gy{constructor(e,s,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Al(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=qM(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:g}=nt;this.history.push({...p,timestamp:g});const{onStart:x,onMove:v}=this.handlers;f||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=El(f,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Al(h.type==="pointercancel"?this.lastMoveEventInfo:El(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),p&&p(h,x)},!Hd(e))return;this.dragSnapToOrigin=r,this.handlers=s,this.transformPagePoint=n,this.contextWindow=i||window;const a=Vr(e),o=El(a,this.transformPagePoint),{point:c}=o,{timestamp:d}=nt;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=s;u&&u(e,Al(o,this.history)),this.removeListeners=Ir(rr(this.contextWindow,"pointermove",this.handlePointerMove),rr(this.contextWindow,"pointerup",this.handlePointerUp),rr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zs(this.updatePoint)}}function El(t,e){return e?{point:e(t.point)}:t}function pm(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Al({point:t},e){return{point:t,delta:pm(t,xy(e)),offset:pm(t,KM(e)),velocity:XM(e,.1)}}function KM(t){return t[0]}function xy(t){return t[t.length-1]}function XM(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const i=xy(t);for(;s>=0&&(n=t[s],!(i.timestamp-n.timestamp>ks(e)));)s--;if(!n)return{x:0,y:0};const r=Ss(i.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const a={x:(i.x-n.x)/r,y:(i.y-n.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const yy=1e-4,ZM=1-yy,JM=1+yy,by=.01,QM=0-by,eT=0+by;function _t(t){return t.max-t.min}function tT(t,e,s){return Math.abs(t-e)<=s}function gm(t,e,s,n=.5){t.origin=n,t.originPoint=Ie(e.min,e.max,t.origin),t.scale=_t(s)/_t(e),t.translate=Ie(s.min,s.max,t.origin)-t.originPoint,(t.scale>=ZM&&t.scale<=JM||isNaN(t.scale))&&(t.scale=1),(t.translate>=QM&&t.translate<=eT||isNaN(t.translate))&&(t.translate=0)}function ar(t,e,s,n){gm(t.x,e.x,s.x,n?n.originX:void 0),gm(t.y,e.y,s.y,n?n.originY:void 0)}function xm(t,e,s){t.min=s.min+e.min,t.max=t.min+_t(e)}function sT(t,e,s){xm(t.x,e.x,s.x),xm(t.y,e.y,s.y)}function ym(t,e,s){t.min=e.min-s.min,t.max=t.min+_t(e)}function or(t,e,s){ym(t.x,e.x,s.x),ym(t.y,e.y,s.y)}function nT(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?Ie(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?Ie(s,t,n.max):Math.min(t,s)),t}function bm(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function iT(t,{top:e,left:s,bottom:n,right:i}){return{x:bm(t.x,s,i),y:bm(t.y,e,n)}}function vm(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function rT(t,e){return{x:vm(t.x,e.x),y:vm(t.y,e.y)}}function aT(t,e){let s=.5;const n=_t(t),i=_t(e);return i>n?s=oi(e.min,e.max-n,t.min):n>i&&(s=oi(t.min,t.max-i,e.min)),Ms(0,1,s)}function oT(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Pc=.35;function lT(t=Pc){return t===!1?t=0:t===!0&&(t=Pc),{x:_m(t,"left","right"),y:_m(t,"top","bottom")}}function _m(t,e,s){return{min:wm(t,e),max:wm(t,s)}}function wm(t,e){return typeof t=="number"?t:t[e]||0}const km=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gn=()=>({x:km(),y:km()}),Sm=()=>({min:0,max:0}),$e=()=>({x:Sm(),y:Sm()});function Tt(t){return[t("x"),t("y")]}function vy({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function cT({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function dT(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Ol(t){return t===void 0||t===1}function Dc({scale:t,scaleX:e,scaleY:s}){return!Ol(t)||!Ol(e)||!Ol(s)}function xn(t){return Dc(t)||_y(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _y(t){return jm(t.x)||jm(t.y)}function jm(t){return t&&t!=="0%"}function oo(t,e,s){const n=t-s,i=e*n;return s+i}function Nm(t,e,s,n,i){return i!==void 0&&(t=oo(t,i,n)),oo(t,s,n)+e}function Ec(t,e=0,s=1,n,i){t.min=Nm(t.min,e,s,n,i),t.max=Nm(t.max,e,s,n,i)}function wy(t,{x:e,y:s}){Ec(t.x,e.translate,e.scale,e.originPoint),Ec(t.y,s.translate,s.scale,s.originPoint)}const Mm=.999999999999,Tm=1.0000000000001;function uT(t,e,s,n=!1){const i=s.length;if(!i)return;e.x=e.y=1;let r,a;for(let o=0;o<i;o++){r=s[o],a=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Kn(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,wy(t,a)),n&&xn(r.latestValues)&&Kn(t,r.latestValues))}e.x<Tm&&e.x>Mm&&(e.x=1),e.y<Tm&&e.y>Mm&&(e.y=1)}function qn(t,e){t.min=t.min+e,t.max=t.max+e}function Cm(t,e,s,n,i=.5){const r=Ie(t.min,t.max,i);Ec(t,e,s,r,n)}function Kn(t,e){Cm(t.x,e.x,e.scaleX,e.scale,e.originX),Cm(t.y,e.y,e.scaleY,e.scale,e.originY)}function ky(t,e){return vy(dT(t.getBoundingClientRect(),e))}function hT(t,e,s){const n=ky(t,s),{scroll:i}=e;return i&&(qn(n.x,i.offset.x),qn(n.y,i.offset.y)),n}const Sy=({current:t})=>t?t.ownerDocument.defaultView:null,fT=new WeakMap;class mT{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Vr(u).point)},r=(u,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aN(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tt(x=>{let v=this.getAxisMotionValue(x).get()||0;if(ss.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const S=_.layout.layoutBox[x];S&&(v=_t(S)*(parseFloat(v)/100))}}this.originPoint[x]=v}),p&&Pe.postRender(()=>p(u,h)),wc(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(u,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=pT(x),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),g&&g(u,h)},o=(u,h)=>this.stop(u,h),c=()=>Tt(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new gy(e,{onSessionStart:i,onStart:r,onMove:a,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Sy(this.visualElement)})}stop(e,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&Pe.postRender(()=>r(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:i}=this.getProps();if(!n||!va(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=nT(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;s&&Yn(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=iT(i.layoutBox,s):this.constraints=!1,this.elastic=lT(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Tt(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=oT(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Yn(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=hT(n,i.root,this.visualElement.getTransformPagePoint());let a=rT(i.layout.layoutBox,r);if(s){const o=s(cT(a));this.hasMutatedConstraints=!!o,o&&(a=vy(o))}return a}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=Tt(u=>{if(!va(u,s,this.currentDirection))return;let h=c&&c[u]||{};a&&(h={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,p={type:"inertia",velocity:n?e[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(u,p)});return Promise.all(d).then(o)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return wc(this.visualElement,e),n.start(tu(e,n,0,s,this.visualElement,!1))}stopAnimation(){Tt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Tt(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[s];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Tt(s=>{const{drag:n}=this.getProps();if(!va(s,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(s);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[s];r.set(e[s]-Ie(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Yn(s)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Tt(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();i[a]=aT({min:c,max:c},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Tt(a=>{if(!va(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];o.set(Ie(c,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;fT.set(this.visualElement,this);const e=this.visualElement.current,s=rr(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Yn(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pe.read(n);const a=jr(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Tt(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())}));return()=>{a(),s(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:a=Pc,dragMomentum:o=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function va(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function pT(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class gT extends sn{constructor(e){super(e),this.removeGroupControls=vt,this.removeListeners=vt,this.controls=new mT(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Pm=t=>(e,s)=>{t&&Pe.postRender(()=>t(e,s))};class xT extends sn{constructor(){super(...arguments),this.removePointerDownListener=vt}onPointerDown(e){this.session=new gy(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Sy(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Pm(e),onStart:Pm(s),onMove:n,onEnd:(r,a)=>{delete this.session,i&&Pe.postRender(()=>i(r,a))}}}mount(){this.removePointerDownListener=rr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Da={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Dm(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Li={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(se.test(t))t=parseFloat(t);else return t;const s=Dm(t,e.target.x),n=Dm(t,e.target.y);return`${s}% ${n}%`}},yT={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,i=Js.parse(t);if(i.length>5)return n;const r=Js.createTransformer(t),a=typeof i[0]!="number"?1:0,o=s.x.scale*e.x,c=s.y.scale*e.y;i[0+a]/=o,i[1+a]/=c;const d=Ie(o,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),r(i)}};class bT extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;Vj(vT),r&&(s.group&&s.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Da.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:i,isPresent:r}=this.props,a=n.projection;return a&&(a.isPresent=r,i||e.layoutDependency!==s||s===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||Pe.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Pd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jy(t){const[e,s]=ox(),n=y.useContext(wd);return l.jsx(bT,{...t,layoutGroup:n,switchLayoutGroup:y.useContext(px),isPresent:e,safeToRemove:s})}const vT={borderRadius:{...Li,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Li,borderTopRightRadius:Li,borderBottomLeftRadius:Li,borderBottomRightRadius:Li,boxShadow:yT};function _T(t,e,s){const n=ct(t)?t:kr(t);return n.start(tu("",n,e,s)),n.animation}function wT(t){return t instanceof SVGElement&&t.tagName!=="svg"}const kT=(t,e)=>t.depth-e.depth;class ST{constructor(){this.children=[],this.isDirty=!1}add(e){$d(this.children,e),this.isDirty=!0}remove(e){Yd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kT),this.isDirty=!1,this.children.forEach(e)}}function jT(t,e){const s=ns.now(),n=({timestamp:i})=>{const r=i-s;r>=e&&(Zs(n),t(r-e))};return Pe.read(n,!0),()=>Zs(n)}const Ny=["TopLeft","TopRight","BottomLeft","BottomRight"],NT=Ny.length,Em=t=>typeof t=="string"?parseFloat(t):t,Am=t=>typeof t=="number"||se.test(t);function MT(t,e,s,n,i,r){i?(t.opacity=Ie(0,s.opacity!==void 0?s.opacity:1,TT(n)),t.opacityExit=Ie(e.opacity!==void 0?e.opacity:1,0,CT(n))):r&&(t.opacity=Ie(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let a=0;a<NT;a++){const o=`border${Ny[a]}Radius`;let c=Om(e,o),d=Om(s,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Am(c)===Am(d)?(t[o]=Math.max(Ie(Em(c),Em(d),n),0),(ss.test(d)||ss.test(c))&&(t[o]+="%")):t[o]=d}(e.rotate||s.rotate)&&(t.rotate=Ie(e.rotate||0,s.rotate||0,n))}function Om(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const TT=My(0,.5,Yx),CT=My(.5,.95,vt);function My(t,e,s){return n=>n<t?0:n>e?1:s(oi(t,e,n))}function Rm(t,e){t.min=e.min,t.max=e.max}function Nt(t,e){Rm(t.x,e.x),Rm(t.y,e.y)}function Lm(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Fm(t,e,s,n,i){return t-=e,t=oo(t,1/s,n),i!==void 0&&(t=oo(t,1/i,n)),t}function PT(t,e=0,s=1,n=.5,i,r=t,a=t){if(ss.test(e)&&(e=parseFloat(e),e=Ie(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Ie(r.min,r.max,n);t===r&&(o-=e),t.min=Fm(t.min,e,s,o,i),t.max=Fm(t.max,e,s,o,i)}function Im(t,e,[s,n,i],r,a){PT(t,e[s],e[n],e[i],e.scale,r,a)}const DT=["x","scaleX","originX"],ET=["y","scaleY","originY"];function Vm(t,e,s,n){Im(t.x,e,DT,s?s.x:void 0,n?n.x:void 0),Im(t.y,e,ET,s?s.y:void 0,n?n.y:void 0)}function Wm(t){return t.translate===0&&t.scale===1}function Ty(t){return Wm(t.x)&&Wm(t.y)}function Bm(t,e){return t.min===e.min&&t.max===e.max}function AT(t,e){return Bm(t.x,e.x)&&Bm(t.y,e.y)}function zm(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Cy(t,e){return zm(t.x,e.x)&&zm(t.y,e.y)}function Hm(t){return _t(t.x)/_t(t.y)}function $m(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class OT{constructor(){this.members=[]}add(e){$d(this.members,e),e.scheduleRender()}remove(e){if(Yd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let n;for(let i=s;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RT(t,e,s){let n="";const i=t.x.translate/e.x,r=t.y.translate/e.y,a=s?.z||0;if((i||r||a)&&(n=`translate3d(${i}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:f,skewX:m,skewY:p}=s;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const yn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Zi=typeof window<"u"&&window.MotionDebug!==void 0,Rl=["","X","Y","Z"],LT={visibility:"hidden"},Ym=1e3;let FT=0;function Ll(t,e,s,n){const{latestValues:i}=e;i[t]&&(s[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Py(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=Ix(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Pe,!(i||r))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Py(n)}function Dy({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=FT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zi&&(yn.totalNodes=yn.resolvedTargetDeltas=yn.recalculatedProjection=0),this.nodes.forEach(WT),this.nodes.forEach(YT),this.nodes.forEach(UT),this.nodes.forEach(BT),Zi&&window.MotionDebug.record(yn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ST)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Ud),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wT(a),this.instance=a;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(d||c)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=jT(f,250),Da.hasAnimatedSinceResize&&(Da.hasAnimatedSinceResize=!1,this.nodes.forEach(Gm))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||ZT,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),_=!this.targetLayout||!Cy(this.targetLayout,p)||m,S=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,S);const N={...Wd(g,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else f||Gm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GT),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Py(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Um);return}this.isUpdating||this.nodes.forEach(HT),this.isUpdating=!1,this.nodes.forEach($T),this.nodes.forEach(IT),this.nodes.forEach(VT),this.clearAllSnapshots();const o=ns.now();nt.delta=Ms(0,1e3/60,o-nt.timestamp),nt.timestamp=o,nt.isProcessing=!0,Nl.update.process(nt),Nl.preRender.process(nt),Nl.render.process(nt),nt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zT),this.sharedNodes.forEach(qT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Ty(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;a&&(o||xn(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),JT(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return $e();const c=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(QT))){const{scroll:u}=this.root;u&&(qn(c.x,u.offset.x),qn(c.y,u.offset.y))}return c}removeElementScroll(a){var o;const c=$e();if(Nt(c,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Nt(c,a),qn(c.x,h.offset.x),qn(c.y,h.offset.y))}return c}applyTransform(a,o=!1){const c=$e();Nt(c,a);for(let d=0;d<this.path.length;d++){const u=this.path[d];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Kn(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),xn(u.latestValues)&&Kn(c,u.latestValues)}return xn(this.latestValues)&&Kn(c,this.latestValues),c}removeTransform(a){const o=$e();Nt(o,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!xn(d.latestValues))continue;Dc(d.latestValues)&&d.updateSnapshot();const u=$e(),h=d.measurePageBox();Nt(u,h),Vm(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return xn(this.latestValues)&&Vm(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=nt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),or(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nt(this.target,this.layout.layoutBox),wy(this.target,this.targetDelta)):Nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),or(this.relativeTargetOrigin,this.target,m.target),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zi&&yn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Dc(this.parent.latestValues)||_y(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===nt.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;uT(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$e());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Lm(this.prevProjectionDelta.x,this.projectionDelta.x),Lm(this.prevProjectionDelta.y,this.projectionDelta.y)),ar(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!$m(this.projectionDelta.x,this.prevProjectionDelta.x)||!$m(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Zi&&yn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gn(),this.projectionDelta=Gn(),this.projectionDeltaWithTransform=Gn()}setAnimationOrigin(a,o=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Gn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=$e(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,x=this.getStack(),v=!x||x.members.length<=1,_=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(XT));this.animationProgress=0;let S;this.mixTargetDelta=N=>{const j=N/1e3;qm(h.x,a.x,j),qm(h.y,a.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(or(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KT(this.relativeTarget,this.relativeTargetOrigin,f,j),S&&AT(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=$e()),Nt(S,this.relativeTarget)),g&&(this.animationValues=u,MT(u,d,this.latestValues,j,_,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{Da.hasAnimatedSinceResize=!0,this.currentAnimation=_T(0,Ym,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ym),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:u}=a;if(!(!o||!c||!d)){if(this!==a&&this.layout&&d&&Ey(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||$e();const h=_t(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=_t(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}Nt(o,c),Kn(o,u),ar(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new OT),this.sharedNodes.get(a).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const d={};c.z&&Ll("z",a,d,this.animationValues);for(let u=0;u<Rl.length;u++)Ll(`rotate${Rl[u]}`,a,d,this.animationValues),Ll(`skew${Rl[u]}`,a,d,this.animationValues);a.render();for(const u in d)a.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);a.scheduleRender()}getProjectionStyles(a){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return LT;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Ca(a?.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Ca(a?.pointerEvents)||""),this.hasProjected&&!xn(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=RT(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x:m,y:p}=this.projectionDelta;d.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in so){if(f[g]===void 0)continue;const{correct:x,applyTo:v}=so[g],_=d.transform==="none"?f[g]:x(f[g],h);if(v){const S=v.length;for(let N=0;N<S;N++)d[v[N]]=_}else d[g]=_}return this.options.layoutId&&(d.pointerEvents=h===this?Ca(a?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Um),this.root.sharedNodes.clear()}}}function IT(t){t.updateLayout()}function VT(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,a=s.source!==t.layout.source;r==="size"?Tt(h=>{const f=a?s.measuredBox[h]:s.layoutBox[h],m=_t(f);f.min=n[h].min,f.max=f.min+m}):Ey(r,s.layoutBox,n)&&Tt(h=>{const f=a?s.measuredBox[h]:s.layoutBox[h],m=_t(n[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=Gn();ar(o,n,s.layoutBox);const c=Gn();a?ar(c,t.applyTransform(i,!0),s.measuredBox):ar(c,n,s.layoutBox);const d=!Ty(o);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=$e();or(p,s.layoutBox,f.layoutBox);const g=$e();or(g,n,m.layoutBox),Cy(p,g)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function WT(t){Zi&&yn.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function BT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zT(t){t.clearSnapshot()}function Um(t){t.clearMeasurements()}function HT(t){t.isLayoutDirty=!1}function $T(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function YT(t){t.resolveTargetDelta()}function UT(t){t.calcProjection()}function GT(t){t.resetSkewAndRotation()}function qT(t){t.removeLeadSnapshot()}function qm(t,e,s){t.translate=Ie(e.translate,0,s),t.scale=Ie(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function Km(t,e,s,n){t.min=Ie(e.min,s.min,n),t.max=Ie(e.max,s.max,n)}function KT(t,e,s,n){Km(t.x,e.x,s.x,n),Km(t.y,e.y,s.y,n)}function XT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ZT={duration:.45,ease:[.4,0,.1,1]},Xm=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Zm=Xm("applewebkit/")&&!Xm("chrome/")?Math.round:vt;function Jm(t){t.min=Zm(t.min),t.max=Zm(t.max)}function JT(t){Jm(t.x),Jm(t.y)}function Ey(t,e,s){return t==="position"||t==="preserve-aspect"&&!tT(Hm(e),Hm(s),.2)}function QT(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const eC=Dy({attachResizeListener:(t,e)=>jr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fl={current:void 0},Ay=Dy({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Fl.current){const t=new eC({});t.mount(window),t.setOptions({layoutScroll:!0}),Fl.current=t}return Fl.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tC={pan:{Feature:xT},drag:{Feature:gT,ProjectionNode:Ay,MeasureLayout:jy}};function Qm(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,r=n[i];r&&Pe.postRender(()=>r(e,Vr(e)))}class sC extends sn{mount(){const{current:e}=this.node;e&&(this.unmount=tN(e,s=>(Qm(this.node,s,"Start"),n=>Qm(this.node,n,"End"))))}unmount(){}}class nC extends sn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ir(jr(this.node.current,"focus",()=>this.onFocus()),jr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ep(t,e,s){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),r=n[i];r&&Pe.postRender(()=>r(e,Vr(e)))}class iC extends sn{mount(){const{current:e}=this.node;e&&(this.unmount=rN(e,s=>(ep(this.node,s,"Start"),(n,{success:i})=>ep(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ac=new WeakMap,Il=new WeakMap,rC=t=>{const e=Ac.get(t.target);e&&e(t)},aC=t=>{t.forEach(rC)};function oC({root:t,...e}){const s=t||document;Il.has(s)||Il.set(s,{});const n=Il.get(s),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(aC,{root:t,...e})),n[i]}function lC(t,e,s){const n=oC(e);return Ac.set(t,s),n.observe(t),()=>{Ac.delete(t),n.unobserve(t)}}const cC={some:0,all:1};class dC extends sn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:i="some",once:r}=e,a={root:s?s.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:cC[i]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return lC(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(uC(e,s))&&this.startObserver()}unmount(){}}function uC({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const hC={inView:{Feature:dC},tap:{Feature:iC},focus:{Feature:nC},hover:{Feature:sC}},fC={layout:{ProjectionNode:Ay,MeasureLayout:jy}},Oc={current:null},Oy={current:!1};function mC(){if(Oy.current=!0,!!jd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Oc.current=t.matches;t.addListener(e),e()}else Oc.current=!1}const pC=[...ry,at,Js],gC=t=>pC.find(iy(t)),tp=new WeakMap;function xC(t,e,s){for(const n in e){const i=e[n],r=s[n];if(ct(i))t.addValue(n,i);else if(ct(r))t.addValue(n,kr(i,{owner:t}));else if(r!==i)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(n);t.addValue(n,kr(a!==void 0?a:i,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const sp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yC{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Jd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ns.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Pe.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:u}=a;this.onUpdate=u,this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=Eo(s),this.isVariantNode=fx(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const m in f){const p=f[m];c[m]!==void 0&&ct(p)&&p.set(c[m],!1)}}mount(e){this.current=e,tp.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Oy.current||mC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Oc.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){tp.delete(this.current),this.projection&&this.projection.unmount(),Zs(this.notifyUpdate),Zs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=En.has(e),i=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Pe.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=s.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{i(),r(),a&&a(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in li){const s=li[e];if(!s)continue;const{isEnabled:n,Feature:i}=s;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<sp.length;n++){const i=sp[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,a=e[r];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=xC(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=kr(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(sy(i)||Gx(i))?i=parseFloat(i):!gC(i)&&Js.test(s)&&(i=Qx(e,s)),this.setBaseTarget(e,ct(i)?i.get():i)),ct(i)?i.get():i}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=Ed(this.props,n,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!ct(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Ud),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class Ry extends yC{constructor(){super(...arguments),this.KeyframeResolver=ay}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ct(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function bC(t){return window.getComputedStyle(t)}class vC extends Ry{constructor(){super(...arguments),this.type="html",this.renderInstance=wx}readValueFromInstance(e,s){if(En.has(s)){const n=Zd(s);return n&&n.default||0}else{const n=bC(e),i=(bx(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return ky(e,s)}build(e,s,n){Rd(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return Vd(e,s,n)}}class _C extends Ry{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$e}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(En.has(s)){const n=Zd(s);return n&&n.default||0}return s=kx.has(s)?s:Cd(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return Nx(e,s,n)}build(e,s,n){Ld(e,s,this.isSVGTag,n.transformTemplate)}renderInstance(e,s,n,i){Sx(e,s,n,i)}mount(e){this.isSVGTag=Id(e.tagName),super.mount(e)}}const wC=(t,e)=>Dd(t)?new _C(e):new vC(e,{allowProjection:t!==y.Fragment}),kC=qj({...UM,...hC,...tC,...fC},wC),Ue=cj(kC);function SC(){const[t,e]=y.useState(null),[s,n]=y.useState(!1),[i,r]=y.useState(!1),[a,o]=y.useState(null),[c,d]=y.useState(!0),[u,h]=y.useState(null),f=y.useCallback(async()=>{if(a){n(!0),r(!1);try{const x=await G.getAdvice();x&&typeof x=="object"&&"status"in x&&x.status==="disabled"?(o(!1),e(null)):e(x.advice??null)}catch(x){console.error(x),r(!0)}finally{n(!1)}}},[a]),m=y.useCallback(async()=>{n(!0),r(!1);try{const x=await G.analystRun();h(x)}catch(x){console.error("Failed to fetch analyst summary:",x),r(!0)}finally{n(!1)}},[]);y.useEffect(()=>{G.config().then(x=>{const v=x.advisor||{},_=v.enable_llm!==!1,S=v.auto_fetch!==!1;o(_),d(S),_&&S&&f(),_||m()}).catch(x=>{console.error("Failed to load advisor config:",x),o(!1)})},[f,m]);const p=!!a&&!s,g=async()=>{const x=!c;d(x);try{await G.configSave({advisor:{auto_fetch:x}}),x&&a&&!t&&f()}catch(v){console.error("Failed to update advisor auto_fetch setting:",v)}};return l.jsxs(re,{className:"h-full p-4 md:p-5 flex flex-col",children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted",children:[l.jsx(Qc,{className:"h-4 w-4 text-accent"}),l.jsx("span",{children:"Aurora Advisor"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[a&&l.jsx("button",{onClick:g,className:`rounded-pill px-2 py-1 text-[10px] font-medium transition ${c?"bg-accent text-canvas border border-accent":"bg-surface border border-line/60 text-muted hover:border-accent hover:text-accent"}`,title:c?"Disable auto-fetch (advisor runs only on manual request)":"Enable auto-fetch when the plan changes",children:""}),a!==null&&l.jsx("button",{onClick:f,disabled:!p,className:"text-[10px] text-muted hover:text-text transition-colors p-1 disabled:opacity-40",title:a?"Fetch latest advice":"Enable LLM advice in Settings",children:l.jsx(Wp,{className:`h-4 w-4 ${s?"animate-spin":""}`})})]})]}),l.jsxs("div",{className:"text-[11px] text-text leading-relaxed",children:[a===!1&&l.jsxs(l.Fragment,{children:[s&&l.jsx("span",{className:"animate-pulse",children:"Analyzing schedule (offline)"}),!s&&i&&l.jsx("span",{className:"text-red-400",children:"Unable to analyze schedule. Check backend logs for details."}),!s&&!i&&u&&u.recommendations&&l.jsx("div",{className:"space-y-2",children:Object.entries(u.recommendations).slice(0,3).map(([x,v])=>{const _=v??{},S=_.label||x,N=_.best_grid_window||{},j=_.best_solar_window||{},k=P=>P&&P.length>=16?P.slice(11,16):"",T=N.start&&N.end?`${k(N.start)}${k(N.end)} (${N.avg_price?.toFixed?.(2)??""} SEK/kWh)`:null,M=j.start&&j.end?`${k(j.start)}${k(j.end)} (${j.avg_pv_surplus?.toFixed?.(2)??""} kW surplus)`:null;return l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("div",{className:"font-medium",children:S}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-muted",children:[T&&l.jsxs("span",{className:"inline-flex items-center gap-1",children:[l.jsx(Dt,{className:"h-3 w-3 text-accent"}),l.jsxs("span",{children:["Grid: ",T]})]}),M&&l.jsxs("span",{className:"inline-flex items-center gap-1",children:[l.jsx(Bp,{className:"h-3 w-3 text-accent"}),l.jsxs("span",{children:["Solar: ",M]})]})]})]},x)})}),!s&&!i&&(!u||!u.recommendations)&&l.jsx("span",{className:"text-muted",children:"No appliance recommendations available. Configure appliances in Settings to see suggested run windows."})]}),a===!0&&l.jsxs(l.Fragment,{children:[s&&l.jsx("span",{className:"animate-pulse",children:"Analyzing schedule..."}),!s&&i&&l.jsx("span",{className:"text-red-400",children:"Unable to fetch advice. Check AI settings or try again."}),!s&&!i&&!t&&!c&&l.jsx("span",{className:"text-muted",children:"Click the refresh icon to analyze your current schedule."}),!s&&!i&&t&&l.jsx("span",{children:t})]}),a===null&&!s&&!i&&l.jsx("span",{className:"text-muted",children:"Loading advisor settings"})]})]})}function _a({from:t,to:e,power:s,color:n,reverse:i}){const r=Math.abs(s),a=i?e:t,o=i?t:e,c=4,d=Math.max(3.5-r*.6,.8);return l.jsxs("g",{children:[l.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:2,strokeOpacity:.2}),r>.05&&Array.from({length:c}).map((u,h)=>l.jsx(Ue.circle,{r:3.5,fill:n,initial:{opacity:0},animate:{cx:[a.x,o.x],cy:[a.y,o.y],opacity:[0,.85,.85,0]},transition:{duration:d,repeat:1/0,delay:h/c*d,ease:"linear"}},h))]})}function Fi({x:t,y:e,iconType:s,label:n,value:i,subValue:r,color:a,glowIntensity:o,isCharging:c,compact:d}){const u=d?28:35,h=u+18*o,f=d?18:22,m={solar:Dr,house:Ip,battery:c?ur:yo,grid:Dt,water:hr}[s];return l.jsxs("g",{transform:`translate(${t}, ${e})`,children:[o>.1&&l.jsx(Ue.circle,{r:h,fill:a,initial:{opacity:0},animate:{opacity:.1+o*.15},transition:{duration:.4}}),l.jsx("circle",{r:u,fill:"rgb(var(--color-surface))",stroke:a,strokeWidth:2.5}),l.jsx("foreignObject",{x:-f/2,y:-f/2,width:f,height:f,children:l.jsx(m,{size:f,style:{color:a},strokeWidth:1.5})}),l.jsx("text",{y:u+14,textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:d?"10":"11",fontWeight:"600",children:i}),r&&!d&&l.jsx("text",{y:u+26,textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:r}),l.jsx("text",{y:u+(r&&!d?38:26),textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:d?"8":"9",children:n})]})}function jC({data:t,compact:e=!1}){const s=e?.75:1,n=y.useMemo(()=>({solar:{x:100*s,y:50*s},house:{x:200*s,y:130*s},battery:{x:200*s,y:230*s},grid:{x:100*s,y:230*s},water:{x:300*s,y:130*s}}),[s]),i={solar:"rgb(var(--color-accent))",battery:"rgb(var(--color-good))",grid:"rgb(var(--color-grid))",house:"rgb(var(--color-house))",water:"rgb(var(--color-water))"},r=6,a={solar:Math.min(t.solar.kw/r,1),battery:Math.min(Math.abs(t.battery.kw)/r,1),grid:Math.min(Math.abs(t.grid.kw)/r,1),house:Math.min(t.house.kw/r,1),water:Math.min(t.water.kw/r,1)},o=m=>`${Math.abs(m).toFixed(1)} kW`,c=m=>m!=null?`${m.toFixed(1)} kWh`:void 0,d=t.grid.kw>=0?"Import":"Export",u=t.grid.kw>=0?c(t.grid.importKwh):c(t.grid.exportKwh),h=t.battery.kw>=0?"Charging":"Discharging",f=e?"0 0 300 200":"0 0 400 280";return l.jsxs("svg",{viewBox:f,className:"w-full h-full",children:[l.jsx(_a,{from:n.solar,to:n.house,power:t.solar.kw,color:i.solar}),l.jsx(_a,{from:n.battery,to:n.house,power:Math.abs(t.battery.kw),color:i.battery,reverse:t.battery.kw>0}),l.jsx(_a,{from:n.grid,to:n.house,power:Math.abs(t.grid.kw),color:i.grid,reverse:t.grid.kw<0}),l.jsx(_a,{from:n.house,to:n.water,power:t.water.kw,color:i.water}),l.jsx(Fi,{...n.solar,iconType:"solar",label:"Solar",value:o(t.solar.kw),subValue:c(t.solar.todayKwh),color:i.solar,glowIntensity:a.solar,compact:e}),l.jsx(Fi,{...n.house,iconType:"house",label:"House",value:o(t.house.kw),subValue:c(t.house.todayKwh),color:i.house,glowIntensity:a.house,compact:e}),l.jsx(Fi,{...n.battery,iconType:"battery",label:h,value:`${t.battery.soc.toFixed(0)}%`,subValue:o(t.battery.kw),color:i.battery,glowIntensity:a.battery,isCharging:t.battery.kw>0,compact:e}),l.jsx(Fi,{...n.grid,iconType:"grid",label:d,value:o(t.grid.kw),subValue:u,color:i.grid,glowIntensity:a.grid,compact:e}),l.jsx(Fi,{...n.water,iconType:"water",label:"Water",value:o(t.water.kw),color:i.water,glowIntensity:a.water,compact:e})]})}function NC({powerFlowData:t}){const[e,s]=y.useState("advisor"),i=t??{solar:{kw:0,todayKwh:0},battery:{kw:0,soc:50},grid:{kw:0,importKwh:0,exportKwh:0},house:{kw:0,todayKwh:0},water:{kw:0}};return l.jsxs(re,{className:"h-full p-4 md:p-5 flex flex-col",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center gap-1 p-0.5 rounded-lg bg-surface2/50 border border-line/30",children:[l.jsxs("button",{onClick:()=>s("advisor"),className:`flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[10px] font-medium transition ${e==="advisor"?"bg-accent text-[#100f0e]":"text-muted hover:text-text"}`,children:[l.jsx(Qc,{className:"h-3 w-3"}),l.jsx("span",{children:"Advisor"})]}),l.jsxs("button",{onClick:()=>s("powerflow"),className:`flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[10px] font-medium transition ${e==="powerflow"?"bg-accent text-[#100f0e]":"text-muted hover:text-text"}`,children:[l.jsx(ni,{className:"h-3 w-3"}),l.jsx("span",{children:"Power Flow"})]})]})}),l.jsx("div",{className:"flex-1 min-h-0",children:e==="advisor"?l.jsx(MC,{}):l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsx(jC,{data:i})})})]})}function MC(){return l.jsx("div",{className:"[&>div]:p-0 [&>div]:shadow-none [&>div]:bg-transparent [&>div]:border-none",children:l.jsx(SC,{})})}const np=({value:t,total:e,colorClass:s})=>{const n=e>0?Math.min(100,t/e*100):0;return l.jsx("div",{className:"h-1.5 w-full bg-surface2 rounded-full overflow-hidden flex",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${s}`,style:{width:`${n}%`}})})};function TC({netCost:t,importKwh:e,exportKwh:s}){const[n,i]=ea.useState("today"),[r,a]=ea.useState(null),[o,c]=ea.useState(!1);ea.useEffect(()=>{let p=!1;return c(!0),G.energyRange(n).then(g=>{p||a({import_cost_sek:g.import_cost_sek,export_revenue_sek:g.export_revenue_sek,grid_charge_cost_sek:g.grid_charge_cost_sek,self_consumption_savings_sek:g.self_consumption_savings_sek,net_cost_sek:g.net_cost_sek,grid_import_kwh:g.grid_import_kwh,grid_export_kwh:g.grid_export_kwh,slot_count:g.slot_count})}).catch(()=>{p||a(null)}).finally(()=>{p||c(!1)}),()=>{p=!0}},[n]);const d=r?.net_cost_sek??t,u=r?.grid_import_kwh??e,h=r?.grid_export_kwh??s,f=(d??0)<=0,m=[{key:"today",label:"Today"},{key:"yesterday",label:"Yesterday"},{key:"week",label:"7 Days"},{key:"month",label:"30 Days"}];return l.jsxs(re,{className:"p-4 flex flex-col h-full relative overflow-hidden group",children:[l.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${f?"bg-good":"bg-bad"}`}),l.jsxs("div",{className:"flex items-center gap-2 mb-2 relative z-10",children:[l.jsx("div",{className:`p-1.5 rounded-lg ${f?"bg-good/10 text-good":"bg-bad/10 text-bad"}`,children:l.jsx(Lp,{className:"h-4 w-4"})}),l.jsx("span",{className:"text-sm font-medium text-text",children:"Grid & Financial"})]}),l.jsx("div",{className:"flex gap-1 mb-2 relative z-10",children:m.map(p=>l.jsx("button",{onClick:()=>i(p.key),className:`px-2 py-0.5 text-[9px] font-medium rounded-full transition ${n===p.key?"bg-accent/20 text-accent border border-accent/30":"bg-surface2/50 text-muted border border-line/30 hover:border-accent/50"}`,children:p.label},p.key))}),l.jsxs("div",{className:"mb-3 relative z-10",children:[l.jsxs("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-0.5",children:["Net"," ",n==="today"?"Daily":n==="yesterday"?"Yesterday":n==="week"?"7 Day":"30 Day"," ","Cost"]}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:`text-2xl font-bold ${o?"opacity-50":""} ${f?"text-good":"text-bad"}`,children:d!=null?Math.abs(d).toFixed(2):""}),l.jsx("span",{className:"text-xs text-muted",children:"kr"}),d!==null&&!o&&l.jsx("span",{className:`text-[10px] ml-2 px-1.5 py-0.5 rounded ${f?"bg-good/10 text-good":"bg-bad/10 text-bad"}`,children:d>0?"COST":"EARNING"})]})]}),r&&l.jsxs("div",{className:"grid grid-cols-2 gap-1.5 mb-2 relative z-10 text-[10px]",children:[l.jsxs("div",{className:"flex justify-between p-1.5 rounded bg-surface2/30",children:[l.jsx("span",{className:"text-muted",children:"Import Cost"}),l.jsxs("span",{className:"text-bad font-medium",children:[r.import_cost_sek.toFixed(1)," kr"]})]}),l.jsxs("div",{className:"flex justify-between p-1.5 rounded bg-surface2/30",children:[l.jsx("span",{className:"text-muted",children:"Export Rev"}),l.jsxs("span",{className:"text-good font-medium",children:[r.export_revenue_sek.toFixed(1)," kr"]})]}),l.jsxs("div",{className:"flex justify-between p-1.5 rounded bg-surface2/30",children:[l.jsx("span",{className:"text-muted",children:"Grid Charge"}),l.jsxs("span",{className:"text-bad font-medium",children:[r.grid_charge_cost_sek.toFixed(1)," kr"]})]}),l.jsxs("div",{className:"flex justify-between p-1.5 rounded bg-surface2/30",children:[l.jsx("span",{className:"text-muted",children:"Self-Use Saved"}),l.jsxs("span",{className:"text-accent font-medium",children:[r.self_consumption_savings_sek.toFixed(1)," kr"]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-auto relative z-10",children:[l.jsxs("div",{className:"p-2 rounded-lg bg-surface2/40 border border-line/30",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-bad mb-1",children:[l.jsx(Xc,{className:"h-3 w-3"}),l.jsx("span",{className:"text-[10px]",children:"Import"})]}),l.jsxs("div",{className:`text-lg font-semibold text-text ${o?"opacity-50":""}`,children:[u?.toFixed(1)??""," ",l.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]}),l.jsxs("div",{className:"p-2 rounded-lg bg-surface2/40 border border-line/30",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-good mb-1",children:[l.jsx(Zc,{className:"h-3 w-3"}),l.jsx("span",{className:"text-[10px]",children:"Export"})]}),l.jsxs("div",{className:`text-lg font-semibold text-text ${o?"opacity-50":""}`,children:[h?.toFixed(1)??""," ",l.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]})]})]})}function CC({pvActual:t,pvForecast:e,loadActual:s,loadAvg:n,waterKwh:i,batteryCapacity:r}){return l.jsxs(re,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-amber-500/[0.01]"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[l.jsx("div",{className:"p-1.5 rounded-lg bg-accent/10 text-accent",children:l.jsx(Dt,{className:"h-4 w-4"})}),l.jsx("span",{className:"text-sm font-medium text-text",children:"Energy Resources"}),r!=null&&r>0&&l.jsxs("span",{className:"ml-auto text-[9px] text-muted opacity-60",children:[r," kWh Cap"]})]}),l.jsxs("div",{className:"space-y-4 relative z-10",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-accent",children:[l.jsx(Dr,{className:"h-3 w-3"}),l.jsx("span",{children:"Solar Production"})]}),l.jsxs("div",{className:"text-[10px] text-muted",children:[l.jsx("span",{className:"text-text font-medium",children:t?.toFixed(1)??""}),l.jsx("span",{className:"mx-1",children:"/"}),e?.toFixed(1)??""," kWh"]})]}),l.jsx(np,{value:t??0,total:e??1,colorClass:"bg-accent"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-house",children:[l.jsx(ni,{className:"h-3 w-3"}),l.jsx("span",{children:"House Load"})]}),l.jsxs("div",{className:"text-[10px] text-muted",children:[l.jsx("span",{className:"text-text font-medium",children:s?.toFixed(1)??""}),l.jsx("span",{className:"mx-1",children:"/"}),n?.toFixed(1)??""," kWh"]})]}),l.jsx(np,{value:s??0,total:n??1,colorClass:"bg-house"})]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-line/30",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-water",children:[l.jsx(hr,{className:"h-3 w-3"}),l.jsx("span",{children:"Water Heating"})]}),l.jsxs("div",{className:"text-sm font-medium text-text",children:[i?.toFixed(1)??""," ",l.jsx("span",{className:"text-[10px] text-muted font-normal",children:"kWh"})]})]})]})]})}function PC({soc:t,socTarget:e,sIndex:s,cycles:n,riskLabel:i}){return l.jsxs(re,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-ai/[0.01]"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 relative z-10",children:[l.jsx("div",{className:"p-1.5 rounded-lg bg-ai/10 text-ai",children:l.jsx(za,{className:"h-4 w-4"})}),l.jsx("span",{className:"text-sm font-medium text-text",children:"Battery & Strategy"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[l.jsxs("div",{className:"col-span-2 flex items-center gap-3 p-3 rounded-xl bg-surface2/30 border border-line/30",children:[l.jsx(yo,{className:`h-8 w-8 ${(t??0)>50?"text-good":(t??0)>20?"text-warn":"text-bad"}`}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-bold text-text",children:[t?.toFixed(0)??"","%"]}),l.jsx("div",{className:"text-[10px] text-muted",children:e!=null?`Targeting ${e.toFixed(0)}%`:"Current SoC"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-1",children:"S-Index"}),l.jsx("div",{className:"text-lg font-semibold text-text",children:s?`x${s.toFixed(2)}`:""}),l.jsx("div",{className:"text-[10px] text-ai/80",children:"Strategy Factor"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider mb-1",children:"Cycles"}),l.jsx("div",{className:"text-lg font-semibold text-text",children:n?.toFixed(1)??""}),l.jsx("div",{className:"text-[10px] text-muted",children:i||"Daily usage"})]})]})]})}function DC({comfortLevel:t,setComfortLevel:e,riskAppetite:s,setRiskAppetite:n,vacationMode:i,onWaterBoost:r,onBatteryTopUp:a}){return l.jsx(re,{className:"p-4 flex flex-col h-full relative overflow-hidden",children:l.jsxs("div",{className:"space-y-3 relative z-10",children:[l.jsxs("div",{className:"metric-card-border metric-card-border-house bg-surface2/30 p-3 overflow-hidden group",children:[l.jsxs("div",{className:"flex justify-between items-baseline mb-2 pl-3",children:[l.jsxs("div",{className:"text-[10px] text-muted uppercase tracking-wider flex items-center gap-2",children:[l.jsx("span",{children:"Market Strategy"}),l.jsx("div",{className:`h-1.5 w-1.5 rounded-full transition-colors ${s>3?"bg-purple-400 shadow-[0_0_5px_rgba(192,132,252,0.8)]":s<2?"bg-emerald-400":"bg-blue-400"}`})]}),l.jsx("div",{className:"text-xs font-medium text-text",children:{1:"Safety",2:"Conservative",3:"Neutral",4:"Aggressive",5:"Gambler"}[s]||"Unknown"})]}),l.jsx("div",{className:"flex gap-1 h-8 pl-3",children:[1,2,3,4,5].map(o=>{const c={1:"bg-good text-[#100f0e] border-good shadow-[0_0_10px_rgba(var(--color-good),0.4)]",2:"bg-night text-[#100f0e] border-night shadow-[0_0_10px_rgba(var(--color-night),0.4)]",3:"bg-water text-[#100f0e] border-water shadow-[0_0_10px_rgba(var(--color-water),0.4)]",4:"bg-warn text-[#100f0e] border-warn shadow-[0_0_10px_rgba(var(--color-warn),0.4)]",5:"bg-ai text-[#100f0e] border-ai shadow-[0_0_10px_rgba(var(--color-ai),0.4)]"},d=s===o;return l.jsx("button",{onClick:()=>n(o),className:`flex-1 rounded transition-all duration-300 border text-xs font-medium ${d?`${c[o]} ring-1 ring-inset ring-white/5`:"bg-surface2/50 text-muted hover:bg-surface2 hover:text-text border-transparent hover:border-line/50"}`,children:o},o)})})]}),l.jsxs("div",{className:"metric-card-border metric-card-border-water bg-surface2/30 p-3 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 pl-3",children:[l.jsxs("div",{className:"text-[10px] text-muted uppercase tracking-wider flex items-center gap-2",children:[l.jsx("span",{children:"Water Comfort"}),i&&l.jsx("span",{className:"text-[9px] text-amber-300 bg-amber-500/20 px-1.5 rounded animate-pulse",children:"Vacation"})]}),l.jsx("div",{className:"text-xs font-medium text-text",children:{1:"Economy",2:"Balanced",3:"Neutral",4:"Priority",5:"Maximum"}[t]||"Unknown"})]}),l.jsx("div",{className:"flex gap-1 h-8 pl-3",children:[1,2,3,4,5].map(o=>{const c={1:"bg-good text-[#100f0e] border-good shadow-[0_0_10px_rgba(var(--color-good),0.4)]",2:"bg-night text-[#100f0e] border-night shadow-[0_0_10px_rgba(var(--color-night),0.4)]",3:"bg-water text-[#100f0e] border-water shadow-[0_0_10px_rgba(var(--color-water),0.4)]",4:"bg-warn text-[#100f0e] border-warn shadow-[0_0_10px_rgba(var(--color-warn),0.4)]",5:"bg-bad text-[#100f0e] border-bad shadow-[0_0_10px_rgba(var(--color-bad),0.4)]"},d=t===o;return l.jsx("button",{onClick:()=>e(o),className:`flex-1 rounded transition-all duration-300 border text-xs font-medium ${d?`${c[o]} ring-1 ring-inset ring-white/5`:"bg-surface2/50 text-muted hover:bg-surface2 hover:text-text border-transparent hover:border-line/50"}`,children:o},o)})})]}),l.jsxs("div",{className:"metric-card-border metric-card-border-muted bg-surface2/30 p-2 flex gap-2",children:[l.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-surface hover:bg-surface2 border border-line/30 transition-all group ml-3",children:[l.jsx("div",{className:"p-1 rounded-full bg-orange-500/10 text-orange-400 group-hover:bg-orange-500/20 transition-colors",children:l.jsx(Fp,{className:"h-3.5 w-3.5"})}),l.jsx("span",{className:"text-[10px] font-medium text-text",children:"Boost Water (1h)"})]}),l.jsxs("button",{onClick:a,className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-surface hover:bg-surface2 border border-line/30 transition-all group",children:[l.jsx("div",{className:"p-1 rounded-full bg-good/10 text-good group-hover:bg-good/20 transition-colors",children:l.jsx(ur,{className:"h-3.5 w-3.5"})}),l.jsx("span",{className:"text-[10px] font-medium text-text",children:"Top Up 50%"})]})]})]})})}const rs=Object.create(null);rs.open="0";rs.close="1";rs.ping="2";rs.pong="3";rs.message="4";rs.upgrade="5";rs.noop="6";const Ea=Object.create(null);Object.keys(rs).forEach(t=>{Ea[rs[t]]=t});const Rc={type:"error",data:"parser error"},Ly=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Fy=typeof ArrayBuffer=="function",Iy=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,su=({type:t,data:e},s,n)=>Ly&&e instanceof Blob?s?n(e):ip(e,n):Fy&&(e instanceof ArrayBuffer||Iy(e))?s?n(e):ip(new Blob([e]),n):n(rs[t]+(e||"")),ip=(t,e)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];e("b"+(n||""))},s.readAsDataURL(t)};function rp(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Vl;function EC(t,e){if(Ly&&t.data instanceof Blob)return t.data.arrayBuffer().then(rp).then(e);if(Fy&&(t.data instanceof ArrayBuffer||Iy(t.data)))return e(rp(t.data));su(t,!1,s=>{Vl||(Vl=new TextEncoder),e(Vl.encode(s))})}const ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ji=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<ap.length;t++)Ji[ap.charCodeAt(t)]=t;const AC=t=>{let e=t.length*.75,s=t.length,n,i=0,r,a,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),u=new Uint8Array(d);for(n=0;n<s;n+=4)r=Ji[t.charCodeAt(n)],a=Ji[t.charCodeAt(n+1)],o=Ji[t.charCodeAt(n+2)],c=Ji[t.charCodeAt(n+3)],u[i++]=r<<2|a>>4,u[i++]=(a&15)<<4|o>>2,u[i++]=(o&3)<<6|c&63;return d},OC=typeof ArrayBuffer=="function",nu=(t,e)=>{if(typeof t!="string")return{type:"message",data:Vy(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:RC(t.substring(1),e)}:Ea[s]?t.length>1?{type:Ea[s],data:t.substring(1)}:{type:Ea[s]}:Rc},RC=(t,e)=>{if(OC){const s=AC(t);return Vy(s,e)}else return{base64:!0,data:t}},Vy=(t,e)=>e==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,Wy="",LC=(t,e)=>{const s=t.length,n=new Array(s);let i=0;t.forEach((r,a)=>{su(r,!1,o=>{n[a]=o,++i===s&&e(n.join(Wy))})})},FC=(t,e)=>{const s=t.split(Wy),n=[];for(let i=0;i<s.length;i++){const r=nu(s[i],e);if(n.push(r),r.type==="error")break}return n};function IC(){return new TransformStream({transform(t,e){EC(t,s=>{const n=s.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(s)})}})}let Wl;function wa(t){return t.reduce((e,s)=>e+s.length,0)}function ka(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)s[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),s}function VC(t,e){Wl||(Wl=new TextDecoder);const s=[];let n=0,i=-1,r=!1;return new TransformStream({transform(a,o){for(s.push(a);;){if(n===0){if(wa(s)<1)break;const c=ka(s,1);r=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(wa(s)<2)break;const c=ka(s,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(wa(s)<8)break;const c=ka(s,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(Rc);break}i=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(wa(s)<i)break;const c=ka(s,i);o.enqueue(nu(r?c:Wl.decode(c),e)),n=0}if(i===0||i>t){o.enqueue(Rc);break}}}})}const By=4;function qe(t){if(t)return WC(t)}function WC(t){for(var e in qe.prototype)t[e]=qe.prototype[e];return t}qe.prototype.on=qe.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};qe.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};qe.prototype.off=qe.prototype.removeListener=qe.prototype.removeAllListeners=qe.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<s.length;i++)if(n=s[i],n===e||n.fn===e){s.splice(i,1);break}return s.length===0&&delete this._callbacks["$"+t],this};qe.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,i=s.length;n<i;++n)s[n].apply(this,e)}return this};qe.prototype.emitReserved=qe.prototype.emit;qe.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};qe.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Ro=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),Ct=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),BC="arraybuffer";function zy(t,...e){return e.reduce((s,n)=>(t.hasOwnProperty(n)&&(s[n]=t[n]),s),{})}const zC=Ct.setTimeout,HC=Ct.clearTimeout;function Lo(t,e){e.useNativeTimers?(t.setTimeoutFn=zC.bind(Ct),t.clearTimeoutFn=HC.bind(Ct)):(t.setTimeoutFn=Ct.setTimeout.bind(Ct),t.clearTimeoutFn=Ct.clearTimeout.bind(Ct))}const $C=1.33;function YC(t){return typeof t=="string"?UC(t):Math.ceil((t.byteLength||t.size)*$C)}function UC(t){let e=0,s=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}function Hy(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function GC(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function qC(t){let e={},s=t.split("&");for(let n=0,i=s.length;n<i;n++){let r=s[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class KC extends Error{constructor(e,s,n){super(e),this.description=s,this.context=n,this.type="TransportError"}}class iu extends qe{constructor(e){super(),this.writable=!1,Lo(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,n){return super.emitReserved("error",new KC(e,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=nu(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=GC(e);return s.length?"?"+s:""}}class XC extends iu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};FC(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,LC(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=Hy()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let $y=!1;try{$y=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ZC=$y;function JC(){}class QC extends XC{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,s){const n=this.request({method:"POST",data:e});n.on("success",s),n.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=e}}class is extends qe{constructor(e,s,n){super(),this.createRequest=e,Lo(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const s=zy(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=is.requestsCount++,is.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=JC,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete is.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}is.requestsCount=0;is.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",op);else if(typeof addEventListener=="function"){const t="onpagehide"in Ct?"pagehide":"unload";addEventListener(t,op,!1)}}function op(){for(let t in is.requests)is.requests.hasOwnProperty(t)&&is.requests[t].abort()}const eP=(function(){const t=Yy({xdomain:!1});return t&&t.responseType!==null})();class tP extends QC{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=eP&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new is(Yy,this.uri(),e)}}function Yy(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||ZC))return new XMLHttpRequest}catch{}if(!e)try{return new Ct[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Uy=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class sP extends iu{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,n=Uy?{}:zy(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;su(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}i&&Ro(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=Hy()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const Bl=Ct.WebSocket||Ct.MozWebSocket;class nP extends sP{createSocket(e,s,n){return Uy?new Bl(e,s,n):s?new Bl(e,s):new Bl(e)}doWrite(e,s){this.ws.send(s)}}class iP extends iu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=VC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(s).getReader(),i=IC();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then(({done:o,value:c})=>{o||(this.onPacket(c),r())}).catch(o=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;this._writer.write(n).then(()=>{i&&Ro(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const rP={websocket:nP,webtransport:iP,polling:tP},aP=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lc(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let i=aP.exec(t||""),r={},a=14;for(;a--;)r[oP[a]]=i[a]||"";return s!=-1&&n!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=lP(r,r.path),r.queryKey=cP(r,r.query),r}function lP(t,e){const s=/\/{2,9}/g,n=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function cP(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,r){i&&(s[i]=r)}),s}const Fc=typeof addEventListener=="function"&&typeof removeEventListener=="function",Aa=[];Fc&&addEventListener("offline",()=>{Aa.forEach(t=>t())},!1);class Us extends qe{constructor(e,s){if(super(),this.binaryType=BC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const n=Lc(e);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Lc(s.host).host);Lo(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=qC(this.opts.query)),Fc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Aa.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=By,s.transport=e,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Us.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Us.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(s+=YC(i)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ro(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,n){return this._sendPacket("message",e,s,n),this}send(e,s,n){return this._sendPacket("message",e,s,n),this}_sendPacket(e,s,n,i){if(typeof s=="function"&&(i=s,s=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:e,data:s,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Us.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Aa.indexOf(this._offlineEventListener);n!==-1&&Aa.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}Us.protocol=By;class dP extends Us{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),n=!1;Us.priorWebsocketSuccess=!1;const i=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Us.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=s.name,this.emitReserved("upgradeError",f)}}))};function r(){n||(n=!0,u(),s.close(),s=null)}const a=h=>{const f=new Error("probe error: "+h);f.transport=s.name,r(),this.emitReserved("upgradeError",f)};function o(){a("transport closed")}function c(){a("socket closed")}function d(h){s&&h.name!==s.name&&r()}const u=()=>{s.removeListener("open",i),s.removeListener("error",a),s.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};s.once("open",i),s.once("error",a),s.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&s.push(e[n]);return s}}let uP=class extends dP{constructor(e,s={}){const n=typeof e=="object"?e:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>rP[i]).filter(i=>!!i)),super(e,n)}};function hP(t,e="",s){let n=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),n=Lc(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(s&&s.port===n.port?"":":"+n.port),n}const fP=typeof ArrayBuffer=="function",mP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Gy=Object.prototype.toString,pP=typeof Blob=="function"||typeof Blob<"u"&&Gy.call(Blob)==="[object BlobConstructor]",gP=typeof File=="function"||typeof File<"u"&&Gy.call(File)==="[object FileConstructor]";function ru(t){return fP&&(t instanceof ArrayBuffer||mP(t))||pP&&t instanceof Blob||gP&&t instanceof File}function Oa(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(Oa(t[s]))return!0;return!1}if(ru(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Oa(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Oa(t[s]))return!0;return!1}function xP(t){const e=[],s=t.data,n=t;return n.data=Ic(s,e),n.attachments=e.length,{packet:n,buffers:e}}function Ic(t,e){if(!t)return t;if(ru(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=Ic(t[n],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=Ic(t[n],e));return s}return t}function yP(t,e){return t.data=Vc(t.data,e),delete t.attachments,t}function Vc(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Vc(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Vc(t[s],e));return t}const qy=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],bP=5;var ue;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ue||(ue={}));class vP{constructor(e){this.replacer=e}encode(e){return(e.type===ue.EVENT||e.type===ue.ACK)&&Oa(e)?this.encodeAsBinary({type:e.type===ue.EVENT?ue.BINARY_EVENT:ue.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===ue.BINARY_EVENT||e.type===ue.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=xP(e),n=this.encodeAsString(s.packet),i=s.buffers;return i.unshift(n),i}}class au extends qe{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const n=s.type===ue.BINARY_EVENT;n||s.type===ue.BINARY_ACK?(s.type=n?ue.EVENT:ue.ACK,this.reconstructor=new _P(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(ru(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const n={type:Number(e.charAt(0))};if(ue[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===ue.BINARY_EVENT||n.type===ue.BINARY_ACK){const r=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const a=e.substring(r,s);if(a!=Number(a)||e.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(s+1)==="/"){const r=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););n.nsp=e.substring(r,s)}else n.nsp="/";const i=e.charAt(s+1);if(i!==""&&Number(i)==i){const r=s+1;for(;++s;){const a=e.charAt(s);if(a==null||Number(a)!=a){--s;break}if(s===e.length)break}n.id=Number(e.substring(r,s+1))}if(e.charAt(++s)){const r=this.tryParse(e.substr(s));if(au.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case ue.CONNECT:return lo(s);case ue.DISCONNECT:return s===void 0;case ue.CONNECT_ERROR:return typeof s=="string"||lo(s);case ue.EVENT:case ue.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&qy.indexOf(s[0])===-1);case ue.ACK:case ue.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _P{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=yP(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function wP(t){return typeof t=="string"}const kP=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function SP(t){return t===void 0||kP(t)}function lo(t){return Object.prototype.toString.call(t)==="[object Object]"}function jP(t,e){switch(t){case ue.CONNECT:return e===void 0||lo(e);case ue.DISCONNECT:return e===void 0;case ue.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&qy.indexOf(e[0])===-1);case ue.ACK:return Array.isArray(e);case ue.CONNECT_ERROR:return typeof e=="string"||lo(e);default:return!1}}function NP(t){return wP(t.nsp)&&SP(t.id)&&jP(t.type,t.data)}const MP=Object.freeze(Object.defineProperty({__proto__:null,Decoder:au,Encoder:vP,get PacketType(){return ue},isPacketValid:NP,protocol:bP},Symbol.toStringTag,{value:"Module"}));function Wt(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const TP=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ky extends qe{constructor(e,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Wt(e,"open",this.onopen.bind(this)),Wt(e,"packet",this.onpacket.bind(this)),Wt(e,"error",this.onerror.bind(this)),Wt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var n,i,r;if(TP.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const a={type:ue.EVENT,data:s};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const u=this.ids++,h=s.pop();this._registerAckCallback(u,h),a.id=u}const o=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,s){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=s;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);s.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(r),s.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...s){return new Promise((n,i)=>{const r=(a,o)=>a?i(a):n(o);r.withError=!0,s.push(r),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>(this._queue[0],i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(i)):(this._queue.shift(),s&&s(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ue.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ue.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ue.EVENT:case ue.BINARY_EVENT:this.onevent(e);break;case ue.ACK:case ue.BINARY_ACK:this.onack(e);break;case ue.DISCONNECT:this.ondisconnect();break;case ue.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let n=!1;return function(...i){n||(n=!0,s.packet({type:ue.ACK,id:e,data:i}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ue.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,e.data)}}}function yi(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}yi.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};yi.prototype.reset=function(){this.attempts=0};yi.prototype.setMin=function(t){this.ms=t};yi.prototype.setMax=function(t){this.max=t};yi.prototype.setJitter=function(t){this.jitter=t};class Wc extends qe{constructor(e,s){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Lo(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new yi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const i=s.parser||MP;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new uP(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Wt(s,"open",function(){n.onopen(),e&&e()}),r=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=Wt(s,"error",r);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),s.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Wt(e,"ping",this.onping.bind(this)),Wt(e,"data",this.ondata.bind(this)),Wt(e,"error",this.onerror.bind(this)),Wt(e,"close",this.onclose.bind(this)),Wt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){Ro(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ky(this,e,s),this.nsps[e]=n),n}_destroy(e){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let n=0;n<s.length;n++)this.engine.write(s[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ii={};function Ra(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=hP(t,e.path||"/socket.io"),n=s.source,i=s.id,r=s.path,a=Ii[i]&&r in Ii[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new Wc(n,e):(Ii[i]||(Ii[i]=new Wc(n,e)),c=Ii[i]),s.query&&!e.query&&(e.query=s.queryKey),c.socket(s.path,e)}Object.assign(Ra,{Manager:Wc,Socket:Ky,io:Ra,connect:Ra});let Bn=null;const CP=()=>{if(!Bn){let t=window.location.pathname;t.endsWith("/")||(t=t.substring(0,t.lastIndexOf("/")+1));const e=(t+"socket.io").replace(/\/\//g,"/");console.log(` WebSocket initializing at path: ${e}`),Bn=Ra({path:e,transports:["polling","websocket"],autoConnect:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),Bn.on("connect",()=>{console.log(" Connected to Darkstar WebSocket")}),Bn.on("disconnect",s=>{console.warn(" Disconnected from Darkstar WebSocket:",s)}),Bn.on("connect_error",s=>{console.error(" WebSocket connection error:",s)})}return Bn},Xn=(t,e)=>{y.useEffect(()=>{const s=CP();return s.on(t,e),()=>{s.off(t,e)}},[t,e])};function lp(t){if(!t)return"";const e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${e}-${s}-${n} ${i}:${r}`}function PP(){const[t,e]=y.useState(null),[s,n]=y.useState(!1),[i,r]=y.useState(null),[a,o]=y.useState(0),[c,d]=y.useState(null),[u,h]=y.useState(!1),[f,m]=y.useState(null),[p,g]=y.useState(null),[x,v]=y.useState(null),[_,S]=y.useState(null),[N,j]=y.useState(null),[k,T]=y.useState(null),[M,P]=y.useState(null),[O,A]=y.useState(null),[I,X]=y.useState("local"),[U,K]=y.useState(0),[J,q]=y.useState(null),[de,B]=y.useState(0),[ae,Ne]=y.useState(null),[Te,he]=y.useState(0),[D,R]=y.useState(!1),[W,oe]=y.useState(!1),[le,_e]=y.useState(""),[Fe,xt]=y.useState(1),[H,we]=y.useState([]),[Ae,Ut]=y.useState({});Xn("live_metrics",z=>{console.log(" live_metrics received:",z),z.soc!==void 0&&e(z.soc),Ut(xe=>({...xe,pv_kw:z.pv_kw??xe.pv_kw,load_kw:z.load_kw??xe.load_kw,battery_kw:z.battery_kw??xe.battery_kw,grid_kw:z.grid_kw??xe.grid_kw,water_kw:z.water_kw??xe.water_kw}))}),Xn("plan_updated",()=>{console.log(" Plan updated! Refreshing data..."),Ke()}),Xn("executor_status",z=>{j({shadow_mode:z.shadow_mode??!1,paused:z.paused??null})}),Xn("ha_entity_change",z=>{if(z.entity_id===le){const xe=z.state==="on";oe(xe)}}),y.useEffect(()=>{const z=async()=>{try{const xe=await G.config();if(xe){const We=xe.water_heating?.vacation_mode;R(We?.enabled||!1)}}catch(xe){console.log("Failed to reload vacation mode:",xe)}};return window.addEventListener("config-updated",z),()=>window.removeEventListener("config-updated",z)},[]);const it=y.useCallback(z=>{X(z)},[]),fe=y.useCallback(z=>{if(!z||z.length===0){we([]);return}G.scheduleTodayWithHistory().then(xe=>{const We=xe.slots??[],Xe=new Map;We.forEach(kt=>{kt.start_time&&Xe.set(String(kt.start_time),kt)});const Rn=z.map(kt=>{const cs=kt.start_time,Lt=cs?Xe.get(String(cs)):void 0;if(!Lt)return kt;const Ft={...kt};return Lt.soc_actual_percent!=null&&(Ft.soc_actual_percent=Lt.soc_actual_percent),Lt.is_executed===!0&&(Ft.is_executed=!0),Ft});we(Rn)}).catch(xe=>{console.error("Failed to merge history into server schedule:",xe),we(z??[])}).finally(()=>{})},[]),Ke=y.useCallback(async()=>{n(!0);try{const[z,xe,We,Xe,,Rn,kt,cs,Lt,Ft,Ln]=await Promise.allSettled([G.status(),G.config(),G.haAverage(),G.schedule(),G.learningStatus(),G.schedulerStatus(),G.energyToday(),G.haWaterToday(),G.aurora.dashboard(),G.executor.status(),G.scheduleTodayWithHistory()]);if(z.status==="fulfilled"){const te=z.value;te.soc_percent!=null?e(te.soc_percent):te.current_soc?.value!=null&&e(te.current_soc.value)}let on=0;if(Lt.status==="fulfilled"&&Lt.value?.horizon?.slots){const yt=new Date().toISOString().split("T")[0];on=Lt.value.horizon.slots.filter(qt=>qt.slot_start.startsWith(yt)).reduce((qt,ji)=>qt+(ji.final?.pv_kwh||0),0)}if(xe.status==="fulfilled"){const te=xe.value,yt=te.s_index;typeof yt?.risk_appetite=="number"&&xt(yt.risk_appetite),te.battery?.capacity_kwh!=null?K(te.battery.capacity_kwh):te.system?.battery?.capacity_kwh!=null&&K(te.system.battery.capacity_kwh),te.automation?d({enable_scheduler:te.automation.enable_scheduler,write_to_mariadb:te.automation.write_to_mariadb,external_executor_mode:te.automation.external_executor_mode,every_minutes:te.automation.schedule?.every_minutes??null}):d(null),te.water_heating&&(typeof te.water_heating.comfort_level=="number"&&he(te.water_heating.comfort_level),typeof te.water_heating.vacation_mode?.enabled=="boolean"&&R(te.water_heating.vacation_mode.enabled)),te.input_sensors?.vacation_mode&&(_e(te.input_sensors.vacation_mode),G.haEntityState(te.input_sensors.vacation_mode).then(qt=>{oe(qt.state==="on")}).catch(()=>oe(!1)))}else console.error("Failed to load config:",xe.reason);if(We.status==="fulfilled"&&q({kw:We.value.average_load_kw??0,dailyKwh:We.value.daily_kwh??0}),Xe.status==="fulfilled"&&Xe.value){const te=Xe.value;g(te.schedule??[]),te.meta&&P({planned_at:te.meta.planned_at,planner_version:te.meta.planner_version,s_index:te.meta.s_index}),te.meta?.last_error?S({message:te.meta.last_error,at:te.meta.last_error_at||""}):S(null);const yt=new Date,qt=(te.schedule??[]).find(ji=>{const qr=new Date(ji.start_time||""),Fn=new Date(qr.getTime()+1800*1e3);return yt>=qr&&yt<Fn});qt?.soc_target_percent!==void 0&&B(qt.soc_target_percent)}if(cs.status==="fulfilled"&&Ne({kwh:cs.value.water_kwh_today??0,source:cs.value.source??"unknown"}),Rn.status==="fulfilled"){const te=Rn.value;m({last_run_at:te.last_run_at??null,last_run_status:te.last_run_status??null,next_run_at:te.next_run_at??null})}if(Ln.status==="fulfilled"&&(v(Ln.value.slots??[]),on===0&&Ln.value.slots)){const te=new Date;te.setHours(0,0,0,0),Ln.value.slots.forEach(yt=>{new Date(yt.start_time)>=te&&(on+=yt.pv_forecast_kwh??0)})}if(Ft.status==="fulfilled"&&j({shadow_mode:Ft.value.shadow_mode??!1,paused:Ft.value.paused??null}),kt.status==="fulfilled"){const te=kt.value;T({gridImport:te.grid_import_kwh??null,gridExport:te.grid_export_kwh??null,batteryCycles:te.battery_cycles??null,pvProduction:te.pv_production_kwh??null,pvForecast:on>0?parseFloat(on.toFixed(1)):null,loadConsumption:te.load_consumption_kwh??null,netCost:te.net_cost_kr??null})}r(new Date)}catch(z){console.error("Error fetching dashboard data:",z)}finally{n(!1),o(z=>z+1)}},[]);y.useEffect(()=>{let z=null;I==="server"?z=null:z=M,A(z)},[I,M]),y.useEffect(()=>{Ke()},[Ke]);const $r=async()=>{if(u)return;const xe=!(c?.enable_scheduler??!1);h(!0);try{await G.configSave({automation:{enable_scheduler:xe}}),d(We=>({enable_scheduler:xe,write_to_mariadb:We?.write_to_mariadb,external_executor_mode:We?.external_executor_mode,every_minutes:We?.every_minutes??null}))}catch(We){console.error("Failed to toggle planner automation:",We)}finally{h(!1)}},[nn,tt]=y.useState(!1),[Yr,Gt]=y.useState(null),Xo=async()=>{tt(!0),Gt(null);try{const z=await G.loadServerPlan();fe(z.schedule??[]),it("server"),Gt({type:"success",message:"Plan loaded from DB"})}catch(z){Gt({type:"error",message:z instanceof Error?z.message:"Load failed"})}finally{tt(!1),setTimeout(()=>Gt(null),3e3)}},Zo=async()=>{tt(!0),Gt(null);try{await G.pushToDb(),Gt({type:"success",message:"Plan pushed to DB"}),Ke()}catch(z){Gt({type:"error",message:z instanceof Error?z.message:"Push failed"})}finally{tt(!1),setTimeout(()=>Gt(null),3e3)}};let As;if(I==="server"&&H&&H.length>0)As=H;else if(I==="local"&&p&&p.length>0){const z=p.filter(xe=>_d(xe.start_time)||eo(xe.start_time));if(x&&x.length>0){const xe=z.filter(We=>eo(We.start_time));As=[...x,...xe]}else As=z}const On=new Date;let wi=I==="server"?"Server Plan":"Local Plan";O?.planned_at&&(wi=`Generated ${new Date(O.planned_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`);let ki="";if(As){const z=As.find(xe=>{const We=new Date(xe.start_time),Xe=new Date(We.getTime()+1800*1e3);return On>=We&&On<Xe});if(z){const xe=new Date(new Date(z.start_time).getTime()+18e5),We=Math.max(0,Math.floor((xe.getTime()-On.getTime())/6e4));let Xe="Idle";(z.charge_kw||0)>.1?Xe=`Charge ${z.charge_kw?.toFixed(1)}kW`:(z.discharge_kw||0)>.1?Xe=`Discharge ${z.discharge_kw?.toFixed(1)}kW`:(z.export_kwh||0)>.1?Xe=`Export ${z.export_kwh?.toFixed(1)}kWh`:(z.water_heating_kw||0)>.1&&(Xe="Heat Water"),ki=`  Next: ${Xe} (${We}m)`}}const Ur=`${wi}${ki}`,rn=f?.last_run_at||M?.planned_at,an=rn?new Date(rn):null,Gr=c?.every_minutes&&c.every_minutes>0?c.every_minutes:null;let Si=null;return f?.next_run_at?Si=new Date(f.next_run_at):c?.enable_scheduler&&an&&Gr&&(Si=new Date(an.getTime()+Gr*60*1e3)),l.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-6 sm:px-6 lg:pt-10 space-y-6",children:[_&&l.jsx(Ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-error p-4",children:l.jsxs("div",{className:"flex items-start justify-between gap-4 w-full",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 font-semibold text-sm mb-1",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Planner Error"})]}),l.jsx("div",{className:"opacity-80 text-xs",children:_.message}),_.at&&l.jsx("div",{className:"opacity-60 text-[10px] mt-1",children:new Date(_.at).toLocaleString()})]}),l.jsx("button",{onClick:()=>S(null),className:"opacity-60 hover:opacity-100 text-xs px-2 py-1",title:"Dismiss",children:""})]})}),N?.shadow_mode&&l.jsxs(Ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-purple px-4 py-3",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"font-medium",children:"Shadow Mode Active"}),l.jsx("span",{className:"opacity-70 text-xs ml-2",children:" Actions logged but not executed on Home Assistant"})]}),N?.paused&&l.jsxs(Ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-warning px-4 py-3",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"font-medium",children:"Executor Paused (Idle Mode)"}),N.paused.paused_minutes!==void 0&&l.jsxs("span",{className:"opacity-70 text-xs ml-2",children:[" Paused for ",N.paused.paused_minutes," minutes"]})]}),(D||W)&&l.jsxs(Ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"banner banner-warning px-4 py-3",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"font-medium",children:"Vacation Mode Active"}),l.jsx("span",{className:"opacity-70 text-xs ml-2",children:" Water heating is disabled"})]}),l.jsx(Ue.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:l.jsx(ax,{useHistoryForToday:I==="local",refreshToken:a,slotsOverride:As,range:"48h",showDayToggle:!0})}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3 items-stretch",children:[l.jsx(Ue.div,{className:"h-full flex flex-col gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:l.jsx("div",{className:"flex-1 min-h-0",children:l.jsx(NC,{powerFlowData:{solar:{kw:Ae.pv_kw??0,todayKwh:k?.pvProduction??void 0},battery:{kw:Ae.battery_kw??0,soc:t??50},grid:{kw:Ae.grid_kw??0,importKwh:k?.gridImport??void 0,exportKwh:k?.gridExport??void 0},house:{kw:Ae.load_kw??0,todayKwh:k?.loadConsumption??void 0},water:{kw:Ae.water_kw??0}}})})}),l.jsx(Ue.div,{className:"h-full",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:l.jsx(DC,{comfortLevel:Te,setComfortLevel:async z=>{he(z),await G.configSave({water_heating:{comfort_level:z}})},riskAppetite:Fe,setRiskAppetite:async z=>{xt(z),await G.configSave({s_index:{risk_appetite:z}})},vacationMode:D,onWaterBoost:async()=>{try{await G.waterBoost.start(60),Ke()}catch(z){console.error("Boost failed",z)}},onBatteryTopUp:async()=>{try{await G.executor.quickAction.set("force_charge",60),Ke()}catch(z){console.error("Top Up failed",z)}}})}),l.jsx(Ue.div,{className:"h-full",initial:{opacity:0,y:8},animate:{opacity:1,y:0},children:l.jsxs("div",{className:"flex h-full flex-col gap-6",children:[l.jsx(re,{className:"flex-1 p-4 md:p-5",children:l.jsx(XS,{onDataRefresh:Ke,onPlanSourceChange:it,onServerScheduleLoaded:fe,onVacationModeChange:z=>R(z)})}),l.jsxs(re,{className:"flex-1 p-4 md:p-5",children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[l.jsx("div",{className:"text-sm font-medium text-text",children:"Planner Automation"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-muted",children:[l.jsx("span",{className:`inline-flex h-2 w-2 rounded-full ${c?.enable_scheduler?"bg-good shadow-[0_0_0_2px_rgba(var(--color-good),0.4)]":"bg-line"}`}),l.jsx("span",{children:c?.enable_scheduler?"Active":"Disabled"})]}),l.jsx("button",{type:"button",onClick:$r,disabled:u,className:"rounded-pill px-2 py-0.5 text-[10px] font-semibold border border-line/60 text-muted hover:border-accent hover:text-accent disabled:opacity-50 transition",children:c?.enable_scheduler?"Disable":"Enable"})]})]}),l.jsxs("div",{className:"mb-4 p-2 rounded-lg bg-surface2/30 border border-line/30 flex items-center justify-between",children:[l.jsx("div",{className:"text-[10px] font-medium text-text",children:Ur}),l.jsx("button",{onClick:()=>Ke(),disabled:s,className:`rounded-full p-1 transition ${s?"bg-surface2 text-muted":"text-muted hover:text-accent"}`,title:"Manual sync",children:l.jsx("span",{className:`inline-block text-[10px] ${s?"animate-spin":""}`,children:s?"":""})})]}),l.jsxs("div",{className:"space-y-1 text-[10px] text-muted",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Last plan run:"}),l.jsx("span",{className:"font-mono",children:lp(an)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Next expected run:"}),l.jsx("span",{className:"font-mono",children:c?.enable_scheduler?lp(Si):""})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"DB sync:"}),l.jsx("span",{children:c?.write_to_mariadb?"enabled":"disabled"})]}),l.jsxs("div",{className:"flex justify-between pt-1 border-t border-line/30 mt-1",children:[l.jsx("span",{children:"Dashboard Sync:"}),l.jsx("span",{children:i?i.toLocaleTimeString():""})]})]})]}),c?.external_executor_mode&&l.jsxs(re,{className:"flex-1 p-4 md:p-5 flex flex-col",children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[l.jsx("div",{className:"text-sm text-muted",children:"DB Sync"}),l.jsx("div",{className:`text-[10px] ${Yr?.type==="success"?"text-good":"text-bad"}`,children:Yr?.message})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[l.jsxs("button",{type:"button",onClick:Xo,disabled:nn,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-[11px] font-semibold bg-surface2 border border-line/60 text-muted hover:border-accent hover:text-accent transition disabled:opacity-50",title:"Pull plan from MariaDB current_schedule table",children:[l.jsx(Xc,{className:"h-4 w-4"}),l.jsx("span",{children:"Load from DB"})]}),l.jsxs("button",{type:"button",onClick:Zo,disabled:nn,className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-[11px] font-semibold bg-surface2 border border-line/60 text-muted hover:border-accent hover:text-accent transition disabled:opacity-50",title:"Push local schedule.json to MariaDB",children:[l.jsx(Zc,{className:"h-4 w-4"}),l.jsx("span",{children:"Push to DB"})]})]})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[l.jsx(TC,{netCost:k?.netCost??null,importKwh:k?.gridImport??null,exportKwh:k?.gridExport??null}),l.jsx(CC,{pvActual:k?.pvProduction??null,pvForecast:k?.pvForecast??null,loadActual:k?.loadConsumption??null,loadAvg:J?.dailyKwh??null,waterKwh:ae?.kwh??null,batteryCapacity:U}),l.jsx(PC,{soc:t,socTarget:de,sIndex:O?.s_index?.effective_load_margin??O?.s_index?.risk_factor??O?.s_index?.factor??null,cycles:k?.batteryCycles??null,riskLabel:{1:"Safety",2:"Conservative",3:"Neutral",4:"Aggressive",5:"Gambler"}[Fe]||"Neutral"})]})]})}function DP(){const[t,e]=y.useState([]),[s,n]=y.useState(!1),[i,r]=y.useState(null),[a,o]=y.useState("all"),[c,d]=y.useState("all"),[u,h]=y.useState(null),[f,m]=y.useState(null),[p,g]=y.useState("today"),x=y.useRef(null),v=y.useRef(null);y.useEffect(()=>{n(!0),r(null),G.debugLogs().then(j=>e(j.logs??[])).catch(j=>{console.error("Failed to fetch debug logs:",j),r("Failed to load logs")}).finally(()=>n(!1))},[]),y.useEffect(()=>{(()=>{m(null);let j="today";if(p==="yesterday"){const k=new Date;k.setDate(k.getDate()-1),j=k.toISOString().slice(0,10)}G.historySoc(j).then(k=>h(k)).catch(k=>{console.error("Failed to fetch historic SoC:",k),m("Failed to load SoC history")})})()},[p]);const _=t.filter(N=>{if(a==="all")return!0;const j=(N.level||"").toUpperCase();return a==="error"?j==="ERROR"||j==="CRITICAL":j==="WARN"||j==="WARNING"||j==="ERROR"||j==="CRITICAL"}).filter(N=>{if(c==="all")return!0;const j=new Date(N.timestamp).getTime();if(Number.isNaN(j))return!0;const T=Date.now()-j,M=3600*1e3;return c==="1h"?T<=M:c==="6h"?T<=6*M:c==="24h"?T<=24*M:!0}),S=t.filter(N=>{const j=(N.level||"").toUpperCase();return j==="ERROR"||j==="CRITICAL"});return y.useEffect(()=>{if(!x.current)return;const N=u?.slots??[];if(!N.length){v.current&&(v.current.destroy(),v.current=null);return}const j=N.map(P=>{const O=new Date(P.timestamp);return Number.isNaN(O.getTime())?"":O.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}),k=N.map(P=>P.soc_percent??0),T={labels:j,datasets:[{type:"line",label:"SoC (%)",data:k,borderColor:"rgba(129, 200, 253, 0.9)",backgroundColor:"rgba(129, 200, 253, 0.15)",pointRadius:0,tension:.25}]},M={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:P=>`SoC: ${P.parsed.y?.toFixed(1)??"--"}%`}}},scales:{x:{ticks:{color:"#a6b0bf",maxRotation:0},grid:{display:!1}},y:{ticks:{color:"#a6b0bf",stepSize:10},grid:{color:"rgba(255,255,255,0.06)"},beginAtZero:!0,suggestedMax:100}}};if(v.current){v.current.data=T,v.current.options=M,v.current.update();return}return v.current=new At(x.current,{type:"line",data:T,options:M}),()=>{v.current&&(v.current.destroy(),v.current=null)}},[u]),l.jsxs("main",{className:"mx-auto max-w-7xl px-4 pb-24 pt-8 sm:px-6 lg:pt-12",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"text-sm text-muted",children:"Debug & Diagnostics"}),l.jsx("div",{className:"text-[13px] text-muted/80",children:"Logs and SoC history to understand what the planner has been doing recently."})]}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs(re,{className:"p-5 lg:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"text-sm text-muted",children:"Logs"}),l.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[l.jsx("button",{className:"rounded-pill border border-line/60 px-3 py-1 hover:border-accent disabled:opacity-40",onClick:()=>{n(!0),r(null),G.debugLogs().then(N=>e(N.logs??[])).catch(N=>{console.error("Failed to refresh debug logs:",N),r("Failed to refresh logs")}).finally(()=>n(!1))},disabled:s,children:s?"Refreshing":"Refresh"}),l.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:c,onChange:N=>d(N.target.value),children:[l.jsx("option",{value:"all",children:"All time"}),l.jsx("option",{value:"1h",children:"Last 1 hour"}),l.jsx("option",{value:"6h",children:"Last 6 hours"}),l.jsx("option",{value:"24h",children:"Last 24 hours"})]}),l.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:a,onChange:N=>o(N.target.value),children:[l.jsx("option",{value:"all",children:"All levels"}),l.jsx("option",{value:"warn_error",children:"Warn + Error"}),l.jsx("option",{value:"error",children:"Errors only"})]})]})]}),i&&l.jsx("div",{className:"text-[11px] text-amber-400 mb-2",children:i}),l.jsxs("div",{className:"h-64 overflow-auto rounded-xl2 border border-line/60 bg-surface2/40 text-[11px] font-mono text-muted/90",children:[_.length===0&&!s&&!i&&l.jsx("div",{className:"px-3 py-2 text-muted/70",children:"No logs captured yet."}),_.map((N,j)=>l.jsxs("div",{className:"px-3 py-1.5 border-b border-line/20 last:border-b-0",children:[l.jsx("span",{className:"text-muted/60 mr-2",children:new Date(N.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),l.jsx("span",{className:"mr-2 rounded-full px-1.5 py-0.5 text-[10px] uppercase tracking-wide border border-line/50",children:N.level}),l.jsx("span",{className:"text-muted/70 mr-2",children:N.logger}),l.jsx("span",{children:N.message})]},`${N.timestamp}-${j}`))]})]}),l.jsxs(re,{className:"p-5 lg:col-span-1",children:[l.jsx("div",{className:"text-sm text-muted mb-3",children:"Recent events"}),l.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"Quick view of recent errors and warnings from the log stream."}),l.jsxs("div",{className:"space-y-2 text-[12px] text-muted/90",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Total log entries"}),l.jsx("span",{className:"tabular-nums",children:t.length})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Error/critical entries"}),l.jsx("span",{className:"tabular-nums",children:S.length})]}),l.jsx("div",{className:"mt-3 text-[11px] text-muted/70 uppercase tracking-wide",children:"Last errors"}),l.jsxs("div",{className:"space-y-1.5 max-h-40 overflow-auto",children:[S.slice(-5).map((N,j)=>l.jsxs("div",{className:"rounded-md bg-rose-500/5 border border-rose-500/40 px-2 py-1.5",children:[l.jsxs("div",{className:"text-[10px] text-rose-200/80 mb-0.5",children:[new Date(N.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})," "," ",N.logger]}),l.jsx("div",{className:"text-[11px] text-rose-50/90 line-clamp-2",children:N.message})]},`${N.timestamp}-err-${j}`)),S.length===0&&l.jsx("div",{className:"text-[11px] text-muted/70",children:"No error-level entries yet."})]})]})]})]}),l.jsx("div",{className:"grid gap-6 mt-6 lg:grid-cols-3",children:l.jsxs(re,{className:"p-5 lg:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"text-sm text-muted",children:"Historical SoC"}),l.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-muted",children:[l.jsx("span",{className:"text-muted/70",children:"Range"}),l.jsxs("select",{className:"rounded-md bg-surface2 border border-line/60 px-2 py-1 text-[11px]",value:p,onChange:N=>g(N.target.value),children:[l.jsx("option",{value:"today",children:"Today"}),l.jsx("option",{value:"yesterday",children:"Yesterday"})]})]})]}),l.jsx("div",{className:"text-[13px] text-muted/80 mb-2",children:"SoC (%) over the selected day from the learning database. Use this to correlate planner behaviour with actual SoC movement."}),f&&l.jsx("div",{className:"text-[11px] text-amber-400 mb-2",children:f}),l.jsx("div",{className:"h-48",children:l.jsx("canvas",{ref:x,className:"w-full h-full"})})]})})]})}const Xy=y.createContext(void 0);function ou(){const t=y.useContext(Xy);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t}function Zy(t,e){return e.reduce((s,n)=>s&&typeof s=="object"?s[n]:void 0,t)}function Jy(t,e,s){if(e.length===0)return t;const[n,...i]=e;if(i.length===0)return{...t,[n]:s};const r=t[n]||{};return{...t,[n]:Jy(r,i,s)}}function EP(t,e){const s=e.trim();if(t.type==="number"||t.type==="azimuth"||t.type==="tilt"){if(s==="")return null;const n=Number(s);return Number.isNaN(n)?void 0:n}return t.type==="boolean"?s==="true":t.type==="array"?s?s.split(",").map(n=>n.trim()).filter(Boolean).map(n=>{const i=Number(n);return Number.isNaN(i)?n:i}):[]:s}function cp(t,e){const s={};return t&&e.forEach(n=>{const i=Zy(t,n.path);n.type==="boolean"?s[n.key]=i===!0?"true":"false":n.type==="array"&&Array.isArray(i)?s[n.key]=i.join(", "):s[n.key]=i!=null?String(i):""}),s}function dp(t,e,s){let n={};return s.forEach(i=>{const r=e[i.key];if(r===void 0)return;const a=EP(i,r);if(a===void 0||i.type==="number"&&a===null)return;const o=Zy(t,i.path);((d,u,h)=>h==="array"?!Array.isArray(d)||!Array.isArray(u)||d.length!==u.length?!1:d.every((f,m)=>f===u[m]):d===u)(a,o,i.type)||(n=Jy(n,i.path,a))}),n}function Fo(t){const{toast:e}=ou(),[s,n]=y.useState(null),[i,r]=y.useState({}),[a,o]=y.useState({}),[c,d]=y.useState(!0),[u,h]=y.useState(!1),[f,m]=y.useState(null),[p,g]=y.useState([]),[x,v]=y.useState(!1),_=y.useCallback(async()=>{d(!0),m(null);try{const P=await G.config();n(P),r(cp(P,t)),o({})}catch(P){console.error("Failed to load configuration",P),m("Failed to load configuration: "+(P instanceof Error?P.message:"Unknown error"))}finally{d(!1)}},[t]),S=y.useCallback(async()=>{v(!0);try{const P=await G.haEntities();g(P.entities||[])}catch(P){console.error("Failed to load HA entities",P)}finally{v(!1)}},[]);y.useEffect(()=>{_(),S()},[_,S]);const N=y.useCallback((P,O,A)=>{const I={},X=O.trim();if(X===""&&(P.includes("power_kw")||P.includes("capacity_kwh")))I[P]="Required";else if(P.includes("percent")||P.includes("soc")){const J=Number(X);Number.isNaN(J)?I[P]="Must be a number":(J<0||J>100)&&(I[P]="Must be between 0 and 100")}else if(P.includes("power_kw")||P.includes("sek")||P.includes("kwh")){const J=Number(X);Number.isNaN(J)?I[P]="Must be a number":J<0&&(I[P]="Must be positive")}const U="battery.min_soc_percent",K="battery.max_soc_percent";if(P===U||P===K){const J=Number(P===U?X:A[U]),q=Number(P===K?X:A[K]);!Number.isNaN(J)&&!Number.isNaN(q)&&J>=q&&(I[U]="Min SoC must be less than max SoC",I[K]="Max SoC must be greater than min SoC")}return I},[]),j=y.useCallback((P,O)=>{r(A=>{const I={...A,[P]:O},X=N(P,O,I);return o(U=>{const K={...U,...X};return X[P]||delete K[P],P==="battery.min_soc_percent"&&!X["battery.min_soc_percent"]&&delete K["battery.max_soc_percent"],P==="battery.max_soc_percent"&&!X["battery.max_soc_percent"]&&delete K["battery.min_soc_percent"],K}),I}),m(null)},[N]),k=y.useCallback(()=>{s&&(r(cp(s,t)),o({}),m(null))},[s,t]),T=y.useCallback(async P=>{if(!s)return!1;if(Object.keys(a).length>0)return m("Please fix validation errors before saving."),!1;const O={...dp(s,i,t),...P};if(Object.keys(O).length===0)return m("No changes detected."),!1;h(!0),m(null);try{const A=await G.configSave(O);if(A.status==="success")return e({message:"Settings saved successfully",variant:"success"}),await _(),!0;{const I={};A.errors?.forEach(X=>{X.field&&(I[X.field]=X.message)}),o(X=>({...X,...I})),m(A.errors?.[0]?.message||"Save failed"),e({message:"Save failed",variant:"error"})}}catch(A){console.error("Save failed",A),m("Save failed: "+(A instanceof Error?A.message:"Unknown error")),e({message:"Save failed",variant:"error"})}finally{h(!1)}return!1},[s,i,t,a,_,e]),M=y.useMemo(()=>{if(!s)return!1;const P=dp(s,i,t);return Object.keys(P).length>0},[s,i,t]);return{config:s,form:i,fieldErrors:a,loading:c,saving:u,statusMessage:f,isDirty:M,haEntities:p,haLoading:x,handleChange:j,save:T,reset:k,reload:_,reloadEntities:S}}function AP({text:t,className:e=""}){const[s,n]=y.useState(!1);return t?l.jsxs("div",{className:`relative inline-block ${e}`,children:[l.jsx("button",{type:"button",className:"ml-1.5 text-muted/60 hover:text-accent transition-colors",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onFocus:()=>n(!0),onBlur:()=>n(!1),children:l.jsx(Nv,{className:"w-3.5 h-3.5"})}),s&&l.jsxs("div",{className:"absolute z-50 w-64 p-2.5 text-xs bg-surface2 border border-line rounded-lg shadow-lg left-0 bottom-full mb-1.5",children:[l.jsx("div",{className:"text-muted leading-relaxed",children:t}),l.jsx("div",{className:"absolute w-2 h-2 bg-surface2 border-r border-b border-line transform rotate-45 left-3 -bottom-1"})]})]}):null}function OP({value:t,onChange:e}){const s=y.useMemo(()=>{if(typeof t!="number"||Number.isNaN(t))return 0;let h=t%360;return h<0&&(h+=360),h},[t]),[n,i]=y.useState(!1),r=h=>{const f=Math.round(h),m=[0,45,90,135,180,225,270,315];let p=f,g=1/0;for(const x of m){const v=Math.abs(f-x);v<g&&v<=7&&(g=v,p=x)}return p},a=h=>{const f=h.currentTarget.getBoundingClientRect(),m=f.left+f.width/2,p=f.top+f.height/2,g=h.clientX-m,x=h.clientY-p;let _=Math.atan2(g,-x)*180/Math.PI;_<0&&(_+=360);const S=r(_);e(S)},o=h=>{i(!0);try{h.currentTarget.setPointerCapture(h.pointerId)}catch{}a(h)},c=h=>{n&&a(h)},d=h=>{if(n){i(!1);try{h.currentTarget.releasePointerCapture(h.pointerId)}catch{}}},u=`rotate(${s} 24 24)`;return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"relative h-16 w-16 cursor-pointer",onPointerDown:o,onPointerMove:c,onPointerUp:d,"aria-label":"Solar azimuth dial",role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":Math.round(s),children:l.jsxs("svg",{viewBox:"0 0 48 48",className:"h-full w-full",children:[l.jsx("circle",{cx:"24",cy:"24",r:"21",className:"fill-surface2 stroke-line/60",strokeWidth:"2"}),l.jsx("g",{children:Array.from({length:12}).map((h,f)=>{const m=f*30,p=m%90===0,g=!p&&m%45===0,x=21,v=p?16:g?18:19,_=(m-90)*Math.PI/180,S=24+x*Math.cos(_),N=24+x*Math.sin(_),j=24+v*Math.cos(_),k=24+v*Math.sin(_),T=p||g?"stroke-line/80":"stroke-line/40",M=p?1.6:1;return l.jsx("line",{x1:S,y1:N,x2:j,y2:k,className:T,strokeWidth:M},m)})}),l.jsx("text",{x:"24",y:"9",textAnchor:"middle",className:"fill-muted text-[8px]",children:"N"}),l.jsx("text",{x:"24",y:"45",textAnchor:"middle",className:"fill-muted text-[8px]",children:"S"}),l.jsx("text",{x:"43",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"E"}),l.jsx("text",{x:"5",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"W"}),l.jsxs("g",{transform:u,children:[l.jsx("line",{x1:"24",y1:"24",x2:"24",y2:"6",className:"stroke-accent",strokeWidth:"2.2",strokeLinecap:"round"}),l.jsx("circle",{cx:"24",cy:"24",r:"2.5",className:"fill-accent"})]})]})}),l.jsxs("div",{className:"text-[11px] text-muted leading-tight",children:[l.jsxs("div",{className:"font-medium text-text",children:[Math.round(s),""]}),l.jsx("div",{children:"0 = North  90 = East  180 = South  270 = West"})]})]})}function RP({value:t,onChange:e}){const s=y.useMemo(()=>{if(typeof t!="number"||Number.isNaN(t))return 0;let h=t;return h<0&&(h=0),h>90&&(h=90),h},[t]),[n,i]=y.useState(!1),r=h=>{const f=h.currentTarget.getBoundingClientRect(),m=f.left+f.width/2,p=f.top+f.height/2,g=h.clientX-m,x=h.clientY-p;let _=Math.atan2(g,-x)*180/Math.PI;_<0&&(_+=360),(_<270||_>360)&&(_>=0&&_<=135?_=360:_=270);let S=360-_;S<0&&(S=0),S>90&&(S=90);const N=Math.round(S/5)*5;e(N)},a=h=>{i(!0);try{h.currentTarget.setPointerCapture(h.pointerId)}catch{}r(h)},o=h=>{n&&r(h)},c=h=>{if(n){i(!1);try{h.currentTarget.releasePointerCapture(h.pointerId)}catch{}}},u=`rotate(${y.useMemo(()=>360-s,[s])} 24 24)`;return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"relative h-16 w-16 cursor-pointer",onPointerDown:a,onPointerMove:o,onPointerUp:c,"aria-label":"Solar tilt dial",role:"slider","aria-valuemin":0,"aria-valuemax":90,"aria-valuenow":Math.round(s),children:l.jsxs("svg",{viewBox:"0 0 48 48",className:"h-full w-full",children:[l.jsx("circle",{cx:"24",cy:"24",r:"21",className:"fill-surface2 stroke-line/40",strokeWidth:"2"}),l.jsx("path",{d:"M3 24 A21 21 0 0 1 24 3",className:"fill-none stroke-accent/70",strokeWidth:"2.2"}),l.jsx("g",{children:Array.from({length:7}).map((h,f)=>{const m=f*15,p=360-m,g=21,x=m%30===0?18:19,v=(p-90)*Math.PI/180,_=24+g*Math.cos(v),S=24+g*Math.sin(v),N=24+x*Math.cos(v),j=24+x*Math.sin(v),k=m===0||m===90?"stroke-line/80":"stroke-line/60",T=m===0||m===90?1.6:1.2;return l.jsx("line",{x1:_,y1:S,x2:N,y2:j,className:k,strokeWidth:T},m)})}),l.jsx("text",{x:"24",y:"9",textAnchor:"middle",className:"fill-muted text-[8px]",children:"0"}),l.jsx("text",{x:"5",y:"25",textAnchor:"middle",className:"fill-muted text-[8px]",children:"90"}),l.jsxs("g",{transform:u,children:[l.jsx("line",{x1:"24",y1:"24",x2:"24",y2:"6",className:"stroke-accent",strokeWidth:"2.2",strokeLinecap:"round"}),l.jsx("circle",{cx:"24",cy:"24",r:"2.5",className:"fill-accent"})]})]})}),l.jsxs("div",{className:"text-[11px] text-muted leading-tight",children:[l.jsxs("div",{className:"font-medium text-text",children:[Math.round(s),""]}),l.jsx("div",{children:"Drag along the arc: 0 = flat  90 = vertical panel"})]})]})}function LP({entities:t,value:e,onChange:s,placeholder:n="Select entity...",disabled:i=!1,loading:r=!1}){const[a,o]=y.useState(!1),[c,d]=y.useState(""),[u,h]=y.useState(0),f=y.useRef(null),m=y.useRef(null),p=y.useRef(null),g=t.find(k=>k.entity_id===e),x=y.useMemo(()=>{if(!c.trim())return t;const k=c.toLowerCase();return t.filter(T=>T.entity_id.toLowerCase().includes(k)||T.friendly_name.toLowerCase().includes(k))},[t,c]),v=y.useMemo(()=>{const k={};return x.forEach(T=>{const M=T.domain||T.entity_id.split(".")[0];k[M]||(k[M]=[]),k[M].push(T)}),k},[x]),_=y.useMemo(()=>{const k=[];return Object.values(v).forEach(T=>k.push(...T)),k},[v]);y.useEffect(()=>{h(0)},[x.length]),y.useEffect(()=>{const k=T=>{f.current&&!f.current.contains(T.target)&&(o(!1),d(""))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),y.useEffect(()=>{if(a&&p.current){const k=p.current.querySelector('[data-highlighted="true"]');k&&k.scrollIntoView({block:"nearest"})}},[u,a]);const S=k=>{s(k.entity_id),o(!1),d("")},N=k=>{if(!a){(k.key==="Enter"||k.key===" "||k.key==="ArrowDown")&&(k.preventDefault(),o(!0));return}switch(k.key){case"ArrowDown":k.preventDefault(),h(T=>Math.min(T+1,_.length-1));break;case"ArrowUp":k.preventDefault(),h(T=>Math.max(T-1,0));break;case"Enter":k.preventDefault(),_[u]&&S(_[u]);break;case"Escape":k.preventDefault(),o(!1),d("");break}},j=k=>{k.stopPropagation(),s(""),o(!1),d("")};return l.jsxs("div",{ref:f,className:"relative",children:[l.jsxs("button",{type:"button",disabled:i,onClick:()=>{i||(o(!a),a||setTimeout(()=>m.current?.focus(),0))},onKeyDown:N,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[l.jsx("span",{className:g?"text-text":"text-muted",children:r?"Loading...":g?.friendly_name||g?.entity_id||n}),l.jsxs("div",{className:"flex items-center gap-1",children:[e&&!i&&l.jsx("span",{role:"button",tabIndex:-1,onClick:j,onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),j(k))},className:"p-0.5 rounded hover:bg-line/60 text-muted hover:text-text cursor-pointer",children:l.jsx(ui,{className:"h-3.5 w-3.5"})}),l.jsx(bo,{className:`h-4 w-4 text-muted transition-transform ${a?"rotate-180":""}`})]})]}),a&&l.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[280px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float",children:[l.jsx("div",{className:"p-2 border-b border-line",children:l.jsxs("div",{className:"relative",children:[l.jsx(Jc,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),l.jsx("input",{ref:m,type:"text",value:c,onChange:k=>d(k.target.value),onKeyDown:N,placeholder:"Search entities...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40"})]})}),l.jsx("div",{ref:p,className:"max-h-[240px] overflow-y-auto p-1",children:x.length===0?l.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No entities found"}):Object.entries(v).map(([k,T])=>l.jsxs("div",{className:"mb-1",children:[l.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:k}),T.map(M=>{const O=_.findIndex(I=>I.entity_id===M.entity_id)===u,A=M.entity_id===e;return l.jsxs("button",{type:"button","data-highlighted":O,onClick:()=>S(M),className:`
                                                    w-full text-left px-2 py-1.5 rounded-md text-sm
                                                    transition-colors
                                                    ${O?"bg-accent/20 text-text":"text-text hover:bg-surface2"}
                                                    ${A?"font-medium":""}
                                                `,children:[l.jsx("div",{className:"truncate",children:M.friendly_name||M.entity_id}),l.jsx("div",{className:"text-[10px] text-muted truncate",children:M.entity_id})]},M.entity_id)})]},k))})]})]})}function FP({value:t,onChange:e,placeholder:s="Select service (e.g. notify.mobile_app)...",disabled:n=!1}){const[i,r]=y.useState(!1),[a,o]=y.useState(""),[c,d]=y.useState([]),[u,h]=y.useState(!1),[f,m]=y.useState(0),p=y.useRef(null),g=y.useRef(null),x=y.useRef(null);y.useEffect(()=>{i&&c.length===0&&!u&&(h(!0),G.haServices().then(T=>{d(T.services||[])}).catch(T=>{console.error("Failed to fetch HA services:",T)}).finally(()=>{h(!1)}))},[i,c.length,u]);const v=y.useMemo(()=>{if(!a.trim())return c;const T=a.toLowerCase();return c.filter(M=>M.toLowerCase().includes(T))},[c,a]),_=y.useMemo(()=>{const T={};return v.forEach(M=>{const P=M.split(".")[0]||"other";T[P]||(T[P]=[]),T[P].push(M)}),T},[v]),S=y.useMemo(()=>{const T=[];return Object.values(_).forEach(M=>T.push(...M)),T},[_]);y.useEffect(()=>{m(0)},[v.length]),y.useEffect(()=>{const T=M=>{p.current&&!p.current.contains(M.target)&&(r(!1),o(""))};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),y.useEffect(()=>{if(i&&x.current){const T=x.current.querySelector('[data-highlighted="true"]');T&&T.scrollIntoView({block:"nearest"})}},[f,i]);const N=T=>{e(T),r(!1),o("")},j=T=>{if(!i){(T.key==="Enter"||T.key===" "||T.key==="ArrowDown")&&(T.preventDefault(),r(!0));return}switch(T.key){case"ArrowDown":T.preventDefault(),m(M=>Math.min(M+1,S.length-1));break;case"ArrowUp":T.preventDefault(),m(M=>Math.max(M-1,0));break;case"Enter":T.preventDefault(),S[f]&&N(S[f]);break;case"Escape":T.preventDefault(),r(!1),o("");break}},k=T=>{T.stopPropagation(),e(""),r(!1),o("")};return l.jsxs("div",{ref:p,className:"relative",children:[l.jsxs("button",{type:"button",disabled:n,onClick:()=>{n||(r(!i),i||setTimeout(()=>g.current?.focus(),0))},onKeyDown:j,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[l.jsx("span",{className:t?"text-text":"text-muted",children:u&&c.length===0?"Loading services...":t||s}),l.jsxs("div",{className:"flex items-center gap-1",children:[t&&!n&&l.jsx("span",{role:"button",tabIndex:-1,onClick:k,onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),k(T))},className:"p-0.5 rounded hover:bg-line/60 text-muted hover:text-text cursor-pointer",children:l.jsx(ui,{className:"h-3.5 w-3.5"})}),l.jsx(bo,{className:`h-4 w-4 text-muted transition-transform ${i?"rotate-180":""}`})]})]}),i&&l.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[280px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float",children:[l.jsx("div",{className:"p-2 border-b border-line",children:l.jsxs("div",{className:"relative",children:[l.jsx(Jc,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),l.jsx("input",{ref:g,type:"text",value:a,onChange:T=>o(T.target.value),onKeyDown:j,placeholder:"Search services...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40"})]})}),l.jsx("div",{ref:x,className:"max-h-[240px] overflow-y-auto p-1 scrollbar-thin",children:u&&c.length===0?l.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted animate-pulse",children:"Loading from Home Assistant..."}):v.length===0?l.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No services found"}):Object.entries(_).map(([T,M])=>l.jsxs("div",{className:"mb-1",children:[l.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:T}),M.map(P=>{const A=S.indexOf(P)===f,I=P===t;return l.jsx("button",{type:"button","data-highlighted":A,onClick:()=>N(P),className:`
                                                    w-full text-left px-2 py-1.5 rounded-md text-sm
                                                    transition-colors
                                                    ${A?"bg-accent/20 text-text":"text-text hover:bg-surface2"}
                                                    ${I?"font-medium":""}
                                                `,children:l.jsx("div",{className:"truncate",children:P})},P)})]},T))})]})]})}function Qy({value:t,onChange:e,options:s,placeholder:n="Select...",disabled:i=!1,className:r="",searchable:a=!1}){const[o,c]=y.useState(!1),[d,u]=y.useState(""),[h,f]=y.useState(0),m=y.useRef(null),p=y.useRef(null),g=y.useRef(null),x=s.find(k=>k.value===t),v=y.useMemo(()=>{if(!d.trim())return s;const k=d.toLowerCase();return s.filter(T=>T.label.toLowerCase().includes(k)||T.value.toLowerCase().includes(k)||T.group?.toLowerCase().includes(k))},[s,d]),_=y.useMemo(()=>{const k={},T=[];return v.forEach(M=>{M.group?(k[M.group]||(k[M.group]=[]),k[M.group].push(M)):T.push(M)}),{groups:k,noGroup:T}},[v]),S=y.useMemo(()=>[..._.noGroup,...Object.values(_.groups).flat()],[_]);y.useEffect(()=>{f(0)},[v.length,o]),y.useEffect(()=>{const k=T=>{m.current&&!m.current.contains(T.target)&&(c(!1),u(""))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),y.useEffect(()=>{if(o&&g.current){const k=g.current.querySelector(`[data-index="${h}"]`);k&&k.scrollIntoView({block:"nearest"})}},[h,o]);const N=k=>{e(k),c(!1),u("")},j=k=>{if(!i){if(!o){(k.key==="Enter"||k.key===" "||k.key==="ArrowDown")&&(k.preventDefault(),c(!0));return}switch(k.key){case"ArrowDown":k.preventDefault(),f(T=>Math.min(T+1,S.length-1));break;case"ArrowUp":k.preventDefault(),f(T=>Math.max(T-1,0));break;case"Enter":k.preventDefault(),S[h]&&N(S[h].value);break;case"Escape":k.preventDefault(),c(!1),u("");break;case"Tab":c(!1);break}}};return l.jsxs("div",{ref:m,className:`relative ${r}`,children:[l.jsxs("button",{type:"button",disabled:i,onClick:()=>{i||(c(!o),!o&&a&&setTimeout(()=>p.current?.focus(),0))},onKeyDown:j,className:`
                    w-full flex items-center justify-between gap-2 px-3 py-2
                    rounded-lg border border-line bg-surface2 text-left text-sm
                    hover:border-accent/60 focus:outline-none focus:ring-2 focus:ring-accent/40
                    disabled:opacity-50 disabled:cursor-not-allowed
                    transition-colors
                `,children:[l.jsx("span",{className:x?"text-text":"text-muted",children:x?.label||n}),l.jsx(bo,{className:`h-4 w-4 text-muted transition-transform ${o?"rotate-180":""}`})]}),o&&l.jsxs("div",{className:"absolute z-50 mt-1 w-full min-w-[180px] max-h-[300px] overflow-hidden rounded-lg border border-line bg-surface shadow-float animate-in fade-in zoom-in-95 duration-100",children:[a&&l.jsx("div",{className:"p-2 border-b border-line",children:l.jsxs("div",{className:"relative",children:[l.jsx(Jc,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted"}),l.jsx("input",{ref:p,type:"text",value:d,onChange:k=>u(k.target.value),placeholder:"Search...",className:"w-full pl-8 pr-3 py-1.5 rounded-md bg-surface2 border border-line text-sm text-text placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-accent/40",onKeyDown:j})]})}),l.jsx("div",{ref:g,className:"max-h-[240px] overflow-y-auto p-1 scrollbar-thin",children:S.length===0?l.jsx("div",{className:"px-3 py-4 text-center text-sm text-muted",children:"No options found"}):l.jsxs(l.Fragment,{children:[_.noGroup.map((k,T)=>{const M=x?.value===k.value,P=S[h]?.value===k.value;return l.jsxs("div",{"data-index":h,className:`
                                                flex items-center justify-between px-2 py-1.5 rounded-md text-sm cursor-pointer
                                                ${P?"bg-accent/20 text-text":"text-text"}
                                                ${M?"font-medium":""}
                                            `,onClick:()=>N(k.value),onMouseEnter:()=>f(S.findIndex(O=>O.value===k.value)),children:[l.jsx("span",{children:k.label}),M&&l.jsx(Zu,{className:"h-3.5 w-3.5 text-accent"})]},k.value)}),Object.entries(_.groups).map(([k,T])=>l.jsxs("div",{className:"mt-1 first:mt-0",children:[l.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wider text-muted/70 font-medium",children:k}),T.map(M=>{const P=x?.value===M.value,O=S.findIndex(I=>I.value===M.value),A=O===h;return l.jsxs("div",{"data-index":O,className:`
                                                        flex items-center justify-between px-2 py-1.5 rounded-md text-sm cursor-pointer
                                                        ${A?"bg-accent/20 text-text":"text-text"}
                                                        ${P?"font-medium":""}
                                                    `,onClick:()=>N(M.value),onMouseEnter:()=>f(O),children:[l.jsx("span",{children:M.label}),P&&l.jsx(Zu,{className:"h-3.5 w-3.5 text-accent"})]},M.value)})]},k))]})})]})]})}function e0({checked:t,onCheckedChange:e,disabled:s=!1,className:n=""}){return l.jsx("div",{className:`toggle ${t?"active":""} ${n} ${s?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!s&&e(!t),children:l.jsx("div",{className:"toggle-knob"})})}const IP="IANA timezone for all schedule calculations",VP={timezone:IP,"advisor.enable_llm":"Enable LLM-powered advice on Dashboard","advisor.model":"OpenRouter model identifier (requires API key in secrets.yaml)","advisor.personality":"Advice style: concise | friendly | technical","advisor.auto_fetch":"Automatically fetch advice when Dashboard loads","system.has_solar":"Enable PV forecasting & solar-related features","system.has_battery":"Enable battery control & grid arbitrage","system.has_water_heater":"Enable water heating optimization","system.grid.max_power_kw":"HARD limit: max grid import (cannot be exceeded)","system.inverter.max_power_kw":"Maximum inverter AC power output","system.location.latitude":"Decimal degrees, positive north (for PV forecasting)","system.location.longitude":"Decimal degrees, positive east (for PV forecasting)","system.solar_array.azimuth":"Panel direction: 0=North, 90=East, 180=South, 270=West","system.solar_array.kwp":"Total DC peak power of PV array in kilowatts","system.solar_array.tilt":"Panel angle from horizontal: 0=flat, 90=vertical","battery.max_soc_percent":"Planner target ceiling (BMS still enforces absolute limit)","battery_economics.battery_cycle_cost_kwh":"Degradation cost applied per kWh cycled through the battery","charging_strategy.charge_threshold_percentile":"Bottom X% of daily prices are considered 'cheap'","charging_strategy.cheap_price_tolerance_sek":"Extends 'cheap' window to prices within this tolerance","charging_strategy.price_smoothing_sek_kwh":"Groups slots slightly above cheapest into charge window","charging_strategy.block_consolidation_tolerance_sek":"Price tolerance for merging adjacent charge blocks","charging_strategy.consolidation_max_gap_slots":"Max gap (in 15-min slots) to bridge when consolidating","strategic_charging.price_threshold_sek":"[NOT IMPLEMENTED] Floor price for opportunistic charging","strategic_charging.target_soc_percent":"SoC target for cheap window expansion (used in windows.py)","water_heating.power_kw":"Power consumption of the water heater","water_heating.min_hours_per_day":"Minimum run-time per day","water_heating.min_kwh_per_day":"Optional; defaults to power * hours when unset","water_heating.max_blocks_per_day":"Prefer single block, up to two if needed","water_heating.defer_up_to_hours":"Allow deferring into early tomorrow up to N hours if cheaper","water_heating.plan_days_ahead":"Plan at most today + 1 day (tomorrow) within 48h horizon","water_heating.max_hours_between_heating":"Max gap between heating sessions (0 = no constraint)","water_heating.comfort_level":"1-5 (EconomyMaximum) - controls gap penalty","water_heating.min_spacing_hours":"Min gap between starts to avoid efficiency loss","water_heating.spacing_penalty_sek":"Soft penalty for frequent starts","water_heating.vacation_mode.enabled":"Master switch (HA entity can override when ON)","water_heating.vacation_mode.anti_legionella_temp_c":"Target temperature for safety cycle","water_heating.vacation_mode.anti_legionella_interval_days":"Run cycle every N days","water_heating.vacation_mode.anti_legionella_duration_hours":"Duration at power_kw (e.g., 3h * 3kW = 9kWh)","s_index.mode":"Options: probabilistic | dynamic","s_index.static_factor":"Used when mode=static","s_index.base_factor":"Starting point for dynamic calculationsWfz","s_index.max_factor":"Upper bound clamp for dynamic mode","s_index.pv_deficit_weight":"Weight for PV/load deficit contribution","s_index.temp_weight":"Weight for temperature adjustment","s_index.temp_baseline_c":"Baseline temperature (no adjustment)","s_index.temp_cold_c":"Temperature where adjustment reaches 100%","s_index.s_index_horizon_days":"Number of days ahead to evaluate (integer)","s_index.risk_appetite":"1-5 scale (1=safe, 3=neutral, 5=gambler)","export.enable_export":"[NOT IMPLEMENTED] Master switch for grid export","manual_planning.charge_target_percent":"Cap for manual charge slots","manual_planning.export_target_percent":"Floor target when manually scheduling export","debug.enable_planner_debug":"Enable verbose planner logging","debug.sample_size":"Sample size for debug output charts","automation.enable_scheduler":"Enable automatic schedule regeneration","automation.write_to_mariadb":"Write telemetry to MariaDB (requires secrets.yaml)","automation.external_executor_mode":"Use external executor instead of built-in","automation.schedule.every_minutes":"How often to regenerate schedule","automation.schedule.jitter_minutes":"Random delay to avoid thundering herd","automation.ml_training.enabled":"Enable automatic ML model retraining","automation.ml_training.run_days":"Days of week to train (0=Mon, 6=Sun)","automation.ml_training.run_time":"Time of day to run training (HH:MM)","learning.default_battery_cost_sek_per_kwh":"Conservative default until dynamic cost is recorded","nordpool.price_area":"Nordpool bidding zone (SE1-SE4, NO1-NO5, DK1-DK2, FI, etc.)","nordpool.currency":"Price currency","nordpool.resolution_minutes":"Slot resolution (15, 30, or 60)","pricing.vat_percent":"VAT percentage on electricity","pricing.grid_transfer_fee_sek":"Grid operator transfer fee per kWh","pricing.energy_tax_sek":"Energy tax per kWh","pricing.subscription_fee_sek_per_month":"[FUTURE] Fixed monthly grid subscription (for cost analysis)","forecasting.active_forecast_version":"Forecast engine: aurora (ML) | legacy","forecasting.pv_confidence_percent":"PV forecast scaling (100 = trust forecast fully)","forecasting.load_safety_margin_percent":"Load forecast scaling (>100 = expect more load)","grid.import_limit_kw":"Soft limit for effekttariff (breached with high penalty)","kepler.ramping_cost_sek_per_kw":"Penalty for power changes between slots (reduces sawtooth)","input_sensors.alarm_state":"Alarm panel for occupancy detection (ML feature)","input_sensors.vacation_mode":"Vacation mode toggle (reduces load forecasts)","input_sensors.battery_soc":"Current battery state of charge (%)","input_sensors.pv_power":"Current PV production (W or kW)","input_sensors.load_power":"Current load consumption (W or kW)","input_sensors.total_battery_charge":"Cumulative battery charge (kWh)","input_sensors.total_battery_discharge":"Cumulative battery discharge (kWh)","input_sensors.total_grid_export":"Cumulative grid export (kWh)","input_sensors.total_grid_import":"Cumulative grid import (kWh)","input_sensors.total_load_consumption":"Cumulative load (kWh)","input_sensors.total_pv_production":"Cumulative PV production (kWh)","input_sensors.water_heater_consumption":"Water heater daily energy (kWh)","input_sensors.today_grid_import":"Today's grid import (kWh)","input_sensors.today_grid_export":"Today's grid export (kWh)","input_sensors.today_battery_charge":"Today's battery charge (kWh)","input_sensors.today_pv_production":"Today's PV production (kWh)","input_sensors.today_load_consumption":"Today's load consumption (kWh)","input_sensors.today_net_cost":"Today's net electricity cost","executor.enabled":"Enable executor control loop","executor.shadow_mode":"Log actions but don't execute (for testing)","executor.interval_seconds":"How often to run (default: 5 minutes)","executor.pause_reminder_minutes":"Notify if paused longer than this","executor.history_retention_days":"Keep execution history for N days","executor.automation_toggle_entity":"Master enable/disable switch","executor.manual_override_entity":"Manual override active flag","executor.soc_target_entity":"SoC target input_number","executor.inverter.work_mode_entity":"Inverter mode selector","executor.inverter.work_mode_export":"Value for export mode","executor.inverter.work_mode_zero_export":"Value for zero-export mode","executor.inverter.grid_charging_entity":"Enable/disable grid charging","executor.inverter.max_charging_current_entity":"Max charge current (A)","executor.inverter.max_discharging_current_entity":"Max discharge current (A)","executor.controller.battery_capacity_kwh":"Battery capacity in kWh (for current calculations)","executor.controller.system_voltage_v":"Nominal battery voltage","executor.controller.worst_case_voltage_v":"Minimum voltage for conservative calculations","executor.controller.inverter_ac_limit_kw":"Max AC power output of inverter","executor.controller.charge_efficiency":"Charging efficiency (0-1)","executor.controller.max_charge_a":"Maximum charging current (A)","executor.controller.min_charge_a":"Minimum meaningful charge current (A)","executor.controller.round_step_a":"Round current commands to nearest X amps","executor.controller.write_threshold_a":"Only write if change exceeds X amps","executor.water_heater.target_entity":"HA entity to control","executor.water_heater.temp_off":"Idle mode (legionella-safe minimum)","executor.water_heater.temp_normal":"Scheduled heating target (used by planner)","executor.water_heater.temp_boost":"Manual boost button (Dashboard/Executor)","executor.water_heater.temp_max":"PV dump target + safety limit (never exceeded)","executor.notifications.service":"HA notify service to use","executor.notifications.on_charge_start":"Notify when grid charging starts","executor.notifications.on_charge_stop":"Notify when grid charging stops","executor.notifications.on_export_start":"Notify when export/discharge starts","executor.notifications.on_export_stop":"Notify when export/discharge stops","executor.notifications.on_water_heat_start":"Notify when water heating starts","executor.notifications.on_water_heat_stop":"Notify when water heating stops","executor.notifications.on_soc_target_change":"Notify when SoC target changes","executor.notifications.on_override_activated":"Notify when manual override triggers","executor.notifications.on_error":"Notify on executor errors","dashboard.auto_refresh_enabled":"Auto-refresh dashboard schedule display","dashboard.overlay_defaults":"Default chart overlays","ui.theme":"Color theme name","ui.theme_accent_index":"Accent color index (0-based)","appliances.dishwasher.label":"Display name in UI","appliances.dishwasher.duration_hours":"Typical run duration"},Io=({field:t,value:e,onChange:s,error:n,haEntities:i=[],haLoading:r=!1})=>{const a=()=>{switch(t.type){case"boolean":return l.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[l.jsx(e0,{checked:e==="true",onCheckedChange:o=>s(t.key,o?"true":"false")}),l.jsx("span",{className:"text-sm font-semibold",children:t.label})]});case"select":return l.jsx(Qy,{value:e,onChange:o=>s(t.key,o),options:t.options||[],placeholder:"Select..."});case"entity":return l.jsx(LP,{entities:i,value:e,onChange:o=>s(t.key,o),loading:r,placeholder:"Select entity..."});case"service":return l.jsx(FP,{value:e,onChange:o=>s(t.key,o),placeholder:"Select notification service..."});case"azimuth":{const o=e&&e.trim()!==""?Number(e):null;return l.jsxs("div",{className:"space-y-2",children:[l.jsx(OP,{value:typeof o=="number"&&!Number.isNaN(o)?o:null,onChange:c=>s(t.key,String(Math.round(c)))}),l.jsx("input",{type:"number",inputMode:"decimal",value:e,onChange:c=>s(t.key,c.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-text focus:border-accent focus:outline-none"})]})}case"tilt":{const o=e&&e.trim()!==""?Number(e):null;return l.jsxs("div",{className:"space-y-2",children:[l.jsx(RP,{value:typeof o=="number"&&!Number.isNaN(o)?o:null,onChange:c=>s(t.key,String(Math.round(c)))}),l.jsx("input",{type:"number",inputMode:"decimal",value:e,onChange:c=>s(t.key,c.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-text focus:border-accent focus:outline-none"})]})}default:return l.jsx("input",{type:t.type==="number"?"number":"text",inputMode:t.type==="number"?"decimal":void 0,value:e,onChange:o=>s(t.key,o.target.value),className:"w-full rounded-lg border border-line/50 bg-surface2 px-3 py-2 text-sm text-text focus:border-accent focus:outline-none"})}};return l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"block text-sm font-medium mb-1.5 flex items-center gap-1",children:[l.jsx("span",{className:t.type==="boolean"?"sr-only":"text-[10px] uppercase tracking-wide text-muted",children:t.label}),l.jsx(AP,{text:VP[t.key]||t.helper})]}),a(),t.helper&&t.type!=="boolean"&&l.jsx("p",{className:"text-[11px] text-muted",children:t.helper}),n&&l.jsx("p",{className:"text-[11px] text-bad",children:n})]})},Bc=[{title:"System Profile",description:"Core hardware toggles and high-level system preferences.",fields:[{key:"system.has_solar",label:"Solar panels installed",helper:"Enable PV forecasting and solar optimization",path:["system","has_solar"],type:"boolean"},{key:"system.has_battery",label:"Home battery installed",helper:"Enable battery control and grid arbitrage",path:["system","has_battery"],type:"boolean"},{key:"system.has_water_heater",label:"Smart water heater",helper:"Enable water heating optimization",path:["system","has_water_heater"],type:"boolean"},{key:"export.enable_export",label:"Enable grid export",helper:"[EXPERIMENTAL] Master switch for grid export",path:["export","enable_export"],type:"boolean"}]},{title:"Location & Solar Array",description:"Geolocation and PV array parameters used by the forecasting engine.",fields:[{key:"system.location.latitude",label:"Latitude",helper:"Decimal degrees, positive north. Example: 55.4932",path:["system","location","latitude"],type:"number"},{key:"system.location.longitude",label:"Longitude",helper:"Decimal degrees, positive east. Example: 13.1112",path:["system","location","longitude"],type:"number"},{key:"system.solar_array.azimuth",label:"Solar azimuth ()",helper:"Panel direction: 0 = North, 90 = East, 180 = South, 270 = West.",path:["system","solar_array","azimuth"],type:"azimuth"},{key:"system.solar_array.tilt",label:"Solar tilt ()",helper:"Angle from horizontal. 0 = flat, 90 = vertical.",path:["system","solar_array","tilt"],type:"tilt"},{key:"system.solar_array.kwp",label:"Solar capacity (kWp)",helper:"Total DC peak power of the PV array.",path:["system","solar_array","kwp"],type:"number"}]},{title:"Battery Specifications",description:"Capacity, max power, and SoC limits define safe operating bands.",fields:[{key:"battery.capacity_kwh",label:"Battery capacity (kWh)",path:["battery","capacity_kwh"],type:"number"},{key:"battery.max_charge_power_kw",label:"Max charge power (kW)",path:["battery","max_charge_power_kw"],type:"number"},{key:"battery.max_discharge_power_kw",label:"Max discharge power (kW)",path:["battery","max_discharge_power_kw"],type:"number"},{key:"battery.min_soc_percent",label:"Min SoC (%)",path:["battery","min_soc_percent"],type:"number"},{key:"battery.max_soc_percent",label:"Max SoC (%)",path:["battery","max_soc_percent"],type:"number"},{key:"system.grid.max_power_kw",label:"HARD Grid max power (kW)",helper:"Absolute limit from your grid fuse/connection.",path:["system","grid","max_power_kw"],type:"number"},{key:"grid.import_limit_kw",label:"Soft import limit (kW)",helper:"Threshold for peak power penalties (effekttariff).",path:["grid","import_limit_kw"],type:"number"}]},{title:"Pricing & Timezone",description:"Nordpool zone and local timezone for planner calculations.",fields:[{key:"nordpool.price_area",label:"Nordpool Price Area",helper:"e.g. SE4, NO1, DK2",path:["nordpool","price_area"],type:"text"},{key:"pricing.vat_percent",label:"VAT (%)",path:["pricing","vat_percent"],type:"number"},{key:"pricing.grid_transfer_fee_sek",label:"Grid transfer fee (SEK/kWh)",path:["pricing","grid_transfer_fee_sek"],type:"number"},{key:"pricing.energy_tax_sek",label:"Energy tax (SEK/kWh)",path:["pricing","energy_tax_sek"],type:"number"},{key:"timezone",label:"Timezone",helper:"e.g. Europe/Stockholm",path:["timezone"],type:"text"}]},{title:"Notifications",description:"Configure automated notifications via Home Assistant.",fields:[{key:"executor.notifications.service",label:"HA Notify Service",helper:"e.g. notify.mobile_app_iphone",path:["executor","notifications","service"],type:"service"},{key:"executor.notifications.on_charge_start",label:"On charge start",path:["executor","notifications","on_charge_start"],type:"boolean"},{key:"executor.notifications.on_charge_stop",label:"On charge stop",path:["executor","notifications","on_charge_stop"],type:"boolean"},{key:"executor.notifications.on_discharge_start",label:"On discharge start",path:["executor","notifications","on_discharge_start"],type:"boolean"},{key:"executor.notifications.on_discharge_stop",label:"On discharge stop",path:["executor","notifications","on_discharge_stop"],type:"boolean"},{key:"executor.notifications.on_water_heating_start",label:"On water heating start",path:["executor","notifications","on_water_heat_start"],type:"boolean"},{key:"executor.notifications.on_water_heating_stop",label:"On water heating stop",path:["executor","notifications","on_water_heat_stop"],type:"boolean"},{key:"executor.notifications.on_soc_target_change",label:"On SoC target change",path:["executor","notifications","on_soc_target_change"],type:"boolean"},{key:"executor.notifications.on_override_activated",label:"On override activated",path:["executor","notifications","on_override_activated"],type:"boolean"},{key:"executor.notifications.on_error",label:"On error",path:["executor","notifications","on_error"],type:"boolean"}]},{title:" Home Assistant Connection ",isHA:!0,description:"Connection parameters for your Home Assistant instance.",fields:[{key:"home_assistant.url",label:"HA URL",helper:"e.g. http://homeassistant.local:8123",path:["home_assistant","url"],type:"text"},{key:"home_assistant.token",label:"Long-Lived Access Token",path:["home_assistant","token"],type:"text"}]},{title:"Required HA Entities",isHA:!0,description:"Core sensors and switches required for battery control.",fields:[{key:"input_sensors.battery_soc",label:"Battery SoC (%)",path:["input_sensors","battery_soc"],type:"entity"},{key:"input_sensors.pv_power",label:"PV Power (W/kW)",path:["input_sensors","pv_power"],type:"entity"},{key:"input_sensors.load_power",label:"Load Power (W/kW)",path:["input_sensors","load_power"],type:"entity"},{key:"executor.inverter.work_mode_entity",label:"Work Mode Selector",path:["executor","inverter","work_mode_entity"],type:"entity"},{key:"executor.inverter.grid_charging_entity",label:"Grid Charging Switch",path:["executor","inverter","grid_charging_entity"],type:"entity"},{key:"executor.inverter.max_charging_current_entity",label:"Max Charge Current",path:["executor","inverter","max_charging_current_entity"],type:"entity"},{key:"executor.inverter.max_discharging_current_entity",label:"Max Discharge Current",path:["executor","inverter","max_discharging_current_entity"],type:"entity"}]},{title:"Optional HA Entities",isHA:!0,description:"Optional sensors for better forecasting and dashboard metrics.",fields:[{key:"executor.automation_toggle_entity",label:"Automation Toggle",path:["executor","automation_toggle_entity"],type:"entity"},{key:"executor.manual_override_entity",label:"Manual Override Toggle",path:["executor","manual_override_entity"],type:"entity"},{key:"executor.soc_target_entity",label:"Target SoC Feedback",path:["executor","soc_target_entity"],type:"entity"},{key:"executor.water_heater.target_entity",label:"Water Heater Setpoint",path:["executor","water_heater","target_entity"],type:"entity"},{key:"input_sensors.vacation_mode",label:"Vacation Mode Toggle",path:["input_sensors","vacation_mode"],type:"entity"},{key:"input_sensors.battery_power",label:"Battery Power (W/kW)",helper:"Positive = charging, negative = discharging",path:["input_sensors","battery_power"],type:"entity"},{key:"input_sensors.water_power",label:"Water Heater Power (W/kW)",path:["input_sensors","water_power"],type:"entity"},{key:"input_sensors.grid_power",label:"Grid Power (W/kW)",helper:"Positive = import, negative = export",path:["input_sensors","grid_power"],type:"entity"},{key:"input_sensors.alarm_state",label:"Alarm Control Panel",path:["input_sensors","alarm_state"],type:"entity"},{key:"input_sensors.water_heater_consumption",label:"Water Heater Daily Energy",path:["input_sensors","water_heater_consumption"],type:"entity"},{key:"input_sensors.today_net_cost",label:"Today's Net Cost",path:["input_sensors","today_net_cost"],type:"entity"},{key:"input_sensors.total_battery_charge",label:"Total Battery Charge (kWh)",path:["input_sensors","total_battery_charge"],type:"entity"},{key:"input_sensors.total_battery_discharge",label:"Total Battery Discharge (kWh)",path:["input_sensors","total_battery_discharge"],type:"entity"},{key:"input_sensors.total_grid_export",label:"Total Grid Export (kWh)",path:["input_sensors.total_grid_export"],type:"entity"},{key:"input_sensors.total_grid_import",label:"Total Grid Import (kWh)",path:["input_sensors.total_grid_import"],type:"entity"},{key:"input_sensors.total_load_consumption",label:"Total Load Consumption (kWh)",path:["input_sensors.total_load_consumption"],type:"entity"},{key:"input_sensors.total_pv_production",label:"Total PV Production (kWh)",path:["input_sensors.total_pv_production"],type:"entity"}]}],t0=[{title:"Charging Strategy",description:"Price smoothing, consolidation tolerances, and gap settings that govern charge windows.",fields:[{key:"charging_strategy.price_smoothing_sek_kwh",label:"Price smoothing (SEK/kWh)",path:["charging_strategy","price_smoothing_sek_kwh"],type:"number"},{key:"charging_strategy.block_consolidation_tolerance_sek",label:"Consolidation tolerance (SEK)",path:["charging_strategy","block_consolidation_tolerance_sek"],type:"number"},{key:"charging_strategy.consolidation_max_gap_slots",label:"Max gap slots",path:["charging_strategy","consolidation_max_gap_slots"],type:"number"},{key:"charging_strategy.charge_threshold_percentile",label:"Charge threshold (percentile)",path:["charging_strategy","charge_threshold_percentile"],type:"number"},{key:"charging_strategy.cheap_price_tolerance_sek",label:"Cheap price tolerance (SEK)",path:["charging_strategy","cheap_price_tolerance_sek"],type:"number"}]},{title:"Arbitrage & Export",description:"Export thresholds, peak-only export, and future guard buffers.",fields:[{key:"arbitrage.export_percentile_threshold",label:"Export percentile threshold",path:["arbitrage","export_percentile_threshold"],type:"number"},{key:"arbitrage.enable_peak_only_export",label:"Enable peak-only export",path:["arbitrage","enable_peak_only_export"],type:"boolean",helper:"Override to only export when we hit the percentile threshold."},{key:"arbitrage.export_future_price_guard",label:"Future price guard",path:["arbitrage","export_future_price_guard"],type:"boolean"},{key:"arbitrage.future_price_guard_buffer_sek",label:"Future guard buffer (SEK)",path:["arbitrage","future_price_guard_buffer_sek"],type:"number"},{key:"arbitrage.export_profit_margin_sek",label:"Export profit margin (SEK)",path:["arbitrage","export_profit_margin_sek"],type:"number"}]},{title:"Water Heating",description:"Quota, deferral, and sizing controls for the water heater scheduler.",fields:[{key:"water_heating.power_kw",label:"Water heater power (kW)",path:["water_heating","power_kw"],type:"number"},{key:"water_heating.defer_up_to_hours",label:"Max defer hours",path:["water_heating","defer_up_to_hours"],type:"number"},{key:"water_heating.max_blocks_per_day",label:"Max blocks per day",path:["water_heating","max_blocks_per_day"],type:"number"},{key:"water_heating.min_kwh_per_day",label:"Min kWh/day",path:["water_heating","min_kwh_per_day"],type:"number"},{key:"water_heating.min_spacing_hours",label:"Min spacing (hours)",path:["water_heating","min_spacing_hours"],type:"number",helper:"Minimum gap between heating sessions to avoid efficiency loss."},{key:"water_heating.spacing_penalty_sek",label:"Spacing penalty (SEK)",path:["water_heating","spacing_penalty_sek"],type:"number",helper:"Penalty applied when heating sessions are too close."},{key:"water_heating.schedule_future_only",label:"Schedule future only",path:["water_heating","schedule_future_only"],type:"boolean"}]},{title:"Learning Parameter Limits",description:"Limits that keep learning adjustments conservative.",fields:[{key:"learning.min_sample_threshold",label:"Min sample threshold",path:["learning","min_sample_threshold"],type:"number"},{key:"learning.min_improvement_threshold",label:"Min improvement (%)",path:["learning","min_improvement_threshold"],type:"number"},{key:"learning.max_daily_param_change.battery_use_margin_sek",label:"Battery margin change (SEK)",path:["learning","max_daily_param_change","battery_use_margin_sek"],type:"number"},{key:"learning.max_daily_param_change.export_profit_margin_sek",label:"Export margin change (SEK)",path:["learning","max_daily_param_change","export_profit_margin_sek"],type:"number"},{key:"learning.max_daily_param_change.future_price_guard_buffer_sek",label:"Future guard buffer change (SEK)",path:["learning","max_daily_param_change","future_price_guard_buffer_sek"],type:"number"},{key:"learning.max_daily_param_change.load_safety_margin_percent",label:"Load safety change (%)",path:["learning","max_daily_param_change","load_safety_margin_percent"],type:"number"},{key:"learning.max_daily_param_change.pv_confidence_percent",label:"PV confidence change (%)",path:["learning","max_daily_param_change","pv_confidence_percent"],type:"number"},{key:"learning.max_daily_param_change.s_index_base_factor",label:"S-index base change",path:["learning","max_daily_param_change","s_index_base_factor"],type:"number"},{key:"learning.max_daily_param_change.s_index_pv_deficit_weight",label:"S-index PV weight change",path:["learning","max_daily_param_change","s_index_pv_deficit_weight"],type:"number"},{key:"learning.max_daily_param_change.s_index_temp_weight",label:"S-index temp weight change",path:["learning","max_daily_param_change","s_index_temp_weight"],type:"number"}]},{title:"S-Index Safety",description:"Seasonal index parameters for reserve calculations.",fields:[{key:"s_index.temp_cold_c",label:"Cold temp (C)",path:["s_index","temp_cold_c"],type:"number"},{key:"s_index.s_index_horizon_days",label:"S-Index Horizon (days)",path:["s_index","s_index_horizon_days"],type:"select",options:[{label:"1 Day",value:"1"},{label:"2 Days",value:"2"},{label:"3 Days",value:"3"},{label:"4 Days",value:"4"},{label:"5 Days",value:"5"},{label:"6 Days",value:"6"},{label:"7 Days",value:"7"}]}]}],s0=[{title:"Dashboard Defaults",description:"Overlay defaults and refresh cadence for the planner dashboard.",fields:[{key:"dashboard.auto_refresh_enabled",label:"Auto refresh",helper:"Enable automatic refresh of the dashboard schedule.",path:["dashboard","auto_refresh_enabled"],type:"boolean"}]},{title:"AI Advisor",description:"Control the Smart Advisor LLM settings.",fields:[{key:"advisor.enable_llm",label:"Enable LLM advice",path:["advisor","enable_llm"],type:"boolean"},{key:"advisor.auto_fetch",label:"Auto-fetch advice on dashboard load",path:["advisor","auto_fetch"],type:"boolean"},{key:"advisor.personality",label:"Advisor personality",path:["advisor","personality"],type:"select",options:[{label:"Concise (Money focus)",value:"concise"},{label:"Friendly (Emoji style)",value:"friendly"},{label:"Technical (Data heavy)",value:"technical"}]}]}],n0=[{title:"Experimental Features",description:"Toggle advanced and experimental modes.",fields:[{key:"automation.external_executor_mode",label:"External Executor Mode",helper:"When enabled, Darkstar expects an external system to execute the plan.",path:["automation","external_executor_mode"],type:"boolean"},{key:"automation.write_to_mariadb",label:"Log to MariaDB",helper:"Requires MariaDB credentials in secrets.yaml",path:["automation","write_to_mariadb"],type:"boolean"}]},{title:"Danger Zone",description:"Sensitive actions. Proceed with caution.",fields:[]}],i0=Bc.flatMap(t=>t.fields),r0=t0.flatMap(t=>t.fields),a0=s0.flatMap(t=>t.fields),o0=n0.flatMap(t=>t.fields),WP=[...i0,...r0,...a0,...o0,{key:"dashboard.overlay_defaults",label:"Overlay Defaults",path:["dashboard","overlay_defaults"],type:"text"}];WP.reduce((t,e)=>(t[e.key]=e,t),{});const BP=()=>{const{form:t,fieldErrors:e,loading:s,saving:n,statusMessage:i,haEntities:r,haLoading:a,handleChange:o,save:c,reloadEntities:d}=Fo(i0),[u,h]=y.useState(null),f=async()=>{h("Testing...");try{const m=t["home_assistant.url"],p=t["home_assistant.token"],g=await G.haTest({url:m,token:p});g.success?(h("Success: Connected!"),d()):h(`Error: ${g.message}`)}catch(m){h(`Error: ${m instanceof Error?m.message:"Unknown error"}`)}};return s?l.jsx(re,{className:"p-6 text-sm text-muted",children:"Loading system configuration"}):l.jsxs("div",{className:"space-y-4",children:[Bc.map((m,p)=>{const g=p>0?Bc[p-1]:null,x=m.isHA&&g&&!g.isHA;return l.jsxs("div",{children:[x&&l.jsxs("div",{className:"py-8 flex items-center gap-4",children:[l.jsx("div",{className:"h-px flex-1 bg-line/30"}),l.jsx("span",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-muted whitespace-nowrap",children:"Home Assistant Integration"}),l.jsx("div",{className:"h-px flex-1 bg-line/30"})]}),l.jsxs(re,{className:"p-6",children:[l.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:m.title}),l.jsx("p",{className:"text-xs text-muted mt-1",children:m.description})]}),l.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"System"})]}),l.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:m.fields.map(v=>l.jsx(Io,{field:v,value:t[v.key]??"",onChange:o,error:e[v.key],haEntities:r,haLoading:a},v.key))}),m.title==="Home Assistant Connection"&&l.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:f,className:"rounded-xl px-4 py-2 text-[11px] font-semibold bg-neutral hover:bg-neutral/80 text-white transition",children:u&&u.startsWith("Testing")?"Testing...":"Test Connection"}),u&&l.jsx("span",{className:`text-xs ${u.startsWith("Success")?"text-good":"text-bad"}`,children:u})]})]})]},m.title)}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("button",{disabled:n,onClick:()=>c(),className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:n?"Saving":"Save System Settings"}),i&&l.jsx("div",{className:`rounded-lg p-3 text-sm ${i.startsWith("Please fix")||i.startsWith("Save failed")||i.startsWith("Failed to load")?"bg-bad/10 border border-bad/30 text-bad":"bg-good/10 border border-good/30 text-good"}`,children:i})]})]})},zP=()=>{const{form:t,fieldErrors:e,loading:s,saving:n,statusMessage:i,handleChange:r,save:a}=Fo(r0);return s?l.jsx(re,{className:"p-6 text-sm text-muted",children:"Loading optimization parameters"}):l.jsxs("div",{className:"space-y-4",children:[t0.map(o=>l.jsxs(re,{className:"p-6",children:[l.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:o.title}),l.jsx("p",{className:"text-xs text-muted mt-1",children:o.description})]}),l.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Optimization"})]}),l.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:o.fields.map(c=>l.jsx(Io,{field:c,value:t[c.key]??"",onChange:r,error:e[c.key]},c.key))})]},o.title)),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("button",{disabled:n,onClick:()=>a(),className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:n?"Saving":"Save Parameters"}),i&&l.jsx("div",{className:`rounded-lg p-3 text-sm ${i.startsWith("Please fix")||i.startsWith("Save failed")||i.startsWith("Failed to load")?"bg-bad/10 border border-bad/30 text-bad":"bg-good/10 border border-good/30 text-good"}`,children:i})]})]})},HP=()=>{const{config:t,form:e,fieldErrors:s,loading:n,saving:i,statusMessage:r,handleChange:a,save:o}=Fo(a0),[c,d]=y.useState([]);if(y.useEffect(()=>{G.theme().then(m=>d(m.themes))},[]),n)return l.jsx(re,{className:"p-6 text-sm text-muted",children:"Loading UI configuration"});const u=t?.ui?.theme_accent_index??0,h=e["dashboard.overlay_defaults"]?JSON.parse(e["dashboard.overlay_defaults"]):{},f=m=>{const p={...h,[m]:!h[m]};a("dashboard.overlay_defaults",JSON.stringify(p))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs(re,{className:"p-6",children:[l.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:"Accent Theme"}),l.jsx("p",{className:"text-xs text-muted mt-1",children:"Select the primary accent color for the Darkstar UI."})]}),l.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Appearance"})]}),l.jsx("div",{className:"mt-5 flex flex-wrap gap-3",children:c.map((m,p)=>l.jsxs("button",{onClick:()=>o({ui:{theme_accent_index:p}}),disabled:i,className:`group relative h-12 w-12 rounded-xl transition duration-300 ${u===p?"ring-2 ring-accent ring-offset-4 ring-offset-[#0a0a0a]":"hover:rotate-3 hover:scale-105"}`,style:{backgroundColor:m.palette[0]},children:[l.jsx("span",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 scale-0 text-[10px] text-muted transition group-hover:scale-100 whitespace-nowrap",children:m.name}),u===p&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10 rounded-xl",children:l.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-white shadow-[0_0_8px_white]"})})]},m.name))})]}),s0.map(m=>l.jsxs(re,{className:"p-6",children:[l.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:m.title}),l.jsx("p",{className:"text-xs text-muted mt-1",children:m.description})]}),l.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Interface"})]}),l.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:m.fields.map(p=>l.jsx(Io,{field:p,value:e[p.key]??"",onChange:a,error:s[p.key]},p.key))}),m.title==="Dashboard Defaults"&&l.jsxs("div",{className:"mt-6 border-t border-line/30 pt-4",children:[l.jsx("div",{className:"text-[10px] uppercase tracking-widest text-muted font-bold mb-3",children:"Overlay Defaults"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:["solar","battery","load","grid","water","forecast"].map(p=>l.jsx("button",{onClick:()=>f(p),className:`rounded-lg px-2.5 py-1.5 text-[10px] font-bold uppercase tracking-wider transition ${h[p]?"bg-accent/20 text-accent border border-accent/30":"bg-surface2 text-muted border border-line/50 hover:border-line"}`,children:p},p))})]})]},m.title)),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("button",{disabled:i,onClick:()=>o(),className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:i?"Saving":"Save UI Settings"}),r&&l.jsx("div",{className:`rounded-lg p-3 text-sm ${r.startsWith("Please fix")||r.startsWith("Save failed")||r.startsWith("Failed to load")?"bg-bad/10 border border-bad/30 text-bad":"bg-good/10 border border-good/30 text-good"}`,children:r})]})]})};function l0({open:t,onOpenChange:e,title:s,children:n,footer:i,size:r="md",className:a=""}){const o=y.useRef(null);if(y.useEffect(()=>{const u=h=>{t&&h.key==="Escape"&&e(!1)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t,e]),y.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),!t)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-4xl"},d=l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6",children:[l.jsx("div",{ref:o,className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:u=>{u.target===o.current&&e(!1)}}),l.jsxs("div",{className:`
                    relative w-full ${c[r]} 
                    bg-surface rounded-ds-lg border border-line shadow-2xl 
                    animate-in zoom-in-95 fade-in duration-200
                    flex flex-col max-h-[90vh]
                    ${a}
                `,role:"dialog","aria-modal":"true",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-line shrink-0",children:[l.jsx("div",{className:"text-lg font-semibold text-text",children:s}),l.jsx("button",{onClick:()=>e(!1),className:"p-1 rounded-md text-muted hover:text-text hover:bg-surface2 transition-colors",children:l.jsx(ui,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"px-6 py-4 overflow-y-auto scrollbar-thin",children:n}),i&&l.jsx("div",{className:"px-6 py-4 border-t border-line bg-surface2/30 flex justify-end gap-3 shrink-0 rounded-b-ds-lg",children:i})]})]});return bp.createPortal(d,document.body)}const $P=()=>{const{toast:t}=ou(),{form:e,fieldErrors:s,loading:n,saving:i,statusMessage:r,handleChange:a,save:o,reload:c}=Fo(o0),[d,u]=y.useState(!1),[h,f]=y.useState(!1),m=async()=>{f(!0);try{await G.configReset(),t({message:"Settings reset to factory defaults",variant:"success"}),await c(),u(!1)}catch(p){t({message:"Reset failed: "+(p instanceof Error?p.message:"Unknown error"),variant:"error"})}finally{f(!1)}};return n?l.jsx(re,{className:"p-6 text-sm text-muted",children:"Loading advanced configuration"}):l.jsxs("div",{className:"space-y-4",children:[n0.map(p=>l.jsxs(re,{className:"p-6",children:[l.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:p.title}),l.jsx("p",{className:"text-xs text-muted mt-1",children:p.description})]}),l.jsx("span",{className:"text-[10px] uppercase text-muted tracking-wide",children:"Advanced"})]}),p.title==="Danger Zone"?l.jsx("div",{className:"mt-5 border border-bad/20 bg-bad/5 rounded-xl p-4",children:l.jsxs("div",{className:"flex items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-bold text-bad italic uppercase tracking-wider",children:"Reset All Settings"}),l.jsx("p",{className:"text-[11px] text-bad/80 mt-1",children:"Permanently delete all custom configurations and return to project factory defaults. This action cannot be undone."})]}),l.jsx("button",{onClick:()=>u(!0),className:"rounded-lg bg-bad/20 border border-bad/30 px-3 py-1.5 text-[10px] font-bold text-bad uppercase tracking-wider hover:bg-bad/30 transition",children:"Reset to Defaults"})]})}):l.jsx("div",{className:"mt-5 grid gap-4 sm:grid-cols-2",children:p.fields.map(g=>l.jsx(Io,{field:g,value:e[g.key]??"",onChange:a,error:s[g.key]},g.key))})]},p.title)),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("button",{disabled:i,onClick:()=>o(),className:"flex items-center justify-center gap-2 rounded-xl px-3 py-2.5 text-[11px] font-semibold transition btn-glow-primary bg-accent hover:bg-accent2 text-[#100f0e] disabled:opacity-50",children:i?"Saving":"Save Advanced Settings"}),r&&l.jsx("div",{className:`rounded-lg p-3 text-sm ${r.startsWith("Please fix")||r.startsWith("Save failed")||r.startsWith("Failed to load")?"bg-bad/10 border border-bad/30 text-bad":"bg-good/10 border border-good/30 text-good"}`,children:r})]}),l.jsx(l0,{open:d,onOpenChange:u,title:"Reset to factory defaults?",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-muted",children:["This will clear your location, battery specs, HA tokens, and all optimization parameters. The system will return to the initial state defined in"," ",l.jsx("code",{className:"text-accent",children:"config.yaml"}),"."]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-xs font-semibold text-white/70 hover:text-white transition",children:"Cancel"}),l.jsx("button",{onClick:m,disabled:h,className:"bg-bad hover:bg-bad/80 px-4 py-2 rounded-xl text-xs font-bold text-white transition disabled:opacity-50",children:h?"Resetting...":"Yes, Reset Everything"})]})]})})]})},YP=[{id:"system",label:"System",icon:l.jsx(Ha,{size:16})},{id:"parameters",label:"Parameters",icon:l.jsx(Vv,{size:16})},{id:"ui",label:"UI & Theme",icon:l.jsx(Av,{size:16})},{id:"advanced",label:"Advanced",icon:l.jsx(Dt,{size:16})}];function UP(){const[t,e]=vv(),s=t.get("tab")||"system",n=r=>{e({tab:r})},i=()=>{switch(s){case"parameters":return l.jsx(zP,{});case"ui":return l.jsx(HP,{});case"advanced":return l.jsx($P,{});default:return l.jsx(BP,{})}};return l.jsx(l.Fragment,{children:l.jsx("main",{className:"p-4 lg:p-8",children:l.jsxs("div",{className:"mx-auto max-w-5xl",children:[l.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:YP.map(r=>l.jsxs("button",{onClick:()=>n(r.id),className:`flex items-center gap-2 rounded-xl px-4 py-2.5 text-xs font-bold uppercase tracking-wider transition duration-300 ${s===r.id?"bg-accent text-[#100f0e] shadow-[0_0_20px_rgba(var(--color-accent-rgb),0.3)]":"bg-surface2 text-muted hover:bg-surface3 hover:text-white"}`,children:[r.icon,r.label]},r.id))}),l.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:i()})]})})})}const c0="label";function up(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function GP(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function d0(t,e){t.labels=e}function u0(t,e,s=c0){const n=[];t.datasets=e.map(i=>{const r=t.datasets.find(a=>a[s]===i[s]);return!r||!i.data||n.includes(r)?{...i}:(n.push(r),Object.assign(r,i),r)})}function qP(t,e=c0){const s={labels:[],datasets:[]};return d0(s,t.labels),u0(s,t.datasets,e),s}function KP(t,e){const{height:s=150,width:n=300,redraw:i=!1,datasetIdKey:r,type:a,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=y.useRef(null),p=y.useRef(null),g=()=>{m.current&&(p.current=new At(m.current,{type:a,data:qP(o,r),options:c&&{...c},plugins:d}),up(e,p.current))},x=()=>{up(e,null),p.current&&(p.current.destroy(),p.current=null)};return y.useEffect(()=>{!i&&p.current&&c&&GP(p.current,c)},[i,c]),y.useEffect(()=>{!i&&p.current&&d0(p.current.config.data,o.labels)},[i,o.labels]),y.useEffect(()=>{!i&&p.current&&o.datasets&&u0(p.current.config.data,o.datasets,r)},[i,o.datasets]),y.useEffect(()=>{p.current&&(i?(x(),setTimeout(g)):p.current.update(h))},[i,c,o.labels,o.datasets,h]),y.useEffect(()=>{p.current&&(x(),setTimeout(g))},[a]),y.useEffect(()=>(g(),()=>x()),[]),l.jsx("canvas",{ref:m,role:"img",height:s,width:n,...f,children:u})}const XP=y.forwardRef(KP);function lu(t,e){return At.register(e),y.forwardRef((s,n)=>l.jsx(XP,{...s,ref:n,type:t}))}const cu=lu("line",_g),ZP=lu("bar",vg),JP=lu("radar",kg);At.register(Or,Rr,hi,Ps,gd,mi,fi);function La({slots:t,mode:e,variant:s="field"}){if(!t||t.length===0)return l.jsx("div",{className:"text-[11px] text-muted px-4 py-6",children:"No forecast data available for the next 48 hours."});const n=t.map(f=>new Date(f.slot_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),i=s==="field",r=s==="oled",a=s==="swiss",d=e==="pv"?r?"#22d3ee":a?"#171717":"#22c55e":r?"#f472b6":a?"#ef4444":"#f97316",u={labels:n,datasets:[{type:"line",label:e==="pv"?"Final PV":"Final Load",data:t.map(f=>e==="pv"?f.final.pv_kwh:f.final.load_kwh),borderColor:d,backgroundColor:f=>{const m=f.chart.ctx;if(i){const p=m.createLinearGradient(0,0,0,200);return p.addColorStop(0,e==="pv"?"rgba(34, 197, 94, 0.2)":"rgba(249, 115, 22, 0.2)"),p.addColorStop(1,"rgba(15, 23, 42, 0.0)"),p}return"transparent"},borderWidth:a?4:r?2:3,tension:a?.2:.4,pointRadius:r?2:0,pointBackgroundColor:"#000",pointBorderColor:d,fill:i,shadowColor:i||r?d:"transparent",shadowBlur:i?15:r?8:0},{type:"bar",label:"Base",data:t.map(f=>e==="pv"?f.base.pv_kwh:f.base.load_kwh),backgroundColor:a?"rgba(0,0,0,0.1)":"rgba(255, 255, 255, 0.05)",borderWidth:0,borderRadius:a?0:2,yAxisID:"y",barPercentage:.8}]},h={responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:20,bottom:10,left:10,right:10}},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:r?"#000":"rgba(15, 23, 42, 0.95)",titleColor:r?"#fff":"rgba(255, 255, 255, 0.9)",bodyColor:r?"#fff":"rgba(255, 255, 255, 0.7)",borderColor:r?"#333":"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:10,displayColors:!r,callbacks:{label:f=>{let m=f.dataset.label||"";return m&&(m+=": "),f.parsed.y!==null&&(m+=f.parsed.y.toFixed(3)+" kWh"),m}}}},scales:{x:{grid:{display:r,color:r?"#333":"transparent"},ticks:{color:r?"#666":a?"#000":"#64748b",font:{size:10,family:r?"monospace":"inherit",weight:a?"bold":"normal"},maxTicksLimit:8},border:{display:a||r}},y:{grid:{display:r,color:r?"#333":"transparent"},ticks:{display:!i,color:r?"#666":a?"#000":"#64748b",font:{size:10,family:r?"monospace":"inherit",weight:a?"bold":"normal"}},border:{display:a||r}}},interaction:{intersect:!1,mode:"index"}};return l.jsx("div",{className:`w-full h-full min-h-[240px] ${r?"font-mono":""}`,style:i?{backgroundImage:"radial-gradient(rgb(var(--color-grid) / 0.2) 1px, transparent 1px)",backgroundSize:"20px 20px"}:void 0,children:l.jsx(cu,{data:u,options:h},`${e}-${s}`)})}At.register(Yg,hi,Ps,No,mi,fi);function QP({weatherVolatility:t,riskFactor:e,forecastAccuracy:s,priceSpread:n,forecastBias:i}){const r=Math.min(100,t.cloud*100),a=Math.min(100,t.temp*100),o=Math.max(0,Math.min(100,(e-1)*25)),c=s,d=n!=null?Math.max(0,Math.min(100,n/2.5*100)):50,u=i!=null?Math.max(0,Math.min(100,(i+2)/4*100)):50,h=["Cloud Vol.","Temp Vol.","Aggression","Accuracy","Spread","Bias"],f=["#38bdf8","#f472b6","#fbbf24","#34d399","#a78bfa","#fb923c"],m={labels:h,datasets:[{label:"Current Context",data:[r,a,o,c,d,u],backgroundColor:"rgba(56, 189, 248, 0.15)",borderColor:"rgba(56, 189, 248, 0.5)",borderWidth:2,pointBackgroundColor:f,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:f,pointRadius:4}]},p={scales:{r:{angleLines:{color:"rgba(255, 255, 255, 0.1)"},grid:{color:"rgba(255, 255, 255, 0.1)"},pointLabels:{display:!1},ticks:{display:!1,backdropColor:"transparent"},suggestedMin:0,suggestedMax:100}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1e293b",titleColor:"#f8fafc",bodyColor:"#cbd5e1",borderColor:"#334155",borderWidth:1}},maintainAspectRatio:!1},g=h.slice(0,3),x=h.slice(3);return l.jsxs("div",{className:"relative w-full h-full min-h-[200px]",children:[l.jsx("div",{className:"absolute inset-0 overflow-hidden",children:l.jsx(JP,{data:m,options:p})}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-3 pb-2 z-10",children:[l.jsx("div",{className:"flex flex-col gap-1",children:g.map((v,_)=>l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm ring-1 ring-white/10",style:{backgroundColor:f[_]}}),l.jsx("span",{className:"text-[9px] text-muted font-medium leading-tight",children:v})]},v))}),l.jsx("div",{className:"flex flex-col gap-1",children:x.map((v,_)=>l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm ring-1 ring-white/10",style:{backgroundColor:f[_+3]}}),l.jsx("span",{className:"text-[9px] text-muted font-medium leading-tight",children:v})]},v))})]})]})}function eD({events:t}){const e=y.useMemo(()=>[...t].sort((i,r)=>new Date(r.timestamp).getTime()-new Date(i.timestamp).getTime()),[t]),s=i=>{const r=(i.type+" "+i.message).toLowerCase();if(r.includes("charge")||r.includes("charging"))return l.jsx(Dt,{className:"h-4 w-4 text-amber-400"});if(r.includes("export")||r.includes("discharging"))return l.jsx(sc,{className:"h-4 w-4 text-emerald-400"});if(r.includes("defensive")||r.includes("safety")||r.includes("hold"))return l.jsx(Iv,{className:"h-4 w-4 text-blue-400"});if(r.includes("idle")||r.includes("wait"))return l.jsx(Mv,{className:"h-4 w-4 text-slate-400"});if(r.includes("weather"))return l.jsx(th,{className:"h-4 w-4 text-sky-400"});if(r.includes("learning")||r.includes("tune"))return l.jsx(sh,{className:"h-4 w-4 text-purple-400"});if(r.includes("price")||r.includes("cost"))return l.jsx(tc,{className:"h-4 w-4 text-emerald-400"});switch(i.type){case"STRATEGY_CHANGE":return l.jsx(Op,{className:"h-4 w-4 text-purple-400"});case"WEATHER_ADJUSTMENT":return l.jsx(th,{className:"h-4 w-4 text-blue-400"});case"PRICE_VOLATILITY":return l.jsx(Dt,{className:"h-4 w-4 text-amber-400"});case"LEARNING_EVENT":return l.jsx(sh,{className:"h-4 w-4 text-emerald-400"});default:return l.jsx(ec,{className:"h-4 w-4 text-slate-400"})}},n=i=>new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return t.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted text-xs",children:[l.jsx(ec,{className:"h-6 w-6 mb-2 opacity-50"}),"No activity recorded yet."]}):l.jsxs("div",{className:"relative space-y-4 pl-2",children:[l.jsx("div",{className:"absolute left-[19px] top-2 bottom-2 w-[1px] bg-line/50"}),e.map((i,r)=>l.jsxs("div",{className:"relative flex gap-3 items-start group",children:[l.jsx("div",{className:"relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-surface border border-line/60 group-hover:border-accent/50 transition-colors",children:s(i)}),l.jsxs("div",{className:"flex-1 pt-1.5 min-w-0",children:[l.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[l.jsx("p",{className:"text-xs font-medium text-text truncate",children:i.type.replace("_"," ")}),l.jsx("span",{className:"text-[10px] text-muted shrink-0 font-mono",children:n(i.timestamp)})]}),l.jsx("p",{className:"text-[11px] text-muted mt-0.5 leading-relaxed break-words",children:i.message}),i.details&&Object.keys(i.details).length>0&&l.jsx("div",{className:"mt-1.5",children:l.jsxs("details",{className:"group/details",children:[l.jsxs("summary",{className:"cursor-pointer text-[10px] text-accent/80 hover:text-accent select-none list-none flex items-center gap-1",children:[l.jsx("span",{children:"Details"}),l.jsx("span",{className:"opacity-50 group-open/details:rotate-180 transition-transform",children:""})]}),l.jsx("pre",{className:"mt-1 p-2 rounded bg-surface2/50 text-[10px] text-muted overflow-x-auto font-mono",children:JSON.stringify(i.details,null,2)})]})})]})]},r))]})}function tD({metrics:t,perfData:e}){let s=0,n=0;e?.cost_series&&e.cost_series.forEach(f=>{s+=f.planned,n+=f.realized});const i=n-s,r=i<=0?`Saved ${Math.abs(i).toFixed(1)} SEK`:`Overspent ${i.toFixed(1)} SEK`,a=i<=0,o=t?.mae_pv_aurora?.toFixed(2)??"N/A",c=t?.mae_load_aurora?.toFixed(2)??"N/A",d=t?.max_price_spread,u=d!=null?`${d.toFixed(2)} SEK`:"N/A",h=d!=null&&d>0;return l.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs(re,{className:"p-4 flex items-center justify-between relative overflow-hidden group",children:[l.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${a?"bg-emerald-500":"bg-rose-500"}`}),l.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[l.jsx("div",{className:`p-2 rounded-full ${a?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:l.jsx(Lp,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"7-Day Cost Drift"}),l.jsx("div",{className:`text-lg font-semibold ${a?"text-emerald-400":"text-rose-400"}`,children:r})]})]}),l.jsxs("div",{className:"text-right relative z-10",children:[l.jsx("div",{className:"text-[10px] text-muted",children:"vs Plan"}),a?l.jsx(ih,{className:"h-4 w-4 text-emerald-500 ml-auto"}):l.jsx(tc,{className:"h-4 w-4 text-rose-500 ml-auto"})]})]}),l.jsxs(re,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${h?"bg-emerald-500":"bg-rose-500"}`}),l.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[l.jsx("div",{className:`p-2 rounded-full ${h?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:l.jsx(ni,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"Max Price Spread"}),l.jsx("div",{className:`text-lg font-semibold ${h?"text-emerald-400":"text-rose-400"}`,children:u})]})]}),l.jsxs("div",{className:"text-right relative z-10",children:[l.jsx("div",{className:"text-[10px] text-muted",children:"Arbitrage"}),h?l.jsx(tc,{className:"h-4 w-4 text-emerald-500 ml-auto"}):l.jsx(ih,{className:"h-4 w-4 text-rose-500 ml-auto"})]})]}),l.jsxs(re,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-amber-500/[0.02]"}),l.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[l.jsx("div",{className:"p-2 rounded-full bg-amber-500/10 text-amber-400",children:l.jsx(Dt,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"PV Forecast Error"}),l.jsxs("div",{className:"text-lg font-semibold text-text",children:[o," ",l.jsx("span",{className:"text-xs font-normal text-muted",children:"kWh"})]})]})]}),l.jsxs("div",{className:"text-right relative z-10",children:[l.jsx("div",{className:"text-[10px] text-muted",children:"MAE (7d)"}),l.jsx(nh,{className:"h-4 w-4 text-amber-500/50 ml-auto"})]})]}),l.jsxs(re,{className:"p-4 flex items-center justify-between relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-blue-500/[0.02]"}),l.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[l.jsx("div",{className:"p-2 rounded-full bg-blue-500/10 text-blue-400",children:l.jsx(ni,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted uppercase tracking-wider font-medium",children:"Load Forecast Error"}),l.jsxs("div",{className:"text-lg font-semibold text-text",children:[c," ",l.jsx("span",{className:"text-xs font-normal text-muted",children:"kWh"})]})]})]}),l.jsxs("div",{className:"text-right relative z-10",children:[l.jsx("div",{className:"text-[10px] text-muted",children:"MAE (7d)"}),l.jsx(nh,{className:"h-4 w-4 text-blue-500/50 ml-auto"})]})]})]})}At.register(Or,Rr,hi,Ps,Mo,mi,fi,No);function sD({title:t,slots:e,color:s}){const i={labels:e.map(a=>new Date(a.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})),datasets:[{label:"Actual",data:e.map(a=>a.actual??null),borderColor:"#94a3b8",backgroundColor:"#94a3b8",borderWidth:2,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1},{label:"p90",data:e.map(a=>a.p90),borderColor:`${s}40`,borderWidth:1,backgroundColor:`${s}33`,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:"+1"},{label:"p10 (Risk)",data:e.map(a=>a.p10),borderColor:`${s}80`,borderWidth:1.5,borderDash:[4,4],backgroundColor:"transparent",pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1},{label:"p50 (Forecast)",data:e.map(a=>a.p50),borderColor:s,backgroundColor:s,borderWidth:2,pointRadius:0,pointHitRadius:10,tension:.4,spanGaps:!0,fill:!1}]},r={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#cbd5e1",font:{size:11},boxWidth:8,usePointStyle:!0}},title:{display:!!t,text:t,color:"#e2e8f0",font:{size:13,weight:"normal"},align:"start",padding:{bottom:10}},tooltip:{mode:"index",intersect:!1,backgroundColor:"#1e293b",titleColor:"#e2e8f0",bodyColor:"#cbd5e1",borderColor:"#334155",borderWidth:1}},scales:{x:{grid:{color:"#334155",drawBorder:!1},ticks:{color:"#94a3b8",maxRotation:0,autoSkip:!0,maxTicksLimit:8}},y:{grid:{color:"#334155",drawBorder:!1},ticks:{color:"#94a3b8"},min:0}},interaction:{mode:"nearest",axis:"x",intersect:!1},layout:{padding:{bottom:0,left:10,right:10}}};return l.jsx("div",{className:"w-full h-[250px]",children:l.jsx(cu,{data:i,options:r})})}var h0;function V(){return h0.apply(null,arguments)}function nD(t){h0=t}function Ht(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function jn(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Se(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function du(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Se(t,e))return!1;return!0}function mt(t){return t===void 0}function Ts(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Wr(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function f0(t,e){var s=[],n,i=t.length;for(n=0;n<i;++n)s.push(e(t[n],n));return s}function zs(t,e){for(var s in e)Se(e,s)&&(t[s]=e[s]);return Se(e,"toString")&&(t.toString=e.toString),Se(e,"valueOf")&&(t.valueOf=e.valueOf),t}function os(t,e,s,n){return L0(t,e,s,n,!0).utc()}function iD(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ce(t){return t._pf==null&&(t._pf=iD()),t._pf}var zc;Array.prototype.some?zc=Array.prototype.some:zc=function(t){var e=Object(this),s=e.length>>>0,n;for(n=0;n<s;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};function uu(t){var e=null,s=!1,n=t._d&&!isNaN(t._d.getTime());if(n&&(e=ce(t),s=zc.call(e.parsedDateParts,function(i){return i!=null}),n=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(n=n&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=n;else return n;return t._isValid}function Vo(t){var e=os(NaN);return t!=null?zs(ce(e),t):ce(e).userInvalidated=!0,e}var hp=V.momentProperties=[],zl=!1;function hu(t,e){var s,n,i,r=hp.length;if(mt(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),mt(e._i)||(t._i=e._i),mt(e._f)||(t._f=e._f),mt(e._l)||(t._l=e._l),mt(e._strict)||(t._strict=e._strict),mt(e._tzm)||(t._tzm=e._tzm),mt(e._isUTC)||(t._isUTC=e._isUTC),mt(e._offset)||(t._offset=e._offset),mt(e._pf)||(t._pf=ce(e)),mt(e._locale)||(t._locale=e._locale),r>0)for(s=0;s<r;s++)n=hp[s],i=e[n],mt(i)||(t[n]=i);return t}function Br(t){hu(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),zl===!1&&(zl=!0,V.updateOffset(this),zl=!1)}function $t(t){return t instanceof Br||t!=null&&t._isAMomentObject!=null}function m0(t){V.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Ot(t,e){var s=!0;return zs(function(){if(V.deprecationHandler!=null&&V.deprecationHandler(null,t),s){var n=[],i,r,a,o=arguments.length;for(r=0;r<o;r++){if(i="",typeof arguments[r]=="object"){i+=`
[`+r+"] ";for(a in arguments[0])Se(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[r];n.push(i)}m0(t+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var fp={};function p0(t,e){V.deprecationHandler!=null&&V.deprecationHandler(t,e),fp[t]||(m0(e),fp[t]=!0)}V.suppressDeprecationWarnings=!1;V.deprecationHandler=null;function ls(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function rD(t){var e,s;for(s in t)Se(t,s)&&(e=t[s],ls(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Hc(t,e){var s=zs({},t),n;for(n in e)Se(e,n)&&(jn(t[n])&&jn(e[n])?(s[n]={},zs(s[n],t[n]),zs(s[n],e[n])):e[n]!=null?s[n]=e[n]:delete s[n]);for(n in t)Se(t,n)&&!Se(e,n)&&jn(t[n])&&(s[n]=zs({},s[n]));return s}function fu(t){t!=null&&this.set(t)}var $c;Object.keys?$c=Object.keys:$c=function(t){var e,s=[];for(e in t)Se(t,e)&&s.push(e);return s};var aD={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function oD(t,e,s){var n=this._calendar[t]||this._calendar.sameElse;return ls(n)?n.call(e,s):n}function as(t,e,s){var n=""+Math.abs(t),i=e-n.length,r=t>=0;return(r?s?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var mu=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Sa=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hl={},Qn={};function Z(t,e,s,n){var i=n;typeof n=="string"&&(i=function(){return this[n]()}),t&&(Qn[t]=i),e&&(Qn[e[0]]=function(){return as(i.apply(this,arguments),e[1],e[2])}),s&&(Qn[s]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function lD(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function cD(t){var e=t.match(mu),s,n;for(s=0,n=e.length;s<n;s++)Qn[e[s]]?e[s]=Qn[e[s]]:e[s]=lD(e[s]);return function(i){var r="",a;for(a=0;a<n;a++)r+=ls(e[a])?e[a].call(i,t):e[a];return r}}function Fa(t,e){return t.isValid()?(e=g0(e,t.localeData()),Hl[e]=Hl[e]||cD(e),Hl[e](t)):t.localeData().invalidDate()}function g0(t,e){var s=5;function n(i){return e.longDateFormat(i)||i}for(Sa.lastIndex=0;s>=0&&Sa.test(t);)t=t.replace(Sa,n),Sa.lastIndex=0,s-=1;return t}var dD={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function uD(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(mu).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[t])}var hD="Invalid date";function fD(){return this._invalidDate}var mD="%d",pD=/\d{1,2}/;function gD(t){return this._ordinal.replace("%d",t)}var xD={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function yD(t,e,s,n){var i=this._relativeTime[s];return ls(i)?i(t,e,s,n):i.replace(/%d/i,t)}function bD(t,e){var s=this._relativeTime[t>0?"future":"past"];return ls(s)?s(e):s.replace(/%s/i,e)}var mp={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Rt(t){return typeof t=="string"?mp[t]||mp[t.toLowerCase()]:void 0}function pu(t){var e={},s,n;for(n in t)Se(t,n)&&(s=Rt(n),s&&(e[s]=t[n]));return e}var vD={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function _D(t){var e=[],s;for(s in t)Se(t,s)&&e.push({unit:s,priority:vD[s]});return e.sort(function(n,i){return n.priority-i.priority}),e}var x0=/\d/,wt=/\d\d/,y0=/\d{3}/,gu=/\d{4}/,Wo=/[+-]?\d{6}/,Ee=/\d\d?/,b0=/\d\d\d\d?/,v0=/\d\d\d\d\d\d?/,Bo=/\d{1,3}/,xu=/\d{1,4}/,zo=/[+-]?\d{1,6}/,bi=/\d+/,Ho=/[+-]?\d+/,wD=/Z|[+-]\d\d:?\d\d/gi,$o=/Z|[+-]\d\d(?::?\d\d)?/gi,kD=/[+-]?\d+(\.\d{1,3})?/,zr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,vi=/^[1-9]\d?/,yu=/^([1-9]\d|\d)/,co;co={};function Y(t,e,s){co[t]=ls(e)?e:function(n,i){return n&&s?s:e}}function SD(t,e){return Se(co,t)?co[t](e._strict,e._locale):new RegExp(jD(t))}function jD(t){return js(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,n,i,r){return s||n||i||r}))}function js(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Pt(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function be(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=Pt(e)),s}var Yc={};function Me(t,e){var s,n=e,i;for(typeof t=="string"&&(t=[t]),Ts(e)&&(n=function(r,a){a[e]=be(r)}),i=t.length,s=0;s<i;s++)Yc[t[s]]=n}function Hr(t,e){Me(t,function(s,n,i,r){i._w=i._w||{},e(s,i._w,i,r)})}function ND(t,e,s){e!=null&&Se(Yc,t)&&Yc[t](e,s._a,s,t)}function Yo(t){return t%4===0&&t%100!==0||t%400===0}var dt=0,_s=1,es=2,Je=3,zt=4,ws=5,vn=6,MD=7,TD=8;Z("Y",0,0,function(){var t=this.year();return t<=9999?as(t,4):"+"+t});Z(0,["YY",2],0,function(){return this.year()%100});Z(0,["YYYY",4],0,"year");Z(0,["YYYYY",5],0,"year");Z(0,["YYYYYY",6,!0],0,"year");Y("Y",Ho);Y("YY",Ee,wt);Y("YYYY",xu,gu);Y("YYYYY",zo,Wo);Y("YYYYYY",zo,Wo);Me(["YYYYY","YYYYYY"],dt);Me("YYYY",function(t,e){e[dt]=t.length===2?V.parseTwoDigitYear(t):be(t)});Me("YY",function(t,e){e[dt]=V.parseTwoDigitYear(t)});Me("Y",function(t,e){e[dt]=parseInt(t,10)});function lr(t){return Yo(t)?366:365}V.parseTwoDigitYear=function(t){return be(t)+(be(t)>68?1900:2e3)};var _0=_i("FullYear",!0);function CD(){return Yo(this.year())}function _i(t,e){return function(s){return s!=null?(w0(this,t,s),V.updateOffset(this,e),this):Nr(this,t)}}function Nr(t,e){if(!t.isValid())return NaN;var s=t._d,n=t._isUTC;switch(e){case"Milliseconds":return n?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return n?s.getUTCSeconds():s.getSeconds();case"Minutes":return n?s.getUTCMinutes():s.getMinutes();case"Hours":return n?s.getUTCHours():s.getHours();case"Date":return n?s.getUTCDate():s.getDate();case"Day":return n?s.getUTCDay():s.getDay();case"Month":return n?s.getUTCMonth():s.getMonth();case"FullYear":return n?s.getUTCFullYear():s.getFullYear();default:return NaN}}function w0(t,e,s){var n,i,r,a,o;if(!(!t.isValid()||isNaN(s))){switch(n=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?n.setUTCMilliseconds(s):n.setMilliseconds(s));case"Seconds":return void(i?n.setUTCSeconds(s):n.setSeconds(s));case"Minutes":return void(i?n.setUTCMinutes(s):n.setMinutes(s));case"Hours":return void(i?n.setUTCHours(s):n.setHours(s));case"Date":return void(i?n.setUTCDate(s):n.setDate(s));case"FullYear":break;default:return}r=s,a=t.month(),o=t.date(),o=o===29&&a===1&&!Yo(r)?28:o,i?n.setUTCFullYear(r,a,o):n.setFullYear(r,a,o)}}function PD(t){return t=Rt(t),ls(this[t])?this[t]():this}function DD(t,e){if(typeof t=="object"){t=pu(t);var s=_D(t),n,i=s.length;for(n=0;n<i;n++)this[s[n].unit](t[s[n].unit])}else if(t=Rt(t),ls(this[t]))return this[t](e);return this}function ED(t,e){return(t%e+e)%e}var Ye;Array.prototype.indexOf?Ye=Array.prototype.indexOf:Ye=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function bu(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=ED(e,12);return t+=(e-s)/12,s===1?Yo(t)?29:28:31-s%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1});Z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Z("MMMM",0,0,function(t){return this.localeData().months(this,t)});Y("M",Ee,vi);Y("MM",Ee,wt);Y("MMM",function(t,e){return e.monthsShortRegex(t)});Y("MMMM",function(t,e){return e.monthsRegex(t)});Me(["M","MM"],function(t,e){e[_s]=be(t)-1});Me(["MMM","MMMM"],function(t,e,s,n){var i=s._locale.monthsParse(t,n,s._strict);i!=null?e[_s]=i:ce(s).invalidMonth=t});var AD="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),k0="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),S0=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,OD=zr,RD=zr;function LD(t,e){return t?Ht(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||S0).test(e)?"format":"standalone"][t.month()]:Ht(this._months)?this._months:this._months.standalone}function FD(t,e){return t?Ht(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[S0.test(e)?"format":"standalone"][t.month()]:Ht(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ID(t,e,s){var n,i,r,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=os([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return s?e==="MMM"?(i=Ye.call(this._shortMonthsParse,a),i!==-1?i:null):(i=Ye.call(this._longMonthsParse,a),i!==-1?i:null):e==="MMM"?(i=Ye.call(this._shortMonthsParse,a),i!==-1?i:(i=Ye.call(this._longMonthsParse,a),i!==-1?i:null)):(i=Ye.call(this._longMonthsParse,a),i!==-1?i:(i=Ye.call(this._shortMonthsParse,a),i!==-1?i:null))}function VD(t,e,s){var n,i,r;if(this._monthsParseExact)return ID.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=os([2e3,n]),s&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!s&&!this._monthsParse[n]&&(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[n].test(t))return n;if(s&&e==="MMM"&&this._shortMonthsParse[n].test(t))return n;if(!s&&this._monthsParse[n].test(t))return n}}function j0(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=be(e);else if(e=t.localeData().monthsParse(e),!Ts(e))return t}var s=e,n=t.date();return n=n<29?n:Math.min(n,bu(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,n):t._d.setMonth(s,n),t}function N0(t){return t!=null?(j0(this,t),V.updateOffset(this,!0),this):Nr(this,"Month")}function WD(){return bu(this.year(),this.month())}function BD(t){return this._monthsParseExact?(Se(this,"_monthsRegex")||M0.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Se(this,"_monthsShortRegex")||(this._monthsShortRegex=OD),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function zD(t){return this._monthsParseExact?(Se(this,"_monthsRegex")||M0.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Se(this,"_monthsRegex")||(this._monthsRegex=RD),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function M0(){function t(c,d){return d.length-c.length}var e=[],s=[],n=[],i,r,a,o;for(i=0;i<12;i++)r=os([2e3,i]),a=js(this.monthsShort(r,"")),o=js(this.months(r,"")),e.push(a),s.push(o),n.push(o),n.push(a);e.sort(t),s.sort(t),n.sort(t),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function HD(t,e,s,n,i,r,a){var o;return t<100&&t>=0?(o=new Date(t+400,e,s,n,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,s,n,i,r,a),o}function Mr(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function uo(t,e,s){var n=7+e-s,i=(7+Mr(t,0,n).getUTCDay()-e)%7;return-i+n-1}function T0(t,e,s,n,i){var r=(7+s-n)%7,a=uo(t,n,i),o=1+7*(e-1)+r+a,c,d;return o<=0?(c=t-1,d=lr(c)+o):o>lr(t)?(c=t+1,d=o-lr(t)):(c=t,d=o),{year:c,dayOfYear:d}}function Tr(t,e,s){var n=uo(t.year(),e,s),i=Math.floor((t.dayOfYear()-n-1)/7)+1,r,a;return i<1?(a=t.year()-1,r=i+Ns(a,e,s)):i>Ns(t.year(),e,s)?(r=i-Ns(t.year(),e,s),a=t.year()+1):(a=t.year(),r=i),{week:r,year:a}}function Ns(t,e,s){var n=uo(t,e,s),i=uo(t+1,e,s);return(lr(t)-n+i)/7}Z("w",["ww",2],"wo","week");Z("W",["WW",2],"Wo","isoWeek");Y("w",Ee,vi);Y("ww",Ee,wt);Y("W",Ee,vi);Y("WW",Ee,wt);Hr(["w","ww","W","WW"],function(t,e,s,n){e[n.substr(0,1)]=be(t)});function $D(t){return Tr(t,this._week.dow,this._week.doy).week}var YD={dow:0,doy:6};function UD(){return this._week.dow}function GD(){return this._week.doy}function qD(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function KD(t){var e=Tr(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Z("d",0,"do","day");Z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Z("e",0,0,"weekday");Z("E",0,0,"isoWeekday");Y("d",Ee);Y("e",Ee);Y("E",Ee);Y("dd",function(t,e){return e.weekdaysMinRegex(t)});Y("ddd",function(t,e){return e.weekdaysShortRegex(t)});Y("dddd",function(t,e){return e.weekdaysRegex(t)});Hr(["dd","ddd","dddd"],function(t,e,s,n){var i=s._locale.weekdaysParse(t,n,s._strict);i!=null?e.d=i:ce(s).invalidWeekday=t});Hr(["d","e","E"],function(t,e,s,n){e[n]=be(t)});function XD(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function ZD(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function vu(t,e){return t.slice(e,7).concat(t.slice(0,e))}var JD="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),C0="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),QD="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),e5=zr,t5=zr,s5=zr;function n5(t,e){var s=Ht(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?vu(s,this._week.dow):t?s[t.day()]:s}function i5(t){return t===!0?vu(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function r5(t){return t===!0?vu(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function a5(t,e,s){var n,i,r,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=os([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return s?e==="dddd"?(i=Ye.call(this._weekdaysParse,a),i!==-1?i:null):e==="ddd"?(i=Ye.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=Ye.call(this._minWeekdaysParse,a),i!==-1?i:null):e==="dddd"?(i=Ye.call(this._weekdaysParse,a),i!==-1||(i=Ye.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=Ye.call(this._minWeekdaysParse,a),i!==-1?i:null)):e==="ddd"?(i=Ye.call(this._shortWeekdaysParse,a),i!==-1||(i=Ye.call(this._weekdaysParse,a),i!==-1)?i:(i=Ye.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=Ye.call(this._minWeekdaysParse,a),i!==-1||(i=Ye.call(this._weekdaysParse,a),i!==-1)?i:(i=Ye.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function o5(t,e,s){var n,i,r;if(this._weekdaysParseExact)return a5.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=os([2e3,1]).day(n),s&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[n].test(t))return n;if(s&&e==="ddd"&&this._shortWeekdaysParse[n].test(t))return n;if(s&&e==="dd"&&this._minWeekdaysParse[n].test(t))return n;if(!s&&this._weekdaysParse[n].test(t))return n}}function l5(t){if(!this.isValid())return t!=null?this:NaN;var e=Nr(this,"Day");return t!=null?(t=XD(t,this.localeData()),this.add(t-e,"d")):e}function c5(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function d5(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=ZD(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function u5(t){return this._weekdaysParseExact?(Se(this,"_weekdaysRegex")||_u.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Se(this,"_weekdaysRegex")||(this._weekdaysRegex=e5),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function h5(t){return this._weekdaysParseExact?(Se(this,"_weekdaysRegex")||_u.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Se(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=t5),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function f5(t){return this._weekdaysParseExact?(Se(this,"_weekdaysRegex")||_u.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Se(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=s5),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function _u(){function t(u,h){return h.length-u.length}var e=[],s=[],n=[],i=[],r,a,o,c,d;for(r=0;r<7;r++)a=os([2e3,1]).day(r),o=js(this.weekdaysMin(a,"")),c=js(this.weekdaysShort(a,"")),d=js(this.weekdays(a,"")),e.push(o),s.push(c),n.push(d),i.push(o),i.push(c),i.push(d);e.sort(t),s.sort(t),n.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function wu(){return this.hours()%12||12}function m5(){return this.hours()||24}Z("H",["HH",2],0,"hour");Z("h",["hh",2],0,wu);Z("k",["kk",2],0,m5);Z("hmm",0,0,function(){return""+wu.apply(this)+as(this.minutes(),2)});Z("hmmss",0,0,function(){return""+wu.apply(this)+as(this.minutes(),2)+as(this.seconds(),2)});Z("Hmm",0,0,function(){return""+this.hours()+as(this.minutes(),2)});Z("Hmmss",0,0,function(){return""+this.hours()+as(this.minutes(),2)+as(this.seconds(),2)});function P0(t,e){Z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}P0("a",!0);P0("A",!1);function D0(t,e){return e._meridiemParse}Y("a",D0);Y("A",D0);Y("H",Ee,yu);Y("h",Ee,vi);Y("k",Ee,vi);Y("HH",Ee,wt);Y("hh",Ee,wt);Y("kk",Ee,wt);Y("hmm",b0);Y("hmmss",v0);Y("Hmm",b0);Y("Hmmss",v0);Me(["H","HH"],Je);Me(["k","kk"],function(t,e,s){var n=be(t);e[Je]=n===24?0:n});Me(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});Me(["h","hh"],function(t,e,s){e[Je]=be(t),ce(s).bigHour=!0});Me("hmm",function(t,e,s){var n=t.length-2;e[Je]=be(t.substr(0,n)),e[zt]=be(t.substr(n)),ce(s).bigHour=!0});Me("hmmss",function(t,e,s){var n=t.length-4,i=t.length-2;e[Je]=be(t.substr(0,n)),e[zt]=be(t.substr(n,2)),e[ws]=be(t.substr(i)),ce(s).bigHour=!0});Me("Hmm",function(t,e,s){var n=t.length-2;e[Je]=be(t.substr(0,n)),e[zt]=be(t.substr(n))});Me("Hmmss",function(t,e,s){var n=t.length-4,i=t.length-2;e[Je]=be(t.substr(0,n)),e[zt]=be(t.substr(n,2)),e[ws]=be(t.substr(i))});function p5(t){return(t+"").toLowerCase().charAt(0)==="p"}var g5=/[ap]\.?m?\.?/i,x5=_i("Hours",!0);function y5(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var E0={calendar:aD,longDateFormat:dD,invalidDate:hD,ordinal:mD,dayOfMonthOrdinalParse:pD,relativeTime:xD,months:AD,monthsShort:k0,week:YD,weekdays:JD,weekdaysMin:QD,weekdaysShort:C0,meridiemParse:g5},Oe={},Vi={},Cr;function b5(t,e){var s,n=Math.min(t.length,e.length);for(s=0;s<n;s+=1)if(t[s]!==e[s])return s;return n}function pp(t){return t&&t.toLowerCase().replace("_","-")}function v5(t){for(var e=0,s,n,i,r;e<t.length;){for(r=pp(t[e]).split("-"),s=r.length,n=pp(t[e+1]),n=n?n.split("-"):null;s>0;){if(i=Uo(r.slice(0,s).join("-")),i)return i;if(n&&n.length>=s&&b5(r,n)>=s-1)break;s--}e++}return Cr}function _5(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Uo(t){var e=null,s;if(Oe[t]===void 0&&typeof module<"u"&&module&&module.exports&&_5(t))try{e=Cr._abbr,s=require,s("./locale/"+t),Gs(e)}catch{Oe[t]=null}return Oe[t]}function Gs(t,e){var s;return t&&(mt(e)?s=Ds(t):s=ku(t,e),s?Cr=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Cr._abbr}function ku(t,e){if(e!==null){var s,n=E0;if(e.abbr=t,Oe[t]!=null)p0("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Oe[t]._config;else if(e.parentLocale!=null)if(Oe[e.parentLocale]!=null)n=Oe[e.parentLocale]._config;else if(s=Uo(e.parentLocale),s!=null)n=s._config;else return Vi[e.parentLocale]||(Vi[e.parentLocale]=[]),Vi[e.parentLocale].push({name:t,config:e}),null;return Oe[t]=new fu(Hc(n,e)),Vi[t]&&Vi[t].forEach(function(i){ku(i.name,i.config)}),Gs(t),Oe[t]}else return delete Oe[t],null}function w5(t,e){if(e!=null){var s,n,i=E0;Oe[t]!=null&&Oe[t].parentLocale!=null?Oe[t].set(Hc(Oe[t]._config,e)):(n=Uo(t),n!=null&&(i=n._config),e=Hc(i,e),n==null&&(e.abbr=t),s=new fu(e),s.parentLocale=Oe[t],Oe[t]=s),Gs(t)}else Oe[t]!=null&&(Oe[t].parentLocale!=null?(Oe[t]=Oe[t].parentLocale,t===Gs()&&Gs(t)):Oe[t]!=null&&delete Oe[t]);return Oe[t]}function Ds(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Cr;if(!Ht(t)){if(e=Uo(t),e)return e;t=[t]}return v5(t)}function k5(){return $c(Oe)}function Su(t){var e,s=t._a;return s&&ce(t).overflow===-2&&(e=s[_s]<0||s[_s]>11?_s:s[es]<1||s[es]>bu(s[dt],s[_s])?es:s[Je]<0||s[Je]>24||s[Je]===24&&(s[zt]!==0||s[ws]!==0||s[vn]!==0)?Je:s[zt]<0||s[zt]>59?zt:s[ws]<0||s[ws]>59?ws:s[vn]<0||s[vn]>999?vn:-1,ce(t)._overflowDayOfYear&&(e<dt||e>es)&&(e=es),ce(t)._overflowWeeks&&e===-1&&(e=MD),ce(t)._overflowWeekday&&e===-1&&(e=TD),ce(t).overflow=e),t}var S5=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,j5=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,N5=/Z|[+-]\d\d(?::?\d\d)?/,ja=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],$l=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],M5=/^\/?Date\((-?\d+)/i,T5=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,C5={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function A0(t){var e,s,n=t._i,i=S5.exec(n)||j5.exec(n),r,a,o,c,d=ja.length,u=$l.length;if(i){for(ce(t).iso=!0,e=0,s=d;e<s;e++)if(ja[e][1].exec(i[1])){a=ja[e][0],r=ja[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(i[3]){for(e=0,s=u;e<s;e++)if($l[e][1].exec(i[3])){o=(i[2]||" ")+$l[e][0];break}if(o==null){t._isValid=!1;return}}if(!r&&o!=null){t._isValid=!1;return}if(i[4])if(N5.exec(i[4]))c="Z";else{t._isValid=!1;return}t._f=a+(o||"")+(c||""),Nu(t)}else t._isValid=!1}function P5(t,e,s,n,i,r){var a=[D5(t),k0.indexOf(e),parseInt(s,10),parseInt(n,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function D5(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function E5(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function A5(t,e,s){if(t){var n=C0.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(n!==i)return ce(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function O5(t,e,s){if(t)return C5[t];if(e)return 0;var n=parseInt(s,10),i=n%100,r=(n-i)/100;return r*60+i}function O0(t){var e=T5.exec(E5(t._i)),s;if(e){if(s=P5(e[4],e[3],e[2],e[5],e[6],e[7]),!A5(e[1],s,t))return;t._a=s,t._tzm=O5(e[8],e[9],e[10]),t._d=Mr.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ce(t).rfc2822=!0}else t._isValid=!1}function R5(t){var e=M5.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(A0(t),t._isValid===!1)delete t._isValid;else return;if(O0(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:V.createFromInputFallback(t)}V.createFromInputFallback=Ot("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function $n(t,e,s){return t??e??s}function L5(t){var e=new Date(V.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function ju(t){var e,s,n=[],i,r,a;if(!t._d){for(i=L5(t),t._w&&t._a[es]==null&&t._a[_s]==null&&F5(t),t._dayOfYear!=null&&(a=$n(t._a[dt],i[dt]),(t._dayOfYear>lr(a)||t._dayOfYear===0)&&(ce(t)._overflowDayOfYear=!0),s=Mr(a,0,t._dayOfYear),t._a[_s]=s.getUTCMonth(),t._a[es]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=n[e]=i[e];for(;e<7;e++)t._a[e]=n[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Je]===24&&t._a[zt]===0&&t._a[ws]===0&&t._a[vn]===0&&(t._nextDay=!0,t._a[Je]=0),t._d=(t._useUTC?Mr:HD).apply(null,n),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Je]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==r&&(ce(t).weekdayMismatch=!0)}}function F5(t){var e,s,n,i,r,a,o,c,d;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,a=4,s=$n(e.GG,t._a[dt],Tr(De(),1,4).year),n=$n(e.W,1),i=$n(e.E,1),(i<1||i>7)&&(c=!0)):(r=t._locale._week.dow,a=t._locale._week.doy,d=Tr(De(),r,a),s=$n(e.gg,t._a[dt],d.year),n=$n(e.w,d.week),e.d!=null?(i=e.d,(i<0||i>6)&&(c=!0)):e.e!=null?(i=e.e+r,(e.e<0||e.e>6)&&(c=!0)):i=r),n<1||n>Ns(s,r,a)?ce(t)._overflowWeeks=!0:c!=null?ce(t)._overflowWeekday=!0:(o=T0(s,n,i,r,a),t._a[dt]=o.year,t._dayOfYear=o.dayOfYear)}V.ISO_8601=function(){};V.RFC_2822=function(){};function Nu(t){if(t._f===V.ISO_8601){A0(t);return}if(t._f===V.RFC_2822){O0(t);return}t._a=[],ce(t).empty=!0;var e=""+t._i,s,n,i,r,a,o=e.length,c=0,d,u;for(i=g0(t._f,t._locale).match(mu)||[],u=i.length,s=0;s<u;s++)r=i[s],n=(e.match(SD(r,t))||[])[0],n&&(a=e.substr(0,e.indexOf(n)),a.length>0&&ce(t).unusedInput.push(a),e=e.slice(e.indexOf(n)+n.length),c+=n.length),Qn[r]?(n?ce(t).empty=!1:ce(t).unusedTokens.push(r),ND(r,n,t)):t._strict&&!n&&ce(t).unusedTokens.push(r);ce(t).charsLeftOver=o-c,e.length>0&&ce(t).unusedInput.push(e),t._a[Je]<=12&&ce(t).bigHour===!0&&t._a[Je]>0&&(ce(t).bigHour=void 0),ce(t).parsedDateParts=t._a.slice(0),ce(t).meridiem=t._meridiem,t._a[Je]=I5(t._locale,t._a[Je],t._meridiem),d=ce(t).era,d!==null&&(t._a[dt]=t._locale.erasConvertYear(d,t._a[dt])),ju(t),Su(t)}function I5(t,e,s){var n;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(n=t.isPM(s),n&&e<12&&(e+=12),!n&&e===12&&(e=0)),e)}function V5(t){var e,s,n,i,r,a,o=!1,c=t._f.length;if(c===0){ce(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<c;i++)r=0,a=!1,e=hu({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],Nu(e),uu(e)&&(a=!0),r+=ce(e).charsLeftOver,r+=ce(e).unusedTokens.length*10,ce(e).score=r,o?r<n&&(n=r,s=e):(n==null||r<n||a)&&(n=r,s=e,a&&(o=!0));zs(t,s||e)}function W5(t){if(!t._d){var e=pu(t._i),s=e.day===void 0?e.date:e.day;t._a=f0([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(n){return n&&parseInt(n,10)}),ju(t)}}function B5(t){var e=new Br(Su(R0(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function R0(t){var e=t._i,s=t._f;return t._locale=t._locale||Ds(t._l),e===null||s===void 0&&e===""?Vo({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),$t(e)?new Br(Su(e)):(Wr(e)?t._d=e:Ht(s)?V5(t):s?Nu(t):z5(t),uu(t)||(t._d=null),t))}function z5(t){var e=t._i;mt(e)?t._d=new Date(V.now()):Wr(e)?t._d=new Date(e.valueOf()):typeof e=="string"?R5(t):Ht(e)?(t._a=f0(e.slice(0),function(s){return parseInt(s,10)}),ju(t)):jn(e)?W5(t):Ts(e)?t._d=new Date(e):V.createFromInputFallback(t)}function L0(t,e,s,n,i){var r={};return(e===!0||e===!1)&&(n=e,e=void 0),(s===!0||s===!1)&&(n=s,s=void 0),(jn(t)&&du(t)||Ht(t)&&t.length===0)&&(t=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=i,r._l=s,r._i=t,r._f=e,r._strict=n,B5(r)}function De(t,e,s,n){return L0(t,e,s,n,!1)}var H5=Ot("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Vo()}),$5=Ot("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Vo()});function F0(t,e){var s,n;if(e.length===1&&Ht(e[0])&&(e=e[0]),!e.length)return De();for(s=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][t](s))&&(s=e[n]);return s}function Y5(){var t=[].slice.call(arguments,0);return F0("isBefore",t)}function U5(){var t=[].slice.call(arguments,0);return F0("isAfter",t)}var G5=function(){return Date.now?Date.now():+new Date},Wi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function q5(t){var e,s=!1,n,i=Wi.length;for(e in t)if(Se(t,e)&&!(Ye.call(Wi,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(n=0;n<i;++n)if(t[Wi[n]]){if(s)return!1;parseFloat(t[Wi[n]])!==be(t[Wi[n]])&&(s=!0)}return!0}function K5(){return this._isValid}function X5(){return Yt(NaN)}function Go(t){var e=pu(t),s=e.year||0,n=e.quarter||0,i=e.month||0,r=e.week||e.isoWeek||0,a=e.day||0,o=e.hour||0,c=e.minute||0,d=e.second||0,u=e.millisecond||0;this._isValid=q5(e),this._milliseconds=+u+d*1e3+c*6e4+o*1e3*60*60,this._days=+a+r*7,this._months=+i+n*3+s*12,this._data={},this._locale=Ds(),this._bubble()}function Ia(t){return t instanceof Go}function Uc(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Z5(t,e,s){var n=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),r=0,a;for(a=0;a<n;a++)be(t[a])!==be(e[a])&&r++;return r+i}function I0(t,e){Z(t,0,0,function(){var s=this.utcOffset(),n="+";return s<0&&(s=-s,n="-"),n+as(~~(s/60),2)+e+as(~~s%60,2)})}I0("Z",":");I0("ZZ","");Y("Z",$o);Y("ZZ",$o);Me(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=Mu($o,t)});var J5=/([\+\-]|\d\d)/gi;function Mu(t,e){var s=(e||"").match(t),n,i,r;return s===null?null:(n=s[s.length-1]||[],i=(n+"").match(J5)||["-",0,0],r=+(i[1]*60)+be(i[2]),r===0?0:i[0]==="+"?r:-r)}function Tu(t,e){var s,n;return e._isUTC?(s=e.clone(),n=($t(t)||Wr(t)?t.valueOf():De(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+n),V.updateOffset(s,!1),s):De(t).local()}function Gc(t){return-Math.round(t._d.getTimezoneOffset())}V.updateOffset=function(){};function Q5(t,e,s){var n=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Mu($o,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(i=Gc(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),n!==t&&(!e||this._changeInProgress?B0(this,Yt(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,V.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:Gc(this)}function eE(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function tE(t){return this.utcOffset(0,t)}function sE(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Gc(this),"m")),this}function nE(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Mu(wD,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function iE(t){return this.isValid()?(t=t?De(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function rE(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function aE(){if(!mt(this._isDSTShifted))return this._isDSTShifted;var t={},e;return hu(t,this),t=R0(t),t._a?(e=t._isUTC?os(t._a):De(t._a),this._isDSTShifted=this.isValid()&&Z5(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function oE(){return this.isValid()?!this._isUTC:!1}function lE(){return this.isValid()?this._isUTC:!1}function V0(){return this.isValid()?this._isUTC&&this._offset===0:!1}var cE=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,dE=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Yt(t,e){var s=t,n=null,i,r,a;return Ia(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:Ts(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(n=cE.exec(t))?(i=n[1]==="-"?-1:1,s={y:0,d:be(n[es])*i,h:be(n[Je])*i,m:be(n[zt])*i,s:be(n[ws])*i,ms:be(Uc(n[vn]*1e3))*i}):(n=dE.exec(t))?(i=n[1]==="-"?-1:1,s={y:mn(n[2],i),M:mn(n[3],i),w:mn(n[4],i),d:mn(n[5],i),h:mn(n[6],i),m:mn(n[7],i),s:mn(n[8],i)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=uE(De(s.from),De(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),r=new Go(s),Ia(t)&&Se(t,"_locale")&&(r._locale=t._locale),Ia(t)&&Se(t,"_isValid")&&(r._isValid=t._isValid),r}Yt.fn=Go.prototype;Yt.invalid=X5;function mn(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function gp(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function uE(t,e){var s;return t.isValid()&&e.isValid()?(e=Tu(e,t),t.isBefore(e)?s=gp(t,e):(s=gp(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function W0(t,e){return function(s,n){var i,r;return n!==null&&!isNaN(+n)&&(p0(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=s,s=n,n=r),i=Yt(s,n),B0(this,i,t),this}}function B0(t,e,s,n){var i=e._milliseconds,r=Uc(e._days),a=Uc(e._months);t.isValid()&&(n=n??!0,a&&j0(t,Nr(t,"Month")+a*s),r&&w0(t,"Date",Nr(t,"Date")+r*s),i&&t._d.setTime(t._d.valueOf()+i*s),n&&V.updateOffset(t,r||a))}var hE=W0(1,"add"),fE=W0(-1,"subtract");function z0(t){return typeof t=="string"||t instanceof String}function mE(t){return $t(t)||Wr(t)||z0(t)||Ts(t)||gE(t)||pE(t)||t===null||t===void 0}function pE(t){var e=jn(t)&&!du(t),s=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,r,a=n.length;for(i=0;i<a;i+=1)r=n[i],s=s||Se(t,r);return e&&s}function gE(t){var e=Ht(t),s=!1;return e&&(s=t.filter(function(n){return!Ts(n)&&z0(t)}).length===0),e&&s}function xE(t){var e=jn(t)&&!du(t),s=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,r;for(i=0;i<n.length;i+=1)r=n[i],s=s||Se(t,r);return e&&s}function yE(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function bE(t,e){arguments.length===1&&(arguments[0]?mE(arguments[0])?(t=arguments[0],e=void 0):xE(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||De(),n=Tu(s,this).startOf("day"),i=V.calendarFormat(this,n)||"sameElse",r=e&&(ls(e[i])?e[i].call(this,s):e[i]);return this.format(r||this.localeData().calendar(i,this,De(s)))}function vE(){return new Br(this)}function _E(t,e){var s=$t(t)?t:De(t);return this.isValid()&&s.isValid()?(e=Rt(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function wE(t,e){var s=$t(t)?t:De(t);return this.isValid()&&s.isValid()?(e=Rt(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function kE(t,e,s,n){var i=$t(t)?t:De(t),r=$t(e)?e:De(e);return this.isValid()&&i.isValid()&&r.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(i,s):!this.isBefore(i,s))&&(n[1]===")"?this.isBefore(r,s):!this.isAfter(r,s))):!1}function SE(t,e){var s=$t(t)?t:De(t),n;return this.isValid()&&s.isValid()?(e=Rt(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function jE(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function NE(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ME(t,e,s){var n,i,r;if(!this.isValid())return NaN;if(n=Tu(t,this),!n.isValid())return NaN;switch(i=(n.utcOffset()-this.utcOffset())*6e4,e=Rt(e),e){case"year":r=Va(this,n)/12;break;case"month":r=Va(this,n);break;case"quarter":r=Va(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-i)/864e5;break;case"week":r=(this-n-i)/6048e5;break;default:r=this-n}return s?r:Pt(r)}function Va(t,e){if(t.date()<e.date())return-Va(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),n=t.clone().add(s,"months"),i,r;return e-n<0?(i=t.clone().add(s-1,"months"),r=(e-n)/(n-i)):(i=t.clone().add(s+1,"months"),r=(e-n)/(i-n)),-(s+r)||0}V.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";V.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function TE(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function CE(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Fa(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ls(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Fa(s,"Z")):Fa(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function PE(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,n,i,r;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(s+n+i+r)}function DE(t){t||(t=this.isUtc()?V.defaultFormatUtc:V.defaultFormat);var e=Fa(this,t);return this.localeData().postformat(e)}function EE(t,e){return this.isValid()&&($t(t)&&t.isValid()||De(t).isValid())?Yt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function AE(t){return this.from(De(),t)}function OE(t,e){return this.isValid()&&($t(t)&&t.isValid()||De(t).isValid())?Yt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function RE(t){return this.to(De(),t)}function H0(t){var e;return t===void 0?this._locale._abbr:(e=Ds(t),e!=null&&(this._locale=e),this)}var $0=Ot("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Y0(){return this._locale}var ho=1e3,ei=60*ho,fo=60*ei,U0=(365*400+97)*24*fo;function ti(t,e){return(t%e+e)%e}function G0(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-U0:new Date(t,e,s).valueOf()}function q0(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-U0:Date.UTC(t,e,s)}function LE(t){var e,s;if(t=Rt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?q0:G0,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ti(e+(this._isUTC?0:this.utcOffset()*ei),fo);break;case"minute":e=this._d.valueOf(),e-=ti(e,ei);break;case"second":e=this._d.valueOf(),e-=ti(e,ho);break}return this._d.setTime(e),V.updateOffset(this,!0),this}function FE(t){var e,s;if(t=Rt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?q0:G0,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=fo-ti(e+(this._isUTC?0:this.utcOffset()*ei),fo)-1;break;case"minute":e=this._d.valueOf(),e+=ei-ti(e,ei)-1;break;case"second":e=this._d.valueOf(),e+=ho-ti(e,ho)-1;break}return this._d.setTime(e),V.updateOffset(this,!0),this}function IE(){return this._d.valueOf()-(this._offset||0)*6e4}function VE(){return Math.floor(this.valueOf()/1e3)}function WE(){return new Date(this.valueOf())}function BE(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function zE(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function HE(){return this.isValid()?this.toISOString():null}function $E(){return uu(this)}function YE(){return zs({},ce(this))}function UE(){return ce(this).overflow}function GE(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr");Z("NN",0,0,"eraAbbr");Z("NNN",0,0,"eraAbbr");Z("NNNN",0,0,"eraName");Z("NNNNN",0,0,"eraNarrow");Z("y",["y",1],"yo","eraYear");Z("y",["yy",2],0,"eraYear");Z("y",["yyy",3],0,"eraYear");Z("y",["yyyy",4],0,"eraYear");Y("N",Cu);Y("NN",Cu);Y("NNN",Cu);Y("NNNN",iA);Y("NNNNN",rA);Me(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,n){var i=s._locale.erasParse(t,n,s._strict);i?ce(s).era=i:ce(s).invalidEra=t});Y("y",bi);Y("yy",bi);Y("yyy",bi);Y("yyyy",bi);Y("yo",aA);Me(["y","yy","yyy","yyyy"],dt);Me(["yo"],function(t,e,s,n){var i;s._locale._eraYearOrdinalRegex&&(i=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[dt]=s._locale.eraYearOrdinalParse(t,i):e[dt]=parseInt(t,10)});function qE(t,e){var s,n,i,r=this._eras||Ds("en")._eras;for(s=0,n=r.length;s<n;++s)switch(typeof r[s].since==="string"&&(i=V(r[s].since).startOf("day"),r[s].since=i.valueOf()),typeof r[s].until){case"undefined":r[s].until=1/0;break;case"string":i=V(r[s].until).startOf("day").valueOf(),r[s].until=i.valueOf();break}return r}function KE(t,e,s){var n,i,r=this.eras(),a,o,c;for(t=t.toUpperCase(),n=0,i=r.length;n<i;++n)if(a=r[n].name.toUpperCase(),o=r[n].abbr.toUpperCase(),c=r[n].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(o===t)return r[n];break;case"NNNN":if(a===t)return r[n];break;case"NNNNN":if(c===t)return r[n];break}else if([a,o,c].indexOf(t)>=0)return r[n]}function XE(t,e){var s=t.since<=t.until?1:-1;return e===void 0?V(t.since).year():V(t.since).year()+(e-t.offset)*s}function ZE(){var t,e,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return n[t].name;return""}function JE(){var t,e,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return n[t].narrow;return""}function QE(){var t,e,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return n[t].abbr;return""}function eA(){var t,e,s,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(s=i[t].since<=i[t].until?1:-1,n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return(this.year()-V(i[t].since).year())*s+i[t].offset;return this.year()}function tA(t){return Se(this,"_erasNameRegex")||Pu.call(this),t?this._erasNameRegex:this._erasRegex}function sA(t){return Se(this,"_erasAbbrRegex")||Pu.call(this),t?this._erasAbbrRegex:this._erasRegex}function nA(t){return Se(this,"_erasNarrowRegex")||Pu.call(this),t?this._erasNarrowRegex:this._erasRegex}function Cu(t,e){return e.erasAbbrRegex(t)}function iA(t,e){return e.erasNameRegex(t)}function rA(t,e){return e.erasNarrowRegex(t)}function aA(t,e){return e._eraYearOrdinalRegex||bi}function Pu(){var t=[],e=[],s=[],n=[],i,r,a,o,c,d=this.eras();for(i=0,r=d.length;i<r;++i)a=js(d[i].name),o=js(d[i].abbr),c=js(d[i].narrow),e.push(a),t.push(o),s.push(c),n.push(a),n.push(o),n.push(c);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100});Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function qo(t,e){Z(0,[t,t.length],0,e)}qo("gggg","weekYear");qo("ggggg","weekYear");qo("GGGG","isoWeekYear");qo("GGGGG","isoWeekYear");Y("G",Ho);Y("g",Ho);Y("GG",Ee,wt);Y("gg",Ee,wt);Y("GGGG",xu,gu);Y("gggg",xu,gu);Y("GGGGG",zo,Wo);Y("ggggg",zo,Wo);Hr(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,n){e[n.substr(0,2)]=be(t)});Hr(["gg","GG"],function(t,e,s,n){e[n]=V.parseTwoDigitYear(t)});function oA(t){return K0.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function lA(t){return K0.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function cA(){return Ns(this.year(),1,4)}function dA(){return Ns(this.isoWeekYear(),1,4)}function uA(){var t=this.localeData()._week;return Ns(this.year(),t.dow,t.doy)}function hA(){var t=this.localeData()._week;return Ns(this.weekYear(),t.dow,t.doy)}function K0(t,e,s,n,i){var r;return t==null?Tr(this,n,i).year:(r=Ns(t,n,i),e>r&&(e=r),fA.call(this,t,e,s,n,i))}function fA(t,e,s,n,i){var r=T0(t,e,s,n,i),a=Mr(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}Z("Q",0,"Qo","quarter");Y("Q",x0);Me("Q",function(t,e){e[_s]=(be(t)-1)*3});function mA(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date");Y("D",Ee,vi);Y("DD",Ee,wt);Y("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Me(["D","DD"],es);Me("Do",function(t,e){e[es]=be(t.match(Ee)[0])});var X0=_i("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear");Y("DDD",Bo);Y("DDDD",y0);Me(["DDD","DDDD"],function(t,e,s){s._dayOfYear=be(t)});function pA(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Z("m",["mm",2],0,"minute");Y("m",Ee,yu);Y("mm",Ee,wt);Me(["m","mm"],zt);var gA=_i("Minutes",!1);Z("s",["ss",2],0,"second");Y("s",Ee,yu);Y("ss",Ee,wt);Me(["s","ss"],ws);var xA=_i("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)});Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Z(0,["SSS",3],0,"millisecond");Z(0,["SSSS",4],0,function(){return this.millisecond()*10});Z(0,["SSSSS",5],0,function(){return this.millisecond()*100});Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Y("S",Bo,x0);Y("SS",Bo,wt);Y("SSS",Bo,y0);var Hs,Z0;for(Hs="SSSS";Hs.length<=9;Hs+="S")Y(Hs,bi);function yA(t,e){e[vn]=be(("0."+t)*1e3)}for(Hs="S";Hs.length<=9;Hs+="S")Me(Hs,yA);Z0=_i("Milliseconds",!1);Z("z",0,0,"zoneAbbr");Z("zz",0,0,"zoneName");function bA(){return this._isUTC?"UTC":""}function vA(){return this._isUTC?"Coordinated Universal Time":""}var F=Br.prototype;F.add=hE;F.calendar=bE;F.clone=vE;F.diff=ME;F.endOf=FE;F.format=DE;F.from=EE;F.fromNow=AE;F.to=OE;F.toNow=RE;F.get=PD;F.invalidAt=UE;F.isAfter=_E;F.isBefore=wE;F.isBetween=kE;F.isSame=SE;F.isSameOrAfter=jE;F.isSameOrBefore=NE;F.isValid=$E;F.lang=$0;F.locale=H0;F.localeData=Y0;F.max=$5;F.min=H5;F.parsingFlags=YE;F.set=DD;F.startOf=LE;F.subtract=fE;F.toArray=BE;F.toObject=zE;F.toDate=WE;F.toISOString=CE;F.inspect=PE;typeof Symbol<"u"&&Symbol.for!=null&&(F[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});F.toJSON=HE;F.toString=TE;F.unix=VE;F.valueOf=IE;F.creationData=GE;F.eraName=ZE;F.eraNarrow=JE;F.eraAbbr=QE;F.eraYear=eA;F.year=_0;F.isLeapYear=CD;F.weekYear=oA;F.isoWeekYear=lA;F.quarter=F.quarters=mA;F.month=N0;F.daysInMonth=WD;F.week=F.weeks=qD;F.isoWeek=F.isoWeeks=KD;F.weeksInYear=uA;F.weeksInWeekYear=hA;F.isoWeeksInYear=cA;F.isoWeeksInISOWeekYear=dA;F.date=X0;F.day=F.days=l5;F.weekday=c5;F.isoWeekday=d5;F.dayOfYear=pA;F.hour=F.hours=x5;F.minute=F.minutes=gA;F.second=F.seconds=xA;F.millisecond=F.milliseconds=Z0;F.utcOffset=Q5;F.utc=tE;F.local=sE;F.parseZone=nE;F.hasAlignedHourOffset=iE;F.isDST=rE;F.isLocal=oE;F.isUtcOffset=lE;F.isUtc=V0;F.isUTC=V0;F.zoneAbbr=bA;F.zoneName=vA;F.dates=Ot("dates accessor is deprecated. Use date instead.",X0);F.months=Ot("months accessor is deprecated. Use month instead",N0);F.years=Ot("years accessor is deprecated. Use year instead",_0);F.zone=Ot("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",eE);F.isDSTShifted=Ot("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",aE);function _A(t){return De(t*1e3)}function wA(){return De.apply(null,arguments).parseZone()}function J0(t){return t}var je=fu.prototype;je.calendar=oD;je.longDateFormat=uD;je.invalidDate=fD;je.ordinal=gD;je.preparse=J0;je.postformat=J0;je.relativeTime=yD;je.pastFuture=bD;je.set=rD;je.eras=qE;je.erasParse=KE;je.erasConvertYear=XE;je.erasAbbrRegex=sA;je.erasNameRegex=tA;je.erasNarrowRegex=nA;je.months=LD;je.monthsShort=FD;je.monthsParse=VD;je.monthsRegex=zD;je.monthsShortRegex=BD;je.week=$D;je.firstDayOfYear=GD;je.firstDayOfWeek=UD;je.weekdays=n5;je.weekdaysMin=r5;je.weekdaysShort=i5;je.weekdaysParse=o5;je.weekdaysRegex=u5;je.weekdaysShortRegex=h5;je.weekdaysMinRegex=f5;je.isPM=p5;je.meridiem=y5;function mo(t,e,s,n){var i=Ds(),r=os().set(n,e);return i[s](r,t)}function Q0(t,e,s){if(Ts(t)&&(e=t,t=void 0),t=t||"",e!=null)return mo(t,e,s,"month");var n,i=[];for(n=0;n<12;n++)i[n]=mo(t,n,s,"month");return i}function Du(t,e,s,n){typeof t=="boolean"?(Ts(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,Ts(e)&&(s=e,e=void 0),e=e||"");var i=Ds(),r=t?i._week.dow:0,a,o=[];if(s!=null)return mo(e,(s+r)%7,n,"day");for(a=0;a<7;a++)o[a]=mo(e,(a+r)%7,n,"day");return o}function kA(t,e){return Q0(t,e,"months")}function SA(t,e){return Q0(t,e,"monthsShort")}function jA(t,e,s){return Du(t,e,s,"weekdays")}function NA(t,e,s){return Du(t,e,s,"weekdaysShort")}function MA(t,e,s){return Du(t,e,s,"weekdaysMin")}Gs("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=be(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});V.lang=Ot("moment.lang is deprecated. Use moment.locale instead.",Gs);V.langData=Ot("moment.langData is deprecated. Use moment.localeData instead.",Ds);var fs=Math.abs;function TA(){var t=this._data;return this._milliseconds=fs(this._milliseconds),this._days=fs(this._days),this._months=fs(this._months),t.milliseconds=fs(t.milliseconds),t.seconds=fs(t.seconds),t.minutes=fs(t.minutes),t.hours=fs(t.hours),t.months=fs(t.months),t.years=fs(t.years),this}function eb(t,e,s,n){var i=Yt(e,s);return t._milliseconds+=n*i._milliseconds,t._days+=n*i._days,t._months+=n*i._months,t._bubble()}function CA(t,e){return eb(this,t,e,1)}function PA(t,e){return eb(this,t,e,-1)}function xp(t){return t<0?Math.floor(t):Math.ceil(t)}function DA(){var t=this._milliseconds,e=this._days,s=this._months,n=this._data,i,r,a,o,c;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=xp(qc(s)+e)*864e5,e=0,s=0),n.milliseconds=t%1e3,i=Pt(t/1e3),n.seconds=i%60,r=Pt(i/60),n.minutes=r%60,a=Pt(r/60),n.hours=a%24,e+=Pt(a/24),c=Pt(tb(e)),s+=c,e-=xp(qc(c)),o=Pt(s/12),s%=12,n.days=e,n.months=s,n.years=o,this}function tb(t){return t*4800/146097}function qc(t){return t*146097/4800}function EA(t){if(!this.isValid())return NaN;var e,s,n=this._milliseconds;if(t=Rt(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+n/864e5,s=this._months+tb(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(qc(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+t)}}function Es(t){return function(){return this.as(t)}}var sb=Es("ms"),AA=Es("s"),OA=Es("m"),RA=Es("h"),LA=Es("d"),FA=Es("w"),IA=Es("M"),VA=Es("Q"),WA=Es("y"),BA=sb;function zA(){return Yt(this)}function HA(t){return t=Rt(t),this.isValid()?this[t+"s"]():NaN}function An(t){return function(){return this.isValid()?this._data[t]:NaN}}var $A=An("milliseconds"),YA=An("seconds"),UA=An("minutes"),GA=An("hours"),qA=An("days"),KA=An("months"),XA=An("years");function ZA(){return Pt(this.days()/7)}var xs=Math.round,Zn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function JA(t,e,s,n,i){return i.relativeTime(e||1,!!s,t,n)}function QA(t,e,s,n){var i=Yt(t).abs(),r=xs(i.as("s")),a=xs(i.as("m")),o=xs(i.as("h")),c=xs(i.as("d")),d=xs(i.as("M")),u=xs(i.as("w")),h=xs(i.as("y")),f=r<=s.ss&&["s",r]||r<s.s&&["ss",r]||a<=1&&["m"]||a<s.m&&["mm",a]||o<=1&&["h"]||o<s.h&&["hh",o]||c<=1&&["d"]||c<s.d&&["dd",c];return s.w!=null&&(f=f||u<=1&&["w"]||u<s.w&&["ww",u]),f=f||d<=1&&["M"]||d<s.M&&["MM",d]||h<=1&&["y"]||["yy",h],f[2]=e,f[3]=+t>0,f[4]=n,JA.apply(null,f)}function eO(t){return t===void 0?xs:typeof t=="function"?(xs=t,!0):!1}function tO(t,e){return Zn[t]===void 0?!1:e===void 0?Zn[t]:(Zn[t]=e,t==="s"&&(Zn.ss=e-1),!0)}function sO(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,n=Zn,i,r;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(n=Object.assign({},Zn,e),e.s!=null&&e.ss==null&&(n.ss=e.s-1)),i=this.localeData(),r=QA(this,!s,n,i),s&&(r=i.pastFuture(+this,r)),i.postformat(r)}var Yl=Math.abs;function zn(t){return(t>0)-(t<0)||+t}function Ko(){if(!this.isValid())return this.localeData().invalidDate();var t=Yl(this._milliseconds)/1e3,e=Yl(this._days),s=Yl(this._months),n,i,r,a,o=this.asSeconds(),c,d,u,h;return o?(n=Pt(t/60),i=Pt(n/60),t%=60,n%=60,r=Pt(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",c=o<0?"-":"",d=zn(this._months)!==zn(o)?"-":"",u=zn(this._days)!==zn(o)?"-":"",h=zn(this._milliseconds)!==zn(o)?"-":"",c+"P"+(r?d+r+"Y":"")+(s?d+s+"M":"")+(e?u+e+"D":"")+(i||n||t?"T":"")+(i?h+i+"H":"")+(n?h+n+"M":"")+(t?h+a+"S":"")):"P0D"}var ve=Go.prototype;ve.isValid=K5;ve.abs=TA;ve.add=CA;ve.subtract=PA;ve.as=EA;ve.asMilliseconds=sb;ve.asSeconds=AA;ve.asMinutes=OA;ve.asHours=RA;ve.asDays=LA;ve.asWeeks=FA;ve.asMonths=IA;ve.asQuarters=VA;ve.asYears=WA;ve.valueOf=BA;ve._bubble=DA;ve.clone=zA;ve.get=HA;ve.milliseconds=$A;ve.seconds=YA;ve.minutes=UA;ve.hours=GA;ve.days=qA;ve.weeks=ZA;ve.months=KA;ve.years=XA;ve.humanize=sO;ve.toISOString=Ko;ve.toString=Ko;ve.toJSON=Ko;ve.locale=H0;ve.localeData=Y0;ve.toIsoString=Ot("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ko);ve.lang=$0;Z("X",0,0,"unix");Z("x",0,0,"valueOf");Y("x",Ho);Y("X",kD);Me("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});Me("x",function(t,e,s){s._d=new Date(be(t))});V.version="2.30.1";nD(De);V.fn=F;V.min=Y5;V.max=U5;V.now=G5;V.utc=os;V.unix=_A;V.months=kA;V.isDate=Wr;V.locale=Gs;V.invalid=Vo;V.duration=Yt;V.isMoment=$t;V.weekdays=jA;V.parseZone=wA;V.localeData=Ds;V.isDuration=Ia;V.monthsShort=SA;V.weekdaysMin=MA;V.defineLocale=ku;V.updateLocale=w5;V.locales=k5;V.weekdaysShort=NA;V.normalizeUnits=Rt;V.relativeTimeRounding=eO;V.relativeTimeThreshold=tO;V.calendarFormat=yE;V.prototype=F;V.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const nO={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Sg._date.override(typeof V=="function"?{_id:"moment",formats:function(){return nO},parse:function(t,e){return typeof t=="string"&&typeof e=="string"?t=V(t,e):t instanceof V||(t=V(t)),t.isValid()?t.valueOf():null},format:function(t,e){return V(t).format(e)},add:function(t,e,s){return V(t).add(e,s).valueOf()},diff:function(t,e,s){return V(t).diff(V(e),s)},startOf:function(t,e,s){return t=V(t),e==="isoWeek"?(s=Math.trunc(Math.min(Math.max(0,s),6)),t.isoWeekday(s).startOf("day").valueOf()):t.startOf(e).valueOf()},endOf:function(t,e){return V(t).endOf(e).valueOf()}}:{});At.register(Or,Rr,hi,Ps,gd,Mo,mi,fi,Ja);function iO(){const[t,e]=y.useState(null),[s,n]=y.useState(null),[i,r]=y.useState(""),[a,o]=y.useState(!1),[c,d]=y.useState(!1),[u,h]=y.useState(3),[f,m]=y.useState(!1),[p,g]=y.useState("load"),[x,v]=y.useState("forecast"),[_,S]=y.useState(!1),[N,j]=y.useState(!1),[k,T]=y.useState(!1),[M,P]=y.useState(!1),[O,A]=y.useState(!1),[I,X]=y.useState(!1),[U,K]=y.useState(null),J=async()=>{o(!0);try{const H=await G.aurora.dashboard();e(H);const we=H.state?.risk_profile?.risk_appetite;typeof we=="number"&&h(we),S(!!H.state?.auto_tune_enabled),T(!!H.state?.reflex_enabled),A(H.state?.risk_profile?.mode==="probabilistic")}catch(H){console.error("Failed to load Aurora dashboard:",H)}finally{o(!1)}};y.useEffect(()=>{J(),(async()=>{try{const we=await G.schedulerStatus();n(we)}catch(we){console.error("Failed to load scheduler status:",we)}})()},[]),y.useEffect(()=>{(async()=>{try{const we=await G.performanceData(7);K(we)}catch(we){console.error("Failed to load performance data:",we)}})()},[]);const q=async()=>{if(t){d(!0);try{const H=await G.aurora.briefing(t);r(H.briefing)}catch(H){console.error("Failed to fetch Aurora briefing:",H),r("Failed to fetch Aurora briefing.")}finally{d(!1)}}},de=async H=>{h(H);try{await G.configSave({s_index:{risk_appetite:H}})}catch(we){console.error("Failed to save risk level (risk_appetite):",we)}},B=async()=>{const H=!_;S(H),j(!0);try{await G.configSave({learning:{auto_tune_enabled:H}})}catch(we){console.error("Failed to toggle auto-tune:",we),S(!H)}finally{j(!1)}},ae=async()=>{const H=!k;T(H),P(!0);try{await G.aurora.toggleReflex(H)}catch(we){console.error("Failed to toggle reflex:",we),T(!H)}finally{P(!1)}},Ne=async()=>{const H=!O;A(H),X(!0);try{await G.configSave({s_index:{mode:H?"probabilistic":"dynamic"}})}catch(we){console.error("Failed to toggle probabilistic mode:",we),A(!H)}finally{X(!1)}},Te=t?.identity?.graduation?.label??"infant",he=t?.state?.weather_volatility,D=he?.overall??0,R=D<.3?"bg-emerald-400/90":D<.7?"bg-sky-400/90":"bg-amber-400/90",W=D<.3?"from-emerald-900/60 via-surface to-surface":D<.7?"from-sky-900/60 via-surface to-surface":"from-amber-900/60 via-surface to-surface",oe=t?.horizon?.slots??[],le=t?.horizon?.end??new Date().toISOString(),_e=t?.history?.strategy_events??[],Fe=y.useMemo(()=>!U||!U.soc_series||U.soc_series.length===0?null:{datasets:[{label:"Planned",data:U.soc_series.map(H=>({x:H.time,y:H.planned})),borderColor:"#94a3b8",borderDash:[5,5],borderWidth:1.5,pointRadius:0,tension:.4},{label:"Actual",data:U.soc_series.map(H=>({x:H.time,y:H.actual})),borderColor:"#60a5fa",backgroundColor:"rgba(96, 165, 250, 0.1)",borderWidth:1.5,pointRadius:0,fill:!0,tension:.4}]},[U]),xt=y.useMemo(()=>!U||!U.cost_series||U.cost_series.length===0?null:{labels:U.cost_series.map(H=>H.date.slice(5)),datasets:[{label:"Plan",data:U.cost_series.map(H=>H.planned),backgroundColor:"#94a3b8",borderRadius:2},{label:"Real",data:U.cost_series.map(H=>H.realized),backgroundColor:U.cost_series.map(H=>H.realized<=H.planned?"#34d399":"#f87171"),borderRadius:2}]},[U]);return l.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[l.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-medium text-text flex items-center gap-2",children:["Aurora Command Center",l.jsx("span",{className:"px-2 py-0.5 rounded-full bg-surface2 border border-line/50 text-[10px] text-muted uppercase tracking-wider",children:Te})]}),l.jsx("p",{className:"text-[11px] text-muted",children:"The Mastermind. Observing context, managing risk, and learning from reality."})]})}),l.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[l.jsx(re,{className:`lg:col-span-6 p-4 md:p-5 bg-gradient-to-br ${W} relative overflow-hidden`,children:l.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative flex items-center justify-center",children:[l.jsx("div",{className:`absolute h-16 w-16 rounded-full ${R} opacity-30 animate-pulse`}),l.jsx("div",{className:"relative flex items-center justify-center w-14 h-14 rounded-full bg-surface/90 border border-line/80 shadow-float ring-2 ring-accent/20",children:l.jsx(Jl,{className:"h-8 w-8 text-accent drop-shadow-[0_0_12px_rgba(56,189,248,0.75)]"})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-semibold text-text uppercase tracking-wide",children:"Status"}),l.jsx("div",{className:"text-lg font-medium text-text",children:D>.6?"Defensive Mode":D>.3?"Cautious Mode":"Optimal Mode"}),l.jsxs("div",{className:"text-[11px] text-muted flex items-center gap-2",children:[l.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${D>.6?"bg-amber-400":"bg-emerald-400"}`}),D>.6?"High Volatility Detected":"Conditions Stable"]})]})]}),l.jsxs("div",{className:"flex-1 bg-surface/40 rounded-xl p-3 border border-white/5 backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-text font-medium",children:[l.jsx(Qc,{className:"h-3 w-3 text-accent"}),"Daily Briefing"]}),l.jsx("button",{onClick:q,disabled:!t||c,className:"text-[10px] text-muted hover:text-accent disabled:opacity-50 transition-colors",children:c?"Thinking...":"Refresh"})]}),l.jsx("div",{className:"text-[11px] leading-relaxed text-muted/90 font-mono",children:i||"Aurora is analyzing current market and weather conditions..."})]})]})}),l.jsxs(re,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col justify-center",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("span",{className:"text-[10px] uppercase font-bold text-muted tracking-wider",children:"Risk Appetite"}),l.jsxs("div",{className:"flex items-center gap-2",children:[t?.state?.risk_profile?.raw_factor!=null&&(t.state.risk_profile.raw_factor??0)>0&&l.jsxs("span",{className:"text-[9px] text-muted/60",title:"Calculated based on risk",children:["Calc: ",(t.state.risk_profile.raw_factor??0).toFixed(2)]}),l.jsxs("span",{className:"text-[9px] text-muted",title:"Proected factor for next run",children:["Applied: ",(t?.state?.risk_profile?.current_factor??1).toFixed(2)]})]})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("div",{className:"grid grid-cols-5 gap-1 p-1 bg-surface2/50 rounded-lg border border-line/30",children:[1,2,3,4,5].map(H=>{const we=u===H;let Ae="bg-surface border-line text-text shadow-sm";return we&&(H===1?Ae="bg-emerald-500/20 border-emerald-500/50 text-emerald-100 shadow-[0_0_10px_rgba(16,185,129,0.2)]":H===2?Ae="bg-teal-500/20 border-teal-500/50 text-teal-100":H===3?Ae="bg-blue-500/20 border-blue-500/50 text-blue-100":H===4?Ae="bg-amber-500/20 border-amber-500/50 text-amber-100":H===5&&(Ae="bg-red-500/20 border-red-500/50 text-red-100 shadow-[0_0_10px_rgba(239,68,68,0.2)]")),l.jsx("button",{onClick:()=>de(H),className:`
                       relative flex items-center justify-center h-9 rounded-md text-[10px] font-medium transition-all duration-200
                       border border-transparent
                       ${we?Ae:"text-muted hover:bg-surface/50 hover:text-text"}
                     `,children:H},H)})}),l.jsxs("div",{className:"text-center h-8 flex flex-col justify-center",children:[l.jsx("span",{className:`text-[11px] font-medium transition-colors duration-300 ${u===1?"text-emerald-400":u===2?"text-teal-400":u===3?"text-blue-400":u===4?"text-amber-400":"text-red-400"}`,children:{1:"Safety First",2:"Conservative",3:"Neutral (Balanced)",4:"Aggressive",5:"Gambler"}[u]}),l.jsx("span",{className:"text-[9px] text-muted/70",children:{1:"Covers Worst Case (p90)",2:"Covers High Load (p75)",3:"Trusts the Mean (p50)",4:"Expects Lower Load",5:"Bets on Sun/Empty"}[u]})]})]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-line/30 flex flex-col items-center gap-2",children:[l.jsx("button",{onClick:async()=>{m(!0);try{await de(u),await G.runPlanner(),await J()}finally{m(!1)}},disabled:f,className:`flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface hover:bg-surface2 border border-line/50 text-[10px] transition-colors ${f?"opacity-70 cursor-not-allowed text-muted":"text-muted hover:text-text"}`,title:"Run Strategy Engine to update forecast based on new risk",children:f?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-3 w-3 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),l.jsx("span",{children:"Re-planning..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Dt,{className:"h-3 w-3 text-accent"}),l.jsx("span",{children:"Apply & Re-Plan"})]})}),f&&l.jsx("span",{className:"text-[9px] text-muted/70 animate-pulse",children:"Regenerating schedule with new risk level..."})]})]}),l.jsxs(re,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Dt,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"Controls"})]}),l.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-medium text-text",children:"Auto-Tuner"}),l.jsx("span",{className:"text-[9px] text-muted",children:"Allow Aurora to act"})]}),l.jsx("button",{onClick:B,disabled:N,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${_?"bg-accent":"bg-surface2"}`,children:l.jsx("span",{className:`${_?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-medium text-text",children:"Aurora Reflex"}),l.jsx("span",{className:"text-[9px] text-muted",children:"Long-term auto-tuning"})]}),l.jsx("button",{onClick:ae,disabled:M,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${k?"bg-accent":"bg-surface2"}`,children:l.jsx("span",{className:`${k?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-medium text-text",children:"Probabilistic"}),l.jsx("span",{className:"text-[9px] text-muted",children:"Use p10/p90 confidence bands"})]}),l.jsx("button",{onClick:Ne,disabled:I,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${O?"bg-accent":"bg-surface2"}`,children:l.jsx("span",{className:`${O?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),l.jsx("div",{className:"mt-auto pt-2 text-center text-[10px] text-muted",children:"More controls coming soon."})]})]}),l.jsx(tD,{metrics:t?.metrics,perfData:U}),l.jsxs("div",{className:"grid gap-4 lg:grid-cols-12 lg:h-[450px]",children:[l.jsxs(re,{className:"lg:col-span-4 p-4 flex flex-col h-full min-h-0 overflow-hidden",children:[l.jsx("div",{className:"mb-4 flex items-center justify-between shrink-0",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ni,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"Context Radar"})]})}),l.jsx("div",{className:"flex-1 min-h-0 relative",children:l.jsx(QP,{weatherVolatility:{cloud:he?.cloud_volatility??0,temp:he?.temp_volatility??0,overall:D},riskFactor:u??3,forecastAccuracy:t?.metrics?.mae_pv_aurora!=null?Math.max(0,100-t.metrics.mae_pv_aurora*20):85,priceSpread:t?.metrics?.max_price_spread,forecastBias:t?.metrics?.forecast_bias})})]}),l.jsxs(re,{className:"lg:col-span-4 p-4 flex flex-col h-full min-h-0 overflow-hidden",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Op,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"Activity Log"})]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsxs("span",{className:"text-[10px] text-muted",children:[_e.length," events"]}),s?.ml_training_last_run_at&&l.jsxs("span",{className:"text-[9px] text-muted/70",title:"Last ML Training Run",children:["ML Train:"," ",new Date(s.ml_training_last_run_at).toLocaleString("sv-SE",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),l.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto pr-2 custom-scrollbar",children:l.jsx(eD,{events:_e})})]}),l.jsxs(re,{className:"lg:col-span-4 p-4 md:p-5 flex flex-col h-full min-h-0 overflow-hidden",children:[l.jsxs("div",{className:"mb-4 shrink-0",children:[l.jsx("div",{className:"text-xs font-medium text-text",children:"Cost Reality"}),l.jsx("div",{className:"text-[11px] text-muted",children:"Daily financial outcome"})]}),l.jsx("div",{className:"flex-1 min-h-0",children:xt&&l.jsx(ZP,{data:xt,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{color:"#94a3b8",font:{size:10}}},y:{grid:{color:"#334155"},ticks:{color:"#94a3b8"}}},plugins:{legend:{labels:{color:"#e2e8f0",font:{size:10}}}}}})})]})]}),l.jsx("div",{className:"grid gap-4 lg:grid-cols-12",children:l.jsxs(re,{className:"lg:col-span-12 p-4 flex flex-col h-[350px] overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3 shrink-0",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium text-text",children:x==="forecast"?"Forecast Horizon (48h)":"SoC Tunnel"}),l.jsxs("div",{className:"text-[11px] text-muted",children:[x==="forecast"?O?`Probabilistic View (${p.toUpperCase()})`:`Decomposition View (${p.toUpperCase()})`:"Plan vs Reality",x==="forecast"&&l.jsxs(l.Fragment,{children:["  ",new Date().toISOString().slice(0,10)," -"," ",new Date(le).toISOString().slice(0,10)]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-line/70 bg-surface2 px-1 py-0.5 text-[11px] mr-2",children:[l.jsx("button",{className:`px-3 py-0.5 rounded-full ${x==="forecast"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>v("forecast"),children:"Forecast"}),l.jsx("button",{className:`px-3 py-0.5 rounded-full ${x==="soc"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>v("soc"),children:"SoC"})]}),x==="forecast"&&l.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-line/70 bg-surface2 px-1 py-0.5 text-[11px]",children:[l.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${p==="load"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>g("load"),children:l.jsx(Dt,{className:"h-3 w-3"})}),l.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full ${p==="pv"?"bg-accent text-[#0F1216]":"text-muted"}`,onClick:()=>g("pv"),children:l.jsx(Bp,{className:"h-3 w-3"})})]})]})]}),l.jsx("div",{className:"flex-1 min-h-0",children:a?l.jsx("div",{className:"text-[11px] text-muted",children:"Loading..."}):x==="soc"?l.jsx("div",{className:"h-full w-full",children:Fe&&l.jsx(cu,{data:Fe,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"}},grid:{color:"#334155",display:!1},ticks:{color:"#94a3b8",maxTicksLimit:6}},y:{min:0,max:100,grid:{color:"#334155"},ticks:{color:"#94a3b8",display:!1}}},plugins:{legend:{display:!1}}}})}):O?l.jsx("div",{className:"h-full w-full",children:l.jsx(sD,{title:"",color:p==="load"?"#f97316":"#22c55e",slots:(()=>{const H=t?.horizon?.history_series?.[p==="load"?"load":"pv"]||[],we=oe.map(fe=>p==="load"?{time:fe.slot_start,p10:fe.probabilistic?.load_p10??null,p50:fe.final.load_kwh,p90:fe.probabilistic?.load_p90??null,actual:null}:{time:fe.slot_start,p10:fe.probabilistic?.pv_p10??null,p50:fe.final.pv_kwh,p90:fe.probabilistic?.pv_p90??null,actual:null}),Ae=new Map;H.forEach(fe=>{Ae.set(fe.slot_start,{time:fe.slot_start,p10:fe.p10??null,p50:fe.forecast??null,p90:fe.p90??null,actual:fe.actual})}),we.forEach(fe=>{const Ke=Ae.get(fe.time);Ke?Ae.set(fe.time,{...Ke,p10:fe.p10,p50:fe.p50,p90:fe.p90}):Ae.set(fe.time,fe)});const Ut=new Date().getTime(),it=1440*60*1e3;return Array.from(Ae.values()).sort((fe,Ke)=>new Date(fe.time).getTime()-new Date(Ke.time).getTime()).filter(fe=>{const Ke=new Date(fe.time).getTime();return Ke>=Ut-it&&Ke<=Ut+it})})()})}):l.jsx(La,{slots:oe,mode:p})})]})})]})}function Bi({data:t,colorClass:e="bg-accent",height:s=32,bars:n=12}){const i=y.useMemo(()=>{if(!t||t.length===0)return Array(n).fill(.2);const r=t.slice(-n),a=Math.max(...r,1),o=Math.min(...r,0),c=a-o||1;return r.map(d=>.1+.9*((d-o)/c))},[t,n]);return l.jsx("div",{className:"mini-bars",style:{height:s},children:i.map((r,a)=>l.jsx("div",{className:`mini-bar ${e}`,style:{height:`${Math.round(r*100)}%`}},a))})}const Mt={status:async()=>{const t=await fetch("api/executor/status");if(!t.ok)throw new Error(`Status failed: ${t.status}`);return t.json()},toggle:async t=>{const e=await fetch("api/executor/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Toggle failed: ${e.status}`);return e.json()},run:async()=>{const t=await fetch("api/executor/run",{method:"POST"});if(!t.ok)throw new Error(`Run failed: ${t.status}`);return t.json()},history:async(t=20)=>{const e=await fetch(`api/executor/history?limit=${t}`);if(!e.ok)throw new Error(`History failed: ${e.status}`);return e.json()},stats:async(t=7)=>{const e=await fetch(`api/executor/stats?days=${t}`);if(!e.ok)throw new Error(`Stats failed: ${e.status}`);return e.json()},live:async()=>{const t=await fetch("api/executor/live");if(!t.ok)throw new Error(`Live failed: ${t.status}`);return t.json()},notifications:{get:async()=>{const t=await fetch("api/executor/notifications");if(!t.ok)throw new Error(`Notifications failed: ${t.status}`);return t.json()},update:async t=>{const e=await fetch("api/executor/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Notifications update failed: ${e.status}`);return e.json()},test:async()=>{const t=await fetch("api/executor/notifications/test",{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.error||`Test failed: ${t.status}`);return e}},config:{get:async()=>{const t=await fetch("api/executor/config");if(!t.ok)throw new Error(`Config get failed: ${t.status}`);return t.json()},update:async t=>{const e=await fetch("api/executor/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Config update failed: ${e.status}`);return e.json()}},quickAction:{get:async()=>{const t=await fetch("api/executor/quick-action");if(!t.ok)throw new Error(`Quick action get failed: ${t.status}`);return t.json()},set:async(t,e)=>{const s=await fetch("api/executor/quick-action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,duration_minutes:e})});if(!s.ok)throw new Error(`Quick action set failed: ${s.status}`);return s.json()},clear:async()=>{const t=await fetch("api/executor/quick-action",{method:"DELETE"});if(!t.ok)throw new Error(`Quick action clear failed: ${t.status}`);return t.json()}}};function Ul({enabled:t,onChange:e,disabled:s=!1,size:n="md"}){const i=n==="sm"?"h-5 w-9":"h-6 w-11",r=n==="sm"?"h-3 w-3":"h-4 w-4",a=n==="sm"?t?"translate-x-5":"translate-x-1":t?"translate-x-6":"translate-x-1";return l.jsx("button",{type:"button",role:"switch","aria-checked":t,disabled:s,onClick:()=>e(!t),className:`relative inline-flex items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface ${i} ${t?"bg-accent":"bg-surface2"} ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:l.jsx("span",{className:`inline-block transform rounded-full bg-white transition-transform ${r} ${a}`})})}At.register(Or,Rr,hi,Ps,Mo,mi,fi,No);function rO(){const[t,e]=y.useState(null),[s,n]=y.useState(null),[i,r]=y.useState([]),[a,o]=y.useState(null),[c,d]=y.useState({soc:[],pv:[],load:[],import:[],export:[],labels:[]}),[u,h]=y.useState(!0),[f,m]=y.useState(!1),[p,g]=y.useState(!1),[x,v]=y.useState(null),[_,S]=y.useState(!1),[N,j]=y.useState(null),[k,T]=y.useState(!1),[M,P]=y.useState(!1),[O,A]=y.useState(null),[I,X]=y.useState(null),U=y.useCallback(async()=>{try{const[D,R,W]=await Promise.all([Mt.status(),Mt.stats(7),Mt.history(20)]);e(D),n(R),r(W.records??[]),v(null)}catch(D){v(D.message||"Failed to load executor data")}finally{h(!1)}},[]);Xn("live_metrics",D=>{o(R=>{const W={...R||{}};return D.soc!==void 0&&(W.soc={value:`${D.soc.toFixed(0)}%`,numeric:D.soc,unit:"%"}),D.pv_kw!==void 0&&(W.pv_power={value:`${D.pv_kw.toFixed(1)} kW`,numeric:D.pv_kw*1e3,unit:"W"}),D.load_kw!==void 0&&(W.load_power={value:`${D.load_kw.toFixed(1)} kW`,numeric:D.load_kw*1e3,unit:"W"}),D.grid_import_kw!==void 0&&(W.grid_import={value:`${D.grid_import_kw.toFixed(2)} kW`,numeric:D.grid_import_kw*1e3,unit:"W"}),D.grid_export_kw!==void 0&&(W.grid_export={value:`${D.grid_export_kw.toFixed(2)} kW`,numeric:D.grid_export_kw*1e3,unit:"W"}),D.work_mode&&(W.work_mode={value:D.work_mode}),W}),d(R=>{const oe=[...R.labels,""],le=[...R.soc,D.soc??R.soc[R.soc.length-1]??0],_e=[...R.pv,D.pv_kw??R.pv[R.pv.length-1]??0],Fe=[...R.load,D.load_kw??R.load[R.load.length-1]??0],xt=[...R.import,D.grid_import_kw??R.import[R.import.length-1]??0],H=[...R.export,D.grid_export_kw??R.export[R.export.length-1]??0];return oe.length>20&&(oe.shift(),le.shift(),_e.shift(),Fe.shift(),xt.shift(),H.shift()),{labels:oe,soc:le,pv:_e,load:Fe,import:xt,export:H}})}),Xn("executor_status",D=>{e(D)}),y.useEffect(()=>{h(!0),U();const D=setInterval(U,3e4);return()=>clearInterval(D)},[U]),y.useEffect(()=>{(async()=>{try{const R=await Mt.live(),W={};R.soc!==void 0&&(W.soc={value:`${Number(R.soc).toFixed(0)}%`,numeric:Number(R.soc),unit:"%"}),R.pv_kw!==void 0&&(W.pv_power={value:`${Number(R.pv_kw).toFixed(1)} kW`,numeric:Number(R.pv_kw)*1e3,unit:"W"}),R.load_kw!==void 0&&(W.load_power={value:`${Number(R.load_kw).toFixed(1)} kW`,numeric:Number(R.load_kw)*1e3,unit:"W"}),R.grid_import_kw!==void 0&&(W.grid_import={value:`${Number(R.grid_import_kw).toFixed(2)} kW`,numeric:Number(R.grid_import_kw)*1e3,unit:"W"}),R.grid_export_kw!==void 0&&(W.grid_export={value:`${Number(R.grid_export_kw).toFixed(2)} kW`,numeric:Number(R.grid_export_kw)*1e3,unit:"W"}),R.work_mode&&(W.work_mode={value:R.work_mode}),o(W)}catch(R){console.error("Failed to load initial live metrics",R)}})()},[]),y.useEffect(()=>{(async()=>{try{const R=await Mt.notifications.get();j(R)}catch{}})()},[]);const K=async(D,R)=>{if(N){T(!0);try{await Mt.notifications.update({[D]:R}),j(W=>W?{...W,[D]:R}:null)}catch(W){v(W.message)}finally{T(!1)}}},J=async D=>{m(!0);try{await Mt.toggle({enabled:D}),await U()}catch(R){v(R.message)}finally{m(!1)}},q=async()=>{P(!0),A(null);try{const D=await Mt.notifications.test();A({success:!0,message:D.message||"Test sent!"})}catch(D){A({success:!1,message:D.message})}finally{P(!1)}},de=async D=>{m(!0);try{await Mt.toggle({shadow_mode:D}),await U()}catch(R){v(R.message)}finally{m(!1)}},B=async()=>{g(!0);try{await Mt.run(),await U()}catch(D){v(D.message)}finally{g(!1)}},ae=D=>{if(!D)return"";try{return new Date(D).toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})}catch{return D}},Ne=D=>{if(!D)return"";try{return new Date(D).toLocaleString("sv-SE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return D}},Te=t?.enabled?t?.shadow_mode?"from-warn-900/60 via-surface to-surface":"from-good-900/60 via-surface to-surface":"from-neutral-800/60 via-surface to-surface",he=t?.enabled?t?.shadow_mode?"bg-warn/90":"bg-good/90":"bg-neutral/90";return u?l.jsx("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-10 bg-surface2 rounded w-48"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[l.jsx("div",{className:"h-64 bg-surface2 rounded"}),l.jsx("div",{className:"h-64 bg-surface2 rounded lg:col-span-2"})]})]})}):l.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[l.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-medium text-text flex items-center gap-2",children:["Executor Control Center",l.jsx("span",{className:`px-2 py-0.5 rounded-full border text-[10px] uppercase tracking-wider ${t?.enabled?t?.shadow_mode?"bg-warn/20 border-warn/50 text-warn":"bg-good/20 border-good/50 text-good":"bg-neutral/20 border-neutral/50 text-neutral"}`,children:t?.enabled?t?.shadow_mode?"Shadow":"Active":"Disabled"})]}),l.jsx("p",{className:"text-[11px] text-muted",children:"Native execution engine  controls inverter and water heater based on the schedule."})]})}),x&&l.jsxs("div",{className:"rounded-xl p-3 bg-bad/10 border border-bad/30 flex items-center gap-3",children:[l.jsx(Na,{className:"h-4 w-4 text-bad"}),l.jsx("span",{className:"text-bad text-[11px] flex-1",children:x}),l.jsx("button",{onClick:()=>v(null),className:"text-bad hover:text-bad/80 text-lg",children:""})]}),l.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[l.jsxs(re,{className:`lg:col-span-5 p-4 md:p-5 bg-gradient-to-br ${Te} relative overflow-hidden`,children:[l.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[l.jsxs("div",{className:"relative flex items-center justify-center shrink-0",children:[l.jsx("div",{className:`absolute h-14 w-14 rounded-full ${he} opacity-30 animate-pulse`}),l.jsx("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full bg-surface/90 border border-line/80 shadow-float ring-2 ring-accent/20",children:l.jsx(Ql,{className:"h-6 w-6 text-accent drop-shadow-[0_0_12px_rgba(56,189,248,0.75)]"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-xs font-semibold text-text uppercase tracking-wide",children:"Status"}),l.jsx("div",{className:"text-lg font-medium text-text",children:t?.enabled?t?.shadow_mode?"Shadow Mode":"Executing":"Standby"}),l.jsxs("div",{className:"text-[11px] text-muted flex items-center gap-2 mt-1",children:[l.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${t?.last_run_status==="success"?"bg-good":t?.last_run_status==="error"?"bg-bad":"bg-neutral"}`}),t?.last_run_status==="success"?"Last run successful":t?.last_run_status==="error"?"Last run failed":"No runs yet"]})]})]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-line/10 grid grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Last Run"}),l.jsx("div",{className:"text-sm font-mono text-text",children:ae(t?.last_run_at)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Next Run"}),l.jsx("div",{className:"text-sm font-mono text-text",children:ae(t?.next_run_at)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-muted/70 uppercase",children:"Version"}),l.jsx("div",{className:"text-sm font-mono text-text",children:t?.version||""})]})]}),t?.override_active&&l.jsx("div",{className:"mt-3 p-2 rounded-lg bg-warn/20 border border-warn/30",children:l.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-warn",children:[l.jsx(Na,{className:"h-3.5 w-3.5"}),l.jsx("span",{className:"font-medium",children:"Override Active:"}),l.jsx("span",{children:t.override_type})]})})]}),l.jsxs(re,{className:"lg:col-span-4 p-4 md:p-5 flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Ha,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"Controls"})]}),l.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-medium text-text",children:"Executor Enabled"}),l.jsx("span",{className:"text-[9px] text-muted",children:"Execute actions on Home Assistant"})]}),l.jsx(Ul,{enabled:t?.enabled??!1,onChange:J,disabled:f,size:"sm"})]}),l.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50 mt-2",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"text-[11px] font-medium text-text flex items-center gap-1.5",children:["Shadow Mode",l.jsx(Tv,{className:"h-3 w-3 text-muted"})]}),l.jsx("span",{className:"text-[9px] text-muted",children:"Log only, don't execute actions"})]}),l.jsx(Ul,{enabled:t?.shadow_mode??!1,onChange:de,disabled:f,size:"sm"})]}),l.jsxs("button",{onClick:()=>S(!0),className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50 mt-2 hover:bg-surface2 transition-colors w-full",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ol,{className:"h-4 w-4 text-muted"}),l.jsx("span",{className:"text-[11px] font-medium text-text",children:"Notifications"})]}),N&&Object.entries(N).some(([D,R])=>D.startsWith("on_")&&R===!0)&&l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute inset-0 rounded-full bg-accent/50 blur-sm animate-pulse"}),l.jsx("span",{className:"relative h-2.5 w-2.5 rounded-full bg-accent block ring-2 ring-accent/30"})]})]}),l.jsx("div",{className:"mt-auto pt-4",children:l.jsx("button",{onClick:B,disabled:p,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-surface hover:bg-surface2 border border-line/50 text-[11px] font-medium transition-all ${p?"opacity-70 cursor-not-allowed text-muted":"text-text hover:border-accent/50"}`,children:p?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-3.5 w-3.5 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),l.jsx("span",{children:"Running..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Vp,{className:"h-3.5 w-3.5 text-accent"}),l.jsx("span",{children:"Run Now"})]})})})]}),l.jsxs(re,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(za,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"7-Day Stats"})]}),s&&l.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-1",children:[l.jsxs("div",{className:"p-3 rounded-lg bg-surface2/30 border border-line/30",children:[l.jsx("div",{className:"text-xl font-bold text-text",children:s.total_executions}),l.jsx("div",{className:"text-[10px] text-muted",children:"Total Runs"})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-good/10 border border-good/20",children:[l.jsxs("div",{className:"text-xl font-bold text-good",children:[s.success_rate,"%"]}),l.jsx("div",{className:"text-[10px] text-muted",children:"Success Rate"})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-warn/10 border border-warn/20",children:[l.jsx("div",{className:"text-xl font-bold text-warn",children:s.override_count}),l.jsx("div",{className:"text-[10px] text-muted",children:"Overrides"})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-bad/10 border border-bad/20",children:[l.jsx("div",{className:"text-xl font-bold text-bad",children:s.failed}),l.jsx("div",{className:"text-[10px] text-muted",children:"Failed"})]})]})]}),l.jsxs(re,{className:"lg:col-span-3 p-4 md:p-5 flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Dt,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"Quick Actions"})]}),t?.quick_action&&l.jsx("div",{className:"mb-3 p-3 rounded-lg bg-accent/10 border border-accent/30",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-[11px] font-medium text-accent capitalize",children:[t.quick_action.type.replace("_"," ")," Active"]}),l.jsxs("div",{className:"text-[10px] text-muted",children:[t.quick_action.remaining_minutes.toFixed(0)," min remaining"]})]}),l.jsx("button",{onClick:async()=>{try{await Mt.quickAction.clear(),U()}catch(D){console.error(D)}},className:"text-[10px] px-2 py-1 rounded bg-bad/20 text-bad hover:bg-bad/30 transition-colors",children:"Cancel"})]})}),l.jsx("div",{className:"space-y-2 flex-1",children:[{type:"force_charge",label:"Force Charge",icon:ur,labelClass:"text-good",btnClass:"bg-good/10 border-good/20 text-good hover:bg-good/20"},{type:"force_discharge",label:"Force Export",icon:sc,labelClass:"text-warn",btnClass:"bg-warn/10 border-warn/20 text-warn hover:bg-warn/20"},{type:"force_water_heater",label:"Boost Water",icon:hr,labelClass:"text-warn",btnClass:"bg-warn/10 border-warn/20 text-warn hover:bg-warn/20"},{type:"inverter_off",label:"Inverter Off",icon:Lv,labelClass:"text-bad",btnClass:"bg-bad/10 border-bad/20 text-bad hover:bg-bad/20"}].map(D=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:`text-[11px] ${D.labelClass} w-20 font-medium flex items-center gap-1`,children:[l.jsx(D.icon,{className:"h-3 w-3"}),D.label]}),l.jsx("div",{className:"flex gap-1 flex-1",children:[15,30,60].map(R=>l.jsxs("button",{onClick:async()=>{try{await Mt.quickAction.set(D.type,R),U()}catch(W){alert("Failed: "+W.message)}},disabled:t?.quick_action?.type===D.type,className:`flex-1 px-2 py-1.5 text-[10px] rounded-lg border transition-all ${t?.quick_action?.type===D.type?"bg-accent/20 border-accent/40 text-accent":D.btnClass}`,children:[R,"m"]},R))})]},D.type))}),l.jsx("div",{className:"mt-3 text-[9px] text-muted/60 text-center",children:"Overrides schedule for selected duration"})]})]}),l.jsxs(re,{className:"p-4 md:p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ni,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"Live System"}),l.jsx("span",{className:"text-[9px] text-muted/70",children:"(every 10s)"})]}),a?.work_mode&&l.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${a.work_mode.value.includes("Export")?t?.shadow_mode?"bg-warn/20 border-warn/30 text-warn":"bg-good/20 border-good/30 text-good":"bg-water/20 border-water/30 text-water"}`,children:a.work_mode.value})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[l.jsxs("div",{className:"metric-card-border metric-card-border-battery p-3 bg-surface2/30 relative overflow-hidden group",children:[l.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:l.jsx(Bi,{data:c.soc,colorClass:"bg-good"})}),l.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[l.jsx(yo,{className:`h-6 w-6 ${(a?.soc?.numeric??0)>50?"text-good":(a?.soc?.numeric??0)>20?"text-warn":"text-bad"}`}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-bold text-good",children:[a?.soc?.numeric?.toFixed(0)??"","%"]}),l.jsx("div",{className:"text-[10px] text-muted",children:"Battery SoC"})]})]})]}),l.jsxs("div",{className:"metric-card-border metric-card-border-solar p-3 bg-surface2/30 relative overflow-hidden group",children:[l.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:l.jsx(Bi,{data:c.pv,colorClass:"bg-accent"})}),l.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[l.jsx(Dr,{className:`h-6 w-6 ${(a?.pv_power?.numeric??0)>500?"text-accent":"text-accent/40"}`}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-bold text-accent",children:[a?.pv_power?.numeric?(a.pv_power.numeric/1e3).toFixed(1):""," kW"]}),l.jsx("div",{className:"text-[10px] text-muted",children:"PV Power"})]})]})]}),l.jsxs("div",{className:"metric-card-border metric-card-border-house p-3 bg-surface2/30 relative overflow-hidden group",children:[l.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:l.jsx(Bi,{data:c.load,colorClass:"bg-house"})}),l.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[l.jsx(Rv,{className:"h-6 w-6 text-house"}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-bold text-house",children:[a?.load_power?.numeric?(a.load_power.numeric/1e3).toFixed(1):""," kW"]}),l.jsx("div",{className:"text-[10px] text-muted",children:"Load"})]})]})]}),l.jsxs("div",{className:"metric-card-border metric-card-border-grid p-3 bg-surface2/30 relative overflow-hidden group",children:[l.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:l.jsx(Bi,{data:c.import,colorClass:(a?.grid_import?.numeric??0)>100?"bg-bad":"bg-grid"})}),l.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[l.jsx(Xc,{className:`h-6 w-6 ${(a?.grid_import?.numeric??0)>100?"text-bad":"text-grid"}`}),l.jsxs("div",{children:[l.jsxs("div",{className:`text-lg font-bold ${(a?.grid_import?.numeric??0)>100?"text-bad":"text-text"}`,children:[a?.grid_import?.numeric?(a.grid_import.numeric/1e3).toFixed(2):""," kW"]}),l.jsx("div",{className:"text-[10px] text-muted",children:"Grid Import"})]})]})]}),l.jsxs("div",{className:"metric-card-border metric-card-border-bad p-3 bg-surface2/30 relative overflow-hidden group",children:[l.jsx("div",{className:"mini-bars-container absolute right-2 bottom-2 transition-opacity pointer-events-none",children:l.jsx(Bi,{data:c.export,colorClass:"bg-bad"})}),l.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[l.jsx(Zc,{className:"h-6 w-6 text-bad"}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-bold text-bad",children:[a?.grid_export?.numeric?(a.grid_export.numeric/1e3).toFixed(2):""," kW"]}),l.jsx("div",{className:"text-[10px] text-muted",children:"Grid Export"})]})]})]})]})]}),l.jsxs(re,{className:"p-4 md:p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Cv,{className:"h-4 w-4 text-accent"}),l.jsx("span",{className:"text-xs font-medium text-text",children:"Execution History"}),l.jsxs("span",{className:"text-[10px] text-muted",children:["(",i?.length??0," records)"]})]}),l.jsxs("button",{onClick:U,className:"flex items-center gap-1.5 text-[10px] text-muted hover:text-accent transition px-2 py-1 rounded-lg hover:bg-surface2",children:[l.jsx(Wp,{className:"h-3 w-3"}),"Refresh"]})]}),(i?.length??0)===0?l.jsxs("div",{className:"text-center py-12 text-muted",children:[l.jsx(eh,{className:"h-10 w-10 mx-auto opacity-20 mb-3"}),l.jsx("p",{className:"text-[11px]",children:"No execution history yet."}),l.jsx("p",{className:"text-[10px] mt-1 text-muted/70",children:"Run the executor to see results here."})]}):l.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[t?.next_run_at&&l.jsxs("div",{className:"p-3 rounded-xl border-2 border-dashed border-line/30 bg-surface2/10 opacity-70",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(eh,{className:"h-4 w-4 text-muted animate-pulse"}),l.jsxs("span",{className:"text-[11px] text-muted font-mono",children:["Next: ",ae(t.next_run_at)]})]}),l.jsx("span",{className:"text-[9px] text-muted/70 bg-surface2/50 px-2 py-0.5 rounded-full",children:"Scheduled"})]}),t.current_slot_plan&&l.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2 text-[10px]",children:[t.current_slot_plan.charge_kw>0&&l.jsxs("div",{className:"flex items-center gap-1 text-good",children:[l.jsx(ur,{className:"h-3 w-3"}),l.jsxs("span",{children:[t.current_slot_plan.charge_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.export_kw>0&&l.jsxs("div",{className:"flex items-center gap-1 text-warn",children:[l.jsx(sc,{className:"h-3 w-3"}),l.jsxs("span",{children:[t.current_slot_plan.export_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.water_kw>0&&l.jsxs("div",{className:"flex items-center gap-1 text-water",children:[l.jsx(hr,{className:"h-3 w-3"}),l.jsxs("span",{children:[t.current_slot_plan.water_kw.toFixed(1),"kW"]})]}),t.current_slot_plan.soc_target>0&&l.jsx("div",{className:"flex items-center gap-1 text-muted",children:l.jsxs("span",{children:["SoC",t.current_slot_plan.soc_target,"%"]})}),!t.current_slot_plan.charge_kw&&!t.current_slot_plan.export_kw&&!t.current_slot_plan.water_kw&&l.jsx("div",{className:"text-muted/60 col-span-4",children:"Idle / Self-consumption"})]})]}),i.map(D=>{const R=I===D.id;return l.jsxs("div",{className:`rounded-xl border transition-all ${D.success?"bg-surface2/30 border-line/40 hover:border-line/60":"bg-bad/10 border-bad/30 hover:border-bad/50"}`,children:[l.jsxs("div",{className:"p-3 cursor-pointer flex items-center justify-between",onClick:()=>X(R?null:D.id),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(bo,{className:`h-3 w-3 text-muted transition-transform ${R?"rotate-180":""}`}),D.success?l.jsx(Rp,{className:"h-4 w-4 text-good"}):l.jsx(Na,{className:"h-4 w-4 text-bad"}),l.jsx("span",{className:"text-[11px] text-text font-mono",children:Ne(D.executed_at)}),D.commanded_charge_current_a&&D.commanded_charge_current_a>0&&l.jsx("span",{className:"text-[9px] text-good bg-good/20 px-1.5 py-0.5 rounded",children:" Charge"}),D.commanded_work_mode==="Export First"&&l.jsx("span",{className:"text-[9px] text-warn bg-warn/20 px-1.5 py-0.5 rounded",children:" Export"}),D.commanded_water_temp&&D.commanded_water_temp>50&&l.jsx("span",{className:"text-[9px] text-warn bg-warn/20 px-1.5 py-0.5 rounded",children:" Heat"}),(!D.commanded_charge_current_a||D.commanded_charge_current_a===0)&&D.commanded_work_mode!=="Export First"&&(!D.commanded_water_temp||D.commanded_water_temp<=50)&&l.jsx("span",{className:"text-[9px] text-muted/60 bg-surface2/50 px-1.5 py-0.5 rounded",children:" Idle"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[D.override_active?l.jsx("span",{className:"text-[9px] text-warn bg-warn/20 px-2 py-0.5 rounded-full border border-warn/30",children:D.override_type}):null,D.duration_ms&&l.jsxs("span",{className:"text-[9px] text-muted font-mono",children:[D.duration_ms,"ms"]})]})]}),R&&l.jsxs("div",{className:"px-3 pb-3 border-t border-line/20",children:[l.jsxs("div",{className:"mt-3",children:[l.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"Planned (from Schedule)"}),l.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 text-[10px]",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Charge"}),l.jsxs("span",{className:D.planned_charge_kw?"text-good":"text-muted/40",children:[D.planned_charge_kw?.toFixed(1)??""," kW"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Export"}),l.jsxs("span",{className:D.planned_export_kw?"text-warn":"text-muted/40",children:[D.planned_export_kw?.toFixed(1)??""," kW"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Water"}),l.jsxs("span",{className:D.planned_water_kw?"text-warn":"text-muted/40",children:[D.planned_water_kw?.toFixed(1)??""," kW"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"SoC Target"}),l.jsxs("span",{className:"text-text",children:[D.planned_soc_target??"","%"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"SoC Projected"}),l.jsxs("span",{className:"text-text",children:[D.planned_soc_projected??"","%"]})]})]})]}),l.jsxs("div",{className:"mt-3",children:[l.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"Commanded (What We Set)"}),l.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 text-[10px]",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Work Mode"}),l.jsx("span",{className:"text-text font-medium",children:D.commanded_work_mode??""})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Grid Charging"}),l.jsx("span",{className:D.commanded_grid_charging?"text-good":"text-muted/40",children:D.commanded_grid_charging?"ON":"OFF"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Charge I"}),l.jsxs("span",{className:D.commanded_charge_current_a?"text-good":"text-muted/40",children:[D.commanded_charge_current_a??""," A"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Discharge I"}),l.jsxs("span",{className:D.commanded_discharge_current_a?"text-warn":"text-muted/40",children:[D.commanded_discharge_current_a??""," A"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"SoC Target"}),l.jsxs("span",{className:"text-text",children:[D.commanded_soc_target??"","%"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Water Temp"}),l.jsxs("span",{className:D.commanded_water_temp&&D.commanded_water_temp>50?"text-warn":"text-muted/40",children:[D.commanded_water_temp??"","C"]})]})]})]}),l.jsxs("div",{className:"mt-3",children:[l.jsx("div",{className:"text-[9px] text-muted uppercase tracking-wide mb-1.5",children:"State Before Execution"}),l.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2 text-[10px]",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"SoC"}),l.jsxs("span",{className:"text-text",children:[D.before_soc_percent?.toFixed(0)??"","%"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Work Mode"}),l.jsx("span",{className:"text-text",children:D.before_work_mode??""})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"PV Power"}),l.jsxs("span",{className:"text-yellow-400",children:[D.before_pv_kw?.toFixed(1)??""," kW"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Load"}),l.jsxs("span",{className:"text-sky-400",children:[D.before_load_kw?.toFixed(1)??""," kW"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-muted/60",children:"Water Temp"}),l.jsxs("span",{className:"text-text",children:[D.before_water_temp??"","C"]})]})]})]}),D.error_message&&l.jsx("div",{className:"mt-2 text-[10px] text-red-400 bg-red-500/10 rounded-lg p-2",children:D.error_message}),D.override_reason&&l.jsxs("div",{className:"mt-2 text-[10px] text-amber-300/80 bg-amber-500/10 rounded-lg p-2",children:["Override: ",D.override_reason]})]})]},D.id)})]})]}),_&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>S(!1),children:l.jsxs("div",{className:"bg-surface border border-line rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:D=>D.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ol,{className:"h-5 w-5 text-accent"}),l.jsx("span",{className:"text-sm font-medium text-text",children:"Notification Settings"})]}),l.jsx("button",{onClick:()=>S(!1),className:"text-muted hover:text-text transition p-1",children:l.jsx(ui,{className:"h-5 w-5"})})]}),N&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"p-2 rounded-lg bg-surface2/30 border border-line/30 mb-3",children:[l.jsx("div",{className:"text-[10px] text-muted mb-1",children:"HA Notify Service"}),l.jsx("div",{className:"text-[11px] text-text font-mono",children:N.service||"Not configured"})]}),[{key:"on_charge_start",label:"Charge Started",desc:"When grid charging begins"},{key:"on_charge_stop",label:"Charge Stopped",desc:"When grid charging ends"},{key:"on_export_start",label:"Export Started",desc:"When battery export begins"},{key:"on_export_stop",label:"Export Stopped",desc:"When battery export ends"},{key:"on_water_heat_start",label:"Water Heating Started",desc:"When water heater activates"},{key:"on_water_heat_stop",label:"Water Heating Stopped",desc:"When water heater deactivates"},{key:"on_soc_target_change",label:"SoC Target Changed",desc:"When battery target changes"},{key:"on_override_activated",label:"Override Activated",desc:"When emergency override triggers"},{key:"on_error",label:"Errors",desc:"When execution fails"}].map(D=>l.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-surface2/50 border border-line/50",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[11px] font-medium text-text",children:D.label}),l.jsx("span",{className:"text-[9px] text-muted",children:D.desc})]}),l.jsx(Ul,{enabled:N[D.key],onChange:R=>K(D.key,R),disabled:k,size:"sm"})]},D.key))]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-line/30",children:[l.jsx("button",{onClick:q,disabled:M,className:`w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border text-[11px] font-medium transition-all ${M?"bg-surface2/50 border-line/30 text-muted cursor-not-allowed":"bg-accent/10 border-accent/30 text-accent hover:bg-accent/20"}`,children:M?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-3 w-3 border-2 border-accent/30 border-t-accent rounded-full animate-spin"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ol,{className:"h-3.5 w-3.5"}),"Send Test Notification"]})}),O&&l.jsx("div",{className:`mt-2 text-center text-[10px] ${O.success?"text-emerald-400":"text-red-400"}`,children:O.message}),l.jsx("div",{className:"mt-2 text-center text-[9px] text-muted/70",children:"Changes are saved automatically"})]})]})})]})}function zi({variant:t="info",children:e,className:s=""}){return l.jsx("div",{className:`banner banner-${t} ${s}`,children:e})}function Hi({variant:t="muted",children:e,className:s=""}){return l.jsx("span",{className:`badge badge-${t} ${s}`,children:e})}function aO(){const{toast:t}=ou(),[e,s]=y.useState(!1),[n,i]=y.useState(65),[r,a]=y.useState(!1),[o,c]=y.useState(!1),[d,u]=y.useState("");return l.jsxs("main",{className:"mx-auto max-w-6xl px-6 py-10 space-y-12",children:[l.jsxs("header",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl font-bold text-text",children:"Darkstar Design System"}),l.jsx("p",{className:"text-muted text-lg mt-2",children:"Visual reference & component showcase"})]}),l.jsx(zp,{})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Color Palette"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[{name:"Accent",var:"--color-accent",hex:"#FFCE59"},{name:"Good",var:"--color-good",hex:"#1FB256"},{name:"Warn",var:"--color-warn",hex:"#F59E0B"},{name:"Bad",var:"--color-bad",hex:"#F15132"},{name:"Water",var:"--color-water",hex:"#4EA8DE"},{name:"House",var:"--color-house",hex:"#A855F7"},{name:"Peak",var:"--color-peak",hex:"#EC4899"},{name:"Night",var:"--color-night",hex:"#06B6D4"},{name:"Grid",var:"--color-grid",hex:"#64748B"},{name:"Neutral",var:"--color-neutral",hex:"#989FA5"},{name:"AI",var:"--color-ai",hex:"#8B5CF6"}].map(h=>l.jsxs("div",{className:"rounded-ds-md overflow-hidden shadow-float bg-surface",children:[l.jsx("div",{className:"h-16",style:{backgroundColor:`rgb(var(${h.var}))`}}),l.jsxs("div",{className:"p-2",children:[l.jsx("div",{className:"text-sm font-medium text-text",children:h.name}),l.jsx("div",{className:"text-xs text-muted font-mono",children:h.hex})]})]},h.name))}),l.jsx("h3",{className:"text-lg font-medium text-text mt-6 mb-3",children:"Surface Colors"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Canvas",var:"--color-canvas"},{name:"Surface",var:"--color-surface"},{name:"Surface2",var:"--color-surface2"},{name:"Line",var:"--color-line"}].map(h=>l.jsx("div",{className:"h-20 rounded-ds-md border border-line flex items-center justify-center",style:{backgroundColor:`rgb(var(${h.var}))`},children:l.jsx("span",{className:"text-sm font-medium text-text",children:h.name})},h.name))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Typography"}),l.jsxs("div",{className:"space-y-3 bg-surface p-6 rounded-ds-lg",children:[l.jsx("div",{className:"text-4xl",children:"text-4xl (28px)  Page Titles"}),l.jsx("div",{className:"text-3xl",children:"text-3xl (24px)  Section Headers"}),l.jsx("div",{className:"text-2xl",children:"text-2xl (18px)  Subsections"}),l.jsx("div",{className:"text-xl",children:"text-xl (16px)  Large Body"}),l.jsx("div",{className:"text-lg",children:"text-lg (14px)  Body Text"}),l.jsx("div",{className:"text-md",children:"text-md (13px)  Secondary"}),l.jsx("div",{className:"text-base",children:"text-base (12px)  Small Body"}),l.jsx("div",{className:"text-sm",children:"text-sm (11px)  Labels"}),l.jsx("div",{className:"text-xs",children:"text-xs (10px)  Micro"})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Buttons"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsx("button",{className:"btn btn-primary",children:"Primary"}),l.jsx("button",{className:"btn btn-secondary",children:"Secondary"}),l.jsx("button",{className:"btn btn-danger",children:"Danger"}),l.jsx("button",{className:"btn btn-ghost",children:"Ghost"}),l.jsx("button",{className:"btn btn-primary btn-pill",children:"Pill Primary"}),l.jsx("button",{className:"btn btn-ghost btn-pill",children:"Pill Ghost"})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center mt-4",children:[l.jsx("button",{className:"btn btn-primary",disabled:!0,children:"Disabled Primary"}),l.jsx("button",{className:"btn btn-secondary",disabled:!0,children:"Disabled Secondary"}),l.jsx("button",{className:"btn btn-ghost",disabled:!0,children:"Disabled Ghost"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("p",{className:"text-sm text-muted mb-2",children:"Dynamic color (using CSS custom property):"}),l.jsx("button",{className:"btn btn-pill btn-dynamic",style:{"--btn-bg":"rgb(var(--color-water))","--btn-text":"#fff"},children:"Custom Water Color"})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Banners / Alerts"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(zi,{variant:"info",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Info Banner  Neutral information message"})]}),l.jsxs(zi,{variant:"success",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Success Banner  Action completed successfully"})]}),l.jsxs(zi,{variant:"warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Warning Banner  Requires attention"})]}),l.jsxs(zi,{variant:"error",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Error Banner  Critical issue detected"})]}),l.jsxs(zi,{variant:"purple",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Purple Banner  Special mode (shadow mode)"})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Badges"}),l.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[l.jsx(Hi,{variant:"accent",children:"Accent"}),l.jsx(Hi,{variant:"good",children:"Good"}),l.jsx(Hi,{variant:"warn",children:"Warning"}),l.jsx(Hi,{variant:"bad",children:"Error"}),l.jsx(Hi,{variant:"muted",children:"Muted"})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Form Elements"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-muted mb-2",children:"Text Input"}),l.jsx("input",{type:"text",className:"input",placeholder:"Enter value..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-muted mb-2",children:"Number Input"}),l.jsx("input",{type:"number",className:"input",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-muted mb-2",children:"Toggle Switch"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(e0,{checked:e,onCheckedChange:s}),l.jsx("span",{className:"text-sm text-text",children:e?"On":"Off"})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Loading States"}),l.jsxs("div",{className:"flex items-center gap-8",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted mb-2",children:"Spinner"}),l.jsx("div",{className:"spinner"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-sm text-muted mb-2",children:"Skeleton"}),l.jsx("div",{className:"skeleton h-8 w-full"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm text-muted mb-2",children:["Progress Bar (",n,"%)"]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${n}%`}})}),l.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:h=>i(Number(h.target.value)),className:"slider mt-2"})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Data Visualization"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-surface p-4 rounded-ds-lg",children:[l.jsx("div",{className:"text-sm text-muted mb-3",children:"Mini-Bar Chart (Solar)"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"mini-bars",children:[40,55,75,90,100,85,70,45].map((h,f)=>l.jsx("div",{className:"mini-bar",style:{height:`${h}%`,background:"rgb(var(--color-accent))"}},f))}),l.jsx("span",{className:"font-mono font-bold text-accent",children:"4.2kW"})]})]}),l.jsxs("div",{className:"bg-surface p-4 rounded-ds-lg",children:[l.jsx("div",{className:"text-sm text-muted mb-3",children:"Mini-Bar Chart (Battery)"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"mini-bars",children:[60,65,70,75,80,82,85,85].map((h,f)=>l.jsx("div",{className:"mini-bar",style:{height:`${h}%`,background:"rgb(var(--color-good))"}},f))}),l.jsx("span",{className:"font-mono font-bold text-good",children:"85%"})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Chart.js  Live Example"}),l.jsx("p",{className:"text-muted text-sm mb-4",children:"This is the actual ChartCard component used throughout Darkstar."}),l.jsx("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:l.jsx(ax,{day:"today",showDayToggle:!1})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Power Flow Visualization"}),l.jsx("p",{className:"text-muted text-sm mb-4",children:"Animated energy flow between sources and loads (inspired by power-flow-card-plus)."}),l.jsx("div",{className:"bg-surface rounded-ds-lg p-8 shadow-float",children:l.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full max-w-lg mx-auto",children:[l.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-accent))",strokeWidth:3,fill:"none"},children:l.jsx("path",{d:"M100,50 L200,150"})}),l.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-good))",strokeWidth:3,fill:"none",animationDelay:"0.25s"},children:l.jsx("path",{d:"M200,150 L200,250"})}),l.jsx("g",{className:"power-flow-line",style:{stroke:"rgb(var(--color-house))",strokeWidth:3,fill:"none",animationDelay:"0.5s"},children:l.jsx("path",{d:"M200,150 L300,150"})}),l.jsx("g",{style:{stroke:"rgb(var(--color-grid))",strokeWidth:3,fill:"none",strokeDasharray:"5 5"},children:l.jsx("path",{d:"M100,250 L200,150"})}),l.jsxs("g",{transform:"translate(100, 50)",children:[l.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-accent))",strokeWidth:"3",className:"animate-glow"}),l.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-accent))",fontSize:"24",children:""}),l.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"4.2 kW"}),l.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Solar"})]}),l.jsxs("g",{transform:"translate(200, 150)",children:[l.jsx("circle",{r:"40",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-house))",strokeWidth:"3"}),l.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-house))",fontSize:"24",children:""}),l.jsx("text",{y:"-50",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"3.1 kW"})]}),l.jsxs("g",{transform:"translate(200, 250)",children:[l.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-good))",strokeWidth:"3"}),l.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-good))",fontSize:"24",children:""}),l.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"85%"}),l.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"+0.6 kW"})]}),l.jsxs("g",{transform:"translate(100, 250)",children:[l.jsx("circle",{r:"35",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-grid))",strokeWidth:"3"}),l.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-grid))",fontSize:"24",children:""}),l.jsx("text",{y:"55",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"0 W"}),l.jsx("text",{y:"70",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Grid"})]}),l.jsxs("g",{transform:"translate(300, 150)",children:[l.jsx("circle",{r:"30",fill:"rgb(var(--color-surface))",stroke:"rgb(var(--color-water))",strokeWidth:"3"}),l.jsx("text",{y:"5",textAnchor:"middle",fill:"rgb(var(--color-water))",fontSize:"20",children:""}),l.jsx("text",{y:"50",textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:"0.5 kW"}),l.jsx("text",{y:"65",textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:"Water"})]})]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Animation Examples"}),l.jsx("p",{className:"text-muted text-sm mb-4",children:"CSS animations available in the design system."}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[l.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-accent animate-pulse"}),l.jsx("div",{className:"text-sm font-medium text-text",children:"Pulse"}),l.jsx("code",{className:"text-xs text-muted",children:".animate-pulse"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[l.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-good animate-bounce"}),l.jsx("div",{className:"text-sm font-medium text-text",children:"Bounce"}),l.jsx("code",{className:"text-xs text-muted",children:".animate-bounce"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[l.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-accent animate-glow"}),l.jsx("div",{className:"text-sm font-medium text-text",children:"Glow"}),l.jsx("code",{className:"text-xs text-muted",children:".animate-glow"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[l.jsx("div",{className:"spinner mx-auto mb-3",style:{width:"3rem",height:"3rem",borderWidth:"4px"}}),l.jsx("div",{className:"text-sm font-medium text-text",children:"Spinner"}),l.jsx("code",{className:"text-xs text-muted",children:".spinner"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Skeleton Loading"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"skeleton h-4 w-3/4"}),l.jsx("div",{className:"skeleton h-4 w-1/2"}),l.jsx("div",{className:"skeleton h-4 w-full"})]}),l.jsx("code",{className:"text-xs text-muted mt-2 block",children:".skeleton"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Mini Bar Animation"}),l.jsx("div",{className:"mini-bars",children:[40,60,80,100,80,60,40,20].map((h,f)=>l.jsx("div",{className:"mini-bar animate-pulse",style:{height:`${h}%`,background:"rgb(var(--color-accent))",animationDelay:`${f*.1}s`}},f))}),l.jsx("code",{className:"text-xs text-muted mt-2 block",children:".mini-bars"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float text-center",children:[l.jsx("button",{className:"btn btn-primary animate-glow mb-2",children:"Glowing Button"}),l.jsx("div",{className:"text-sm font-medium text-text",children:"Button Glow"}),l.jsx("code",{className:"text-xs text-muted",children:".btn + .animate-glow"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("div",{className:"text-sm font-medium text-text mb-2",children:"Animated Progress"}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-bar-fill",style:{width:"75%",animation:"skeleton-shimmer 1.5s infinite",background:"linear-gradient(90deg, rgb(var(--color-accent)), rgb(var(--color-accent2)), rgb(var(--color-accent)))",backgroundSize:"200% 100%"}})}),l.jsx("code",{className:"text-xs text-muted mt-2 block",children:".progress-bar"})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Metric Cards"}),l.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[{border:"solar",label:"Solar",value:"4.2 kW",sub:"+12% today"},{border:"battery",label:"Battery",value:"78%",sub:"Target: 85%"},{border:"house",label:"House Load",value:"1.8 kW",sub:"Avg: 2.1 kW"},{border:"water",label:"Water",value:"2.4 kWh",sub:"Today"},{border:"grid",label:"Grid",value:"-0.5 kW",sub:"Exporting"},{border:"bad",label:"Error",value:"3",sub:"Issues detected"}].map(h=>l.jsxs("div",{className:`metric-card-border metric-card-border-${h.border} bg-surface p-4`,children:[l.jsx("div",{className:"text-xs text-muted uppercase tracking-wider",children:h.label}),l.jsx("div",{className:"text-2xl font-bold text-text mt-1",children:h.value}),l.jsx("div",{className:"text-xs text-muted mt-1",children:h.sub})]},h.border))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Border Radius"}),l.jsx("div",{className:"flex gap-4 items-end",children:[{name:"sm",size:"8px"},{name:"md",size:"12px"},{name:"lg",size:"16px"},{name:"xl",size:"20px"},{name:"pill",size:"9999px"}].map(h=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`w-16 h-16 bg-accent rounded-ds-${h.name}`}),l.jsx("div",{className:"text-xs text-muted mt-2",children:h.name}),l.jsx("div",{className:"text-xs text-muted",children:h.size})]},h.name))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Spacing Scale (4px grid)"}),l.jsx("div",{className:"flex gap-4 items-end flex-wrap",children:[1,2,3,4,5,6,8,10,12].map(h=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-accent",style:{width:`var(--space-${h})`,height:`var(--space-${h})`,minWidth:"4px",minHeight:"4px"}}),l.jsxs("div",{className:"text-xs text-muted mt-2",children:["ds-",h]})]},h))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Dark / Light Mode Comparison"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"rounded-ds-lg overflow-hidden",style:{background:"#0f1216"},children:[l.jsx("div",{className:"px-4 py-3",style:{background:"#14191f"},children:l.jsx("span",{className:"text-sm font-semibold",style:{color:"#e6e9ef"},children:" Dark Mode  Glow Buttons"})}),l.jsxs("div",{className:"p-4 space-y-2",style:{background:"#14191f"},children:[l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[l.jsx("span",{style:{color:"#FFCE59"},children:" Solar"}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#FFCE59"},children:"4.2kW"})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[l.jsx("span",{style:{color:"#1FB256"},children:" Battery"}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#1FB256"},children:"85%"})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[l.jsx("span",{style:{color:"#A855F7"},children:" House"}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#e6e9ef"},children:"1.8kW"})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#181e25"},children:[l.jsx("span",{style:{color:"#4EA8DE"},children:" Water"}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#e6e9ef"},children:"58C"})]}),l.jsxs("div",{className:"flex gap-2 pt-3",children:[l.jsx("button",{style:{background:"#FFCE59",color:"#1a1d23",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",boxShadow:"0 0 16px rgba(255, 206, 89, 0.4), 0 0 32px rgba(255, 206, 89, 0.2)"},children:" Boost"}),l.jsx("button",{style:{background:"#989FA5",color:"#fff",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",boxShadow:"0 0 12px rgba(152, 159, 165, 0.3)"},children:" Vacation"})]})]})]}),l.jsxs("div",{className:"rounded-ds-lg overflow-hidden",style:{background:"#DFDFDF"},children:[l.jsx("div",{className:"px-4 py-3",style:{background:"#EFEFEF"},children:l.jsx("span",{className:"text-sm font-semibold",style:{color:"#2D2D2D"},children:" Light Mode  Flat Buttons (TE Style)"})}),l.jsxs("div",{className:"p-4 space-y-2",style:{background:"#EFEFEF"},children:[l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[l.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",l.jsx("b",{style:{color:"#b38b00"},children:"Solar"})]}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"4.2kW"})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[l.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",l.jsx("b",{style:{color:"#1FB256"},children:"Battery"})]}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"85%"})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[l.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",l.jsx("b",{style:{color:"#A855F7"},children:"House"})]}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"1.8kW"})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{background:"#D0D0D0"},children:[l.jsxs("span",{style:{color:"#2D2D2D"},children:[" ",l.jsx("b",{style:{color:"#4EA8DE"},children:"Water"})]}),l.jsx("span",{className:"font-mono font-bold",style:{color:"#2D2D2D"},children:"58C"})]}),l.jsxs("div",{className:"flex gap-2 pt-3",children:[l.jsx("button",{style:{background:"#FFCE59",color:"#2D2D2D",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",border:"none"},children:" Boost"}),l.jsx("button",{style:{background:"#989FA5",color:"#fff",padding:"8px 16px",borderRadius:"8px",fontWeight:600,fontSize:"11px",border:"none"},children:" Vacation"})]})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" Future Components (Inspiration)"}),l.jsx("p",{className:"text-muted text-sm mb-6",children:"These components are not yet implemented but can be added as needed."}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Card"}),l.jsx("p",{className:"text-xs text-muted",children:"Container with shadow, padding, and rounded corners for grouping content."}),l.jsx("div",{className:"mt-3 p-3 bg-surface2 rounded-ds-md",children:l.jsx("div",{className:"text-xs text-text",children:"Card content goes here..."})})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Select (Dropdown)"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Custom searchable dropdown."}),l.jsx(Qy,{options:[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"},{label:"Delete",value:"3",group:"Danger"}],value:"1",onChange:()=>{}})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Tabs"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Navigation between views."}),l.jsxs("div",{className:"flex gap-1 bg-surface2 p-1 rounded-ds-md",children:[l.jsx("div",{className:"px-3 py-1.5 text-xs font-medium bg-accent text-black rounded",children:"Active"}),l.jsx("div",{className:"px-3 py-1.5 text-xs text-muted rounded",children:"Tab 2"}),l.jsx("div",{className:"px-3 py-1.5 text-xs text-muted rounded",children:"Tab 3"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Avatars"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"User profile images or initials."}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center text-xs font-bold text-black",children:"JD"}),l.jsx("div",{className:"w-8 h-8 rounded-full bg-water flex items-center justify-center text-xs font-bold text-white",children:"AB"}),l.jsx("div",{className:"w-8 h-8 rounded-full bg-house flex items-center justify-center text-xs font-bold text-white",children:"?"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Tooltip"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Hover for more info."}),l.jsx("span",{className:"tooltip px-3 py-1.5 bg-surface2 rounded text-xs text-text cursor-help","data-tooltip":"This is a tooltip!",children:"Hover me"})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Data Table"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Tabular data display."}),l.jsxs("div",{className:"text-xs",children:[l.jsxs("div",{className:"flex gap-2 py-1 border-b border-line text-muted font-medium",children:[l.jsx("span",{className:"flex-1",children:"Name"}),l.jsx("span",{className:"w-16 text-right",children:"Value"})]}),l.jsxs("div",{className:"flex gap-2 py-1 text-text",children:[l.jsx("span",{className:"flex-1",children:"Solar"}),l.jsx("span",{className:"w-16 text-right text-accent",children:"4.2kW"})]}),l.jsxs("div",{className:"flex gap-2 py-1 text-text",children:[l.jsx("span",{className:"flex-1",children:"Battery"}),l.jsx("span",{className:"w-16 text-right text-good",children:"85%"})]})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Gauge / Dial"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Circular progress indicator."}),l.jsxs("div",{className:"w-16 h-16 rounded-full border-4 border-surface2 relative",children:[l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-accent border-r-accent",style:{transform:"rotate(45deg)"}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-text",children:"75%"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Notification Badge"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Alert indicator on icons."}),l.jsxs("div",{className:"relative inline-block",children:[l.jsx("div",{className:"w-10 h-10 bg-surface2 rounded-lg flex items-center justify-center text-lg",children:""}),l.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-bad rounded-full flex items-center justify-center text-[10px] font-bold text-white",children:"3"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Stepper"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Multi-step progress."}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-accent flex items-center justify-center text-[10px] font-bold text-black",children:"1"}),l.jsx("div",{className:"flex-1 h-0.5 bg-accent"}),l.jsx("div",{className:"w-6 h-6 rounded-full bg-accent flex items-center justify-center text-[10px] font-bold text-black",children:"2"}),l.jsx("div",{className:"flex-1 h-0.5 bg-surface2"}),l.jsx("div",{className:"w-6 h-6 rounded-full bg-surface2 flex items-center justify-center text-[10px] font-bold text-muted",children:"3"})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:" More Future Components"}),l.jsx("p",{className:"text-muted text-sm mb-6",children:"Additional component patterns for future implementation."}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Modal / Dialog"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Overlay for confirmations & forms."}),l.jsx("button",{className:"btn btn-primary text-xs",onClick:()=>c(!0),children:"Open Modal"}),l.jsx(l0,{open:o,onOpenChange:c,title:"Example Modal",footer:l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"btn btn-ghost",onClick:()=>c(!1),children:"Cancel"}),l.jsx("button",{className:"btn btn-primary",onClick:()=>c(!1),children:"Confirm"})]}),children:l.jsx("p",{className:"text-text",children:"This is a reusable modal component using React Portal."})})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Accordion"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Expandable content sections."}),l.jsxs("div",{className:"bg-surface2 rounded-ds-md overflow-hidden",children:[l.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-text flex justify-between items-center cursor-pointer",onClick:()=>a(!r),children:[l.jsx("span",{children:"Click to expand"}),l.jsx("span",{children:r?"":"+"})]}),r&&l.jsx("div",{className:"px-3 py-2 text-xs text-muted border-t border-line",children:"Hidden content revealed!"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Search Input"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"With autocomplete dropdown."}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input pr-8",placeholder:"Search entities...",value:d,onChange:h=>u(h.target.value)}),l.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted",children:""})]}),d&&l.jsxs("div",{className:"mt-1 bg-surface2 rounded-ds-md p-1 shadow-lg",children:[l.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"sensor.solar_power"}),l.jsx("div",{className:"px-3 py-2 text-xs text-text hover:bg-accent/10 rounded cursor-pointer",children:"sensor.battery_soc"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Date Picker"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Calendar date selection."}),l.jsxs("div",{className:"bg-surface2 rounded-ds-md p-2 w-48",children:[l.jsx("div",{className:"text-xs font-medium text-text text-center mb-2",children:"December 2024"}),l.jsxs("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-center",children:[["M","T","W","T","F","S","S"].map((h,f)=>l.jsx("div",{className:"text-muted",children:h},f)),[...Array(31)].map((h,f)=>l.jsx("div",{className:`py-1 rounded cursor-pointer ${f===30?"bg-accent text-black font-bold":"text-text hover:bg-accent/20"}`,children:f+1},f))]})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Toast Notification"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Temporary status messages."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{className:"btn btn-secondary w-full text-xs",onClick:()=>t({variant:"success",message:"Success!",description:"Action completed successfully."}),children:"Trigger Success Toast"}),l.jsx("button",{className:"btn btn-ghost w-full text-xs border border-bad/50 text-bad hover:bg-bad/10",onClick:()=>t({variant:"error",message:"Error!",description:"Something went wrong."}),children:"Trigger Error Toast"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Breadcrumbs"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Navigation path trail."}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("span",{className:"text-accent hover:underline cursor-pointer",children:"Home"}),l.jsx("span",{className:"text-muted",children:"/"}),l.jsx("span",{className:"text-accent hover:underline cursor-pointer",children:"Settings"}),l.jsx("span",{className:"text-muted",children:"/"}),l.jsx("span",{className:"text-text font-medium",children:"Entities"})]})]}),l.jsxs("div",{className:"bg-surface rounded-ds-lg p-4 shadow-float col-span-full lg:col-span-2",children:[l.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:" Timeline / Activity Log"}),l.jsx("p",{className:"text-xs text-muted mb-3",children:"Chronological event display."}),l.jsx("div",{className:"space-y-3",children:[{time:"14:32",event:"Battery charging started",color:"good"},{time:"14:15",event:"Solar production peaked at 4.2kW",color:"accent"},{time:"13:45",event:"Grid export enabled",color:"water"}].map((h,f)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 bg-${h.color}`}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-mono text-muted",children:h.time}),l.jsx("div",{className:"text-xs text-text",children:h.event})]})]},f))})]})]})]}),o&&l.jsx("div",{className:"modal-overlay",onClick:()=>c(!1),children:l.jsxs("div",{className:"modal",onClick:h=>h.stopPropagation(),children:[l.jsx("h3",{className:"text-lg font-semibold text-text mb-2",children:"Modal Title"}),l.jsx("p",{className:"text-sm text-muted mb-4",children:"This is a sample modal dialog. It uses the design system's modal classes."}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx("button",{className:"btn btn-ghost",onClick:()=>c(!1),children:"Cancel"}),l.jsx("button",{className:"btn btn-primary",onClick:()=>c(!1),children:"Confirm"})]})]})}),l.jsxs("footer",{className:"text-center text-muted text-sm pt-8 border-t border-line",children:[l.jsxs("p",{children:["SSOT: ",l.jsx("code",{className:"bg-surface2 px-2 py-1 rounded text-xs",children:"frontend/src/index.css"})]}),l.jsx("p",{className:"mt-2",children:"Toggle dark/light mode using the switch in the header."})]})]})}const yp=t=>{switch(t){case"sunny":return{solar:4.2,battery:1.5,grid:-2,house:2.5,water:.3,batterySOC:75};case"evening":return{solar:0,battery:-2.8,grid:.5,house:3.1,water:.2,batterySOC:45};case"charging":return{solar:.5,battery:3,grid:2.5,house:1,water:0,batterySOC:30};case"exporting":return{solar:6,battery:.5,grid:-4.5,house:1.5,water:.5,batterySOC:95};default:return{solar:2,battery:0,grid:.5,house:2.5,water:0,batterySOC:60}}};function nb(t,e){const s=e.x-t.x,n=e.y-t.y;return Math.sqrt(s*s+n*n)}function oO({from:t,to:e,power:s,color:n,reverse:i}){const r=Math.abs(s),a=i?e:t,o=i?t:e,c=4,d=Math.max(3-r*.4,.8);return l.jsxs("g",{children:[l.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:2,strokeOpacity:.25}),r>.1&&Array.from({length:c}).map((u,h)=>l.jsx(Ue.circle,{r:4,fill:n,initial:{opacity:0},animate:{cx:[a.x,o.x],cy:[a.y,o.y],opacity:[0,.9,.9,0]},transition:{duration:d,repeat:1/0,delay:h/c*d,ease:"linear"}},h))]})}function lO({from:t,to:e,power:s,color:n,reverse:i}){const r=Math.abs(s),a=i?e:t,o=i?t:e,c=nb(a,o),d=Math.max(2-r*.3,.6);return l.jsxs("g",{children:[l.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:2,strokeOpacity:.2}),r>.1&&l.jsx(Ue.line,{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:3,strokeOpacity:.7,strokeDasharray:"8 12",initial:{strokeDashoffset:0},animate:{strokeDashoffset:-c},transition:{duration:d,repeat:1/0,ease:"linear"}})]})}function cO({from:t,to:e,power:s,color:n,reverse:i}){const r=Math.abs(s),a=i?e:t,o=i?t:e,c=nb(a,o),d=Math.max(2.5-r*.4,.8);return l.jsxs("g",{children:[l.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:2,strokeOpacity:.15}),r>.1&&l.jsx(Ue.line,{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:4,strokeOpacity:.8,strokeLinecap:"round",strokeDasharray:"6 14",initial:{strokeDashoffset:0},animate:{strokeDashoffset:-c},transition:{duration:d,repeat:1/0,ease:"linear"}})]})}function dO({from:t,to:e,power:s,color:n,reverse:i}){const r=Math.abs(s),a=i?e:t,o=i?t:e,c=Math.max(2-r*.3,.6),d=o.x-a.x,u=o.y-a.y,h=Math.atan2(u,d)*180/Math.PI,f=3;return l.jsxs("g",{children:[l.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:2,strokeOpacity:.2}),r>.1&&Array.from({length:f}).map((m,p)=>l.jsx(Ue.g,{initial:{opacity:0},animate:{x:[a.x,o.x],y:[a.y,o.y],opacity:[0,1,1,0]},transition:{duration:c,repeat:1/0,delay:p/f*c,ease:"linear"},children:l.jsx("polygon",{points:"-6,-4 0,0 -6,4",fill:n,transform:`rotate(${h})`})},p))]})}function uO({from:t,to:e,power:s,color:n,reverse:i}){const r=Math.abs(s),a=i?e:t,o=i?t:e,c=2,d=2+r*2;return l.jsx("g",{children:l.jsx(Ue.line,{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeLinecap:"round",initial:{strokeWidth:c,strokeOpacity:.3},animate:r>.1?{strokeWidth:[c,d,c],strokeOpacity:[.3,.7,.3]}:{strokeWidth:c,strokeOpacity:.2},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})})}function hO({from:t,to:e,power:s,color:n,id:i,reverse:r}){const a=Math.abs(s),o=r?e:t,c=r?t:e,d=Math.max(2.5-a*.4,1);return l.jsxs("g",{children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:`heat-${i}`,gradientUnits:"userSpaceOnUse",x1:o.x,y1:o.y,x2:c.x,y2:c.y,children:[l.jsx(Ue.stop,{offset:"0%",stopColor:n,initial:{stopOpacity:.8},animate:{stopOpacity:[.8,.2,.8]},transition:{duration:d,repeat:1/0}}),l.jsx(Ue.stop,{offset:"100%",stopColor:n,initial:{stopOpacity:.1},animate:{stopOpacity:[.1,.6,.1]},transition:{duration:d,repeat:1/0,delay:d*.5}})]})}),l.jsx("line",{x1:o.x,y1:o.y,x2:c.x,y2:c.y,stroke:a>.1?`url(#heat-${i})`:n,strokeWidth:4+a,strokeOpacity:a>.1?1:.15,strokeLinecap:"round"})]})}function fO({from:t,to:e,power:s,color:n,reverse:i}){const r=Math.abs(s),a=i?e:t,o=i?t:e,c=Math.max(2-r*.25,.8),d=(a.x+o.x)/2,u=(a.y+o.y)/2;return l.jsxs("g",{children:[l.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:n,strokeWidth:2,strokeOpacity:.2}),r>.1&&l.jsxs(l.Fragment,{children:[l.jsx(Ue.circle,{cx:a.x,cy:a.y,fill:"none",stroke:n,strokeWidth:2,initial:{r:5,opacity:.8},animate:{r:25,opacity:0},transition:{duration:c*.8,repeat:1/0}}),l.jsx(Ue.circle,{cx:d,cy:u,fill:"none",stroke:n,strokeWidth:2,initial:{r:5,opacity:.6},animate:{r:20,opacity:0},transition:{duration:c*.8,repeat:1/0,delay:c*.4}})]})]})}function $i({x:t,y:e,iconType:s,label:n,value:i,color:r,glowIntensity:a=0,isCharging:o}){const d=35+20*a,u={solar:Dr,house:Ip,battery:o?ur:yo,grid:Dt,water:hr}[s];return l.jsxs("g",{transform:`translate(${t}, ${e})`,children:[a>.1&&l.jsx(Ue.circle,{r:d,fill:r,initial:{opacity:0},animate:{opacity:.12+a*.15},transition:{duration:.3}}),l.jsx("circle",{r:35,fill:"rgb(var(--color-surface))",stroke:r,strokeWidth:3}),l.jsx("foreignObject",{x:-12,y:-12,width:24,height:24,children:l.jsx(u,{size:24,style:{color:r},strokeWidth:1.5})}),l.jsx("text",{y:55,textAnchor:"middle",fill:"rgb(var(--color-text))",fontSize:"11",fontWeight:"600",children:i}),l.jsx("text",{y:70,textAnchor:"middle",fill:"rgb(var(--color-muted))",fontSize:"9",children:n})]})}function mO({data:t,style:e}){const s={solar:{x:100,y:60},house:{x:200,y:150},battery:{x:200,y:260},grid:{x:100,y:260},water:{x:300,y:150}},n={solar:"rgb(var(--color-accent))",battery:"rgb(var(--color-good))",grid:"rgb(var(--color-grid))",house:"rgb(var(--color-house))",water:"rgb(var(--color-water))"},i=6,r={solar:Math.min(t.solar/i,1),battery:Math.min(Math.abs(t.battery)/i,1),grid:Math.min(Math.abs(t.grid)/i,1),house:Math.min(t.house/i,1),water:Math.min(t.water/i,1)},a=(o,c,d,u,h,f)=>{if(Math.abs(u)<.1)return l.jsx("line",{x1:c.x,y1:c.y,x2:d.x,y2:d.y,stroke:h,strokeWidth:1,strokeOpacity:.1},o);switch(e){case"particles":return l.jsx(oO,{from:c,to:d,power:u,color:h,reverse:f},o);case"glow-flow":return l.jsx(lO,{id:o,from:c,to:d,power:u,color:h,reverse:f},o);case"dash-flow":return l.jsx(cO,{from:c,to:d,power:u,color:h,reverse:f},o);case"arrows":return l.jsx(dO,{from:c,to:d,power:u,color:h,reverse:f},o);case"thickness":return l.jsx(uO,{from:c,to:d,power:u,color:h,reverse:f},o);case"heat-trail":return l.jsx(hO,{id:o,from:c,to:d,power:u,color:h,reverse:f},o);case"ping":return l.jsx(fO,{from:c,to:d,power:u,color:h,reverse:f},o)}};return l.jsxs("svg",{viewBox:"0 0 400 320",className:"w-full max-w-lg mx-auto",children:[a("solar-house",s.solar,s.house,t.solar,n.solar,!1),a("battery-house",s.battery,s.house,Math.abs(t.battery),n.battery,t.battery>0),a("grid-house",s.grid,s.house,Math.abs(t.grid),n.grid,t.grid<0),a("house-water",s.house,s.water,t.water,n.water,!1),l.jsx($i,{...s.solar,iconType:"solar",label:"Solar",value:`${t.solar.toFixed(1)} kW`,color:n.solar,glowIntensity:e==="glow-flow"?r.solar:0}),l.jsx($i,{...s.house,iconType:"house",label:"House",value:`${t.house.toFixed(1)} kW`,color:n.house,glowIntensity:e==="glow-flow"?r.house:0}),l.jsx($i,{...s.battery,iconType:"battery",label:t.battery>=0?"Charging":"Discharging",value:`${t.batterySOC}%`,color:n.battery,glowIntensity:e==="glow-flow"?r.battery:0,isCharging:t.battery>0}),l.jsx($i,{...s.grid,iconType:"grid",label:t.grid>=0?"Import":"Export",value:`${Math.abs(t.grid).toFixed(1)} kW`,color:n.grid,glowIntensity:e==="glow-flow"?r.grid:0}),l.jsx($i,{...s.water,iconType:"water",label:"Water",value:`${t.water.toFixed(1)} kW`,color:n.water,glowIntensity:e==="glow-flow"?r.water:0})]})}function pO(){const[t,e]=y.useState("particles"),[s,n]=y.useState("sunny"),[i,r]=y.useState(null),a=y.useMemo(()=>i??yp(s),[i,s]),o=[{id:"particles",label:"1. Particles",description:"Clean dots, regular spacing"},{id:"glow-flow",label:"2. Glow + Dash",description:"Hub glow + animated dashes"},{id:"dash-flow",label:"3. Dash Flow",description:"Simple animated dashes"},{id:"arrows",label:"4. Arrows",description:"Chevrons traveling along path"},{id:"thickness",label:"5. Thickness",description:"Line breathes with power"},{id:"heat-trail",label:"6. Heat Trail",description:"Gradient fills like liquid"},{id:"ping",label:"7. Ping",description:"Ripples from source nodes"}],c=[{id:"sunny",label:" Sunny"},{id:"evening",label:" Evening"},{id:"charging",label:" Charging"},{id:"exporting",label:" Exporting"}],d=(u,h)=>{const f=i??yp(s);r({...f,[u]:h})};return l.jsxs("div",{className:"px-4 pt-16 pb-10 lg:px-8 lg:pt-10 space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg font-medium text-text flex items-center gap-2",children:[" Power Flow Lab",l.jsx("span",{className:"px-2 py-0.5 rounded-full bg-accent/20 text-[10px] text-accent uppercase tracking-wider",children:"v2"})]}),l.jsx("p",{className:"text-[11px] text-muted",children:"Compare 7 animation styles  Lucide icons  Improved spacing"})]}),l.jsxs(re,{className:"p-4",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-muted tracking-wider mb-3",children:"Animation Style"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:o.map(u=>l.jsxs("button",{onClick:()=>e(u.id),className:`p-3 rounded-xl border transition-all text-left ${t===u.id?"border-accent bg-accent/10":"border-line/50 hover:border-line"}`,children:[l.jsx("div",{className:"text-[11px] font-medium text-text",children:u.label}),l.jsx("div",{className:"text-[9px] text-muted leading-tight",children:u.description})]},u.id))})]}),l.jsx(re,{className:"p-6",children:l.jsx(tj,{mode:"wait",children:l.jsx(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:l.jsx(mO,{data:a,style:t})},t)})}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[l.jsxs(re,{className:"p-4",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-muted tracking-wider mb-3",children:"Presets"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:c.map(u=>l.jsx("button",{onClick:()=>{n(u.id),r(null)},className:`px-3 py-2 rounded-lg border text-xs transition-all ${s===u.id&&!i?"border-accent bg-accent/10 text-text":"border-line/50 text-muted hover:text-text"}`,children:u.label},u.id))})]}),l.jsxs(re,{className:"p-4",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-muted tracking-wider mb-3",children:"Custom Values"}),l.jsx("div",{className:"space-y-3",children:[{key:"solar",label:"Solar",min:0,max:8},{key:"battery",label:"Battery",min:-5,max:5},{key:"grid",label:"Grid",min:-6,max:6},{key:"house",label:"House",min:0,max:6},{key:"water",label:"Water",min:0,max:3}].map(u=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-xs text-muted w-14",children:u.label}),l.jsx("input",{type:"range",min:u.min,max:u.max,step:.1,value:a[u.key],onChange:h=>d(u.key,parseFloat(h.target.value)),className:"flex-1 h-1 bg-line rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-accent [&::-webkit-slider-thumb]:rounded-full"}),l.jsxs("span",{className:"text-xs text-text w-16 text-right",children:[a[u.key].toFixed(1)," kW"]})]},u.key))})]})]})]})}function gO(){const t=[],e=new Date;e.setMinutes(0,0,0);for(let s=0;s<48;s++){const n=new Date(e.getTime()+s*3600*1e3),i=n.getHours();let r=0;i>5&&i<20&&(r=5*Math.sin((i-6)/14*Math.PI)),r=Math.max(0,r+(Math.random()*.5-.25));let a=1;a+=2*Math.exp(-Math.pow(i-8,2)/4),a+=3*Math.exp(-Math.pow(i-19,2)/6),a=Math.max(.5,a+(Math.random()*.5-.25)),t.push({slot_start:n.toISOString(),base:{pv_kwh:r*.8,load_kwh:a*.9},correction:{pv_kwh:r*.2,load_kwh:a*.1},final:{pv_kwh:r,load_kwh:a}})}return t}function xO(){const[t]=y.useState(gO());return l.jsxs("div",{className:"p-8 space-y-16 max-w-5xl mx-auto pb-32",children:[l.jsxs("header",{children:[l.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-surface2 text-[10px] text-muted uppercase tracking-wider font-bold mb-4",children:"Rev UI6 Brainstorm V2"}),l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Chart Makeover Concepts"}),l.jsx("p",{className:"text-muted text-lg",children:"Exploring radically different aesthetics."})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsx("div",{className:"flex items-baseline justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-accent",children:'Option A: "The Field" (Fixed)'}),l.jsx("p",{className:"text-sm text-muted",children:"Tactile, vertical gradients, glowing lines. Now with a real CSS dot grid."})]})}),l.jsxs("div",{className:"relative h-[360px] w-full bg-surface rounded-2xl border border-line shadow-float overflow-hidden p-6",children:[l.jsx("div",{className:"absolute top-4 right-4 px-2 py-1 bg-surface/50 backdrop-blur rounded text-[10px] text-muted font-mono z-10",children:"OP-1 / TE Inspired"}),l.jsx(La,{slots:t,mode:"pv",variant:"field"})]})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsx("div",{className:"flex items-baseline justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-[#22d3ee] font-mono",children:'Option B: "The OLED"'}),l.jsx("p",{className:"text-sm text-muted",children:"Pure black, neon thin lines, high contrast. No fills."})]})}),l.jsx("div",{className:"relative h-[360px] w-full bg-black rounded-xl border border-[#333] p-6 shadow-2xl font-mono",children:l.jsx(La,{slots:t,mode:"pv",variant:"oled"})})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsx("div",{className:"flex items-baseline justify-between",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-black dark:text-white",children:'Option C: "The Swiss"'}),l.jsx("p",{className:"text-sm text-muted",children:"Brutalist, thick lines, solid colors. No gradients, no fluff."})]})}),l.jsxs("div",{className:"relative h-[360px] w-full bg-[#f4f4f5] border-4 border-black p-8",children:[l.jsx("div",{className:"absolute top-0 left-0 bg-black text-white px-3 py-1 text-xs font-bold uppercase tracking-widest",children:"Power Log"}),l.jsx(La,{slots:t,mode:"pv",variant:"swiss"})]})]})]})}function yO({health:t,onDismiss:e}){if(!t||t.healthy)return null;const s=t.issues.filter(i=>i.severity==="critical"),n=t.issues.filter(i=>i.severity==="warning");return l.jsxs("div",{className:"system-alert-container",children:[s.length>0&&l.jsxs("div",{className:"system-alert system-alert--critical",children:[l.jsx("div",{className:"system-alert__icon",children:""}),l.jsxs("div",{className:"system-alert__content",children:[l.jsxs("div",{className:"system-alert__title",children:["System Error",s.length>1?"s":""," Detected"]}),l.jsx("ul",{className:"system-alert__list",children:s.map((i,r)=>l.jsxs("li",{className:"system-alert__item",children:[l.jsx("strong",{children:i.message}),i.entity_id&&l.jsx("code",{className:"system-alert__entity",children:i.entity_id}),l.jsx("div",{className:"system-alert__guidance",children:i.guidance})]},r))})]}),e&&l.jsx("button",{className:"system-alert__dismiss",onClick:e,title:"Dismiss (will reappear on next check)",children:""})]}),n.length>0&&l.jsxs("div",{className:"system-alert system-alert--warning",children:[l.jsx("div",{className:"system-alert__icon",children:""}),l.jsxs("div",{className:"system-alert__content",children:[l.jsxs("div",{className:"system-alert__title",children:["Warning",n.length>1?"s":""]}),l.jsx("ul",{className:"system-alert__list",children:n.map((i,r)=>l.jsxs("li",{className:"system-alert__item",children:[l.jsx("strong",{children:i.message}),l.jsx("div",{className:"system-alert__guidance",children:i.guidance})]},r))})]})]})]})}function bO({children:t}){const[e,s]=y.useState([]),n=y.useCallback(r=>{s(a=>a.filter(o=>o.id!==r))},[]),i=y.useCallback(({message:r,description:a,variant:o})=>{const c=Math.random().toString(36).substring(2,9);s(d=>[...d,{id:c,message:r,description:a,variant:o}]),setTimeout(()=>{n(c)},5e3)},[n]);return l.jsxs(Xy.Provider,{value:{toast:i,dismiss:n},children:[t,bp.createPortal(l.jsx("div",{className:"fixed bottom-0 right-0 z-[100] p-6 space-y-4 max-w-sm w-full pointer-events-none",children:e.map(r=>l.jsxs("div",{className:`
                                pointer-events-auto
                                flex gap-3 p-4 rounded-ds-lg shadow-2xl border
                                animate-in slide-in-from-right-full duration-300
                                ${vO(r.variant)}
                            `,children:[l.jsx("div",{className:"shrink-0 mt-0.5",children:_O(r.variant)}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-sm",children:r.message}),r.description&&l.jsx("div",{className:"text-xs opacity-90 mt-1",children:r.description})]}),l.jsx("button",{onClick:()=>n(r.id),className:"shrink-0 -mt-1 -mr-1 p-1 rounded hover:bg-black/10 transition-colors",children:l.jsx(ui,{className:"h-4 w-4"})})]},r.id))}),document.body)]})}function vO(t){switch(t){case"success":return"bg-surface2 border-good text-text";case"error":return"bg-bad text-white border-bad";case"warning":return"bg-warn text-black border-warn";case"info":return"bg-surface2 border-line text-text";default:return""}}function _O(t){switch(t){case"success":return l.jsx(Rp,{className:"h-5 w-5 text-good"});case"error":return l.jsx(jv,{className:"h-5 w-5 text-white"});case"warning":return l.jsx(Na,{className:"h-5 w-5 text-black"});case"info":return l.jsx(ec,{className:"h-5 w-5 text-accent"});default:return null}}function TO(){const[t,e]=y.useState(!1),[s,n]=y.useState(null);return y.useEffect(()=>{let i=!1,r=0;const a=async()=>{try{const[,c]=await Promise.all([G.status(),G.health()]);if(i)return;r=0,e(!1),n(c)}catch{if(i)return;r+=1,r>=3&&(e(!0),n(null))}};a();const o=window.setInterval(a,6e4);return()=>{i=!0,window.clearInterval(o)}},[]),l.jsx(zv,{children:l.jsx(bO,{children:l.jsxs(mv,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[l.jsx(Bv,{}),l.jsxs("div",{className:"lg:pl-[96px]",children:[s&&!s.healthy&&l.jsx(yO,{health:s}),t&&!s&&l.jsx("div",{className:"bg-amber-900/80 border-b border-amber-500/60 text-amber-100 text-[11px] px-4 py-2 flex items-center justify-between",children:l.jsx("span",{children:"Backend appears offline or degraded. Some data may be stale or unavailable."})}),l.jsxs(rv,{children:[l.jsx(ms,{path:"/",element:l.jsx(PP,{})}),l.jsx(ms,{path:"/executor",element:l.jsx(rO,{})}),l.jsx(ms,{path:"/aurora",element:l.jsx(iO,{})}),l.jsx(ms,{path:"/debug",element:l.jsx(DP,{})}),l.jsx(ms,{path:"/settings",element:l.jsx(UP,{})}),l.jsx(ms,{path:"/design-system",element:l.jsx(aO,{})}),l.jsx(ms,{path:"/power-flow-lab",element:l.jsx(pO,{})}),l.jsx(ms,{path:"/chart-examples",element:l.jsx(xO,{})})]})]})]})})})}export{TO as default};
